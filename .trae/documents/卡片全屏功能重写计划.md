# 卡片全屏功能重写计划

## 问题分析

### 当前问题
- 全屏时卡片被挪到角落，看不到内容
- 样式处理复杂，容易出错
- 不符合用户期望的全屏效果

### 用户期望
- 点击全屏后，当前卡片放大到整个屏幕
- 类似图片全屏预览效果
- 内容完整显示，无需滚动
- 清晰的过渡效果
- 退出全屏后恢复正常

### 额外要求
- 彻底清理现有全屏相关代码
- 重新实现新的全屏功能

## 实现步骤

### 阶段1：清理现有全屏代码

1. **清理 `card-side.tsx`**：
   - 删除全屏状态管理
   - 移除全屏样式处理 useEffect
   - 删除 toggleFullscreen 函数
   - 清理相关导入

2. **清理 `fullscreen-context.tsx`**：
   - 考虑删除该文件，因为新方案可能不需要
   - 或者保留但简化

3. **清理 `App.tsx`**：
   - 移除 FullscreenProvider
   - 清理相关导入

### 阶段2：实现新的全屏功能

1. **实现思路**：
   - 创建新的全屏模态框组件
   - 点击全屏时，打开模态框显示当前卡片
   - 模态框占据整个屏幕，显示完整卡片内容
   - 退出全屏时关闭模态框

2. **具体实现**：
   - 使用已有的 Dialog 组件
   - 直接显示当前卡片内容
   - 实现清晰的过渡效果
   - 简化样式处理

3. **新功能特点**：
   - 类似图片全屏预览效果
   - 内容完整显示，无需滚动
   - 清晰的过渡效果
   - 退出全屏后恢复正常
   - 非全屏状态不受影响

## 具体实现细节

### 阶段1：清理代码

1. **修改 `card-side.tsx`**：
   - 删除 `useFullscreen` 导入
   - 删除全屏状态管理
   - 删除全屏样式处理 useEffect
   - 删除 toggleFullscreen 函数
   - 简化菜单选项

2. **修改 `App.tsx`**：
   - 移除 `FullscreenProvider`
   - 清理相关导入

3. **删除 `fullscreen-context.tsx`**：
   - 如果不需要，直接删除该文件
   - 或者保留但简化

### 阶段2：实现新功能

1. **创建全屏模态框**：
   - 使用已有的 Dialog 组件
   - 实现全屏显示逻辑
   - 添加过渡效果

2. **修改 `card-side.tsx`**：
   - 添加打开全屏模态框的逻辑
   - 简化样式处理
   - 确保样式只在全屏状态下应用

3. **实现全屏切换逻辑**：
   - 点击全屏按钮打开模态框
   - 点击关闭按钮或按 ESC 键退出全屏
   - 确保内容完整显示

## 预期效果

✅ 点击全屏后，卡片放大到整个屏幕
✅ 内容完整显示，无需滚动
✅ 类似图片全屏预览效果
✅ 清晰的过渡效果
✅ 退出全屏后恢复正常
✅ 非全屏状态不受影响
✅ 兼容不同屏幕尺寸

## 风险评估

- **风险级别**：低
  - 采用模态框方式实现，成熟可靠
  - 不影响核心功能
  - 可以快速回滚

- **潜在风险点**：
  - 模态框样式与现有样式冲突
  - 过渡效果可能影响性能

- **风险缓解措施**：
  - 使用独立的样式作用域
  - 优化过渡效果，避免复杂动画

## 技术实现

- 使用 React Dialog 组件
- 实现简单的过渡效果
- 简化样式处理
- 确保样式只在全屏状态下应用

这个方案将彻底解决当前全屏功能的问题，实现用户期望的全屏预览效果。