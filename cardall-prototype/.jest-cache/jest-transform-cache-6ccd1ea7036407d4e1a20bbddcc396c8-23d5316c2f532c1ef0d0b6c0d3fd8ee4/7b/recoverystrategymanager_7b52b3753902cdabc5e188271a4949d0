d120abf22a7c5fd51e512b1c1cc4a01c
"use strict";
/**
 * 恢复策略管理器
 *
 * 实现统一的恢复策略管理，包括：
 * - 智能重试策略
 * - 数据回滚机制
 * - 降级处理策略
 * - 自愈恢复框架
 * - 恢复过程监控
 * - 恢复结果验证
 */
Object.defineProperty(exports, "__esModule", { value: true });
exports.RecoveryStrategyManager = exports.DegradedModeStrategy = exports.RollbackStrategy = exports.CircuitBreakerStrategy = exports.RetryStrategy = void 0;
const types_1 = require("./types");
/**
 * 重试策略实现
 */
class RetryStrategy {
    constructor(config) {
        Object.defineProperty(this, "config", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: config
        });
        Object.defineProperty(this, "id", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: 'retry'
        });
        Object.defineProperty(this, "name", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: '智能重试'
        });
        Object.defineProperty(this, "description", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: '基于错误类型和上下文的智能重试策略'
        });
        Object.defineProperty(this, "priority", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: 1
        });
        Object.defineProperty(this, "maxAttempts", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: 5
        });
        Object.defineProperty(this, "cooldownPeriod", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: 1000
        });
    }
    canHandle(error) {
        return this.config.retryableErrors.includes(error.category) ||
            error.category === types_1.ErrorCategory.NETWORK ||
            error.category === types_1.ErrorCategory.SYSTEM;
    }
    async execute(error, context) {
        const startTime = performance.now();
        let attempts = 0;
        let lastError = null;
        for (attempts = 1; attempts <= this.config.maxAttempts; attempts++) {
            try {
                // 计算重试延迟
                const delay = this.calculateDelay(attempts);
                if (attempts > 1) {
                    await this.sleep(delay);
                }
                // 执行重试操作
                const result = await this.executeRetry(error, context);
                return {
                    success: true,
                    strategy: this.id,
                    duration: performance.now() - startTime,
                    attempts,
                    message: `重试成功，共尝试 ${attempts} 次`,
                    nextAction: 'continue'
                };
            }
            catch (retryError) {
                lastError = retryError;
                // 检查是否应该继续重试
                if (!this.shouldContinueRetry(retryError, attempts)) {
                    break;
                }
            }
        }
        return {
            success: false,
            strategy: this.id,
            duration: performance.now() - startTime,
            attempts,
            message: `重试失败，共尝试 ${attempts} 次`,
            details: { error: lastError },
            nextAction: 'fallback',
            fallbackStrategy: 'circuit-breaker'
        };
    }
    calculateDelay(attempt) {
        const exponentialDelay = Math.min(this.config.baseDelay * Math.pow(this.config.backoffMultiplier, attempt - 1), this.config.maxDelay);
        if (this.config.jitter) {
            return exponentialDelay * (0.8 + Math.random() * 0.4);
        }
        return exponentialDelay;
    }
    shouldContinueRetry(error, attempts) {
        // 检查是否达到最大尝试次数
        if (attempts >= this.config.maxAttempts) {
            return false;
        }
        // 检查错误类型是否支持重试
        if (error instanceof Error && !this.isRetryableError(error)) {
            return false;
        }
        return true;
    }
    isRetryableError(error) {
        const nonRetryableErrors = [
            'AuthenticationError',
            'AuthorizationError',
            'ValidationError',
            'NotFoundError'
        ];
        return !nonRetryableErrors.some(type => error.name === type);
    }
    async executeRetry(error, context) {
        // 根据错误类型执行相应的重试逻辑
        switch (error.category) {
            case types_1.ErrorCategory.NETWORK:
                return this.retryNetworkOperation(error, context);
            case types_1.ErrorCategory.SYSTEM:
                return this.retrySystemOperation(error, context);
            default:
                throw new Error(`不支持的错误类型重试: ${error.category}`);
        }
    }
    async retryNetworkOperation(error, context) {
        // 实现网络操作重试逻辑
        const { operation } = context;
        if (operation && operation.type === 'sync') {
            // 重试同步操作
            return this.retrySyncOperation(operation);
        }
        throw new Error('不支持的网络操作重试');
    }
    async retrySystemOperation(error, context) {
        // 实现系统操作重试逻辑
        await this.sleep(100); // 简单延迟
        return true;
    }
    async retrySyncOperation(operation) {
        // 实现同步操作重试
        // 这里应该调用实际的同步服务
        return { success: true };
    }
    async sleep(ms) {
        return new Promise(resolve => setTimeout(resolve, ms));
    }
}
exports.RetryStrategy = RetryStrategy;
/**
 * 熔断器策略实现
 */
class CircuitBreakerStrategy {
    constructor(threshold = 5, timeout = 60000) {
        Object.defineProperty(this, "threshold", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: threshold
        });
        Object.defineProperty(this, "timeout", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: timeout
        });
        Object.defineProperty(this, "id", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: 'circuit-breaker'
        });
        Object.defineProperty(this, "name", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: '熔断器'
        });
        Object.defineProperty(this, "description", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: '防止级联故障的熔断器策略'
        });
        Object.defineProperty(this, "priority", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: 2
        });
        Object.defineProperty(this, "maxAttempts", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: 1
        });
        Object.defineProperty(this, "cooldownPeriod", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: 5000
        });
        Object.defineProperty(this, "state", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: 'closed'
        });
        Object.defineProperty(this, "failureCount", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: 0
        });
        Object.defineProperty(this, "lastFailureTime", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: 0
        });
        Object.defineProperty(this, "successCount", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: 0
        });
    }
    canHandle(error) {
        return this.state === 'open' ? false : true;
    }
    async execute(error, context) {
        const startTime = performance.now();
        if (this.state === 'open') {
            // 检查是否可以尝试恢复
            if (Date.now() - this.lastFailureTime > this.timeout) {
                this.state = 'half-open';
                this.successCount = 0;
            }
            else {
                return {
                    success: false,
                    strategy: this.id,
                    duration: performance.now() - startTime,
                    attempts: 1,
                    message: '熔断器开启，拒绝请求',
                    nextAction: 'fallback',
                    fallbackStrategy: 'degraded-mode'
                };
            }
        }
        try {
            // 执行操作
            const result = await this.executeProtectedOperation(error, context);
            this.onSuccess();
            return {
                success: true,
                strategy: this.id,
                duration: performance.now() - startTime,
                attempts: 1,
                message: '熔断器保护下操作成功',
                nextAction: 'continue'
            };
        }
        catch (operationError) {
            this.onFailure();
            return {
                success: false,
                strategy: this.id,
                duration: performance.now() - startTime,
                attempts: 1,
                message: '熔断器保护下操作失败',
                details: { error: operationError },
                nextAction: this.state === 'open' ? 'fallback' : 'retry',
                fallbackStrategy: 'degraded-mode'
            };
        }
    }
    onSuccess() {
        if (this.state === 'half-open') {
            this.successCount++;
            if (this.successCount >= 3) {
                this.state = 'closed';
                this.failureCount = 0;
            }
        }
    }
    onFailure() {
        this.failureCount++;
        this.lastFailureTime = Date.now();
        if (this.failureCount >= this.threshold) {
            this.state = 'open';
        }
    }
    async executeProtectedOperation(error, context) {
        // 执行受保护的操作
        // 这里应该调用实际的服务，但为了安全而进行保护
        throw new Error('操作执行失败');
    }
}
exports.CircuitBreakerStrategy = CircuitBreakerStrategy;
/**
 * 数据回滚策略实现
 */
class RollbackStrategy {
    constructor(config) {
        Object.defineProperty(this, "config", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: config
        });
        Object.defineProperty(this, "id", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: 'rollback'
        });
        Object.defineProperty(this, "name", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: '数据回滚'
        });
        Object.defineProperty(this, "description", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: '数据一致性问题的回滚策略'
        });
        Object.defineProperty(this, "priority", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: 3
        });
        Object.defineProperty(this, "maxAttempts", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: 3
        });
        Object.defineProperty(this, "cooldownPeriod", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: 2000
        });
    }
    canHandle(error) {
        return error.category === types_1.ErrorCategory.DATA ||
            error.category === types_1.ErrorCategory.BUSINESS ||
            error.severity === types_1.ErrorSeverity.CRITICAL;
    }
    async execute(error, context) {
        const startTime = performance.now();
        try {
            // 查找可用的回滚点
            const rollbackPoint = await this.findRollbackPoint(error, context);
            if (!rollbackPoint) {
                return {
                    success: false,
                    strategy: this.id,
                    duration: performance.now() - startTime,
                    attempts: 1,
                    message: '未找到可用的回滚点',
                    nextAction: 'fallback',
                    fallbackStrategy: 'manual-intervention'
                };
            }
            // 执行回滚操作
            const rollbackResult = await this.executeRollback(rollbackPoint);
            // 验证回滚结果
            const validation = await this.validateRollback(rollbackPoint, rollbackResult);
            if (!validation.success) {
                return {
                    success: false,
                    strategy: this.id,
                    duration: performance.now() - startTime,
                    attempts: 1,
                    message: '回滚验证失败',
                    details: validation,
                    nextAction: 'escalate'
                };
            }
            return {
                success: true,
                strategy: this.id,
                duration: performance.now() - startTime,
                attempts: 1,
                message: `成功回滚到检查点: ${rollbackPoint.id}`,
                details: { rollbackPoint, rollbackResult },
                nextAction: 'continue'
            };
        }
        catch (rollbackError) {
            return {
                success: false,
                strategy: this.id,
                duration: performance.now() - startTime,
                attempts: 1,
                message: '回滚操作失败',
                details: { error: rollbackError },
                nextAction: 'escalate'
            };
        }
    }
    async findRollbackPoint(error, context) {
        // 查找最近的可用回滚点
        // 这里应该查询检查点存储
        return {
            id: 'checkpoint-' + Date.now(),
            operation: context.operation?.type || 'unknown',
            timestamp: Date.now() - 30000, // 30秒前
            state: {},
            metadata: {},
            dependencies: [],
            rollbackPoint: true
        };
    }
    async executeRollback(checkpoint) {
        // 执行回滚操作
        // 这里应该实现实际的数据回滚逻辑
        return { success: true, checkpointId: checkpoint.id };
    }
    async validateRollback(checkpoint, result) {
        // 验证回滚结果
        // 这里应该实现数据一致性检查
        return { success: true, message: '回滚验证通过' };
    }
}
exports.RollbackStrategy = RollbackStrategy;
/**
 * 降级模式策略实现
 */
class DegradedModeStrategy {
    constructor(config) {
        Object.defineProperty(this, "config", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: config
        });
        Object.defineProperty(this, "id", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: 'degraded-mode'
        });
        Object.defineProperty(this, "name", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: '降级模式'
        });
        Object.defineProperty(this, "description", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: '功能降级以维持基本服务'
        });
        Object.defineProperty(this, "priority", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: 4
        });
        Object.defineProperty(this, "maxAttempts", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: 1
        });
        Object.defineProperty(this, "cooldownPeriod", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: 0
        });
    }
    canHandle(error) {
        return this.config.enabled && (error.severity === types_1.ErrorSeverity.HIGH ||
            error.category === types_1.ErrorCategory.SYSTEM ||
            error.category === types_1.ErrorCategory.NETWORK);
    }
    async execute(error, context) {
        const startTime = performance.now();
        try {
            // 查找合适的降级策略
            const strategy = this.findFallbackStrategy(error);
            if (!strategy) {
                return {
                    success: false,
                    strategy: this.id,
                    duration: performance.now() - startTime,
                    attempts: 1,
                    message: '未找到合适的降级策略',
                    nextAction: 'escalate'
                };
            }
            // 执行降级策略
            const result = await Promise.race([
                strategy.action(error, context),
                new Promise((_, reject) => setTimeout(() => reject(new Error('降级策略执行超时')), strategy.timeout))
            ]);
            return {
                success: true,
                strategy: this.id,
                duration: performance.now() - startTime,
                attempts: 1,
                message: `成功启用降级模式: ${strategy.name}`,
                details: { strategy: strategy.id, result },
                nextAction: 'continue'
            };
        }
        catch (fallbackError) {
            return {
                success: false,
                strategy: this.id,
                duration: performance.now() - startTime,
                attempts: 1,
                message: '降级策略执行失败',
                details: { error: fallbackError },
                nextAction: 'escalate'
            };
        }
    }
    findFallbackStrategy(error) {
        return this.config.strategies
            .filter(strategy => strategy.condition(error))
            .sort((a, b) => b.priority - a.priority)[0];
    }
}
exports.DegradedModeStrategy = DegradedModeStrategy;
/**
 * 恢复策略管理器主类
 */
class RecoveryStrategyManager {
    constructor(monitoringService) {
        Object.defineProperty(this, "strategies", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: new Map()
        });
        Object.defineProperty(this, "sessions", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: new Map()
        });
        Object.defineProperty(this, "metrics", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: this.initializeMetrics()
        });
        Object.defineProperty(this, "monitoringService", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: void 0
        });
        this.monitoringService = monitoringService;
        this.initializeDefaultStrategies();
    }
    static getInstance(monitoringService) {
        if (!RecoveryStrategyManager.instance) {
            RecoveryStrategyManager.instance = new RecoveryStrategyManager(monitoringService);
        }
        return RecoveryStrategyManager.instance;
    }
    /**
     * 注册恢复策略
     */
    registerStrategy(strategy) {
        this.strategies.set(strategy.id, strategy);
        console.log(`已注册恢复策略: ${strategy.name} (${strategy.id})`);
    }
    /**
     * 取消注册恢复策略
     */
    unregisterStrategy(strategyId) {
        this.strategies.delete(strategyId);
        console.log(`已取消注册恢复策略: ${strategyId}`);
    }
    /**
     * 执行错误恢复
     */
    async recover(error, context) {
        const sessionId = this.generateSessionId();
        const session = {
            id: sessionId,
            error,
            context,
            startTime: performance.now(),
            status: 'active',
            strategies: [],
            checkpoints: []
        };
        this.sessions.set(sessionId, session);
        this.metrics.totalRecoveries++;
        try {
            // 查找合适的恢复策略
            const strategy = this.findBestStrategy(error);
            if (!strategy) {
                const result = {
                    success: false,
                    strategy: 'none',
                    duration: 0,
                    attempts: 0,
                    message: '未找到合适的恢复策略',
                    nextAction: 'escalate'
                };
                session.status = 'failed';
                session.result = result;
                this.updateMetrics(result);
                return result;
            }
            // 执行恢复策略
            const result = await this.executeStrategy(session, strategy);
            session.status = result.success ? 'completed' : 'failed';
            session.result = result;
            this.updateMetrics(result);
            // 记录恢复结果
            await this.monitoringService.recordRecovery(error, result);
            return result;
        }
        catch (recoveryError) {
            const result = {
                success: false,
                strategy: 'system',
                duration: performance.now() - session.startTime,
                attempts: 1,
                message: '恢复过程发生系统错误',
                details: { error: recoveryError },
                nextAction: 'escalate'
            };
            session.status = 'failed';
            session.result = result;
            this.updateMetrics(result);
            return result;
        }
        finally {
            session.endTime = performance.now();
            this.cleanupSession(sessionId);
        }
    }
    /**
     * 创建恢复检查点
     */
    createCheckpoint(operation, state, metadata, rollbackPoint = false) {
        const checkpoint = {
            id: this.generateCheckpointId(),
            operation,
            timestamp: Date.now(),
            state: this.serializeState(state),
            metadata: metadata || {},
            dependencies: [],
            rollbackPoint
        };
        // 将检查点添加到所有活跃的恢复会话
        this.sessions.forEach(session => {
            if (session.status === 'active') {
                session.checkpoints.push(checkpoint);
            }
        });
        return checkpoint;
    }
    /**
     * 获取恢复指标
     */
    getMetrics() {
        return { ...this.metrics };
    }
    /**
     * 获取活跃的恢复会话
     */
    getActiveSessions() {
        return Array.from(this.sessions.values())
            .filter(session => session.status === 'active');
    }
    /**
     * 查找最佳恢复策略
     */
    findBestStrategy(error) {
        const availableStrategies = Array.from(this.strategies.values())
            .filter(strategy => strategy.canHandle(error))
            .sort((a, b) => a.priority - b.priority);
        return availableStrategies[0] || null;
    }
    /**
     * 执行恢复策略
     */
    async executeStrategy(session, strategy) {
        const attempt = {
            strategy: strategy.id,
            startTime: performance.now()
        };
        session.strategies.push(attempt);
        session.currentStrategy = strategy.id;
        try {
            const result = await strategy.execute(session.error, session.context);
            attempt.endTime = performance.now();
            attempt.success = result.success;
            attempt.result = result;
            return result;
        }
        catch (strategyError) {
            attempt.endTime = performance.now();
            attempt.success = false;
            attempt.error = strategyError;
            throw strategyError;
        }
    }
    /**
     * 更新恢复指标
     */
    updateMetrics(result) {
        if (result.success) {
            this.metrics.successfulRecoveries++;
        }
        else {
            this.metrics.failedRecoveries++;
        }
        const recoveryTime = result.duration;
        this.metrics.recoveryTimeDistribution.push(recoveryTime);
        // 保持最近1000次的恢复时间分布
        if (this.metrics.recoveryTimeDistribution.length > 1000) {
            this.metrics.recoveryTimeDistribution =
                this.metrics.recoveryTimeDistribution.slice(-1000);
        }
        // 更新平均恢复时间
        this.metrics.averageRecoveryTime =
            this.metrics.recoveryTimeDistribution.reduce((sum, time) => sum + time, 0) /
                this.metrics.recoveryTimeDistribution.length;
        // 更新成功率
        this.metrics.successRate =
            this.metrics.successfulRecoveries / this.metrics.totalRecoveries;
        // 更新策略使用统计
        const usage = this.metrics.strategyUsage.get(result.strategy) || 0;
        this.metrics.strategyUsage.set(result.strategy, usage + 1);
        // 更新平均尝试次数
        const totalAttempts = Array.from(this.sessions.values())
            .reduce((sum, session) => sum + session.strategies.length, 0);
        this.metrics.averageAttempts = totalAttempts / this.metrics.totalRecoveries;
        // 更新升级率
        this.metrics.escalationRate =
            this.metrics.failedRecoveries / this.metrics.totalRecoveries;
    }
    /**
     * 初始化默认策略
     */
    initializeDefaultStrategies() {
        // 重试策略配置
        const retryConfig = {
            maxAttempts: 5,
            baseDelay: 1000,
            maxDelay: 30000,
            backoffMultiplier: 2,
            jitter: true,
            retryableErrors: ['network', 'system', 'temporary'],
            circuitBreakerThreshold: 5,
            recoveryTimeout: 30000
        };
        // 回滚策略配置
        const rollbackConfig = {
            enabled: true,
            maxVersions: 10,
            autoRollback: true,
            rollbackTimeout: 30000,
            preserveData: true,
            validationRequired: true
        };
        // 降级策略配置
        const fallbackConfig = {
            enabled: true,
            strategies: [
                {
                    id: 'offline-mode',
                    name: '离线模式',
                    condition: (error) => error.category === types_1.ErrorCategory.NETWORK,
                    action: async () => { },
                    priority: 1,
                    timeout: 5000
                },
                {
                    id: 'read-only',
                    name: '只读模式',
                    condition: (error) => error.category === types_1.ErrorCategory.DATA,
                    action: async () => { },
                    priority: 2,
                    timeout: 3000
                },
                {
                    id: 'limited-functionality',
                    name: '功能限制',
                    condition: (error) => error.severity === types_1.ErrorSeverity.HIGH,
                    action: async () => { },
                    priority: 3,
                    timeout: 2000
                }
            ],
            autoSwitch: true,
            healthCheckInterval: 30000,
            recoveryCheckInterval: 60000
        };
        // 注册默认策略
        this.registerStrategy(new RetryStrategy(retryConfig));
        this.registerStrategy(new CircuitBreakerStrategy());
        this.registerStrategy(new RollbackStrategy(rollbackConfig));
        this.registerStrategy(new DegradedModeStrategy(fallbackConfig));
    }
    /**
     * 初始化指标
     */
    initializeMetrics() {
        return {
            totalRecoveries: 0,
            successfulRecoveries: 0,
            failedRecoveries: 0,
            averageRecoveryTime: 0,
            successRate: 0,
            strategyUsage: new Map(),
            averageAttempts: 0,
            escalationRate: 0,
            recoveryTimeDistribution: []
        };
    }
    /**
     * 生成会话ID
     */
    generateSessionId() {
        return `recovery-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`;
    }
    /**
     * 生成检查点ID
     */
    generateCheckpointId() {
        return `checkpoint-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`;
    }
    /**
     * 序列化状态
     */
    serializeState(state) {
        // 简单的状态序列化实现
        try {
            return JSON.parse(JSON.stringify(state));
        }
        catch {
            return { error: '状态序列化失败', original: state };
        }
    }
    /**
     * 清理会话
     */
    cleanupSession(sessionId) {
        const session = this.sessions.get(sessionId);
        if (session && session.endTime) {
            // 保留最近1000个完成的会话
            const completedSessions = Array.from(this.sessions.values())
                .filter(s => s.endTime)
                .sort((a, b) => (b.endTime || 0) - (a.endTime || 0));
            if (completedSessions.length > 1000) {
                const toRemove = completedSessions.slice(1000);
                toRemove.forEach(s => this.sessions.delete(s.id));
            }
        }
    }
}
exports.RecoveryStrategyManager = RecoveryStrategyManager;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiRDpcXFByb2plY3RzXFxDYXJkRXZlcnl0aGluZ1xcY2FyZGFsbC1wcm90b3R5cGVcXHNyY1xcc2VydmljZXNcXGVycm9yLWhhbmRsaW5nXFxyZWNvdmVyeS1zdHJhdGVneS1tYW5hZ2VyLnRzIiwibWFwcGluZ3MiOiI7QUFBQTs7Ozs7Ozs7OztHQVVHOzs7QUFFSCxtQ0FTZ0I7QUFrRmhCOztHQUVHO0FBQ0gsTUFBYSxhQUFhO0lBUXhCLFlBQW9CLE1BQW1CO1FBQTNCOzs7O21CQUFRLE1BQU07V0FBYTtRQVB2Qjs7OzttQkFBSyxPQUFPO1dBQUE7UUFDWjs7OzttQkFBTyxNQUFNO1dBQUE7UUFDYjs7OzttQkFBYyxtQkFBbUI7V0FBQTtRQUNqQzs7OzttQkFBVyxDQUFDO1dBQUE7UUFDWjs7OzttQkFBYyxDQUFDO1dBQUE7UUFDZjs7OzttQkFBaUIsSUFBSTtXQUFBO0lBRUssQ0FBQztJQUVwQyxTQUFTLENBQUMsS0FBbUI7UUFDbEMsT0FBTyxJQUFJLENBQUMsTUFBTSxDQUFDLGVBQWUsQ0FBQyxRQUFRLENBQUMsS0FBSyxDQUFDLFFBQVEsQ0FBQztZQUNwRCxLQUFLLENBQUMsUUFBUSxLQUFLLHFCQUFhLENBQUMsT0FBTztZQUN4QyxLQUFLLENBQUMsUUFBUSxLQUFLLHFCQUFhLENBQUMsTUFBTSxDQUFBO0lBQ2hELENBQUM7SUFFTSxLQUFLLENBQUMsT0FBTyxDQUFDLEtBQW1CLEVBQUUsT0FBcUI7UUFDN0QsTUFBTSxTQUFTLEdBQUcsV0FBVyxDQUFDLEdBQUcsRUFBRSxDQUFBO1FBQ25DLElBQUksUUFBUSxHQUFHLENBQUMsQ0FBQTtRQUNoQixJQUFJLFNBQVMsR0FBUSxJQUFJLENBQUE7UUFFekIsS0FBSyxRQUFRLEdBQUcsQ0FBQyxFQUFFLFFBQVEsSUFBSSxJQUFJLENBQUMsTUFBTSxDQUFDLFdBQVcsRUFBRSxRQUFRLEVBQUUsRUFBRSxDQUFDO1lBQ25FLElBQUksQ0FBQztnQkFDSCxTQUFTO2dCQUNULE1BQU0sS0FBSyxHQUFHLElBQUksQ0FBQyxjQUFjLENBQUMsUUFB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QUFDLENBQUMsQ0FBQTtZQUNuRCxDQUFDO1FBQ0gsQ0FBQztJQUNILENBQUM7Q0FDRjtBQTlXRCwwREE4V0MiLCJuYW1lcyI6W10sInNvdXJjZXMiOlsiRDpcXFByb2plY3RzXFxDYXJkRXZlcnl0aGluZ1xcY2FyZGFsbC1wcm90b3R5cGVcXHNyY1xcc2VydmljZXNcXGVycm9yLWhhbmRsaW5nXFxyZWNvdmVyeS1zdHJhdGVneS1tYW5hZ2VyLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICog5oGi5aSN562W55Wl566h55CG5ZmoXG4gKlxuICog5a6e546w57uf5LiA55qE5oGi5aSN562W55Wl566h55CG77yM5YyF5ous77yaXG4gKiAtIOaZuuiDvemHjeivleetlueVpVxuICogLSDmlbDmja7lm57mu5rmnLrliLZcbiAqIC0g6ZmN57qn5aSE55CG562W55WlXG4gKiAtIOiHquaEiOaBouWkjeahhuaetlxuICogLSDmgaLlpI3ov4fnqIvnm5HmjqdcbiAqIC0g5oGi5aSN57uT5p6c6aqM6K+BXG4gKi9cblxuaW1wb3J0IHtcbiAgVW5pZmllZEVycm9yLFxuICBFcnJvckNhdGVnb3J5LFxuICBFcnJvclNldmVyaXR5LFxuICBFcnJvckNvbnRleHQsXG4gIFJlY292ZXJ5U3RyYXRlZ3ksXG4gIFJlY292ZXJ5UmVzdWx0LFxuICBSZXRyeUNvbmZpZyxcbiAgQWxlcnRTZXZlcml0eVxufSBmcm9tICcuL3R5cGVzJ1xuaW1wb3J0IHsgRXJyb3JNb25pdG9yaW5nU2VydmljZSB9IGZyb20gJy4vZXJyb3ItbW9uaXRvcmluZy1zZXJ2aWNlJ1xuXG4vLyDmgaLlpI3nrZbnlaXnrqHnkIblmajlrp7njrBcblxuLy8g5Zue5rua6YWN572uXG5leHBvcnQgaW50ZXJmYWNlIFJvbGxiYWNrQ29uZmlnIHtcbiAgZW5hYmxlZDogYm9vbGVhblxuICBtYXhWZXJzaW9uczogbnVtYmVyXG4gIGF1dG9Sb2xsYmFjazogYm9vbGVhblxuICByb2xsYmFja1RpbWVvdXQ6IG51bWJlclxuICBwcmVzZXJ2ZURhdGE6IGJvb2xlYW5cbiAgdmFsaWRhdGlvblJlcXVpcmVkOiBib29sZWFuXG59XG5cbi8vIOmZjee6p+mFjee9rlxuZXhwb3J0IGludGVyZmFjZSBGYWxsYmFja0NvbmZpZyB7XG4gIGVuYWJsZWQ6IGJvb2xlYW5cbiAgc3RyYXRlZ2llczogRmFsbGJhY2tTdHJhdGVneVtdXG4gIGF1dG9Td2l0Y2g6IGJvb2xlYW5cbiAgaGVhbHRoQ2hlY2tJbnRlcnZhbDogbnVtYmVyXG4gIHJlY292ZXJ5Q2hlY2tJbnRlcnZhbDogbnVtYmVyXG59XG5cbi8vIOmZjee6p+etlueVpVxuZXhwb3J0IGludGVyZmFjZSBGYWxsYmFja1N0cmF0ZWd5IHtcbiAgaWQ6IHN0cmluZ1xuICBuYW1lOiBzdHJpbmdcbiAgY29uZGl0aW9uOiAoZXJyb3I6IFVuaWZpZWRFcnJvcikgPT4gYm9vbGVhblxuICBhY3Rpb246IChlcnJvcjogVW5pZmllZEVycm9yLCBjb250ZXh0OiBFcnJvckNvbnRleHQpID0+IFByb21pc2U8YW55PlxuICBwcmlvcml0eTogbnVtYmVyXG4gIHRpbWVvdXQ6IG51bWJlclxufVxuXG4vLyDmgaLlpI3mo4Dmn6XngrlcbmV4cG9ydCBpbnRlcmZhY2UgUmVjb3ZlcnlDaGVja3BvaW50IHtcbiAgaWQ6IHN0cmluZ1xuICBvcGVyYXRpb246IHN0cmluZ1xuICB0aW1lc3RhbXA6IG51bWJlclxuICBzdGF0ZTogYW55XG4gIG1ldGFkYXRhOiBhbnlcbiAgZGVwZW5kZW5jaWVzOiBzdHJpbmdbXVxuICByb2xsYmFja1BvaW50OiBib29sZWFuXG59XG5cbi8vIOaBouWkjeS8muivnVxuZXhwb3J0IGludGVyZmFjZSBSZWNvdmVyeVNlc3Npb24ge1xuICBpZDogc3RyaW5nXG4gIGVycm9yOiBVbmlmaWVkRXJyb3JcbiAgY29udGV4dDogRXJyb3JDb250ZXh0XG4gIHN0YXJ0VGltZTogbnVtYmVyXG4gIGVuZFRpbWU/OiBudW1iZXJcbiAgc3RyYXRlZ2llczogUmVjb3ZlcnlBdHRlbXB0W11cbiAgY3VycmVudFN0cmF0ZWd5Pzogc3RyaW5nXG4gIHN0YXR1czogJ2FjdGl2ZScgfCAnY29tcGxldGVkJyB8ICdmYWlsZWQnIHwgJ2VzY2FsYXRlZCdcbiAgY2hlY2twb2ludHM6IFJlY292ZXJ5Q2hlY2twb2ludFtdXG4gIHJlc3VsdD86IFJlY292ZXJ5UmVzdWx0XG59XG5cbi8vIOaBouWkjeWwneivlVxuZXhwb3J0IGludGVyZmFjZSBSZWNvdmVyeUF0dGVtcHQge1xuICBzdHJhdGVneTogc3RyaW5nXG4gIHN0YXJ0VGltZTogbnVtYmVyXG4gIGVuZFRpbWU/OiBudW1iZXJcbiAgc3VjY2VzczogYm9vbGVhblxuICByZXN1bHQ/OiBSZWNvdmVyeVJlc3VsdFxuICBlcnJvcj86IGFueVxufVxuXG4vLyDmgaLlpI3mjIfmoIdcbmV4cG9ydCBpbnRlcmZhY2UgUmVjb3ZlcnlNZXRyaWNzIHtcbiAgdG90YWxSZWNvdmVyaWVzOiBudW1iZXJcbiAgc3VjY2Vzc2Z1bFJlY292ZXJpZXM6IG51bWJlclxuICBmYWlsZWRSZWNvdmVyaWVzOiBudW1iZXJcbiAgYXZlcmFnZVJlY292ZXJ5VGltZTogbnVtYmVyXG4gIHN1Y2Nlc3NSYXRlOiBudW1iZXJcbiAgc3RyYXRlZ3lVc2FnZTogTWFwPHN0cmluZywgbnVtYmVyPlxuICBhdmVyYWdlQXR0ZW1wdHM6IG51bWJlclxuICBlc2NhbGF0aW9uUmF0ZTogbnVtYmVyXG4gIHJlY292ZXJ5VGltZURpc3RyaWJ1dGlvbjogbnVtYmVyW11cbn1cblxuLyoqXG4gKiDph43or5XnrZbnlaXlrp7njrBcbiAqL1xuZXhwb3J0IGNsYXNzIFJldHJ5U3RyYXRlZ3kgaW1wbGVtZW50cyBSZWNvdmVyeVN0cmF0ZWd5IHtcbiAgcHVibGljIHJlYWRvbmx5IGlkID0gJ3JldHJ5J1xuICBwdWJsaWMgcmVhZG9ubHkgbmFtZSA9ICfmmbrog73ph43or5UnXG4gIHB1YmxpYyByZWFkb25seSBkZXNjcmlwdGlvbiA9ICfln7rkuo7plJnor6/nsbvlnovlkozkuIrkuIvmlofnmoTmmbrog73ph43or5XnrZbnlaUnXG4gIHB1YmxpYyByZWFkb25seSBwcmlvcml0eSA9IDFcbiAgcHVibGljIHJlYWRvbmx5IG1heEF0dGVtcHRzID0gNVxuICBwdWJsaWMgcmVhZG9ubHkgY29vbGRvd25QZXJpb2QgPSAxMDAwXG5cbiAgY29uc3RydWN0b3IocHJpdmF0ZSBjb25maWc6IFJldHJ5Q29uZmlnKSB7fVxuXG4gIHB1YmxpYyBjYW5IYW5kbGUoZXJyb3I6IFVuaWZpZWRFcnJvcik6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLmNvbmZpZy5yZXRyeWFibGVFcnJvcnMuaW5jbHVkZXMoZXJyb3IuY2F0ZWdvcnkpIHx8XG4gICAgICAgICAgIGVycm9yLmNhdGVnb3J5ID09PSBFcnJvckNhdGVnb3J5Lk5FVFdPUksgfHxcbiAgICAgICAgICAgZXJyb3IuY2F0ZWdvcnkgPT09IEVycm9yQ2F0ZWdvcnkuU1lTVEVNXG4gIH1cblxuICBwdWJsaWMgYXN5bmMgZXhlY3V0ZShlcnJvcjogVW5pZmllZEVycm9yLCBjb250ZXh0OiBFcnJvckNvbnRleHQpOiBQcm9taXNlPFJlY292ZXJ5UmVzdWx0PiB7XG4gICAgY29uc3Qgc3RhcnRUaW1lID0gcGVyZm9ybWFuY2Uubm93KClcbiAgICBsZXQgYXR0ZW1wdHMgPSAwXG4gICAgbGV0IGxhc3RFcnJvcjogYW55ID0gbnVsbFxuXG4gICAgZm9yIChhdHRlbXB0cyA9IDE7IGF0dGVtcHRzIDw9IHRoaXMuY29uZmlnLm1heEF0dGVtcHRzOyBhdHRlbXB0cysrKSB7XG4gICAgICB0cnkge1xuICAgICAgICAvLyDorqHnrpfph43or5Xlu7bov59cbiAgICAgICAgY29uc3QgZGVsYXkgPSB0aGlzLmNhbGN1bGF0ZURlbGF5KGF0dGVtcHRzKVxuXG4gICAgICAgIGlmIChhdHRlbXB0cyA+IDEpIHtcbiAgICAgICAgICBhd2FpdCB0aGlzLnNsZWVwKGRlbGF5KVxuICAgICAgICB9XG5cbiAgICAgICAgLy8g5omn6KGM6YeN6K+V5pON5L2cXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMuZXhlY3V0ZVJldHJ5KGVycm9yLCBjb250ZXh0KVxuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgICBzdHJhdGVneTogdGhpcy5pZCxcbiAgICAgICAgICBkdXJhdGlvbjogcGVyZm9ybWFuY2Uubm93KCkgLSBzdGFydFRpbWUsXG4gICAgICAgICAgYXR0ZW1wdHMsXG4gICAgICAgICAgbWVzc2FnZTogYOmHjeivleaIkOWKn++8jOWFseWwneivlSAke2F0dGVtcHRzfSDmrKFgLFxuICAgICAgICAgIG5leHRBY3Rpb246ICdjb250aW51ZSdcbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAocmV0cnlFcnJvcikge1xuICAgICAgICBsYXN0RXJyb3IgPSByZXRyeUVycm9yXG5cbiAgICAgICAgLy8g5qOA5p+l5piv5ZCm5bqU6K+l57un57ut6YeN6K+VXG4gICAgICAgIGlmICghdGhpcy5zaG91bGRDb250aW51ZVJldHJ5KHJldHJ5RXJyb3IsIGF0dGVtcHRzKSkge1xuICAgICAgICAgIGJyZWFrXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4ge1xuICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICBzdHJhdGVneTogdGhpcy5pZCxcbiAgICAgIGR1cmF0aW9uOiBwZXJmb3JtYW5jZS5ub3coKSAtIHN0YXJ0VGltZSxcbiAgICAgIGF0dGVtcHRzLFxuICAgICAgbWVzc2FnZTogYOmHjeivleWksei0pe+8jOWFseWwneivlSAke2F0dGVtcHRzfSDmrKFgLFxuICAgICAgZGV0YWlsczogeyBlcnJvcjogbGFzdEVycm9yIH0sXG4gICAgICBuZXh0QWN0aW9uOiAnZmFsbGJhY2snLFxuICAgICAgZmFsbGJhY2tTdHJhdGVneTogJ2NpcmN1aXQtYnJlYWtlcidcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGNhbGN1bGF0ZURlbGF5KGF0dGVtcHQ6IG51bWJlcik6IG51bWJlciB7XG4gICAgY29uc3QgZXhwb25lbnRpYWxEZWxheSA9IE1hdGgubWluKFxuICAgICAgdGhpcy5jb25maWcuYmFzZURlbGF5ICogTWF0aC5wb3codGhpcy5jb25maWcuYmFja29mZk11bHRpcGxpZXIsIGF0dGVtcHQgLSAxKSxcbiAgICAgIHRoaXMuY29uZmlnLm1heERlbGF5XG4gICAgKVxuXG4gICAgaWYgKHRoaXMuY29uZmlnLmppdHRlcikge1xuICAgICAgcmV0dXJuIGV4cG9uZW50aWFsRGVsYXkgKiAoMC44ICsgTWF0aC5yYW5kb20oKSAqIDAuNClcbiAgICB9XG5cbiAgICByZXR1cm4gZXhwb25lbnRpYWxEZWxheVxuICB9XG5cbiAgcHJpdmF0ZSBzaG91bGRDb250aW51ZVJldHJ5KGVycm9yOiBhbnksIGF0dGVtcHRzOiBudW1iZXIpOiBib29sZWFuIHtcbiAgICAvLyDmo4Dmn6XmmK/lkKbovr7liLDmnIDlpKflsJ3or5XmrKHmlbBcbiAgICBpZiAoYXR0ZW1wdHMgPj0gdGhpcy5jb25maWcubWF4QXR0ZW1wdHMpIHtcbiAgICAgIHJldHVybiBmYWxzZVxuICAgIH1cblxuICAgIC8vIOajgOafpemUmeivr+exu+Wei+aYr+WQpuaUr+aMgemHjeivlVxuICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIEVycm9yICYmICF0aGlzLmlzUmV0cnlhYmxlRXJyb3IoZXJyb3IpKSB7XG4gICAgICByZXR1cm4gZmFsc2VcbiAgICB9XG5cbiAgICByZXR1cm4gdHJ1ZVxuICB9XG5cbiAgcHJpdmF0ZSBpc1JldHJ5YWJsZUVycm9yKGVycm9yOiBFcnJvcik6IGJvb2xlYW4ge1xuICAgIGNvbnN0IG5vblJldHJ5YWJsZUVycm9ycyA9IFtcbiAgICAgICdBdXRoZW50aWNhdGlvbkVycm9yJyxcbiAgICAgICdBdXRob3JpemF0aW9uRXJyb3InLFxuICAgICAgJ1ZhbGlkYXRpb25FcnJvcicsXG4gICAgICAnTm90Rm91bmRFcnJvcidcbiAgICBdXG5cbiAgICByZXR1cm4gIW5vblJldHJ5YWJsZUVycm9ycy5zb21lKHR5cGUgPT4gZXJyb3IubmFtZSA9PT0gdHlwZSlcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgZXhlY3V0ZVJldHJ5KGVycm9yOiBVbmlmaWVkRXJyb3IsIGNvbnRleHQ6IEVycm9yQ29udGV4dCk6IFByb21pc2U8YW55PiB7XG4gICAgLy8g5qC55o2u6ZSZ6K+v57G75Z6L5omn6KGM55u45bqU55qE6YeN6K+V6YC76L6RXG4gICAgc3dpdGNoIChlcnJvci5jYXRlZ29yeSkge1xuICAgICAgY2FzZSBFcnJvckNhdGVnb3J5Lk5FVFdPUks6XG4gICAgICAgIHJldHVybiB0aGlzLnJldHJ5TmV0d29ya09wZXJhdGlvbihlcnJvciwgY29udGV4dClcbiAgICAgIGNhc2UgRXJyb3JDYXRlZ29yeS5TWVNURU06XG4gICAgICAgIHJldHVybiB0aGlzLnJldHJ5U3lzdGVtT3BlcmF0aW9uKGVycm9yLCBjb250ZXh0KVxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGDkuI3mlK/mjIHnmoTplJnor6/nsbvlnovph43or5U6ICR7ZXJyb3IuY2F0ZWdvcnl9YClcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIHJldHJ5TmV0d29ya09wZXJhdGlvbihlcnJvcjogVW5pZmllZEVycm9yLCBjb250ZXh0OiBFcnJvckNvbnRleHQpOiBQcm9taXNlPGFueT4ge1xuICAgIC8vIOWunueOsOe9kee7nOaTjeS9nOmHjeivlemAu+i+kVxuICAgIGNvbnN0IHsgb3BlcmF0aW9uIH0gPSBjb250ZXh0XG5cbiAgICBpZiAob3BlcmF0aW9uICYmIG9wZXJhdGlvbi50eXBlID09PSAnc3luYycpIHtcbiAgICAgIC8vIOmHjeivleWQjOatpeaTjeS9nFxuICAgICAgcmV0dXJuIHRoaXMucmV0cnlTeW5jT3BlcmF0aW9uKG9wZXJhdGlvbilcbiAgICB9XG5cbiAgICB0aHJvdyBuZXcgRXJyb3IoJ+S4jeaUr+aMgeeahOe9kee7nOaTjeS9nOmHjeivlScpXG4gIH1cblxuICBwcml2YXRlIGFzeW5jIHJldHJ5U3lzdGVtT3BlcmF0aW9uKGVycm9yOiBVbmlmaWVkRXJyb3IsIGNvbnRleHQ6IEVycm9yQ29udGV4dCk6IFByb21pc2U8YW55PiB7XG4gICAgLy8g5a6e546w57O757uf5pON5L2c6YeN6K+V6YC76L6RXG4gICAgYXdhaXQgdGhpcy5zbGVlcCgxMDApIC8vIOeugOWNleW7tui/n1xuICAgIHJldHVybiB0cnVlXG4gIH1cblxuICBwcml2YXRlIGFzeW5jIHJldHJ5U3luY09wZXJhdGlvbihvcGVyYXRpb246IGFueSk6IFByb21pc2U8YW55PiB7XG4gICAgLy8g5a6e546w5ZCM5q2l5pON5L2c6YeN6K+VXG4gICAgLy8g6L+Z6YeM5bqU6K+l6LCD55So5a6e6ZmF55qE5ZCM5q2l5pyN5YqhXG4gICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSB9XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIHNsZWVwKG1zOiBudW1iZXIpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIG1zKSlcbiAgfVxufVxuXG4vKipcbiAqIOeGlOaWreWZqOetlueVpeWunueOsFxuICovXG5leHBvcnQgY2xhc3MgQ2lyY3VpdEJyZWFrZXJTdHJhdGVneSBpbXBsZW1lbnRzIFJlY292ZXJ5U3RyYXRlZ3kge1xuICBwdWJsaWMgcmVhZG9ubHkgaWQgPSAnY2lyY3VpdC1icmVha2VyJ1xuICBwdWJsaWMgcmVhZG9ubHkgbmFtZSA9ICfnhpTmlq3lmagnXG4gIHB1YmxpYyByZWFkb25seSBkZXNjcmlwdGlvbiA9ICfpmLLmraLnuqfogZTmlYXpmpznmoTnhpTmlq3lmajnrZbnlaUnXG4gIHB1YmxpYyByZWFkb25seSBwcmlvcml0eSA9IDJcbiAgcHVibGljIHJlYWRvbmx5IG1heEF0dGVtcHRzID0gMVxuICBwdWJsaWMgcmVhZG9ubHkgY29vbGRvd25QZXJpb2QgPSA1MDAwXG5cbiAgcHJpdmF0ZSBzdGF0ZTogJ2Nsb3NlZCcgfCAnb3BlbicgfCAnaGFsZi1vcGVuJyA9ICdjbG9zZWQnXG4gIHByaXZhdGUgZmFpbHVyZUNvdW50ID0gMFxuICBwcml2YXRlIGxhc3RGYWlsdXJlVGltZSA9IDBcbiAgcHJpdmF0ZSBzdWNjZXNzQ291bnQgPSAwXG5cbiAgY29uc3RydWN0b3IoXG4gICAgcHJpdmF0ZSB0aHJlc2hvbGQ6IG51bWJlciA9IDUsXG4gICAgcHJpdmF0ZSB0aW1lb3V0OiBudW1iZXIgPSA2MDAwMFxuICApIHt9XG5cbiAgcHVibGljIGNhbkhhbmRsZShlcnJvcjogVW5pZmllZEVycm9yKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuc3RhdGUgPT09ICdvcGVuJyA/IGZhbHNlIDogdHJ1ZVxuICB9XG5cbiAgcHVibGljIGFzeW5jIGV4ZWN1dGUoZXJyb3I6IFVuaWZpZWRFcnJvciwgY29udGV4dDogRXJyb3JDb250ZXh0KTogUHJvbWlzZTxSZWNvdmVyeVJlc3VsdD4ge1xuICAgIGNvbnN0IHN0YXJ0VGltZSA9IHBlcmZvcm1hbmNlLm5vdygpXG5cbiAgICBpZiAodGhpcy5zdGF0ZSA9PT0gJ29wZW4nKSB7XG4gICAgICAvLyDmo4Dmn6XmmK/lkKblj6/ku6XlsJ3or5XmgaLlpI1cbiAgICAgIGlmIChEYXRlLm5vdygpIC0gdGhpcy5sYXN0RmFpbHVyZVRpbWUgPiB0aGlzLnRpbWVvdXQpIHtcbiAgICAgICAgdGhpcy5zdGF0ZSA9ICdoYWxmLW9wZW4nXG4gICAgICAgIHRoaXMuc3VjY2Vzc0NvdW50ID0gMFxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgICBzdHJhdGVneTogdGhpcy5pZCxcbiAgICAgICAgICBkdXJhdGlvbjogcGVyZm9ybWFuY2Uubm93KCkgLSBzdGFydFRpbWUsXG4gICAgICAgICAgYXR0ZW1wdHM6IDEsXG4gICAgICAgICAgbWVzc2FnZTogJ+eGlOaWreWZqOW8gOWQr++8jOaLkue7neivt+axgicsXG4gICAgICAgICAgbmV4dEFjdGlvbjogJ2ZhbGxiYWNrJyxcbiAgICAgICAgICBmYWxsYmFja1N0cmF0ZWd5OiAnZGVncmFkZWQtbW9kZSdcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHRyeSB7XG4gICAgICAvLyDmiafooYzmk43kvZxcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMuZXhlY3V0ZVByb3RlY3RlZE9wZXJhdGlvbihlcnJvciwgY29udGV4dClcblxuICAgICAgdGhpcy5vblN1Y2Nlc3MoKVxuXG4gICAgICByZXR1cm4ge1xuICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICBzdHJhdGVneTogdGhpcy5pZCxcbiAgICAgICAgZHVyYXRpb246IHBlcmZvcm1hbmNlLm5vdygpIC0gc3RhcnRUaW1lLFxuICAgICAgICBhdHRlbXB0czogMSxcbiAgICAgICAgbWVzc2FnZTogJ+eGlOaWreWZqOS/neaKpOS4i+aTjeS9nOaIkOWKnycsXG4gICAgICAgIG5leHRBY3Rpb246ICdjb250aW51ZSdcbiAgICAgIH1cbiAgICB9IGNhdGNoIChvcGVyYXRpb25FcnJvcikge1xuICAgICAgdGhpcy5vbkZhaWx1cmUoKVxuXG4gICAgICByZXR1cm4ge1xuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgc3RyYXRlZ3k6IHRoaXMuaWQsXG4gICAgICAgIGR1cmF0aW9uOiBwZXJmb3JtYW5jZS5ub3coKSAtIHN0YXJ0VGltZSxcbiAgICAgICAgYXR0ZW1wdHM6IDEsXG4gICAgICAgIG1lc3NhZ2U6ICfnhpTmlq3lmajkv53miqTkuIvmk43kvZzlpLHotKUnLFxuICAgICAgICBkZXRhaWxzOiB7IGVycm9yOiBvcGVyYXRpb25FcnJvciB9LFxuICAgICAgICBuZXh0QWN0aW9uOiB0aGlzLnN0YXRlID09PSAnb3BlbicgPyAnZmFsbGJhY2snIDogJ3JldHJ5JyxcbiAgICAgICAgZmFsbGJhY2tTdHJhdGVneTogJ2RlZ3JhZGVkLW1vZGUnXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBvblN1Y2Nlc3MoKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuc3RhdGUgPT09ICdoYWxmLW9wZW4nKSB7XG4gICAgICB0aGlzLnN1Y2Nlc3NDb3VudCsrXG4gICAgICBpZiAodGhpcy5zdWNjZXNzQ291bnQgPj0gMykge1xuICAgICAgICB0aGlzLnN0YXRlID0gJ2Nsb3NlZCdcbiAgICAgICAgdGhpcy5mYWlsdXJlQ291bnQgPSAwXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBvbkZhaWx1cmUoKTogdm9pZCB7XG4gICAgdGhpcy5mYWlsdXJlQ291bnQrK1xuICAgIHRoaXMubGFzdEZhaWx1cmVUaW1lID0gRGF0ZS5ub3coKVxuXG4gICAgaWYgKHRoaXMuZmFpbHVyZUNvdW50ID49IHRoaXMudGhyZXNob2xkKSB7XG4gICAgICB0aGlzLnN0YXRlID0gJ29wZW4nXG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBleGVjdXRlUHJvdGVjdGVkT3BlcmF0aW9uKGVycm9yOiBVbmlmaWVkRXJyb3IsIGNvbnRleHQ6IEVycm9yQ29udGV4dCk6IFByb21pc2U8YW55PiB7XG4gICAgLy8g5omn6KGM5Y+X5L+d5oqk55qE5pON5L2cXG4gICAgLy8g6L+Z6YeM5bqU6K+l6LCD55So5a6e6ZmF55qE5pyN5Yqh77yM5L2G5Li65LqG5a6J5YWo6ICM6L+b6KGM5L+d5oqkXG4gICAgdGhyb3cgbmV3IEVycm9yKCfmk43kvZzmiafooYzlpLHotKUnKVxuICB9XG59XG5cbi8qKlxuICog5pWw5o2u5Zue5rua562W55Wl5a6e546wXG4gKi9cbmV4cG9ydCBjbGFzcyBSb2xsYmFja1N0cmF0ZWd5IGltcGxlbWVudHMgUmVjb3ZlcnlTdHJhdGVneSB7XG4gIHB1YmxpYyByZWFkb25seSBpZCA9ICdyb2xsYmFjaydcbiAgcHVibGljIHJlYWRvbmx5IG5hbWUgPSAn5pWw5o2u5Zue5ruaJ1xuICBwdWJsaWMgcmVhZG9ubHkgZGVzY3JpcHRpb24gPSAn5pWw5o2u5LiA6Ie05oCn6Zeu6aKY55qE5Zue5rua562W55WlJ1xuICBwdWJsaWMgcmVhZG9ubHkgcHJpb3JpdHkgPSAzXG4gIHB1YmxpYyByZWFkb25seSBtYXhBdHRlbXB0cyA9IDNcbiAgcHVibGljIHJlYWRvbmx5IGNvb2xkb3duUGVyaW9kID0gMjAwMFxuXG4gIGNvbnN0cnVjdG9yKHByaXZhdGUgY29uZmlnOiBSb2xsYmFja0NvbmZpZykge31cblxuICBwdWJsaWMgY2FuSGFuZGxlKGVycm9yOiBVbmlmaWVkRXJyb3IpOiBib29sZWFuIHtcbiAgICByZXR1cm4gZXJyb3IuY2F0ZWdvcnkgPT09IEVycm9yQ2F0ZWdvcnkuREFUQSB8fFxuICAgICAgICAgICBlcnJvci5jYXRlZ29yeSA9PT0gRXJyb3JDYXRlZ29yeS5CVVNJTkVTUyB8fFxuICAgICAgICAgICBlcnJvci5zZXZlcml0eSA9PT0gRXJyb3JTZXZlcml0eS5DUklUSUNBTFxuICB9XG5cbiAgcHVibGljIGFzeW5jIGV4ZWN1dGUoZXJyb3I6IFVuaWZpZWRFcnJvciwgY29udGV4dDogRXJyb3JDb250ZXh0KTogUHJvbWlzZTxSZWNvdmVyeVJlc3VsdD4ge1xuICAgIGNvbnN0IHN0YXJ0VGltZSA9IHBlcmZvcm1hbmNlLm5vdygpXG5cbiAgICB0cnkge1xuICAgICAgLy8g5p+l5om+5Y+v55So55qE5Zue5rua54K5XG4gICAgICBjb25zdCByb2xsYmFja1BvaW50ID0gYXdhaXQgdGhpcy5maW5kUm9sbGJhY2tQb2ludChlcnJvciwgY29udGV4dClcblxuICAgICAgaWYgKCFyb2xsYmFja1BvaW50KSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgc3RyYXRlZ3k6IHRoaXMuaWQsXG4gICAgICAgICAgZHVyYXRpb246IHBlcmZvcm1hbmNlLm5vdygpIC0gc3RhcnRUaW1lLFxuICAgICAgICAgIGF0dGVtcHRzOiAxLFxuICAgICAgICAgIG1lc3NhZ2U6ICfmnKrmib7liLDlj6/nlKjnmoTlm57mu5rngrknLFxuICAgICAgICAgIG5leHRBY3Rpb246ICdmYWxsYmFjaycsXG4gICAgICAgICAgZmFsbGJhY2tTdHJhdGVneTogJ21hbnVhbC1pbnRlcnZlbnRpb24nXG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8g5omn6KGM5Zue5rua5pON5L2cXG4gICAgICBjb25zdCByb2xsYmFja1Jlc3VsdCA9IGF3YWl0IHRoaXMuZXhlY3V0ZVJvbGxiYWNrKHJvbGxiYWNrUG9pbnQpXG5cbiAgICAgIC8vIOmqjOivgeWbnua7mue7k+aenFxuICAgICAgY29uc3QgdmFsaWRhdGlvbiA9IGF3YWl0IHRoaXMudmFsaWRhdGVSb2xsYmFjayhyb2xsYmFja1BvaW50LCByb2xsYmFja1Jlc3VsdClcblxuICAgICAgaWYgKCF2YWxpZGF0aW9uLnN1Y2Nlc3MpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgICBzdHJhdGVneTogdGhpcy5pZCxcbiAgICAgICAgICBkdXJhdGlvbjogcGVyZm9ybWFuY2Uubm93KCkgLSBzdGFydFRpbWUsXG4gICAgICAgICAgYXR0ZW1wdHM6IDEsXG4gICAgICAgICAgbWVzc2FnZTogJ+Wbnua7mumqjOivgeWksei0pScsXG4gICAgICAgICAgZGV0YWlsczogdmFsaWRhdGlvbixcbiAgICAgICAgICBuZXh0QWN0aW9uOiAnZXNjYWxhdGUnXG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgc3RyYXRlZ3k6IHRoaXMuaWQsXG4gICAgICAgIGR1cmF0aW9uOiBwZXJmb3JtYW5jZS5ub3coKSAtIHN0YXJ0VGltZSxcbiAgICAgICAgYXR0ZW1wdHM6IDEsXG4gICAgICAgIG1lc3NhZ2U6IGDmiJDlip/lm57mu5rliLDmo4Dmn6Xngrk6ICR7cm9sbGJhY2tQb2ludC5pZH1gLFxuICAgICAgICBkZXRhaWxzOiB7IHJvbGxiYWNrUG9pbnQsIHJvbGxiYWNrUmVzdWx0IH0sXG4gICAgICAgIG5leHRBY3Rpb246ICdjb250aW51ZSdcbiAgICAgIH1cbiAgICB9IGNhdGNoIChyb2xsYmFja0Vycm9yKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgc3RyYXRlZ3k6IHRoaXMuaWQsXG4gICAgICAgIGR1cmF0aW9uOiBwZXJmb3JtYW5jZS5ub3coKSAtIHN0YXJ0VGltZSxcbiAgICAgICAgYXR0ZW1wdHM6IDEsXG4gICAgICAgIG1lc3NhZ2U6ICflm57mu5rmk43kvZzlpLHotKUnLFxuICAgICAgICBkZXRhaWxzOiB7IGVycm9yOiByb2xsYmFja0Vycm9yIH0sXG4gICAgICAgIG5leHRBY3Rpb246ICdlc2NhbGF0ZSdcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIGZpbmRSb2xsYmFja1BvaW50KGVycm9yOiBVbmlmaWVkRXJyb3IsIGNvbnRleHQ6IEVycm9yQ29udGV4dCk6IFByb21pc2U8UmVjb3ZlcnlDaGVja3BvaW50IHwgbnVsbD4ge1xuICAgIC8vIOafpeaJvuacgOi/keeahOWPr+eUqOWbnua7mueCuVxuICAgIC8vIOi/memHjOW6lOivpeafpeivouajgOafpeeCueWtmOWCqFxuICAgIHJldHVybiB7XG4gICAgICBpZDogJ2NoZWNrcG9pbnQtJyArIERhdGUubm93KCksXG4gICAgICBvcGVyYXRpb246IGNvbnRleHQub3BlcmF0aW9uPy50eXBlIHx8ICd1bmtub3duJyxcbiAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKSAtIDMwMDAwLCAvLyAzMOenkuWJjVxuICAgICAgc3RhdGU6IHt9LFxuICAgICAgbWV0YWRhdGE6IHt9LFxuICAgICAgZGVwZW5kZW5jaWVzOiBbXSxcbiAgICAgIHJvbGxiYWNrUG9pbnQ6IHRydWVcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIGV4ZWN1dGVSb2xsYmFjayhjaGVja3BvaW50OiBSZWNvdmVyeUNoZWNrcG9pbnQpOiBQcm9taXNlPGFueT4ge1xuICAgIC8vIOaJp+ihjOWbnua7muaTjeS9nFxuICAgIC8vIOi/memHjOW6lOivpeWunueOsOWunumZheeahOaVsOaNruWbnua7mumAu+i+kVxuICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUsIGNoZWNrcG9pbnRJZDogY2hlY2twb2ludC5pZCB9XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIHZhbGlkYXRlUm9sbGJhY2soY2hlY2twb2ludDogUmVjb3ZlcnlDaGVja3BvaW50LCByZXN1bHQ6IGFueSk6IFByb21pc2U8eyBzdWNjZXNzOiBib29sZWFuOyBtZXNzYWdlOiBzdHJpbmcgfT4ge1xuICAgIC8vIOmqjOivgeWbnua7mue7k+aenFxuICAgIC8vIOi/memHjOW6lOivpeWunueOsOaVsOaNruS4gOiHtOaAp+ajgOafpVxuICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUsIG1lc3NhZ2U6ICflm57mu5rpqozor4HpgJrov4cnIH1cbiAgfVxufVxuXG4vKipcbiAqIOmZjee6p+aooeW8j+etlueVpeWunueOsFxuICovXG5leHBvcnQgY2xhc3MgRGVncmFkZWRNb2RlU3RyYXRlZ3kgaW1wbGVtZW50cyBSZWNvdmVyeVN0cmF0ZWd5IHtcbiAgcHVibGljIHJlYWRvbmx5IGlkID0gJ2RlZ3JhZGVkLW1vZGUnXG4gIHB1YmxpYyByZWFkb25seSBuYW1lID0gJ+mZjee6p+aooeW8jydcbiAgcHVibGljIHJlYWRvbmx5IGRlc2NyaXB0aW9uID0gJ+WKn+iDvemZjee6p+S7pee7tOaMgeWfuuacrOacjeWKoSdcbiAgcHVibGljIHJlYWRvbmx5IHByaW9yaXR5ID0gNFxuICBwdWJsaWMgcmVhZG9ubHkgbWF4QXR0ZW1wdHMgPSAxXG4gIHB1YmxpYyByZWFkb25seSBjb29sZG93blBlcmlvZCA9IDBcblxuICBjb25zdHJ1Y3Rvcihwcml2YXRlIGNvbmZpZzogRmFsbGJhY2tDb25maWcpIHt9XG5cbiAgcHVibGljIGNhbkhhbmRsZShlcnJvcjogVW5pZmllZEVycm9yKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuY29uZmlnLmVuYWJsZWQgJiYgKFxuICAgICAgZXJyb3Iuc2V2ZXJpdHkgPT09IEVycm9yU2V2ZXJpdHkuSElHSCB8fFxuICAgICAgZXJyb3IuY2F0ZWdvcnkgPT09IEVycm9yQ2F0ZWdvcnkuU1lTVEVNIHx8XG4gICAgICBlcnJvci5jYXRlZ29yeSA9PT0gRXJyb3JDYXRlZ29yeS5ORVRXT1JLXG4gICAgKVxuICB9XG5cbiAgcHVibGljIGFzeW5jIGV4ZWN1dGUoZXJyb3I6IFVuaWZpZWRFcnJvciwgY29udGV4dDogRXJyb3JDb250ZXh0KTogUHJvbWlzZTxSZWNvdmVyeVJlc3VsdD4ge1xuICAgIGNvbnN0IHN0YXJ0VGltZSA9IHBlcmZvcm1hbmNlLm5vdygpXG5cbiAgICB0cnkge1xuICAgICAgLy8g5p+l5om+5ZCI6YCC55qE6ZmN57qn562W55WlXG4gICAgICBjb25zdCBzdHJhdGVneSA9IHRoaXMuZmluZEZhbGxiYWNrU3RyYXRlZ3koZXJyb3IpXG5cbiAgICAgIGlmICghc3RyYXRlZ3kpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgICBzdHJhdGVneTogdGhpcy5pZCxcbiAgICAgICAgICBkdXJhdGlvbjogcGVyZm9ybWFuY2Uubm93KCkgLSBzdGFydFRpbWUsXG4gICAgICAgICAgYXR0ZW1wdHM6IDEsXG4gICAgICAgICAgbWVzc2FnZTogJ+acquaJvuWIsOWQiOmAgueahOmZjee6p+etlueVpScsXG4gICAgICAgICAgbmV4dEFjdGlvbjogJ2VzY2FsYXRlJ1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIOaJp+ihjOmZjee6p+etlueVpVxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgUHJvbWlzZS5yYWNlKFtcbiAgICAgICAgc3RyYXRlZ3kuYWN0aW9uKGVycm9yLCBjb250ZXh0KSxcbiAgICAgICAgbmV3IFByb21pc2UoKF8sIHJlamVjdCkgPT5cbiAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHJlamVjdChuZXcgRXJyb3IoJ+mZjee6p+etlueVpeaJp+ihjOi2heaXticpKSwgc3RyYXRlZ3kudGltZW91dClcbiAgICAgICAgKVxuICAgICAgXSlcblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgc3RyYXRlZ3k6IHRoaXMuaWQsXG4gICAgICAgIGR1cmF0aW9uOiBwZXJmb3JtYW5jZS5ub3coKSAtIHN0YXJ0VGltZSxcbiAgICAgICAgYXR0ZW1wdHM6IDEsXG4gICAgICAgIG1lc3NhZ2U6IGDmiJDlip/lkK/nlKjpmY3nuqfmqKHlvI86ICR7c3RyYXRlZ3kubmFtZX1gLFxuICAgICAgICBkZXRhaWxzOiB7IHN0cmF0ZWd5OiBzdHJhdGVneS5pZCwgcmVzdWx0IH0sXG4gICAgICAgIG5leHRBY3Rpb246ICdjb250aW51ZSdcbiAgICAgIH1cbiAgICB9IGNhdGNoIChmYWxsYmFja0Vycm9yKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgc3RyYXRlZ3k6IHRoaXMuaWQsXG4gICAgICAgIGR1cmF0aW9uOiBwZXJmb3JtYW5jZS5ub3coKSAtIHN0YXJ0VGltZSxcbiAgICAgICAgYXR0ZW1wdHM6IDEsXG4gICAgICAgIG1lc3NhZ2U6ICfpmY3nuqfnrZbnlaXmiafooYzlpLHotKUnLFxuICAgICAgICBkZXRhaWxzOiB7IGVycm9yOiBmYWxsYmFja0Vycm9yIH0sXG4gICAgICAgIG5leHRBY3Rpb246ICdlc2NhbGF0ZSdcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGZpbmRGYWxsYmFja1N0cmF0ZWd5KGVycm9yOiBVbmlmaWVkRXJyb3IpOiBGYWxsYmFja1N0cmF0ZWd5IHwgdW5kZWZpbmVkIHtcbiAgICByZXR1cm4gdGhpcy5jb25maWcuc3RyYXRlZ2llc1xuICAgICAgLmZpbHRlcihzdHJhdGVneSA9PiBzdHJhdGVneS5jb25kaXRpb24oZXJyb3IpKVxuICAgICAgLnNvcnQoKGEsIGIpID0+IGIucHJpb3JpdHkgLSBhLnByaW9yaXR5KVswXVxuICB9XG59XG5cbi8qKlxuICog5oGi5aSN562W55Wl566h55CG5Zmo5Li757G7XG4gKi9cbmV4cG9ydCBjbGFzcyBSZWNvdmVyeVN0cmF0ZWd5TWFuYWdlciB7XG4gIHByaXZhdGUgc3RhdGljIGluc3RhbmNlOiBSZWNvdmVyeVN0cmF0ZWd5TWFuYWdlclxuICBwcml2YXRlIHN0cmF0ZWdpZXM6IE1hcDxzdHJpbmcsIFJlY292ZXJ5U3RyYXRlZ3k+ID0gbmV3IE1hcCgpXG4gIHByaXZhdGUgc2Vzc2lvbnM6IE1hcDxzdHJpbmcsIFJlY292ZXJ5U2Vzc2lvbj4gPSBuZXcgTWFwKClcbiAgcHJpdmF0ZSBtZXRyaWNzOiBSZWNvdmVyeU1ldHJpY3MgPSB0aGlzLmluaXRpYWxpemVNZXRyaWNzKClcbiAgcHJpdmF0ZSBtb25pdG9yaW5nU2VydmljZTogRXJyb3JNb25pdG9yaW5nU2VydmljZVxuXG4gIHByaXZhdGUgY29uc3RydWN0b3IobW9uaXRvcmluZ1NlcnZpY2U6IEVycm9yTW9uaXRvcmluZ1NlcnZpY2UpIHtcbiAgICB0aGlzLm1vbml0b3JpbmdTZXJ2aWNlID0gbW9uaXRvcmluZ1NlcnZpY2VcbiAgICB0aGlzLmluaXRpYWxpemVEZWZhdWx0U3RyYXRlZ2llcygpXG4gIH1cblxuICBwdWJsaWMgc3RhdGljIGdldEluc3RhbmNlKG1vbml0b3JpbmdTZXJ2aWNlOiBFcnJvck1vbml0b3JpbmdTZXJ2aWNlKTogUmVjb3ZlcnlTdHJhdGVneU1hbmFnZXIge1xuICAgIGlmICghUmVjb3ZlcnlTdHJhdGVneU1hbmFnZXIuaW5zdGFuY2UpIHtcbiAgICAgIFJlY292ZXJ5U3RyYXRlZ3lNYW5hZ2VyLmluc3RhbmNlID0gbmV3IFJlY292ZXJ5U3RyYXRlZ3lNYW5hZ2VyKG1vbml0b3JpbmdTZXJ2aWNlKVxuICAgIH1cbiAgICByZXR1cm4gUmVjb3ZlcnlTdHJhdGVneU1hbmFnZXIuaW5zdGFuY2VcbiAgfVxuXG4gIC8qKlxuICAgKiDms6jlhozmgaLlpI3nrZbnlaVcbiAgICovXG4gIHB1YmxpYyByZWdpc3RlclN0cmF0ZWd5KHN0cmF0ZWd5OiBSZWNvdmVyeVN0cmF0ZWd5KTogdm9pZCB7XG4gICAgdGhpcy5zdHJhdGVnaWVzLnNldChzdHJhdGVneS5pZCwgc3RyYXRlZ3kpXG4gICAgY29uc29sZS5sb2coYOW3suazqOWGjOaBouWkjeetlueVpTogJHtzdHJhdGVneS5uYW1lfSAoJHtzdHJhdGVneS5pZH0pYClcbiAgfVxuXG4gIC8qKlxuICAgKiDlj5bmtojms6jlhozmgaLlpI3nrZbnlaVcbiAgICovXG4gIHB1YmxpYyB1bnJlZ2lzdGVyU3RyYXRlZ3koc3RyYXRlZ3lJZDogc3RyaW5nKTogdm9pZCB7XG4gICAgdGhpcy5zdHJhdGVnaWVzLmRlbGV0ZShzdHJhdGVneUlkKVxuICAgIGNvbnNvbGUubG9nKGDlt7Llj5bmtojms6jlhozmgaLlpI3nrZbnlaU6ICR7c3RyYXRlZ3lJZH1gKVxuICB9XG5cbiAgLyoqXG4gICAqIOaJp+ihjOmUmeivr+aBouWkjVxuICAgKi9cbiAgcHVibGljIGFzeW5jIHJlY292ZXIoXG4gICAgZXJyb3I6IFVuaWZpZWRFcnJvcixcbiAgICBjb250ZXh0OiBFcnJvckNvbnRleHRcbiAgKTogUHJvbWlzZTxSZWNvdmVyeVJlc3VsdD4ge1xuICAgIGNvbnN0IHNlc3Npb25JZCA9IHRoaXMuZ2VuZXJhdGVTZXNzaW9uSWQoKVxuICAgIGNvbnN0IHNlc3Npb246IFJlY292ZXJ5U2Vzc2lvbiA9IHtcbiAgICAgIGlkOiBzZXNzaW9uSWQsXG4gICAgICBlcnJvcixcbiAgICAgIGNvbnRleHQsXG4gICAgICBzdGFydFRpbWU6IHBlcmZvcm1hbmNlLm5vdygpLFxuICAgICAgc3RhdHVzOiAnYWN0aXZlJyxcbiAgICAgIHN0cmF0ZWdpZXM6IFtdLFxuICAgICAgY2hlY2twb2ludHM6IFtdXG4gICAgfVxuXG4gICAgdGhpcy5zZXNzaW9ucy5zZXQoc2Vzc2lvbklkLCBzZXNzaW9uKVxuICAgIHRoaXMubWV0cmljcy50b3RhbFJlY292ZXJpZXMrK1xuXG4gICAgdHJ5IHtcbiAgICAgIC8vIOafpeaJvuWQiOmAgueahOaBouWkjeetlueVpVxuICAgICAgY29uc3Qgc3RyYXRlZ3kgPSB0aGlzLmZpbmRCZXN0U3RyYXRlZ3koZXJyb3IpXG5cbiAgICAgIGlmICghc3RyYXRlZ3kpIHtcbiAgICAgICAgY29uc3QgcmVzdWx0OiBSZWNvdmVyeVJlc3VsdCA9IHtcbiAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgICBzdHJhdGVneTogJ25vbmUnLFxuICAgICAgICAgIGR1cmF0aW9uOiAwLFxuICAgICAgICAgIGF0dGVtcHRzOiAwLFxuICAgICAgICAgIG1lc3NhZ2U6ICfmnKrmib7liLDlkIjpgILnmoTmgaLlpI3nrZbnlaUnLFxuICAgICAgICAgIG5leHRBY3Rpb246ICdlc2NhbGF0ZSdcbiAgICAgICAgfVxuXG4gICAgICAgIHNlc3Npb24uc3RhdHVzID0gJ2ZhaWxlZCdcbiAgICAgICAgc2Vzc2lvbi5yZXN1bHQgPSByZXN1bHRcbiAgICAgICAgdGhpcy51cGRhdGVNZXRyaWNzKHJlc3VsdClcblxuICAgICAgICByZXR1cm4gcmVzdWx0XG4gICAgICB9XG5cbiAgICAgIC8vIOaJp+ihjOaBouWkjeetlueVpVxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdGhpcy5leGVjdXRlU3RyYXRlZ3koc2Vzc2lvbiwgc3RyYXRlZ3kpXG5cbiAgICAgIHNlc3Npb24uc3RhdHVzID0gcmVzdWx0LnN1Y2Nlc3MgPyAnY29tcGxldGVkJyA6ICdmYWlsZWQnXG4gICAgICBzZXNzaW9uLnJlc3VsdCA9IHJlc3VsdFxuICAgICAgdGhpcy51cGRhdGVNZXRyaWNzKHJlc3VsdClcblxuICAgICAgLy8g6K6w5b2V5oGi5aSN57uT5p6cXG4gICAgICBhd2FpdCB0aGlzLm1vbml0b3JpbmdTZXJ2aWNlLnJlY29yZFJlY292ZXJ5KGVycm9yLCByZXN1bHQpXG5cbiAgICAgIHJldHVybiByZXN1bHRcbiAgICB9IGNhdGNoIChyZWNvdmVyeUVycm9yKSB7XG4gICAgICBjb25zdCByZXN1bHQ6IFJlY292ZXJ5UmVzdWx0ID0ge1xuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgc3RyYXRlZ3k6ICdzeXN0ZW0nLFxuICAgICAgICBkdXJhdGlvbjogcGVyZm9ybWFuY2Uubm93KCkgLSBzZXNzaW9uLnN0YXJ0VGltZSxcbiAgICAgICAgYXR0ZW1wdHM6IDEsXG4gICAgICAgIG1lc3NhZ2U6ICfmgaLlpI3ov4fnqIvlj5HnlJ/ns7vnu5/plJnor68nLFxuICAgICAgICBkZXRhaWxzOiB7IGVycm9yOiByZWNvdmVyeUVycm9yIH0sXG4gICAgICAgIG5leHRBY3Rpb246ICdlc2NhbGF0ZSdcbiAgICAgIH1cblxuICAgICAgc2Vzc2lvbi5zdGF0dXMgPSAnZmFpbGVkJ1xuICAgICAgc2Vzc2lvbi5yZXN1bHQgPSByZXN1bHRcbiAgICAgIHRoaXMudXBkYXRlTWV0cmljcyhyZXN1bHQpXG5cbiAgICAgIHJldHVybiByZXN1bHRcbiAgICB9IGZpbmFsbHkge1xuICAgICAgc2Vzc2lvbi5lbmRUaW1lID0gcGVyZm9ybWFuY2Uubm93KClcbiAgICAgIHRoaXMuY2xlYW51cFNlc3Npb24oc2Vzc2lvbklkKVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiDliJvlu7rmgaLlpI3mo4Dmn6XngrlcbiAgICovXG4gIHB1YmxpYyBjcmVhdGVDaGVja3BvaW50KFxuICAgIG9wZXJhdGlvbjogc3RyaW5nLFxuICAgIHN0YXRlOiBhbnksXG4gICAgbWV0YWRhdGE/OiBhbnksXG4gICAgcm9sbGJhY2tQb2ludDogYm9vbGVhbiA9IGZhbHNlXG4gICk6IFJlY292ZXJ5Q2hlY2twb2ludCB7XG4gICAgY29uc3QgY2hlY2twb2ludDogUmVjb3ZlcnlDaGVja3BvaW50ID0ge1xuICAgICAgaWQ6IHRoaXMuZ2VuZXJhdGVDaGVja3BvaW50SWQoKSxcbiAgICAgIG9wZXJhdGlvbixcbiAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKSxcbiAgICAgIHN0YXRlOiB0aGlzLnNlcmlhbGl6ZVN0YXRlKHN0YXRlKSxcbiAgICAgIG1ldGFkYXRhOiBtZXRhZGF0YSB8fCB7fSxcbiAgICAgIGRlcGVuZGVuY2llczogW10sXG4gICAgICByb2xsYmFja1BvaW50XG4gICAgfVxuXG4gICAgLy8g5bCG5qOA5p+l54K55re75Yqg5Yiw5omA5pyJ5rS76LeD55qE5oGi5aSN5Lya6K+dXG4gICAgdGhpcy5zZXNzaW9ucy5mb3JFYWNoKHNlc3Npb24gPT4ge1xuICAgICAgaWYgKHNlc3Npb24uc3RhdHVzID09PSAnYWN0aXZlJykge1xuICAgICAgICBzZXNzaW9uLmNoZWNrcG9pbnRzLnB1c2goY2hlY2twb2ludClcbiAgICAgIH1cbiAgICB9KVxuXG4gICAgcmV0dXJuIGNoZWNrcG9pbnRcbiAgfVxuXG4gIC8qKlxuICAgKiDojrflj5bmgaLlpI3mjIfmoIdcbiAgICovXG4gIHB1YmxpYyBnZXRNZXRyaWNzKCk6IFJlY292ZXJ5TWV0cmljcyB7XG4gICAgcmV0dXJuIHsgLi4udGhpcy5tZXRyaWNzIH1cbiAgfVxuXG4gIC8qKlxuICAgKiDojrflj5bmtLvot4PnmoTmgaLlpI3kvJror51cbiAgICovXG4gIHB1YmxpYyBnZXRBY3RpdmVTZXNzaW9ucygpOiBSZWNvdmVyeVNlc3Npb25bXSB7XG4gICAgcmV0dXJuIEFycmF5LmZyb20odGhpcy5zZXNzaW9ucy52YWx1ZXMoKSlcbiAgICAgIC5maWx0ZXIoc2Vzc2lvbiA9PiBzZXNzaW9uLnN0YXR1cyA9PT0gJ2FjdGl2ZScpXG4gIH1cblxuICAvKipcbiAgICog5p+l5om+5pyA5L2z5oGi5aSN562W55WlXG4gICAqL1xuICBwcml2YXRlIGZpbmRCZXN0U3RyYXRlZ3koZXJyb3I6IFVuaWZpZWRFcnJvcik6IFJlY292ZXJ5U3RyYXRlZ3kgfCBudWxsIHtcbiAgICBjb25zdCBhdmFpbGFibGVTdHJhdGVnaWVzID0gQXJyYXkuZnJvbSh0aGlzLnN0cmF0ZWdpZXMudmFsdWVzKCkpXG4gICAgICAuZmlsdGVyKHN0cmF0ZWd5ID0+IHN0cmF0ZWd5LmNhbkhhbmRsZShlcnJvcikpXG4gICAgICAuc29ydCgoYSwgYikgPT4gYS5wcmlvcml0eSAtIGIucHJpb3JpdHkpXG5cbiAgICByZXR1cm4gYXZhaWxhYmxlU3RyYXRlZ2llc1swXSB8fCBudWxsXG4gIH1cblxuICAvKipcbiAgICog5omn6KGM5oGi5aSN562W55WlXG4gICAqL1xuICBwcml2YXRlIGFzeW5jIGV4ZWN1dGVTdHJhdGVneShcbiAgICBzZXNzaW9uOiBSZWNvdmVyeVNlc3Npb24sXG4gICAgc3RyYXRlZ3k6IFJlY292ZXJ5U3RyYXRlZ3lcbiAgKTogUHJvbWlzZTxSZWNvdmVyeVJlc3VsdD4ge1xuICAgIGNvbnN0IGF0dGVtcHQ6IFJlY292ZXJ5QXR0ZW1wdCA9IHtcbiAgICAgIHN0cmF0ZWd5OiBzdHJhdGVneS5pZCxcbiAgICAgIHN0YXJ0VGltZTogcGVyZm9ybWFuY2Uubm93KClcbiAgICB9XG5cbiAgICBzZXNzaW9uLnN0cmF0ZWdpZXMucHVzaChhdHRlbXB0KVxuICAgIHNlc3Npb24uY3VycmVudFN0cmF0ZWd5ID0gc3RyYXRlZ3kuaWRcblxuICAgIHRyeSB7XG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBzdHJhdGVneS5leGVjdXRlKHNlc3Npb24uZXJyb3IsIHNlc3Npb24uY29udGV4dClcblxuICAgICAgYXR0ZW1wdC5lbmRUaW1lID0gcGVyZm9ybWFuY2Uubm93KClcbiAgICAgIGF0dGVtcHQuc3VjY2VzcyA9IHJlc3VsdC5zdWNjZXNzXG4gICAgICBhdHRlbXB0LnJlc3VsdCA9IHJlc3VsdFxuXG4gICAgICByZXR1cm4gcmVzdWx0XG4gICAgfSBjYXRjaCAoc3RyYXRlZ3lFcnJvcikge1xuICAgICAgYXR0ZW1wdC5lbmRUaW1lID0gcGVyZm9ybWFuY2Uubm93KClcbiAgICAgIGF0dGVtcHQuc3VjY2VzcyA9IGZhbHNlXG4gICAgICBhdHRlbXB0LmVycm9yID0gc3RyYXRlZ3lFcnJvclxuXG4gICAgICB0aHJvdyBzdHJhdGVneUVycm9yXG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIOabtOaWsOaBouWkjeaMh+agh1xuICAgKi9cbiAgcHJpdmF0ZSB1cGRhdGVNZXRyaWNzKHJlc3VsdDogUmVjb3ZlcnlSZXN1bHQpOiB2b2lkIHtcbiAgICBpZiAocmVzdWx0LnN1Y2Nlc3MpIHtcbiAgICAgIHRoaXMubWV0cmljcy5zdWNjZXNzZnVsUmVjb3ZlcmllcysrXG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMubWV0cmljcy5mYWlsZWRSZWNvdmVyaWVzKytcbiAgICB9XG5cbiAgICBjb25zdCByZWNvdmVyeVRpbWUgPSByZXN1bHQuZHVyYXRpb25cbiAgICB0aGlzLm1ldHJpY3MucmVjb3ZlcnlUaW1lRGlzdHJpYnV0aW9uLnB1c2gocmVjb3ZlcnlUaW1lKVxuXG4gICAgLy8g5L+d5oyB5pyA6L+RMTAwMOasoeeahOaBouWkjeaXtumXtOWIhuW4g1xuICAgIGlmICh0aGlzLm1ldHJpY3MucmVjb3ZlcnlUaW1lRGlzdHJpYnV0aW9uLmxlbmd0aCA+IDEwMDApIHtcbiAgICAgIHRoaXMubWV0cmljcy5yZWNvdmVyeVRpbWVEaXN0cmlidXRpb24gPVxuICAgICAgICB0aGlzLm1ldHJpY3MucmVjb3ZlcnlUaW1lRGlzdHJpYnV0aW9uLnNsaWNlKC0xMDAwKVxuICAgIH1cblxuICAgIC8vIOabtOaWsOW5s+Wdh+aBouWkjeaXtumXtFxuICAgIHRoaXMubWV0cmljcy5hdmVyYWdlUmVjb3ZlcnlUaW1lID1cbiAgICAgIHRoaXMubWV0cmljcy5yZWNvdmVyeVRpbWVEaXN0cmlidXRpb24ucmVkdWNlKChzdW0sIHRpbWUpID0+IHN1bSArIHRpbWUsIDApIC9cbiAgICAgIHRoaXMubWV0cmljcy5yZWNvdmVyeVRpbWVEaXN0cmlidXRpb24ubGVuZ3RoXG5cbiAgICAvLyDmm7TmlrDmiJDlip/njodcbiAgICB0aGlzLm1ldHJpY3Muc3VjY2Vzc1JhdGUgPVxuICAgICAgdGhpcy5tZXRyaWNzLnN1Y2Nlc3NmdWxSZWNvdmVyaWVzIC8gdGhpcy5tZXRyaWNzLnRvdGFsUmVjb3Zlcmllc1xuXG4gICAgLy8g5pu05paw562W55Wl5L2/55So57uf6K6hXG4gICAgY29uc3QgdXNhZ2UgPSB0aGlzLm1ldHJpY3Muc3RyYXRlZ3lVc2FnZS5nZXQocmVzdWx0LnN0cmF0ZWd5KSB8fCAwXG4gICAgdGhpcy5tZXRyaWNzLnN0cmF0ZWd5VXNhZ2Uuc2V0KHJlc3VsdC5zdHJhdGVneSwgdXNhZ2UgKyAxKVxuXG4gICAgLy8g5pu05paw5bmz5Z2H5bCd6K+V5qyh5pWwXG4gICAgY29uc3QgdG90YWxBdHRlbXB0cyA9IEFycmF5LmZyb20odGhpcy5zZXNzaW9ucy52YWx1ZXMoKSlcbiAgICAgIC5yZWR1Y2UoKHN1bSwgc2Vzc2lvbikgPT4gc3VtICsgc2Vzc2lvbi5zdHJhdGVnaWVzLmxlbmd0aCwgMClcbiAgICB0aGlzLm1ldHJpY3MuYXZlcmFnZUF0dGVtcHRzID0gdG90YWxBdHRlbXB0cyAvIHRoaXMubWV0cmljcy50b3RhbFJlY292ZXJpZXNcblxuICAgIC8vIOabtOaWsOWNh+e6p+eOh1xuICAgIHRoaXMubWV0cmljcy5lc2NhbGF0aW9uUmF0ZSA9XG4gICAgICB0aGlzLm1ldHJpY3MuZmFpbGVkUmVjb3ZlcmllcyAvIHRoaXMubWV0cmljcy50b3RhbFJlY292ZXJpZXNcbiAgfVxuXG4gIC8qKlxuICAgKiDliJ3lp4vljJbpu5jorqTnrZbnlaVcbiAgICovXG4gIHByaXZhdGUgaW5pdGlhbGl6ZURlZmF1bHRTdHJhdGVnaWVzKCk6IHZvaWQge1xuICAgIC8vIOmHjeivleetlueVpemFjee9rlxuICAgIGNvbnN0IHJldHJ5Q29uZmlnOiBSZXRyeUNvbmZpZyA9IHtcbiAgICAgIG1heEF0dGVtcHRzOiA1LFxuICAgICAgYmFzZURlbGF5OiAxMDAwLFxuICAgICAgbWF4RGVsYXk6IDMwMDAwLFxuICAgICAgYmFja29mZk11bHRpcGxpZXI6IDIsXG4gICAgICBqaXR0ZXI6IHRydWUsXG4gICAgICByZXRyeWFibGVFcnJvcnM6IFsnbmV0d29yaycsICdzeXN0ZW0nLCAndGVtcG9yYXJ5J10sXG4gICAgICBjaXJjdWl0QnJlYWtlclRocmVzaG9sZDogNSxcbiAgICAgIHJlY292ZXJ5VGltZW91dDogMzAwMDBcbiAgICB9XG5cbiAgICAvLyDlm57mu5rnrZbnlaXphY3nva5cbiAgICBjb25zdCByb2xsYmFja0NvbmZpZzogUm9sbGJhY2tDb25maWcgPSB7XG4gICAgICBlbmFibGVkOiB0cnVlLFxuICAgICAgbWF4VmVyc2lvbnM6IDEwLFxuICAgICAgYXV0b1JvbGxiYWNrOiB0cnVlLFxuICAgICAgcm9sbGJhY2tUaW1lb3V0OiAzMDAwMCxcbiAgICAgIHByZXNlcnZlRGF0YTogdHJ1ZSxcbiAgICAgIHZhbGlkYXRpb25SZXF1aXJlZDogdHJ1ZVxuICAgIH1cblxuICAgIC8vIOmZjee6p+etlueVpemFjee9rlxuICAgIGNvbnN0IGZhbGxiYWNrQ29uZmlnOiBGYWxsYmFja0NvbmZpZyA9IHtcbiAgICAgIGVuYWJsZWQ6IHRydWUsXG4gICAgICBzdHJhdGVnaWVzOiBbXG4gICAgICAgIHtcbiAgICAgICAgICBpZDogJ29mZmxpbmUtbW9kZScsXG4gICAgICAgICAgbmFtZTogJ+emu+e6v+aooeW8jycsXG4gICAgICAgICAgY29uZGl0aW9uOiAoZXJyb3IpID0+IGVycm9yLmNhdGVnb3J5ID09PSBFcnJvckNhdGVnb3J5Lk5FVFdPUkssXG4gICAgICAgICAgYWN0aW9uOiBhc3luYyAoKSA9PiB7IC8qIOWQr+eUqOemu+e6v+aooeW8jyAqLyB9LFxuICAgICAgICAgIHByaW9yaXR5OiAxLFxuICAgICAgICAgIHRpbWVvdXQ6IDUwMDBcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIGlkOiAncmVhZC1vbmx5JyxcbiAgICAgICAgICBuYW1lOiAn5Y+q6K+75qih5byPJyxcbiAgICAgICAgICBjb25kaXRpb246IChlcnJvcikgPT4gZXJyb3IuY2F0ZWdvcnkgPT09IEVycm9yQ2F0ZWdvcnkuREFUQSxcbiAgICAgICAgICBhY3Rpb246IGFzeW5jICgpID0+IHsgLyog5ZCv55So5Y+q6K+75qih5byPICovIH0sXG4gICAgICAgICAgcHJpb3JpdHk6IDIsXG4gICAgICAgICAgdGltZW91dDogMzAwMFxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgaWQ6ICdsaW1pdGVkLWZ1bmN0aW9uYWxpdHknLFxuICAgICAgICAgIG5hbWU6ICflip/og73pmZDliLYnLFxuICAgICAgICAgIGNvbmRpdGlvbjogKGVycm9yKSA9PiBlcnJvci5zZXZlcml0eSA9PT0gRXJyb3JTZXZlcml0eS5ISUdILFxuICAgICAgICAgIGFjdGlvbjogYXN5bmMgKCkgPT4geyAvKiDlkK/nlKjlip/og73pmZDliLYgKi8gfSxcbiAgICAgICAgICBwcmlvcml0eTogMyxcbiAgICAgICAgICB0aW1lb3V0OiAyMDAwXG4gICAgICAgIH1cbiAgICAgIF0sXG4gICAgICBhdXRvU3dpdGNoOiB0cnVlLFxuICAgICAgaGVhbHRoQ2hlY2tJbnRlcnZhbDogMzAwMDAsXG4gICAgICByZWNvdmVyeUNoZWNrSW50ZXJ2YWw6IDYwMDAwXG4gICAgfVxuXG4gICAgLy8g5rOo5YaM6buY6K6k562W55WlXG4gICAgdGhpcy5yZWdpc3RlclN0cmF0ZWd5KG5ldyBSZXRyeVN0cmF0ZWd5KHJldHJ5Q29uZmlnKSlcbiAgICB0aGlzLnJlZ2lzdGVyU3RyYXRlZ3kobmV3IENpcmN1aXRCcmVha2VyU3RyYXRlZ3koKSlcbiAgICB0aGlzLnJlZ2lzdGVyU3RyYXRlZ3kobmV3IFJvbGxiYWNrU3RyYXRlZ3kocm9sbGJhY2tDb25maWcpKVxuICAgIHRoaXMucmVnaXN0ZXJTdHJhdGVneShuZXcgRGVncmFkZWRNb2RlU3RyYXRlZ3koZmFsbGJhY2tDb25maWcpKVxuICB9XG5cbiAgLyoqXG4gICAqIOWIneWni+WMluaMh+agh1xuICAgKi9cbiAgcHJpdmF0ZSBpbml0aWFsaXplTWV0cmljcygpOiBSZWNvdmVyeU1ldHJpY3Mge1xuICAgIHJldHVybiB7XG4gICAgICB0b3RhbFJlY292ZXJpZXM6IDAsXG4gICAgICBzdWNjZXNzZnVsUmVjb3ZlcmllczogMCxcbiAgICAgIGZhaWxlZFJlY292ZXJpZXM6IDAsXG4gICAgICBhdmVyYWdlUmVjb3ZlcnlUaW1lOiAwLFxuICAgICAgc3VjY2Vzc1JhdGU6IDAsXG4gICAgICBzdHJhdGVneVVzYWdlOiBuZXcgTWFwKCksXG4gICAgICBhdmVyYWdlQXR0ZW1wdHM6IDAsXG4gICAgICBlc2NhbGF0aW9uUmF0ZTogMCxcbiAgICAgIHJlY292ZXJ5VGltZURpc3RyaWJ1dGlvbjogW11cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICog55Sf5oiQ5Lya6K+dSURcbiAgICovXG4gIHByaXZhdGUgZ2VuZXJhdGVTZXNzaW9uSWQoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gYHJlY292ZXJ5LSR7RGF0ZS5ub3coKX0tJHtNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zdWJzdHIoMiwgOSl9YFxuICB9XG5cbiAgLyoqXG4gICAqIOeUn+aIkOajgOafpeeCuUlEXG4gICAqL1xuICBwcml2YXRlIGdlbmVyYXRlQ2hlY2twb2ludElkKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIGBjaGVja3BvaW50LSR7RGF0ZS5ub3coKX0tJHtNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zdWJzdHIoMiwgOSl9YFxuICB9XG5cbiAgLyoqXG4gICAqIOW6j+WIl+WMlueKtuaAgVxuICAgKi9cbiAgcHJpdmF0ZSBzZXJpYWxpemVTdGF0ZShzdGF0ZTogYW55KTogYW55IHtcbiAgICAvLyDnroDljZXnmoTnirbmgIHluo/liJfljJblrp7njrBcbiAgICB0cnkge1xuICAgICAgcmV0dXJuIEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoc3RhdGUpKVxuICAgIH0gY2F0Y2gge1xuICAgICAgcmV0dXJuIHsgZXJyb3I6ICfnirbmgIHluo/liJfljJblpLHotKUnLCBvcmlnaW5hbDogc3RhdGUgfVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiDmuIXnkIbkvJror51cbiAgICovXG4gIHByaXZhdGUgY2xlYW51cFNlc3Npb24oc2Vzc2lvbklkOiBzdHJpbmcpOiB2b2lkIHtcbiAgICBjb25zdCBzZXNzaW9uID0gdGhpcy5zZXNzaW9ucy5nZXQoc2Vzc2lvbklkKVxuICAgIGlmIChzZXNzaW9uICYmIHNlc3Npb24uZW5kVGltZSkge1xuICAgICAgLy8g5L+d55WZ5pyA6L+RMTAwMOS4quWujOaIkOeahOS8muivnVxuICAgICAgY29uc3QgY29tcGxldGVkU2Vzc2lvbnMgPSBBcnJheS5mcm9tKHRoaXMuc2Vzc2lvbnMudmFsdWVzKCkpXG4gICAgICAgIC5maWx0ZXIocyA9PiBzLmVuZFRpbWUpXG4gICAgICAgIC5zb3J0KChhLCBiKSA9PiAoYi5lbmRUaW1lIHx8IDApIC0gKGEuZW5kVGltZSB8fCAwKSlcblxuICAgICAgaWYgKGNvbXBsZXRlZFNlc3Npb25zLmxlbmd0aCA+IDEwMDApIHtcbiAgICAgICAgY29uc3QgdG9SZW1vdmUgPSBjb21wbGV0ZWRTZXNzaW9ucy5zbGljZSgxMDAwKVxuICAgICAgICB0b1JlbW92ZS5mb3JFYWNoKHMgPT4gdGhpcy5zZXNzaW9ucy5kZWxldGUocy5pZCkpXG4gICAgICB9XG4gICAgfVxuICB9XG59Il0sInZlcnNpb24iOjN9