e679286026af3cba9c96c127e23cbdd6
"use strict";
/**
 * LocalOperationService 性能测试
 * 验证本地操作响应时间和性能指标
 */
Object.defineProperty(exports, "__esModule", { value: true });
exports.runLocalOperationPerformanceTests = runLocalOperationPerformanceTests;
const local_operation_service_1 = require("../src/services/local-operation-service");
const database_unified_1 = require("../src/services/database-unified");
// ============================================================================
// 测试数据生成器
// ============================================================================
class TestDataGenerator {
    static generateCardData(count = 1) {
        const cards = [];
        for (let i = 0; i < count; i++) {
            cards.push({
                frontContent: {
                    title: `Test Card ${i + 1}`,
                    text: `This is test card number ${i + 1} with some sample content.`,
                    tags: [`tag${i % 5}`, `test`, `generated`]
                },
                backContent: {
                    title: `Back ${i + 1}`,
                    text: `Back content for card ${i + 1}`,
                    tags: [`back${i % 3}`, `test`]
                },
                style: {
                    type: ['solid', 'gradient', 'glass'][Math.floor(Math.random() * 3)],
                    colors: ['#ff6b6b', '#4ecdc4', '#45b7d1']
                },
                userId: 'test_user'
            });
        }
        return cards;
    }
    static generateSearchTerms(count = 10) {
        const terms = [
            'test', 'card', 'content', 'back', 'front', 'title',
            'sample', 'generated', 'data', 'performance'
        ];
        const searchTerms = [];
        for (let i = 0; i < count; i++) {
            searchTerms.push(terms[Math.floor(Math.random() * terms.length)]);
        }
        return searchTerms;
    }
}
// ============================================================================
// 性能测试执行器
// ============================================================================
class PerformanceTestRunner {
    constructor() {
        Object.defineProperty(this, "results", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: []
        });
        Object.defineProperty(this, "thresholdMs", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: 100
        }); // 100ms 阈值
    }
    async runAllTests() {
        console.log('🚀 开始 LocalOperationService 性能测试...');
        // 确保数据库初始化
        await database_unified_1.db.open();
        // 运行所有测试
        await this.testCreateCard();
        await this.testUpdateCard();
        await this.testDeleteCard();
        await this.testBulkCreate();
        await this.testGetCards();
        await this.testSearchCards();
        // 输出测试结果
        this.printResults();
        return this.results;
    }
    async testCreateCard() {
        console.log('\n📝 测试创建卡片性能...');
        const testData = TestDataGenerator.generateCardData(50);
        const durations = [];
        let successCount = 0;
        for (const cardData of testData) {
            const startTime = performance.now();
            try {
                const result = await local_operation_service_1.localOperationServiceOptimized.createCard(cardData);
                const duration = performance.now() - startTime;
                durations.push(duration);
                if (result.success)
                    successCount++;
                // 清理测试数据
                if (result.success && result.id) {
                    await database_unified_1.db.cards.delete(result.id);
                }
            }
            catch (error) {
                const duration = performance.now() - startTime;
                durations.push(duration);
                console.error(`Create card failed:`, error);
            }
        }
        this.addTestResult('createCard', durations, successCount, testData.length);
    }
    async testUpdateCard() {
        console.log('\n✏️ 测试更新卡片性能...');
        // 先创建测试卡片
        const testCard = await local_operation_service_1.localOperationServiceOptimized.createCard(TestDataGenerator.generateCardData(1)[0]);
        if (!testCard.success || !testCard.id) {
            console.error('无法创建测试卡片进行更新测试');
            return;
        }
        const durations = [];
        let successCount = 0;
        for (let i = 0; i < 50; i++) {
            const startTime = performance.now();
            try {
                const result = await local_operation_service_1.localOperationServiceOptimized.updateCard(testCard.id, {
                    frontContent: {
                        title: `Updated Title ${i}`,
                        text: `Updated content ${i}`
                    }
                });
                const duration = performance.now() - startTime;
                durations.push(duration);
                if (result.success)
                    successCount++;
            }
            catch (error) {
                const duration = performance.now() - startTime;
                durations.push(duration);
                console.error(`Update card failed:`, error);
            }
        }
        // 清理测试数据
        await database_unified_1.db.cards.delete(testCard.id);
        this.addTestResult('updateCard', durations, successCount, 50);
    }
    async testDeleteCard() {
        console.log('\n🗑️ 测试删除卡片性能...');
        // 先创建测试卡片
        const testCards = [];
        for (let i = 0; i < 50; i++) {
            const result = await local_operation_service_1.localOperationServiceOptimized.createCard(TestDataGenerator.generateCardData(1)[0]);
            if (result.success && result.id) {
                testCards.push(result);
            }
        }
        const durations = [];
        let successCount = 0;
        for (const card of testCards) {
            const startTime = performance.now();
            try {
                const result = await local_operation_service_1.localOperationServiceOptimized.deleteCard(card.id);
                const duration = performance.now() - startTime;
                durations.push(duration);
                if (result.success)
                    successCount++;
            }
            catch (error) {
                const duration = performance.now() - startTime;
                durations.push(duration);
                console.error(`Delete card failed:`, error);
            }
        }
        this.addTestResult('deleteCard', durations, successCount, testCards.length);
    }
    async testBulkCreate() {
        console.log('\n📦 测试批量创建卡片性能...');
        const batchSizes = [10, 25, 50];
        for (const batchSize of batchSizes) {
            const testData = TestDataGenerator.generateCardData(batchSize);
            const durations = [];
            for (let i = 0; i < 10; i++) { // 每个批次大小测试10次
                const startTime = performance.now();
                try {
                    const results = await local_operation_service_1.localOperationServiceOptimized.bulkCreateCards(testData);
                    const duration = performance.now() - startTime;
                    durations.push(duration);
                    // 清理测试数据
                    for (const result of results) {
                        if (result.success && result.id) {
                            await database_unified_1.db.cards.delete(result.id);
                        }
                    }
                }
                catch (error) {
                    const duration = performance.now() - startTime;
                    durations.push(duration);
                    console.error(`Bulk create failed:`, error);
                }
            }
            this.addTestResult(`bulkCreate_${batchSize}`, durations, durations.length, durations.length);
        }
    }
    async testGetCards() {
        console.log('\n📋 测试获取卡片列表性能...');
        // 创建一些测试数据
        const testData = TestDataGenerator.generateCardData(100);
        const createdCards = [];
        for (const cardData of testData) {
            const result = await local_operation_service_1.localOperationServiceOptimized.createCard(cardData);
            if (result.success && result.id) {
                createdCards.push(result);
            }
        }
        const durations = [];
        const testOptions = [
            { limit: 10 },
            { limit: 50 },
            { limit: 100 },
            { folderId: createdCards[0]?.id ? 'test_folder' : undefined, limit: 25 }
        ];
        for (const options of testOptions) {
            const startTime = performance.now();
            try {
                await local_operation_service_1.localOperationServiceOptimized.getCards(options);
                const duration = performance.now() - startTime;
                durations.push(duration);
            }
            catch (error) {
                const duration = performance.now() - startTime;
                durations.push(duration);
                console.error(`Get cards failed:`, error);
            }
        }
        // 清理测试数据
        for (const card of createdCards) {
            await database_unified_1.db.cards.delete(card.id);
        }
        this.addTestResult('getCards', durations, durations.length, durations.length);
    }
    async testSearchCards() {
        console.log('\n🔍 测试搜索卡片性能...');
        // 创建测试数据
        const testData = TestDataGenerator.generateCardData(50);
        const createdCards = [];
        for (const cardData of testData) {
            const result = await local_operation_service_1.localOperationServiceOptimized.createCard(cardData);
            if (result.success && result.id) {
                createdCards.push(result);
            }
        }
        const searchTerms = TestDataGenerator.generateSearchTerms(20);
        const durations = [];
        for (const searchTerm of searchTerms) {
            const startTime = performance.now();
            try {
                await local_operation_service_1.localOperationServiceOptimized.searchCards({
                    term: searchTerm,
                    limit: 25
                });
                const duration = performance.now() - startTime;
                durations.push(duration);
            }
            catch (error) {
                const duration = performance.now() - startTime;
                durations.push(duration);
                console.error(`Search cards failed:`, error);
            }
        }
        // 清理测试数据
        for (const card of createdCards) {
            await database_unified_1.db.cards.delete(card.id);
        }
        this.addTestResult('searchCards', durations, durations.length, durations.length);
    }
    addTestResult(operation, durations, successCount, totalCount) {
        const totalDuration = durations.reduce((sum, d) => sum + d, 0);
        const averageDuration = totalDuration / durations.length;
        const minDuration = Math.min(...durations);
        const maxDuration = Math.max(...durations);
        const successRate = successCount / totalCount;
        const result = {
            operation,
            totalDuration,
            averageDuration,
            minDuration,
            maxDuration,
            successRate,
            withinThreshold: averageDuration <= this.thresholdMs
        };
        this.results.push(result);
    }
    printResults() {
        console.log('\n📊 性能测试结果:');
        console.log('='.repeat(80));
        const header = '| 操作类型               | 平均时间 | 最小时间 | 最大时间 | 成功率 | 达标 |';
        console.log(header);
        console.log('|' + '-'.repeat(78) + '|');
        for (const result of this.results) {
            const status = result.withinThreshold ? '✅' : '❌';
            const row = `| ${result.operation.padEnd(22)} | ${result.averageDuration.toFixed(2).padStart(8)}ms | ${result.minDuration.toFixed(2).padStart(8)}ms | ${result.maxDuration.toFixed(2).padStart(8)}ms | ${(result.successRate * 100).toFixed(1).padStart(5)}% | ${status.padEnd(4)} |`;
            console.log(row);
        }
        console.log('\n📈 总体统计:');
        const avgTime = this.results.reduce((sum, r) => sum + r.averageDuration, 0) / this.results.length;
        const overallSuccessRate = this.results.reduce((sum, r) => sum + r.successRate, 0) / this.results.length;
        const passCount = this.results.filter(r => r.withinThreshold).length;
        console.log(`平均响应时间: ${avgTime.toFixed(2)}ms`);
        console.log(`总体成功率: ${(overallSuccessRate * 100).toFixed(1)}%`);
        console.log(`达标操作数: ${passCount}/${this.results.length}`);
        console.log(`达标率: ${(passCount / this.results.length * 100).toFixed(1)}%`);
        console.log('\n🎯 性能目标验证:');
        if (avgTime <= 50) {
            console.log('✅ 平均响应时间 < 50ms: 达标');
        }
        else {
            console.log(`❌ 平均响应时间 < 50ms: 未达标 (实际: ${avgTime.toFixed(2)}ms)`);
        }
        if (overallSuccessRate >= 0.99) {
            console.log('✅ 成功率 >= 99%: 达标');
        }
        else {
            console.log(`❌ 成功率 >= 99%: 未达标 (实际: ${(overallSuccessRate * 100).toFixed(1)}%)`);
        }
        if (passCount === this.results.length) {
            console.log('✅ 所有操作响应时间 < 100ms: 达标');
        }
        else {
            console.log(`❌ 所有操作响应时间 < 100ms: 未达标 (达标: ${passCount}/${this.results.length})`);
        }
    }
}
// ============================================================================
// 内存使用测试
// ============================================================================
class MemoryUsageTest {
    async runMemoryTest() {
        console.log('\n💾 内存使用测试...');
        // 获取初始内存使用
        const initialMemory = this.getMemoryUsage();
        console.log(`初始内存使用: ${(initialMemory.usedJSHeapSize / 1024 / 1024).toFixed(2)} MB`);
        // 执行大量操作
        const testData = TestDataGenerator.generateCardData(1000);
        const startTime = performance.now();
        const createdCards = [];
        for (const cardData of testData) {
            const result = await local_operation_service_1.localOperationServiceOptimized.createCard(cardData);
            if (result.success && result.id) {
                createdCards.push(result);
            }
        }
        // 获取峰值内存使用
        const peakMemory = this.getMemoryUsage();
        console.log(`峰值内存使用: ${(peakMemory.usedJSHeapSize / 1024 / 1024).toFixed(2)} MB`);
        // 清理数据
        for (const card of createdCards) {
            await database_unified_1.db.cards.delete(card.id);
        }
        // 获取清理后内存使用
        const finalMemory = this.getMemoryUsage();
        console.log(`清理后内存使用: ${(finalMemory.usedJSHeapSize / 1024 / 1024).toFixed(2)} MB`);
        const memoryIncrease = peakMemory.usedJSHeapSize - initialMemory.usedJSHeapSize;
        console.log(`内存增长: ${(memoryIncrease / 1024 / 1024).toFixed(2)} MB`);
        const duration = performance.now() - startTime;
        console.log(`创建1000张卡片耗时: ${duration.toFixed(2)}ms`);
        console.log(`平均每张卡片耗时: ${(duration / 1000).toFixed(2)}ms`);
        // 验证内存使用目标
        if (memoryIncrease < 50 * 1024 * 1024) { // 50MB
            console.log('✅ 内存使用增长 < 50MB: 达标');
        }
        else {
            console.log(`❌ 内存使用增长 < 50MB: 未达标 (实际: ${(memoryIncrease / 1024 / 1024).toFixed(2)}MB)`);
        }
    }
    getMemoryUsage() {
        if ('memory' in performance) {
            return performance.memory;
        }
        return {
            usedJSHeapSize: 0,
            totalJSHeapSize: 0,
            jsHeapSizeLimit: 0
        };
    }
}
// ============================================================================
// 并发性能测试
// ============================================================================
class ConcurrencyTest {
    async runConcurrencyTest() {
        console.log('\n⚡ 并发性能测试...');
        const concurrentOperations = 50;
        const testData = TestDataGenerator.generateCardData(concurrentOperations);
        const startTime = performance.now();
        // 并发执行创建操作
        const promises = testData.map(cardData => local_operation_service_1.localOperationServiceOptimized.createCard(cardData));
        const results = await Promise.all(promises);
        const duration = performance.now() - startTime;
        const successCount = results.filter(r => r.success).length;
        const averageTime = duration / concurrentOperations;
        console.log(`并发创建${concurrentOperations}张卡片耗时: ${duration.toFixed(2)}ms`);
        console.log(`平均每张卡片耗时: ${averageTime.toFixed(2)}ms`);
        console.log(`成功率: ${(successCount / concurrentOperations * 100).toFixed(1)}%`);
        // 清理测试数据
        for (const result of results) {
            if (result.success && result.id) {
                await database_unified_1.db.cards.delete(result.id);
            }
        }
        // 验证并发性能目标
        if (averageTime <= 100) {
            console.log('✅ 并发操作平均时间 < 100ms: 达标');
        }
        else {
            console.log(`❌ 并发操作平均时间 < 100ms: 未达标 (实际: ${averageTime.toFixed(2)}ms)`);
        }
    }
}
// ============================================================================
// 小数据集优化测试
// ============================================================================
class SmallDatasetOptimizationTest {
    async runSmallDatasetTest() {
        console.log('\n📊 小数据集优化测试...');
        // 创建小数据集测试数据 (9 cards, 8 folders, 13 tags)
        const smallCards = TestDataGenerator.generateCardData(9);
        const createdCards = [];
        console.log('创建小数据集测试数据...');
        for (const cardData of smallCards) {
            const result = await local_operation_service_1.localOperationServiceOptimized.createCard(cardData);
            if (result.success && result.id) {
                createdCards.push(result);
            }
        }
        console.log(`✅ 创建了 ${createdCards.length} 张测试卡片`);
        // 测试小数据集查询性能
        const queryTestResults = await this.testQueryPerformance(createdCards);
        // 测试内存缓存效果
        const cacheTestResults = await this.testCacheEffectiveness(createdCards);
        // 测试搜索性能
        const searchTestResults = await this.testSearchPerformance(createdCards);
        // 清理测试数据
        console.log('清理小数据集测试数据...');
        for (const card of createdCards) {
            await database_unified_1.db.cards.delete(card.id);
        }
        // 输出综合结果
        console.log('\n📈 小数据集优化测试结果:');
        console.log(`查询性能: ${queryTestResults.averageQueryTime.toFixed(2)}ms (目标: < 10ms) ${queryTestResults.passed ? '✅' : '❌'}`);
        console.log(`缓存命中率: ${(cacheTestResults.hitRate * 100).toFixed(1)}% (目标: > 90%) ${cacheTestResults.passed ? '✅' : '❌'}`);
        console.log(`搜索性能: ${searchTestResults.averageSearchTime.toFixed(2)}ms (目标: < 15ms) ${searchTestResults.passed ? '✅' : '❌'}`);
        const allPassed = queryTestResults.passed && cacheTestResults.passed && searchTestResults.passed;
        console.log(`\n小数据集优化总体: ${allPassed ? '✅ 通过' : '❌ 未通过'}`);
        return allPassed;
    }
    async testQueryPerformance(cards) {
        console.log('测试小数据集查询性能...');
        const queryTimes = [];
        const testIterations = 20;
        for (let i = 0; i < testIterations; i++) {
            const startTime = performance.now();
            try {
                await local_operation_service_1.localOperationServiceOptimized.getCards({ limit: 9 });
                const queryTime = performance.now() - startTime;
                queryTimes.push(queryTime);
            }
            catch (error) {
                console.warn(`查询测试 ${i + 1} 失败:`, error);
            }
        }
        const averageQueryTime = queryTimes.reduce((sum, time) => sum + time, 0) / queryTimes.length;
        const passed = averageQueryTime < 10; // 目标: 小于10ms
        console.log(`平均查询时间: ${averageQueryTime.toFixed(2)}ms`);
        return { averageQueryTime, passed };
    }
    async testCacheEffectiveness(cards) {
        console.log('测试小数据集缓存效果...');
        let cacheHits = 0;
        const totalQueries = 15;
        // 首次查询 (缓存未命中)
        await local_operation_service_1.localOperationServiceOptimized.getCards({ limit: 9 });
        // 重复查询 (测试缓存命中)
        for (let i = 0; i < totalQueries; i++) {
            const startTime = performance.now();
            try {
                await local_operation_service_1.localOperationServiceOptimized.getCards({ limit: 9 });
                const queryTime = performance.now() - startTime;
                // 如果查询时间小于1ms，认为是缓存命中
                if (queryTime < 1) {
                    cacheHits++;
                }
            }
            catch (error) {
                console.warn(`缓存测试 ${i + 1} 失败:`, error);
            }
        }
        const hitRate = cacheHits / totalQueries;
        const passed = hitRate > 0.9; // 目标: 大于90%
        console.log(`缓存命中率: ${(hitRate * 100).toFixed(1)}%`);
        return { hitRate, passed };
    }
    async testSearchPerformance(cards) {
        console.log('测试小数据集搜索性能...');
        const searchTerms = ['test', 'card', 'content', 'title', 'back'];
        const searchTimes = [];
        for (const term of searchTerms) {
            const startTime = performance.now();
            try {
                await local_operation_service_1.localOperationServiceOptimized.searchCards({
                    term,
                    limit: 10
                });
                const searchTime = performance.now() - startTime;
                searchTimes.push(searchTime);
            }
            catch (error) {
                console.warn(`搜索测试失败:`, error);
            }
        }
        const averageSearchTime = searchTimes.reduce((sum, time) => sum + time, 0) / searchTimes.length;
        const passed = averageSearchTime < 15; // 目标: 小于15ms
        console.log(`平均搜索时间: ${averageSearchTime.toFixed(2)}ms`);
        return { averageSearchTime, passed };
    }
}
// ============================================================================
// 主测试入口
// ============================================================================
async function runLocalOperationPerformanceTests() {
    console.log('🧪 LocalOperationService 性能测试开始');
    console.log('='.repeat(80));
    try {
        // 运行基础性能测试
        const testRunner = new PerformanceTestRunner();
        await testRunner.runAllTests();
        // 运行内存使用测试
        const memoryTest = new MemoryUsageTest();
        await memoryTest.runMemoryTest();
        // 运行并发性能测试
        const concurrencyTest = new ConcurrencyTest();
        await concurrencyTest.runConcurrencyTest();
        // 运行小数据集优化测试
        const smallDatasetTest = new SmallDatasetOptimizationTest();
        await smallDatasetTest.runSmallDatasetTest();
        console.log('\n🎉 所有性能测试完成!');
    }
    catch (error) {
        console.error('\n❌ 性能测试失败:', error);
    }
}
// 如果直接运行此文件，执行测试
if (typeof window !== 'undefined') {
    // 浏览器环境
    window.runLocalOperationPerformanceTests = runLocalOperationPerformanceTests;
}
else if (typeof process !== 'undefined') {
    // Node.js环境
    runLocalOperationPerformanceTests().catch(console.error);
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiRDpcXFByb2plY3RzXFxDYXJkRXZlcnl0aGluZ1xcY2FyZGFsbC1wcm90b3R5cGVcXHRlc3RzXFxwZXJmb3JtYW5jZVxcbG9jYWwtb3BlcmF0aW9uLXBlcmZvcm1hbmNlLnRlc3QudHMiLCJtYXBwaW5ncyI6IjtBQUFBOzs7R0FHRzs7QUErb0JILDhFQTBCQztBQXZxQkQscUZBQXdGO0FBQ3hGLHVFQUFxRDtBQXNCckQsK0VBQStFO0FBQy9FLFVBQVU7QUFDViwrRUFBK0U7QUFFL0UsTUFBTSxpQkFBaUI7SUFDckIsTUFBTSxDQUFDLGdCQUFnQixDQUFDLFFBQWdCLENBQUM7UUFDdkMsTUFBTSxLQUFLLEdBQUcsRUFBRSxDQUFBO1FBRWhCLEtBQUssSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxLQUFLLEVBQUUsQ0FBQyxFQUFFLEVBQUUsQ0FBQztZQUMvQixLQUFLLENBQUMsSUFBSSxDQUFDO2dCQUNULFlBQVksRUFBRTtvQkFDWixLQUFLLEVBQUUsYUFBYSxDQUFDLEdBQUcsQ0FBQyxFQUFFO29CQUMzQixJQUFJLEVBQUUsNEJBQTRCLENBQUMsR0FBRyxDQUFDLDRCQUE0QjtvQkFDbkUsSUFBSSxFQUFFLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxFQUFFLEVBQUUsTUFBTSxFQUFFLFdBQVcsQ0FBQztpQkFDM0M7Z0JBQ0QsV0FBVyxFQUFFO29CQUNYLEtBQUssRUFBRSxRQUFRLENBQUMsR0FBRyxDQUFDLEVBQUU7b0JBQ3RCLElBQUksRUFBRSx5QkFBeUIsQ0FBQyxHQUFHLENBQUMsRUFBRTtvQkFDdEMsSUFBSSxFQUFFLENBQUMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxFQUFFLEVBQUUsTUFBTSxDQUFDO2lCQUMvQjtnQkFDRCxLQUFLLEVBQUU7b0JBQ0wsSUFBSSxFQUFFLENBQUMsT0FBTyxFQUFFLFVBQVUsRUFBRSxPQUFPLENBQUMsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxNQUFNLEVBQUUsR0FBRyxDQUFDLENBQUMsQ0FBQztvQkFDbkUs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TUFBTSxVQUFVLENBQUMsV0FBVyxFQUFFLENBQUE7UUFFOUIsV0FBVztRQUNYLE1BQU0sVUFBVSxHQUFHLElBQUksZUFBZSxFQUFFLENBQUE7UUFDeEMsTUFBTSxVQUFVLENBQUMsYUFBYSxFQUFFLENBQUE7UUFFaEMsV0FBVztRQUNYLE1BQU0sZUFBZSxHQUFHLElBQUksZUFBZSxFQUFFLENBQUE7UUFDN0MsTUFBTSxlQUFlLENBQUMsa0JBQWtCLEVBQUUsQ0FBQTtRQUUxQyxhQUFhO1FBQ2IsTUFBTSxnQkFBZ0IsR0FBRyxJQUFJLDRCQUE0QixFQUFFLENBQUE7UUFDM0QsTUFBTSxnQkFBZ0IsQ0FBQyxtQkFBbUIsRUFBRSxDQUFBO1FBRTVDLE9BQU8sQ0FBQyxHQUFHLENBQUMsZ0JBQWdCLENBQUMsQ0FBQTtJQUUvQixDQUFDO0lBQUMsT0FBTyxLQUFLLEVBQUUsQ0FBQztRQUNmLE9BQU8sQ0FBQyxLQUFLLENBQUMsYUFBYSxFQUFFLEtBQUssQ0FBQyxDQUFBO0lBQ3JDLENBQUM7QUFDSCxDQUFDO0FBRUQsaUJBQWlCO0FBQ2pCLElBQUksT0FBTyxNQUFNLEtBQUssV0FBVyxFQUFFLENBQUM7SUFDbEMsUUFBUTtJQUNQLE1BQWMsQ0FBQyxpQ0FBaUMsR0FBRyxpQ0FBaUMsQ0FBQTtBQUN2RixDQUFDO0tBQU0sSUFBSSxPQUFPLE9BQU8sS0FBSyxXQUFXLEVBQUUsQ0FBQztJQUMxQyxZQUFZO0lBQ1osaUNBQWlDLEVBQUUsQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFDLEtBQUssQ0FBQyxDQUFBO0FBQzFELENBQUMiLCJuYW1lcyI6W10sInNvdXJjZXMiOlsiRDpcXFByb2plY3RzXFxDYXJkRXZlcnl0aGluZ1xcY2FyZGFsbC1wcm90b3R5cGVcXHRlc3RzXFxwZXJmb3JtYW5jZVxcbG9jYWwtb3BlcmF0aW9uLXBlcmZvcm1hbmNlLnRlc3QudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXHJcbiAqIExvY2FsT3BlcmF0aW9uU2VydmljZSDmgKfog73mtYvor5VcclxuICog6aqM6K+B5pys5Zyw5pON5L2c5ZON5bqU5pe26Ze05ZKM5oCn6IO95oyH5qCHXHJcbiAqL1xyXG5cclxuaW1wb3J0IHsgbG9jYWxPcGVyYXRpb25TZXJ2aWNlT3B0aW1pemVkIH0gZnJvbSAnLi4vc3JjL3NlcnZpY2VzL2xvY2FsLW9wZXJhdGlvbi1zZXJ2aWNlJ1xyXG5pbXBvcnQgeyBkYiB9IGZyb20gJy4uL3NyYy9zZXJ2aWNlcy9kYXRhYmFzZS11bmlmaWVkJ1xyXG5cclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG4vLyDmtYvor5XphY3nva5cclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG5cclxuaW50ZXJmYWNlIFRlc3RDb25maWcge1xyXG4gIGl0ZXJhdGlvbnM6IG51bWJlclxyXG4gIGJhdGNoU2l6ZTogbnVtYmVyXHJcbiAgdGVzdERhdGE6IGFueVtdXHJcbn1cclxuXHJcbmludGVyZmFjZSBUZXN0UmVzdWx0IHtcclxuICBvcGVyYXRpb246IHN0cmluZ1xyXG4gIHRvdGFsRHVyYXRpb246IG51bWJlclxyXG4gIGF2ZXJhZ2VEdXJhdGlvbjogbnVtYmVyXHJcbiAgbWluRHVyYXRpb246IG51bWJlclxyXG4gIG1heER1cmF0aW9uOiBudW1iZXJcclxuICBzdWNjZXNzUmF0ZTogbnVtYmVyXHJcbiAgd2l0aGluVGhyZXNob2xkOiBib29sZWFuXHJcbn1cclxuXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuLy8g5rWL6K+V5pWw5o2u55Sf5oiQ5ZmoXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuXHJcbmNsYXNzIFRlc3REYXRhR2VuZXJhdG9yIHtcclxuICBzdGF0aWMgZ2VuZXJhdGVDYXJkRGF0YShjb3VudDogbnVtYmVyID0gMSkge1xyXG4gICAgY29uc3QgY2FyZHMgPSBbXVxyXG4gICAgXHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNvdW50OyBpKyspIHtcclxuICAgICAgY2FyZHMucHVzaCh7XHJcbiAgICAgICAgZnJvbnRDb250ZW50OiB7XHJcbiAgICAgICAgICB0aXRsZTogYFRlc3QgQ2FyZCAke2kgKyAxfWAsXHJcbiAgICAgICAgICB0ZXh0OiBgVGhpcyBpcyB0ZXN0IGNhcmQgbnVtYmVyICR7aSArIDF9IHdpdGggc29tZSBzYW1wbGUgY29udGVudC5gLFxyXG4gICAgICAgICAgdGFnczogW2B0YWcke2kgJSA1fWAsIGB0ZXN0YCwgYGdlbmVyYXRlZGBdXHJcbiAgICAgICAgfSxcclxuICAgICAgICBiYWNrQ29udGVudDoge1xyXG4gICAgICAgICAgdGl0bGU6IGBCYWNrICR7aSArIDF9YCxcclxuICAgICAgICAgIHRleHQ6IGBCYWNrIGNvbnRlbnQgZm9yIGNhcmQgJHtpICsgMX1gLFxyXG4gICAgICAgICAgdGFnczogW2BiYWNrJHtpICUgM31gLCBgdGVzdGBdXHJcbiAgICAgICAgfSxcclxuICAgICAgICBzdHlsZToge1xyXG4gICAgICAgICAgdHlwZTogWydzb2xpZCcsICdncmFkaWVudCcsICdnbGFzcyddW01hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDMpXSxcclxuICAgICAgICAgIGNvbG9yczogWycjZmY2YjZiJywgJyM0ZWNkYzQnLCAnIzQ1YjdkMSddXHJcbiAgICAgICAgfSxcclxuICAgICAgICB1c2VySWQ6ICd0ZXN0X3VzZXInXHJcbiAgICAgIH0pXHJcbiAgICB9XHJcbiAgICBcclxuICAgIHJldHVybiBjYXJkc1xyXG4gIH1cclxuICBcclxuICBzdGF0aWMgZ2VuZXJhdGVTZWFyY2hUZXJtcyhjb3VudDogbnVtYmVyID0gMTApOiBzdHJpbmdbXSB7XHJcbiAgICBjb25zdCB0ZXJtcyA9IFtcclxuICAgICAgJ3Rlc3QnLCAnY2FyZCcsICdjb250ZW50JywgJ2JhY2snLCAnZnJvbnQnLCAndGl0bGUnLCBcclxuICAgICAgJ3NhbXBsZScsICdnZW5lcmF0ZWQnLCAnZGF0YScsICdwZXJmb3JtYW5jZSdcclxuICAgIF1cclxuICAgIFxyXG4gICAgY29uc3Qgc2VhcmNoVGVybXMgPSBbXVxyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjb3VudDsgaSsrKSB7XHJcbiAgICAgIHNlYXJjaFRlcm1zLnB1c2godGVybXNbTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogdGVybXMubGVuZ3RoKV0pXHJcbiAgICB9XHJcbiAgICBcclxuICAgIHJldHVybiBzZWFyY2hUZXJtc1xyXG4gIH1cclxufVxyXG5cclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG4vLyDmgKfog73mtYvor5XmiafooYzlmahcclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG5cclxuY2xhc3MgUGVyZm9ybWFuY2VUZXN0UnVubmVyIHtcclxuICBwcml2YXRlIHJlc3VsdHM6IFRlc3RSZXN1bHRbXSA9IFtdXHJcbiAgcHJpdmF0ZSB0aHJlc2hvbGRNcyA9IDEwMCAvLyAxMDBtcyDpmIjlgLxcclxuXHJcbiAgYXN5bmMgcnVuQWxsVGVzdHMoKTogUHJvbWlzZTxUZXN0UmVzdWx0W10+IHtcclxuICAgIGNvbnNvbGUubG9nKCfwn5qAIOW8gOWniyBMb2NhbE9wZXJhdGlvblNlcnZpY2Ug5oCn6IO95rWL6K+VLi4uJylcclxuICAgIFxyXG4gICAgLy8g56Gu5L+d5pWw5o2u5bqT5Yid5aeL5YyWXHJcbiAgICBhd2FpdCBkYi5vcGVuKClcclxuICAgIFxyXG4gICAgLy8g6L+Q6KGM5omA5pyJ5rWL6K+VXHJcbiAgICBhd2FpdCB0aGlzLnRlc3RDcmVhdGVDYXJkKClcclxuICAgIGF3YWl0IHRoaXMudGVzdFVwZGF0ZUNhcmQoKVxyXG4gICAgYXdhaXQgdGhpcy50ZXN0RGVsZXRlQ2FyZCgpXHJcbiAgICBhd2FpdCB0aGlzLnRlc3RCdWxrQ3JlYXRlKClcclxuICAgIGF3YWl0IHRoaXMudGVzdEdldENhcmRzKClcclxuICAgIGF3YWl0IHRoaXMudGVzdFNlYXJjaENhcmRzKClcclxuICAgIFxyXG4gICAgLy8g6L6T5Ye65rWL6K+V57uT5p6cXHJcbiAgICB0aGlzLnByaW50UmVzdWx0cygpXHJcbiAgICBcclxuICAgIHJldHVybiB0aGlzLnJlc3VsdHNcclxuICB9XHJcblxyXG4gIHByaXZhdGUgYXN5bmMgdGVzdENyZWF0ZUNhcmQoKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICBjb25zb2xlLmxvZygnXFxu8J+TnSDmtYvor5XliJvlu7rljaHniYfmgKfog70uLi4nKVxyXG4gICAgXHJcbiAgICBjb25zdCB0ZXN0RGF0YSA9IFRlc3REYXRhR2VuZXJhdG9yLmdlbmVyYXRlQ2FyZERhdGEoNTApXHJcbiAgICBjb25zdCBkdXJhdGlvbnM6IG51bWJlcltdID0gW11cclxuICAgIGxldCBzdWNjZXNzQ291bnQgPSAwXHJcbiAgICBcclxuICAgIGZvciAoY29uc3QgY2FyZERhdGEgb2YgdGVzdERhdGEpIHtcclxuICAgICAgY29uc3Qgc3RhcnRUaW1lID0gcGVyZm9ybWFuY2Uubm93KClcclxuICAgICAgXHJcbiAgICAgIHRyeSB7XHJcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgbG9jYWxPcGVyYXRpb25TZXJ2aWNlT3B0aW1pemVkLmNyZWF0ZUNhcmQoY2FyZERhdGEpXHJcbiAgICAgICAgY29uc3QgZHVyYXRpb24gPSBwZXJmb3JtYW5jZS5ub3coKSAtIHN0YXJ0VGltZVxyXG4gICAgICAgIFxyXG4gICAgICAgIGR1cmF0aW9ucy5wdXNoKGR1cmF0aW9uKVxyXG4gICAgICAgIGlmIChyZXN1bHQuc3VjY2Vzcykgc3VjY2Vzc0NvdW50KytcclxuICAgICAgICBcclxuICAgICAgICAvLyDmuIXnkIbmtYvor5XmlbDmja5cclxuICAgICAgICBpZiAocmVzdWx0LnN1Y2Nlc3MgJiYgcmVzdWx0LmlkKSB7XHJcbiAgICAgICAgICBhd2FpdCBkYi5jYXJkcy5kZWxldGUocmVzdWx0LmlkKVxyXG4gICAgICAgIH1cclxuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICBjb25zdCBkdXJhdGlvbiA9IHBlcmZvcm1hbmNlLm5vdygpIC0gc3RhcnRUaW1lXHJcbiAgICAgICAgZHVyYXRpb25zLnB1c2goZHVyYXRpb24pXHJcbiAgICAgICAgY29uc29sZS5lcnJvcihgQ3JlYXRlIGNhcmQgZmFpbGVkOmAsIGVycm9yKVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBcclxuICAgIHRoaXMuYWRkVGVzdFJlc3VsdCgnY3JlYXRlQ2FyZCcsIGR1cmF0aW9ucywgc3VjY2Vzc0NvdW50LCB0ZXN0RGF0YS5sZW5ndGgpXHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGFzeW5jIHRlc3RVcGRhdGVDYXJkKCk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgY29uc29sZS5sb2coJ1xcbuKcj++4jyDmtYvor5Xmm7TmlrDljaHniYfmgKfog70uLi4nKVxyXG4gICAgXHJcbiAgICAvLyDlhYjliJvlu7rmtYvor5XljaHniYdcclxuICAgIGNvbnN0IHRlc3RDYXJkID0gYXdhaXQgbG9jYWxPcGVyYXRpb25TZXJ2aWNlT3B0aW1pemVkLmNyZWF0ZUNhcmQoXHJcbiAgICAgIFRlc3REYXRhR2VuZXJhdG9yLmdlbmVyYXRlQ2FyZERhdGEoMSlbMF1cclxuICAgIClcclxuICAgIFxyXG4gICAgaWYgKCF0ZXN0Q2FyZC5zdWNjZXNzIHx8ICF0ZXN0Q2FyZC5pZCkge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCfml6Dms5XliJvlu7rmtYvor5XljaHniYfov5vooYzmm7TmlrDmtYvor5UnKVxyXG4gICAgICByZXR1cm5cclxuICAgIH1cclxuICAgIFxyXG4gICAgY29uc3QgZHVyYXRpb25zOiBudW1iZXJbXSA9IFtdXHJcbiAgICBsZXQgc3VjY2Vzc0NvdW50ID0gMFxyXG4gICAgXHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IDUwOyBpKyspIHtcclxuICAgICAgY29uc3Qgc3RhcnRUaW1lID0gcGVyZm9ybWFuY2Uubm93KClcclxuICAgICAgXHJcbiAgICAgIHRyeSB7XHJcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgbG9jYWxPcGVyYXRpb25TZXJ2aWNlT3B0aW1pemVkLnVwZGF0ZUNhcmQodGVzdENhcmQuaWQsIHtcclxuICAgICAgICAgIGZyb250Q29udGVudDoge1xyXG4gICAgICAgICAgICB0aXRsZTogYFVwZGF0ZWQgVGl0bGUgJHtpfWAsXHJcbiAgICAgICAgICAgIHRleHQ6IGBVcGRhdGVkIGNvbnRlbnQgJHtpfWBcclxuICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG4gICAgICAgIGNvbnN0IGR1cmF0aW9uID0gcGVyZm9ybWFuY2Uubm93KCkgLSBzdGFydFRpbWVcclxuICAgICAgICBcclxuICAgICAgICBkdXJhdGlvbnMucHVzaChkdXJhdGlvbilcclxuICAgICAgICBpZiAocmVzdWx0LnN1Y2Nlc3MpIHN1Y2Nlc3NDb3VudCsrXHJcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgY29uc3QgZHVyYXRpb24gPSBwZXJmb3JtYW5jZS5ub3coKSAtIHN0YXJ0VGltZVxyXG4gICAgICAgIGR1cmF0aW9ucy5wdXNoKGR1cmF0aW9uKVxyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoYFVwZGF0ZSBjYXJkIGZhaWxlZDpgLCBlcnJvcilcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvLyDmuIXnkIbmtYvor5XmlbDmja5cclxuICAgIGF3YWl0IGRiLmNhcmRzLmRlbGV0ZSh0ZXN0Q2FyZC5pZClcclxuICAgIFxyXG4gICAgdGhpcy5hZGRUZXN0UmVzdWx0KCd1cGRhdGVDYXJkJywgZHVyYXRpb25zLCBzdWNjZXNzQ291bnQsIDUwKVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBhc3luYyB0ZXN0RGVsZXRlQ2FyZCgpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgIGNvbnNvbGUubG9nKCdcXG7wn5eR77iPIOa1i+ivleWIoOmZpOWNoeeJh+aAp+iDvS4uLicpXHJcbiAgICBcclxuICAgIC8vIOWFiOWIm+W7uua1i+ivleWNoeeJh1xyXG4gICAgY29uc3QgdGVzdENhcmRzOiBhbnlbXSA9IFtdXHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IDUwOyBpKyspIHtcclxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgbG9jYWxPcGVyYXRpb25TZXJ2aWNlT3B0aW1pemVkLmNyZWF0ZUNhcmQoXHJcbiAgICAgICAgVGVzdERhdGFHZW5lcmF0b3IuZ2VuZXJhdGVDYXJkRGF0YSgxKVswXVxyXG4gICAgICApXHJcbiAgICAgIGlmIChyZXN1bHQuc3VjY2VzcyAmJiByZXN1bHQuaWQpIHtcclxuICAgICAgICB0ZXN0Q2FyZHMucHVzaChyZXN1bHQpXHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIFxyXG4gICAgY29uc3QgZHVyYXRpb25zOiBudW1iZXJbXSA9IFtdXHJcbiAgICBsZXQgc3VjY2Vzc0NvdW50ID0gMFxyXG4gICAgXHJcbiAgICBmb3IgKGNvbnN0IGNhcmQgb2YgdGVzdENhcmRzKSB7XHJcbiAgICAgIGNvbnN0IHN0YXJ0VGltZSA9IHBlcmZvcm1hbmNlLm5vdygpXHJcbiAgICAgIFxyXG4gICAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGxvY2FsT3BlcmF0aW9uU2VydmljZU9wdGltaXplZC5kZWxldGVDYXJkKGNhcmQuaWQpXHJcbiAgICAgICAgY29uc3QgZHVyYXRpb24gPSBwZXJmb3JtYW5jZS5ub3coKSAtIHN0YXJ0VGltZVxyXG4gICAgICAgIFxyXG4gICAgICAgIGR1cmF0aW9ucy5wdXNoKGR1cmF0aW9uKVxyXG4gICAgICAgIGlmIChyZXN1bHQuc3VjY2Vzcykgc3VjY2Vzc0NvdW50KytcclxuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICBjb25zdCBkdXJhdGlvbiA9IHBlcmZvcm1hbmNlLm5vdygpIC0gc3RhcnRUaW1lXHJcbiAgICAgICAgZHVyYXRpb25zLnB1c2goZHVyYXRpb24pXHJcbiAgICAgICAgY29uc29sZS5lcnJvcihgRGVsZXRlIGNhcmQgZmFpbGVkOmAsIGVycm9yKVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBcclxuICAgIHRoaXMuYWRkVGVzdFJlc3VsdCgnZGVsZXRlQ2FyZCcsIGR1cmF0aW9ucywgc3VjY2Vzc0NvdW50LCB0ZXN0Q2FyZHMubGVuZ3RoKVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBhc3luYyB0ZXN0QnVsa0NyZWF0ZSgpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgIGNvbnNvbGUubG9nKCdcXG7wn5OmIOa1i+ivleaJuemHj+WIm+W7uuWNoeeJh+aAp+iDvS4uLicpXHJcbiAgICBcclxuICAgIGNvbnN0IGJhdGNoU2l6ZXMgPSBbMTAsIDI1LCA1MF1cclxuICAgIFxyXG4gICAgZm9yIChjb25zdCBiYXRjaFNpemUgb2YgYmF0Y2hTaXplcykge1xyXG4gICAgICBjb25zdCB0ZXN0RGF0YSA9IFRlc3REYXRhR2VuZXJhdG9yLmdlbmVyYXRlQ2FyZERhdGEoYmF0Y2hTaXplKVxyXG4gICAgICBjb25zdCBkdXJhdGlvbnM6IG51bWJlcltdID0gW11cclxuICAgICAgXHJcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMTA7IGkrKykgeyAvLyDmr4/kuKrmibnmrKHlpKflsI/mtYvor5UxMOasoVxyXG4gICAgICAgIGNvbnN0IHN0YXJ0VGltZSA9IHBlcmZvcm1hbmNlLm5vdygpXHJcbiAgICAgICAgXHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgIGNvbnN0IHJlc3VsdHMgPSBhd2FpdCBsb2NhbE9wZXJhdGlvblNlcnZpY2VPcHRpbWl6ZWQuYnVsa0NyZWF0ZUNhcmRzKHRlc3REYXRhKVxyXG4gICAgICAgICAgY29uc3QgZHVyYXRpb24gPSBwZXJmb3JtYW5jZS5ub3coKSAtIHN0YXJ0VGltZVxyXG4gICAgICAgICAgXHJcbiAgICAgICAgICBkdXJhdGlvbnMucHVzaChkdXJhdGlvbilcclxuICAgICAgICAgIFxyXG4gICAgICAgICAgLy8g5riF55CG5rWL6K+V5pWw5o2uXHJcbiAgICAgICAgICBmb3IgKGNvbnN0IHJlc3VsdCBvZiByZXN1bHRzKSB7XHJcbiAgICAgICAgICAgIGlmIChyZXN1bHQuc3VjY2VzcyAmJiByZXN1bHQuaWQpIHtcclxuICAgICAgICAgICAgICBhd2FpdCBkYi5jYXJkcy5kZWxldGUocmVzdWx0LmlkKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgIGNvbnN0IGR1cmF0aW9uID0gcGVyZm9ybWFuY2Uubm93KCkgLSBzdGFydFRpbWVcclxuICAgICAgICAgIGR1cmF0aW9ucy5wdXNoKGR1cmF0aW9uKVxyXG4gICAgICAgICAgY29uc29sZS5lcnJvcihgQnVsayBjcmVhdGUgZmFpbGVkOmAsIGVycm9yKVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICBcclxuICAgICAgdGhpcy5hZGRUZXN0UmVzdWx0KGBidWxrQ3JlYXRlXyR7YmF0Y2hTaXplfWAsIGR1cmF0aW9ucywgZHVyYXRpb25zLmxlbmd0aCwgZHVyYXRpb25zLmxlbmd0aClcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHByaXZhdGUgYXN5bmMgdGVzdEdldENhcmRzKCk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgY29uc29sZS5sb2coJ1xcbvCfk4sg5rWL6K+V6I635Y+W5Y2h54mH5YiX6KGo5oCn6IO9Li4uJylcclxuICAgIFxyXG4gICAgLy8g5Yib5bu65LiA5Lqb5rWL6K+V5pWw5o2uXHJcbiAgICBjb25zdCB0ZXN0RGF0YSA9IFRlc3REYXRhR2VuZXJhdG9yLmdlbmVyYXRlQ2FyZERhdGEoMTAwKVxyXG4gICAgY29uc3QgY3JlYXRlZENhcmRzOiBhbnlbXSA9IFtdXHJcbiAgICBcclxuICAgIGZvciAoY29uc3QgY2FyZERhdGEgb2YgdGVzdERhdGEpIHtcclxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgbG9jYWxPcGVyYXRpb25TZXJ2aWNlT3B0aW1pemVkLmNyZWF0ZUNhcmQoY2FyZERhdGEpXHJcbiAgICAgIGlmIChyZXN1bHQuc3VjY2VzcyAmJiByZXN1bHQuaWQpIHtcclxuICAgICAgICBjcmVhdGVkQ2FyZHMucHVzaChyZXN1bHQpXHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIFxyXG4gICAgY29uc3QgZHVyYXRpb25zOiBudW1iZXJbXSA9IFtdXHJcbiAgICBjb25zdCB0ZXN0T3B0aW9ucyA9IFtcclxuICAgICAgeyBsaW1pdDogMTAgfSxcclxuICAgICAgeyBsaW1pdDogNTAgfSxcclxuICAgICAgeyBsaW1pdDogMTAwIH0sXHJcbiAgICAgIHsgZm9sZGVySWQ6IGNyZWF0ZWRDYXJkc1swXT8uaWQgPyAndGVzdF9mb2xkZXInIDogdW5kZWZpbmVkLCBsaW1pdDogMjUgfVxyXG4gICAgXVxyXG4gICAgXHJcbiAgICBmb3IgKGNvbnN0IG9wdGlvbnMgb2YgdGVzdE9wdGlvbnMpIHtcclxuICAgICAgY29uc3Qgc3RhcnRUaW1lID0gcGVyZm9ybWFuY2Uubm93KClcclxuICAgICAgXHJcbiAgICAgIHRyeSB7XHJcbiAgICAgICAgYXdhaXQgbG9jYWxPcGVyYXRpb25TZXJ2aWNlT3B0aW1pemVkLmdldENhcmRzKG9wdGlvbnMpXHJcbiAgICAgICAgY29uc3QgZHVyYXRpb24gPSBwZXJmb3JtYW5jZS5ub3coKSAtIHN0YXJ0VGltZVxyXG4gICAgICAgIGR1cmF0aW9ucy5wdXNoKGR1cmF0aW9uKVxyXG4gICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgIGNvbnN0IGR1cmF0aW9uID0gcGVyZm9ybWFuY2Uubm93KCkgLSBzdGFydFRpbWVcclxuICAgICAgICBkdXJhdGlvbnMucHVzaChkdXJhdGlvbilcclxuICAgICAgICBjb25zb2xlLmVycm9yKGBHZXQgY2FyZHMgZmFpbGVkOmAsIGVycm9yKVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBcclxuICAgIC8vIOa4heeQhua1i+ivleaVsOaNrlxyXG4gICAgZm9yIChjb25zdCBjYXJkIG9mIGNyZWF0ZWRDYXJkcykge1xyXG4gICAgICBhd2FpdCBkYi5jYXJkcy5kZWxldGUoY2FyZC5pZClcclxuICAgIH1cclxuICAgIFxyXG4gICAgdGhpcy5hZGRUZXN0UmVzdWx0KCdnZXRDYXJkcycsIGR1cmF0aW9ucywgZHVyYXRpb25zLmxlbmd0aCwgZHVyYXRpb25zLmxlbmd0aClcclxuICB9XHJcblxyXG4gIHByaXZhdGUgYXN5bmMgdGVzdFNlYXJjaENhcmRzKCk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgY29uc29sZS5sb2coJ1xcbvCflI0g5rWL6K+V5pCc57Si5Y2h54mH5oCn6IO9Li4uJylcclxuICAgIFxyXG4gICAgLy8g5Yib5bu65rWL6K+V5pWw5o2uXHJcbiAgICBjb25zdCB0ZXN0RGF0YSA9IFRlc3REYXRhR2VuZXJhdG9yLmdlbmVyYXRlQ2FyZERhdGEoNTApXHJcbiAgICBjb25zdCBjcmVhdGVkQ2FyZHM6IGFueVtdID0gW11cclxuICAgIFxyXG4gICAgZm9yIChjb25zdCBjYXJkRGF0YSBvZiB0ZXN0RGF0YSkge1xyXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBsb2NhbE9wZXJhdGlvblNlcnZpY2VPcHRpbWl6ZWQuY3JlYXRlQ2FyZChjYXJkRGF0YSlcclxuICAgICAgaWYgKHJlc3VsdC5zdWNjZXNzICYmIHJlc3VsdC5pZCkge1xyXG4gICAgICAgIGNyZWF0ZWRDYXJkcy5wdXNoKHJlc3VsdClcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgXHJcbiAgICBjb25zdCBzZWFyY2hUZXJtcyA9IFRlc3REYXRhR2VuZXJhdG9yLmdlbmVyYXRlU2VhcmNoVGVybXMoMjApXHJcbiAgICBjb25zdCBkdXJhdGlvbnM6IG51bWJlcltdID0gW11cclxuICAgIFxyXG4gICAgZm9yIChjb25zdCBzZWFyY2hUZXJtIG9mIHNlYXJjaFRlcm1zKSB7XHJcbiAgICAgIGNvbnN0IHN0YXJ0VGltZSA9IHBlcmZvcm1hbmNlLm5vdygpXHJcbiAgICAgIFxyXG4gICAgICB0cnkge1xyXG4gICAgICAgIGF3YWl0IGxvY2FsT3BlcmF0aW9uU2VydmljZU9wdGltaXplZC5zZWFyY2hDYXJkcyh7XHJcbiAgICAgICAgICB0ZXJtOiBzZWFyY2hUZXJtLFxyXG4gICAgICAgICAgbGltaXQ6IDI1XHJcbiAgICAgICAgfSlcclxuICAgICAgICBjb25zdCBkdXJhdGlvbiA9IHBlcmZvcm1hbmNlLm5vdygpIC0gc3RhcnRUaW1lXHJcbiAgICAgICAgZHVyYXRpb25zLnB1c2goZHVyYXRpb24pXHJcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgY29uc3QgZHVyYXRpb24gPSBwZXJmb3JtYW5jZS5ub3coKSAtIHN0YXJ0VGltZVxyXG4gICAgICAgIGR1cmF0aW9ucy5wdXNoKGR1cmF0aW9uKVxyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoYFNlYXJjaCBjYXJkcyBmYWlsZWQ6YCwgZXJyb3IpXHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIFxyXG4gICAgLy8g5riF55CG5rWL6K+V5pWw5o2uXHJcbiAgICBmb3IgKGNvbnN0IGNhcmQgb2YgY3JlYXRlZENhcmRzKSB7XHJcbiAgICAgIGF3YWl0IGRiLmNhcmRzLmRlbGV0ZShjYXJkLmlkKVxyXG4gICAgfVxyXG4gICAgXHJcbiAgICB0aGlzLmFkZFRlc3RSZXN1bHQoJ3NlYXJjaENhcmRzJywgZHVyYXRpb25zLCBkdXJhdGlvbnMubGVuZ3RoLCBkdXJhdGlvbnMubGVuZ3RoKVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBhZGRUZXN0UmVzdWx0KG9wZXJhdGlvbjogc3RyaW5nLCBkdXJhdGlvbnM6IG51bWJlcltdLCBzdWNjZXNzQ291bnQ6IG51bWJlciwgdG90YWxDb3VudDogbnVtYmVyKTogdm9pZCB7XHJcbiAgICBjb25zdCB0b3RhbER1cmF0aW9uID0gZHVyYXRpb25zLnJlZHVjZSgoc3VtLCBkKSA9PiBzdW0gKyBkLCAwKVxyXG4gICAgY29uc3QgYXZlcmFnZUR1cmF0aW9uID0gdG90YWxEdXJhdGlvbiAvIGR1cmF0aW9ucy5sZW5ndGhcclxuICAgIGNvbnN0IG1pbkR1cmF0aW9uID0gTWF0aC5taW4oLi4uZHVyYXRpb25zKVxyXG4gICAgY29uc3QgbWF4RHVyYXRpb24gPSBNYXRoLm1heCguLi5kdXJhdGlvbnMpXHJcbiAgICBjb25zdCBzdWNjZXNzUmF0ZSA9IHN1Y2Nlc3NDb3VudCAvIHRvdGFsQ291bnRcclxuICAgIFxyXG4gICAgY29uc3QgcmVzdWx0OiBUZXN0UmVzdWx0ID0ge1xyXG4gICAgICBvcGVyYXRpb24sXHJcbiAgICAgIHRvdGFsRHVyYXRpb24sXHJcbiAgICAgIGF2ZXJhZ2VEdXJhdGlvbixcclxuICAgICAgbWluRHVyYXRpb24sXHJcbiAgICAgIG1heER1cmF0aW9uLFxyXG4gICAgICBzdWNjZXNzUmF0ZSxcclxuICAgICAgd2l0aGluVGhyZXNob2xkOiBhdmVyYWdlRHVyYXRpb24gPD0gdGhpcy50aHJlc2hvbGRNc1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICB0aGlzLnJlc3VsdHMucHVzaChyZXN1bHQpXHJcbiAgfVxyXG5cclxuICBwcml2YXRlIHByaW50UmVzdWx0cygpOiB2b2lkIHtcclxuICAgIGNvbnNvbGUubG9nKCdcXG7wn5OKIOaAp+iDvea1i+ivlee7k+aenDonKVxyXG4gICAgY29uc29sZS5sb2coJz0nLnJlcGVhdCg4MCkpXHJcbiAgICBcclxuICAgIGNvbnN0IGhlYWRlciA9ICd8IOaTjeS9nOexu+WeiyAgICAgICAgICAgICAgIHwg5bmz5Z2H5pe26Ze0IHwg5pyA5bCP5pe26Ze0IHwg5pyA5aSn5pe26Ze0IHwg5oiQ5Yqf546HIHwg6L6+5qCHIHwnXHJcbiAgICBjb25zb2xlLmxvZyhoZWFkZXIpXHJcbiAgICBjb25zb2xlLmxvZygnfCcgKyAnLScucmVwZWF0KDc4KSArICd8JylcclxuICAgIFxyXG4gICAgZm9yIChjb25zdCByZXN1bHQgb2YgdGhpcy5yZXN1bHRzKSB7XHJcbiAgICAgIGNvbnN0IHN0YXR1cyA9IHJlc3VsdC53aXRoaW5UaHJlc2hvbGQgPyAn4pyFJyA6ICfinYwnXHJcbiAgICAgIGNvbnN0IHJvdyA9IGB8ICR7cmVzdWx0Lm9wZXJhdGlvbi5wYWRFbmQoMjIpfSB8ICR7cmVzdWx0LmF2ZXJhZ2VEdXJhdGlvbi50b0ZpeGVkKDIpLnBhZFN0YXJ0KDgpfW1zIHwgJHtyZXN1bHQubWluRHVyYXRpb24udG9GaXhlZCgyKS5wYWRTdGFydCg4KX1tcyB8ICR7cmVzdWx0Lm1heER1cmF0aW9uLnRvRml4ZWQoMikucGFkU3RhcnQoOCl9bXMgfCAkeyhyZXN1bHQuc3VjY2Vzc1JhdGUgKiAxMDApLnRvRml4ZWQoMSkucGFkU3RhcnQoNSl9JSB8ICR7c3RhdHVzLnBhZEVuZCg0KX0gfGBcclxuICAgICAgY29uc29sZS5sb2cocm93KVxyXG4gICAgfVxyXG4gICAgXHJcbiAgICBjb25zb2xlLmxvZygnXFxu8J+TiCDmgLvkvZPnu5/orqE6JylcclxuICAgIGNvbnN0IGF2Z1RpbWUgPSB0aGlzLnJlc3VsdHMucmVkdWNlKChzdW0sIHIpID0+IHN1bSArIHIuYXZlcmFnZUR1cmF0aW9uLCAwKSAvIHRoaXMucmVzdWx0cy5sZW5ndGhcclxuICAgIGNvbnN0IG92ZXJhbGxTdWNjZXNzUmF0ZSA9IHRoaXMucmVzdWx0cy5yZWR1Y2UoKHN1bSwgcikgPT4gc3VtICsgci5zdWNjZXNzUmF0ZSwgMCkgLyB0aGlzLnJlc3VsdHMubGVuZ3RoXHJcbiAgICBjb25zdCBwYXNzQ291bnQgPSB0aGlzLnJlc3VsdHMuZmlsdGVyKHIgPT4gci53aXRoaW5UaHJlc2hvbGQpLmxlbmd0aFxyXG4gICAgXHJcbiAgICBjb25zb2xlLmxvZyhg5bmz5Z2H5ZON5bqU5pe26Ze0OiAke2F2Z1RpbWUudG9GaXhlZCgyKX1tc2ApXHJcbiAgICBjb25zb2xlLmxvZyhg5oC75L2T5oiQ5Yqf546HOiAkeyhvdmVyYWxsU3VjY2Vzc1JhdGUgKiAxMDApLnRvRml4ZWQoMSl9JWApXHJcbiAgICBjb25zb2xlLmxvZyhg6L6+5qCH5pON5L2c5pWwOiAke3Bhc3NDb3VudH0vJHt0aGlzLnJlc3VsdHMubGVuZ3RofWApXHJcbiAgICBjb25zb2xlLmxvZyhg6L6+5qCH546HOiAkeyhwYXNzQ291bnQgLyB0aGlzLnJlc3VsdHMubGVuZ3RoICogMTAwKS50b0ZpeGVkKDEpfSVgKVxyXG4gICAgXHJcbiAgICBjb25zb2xlLmxvZygnXFxu8J+OryDmgKfog73nm67moIfpqozor4E6JylcclxuICAgIGlmIChhdmdUaW1lIDw9IDUwKSB7XHJcbiAgICAgIGNvbnNvbGUubG9nKCfinIUg5bmz5Z2H5ZON5bqU5pe26Ze0IDwgNTBtczog6L6+5qCHJylcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGNvbnNvbGUubG9nKGDinYwg5bmz5Z2H5ZON5bqU5pe26Ze0IDwgNTBtczog5pyq6L6+5qCHICjlrp7pmYU6ICR7YXZnVGltZS50b0ZpeGVkKDIpfW1zKWApXHJcbiAgICB9XHJcbiAgICBcclxuICAgIGlmIChvdmVyYWxsU3VjY2Vzc1JhdGUgPj0gMC45OSkge1xyXG4gICAgICBjb25zb2xlLmxvZygn4pyFIOaIkOWKn+eOhyA+PSA5OSU6IOi+vuaghycpXHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBjb25zb2xlLmxvZyhg4p2MIOaIkOWKn+eOhyA+PSA5OSU6IOacqui+vuaghyAo5a6e6ZmFOiAkeyhvdmVyYWxsU3VjY2Vzc1JhdGUgKiAxMDApLnRvRml4ZWQoMSl9JSlgKVxyXG4gICAgfVxyXG4gICAgXHJcbiAgICBpZiAocGFzc0NvdW50ID09PSB0aGlzLnJlc3VsdHMubGVuZ3RoKSB7XHJcbiAgICAgIGNvbnNvbGUubG9nKCfinIUg5omA5pyJ5pON5L2c5ZON5bqU5pe26Ze0IDwgMTAwbXM6IOi+vuaghycpXHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBjb25zb2xlLmxvZyhg4p2MIOaJgOacieaTjeS9nOWTjeW6lOaXtumXtCA8IDEwMG1zOiDmnKrovr7moIcgKOi+vuaghzogJHtwYXNzQ291bnR9LyR7dGhpcy5yZXN1bHRzLmxlbmd0aH0pYClcclxuICAgIH1cclxuICB9XHJcbn1cclxuXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuLy8g5YaF5a2Y5L2/55So5rWL6K+VXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuXHJcbmNsYXNzIE1lbW9yeVVzYWdlVGVzdCB7XHJcbiAgYXN5bmMgcnVuTWVtb3J5VGVzdCgpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgIGNvbnNvbGUubG9nKCdcXG7wn5K+IOWGheWtmOS9v+eUqOa1i+ivlS4uLicpXHJcbiAgICBcclxuICAgIC8vIOiOt+WPluWIneWni+WGheWtmOS9v+eUqFxyXG4gICAgY29uc3QgaW5pdGlhbE1lbW9yeSA9IHRoaXMuZ2V0TWVtb3J5VXNhZ2UoKVxyXG4gICAgY29uc29sZS5sb2coYOWIneWni+WGheWtmOS9v+eUqDogJHsoaW5pdGlhbE1lbW9yeS51c2VkSlNIZWFwU2l6ZSAvIDEwMjQgLyAxMDI0KS50b0ZpeGVkKDIpfSBNQmApXHJcbiAgICBcclxuICAgIC8vIOaJp+ihjOWkp+mHj+aTjeS9nFxyXG4gICAgY29uc3QgdGVzdERhdGEgPSBUZXN0RGF0YUdlbmVyYXRvci5nZW5lcmF0ZUNhcmREYXRhKDEwMDApXHJcbiAgICBjb25zdCBzdGFydFRpbWUgPSBwZXJmb3JtYW5jZS5ub3coKVxyXG4gICAgXHJcbiAgICBjb25zdCBjcmVhdGVkQ2FyZHM6IGFueVtdID0gW11cclxuICAgIGZvciAoY29uc3QgY2FyZERhdGEgb2YgdGVzdERhdGEpIHtcclxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgbG9jYWxPcGVyYXRpb25TZXJ2aWNlT3B0aW1pemVkLmNyZWF0ZUNhcmQoY2FyZERhdGEpXHJcbiAgICAgIGlmIChyZXN1bHQuc3VjY2VzcyAmJiByZXN1bHQuaWQpIHtcclxuICAgICAgICBjcmVhdGVkQ2FyZHMucHVzaChyZXN1bHQpXHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIFxyXG4gICAgLy8g6I635Y+W5bOw5YC85YaF5a2Y5L2/55SoXHJcbiAgICBjb25zdCBwZWFrTWVtb3J5ID0gdGhpcy5nZXRNZW1vcnlVc2FnZSgpXHJcbiAgICBjb25zb2xlLmxvZyhg5bOw5YC85YaF5a2Y5L2/55SoOiAkeyhwZWFrTWVtb3J5LnVzZWRKU0hlYXBTaXplIC8gMTAyNCAvIDEwMjQpLnRvRml4ZWQoMil9IE1CYClcclxuICAgIFxyXG4gICAgLy8g5riF55CG5pWw5o2uXHJcbiAgICBmb3IgKGNvbnN0IGNhcmQgb2YgY3JlYXRlZENhcmRzKSB7XHJcbiAgICAgIGF3YWl0IGRiLmNhcmRzLmRlbGV0ZShjYXJkLmlkKVxyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvLyDojrflj5bmuIXnkIblkI7lhoXlrZjkvb/nlKhcclxuICAgIGNvbnN0IGZpbmFsTWVtb3J5ID0gdGhpcy5nZXRNZW1vcnlVc2FnZSgpXHJcbiAgICBjb25zb2xlLmxvZyhg5riF55CG5ZCO5YaF5a2Y5L2/55SoOiAkeyhmaW5hbE1lbW9yeS51c2VkSlNIZWFwU2l6ZSAvIDEwMjQgLyAxMDI0KS50b0ZpeGVkKDIpfSBNQmApXHJcbiAgICBcclxuICAgIGNvbnN0IG1lbW9yeUluY3JlYXNlID0gcGVha01lbW9yeS51c2VkSlNIZWFwU2l6ZSAtIGluaXRpYWxNZW1vcnkudXNlZEpTSGVhcFNpemVcclxuICAgIGNvbnNvbGUubG9nKGDlhoXlrZjlop7plb86ICR7KG1lbW9yeUluY3JlYXNlIC8gMTAyNCAvIDEwMjQpLnRvRml4ZWQoMil9IE1CYClcclxuICAgIFxyXG4gICAgY29uc3QgZHVyYXRpb24gPSBwZXJmb3JtYW5jZS5ub3coKSAtIHN0YXJ0VGltZVxyXG4gICAgY29uc29sZS5sb2coYOWIm+W7ujEwMDDlvKDljaHniYfogJfml7Y6ICR7ZHVyYXRpb24udG9GaXhlZCgyKX1tc2ApXHJcbiAgICBjb25zb2xlLmxvZyhg5bmz5Z2H5q+P5byg5Y2h54mH6ICX5pe2OiAkeyhkdXJhdGlvbiAvIDEwMDApLnRvRml4ZWQoMil9bXNgKVxyXG4gICAgXHJcbiAgICAvLyDpqozor4HlhoXlrZjkvb/nlKjnm67moIdcclxuICAgIGlmIChtZW1vcnlJbmNyZWFzZSA8IDUwICogMTAyNCAqIDEwMjQpIHsgLy8gNTBNQlxyXG4gICAgICBjb25zb2xlLmxvZygn4pyFIOWGheWtmOS9v+eUqOWinumVvyA8IDUwTUI6IOi+vuaghycpXHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBjb25zb2xlLmxvZyhg4p2MIOWGheWtmOS9v+eUqOWinumVvyA8IDUwTUI6IOacqui+vuaghyAo5a6e6ZmFOiAkeyhtZW1vcnlJbmNyZWFzZSAvIDEwMjQgLyAxMDI0KS50b0ZpeGVkKDIpfU1CKWApXHJcbiAgICB9XHJcbiAgfVxyXG4gIFxyXG4gIHByaXZhdGUgZ2V0TWVtb3J5VXNhZ2UoKSB7XHJcbiAgICBpZiAoJ21lbW9yeScgaW4gcGVyZm9ybWFuY2UpIHtcclxuICAgICAgcmV0dXJuIChwZXJmb3JtYW5jZSBhcyBhbnkpLm1lbW9yeVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgdXNlZEpTSGVhcFNpemU6IDAsXHJcbiAgICAgIHRvdGFsSlNIZWFwU2l6ZTogMCxcclxuICAgICAganNIZWFwU2l6ZUxpbWl0OiAwXHJcbiAgICB9XHJcbiAgfVxyXG59XHJcblxyXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbi8vIOW5tuWPkeaAp+iDvea1i+ivlVxyXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcblxyXG5jbGFzcyBDb25jdXJyZW5jeVRlc3Qge1xyXG4gIGFzeW5jIHJ1bkNvbmN1cnJlbmN5VGVzdCgpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgIGNvbnNvbGUubG9nKCdcXG7imqEg5bm25Y+R5oCn6IO95rWL6K+VLi4uJylcclxuICAgIFxyXG4gICAgY29uc3QgY29uY3VycmVudE9wZXJhdGlvbnMgPSA1MFxyXG4gICAgY29uc3QgdGVzdERhdGEgPSBUZXN0RGF0YUdlbmVyYXRvci5nZW5lcmF0ZUNhcmREYXRhKGNvbmN1cnJlbnRPcGVyYXRpb25zKVxyXG4gICAgXHJcbiAgICBjb25zdCBzdGFydFRpbWUgPSBwZXJmb3JtYW5jZS5ub3coKVxyXG4gICAgXHJcbiAgICAvLyDlubblj5HmiafooYzliJvlu7rmk43kvZxcclxuICAgIGNvbnN0IHByb21pc2VzID0gdGVzdERhdGEubWFwKGNhcmREYXRhID0+IFxyXG4gICAgICBsb2NhbE9wZXJhdGlvblNlcnZpY2VPcHRpbWl6ZWQuY3JlYXRlQ2FyZChjYXJkRGF0YSlcclxuICAgIClcclxuICAgIFxyXG4gICAgY29uc3QgcmVzdWx0cyA9IGF3YWl0IFByb21pc2UuYWxsKHByb21pc2VzKVxyXG4gICAgY29uc3QgZHVyYXRpb24gPSBwZXJmb3JtYW5jZS5ub3coKSAtIHN0YXJ0VGltZVxyXG4gICAgXHJcbiAgICBjb25zdCBzdWNjZXNzQ291bnQgPSByZXN1bHRzLmZpbHRlcihyID0+IHIuc3VjY2VzcykubGVuZ3RoXHJcbiAgICBjb25zdCBhdmVyYWdlVGltZSA9IGR1cmF0aW9uIC8gY29uY3VycmVudE9wZXJhdGlvbnNcclxuICAgIFxyXG4gICAgY29uc29sZS5sb2coYOW5tuWPkeWIm+W7uiR7Y29uY3VycmVudE9wZXJhdGlvbnN95byg5Y2h54mH6ICX5pe2OiAke2R1cmF0aW9uLnRvRml4ZWQoMil9bXNgKVxyXG4gICAgY29uc29sZS5sb2coYOW5s+Wdh+avj+W8oOWNoeeJh+iAl+aXtjogJHthdmVyYWdlVGltZS50b0ZpeGVkKDIpfW1zYClcclxuICAgIGNvbnNvbGUubG9nKGDmiJDlip/njoc6ICR7KHN1Y2Nlc3NDb3VudCAvIGNvbmN1cnJlbnRPcGVyYXRpb25zICogMTAwKS50b0ZpeGVkKDEpfSVgKVxyXG4gICAgXHJcbiAgICAvLyDmuIXnkIbmtYvor5XmlbDmja5cclxuICAgIGZvciAoY29uc3QgcmVzdWx0IG9mIHJlc3VsdHMpIHtcclxuICAgICAgaWYgKHJlc3VsdC5zdWNjZXNzICYmIHJlc3VsdC5pZCkge1xyXG4gICAgICAgIGF3YWl0IGRiLmNhcmRzLmRlbGV0ZShyZXN1bHQuaWQpXHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIFxyXG4gICAgLy8g6aqM6K+B5bm25Y+R5oCn6IO955uu5qCHXHJcbiAgICBpZiAoYXZlcmFnZVRpbWUgPD0gMTAwKSB7XHJcbiAgICAgIGNvbnNvbGUubG9nKCfinIUg5bm25Y+R5pON5L2c5bmz5Z2H5pe26Ze0IDwgMTAwbXM6IOi+vuaghycpXHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBjb25zb2xlLmxvZyhg4p2MIOW5tuWPkeaTjeS9nOW5s+Wdh+aXtumXtCA8IDEwMG1zOiDmnKrovr7moIcgKOWunumZhTogJHthdmVyYWdlVGltZS50b0ZpeGVkKDIpfW1zKWApXHJcbiAgICB9XHJcbiAgfVxyXG59XHJcblxyXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbi8vIOWwj+aVsOaNrumbhuS8mOWMlua1i+ivlVxyXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcblxyXG5jbGFzcyBTbWFsbERhdGFzZXRPcHRpbWl6YXRpb25UZXN0IHtcclxuICBhc3luYyBydW5TbWFsbERhdGFzZXRUZXN0KCk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgY29uc29sZS5sb2coJ1xcbvCfk4og5bCP5pWw5o2u6ZuG5LyY5YyW5rWL6K+VLi4uJylcclxuICAgIFxyXG4gICAgLy8g5Yib5bu65bCP5pWw5o2u6ZuG5rWL6K+V5pWw5o2uICg5IGNhcmRzLCA4IGZvbGRlcnMsIDEzIHRhZ3MpXHJcbiAgICBjb25zdCBzbWFsbENhcmRzID0gVGVzdERhdGFHZW5lcmF0b3IuZ2VuZXJhdGVDYXJkRGF0YSg5KVxyXG4gICAgY29uc3QgY3JlYXRlZENhcmRzOiBhbnlbXSA9IFtdXHJcbiAgICBcclxuICAgIGNvbnNvbGUubG9nKCfliJvlu7rlsI/mlbDmja7pm4bmtYvor5XmlbDmja4uLi4nKVxyXG4gICAgZm9yIChjb25zdCBjYXJkRGF0YSBvZiBzbWFsbENhcmRzKSB7XHJcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGxvY2FsT3BlcmF0aW9uU2VydmljZU9wdGltaXplZC5jcmVhdGVDYXJkKGNhcmREYXRhKVxyXG4gICAgICBpZiAocmVzdWx0LnN1Y2Nlc3MgJiYgcmVzdWx0LmlkKSB7XHJcbiAgICAgICAgY3JlYXRlZENhcmRzLnB1c2gocmVzdWx0KVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBcclxuICAgIGNvbnNvbGUubG9nKGDinIUg5Yib5bu65LqGICR7Y3JlYXRlZENhcmRzLmxlbmd0aH0g5byg5rWL6K+V5Y2h54mHYClcclxuICAgIFxyXG4gICAgLy8g5rWL6K+V5bCP5pWw5o2u6ZuG5p+l6K+i5oCn6IO9XHJcbiAgICBjb25zdCBxdWVyeVRlc3RSZXN1bHRzID0gYXdhaXQgdGhpcy50ZXN0UXVlcnlQZXJmb3JtYW5jZShjcmVhdGVkQ2FyZHMpXHJcbiAgICBcclxuICAgIC8vIOa1i+ivleWGheWtmOe8k+WtmOaViOaenFxyXG4gICAgY29uc3QgY2FjaGVUZXN0UmVzdWx0cyA9IGF3YWl0IHRoaXMudGVzdENhY2hlRWZmZWN0aXZlbmVzcyhjcmVhdGVkQ2FyZHMpXHJcbiAgICBcclxuICAgIC8vIOa1i+ivleaQnOe0ouaAp+iDvVxyXG4gICAgY29uc3Qgc2VhcmNoVGVzdFJlc3VsdHMgPSBhd2FpdCB0aGlzLnRlc3RTZWFyY2hQZXJmb3JtYW5jZShjcmVhdGVkQ2FyZHMpXHJcbiAgICBcclxuICAgIC8vIOa4heeQhua1i+ivleaVsOaNrlxyXG4gICAgY29uc29sZS5sb2coJ+a4heeQhuWwj+aVsOaNrumbhua1i+ivleaVsOaNri4uLicpXHJcbiAgICBmb3IgKGNvbnN0IGNhcmQgb2YgY3JlYXRlZENhcmRzKSB7XHJcbiAgICAgIGF3YWl0IGRiLmNhcmRzLmRlbGV0ZShjYXJkLmlkKVxyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvLyDovpPlh7rnu7zlkIjnu5PmnpxcclxuICAgIGNvbnNvbGUubG9nKCdcXG7wn5OIIOWwj+aVsOaNrumbhuS8mOWMlua1i+ivlee7k+aenDonKVxyXG4gICAgY29uc29sZS5sb2coYOafpeivouaAp+iDvTogJHtxdWVyeVRlc3RSZXN1bHRzLmF2ZXJhZ2VRdWVyeVRpbWUudG9GaXhlZCgyKX1tcyAo55uu5qCHOiA8IDEwbXMpICR7cXVlcnlUZXN0UmVzdWx0cy5wYXNzZWQgPyAn4pyFJyA6ICfinYwnfWApXHJcbiAgICBjb25zb2xlLmxvZyhg57yT5a2Y5ZG95Lit546HOiAkeyhjYWNoZVRlc3RSZXN1bHRzLmhpdFJhdGUgKiAxMDApLnRvRml4ZWQoMSl9JSAo55uu5qCHOiA+IDkwJSkgJHtjYWNoZVRlc3RSZXN1bHRzLnBhc3NlZCA/ICfinIUnIDogJ+KdjCd9YClcclxuICAgIGNvbnNvbGUubG9nKGDmkJzntKLmgKfog706ICR7c2VhcmNoVGVzdFJlc3VsdHMuYXZlcmFnZVNlYXJjaFRpbWUudG9GaXhlZCgyKX1tcyAo55uu5qCHOiA8IDE1bXMpICR7c2VhcmNoVGVzdFJlc3VsdHMucGFzc2VkID8gJ+KchScgOiAn4p2MJ31gKVxyXG4gICAgXHJcbiAgICBjb25zdCBhbGxQYXNzZWQgPSBxdWVyeVRlc3RSZXN1bHRzLnBhc3NlZCAmJiBjYWNoZVRlc3RSZXN1bHRzLnBhc3NlZCAmJiBzZWFyY2hUZXN0UmVzdWx0cy5wYXNzZWRcclxuICAgIGNvbnNvbGUubG9nKGBcXG7lsI/mlbDmja7pm4bkvJjljJbmgLvkvZM6ICR7YWxsUGFzc2VkID8gJ+KchSDpgJrov4cnIDogJ+KdjCDmnKrpgJrov4cnfWApXHJcbiAgICBcclxuICAgIHJldHVybiBhbGxQYXNzZWRcclxuICB9XHJcbiAgXHJcbiAgcHJpdmF0ZSBhc3luYyB0ZXN0UXVlcnlQZXJmb3JtYW5jZShjYXJkczogYW55W10pOiBQcm9taXNlPHtcclxuICAgIGF2ZXJhZ2VRdWVyeVRpbWU6IG51bWJlclxyXG4gICAgcGFzc2VkOiBib29sZWFuXHJcbiAgfT4ge1xyXG4gICAgY29uc29sZS5sb2coJ+a1i+ivleWwj+aVsOaNrumbhuafpeivouaAp+iDvS4uLicpXHJcbiAgICBcclxuICAgIGNvbnN0IHF1ZXJ5VGltZXM6IG51bWJlcltdID0gW11cclxuICAgIGNvbnN0IHRlc3RJdGVyYXRpb25zID0gMjBcclxuICAgIFxyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0ZXN0SXRlcmF0aW9uczsgaSsrKSB7XHJcbiAgICAgIGNvbnN0IHN0YXJ0VGltZSA9IHBlcmZvcm1hbmNlLm5vdygpXHJcbiAgICAgIFxyXG4gICAgICB0cnkge1xyXG4gICAgICAgIGF3YWl0IGxvY2FsT3BlcmF0aW9uU2VydmljZU9wdGltaXplZC5nZXRDYXJkcyh7IGxpbWl0OiA5IH0pXHJcbiAgICAgICAgY29uc3QgcXVlcnlUaW1lID0gcGVyZm9ybWFuY2Uubm93KCkgLSBzdGFydFRpbWVcclxuICAgICAgICBxdWVyeVRpbWVzLnB1c2gocXVlcnlUaW1lKVxyXG4gICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgIGNvbnNvbGUud2Fybihg5p+l6K+i5rWL6K+VICR7aSArIDF9IOWksei0pTpgLCBlcnJvcilcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgXHJcbiAgICBjb25zdCBhdmVyYWdlUXVlcnlUaW1lID0gcXVlcnlUaW1lcy5yZWR1Y2UoKHN1bSwgdGltZSkgPT4gc3VtICsgdGltZSwgMCkgLyBxdWVyeVRpbWVzLmxlbmd0aFxyXG4gICAgY29uc3QgcGFzc2VkID0gYXZlcmFnZVF1ZXJ5VGltZSA8IDEwIC8vIOebruaghzog5bCP5LqOMTBtc1xyXG4gICAgXHJcbiAgICBjb25zb2xlLmxvZyhg5bmz5Z2H5p+l6K+i5pe26Ze0OiAke2F2ZXJhZ2VRdWVyeVRpbWUudG9GaXhlZCgyKX1tc2ApXHJcbiAgICBcclxuICAgIHJldHVybiB7IGF2ZXJhZ2VRdWVyeVRpbWUsIHBhc3NlZCB9XHJcbiAgfVxyXG4gIFxyXG4gIHByaXZhdGUgYXN5bmMgdGVzdENhY2hlRWZmZWN0aXZlbmVzcyhjYXJkczogYW55W10pOiBQcm9taXNlPHtcclxuICAgIGhpdFJhdGU6IG51bWJlclxyXG4gICAgcGFzc2VkOiBib29sZWFuXHJcbiAgfT4ge1xyXG4gICAgY29uc29sZS5sb2coJ+a1i+ivleWwj+aVsOaNrumbhue8k+WtmOaViOaenC4uLicpXHJcbiAgICBcclxuICAgIGxldCBjYWNoZUhpdHMgPSAwXHJcbiAgICBjb25zdCB0b3RhbFF1ZXJpZXMgPSAxNVxyXG4gICAgXHJcbiAgICAvLyDpppbmrKHmn6Xor6IgKOe8k+WtmOacquWRveS4rSlcclxuICAgIGF3YWl0IGxvY2FsT3BlcmF0aW9uU2VydmljZU9wdGltaXplZC5nZXRDYXJkcyh7IGxpbWl0OiA5IH0pXHJcbiAgICBcclxuICAgIC8vIOmHjeWkjeafpeivoiAo5rWL6K+V57yT5a2Y5ZG95LitKVxyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0b3RhbFF1ZXJpZXM7IGkrKykge1xyXG4gICAgICBjb25zdCBzdGFydFRpbWUgPSBwZXJmb3JtYW5jZS5ub3coKVxyXG4gICAgICBcclxuICAgICAgdHJ5IHtcclxuICAgICAgICBhd2FpdCBsb2NhbE9wZXJhdGlvblNlcnZpY2VPcHRpbWl6ZWQuZ2V0Q2FyZHMoeyBsaW1pdDogOSB9KVxyXG4gICAgICAgIGNvbnN0IHF1ZXJ5VGltZSA9IHBlcmZvcm1hbmNlLm5vdygpIC0gc3RhcnRUaW1lXHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8g5aaC5p6c5p+l6K+i5pe26Ze05bCP5LqOMW1z77yM6K6k5Li65piv57yT5a2Y5ZG95LitXHJcbiAgICAgICAgaWYgKHF1ZXJ5VGltZSA8IDEpIHtcclxuICAgICAgICAgIGNhY2hlSGl0cysrXHJcbiAgICAgICAgfVxyXG4gICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgIGNvbnNvbGUud2Fybihg57yT5a2Y5rWL6K+VICR7aSArIDF9IOWksei0pTpgLCBlcnJvcilcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgXHJcbiAgICBjb25zdCBoaXRSYXRlID0gY2FjaGVIaXRzIC8gdG90YWxRdWVyaWVzXHJcbiAgICBjb25zdCBwYXNzZWQgPSBoaXRSYXRlID4gMC45IC8vIOebruaghzog5aSn5LqOOTAlXHJcbiAgICBcclxuICAgIGNvbnNvbGUubG9nKGDnvJPlrZjlkb3kuK3njoc6ICR7KGhpdFJhdGUgKiAxMDApLnRvRml4ZWQoMSl9JWApXHJcbiAgICBcclxuICAgIHJldHVybiB7IGhpdFJhdGUsIHBhc3NlZCB9XHJcbiAgfVxyXG4gIFxyXG4gIHByaXZhdGUgYXN5bmMgdGVzdFNlYXJjaFBlcmZvcm1hbmNlKGNhcmRzOiBhbnlbXSk6IFByb21pc2U8e1xyXG4gICAgYXZlcmFnZVNlYXJjaFRpbWU6IG51bWJlclxyXG4gICAgcGFzc2VkOiBib29sZWFuXHJcbiAgfT4ge1xyXG4gICAgY29uc29sZS5sb2coJ+a1i+ivleWwj+aVsOaNrumbhuaQnOe0ouaAp+iDvS4uLicpXHJcbiAgICBcclxuICAgIGNvbnN0IHNlYXJjaFRlcm1zID0gWyd0ZXN0JywgJ2NhcmQnLCAnY29udGVudCcsICd0aXRsZScsICdiYWNrJ11cclxuICAgIGNvbnN0IHNlYXJjaFRpbWVzOiBudW1iZXJbXSA9IFtdXHJcbiAgICBcclxuICAgIGZvciAoY29uc3QgdGVybSBvZiBzZWFyY2hUZXJtcykge1xyXG4gICAgICBjb25zdCBzdGFydFRpbWUgPSBwZXJmb3JtYW5jZS5ub3coKVxyXG4gICAgICBcclxuICAgICAgdHJ5IHtcclxuICAgICAgICBhd2FpdCBsb2NhbE9wZXJhdGlvblNlcnZpY2VPcHRpbWl6ZWQuc2VhcmNoQ2FyZHMoe1xyXG4gICAgICAgICAgdGVybSxcclxuICAgICAgICAgIGxpbWl0OiAxMFxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgY29uc3Qgc2VhcmNoVGltZSA9IHBlcmZvcm1hbmNlLm5vdygpIC0gc3RhcnRUaW1lXHJcbiAgICAgICAgc2VhcmNoVGltZXMucHVzaChzZWFyY2hUaW1lKVxyXG4gICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgIGNvbnNvbGUud2Fybihg5pCc57Si5rWL6K+V5aSx6LSlOmAsIGVycm9yKVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBcclxuICAgIGNvbnN0IGF2ZXJhZ2VTZWFyY2hUaW1lID0gc2VhcmNoVGltZXMucmVkdWNlKChzdW0sIHRpbWUpID0+IHN1bSArIHRpbWUsIDApIC8gc2VhcmNoVGltZXMubGVuZ3RoXHJcbiAgICBjb25zdCBwYXNzZWQgPSBhdmVyYWdlU2VhcmNoVGltZSA8IDE1IC8vIOebruaghzog5bCP5LqOMTVtc1xyXG4gICAgXHJcbiAgICBjb25zb2xlLmxvZyhg5bmz5Z2H5pCc57Si5pe26Ze0OiAke2F2ZXJhZ2VTZWFyY2hUaW1lLnRvRml4ZWQoMil9bXNgKVxyXG4gICAgXHJcbiAgICByZXR1cm4geyBhdmVyYWdlU2VhcmNoVGltZSwgcGFzc2VkIH1cclxuICB9XHJcbn1cclxuXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuLy8g5Li75rWL6K+V5YWl5Y+jXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBydW5Mb2NhbE9wZXJhdGlvblBlcmZvcm1hbmNlVGVzdHMoKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgY29uc29sZS5sb2coJ/Cfp6ogTG9jYWxPcGVyYXRpb25TZXJ2aWNlIOaAp+iDvea1i+ivleW8gOWniycpXHJcbiAgY29uc29sZS5sb2coJz0nLnJlcGVhdCg4MCkpXHJcbiAgXHJcbiAgdHJ5IHtcclxuICAgIC8vIOi/kOihjOWfuuehgOaAp+iDvea1i+ivlVxyXG4gICAgY29uc3QgdGVzdFJ1bm5lciA9IG5ldyBQZXJmb3JtYW5jZVRlc3RSdW5uZXIoKVxyXG4gICAgYXdhaXQgdGVzdFJ1bm5lci5ydW5BbGxUZXN0cygpXHJcbiAgICBcclxuICAgIC8vIOi/kOihjOWGheWtmOS9v+eUqOa1i+ivlVxyXG4gICAgY29uc3QgbWVtb3J5VGVzdCA9IG5ldyBNZW1vcnlVc2FnZVRlc3QoKVxyXG4gICAgYXdhaXQgbWVtb3J5VGVzdC5ydW5NZW1vcnlUZXN0KClcclxuICAgIFxyXG4gICAgLy8g6L+Q6KGM5bm25Y+R5oCn6IO95rWL6K+VXHJcbiAgICBjb25zdCBjb25jdXJyZW5jeVRlc3QgPSBuZXcgQ29uY3VycmVuY3lUZXN0KClcclxuICAgIGF3YWl0IGNvbmN1cnJlbmN5VGVzdC5ydW5Db25jdXJyZW5jeVRlc3QoKVxyXG4gICAgXHJcbiAgICAvLyDov5DooYzlsI/mlbDmja7pm4bkvJjljJbmtYvor5VcclxuICAgIGNvbnN0IHNtYWxsRGF0YXNldFRlc3QgPSBuZXcgU21hbGxEYXRhc2V0T3B0aW1pemF0aW9uVGVzdCgpXHJcbiAgICBhd2FpdCBzbWFsbERhdGFzZXRUZXN0LnJ1blNtYWxsRGF0YXNldFRlc3QoKVxyXG4gICAgXHJcbiAgICBjb25zb2xlLmxvZygnXFxu8J+OiSDmiYDmnInmgKfog73mtYvor5XlrozmiJAhJylcclxuICAgIFxyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdcXG7inYwg5oCn6IO95rWL6K+V5aSx6LSlOicsIGVycm9yKVxyXG4gIH1cclxufVxyXG5cclxuLy8g5aaC5p6c55u05o6l6L+Q6KGM5q2k5paH5Lu277yM5omn6KGM5rWL6K+VXHJcbmlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJykge1xyXG4gIC8vIOa1j+iniOWZqOeOr+Wig1xyXG4gICh3aW5kb3cgYXMgYW55KS5ydW5Mb2NhbE9wZXJhdGlvblBlcmZvcm1hbmNlVGVzdHMgPSBydW5Mb2NhbE9wZXJhdGlvblBlcmZvcm1hbmNlVGVzdHNcclxufSBlbHNlIGlmICh0eXBlb2YgcHJvY2VzcyAhPT0gJ3VuZGVmaW5lZCcpIHtcclxuICAvLyBOb2RlLmpz546v5aKDXHJcbiAgcnVuTG9jYWxPcGVyYXRpb25QZXJmb3JtYW5jZVRlc3RzKCkuY2F0Y2goY29uc29sZS5lcnJvcilcclxufSJdLCJ2ZXJzaW9uIjozfQ==