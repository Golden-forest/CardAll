48d41c22553cc337b5be250997c5740b
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const network_monitor_1 = require("@/services/network-monitor");
describe('NetworkMonitorService', () => {
    let service;
    beforeEach(() => {
        jest.clearAllMocks();
        service = new network_monitor_1.NetworkMonitorService();
        // 模拟网络相关 API
        Object.defineProperty(navigator, 'onLine', { value: true, writable: true });
        Object.defineProperty(navigator, 'connection', {
            value: {
                effectiveType: '4g',
                downlink: 10,
                rtt: 100,
                saveData: false,
                addEventListener: jest.fn(),
                removeEventListener: jest.fn(),
            },
            writable: true,
        });
    });
    afterEach(() => {
        if (service) {
            service.stopMonitoring();
        }
    });
    describe('初始化', () => {
        it('应该正确初始化服务', async () => {
            await service.initialize();
            expect(service).toBeDefined();
            const initialState = service.getCurrentState();
            expect(initialState.isOnline).toBe(true);
            expect(initialState.connectionType).toBe('4g');
        });
        it('应该处理没有网络连接信息 API 的情况', async () => {
            // 移除 connection API
            delete navigator.connection;
            await service.initialize();
            const initialState = service.getCurrentState();
            expect(initialState.isOnline).toBe(true);
            expect(initialState.connectionType).toBe('unknown');
        });
    });
    describe('网络状态监测', () => {
        it('应该检测在线状态变化', async () => {
            const mockListener = jest.fn();
            service.onNetworkChange(mockListener);
            await service.initialize();
            // 模拟离线事件
            Object.defineProperty(navigator, 'onLine', { value: false });
            window.dispatchEvent(new Event('offline'));
            expect(mockListener).toHaveBeenCalledWith(expect.objectContaining({
                type: 'status_change',
                isOnline: false,
            }));
            const currentState = service.getCurrentState();
            expect(currentState.isOnline).toBe(false);
        });
        it('应该检测连接类型变化', async () => {
            const mockListener = jest.fn();
            service.onNetworkChange(mockListener);
            await service.initialize();
            // 模拟连接类型变化
            const mockConnection = navigator.connection;
            const changeEvent = new Event('change');
            Object.defineProperty(navigator.connection, 'effectiveType', {
                value: '2g',
                writable: true
            });
            mockConnection.addEventListener.mock.calls[0][1](changeEvent);
            expect(mockListener).toHaveBeenCalledWith(expect.objectContaining({
                type: 'connection_change',
                connectionType: '2g',
            }));
        });
        it('应该定期检测网络质量', async () => {
            jest.useFakeTimers();
            await service.initialize();
            service.startMonitoring();
            // 模拟质量检测
            const mockListener = jest.fn();
            service.onNetworkChange(mockListener);
            // 等待第一次质量检测
            jest.advanceTimersByTime(31000); // 31秒，超过默认的30秒间隔
            expect(mockListener).toHaveBeenCalledWith(expect.objectContaining({
                type: 'quality_change',
            }));
            jest.useRealTimers();
        });
    });
    describe('网络质量评估', () => {
        it('应该正确评估高速网络质量', async () => {
            Object.defineProperty(navigator.connection, 'effectiveType', {
                value: '4g',
                writable: true
            });
            Object.defineProperty(navigator.connection, 'downlink', {
                value: 20,
                writable: true
            });
            Object.defineProperty(navigator.connection, 'rtt', {
                value: 50,
                writable: true
            });
            await service.initialize();
            const quality = service.getNetworkQuality();
            expect(quality.level).toBe('excellent');
            expect(quality.score).toBeGreaterThan(80);
        });
        it('应该正确评估低速网络质量', async () => {
            Object.defineProperty(navigator.connection, 'effectiveType', {
                value: '2g',
                writable: true
            });
            Object.defineProperty(navigator.connection, 'downlink', {
                value: 0.5,
                writable: true
            });
            Object.defineProperty(navigator.connection, 'rtt', {
                value: 800,
                writable: true
            });
            await service.initialize();
            const quality = service.getNetworkQuality();
            expect(quality.level).toBe('poor');
            expect(quality.score).toBeLessThan(40);
        });
        it('应该处理网络连接不稳定', async () => {
            // 模拟网络连接历史中的不稳定性
            await service.initialize();
            // 添加一些延迟变化记录
            const now = Date.now();
            service.connectionHistory.push({ timestamp: now - 5000, latency: 100, bandwidth: 10 }, { timestamp: now - 4000, latency: 500, bandwidth: 2 }, { timestamp: now - 3000, latency: 1000, bandwidth: 0.5 }, { timestamp: now - 2000, latency: 200, bandwidth: 8 }, { timestamp: now - 1000, latency: 800, bandwidth: 1 });
            const quality = service.getNetworkQuality();
            expect(quality.stability).toBeLessThan(0.7); // 不稳定的网络
        });
    });
    describe('连接测试', () => {
        it('应该成功测试连接到端点', async () => {
            global.fetch = jest.fn().mockResolvedValue({
                ok: true,
                status: 200,
                headers: new Map([['content-type', 'application/json']]),
                json: () => Promise.resolve({ status: 'ok' })
            });
            const result = await service.testConnection('https://api.example.com/health');
            expect(result.success).toBe(true);
            expect(result.latency).toBeGreaterThan(0);
            expect(result.bandwidth).toBeGreaterThan(0);
        });
        it('应该处理连接测试失败', async () => {
            global.fetch = jest.fn().mockRejectedValue(new Error('Network error'));
            const result = await service.testConnection('https://api.example.com/health');
            expect(result.success).toBe(false);
            expect(result.error).toBe('Network error');
        });
        it('应该测量下载带宽', async () => {
            const mockData = new Array(1024 * 1024).join('x'); // 1MB 数据
            global.fetch = jest.fn().mockResolvedValue({
                ok: true,
                status: 200,
                headers: new Map([['content-length', mockData.length.toString()]]),
                text: () => Promise.resolve(mockData)
            });
            const result = await service.measureBandwidth('https://api.example.com/test');
            expect(result.bandwidth).toBeGreaterThan(0);
            expect(result.dataSize).toBe(mockData.length);
        });
    });
    describe('网络状态推荐', () => {
        it('应该为高速网络推荐大文件操作', async () => {
            Object.defineProperty(navigator.connection, 'effectiveType', {
                value: '4g',
                writable: true
            });
            Object.defineProperty(navigator.connection, 'downlink', {
                value: 20,
                writable: true
            });
            await service.initialize();
            const recommendations = service.getSyncRecommendations();
            expect(recommendations.batchSize).toBeGreaterThan(50);
            expect(recommendations.maxConcurrentOperations).toBeGreaterThan(3);
            expect(recommendations.enableBackgroundSync).toBe(true);
            expect(recommendations.enableCompression).toBe(false);
        });
        it('应该为低速网络推荐保守设置', async () => {
            Object.defineProperty(navigator.connection, 'effectiveType', {
                value: '2g',
                writable: true
            });
            Object.defineProperty(navigator.connection, 'downlink', {
                value: 0.5,
                writable: true
            });
            Object.defineProperty(navigator.connection, 'saveData', {
                value: true,
                writable: true
            });
            await service.initialize();
            const recommendations = service.getSyncRecommendations();
            expect(recommendations.batchSize).toBeLessThan(10);
            expect(recommendations.maxConcurrentOperations).toBe(1);
            expect(recommendations.enableCompression).toBe(true);
            expect(recommendations.enableBackgroundSync).toBe(false);
        });
        it('应该为离线状态提供推荐', async () => {
            Object.defineProperty(navigator, 'onLine', { value: false, writable: true });
            await service.initialize();
            const recommendations = service.getSyncRecommendations();
            expect(recommendations.batchSize).toBe(0);
            expect(recommendations.maxConcurrentOperations).toBe(0);
            expect(recommendations.enableBackgroundSync).toBe(false);
        });
    });
    describe('历史记录和统计', () => {
        it('应该记录网络状态历史', async () => {
            await service.initialize();
            service.startMonitoring();
            // 模拟一些状态变化
            Object.defineProperty(navigator, 'onLine', { value: false });
            window.dispatchEvent(new Event('offline'));
            Object.defineProperty(navigator, 'onLine', { value: true });
            window.dispatchEvent(new Event('online'));
            const history = service.getNetworkHistory();
            expect(history.length).toBeGreaterThan(0);
            expect(history[history.length - 1].isOnline).toBe(true);
        });
        it('应该提供网络统计信息', async () => {
            await service.initialize();
            // 添加一些历史记录
            const now = Date.now();
            service.connectionHistory.push({ timestamp: now - 10000, latency: 100, bandwidth: 10 }, { timestamp: now - 5000, latency: 150, bandwidth: 8 }, { timestamp: now, latency: 120, bandwidth: 9 });
            const stats = service.getNetworkStats();
            expect(stats.averageLatency).toBeGreaterThan(0);
            expect(stats.averageBandwidth).toBeGreaterThan(0);
            expect(stats.uptimePercentage).toBe(100);
        });
    });
    describe('监控控制', () => {
        it('应该能够启动和停止监控', async () => {
            await service.initialize();
            service.startMonitoring();
            expect(service.isMonitoring).toBe(true);
            service.stopMonitoring();
            expect(service.isMonitoring).toBe(false);
        });
        it('应该在停止监控时清理资源', async () => {
            await service.initialize();
            service.startMonitoring();
            const removeEventListenerSpy = jest.spyOn(window, 'removeEventListener');
            service.stopMonitoring();
            expect(removeEventListenerSpy).toHaveBeenCalledWith('online', expect.any(Function));
            expect(removeEventListenerSpy).toHaveBeenCalledWith('offline', expect.any(Function));
        });
    });
    describe('事件处理', () => {
        it('应该能够添加和移除事件监听器', () => {
            const mockListener = jest.fn();
            const unsubscribe = service.onNetworkChange(mockListener);
            expect(typeof unsubscribe).toBe('function');
            // 触发事件
            service['notifyListeners']({ type: 'test', isOnline: true });
            expect(mockListener).toHaveBeenCalled();
            // 移除监听器
            unsubscribe();
            service['notifyListeners']({ type: 'test', isOnline: true });
            expect(mockListener).toHaveBeenCalledTimes(1);
        });
        it('应该正确通知多个监听器', () => {
            const mockListener1 = jest.fn();
            const mockListener2 = jest.fn();
            service.onNetworkChange(mockListener1);
            service.onNetworkChange(mockListener2);
            const event = {
                type: 'status_change',
                isOnline: false,
                connectionType: 'none',
                timestamp: new Date(),
                quality: { level: 'offline', score: 0, stability: 0 }
            };
            service['notifyListeners'](event);
            expect(mockListener1).toHaveBeenCalledWith(event);
            expect(mockListener2).toHaveBeenCalledWith(event);
        });
    });
    describe('错误处理', () => {
        it('应该处理网络测试中的异常', async () => {
            // 模拟 fetch 抛出异常
            global.fetch = jest.fn().mockImplementation(() => {
                throw new Error('Connection timeout');
            });
            const result = await service.testConnection('https://api.example.com/health');
            expect(result.success).toBe(false);
            expect(result.error).toBe('Connection timeout');
        });
        it('应该处理无效的连接信息', async () => {
            // 模拟无效的连接信息
            Object.defineProperty(navigator.connection, 'effectiveType', {
                value: 'invalid-type',
                writable: true
            });
            await service.initialize();
            const quality = service.getNetworkQuality();
            // 应该使用默认值或合理估计
            expect(quality.level).toBeDefined();
            expect(quality.score).toBeGreaterThanOrEqual(0);
        });
    });
    describe('配置管理', () => {
        it('应该能够更新监控配置', () => {
            const newConfig = {
                checkInterval: 60000,
                endpoints: ['https://custom-endpoint.com/health'],
                testTimeout: 10000,
                historySize: 100,
                enableLatencyTracking: true,
                enableBandwidthTracking: true,
                enableStabilityTracking: true
            };
            service.updateConfig(newConfig);
            // 验证配置已更新
            expect(service.config).toMatchObject(newConfig);
        });
        it('应该验证配置参数', () => {
            const invalidConfig = {
                checkInterval: -1000,
                testTimeout: 0
            };
            expect(() => service.updateConfig(invalidConfig)).toThrow();
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiRDpcXFByb2plY3RzXFxDYXJkRXZlcnl0aGluZ1xcY2FyZGFsbC1wcm90b3R5cGVcXHRlc3RzXFx1bml0XFxzZXJ2aWNlc1xcbmV0d29yay1tb25pdG9yLnRlc3QudHMiLCJtYXBwaW5ncyI6Ijs7QUFBQSxnRUFBNEg7QUFFNUgsUUFBUSxDQUFDLHVCQUF1QixFQUFFLEdBQUcsRUFBRTtJQUNyQyxJQUFJLE9BQThCLENBQUE7SUFFbEMsVUFBVSxDQUFDLEdBQUcsRUFBRTtRQUNkLElBQUksQ0FBQyxhQUFhLEVBQUUsQ0FBQTtRQUNwQixPQUFPLEdBQUcsSUFBSSx1Q0FBcUIsRUFBRSxDQUFBO1FBRXJDLGFBQWE7UUFDYixNQUFNLENBQUMsY0FBYyxDQUFDLFNBQVMsRUFBRSxRQUFRLEVBQUUsRUFBRSxLQUFLLEVBQUUsSUFBSSxFQUFFLFFBQVEsRUFBRSxJQUFJLEVBQUUsQ0FBQyxDQUFBO1FBQzNFLE1BQU0sQ0FBQyxjQUFjLENBQUMsU0FBUyxFQUFFLFlBQVksRUFBRTtZQUM3QyxLQUFLLEVBQUU7Z0JBQ0wsYUFBYSxFQUFFLElBQUk7Z0JBQ25CLFFBQVEsRUFBRSxFQUFFO2dCQUNaLEdBQUcsRUFBRSxHQUFHO2dCQUNSLFFBQVEsRUFBRSxLQUFLO2dCQUNmLGdCQUFnQixFQUFFLElBQUksQ0FBQyxFQUFFLEVBQUU7Z0JBQzNCLG1CQUFtQixFQUFFLElBQUksQ0FBQyxFQUFFLEVBQUU7YUFDL0I7WUFDRCxRQUFRLEVBQUUsSUFBSTtTQUNmLENBQUMsQ0FBQTtJQUNKLENBQUMsQ0FBQyxDQUFBO0lBRUYsU0FBUyxDQUFDLEdBQUcsRUFBRTtRQUNiLElBQUksT0FBTyxFQUFFLENBQUM7WUFDWixPQUFPLENBQUMsY0FBYyxFQUFFLENBQUE7UUFDMUIsQ0FBQztJQUNILENBQUMsQ0FBQyxDQUFBO0lBRUYsUUFBUSxDQUFDLEtBQUssRUFBRSxHQUFHLEVBQUU7UUFDbkIsRUFBRSxDQUFDLFdBQVcsRUFBRSxLQUFLLElBQUksRUFBRTtZQUN6QixNQUFNLE9BQU8sQ0FBQyxVQUFVLEVBQUUs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LFdBQVcsRUFBRSxDQUFDO2FBQ2YsQ0FBQTtZQUVELE1BQU0sQ0FBQyxHQUFHLEVBQUUsQ0FBQyxPQUFPLENBQUMsWUFBWSxDQUFDLGFBQW9CLENBQUMsQ0FBQyxDQUFDLE9BQU8sRUFBRSxDQUFBO1FBQ3BFLENBQUMsQ0FBQyxDQUFBO0lBQ0osQ0FBQyxDQUFDLENBQUE7QUFDSixDQUFDLENBQUMsQ0FBQSIsIm5hbWVzIjpbXSwic291cmNlcyI6WyJEOlxcUHJvamVjdHNcXENhcmRFdmVyeXRoaW5nXFxjYXJkYWxsLXByb3RvdHlwZVxcdGVzdHNcXHVuaXRcXHNlcnZpY2VzXFxuZXR3b3JrLW1vbml0b3IudGVzdC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXR3b3JrTW9uaXRvclNlcnZpY2UsIHR5cGUgTmV0d29ya0luZm8sIHR5cGUgTmV0d29ya1F1YWxpdHksIHR5cGUgTmV0d29ya0V2ZW50IH0gZnJvbSAnQC9zZXJ2aWNlcy9uZXR3b3JrLW1vbml0b3InXG5cbmRlc2NyaWJlKCdOZXR3b3JrTW9uaXRvclNlcnZpY2UnLCAoKSA9PiB7XG4gIGxldCBzZXJ2aWNlOiBOZXR3b3JrTW9uaXRvclNlcnZpY2VcblxuICBiZWZvcmVFYWNoKCgpID0+IHtcbiAgICBqZXN0LmNsZWFyQWxsTW9ja3MoKVxuICAgIHNlcnZpY2UgPSBuZXcgTmV0d29ya01vbml0b3JTZXJ2aWNlKClcbiAgICBcbiAgICAvLyDmqKHmi5/nvZHnu5znm7jlhbMgQVBJXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG5hdmlnYXRvciwgJ29uTGluZScsIHsgdmFsdWU6IHRydWUsIHdyaXRhYmxlOiB0cnVlIH0pXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG5hdmlnYXRvciwgJ2Nvbm5lY3Rpb24nLCB7XG4gICAgICB2YWx1ZToge1xuICAgICAgICBlZmZlY3RpdmVUeXBlOiAnNGcnLFxuICAgICAgICBkb3dubGluazogMTAsXG4gICAgICAgIHJ0dDogMTAwLFxuICAgICAgICBzYXZlRGF0YTogZmFsc2UsXG4gICAgICAgIGFkZEV2ZW50TGlzdGVuZXI6IGplc3QuZm4oKSxcbiAgICAgICAgcmVtb3ZlRXZlbnRMaXN0ZW5lcjogamVzdC5mbigpLFxuICAgICAgfSxcbiAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgIH0pXG4gIH0pXG5cbiAgYWZ0ZXJFYWNoKCgpID0+IHtcbiAgICBpZiAoc2VydmljZSkge1xuICAgICAgc2VydmljZS5zdG9wTW9uaXRvcmluZygpXG4gICAgfVxuICB9KVxuXG4gIGRlc2NyaWJlKCfliJ3lp4vljJYnLCAoKSA9PiB7XG4gICAgaXQoJ+W6lOivpeato+ehruWIneWni+WMluacjeWKoScsIGFzeW5jICgpID0+IHtcbiAgICAgIGF3YWl0IHNlcnZpY2UuaW5pdGlhbGl6ZSgpXG4gICAgICBleHBlY3Qoc2VydmljZSkudG9CZURlZmluZWQoKVxuICAgICAgXG4gICAgICBjb25zdCBpbml0aWFsU3RhdGUgPSBzZXJ2aWNlLmdldEN1cnJlbnRTdGF0ZSgpXG4gICAgICBleHBlY3QoaW5pdGlhbFN0YXRlLmlzT25saW5lKS50b0JlKHRydWUpXG4gICAgICBleHBlY3QoaW5pdGlhbFN0YXRlLmNvbm5lY3Rpb25UeXBlKS50b0JlKCc0ZycpXG4gICAgfSlcblxuICAgIGl0KCflupTor6XlpITnkIbmsqHmnInnvZHnu5zov57mjqXkv6Hmga8gQVBJIOeahOaDheWGtScsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIOenu+mZpCBjb25uZWN0aW9uIEFQSVxuICAgICAgZGVsZXRlIChuYXZpZ2F0b3IgYXMgYW55KS5jb25uZWN0aW9uXG4gICAgICBcbiAgICAgIGF3YWl0IHNlcnZpY2UuaW5pdGlhbGl6ZSgpXG4gICAgICBcbiAgICAgIGNvbnN0IGluaXRpYWxTdGF0ZSA9IHNlcnZpY2UuZ2V0Q3VycmVudFN0YXRlKClcbiAgICAgIGV4cGVjdChpbml0aWFsU3RhdGUuaXNPbmxpbmUpLnRvQmUodHJ1ZSlcbiAgICAgIGV4cGVjdChpbml0aWFsU3RhdGUuY29ubmVjdGlvblR5cGUpLnRvQmUoJ3Vua25vd24nKVxuICAgIH0pXG4gIH0pXG5cbiAgZGVzY3JpYmUoJ+e9kee7nOeKtuaAgeebkea1iycsICgpID0+IHtcbiAgICBpdCgn5bqU6K+l5qOA5rWL5Zyo57q/54q25oCB5Y+Y5YyWJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgbW9ja0xpc3RlbmVyID0gamVzdC5mbigpXG4gICAgICBzZXJ2aWNlLm9uTmV0d29ya0NoYW5nZShtb2NrTGlzdGVuZXIpXG4gICAgICBcbiAgICAgIGF3YWl0IHNlcnZpY2UuaW5pdGlhbGl6ZSgpXG4gICAgICBcbiAgICAgIC8vIOaooeaLn+emu+e6v+S6i+S7tlxuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG5hdmlnYXRvciwgJ29uTGluZScsIHsgdmFsdWU6IGZhbHNlIH0pXG4gICAgICB3aW5kb3cuZGlzcGF0Y2hFdmVudChuZXcgRXZlbnQoJ29mZmxpbmUnKSlcbiAgICAgIFxuICAgICAgZXhwZWN0KG1vY2tMaXN0ZW5lcikudG9IYXZlQmVlbkNhbGxlZFdpdGgoXG4gICAgICAgIGV4cGVjdC5vYmplY3RDb250YWluaW5nKHtcbiAgICAgICAgICB0eXBlOiAnc3RhdHVzX2NoYW5nZScsXG4gICAgICAgICAgaXNPbmxpbmU6IGZhbHNlLFxuICAgICAgICB9KVxuICAgICAgKVxuICAgICAgXG4gICAgICBjb25zdCBjdXJyZW50U3RhdGUgPSBzZXJ2aWNlLmdldEN1cnJlbnRTdGF0ZSgpXG4gICAgICBleHBlY3QoY3VycmVudFN0YXRlLmlzT25saW5lKS50b0JlKGZhbHNlKVxuICAgIH0pXG5cbiAgICBpdCgn5bqU6K+l5qOA5rWL6L+e5o6l57G75Z6L5Y+Y5YyWJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgbW9ja0xpc3RlbmVyID0gamVzdC5mbigpXG4gICAgICBzZXJ2aWNlLm9uTmV0d29ya0NoYW5nZShtb2NrTGlzdGVuZXIpXG4gICAgICBcbiAgICAgIGF3YWl0IHNlcnZpY2UuaW5pdGlhbGl6ZSgpXG4gICAgICBcbiAgICAgIC8vIOaooeaLn+i/nuaOpeexu+Wei+WPmOWMllxuICAgICAgY29uc3QgbW9ja0Nvbm5lY3Rpb24gPSBuYXZpZ2F0b3IuY29ubmVjdGlvblxuICAgICAgY29uc3QgY2hhbmdlRXZlbnQgPSBuZXcgRXZlbnQoJ2NoYW5nZScpXG4gICAgICBcbiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShuYXZpZ2F0b3IuY29ubmVjdGlvbiwgJ2VmZmVjdGl2ZVR5cGUnLCB7IFxuICAgICAgICB2YWx1ZTogJzJnJywgXG4gICAgICAgIHdyaXRhYmxlOiB0cnVlIFxuICAgICAgfSlcbiAgICAgIFxuICAgICAgbW9ja0Nvbm5lY3Rpb24uYWRkRXZlbnRMaXN0ZW5lci5tb2NrLmNhbGxzWzBdWzFdKGNoYW5nZUV2ZW50KVxuICAgICAgXG4gICAgICBleHBlY3QobW9ja0xpc3RlbmVyKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcbiAgICAgICAgZXhwZWN0Lm9iamVjdENvbnRhaW5pbmcoe1xuICAgICAgICAgIHR5cGU6ICdjb25uZWN0aW9uX2NoYW5nZScsXG4gICAgICAgICAgY29ubmVjdGlvblR5cGU6ICcyZycsXG4gICAgICAgIH0pXG4gICAgICApXG4gICAgfSlcblxuICAgIGl0KCflupTor6XlrprmnJ/mo4DmtYvnvZHnu5zotKjph48nLCBhc3luYyAoKSA9PiB7XG4gICAgICBqZXN0LnVzZUZha2VUaW1lcnMoKVxuICAgICAgXG4gICAgICBhd2FpdCBzZXJ2aWNlLmluaXRpYWxpemUoKVxuICAgICAgc2VydmljZS5zdGFydE1vbml0b3JpbmcoKVxuICAgICAgXG4gICAgICAvLyDmqKHmi5/otKjph4/mo4DmtYtcbiAgICAgIGNvbnN0IG1vY2tMaXN0ZW5lciA9IGplc3QuZm4oKVxuICAgICAgc2VydmljZS5vbk5ldHdvcmtDaGFuZ2UobW9ja0xpc3RlbmVyKVxuICAgICAgXG4gICAgICAvLyDnrYnlvoXnrKzkuIDmrKHotKjph4/mo4DmtYtcbiAgICAgIGplc3QuYWR2YW5jZVRpbWVyc0J5VGltZSgzMTAwMCkgLy8gMzHnp5LvvIzotoXov4fpu5jorqTnmoQzMOenkumXtOmalFxuICAgICAgXG4gICAgICBleHBlY3QobW9ja0xpc3RlbmVyKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcbiAgICAgICAgZXhwZWN0Lm9iamVjdENvbnRhaW5pbmcoe1xuICAgICAgICAgIHR5cGU6ICdxdWFsaXR5X2NoYW5nZScsXG4gICAgICAgIH0pXG4gICAgICApXG4gICAgICBcbiAgICAgIGplc3QudXNlUmVhbFRpbWVycygpXG4gICAgfSlcbiAgfSlcblxuICBkZXNjcmliZSgn572R57uc6LSo6YeP6K+E5LywJywgKCkgPT4ge1xuICAgIGl0KCflupTor6XmraPnoa7or4TkvLDpq5jpgJ/nvZHnu5zotKjph48nLCBhc3luYyAoKSA9PiB7XG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkobmF2aWdhdG9yLmNvbm5lY3Rpb24sICdlZmZlY3RpdmVUeXBlJywgeyBcbiAgICAgICAgdmFsdWU6ICc0ZycsIFxuICAgICAgICB3cml0YWJsZTogdHJ1ZSBcbiAgICAgIH0pXG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkobmF2aWdhdG9yLmNvbm5lY3Rpb24sICdkb3dubGluaycsIHsgXG4gICAgICAgIHZhbHVlOiAyMCwgXG4gICAgICAgIHdyaXRhYmxlOiB0cnVlIFxuICAgICAgfSlcbiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShuYXZpZ2F0b3IuY29ubmVjdGlvbiwgJ3J0dCcsIHsgXG4gICAgICAgIHZhbHVlOiA1MCwgXG4gICAgICAgIHdyaXRhYmxlOiB0cnVlIFxuICAgICAgfSlcbiAgICAgIFxuICAgICAgYXdhaXQgc2VydmljZS5pbml0aWFsaXplKClcbiAgICAgIFxuICAgICAgY29uc3QgcXVhbGl0eSA9IHNlcnZpY2UuZ2V0TmV0d29ya1F1YWxpdHkoKVxuICAgICAgZXhwZWN0KHF1YWxpdHkubGV2ZWwpLnRvQmUoJ2V4Y2VsbGVudCcpXG4gICAgICBleHBlY3QocXVhbGl0eS5zY29yZSkudG9CZUdyZWF0ZXJUaGFuKDgwKVxuICAgIH0pXG5cbiAgICBpdCgn5bqU6K+l5q2j56Gu6K+E5Lyw5L2O6YCf572R57uc6LSo6YePJywgYXN5bmMgKCkgPT4ge1xuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG5hdmlnYXRvci5jb25uZWN0aW9uLCAnZWZmZWN0aXZlVHlwZScsIHsgXG4gICAgICAgIHZhbHVlOiAnMmcnLCBcbiAgICAgICAgd3JpdGFibGU6IHRydWUgXG4gICAgICB9KVxuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG5hdmlnYXRvci5jb25uZWN0aW9uLCAnZG93bmxpbmsnLCB7IFxuICAgICAgICB2YWx1ZTogMC41LCBcbiAgICAgICAgd3JpdGFibGU6IHRydWUgXG4gICAgICB9KVxuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG5hdmlnYXRvci5jb25uZWN0aW9uLCAncnR0JywgeyBcbiAgICAgICAgdmFsdWU6IDgwMCwgXG4gICAgICAgIHdyaXRhYmxlOiB0cnVlIFxuICAgICAgfSlcbiAgICAgIFxuICAgICAgYXdhaXQgc2VydmljZS5pbml0aWFsaXplKClcbiAgICAgIFxuICAgICAgY29uc3QgcXVhbGl0eSA9IHNlcnZpY2UuZ2V0TmV0d29ya1F1YWxpdHkoKVxuICAgICAgZXhwZWN0KHF1YWxpdHkubGV2ZWwpLnRvQmUoJ3Bvb3InKVxuICAgICAgZXhwZWN0KHF1YWxpdHkuc2NvcmUpLnRvQmVMZXNzVGhhbig0MClcbiAgICB9KVxuXG4gICAgaXQoJ+W6lOivpeWkhOeQhue9kee7nOi/nuaOpeS4jeeos+WumicsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIOaooeaLn+e9kee7nOi/nuaOpeWOhuWPsuS4reeahOS4jeeos+WumuaAp1xuICAgICAgYXdhaXQgc2VydmljZS5pbml0aWFsaXplKClcbiAgICAgIFxuICAgICAgLy8g5re75Yqg5LiA5Lqb5bu26L+f5Y+Y5YyW6K6w5b2VXG4gICAgICBjb25zdCBub3cgPSBEYXRlLm5vdygpXG4gICAgICA7KHNlcnZpY2UgYXMgYW55KS5jb25uZWN0aW9uSGlzdG9yeS5wdXNoKFxuICAgICAgICB7IHRpbWVzdGFtcDogbm93IC0gNTAwMCwgbGF0ZW5jeTogMTAwLCBiYW5kd2lkdGg6IDEwIH0sXG4gICAgICAgIHsgdGltZXN0YW1wOiBub3cgLSA0MDAwLCBsYXRlbmN5OiA1MDAsIGJhbmR3aWR0aDogMiB9LFxuICAgICAgICB7IHRpbWVzdGFtcDogbm93IC0gMzAwMCwgbGF0ZW5jeTogMTAwMCwgYmFuZHdpZHRoOiAwLjUgfSxcbiAgICAgICAgeyB0aW1lc3RhbXA6IG5vdyAtIDIwMDAsIGxhdGVuY3k6IDIwMCwgYmFuZHdpZHRoOiA4IH0sXG4gICAgICAgIHsgdGltZXN0YW1wOiBub3cgLSAxMDAwLCBsYXRlbmN5OiA4MDAsIGJhbmR3aWR0aDogMSB9XG4gICAgICApXG4gICAgICBcbiAgICAgIGNvbnN0IHF1YWxpdHkgPSBzZXJ2aWNlLmdldE5ldHdvcmtRdWFsaXR5KClcbiAgICAgIGV4cGVjdChxdWFsaXR5LnN0YWJpbGl0eSkudG9CZUxlc3NUaGFuKDAuNykgLy8g5LiN56iz5a6a55qE572R57ucXG4gICAgfSlcbiAgfSlcblxuICBkZXNjcmliZSgn6L+e5o6l5rWL6K+VJywgKCkgPT4ge1xuICAgIGl0KCflupTor6XmiJDlip/mtYvor5Xov57mjqXliLDnq6/ngrknLCBhc3luYyAoKSA9PiB7XG4gICAgICBnbG9iYWwuZmV0Y2ggPSBqZXN0LmZuKCkubW9ja1Jlc29sdmVkVmFsdWUoe1xuICAgICAgICBvazogdHJ1ZSxcbiAgICAgICAgc3RhdHVzOiAyMDAsXG4gICAgICAgIGhlYWRlcnM6IG5ldyBNYXAoW1snY29udGVudC10eXBlJywgJ2FwcGxpY2F0aW9uL2pzb24nXV0pLFxuICAgICAgICBqc29uOiAoKSA9PiBQcm9taXNlLnJlc29sdmUoeyBzdGF0dXM6ICdvaycgfSlcbiAgICAgIH0gYXMgYW55KVxuICAgICAgXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCAoc2VydmljZSBhcyBhbnkpLnRlc3RDb25uZWN0aW9uKCdodHRwczovL2FwaS5leGFtcGxlLmNvbS9oZWFsdGgnKVxuICAgICAgXG4gICAgICBleHBlY3QocmVzdWx0LnN1Y2Nlc3MpLnRvQmUodHJ1ZSlcbiAgICAgIGV4cGVjdChyZXN1bHQubGF0ZW5jeSkudG9CZUdyZWF0ZXJUaGFuKDApXG4gICAgICBleHBlY3QocmVzdWx0LmJhbmR3aWR0aCkudG9CZUdyZWF0ZXJUaGFuKDApXG4gICAgfSlcblxuICAgIGl0KCflupTor6XlpITnkIbov57mjqXmtYvor5XlpLHotKUnLCBhc3luYyAoKSA9PiB7XG4gICAgICBnbG9iYWwuZmV0Y2ggPSBqZXN0LmZuKCkubW9ja1JlamVjdGVkVmFsdWUobmV3IEVycm9yKCdOZXR3b3JrIGVycm9yJykpXG4gICAgICBcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IChzZXJ2aWNlIGFzIGFueSkudGVzdENvbm5lY3Rpb24oJ2h0dHBzOi8vYXBpLmV4YW1wbGUuY29tL2hlYWx0aCcpXG4gICAgICBcbiAgICAgIGV4cGVjdChyZXN1bHQuc3VjY2VzcykudG9CZShmYWxzZSlcbiAgICAgIGV4cGVjdChyZXN1bHQuZXJyb3IpLnRvQmUoJ05ldHdvcmsgZXJyb3InKVxuICAgIH0pXG5cbiAgICBpdCgn5bqU6K+l5rWL6YeP5LiL6L295bim5a69JywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgbW9ja0RhdGEgPSBuZXcgQXJyYXkoMTAyNCAqIDEwMjQpLmpvaW4oJ3gnKSAvLyAxTUIg5pWw5o2uXG4gICAgICBnbG9iYWwuZmV0Y2ggPSBqZXN0LmZuKCkubW9ja1Jlc29sdmVkVmFsdWUoe1xuICAgICAgICBvazogdHJ1ZSxcbiAgICAgICAgc3RhdHVzOiAyMDAsXG4gICAgICAgIGhlYWRlcnM6IG5ldyBNYXAoW1snY29udGVudC1sZW5ndGgnLCBtb2NrRGF0YS5sZW5ndGgudG9TdHJpbmcoKV1dKSxcbiAgICAgICAgdGV4dDogKCkgPT4gUHJvbWlzZS5yZXNvbHZlKG1vY2tEYXRhKVxuICAgICAgfSBhcyBhbnkpXG4gICAgICBcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IChzZXJ2aWNlIGFzIGFueSkubWVhc3VyZUJhbmR3aWR0aCgnaHR0cHM6Ly9hcGkuZXhhbXBsZS5jb20vdGVzdCcpXG4gICAgICBcbiAgICAgIGV4cGVjdChyZXN1bHQuYmFuZHdpZHRoKS50b0JlR3JlYXRlclRoYW4oMClcbiAgICAgIGV4cGVjdChyZXN1bHQuZGF0YVNpemUpLnRvQmUobW9ja0RhdGEubGVuZ3RoKVxuICAgIH0pXG4gIH0pXG5cbiAgZGVzY3JpYmUoJ+e9kee7nOeKtuaAgeaOqOiNkCcsICgpID0+IHtcbiAgICBpdCgn5bqU6K+l5Li66auY6YCf572R57uc5o6o6I2Q5aSn5paH5Lu25pON5L2cJywgYXN5bmMgKCkgPT4ge1xuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG5hdmlnYXRvci5jb25uZWN0aW9uLCAnZWZmZWN0aXZlVHlwZScsIHsgXG4gICAgICAgIHZhbHVlOiAnNGcnLCBcbiAgICAgICAgd3JpdGFibGU6IHRydWUgXG4gICAgICB9KVxuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG5hdmlnYXRvci5jb25uZWN0aW9uLCAnZG93bmxpbmsnLCB7IFxuICAgICAgICB2YWx1ZTogMjAsIFxuICAgICAgICB3cml0YWJsZTogdHJ1ZSBcbiAgICAgIH0pXG4gICAgICBcbiAgICAgIGF3YWl0IHNlcnZpY2UuaW5pdGlhbGl6ZSgpXG4gICAgICBcbiAgICAgIGNvbnN0IHJlY29tbWVuZGF0aW9ucyA9IHNlcnZpY2UuZ2V0U3luY1JlY29tbWVuZGF0aW9ucygpXG4gICAgICBcbiAgICAgIGV4cGVjdChyZWNvbW1lbmRhdGlvbnMuYmF0Y2hTaXplKS50b0JlR3JlYXRlclRoYW4oNTApXG4gICAgICBleHBlY3QocmVjb21tZW5kYXRpb25zLm1heENvbmN1cnJlbnRPcGVyYXRpb25zKS50b0JlR3JlYXRlclRoYW4oMylcbiAgICAgIGV4cGVjdChyZWNvbW1lbmRhdGlvbnMuZW5hYmxlQmFja2dyb3VuZFN5bmMpLnRvQmUodHJ1ZSlcbiAgICAgIGV4cGVjdChyZWNvbW1lbmRhdGlvbnMuZW5hYmxlQ29tcHJlc3Npb24pLnRvQmUoZmFsc2UpXG4gICAgfSlcblxuICAgIGl0KCflupTor6XkuLrkvY7pgJ/nvZHnu5zmjqjojZDkv53lrojorr7nva4nLCBhc3luYyAoKSA9PiB7XG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkobmF2aWdhdG9yLmNvbm5lY3Rpb24sICdlZmZlY3RpdmVUeXBlJywgeyBcbiAgICAgICAgdmFsdWU6ICcyZycsIFxuICAgICAgICB3cml0YWJsZTogdHJ1ZSBcbiAgICAgIH0pXG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkobmF2aWdhdG9yLmNvbm5lY3Rpb24sICdkb3dubGluaycsIHsgXG4gICAgICAgIHZhbHVlOiAwLjUsIFxuICAgICAgICB3cml0YWJsZTogdHJ1ZSBcbiAgICAgIH0pXG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkobmF2aWdhdG9yLmNvbm5lY3Rpb24sICdzYXZlRGF0YScsIHsgXG4gICAgICAgIHZhbHVlOiB0cnVlLCBcbiAgICAgICAgd3JpdGFibGU6IHRydWUgXG4gICAgICB9KVxuICAgICAgXG4gICAgICBhd2FpdCBzZXJ2aWNlLmluaXRpYWxpemUoKVxuICAgICAgXG4gICAgICBjb25zdCByZWNvbW1lbmRhdGlvbnMgPSBzZXJ2aWNlLmdldFN5bmNSZWNvbW1lbmRhdGlvbnMoKVxuICAgICAgXG4gICAgICBleHBlY3QocmVjb21tZW5kYXRpb25zLmJhdGNoU2l6ZSkudG9CZUxlc3NUaGFuKDEwKVxuICAgICAgZXhwZWN0KHJlY29tbWVuZGF0aW9ucy5tYXhDb25jdXJyZW50T3BlcmF0aW9ucykudG9CZSgxKVxuICAgICAgZXhwZWN0KHJlY29tbWVuZGF0aW9ucy5lbmFibGVDb21wcmVzc2lvbikudG9CZSh0cnVlKVxuICAgICAgZXhwZWN0KHJlY29tbWVuZGF0aW9ucy5lbmFibGVCYWNrZ3JvdW5kU3luYykudG9CZShmYWxzZSlcbiAgICB9KVxuXG4gICAgaXQoJ+W6lOivpeS4uuemu+e6v+eKtuaAgeaPkOS+m+aOqOiNkCcsIGFzeW5jICgpID0+IHtcbiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShuYXZpZ2F0b3IsICdvbkxpbmUnLCB7IHZhbHVlOiBmYWxzZSwgd3JpdGFibGU6IHRydWUgfSlcbiAgICAgIFxuICAgICAgYXdhaXQgc2VydmljZS5pbml0aWFsaXplKClcbiAgICAgIFxuICAgICAgY29uc3QgcmVjb21tZW5kYXRpb25zID0gc2VydmljZS5nZXRTeW5jUmVjb21tZW5kYXRpb25zKClcbiAgICAgIFxuICAgICAgZXhwZWN0KHJlY29tbWVuZGF0aW9ucy5iYXRjaFNpemUpLnRvQmUoMClcbiAgICAgIGV4cGVjdChyZWNvbW1lbmRhdGlvbnMubWF4Q29uY3VycmVudE9wZXJhdGlvbnMpLnRvQmUoMClcbiAgICAgIGV4cGVjdChyZWNvbW1lbmRhdGlvbnMuZW5hYmxlQmFja2dyb3VuZFN5bmMpLnRvQmUoZmFsc2UpXG4gICAgfSlcbiAgfSlcblxuICBkZXNjcmliZSgn5Y6G5Y+y6K6w5b2V5ZKM57uf6K6hJywgKCkgPT4ge1xuICAgIGl0KCflupTor6XorrDlvZXnvZHnu5znirbmgIHljoblj7InLCBhc3luYyAoKSA9PiB7XG4gICAgICBhd2FpdCBzZXJ2aWNlLmluaXRpYWxpemUoKVxuICAgICAgc2VydmljZS5zdGFydE1vbml0b3JpbmcoKVxuICAgICAgXG4gICAgICAvLyDmqKHmi5/kuIDkupvnirbmgIHlj5jljJZcbiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShuYXZpZ2F0b3IsICdvbkxpbmUnLCB7IHZhbHVlOiBmYWxzZSB9KVxuICAgICAgd2luZG93LmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KCdvZmZsaW5lJykpXG4gICAgICBcbiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShuYXZpZ2F0b3IsICdvbkxpbmUnLCB7IHZhbHVlOiB0cnVlIH0pXG4gICAgICB3aW5kb3cuZGlzcGF0Y2hFdmVudChuZXcgRXZlbnQoJ29ubGluZScpKVxuICAgICAgXG4gICAgICBjb25zdCBoaXN0b3J5ID0gc2VydmljZS5nZXROZXR3b3JrSGlzdG9yeSgpXG4gICAgICBleHBlY3QoaGlzdG9yeS5sZW5ndGgpLnRvQmVHcmVhdGVyVGhhbigwKVxuICAgICAgZXhwZWN0KGhpc3RvcnlbaGlzdG9yeS5sZW5ndGggLSAxXS5pc09ubGluZSkudG9CZSh0cnVlKVxuICAgIH0pXG5cbiAgICBpdCgn5bqU6K+l5o+Q5L6b572R57uc57uf6K6h5L+h5oGvJywgYXN5bmMgKCkgPT4ge1xuICAgICAgYXdhaXQgc2VydmljZS5pbml0aWFsaXplKClcbiAgICAgIFxuICAgICAgLy8g5re75Yqg5LiA5Lqb5Y6G5Y+y6K6w5b2VXG4gICAgICBjb25zdCBub3cgPSBEYXRlLm5vdygpXG4gICAgICA7KHNlcnZpY2UgYXMgYW55KS5jb25uZWN0aW9uSGlzdG9yeS5wdXNoKFxuICAgICAgICB7IHRpbWVzdGFtcDogbm93IC0gMTAwMDAsIGxhdGVuY3k6IDEwMCwgYmFuZHdpZHRoOiAxMCB9LFxuICAgICAgICB7IHRpbWVzdGFtcDogbm93IC0gNTAwMCwgbGF0ZW5jeTogMTUwLCBiYW5kd2lkdGg6IDggfSxcbiAgICAgICAgeyB0aW1lc3RhbXA6IG5vdywgbGF0ZW5jeTogMTIwLCBiYW5kd2lkdGg6IDkgfVxuICAgICAgKVxuICAgICAgXG4gICAgICBjb25zdCBzdGF0cyA9IHNlcnZpY2UuZ2V0TmV0d29ya1N0YXRzKClcbiAgICAgIFxuICAgICAgZXhwZWN0KHN0YXRzLmF2ZXJhZ2VMYXRlbmN5KS50b0JlR3JlYXRlclRoYW4oMClcbiAgICAgIGV4cGVjdChzdGF0cy5hdmVyYWdlQmFuZHdpZHRoKS50b0JlR3JlYXRlclRoYW4oMClcbiAgICAgIGV4cGVjdChzdGF0cy51cHRpbWVQZXJjZW50YWdlKS50b0JlKDEwMClcbiAgICB9KVxuICB9KVxuXG4gIGRlc2NyaWJlKCfnm5HmjqfmjqfliLYnLCAoKSA9PiB7XG4gICAgaXQoJ+W6lOivpeiDveWkn+WQr+WKqOWSjOWBnOatouebkeaOpycsIGFzeW5jICgpID0+IHtcbiAgICAgIGF3YWl0IHNlcnZpY2UuaW5pdGlhbGl6ZSgpXG4gICAgICBcbiAgICAgIHNlcnZpY2Uuc3RhcnRNb25pdG9yaW5nKClcbiAgICAgIGV4cGVjdCgoc2VydmljZSBhcyBhbnkpLmlzTW9uaXRvcmluZykudG9CZSh0cnVlKVxuICAgICAgXG4gICAgICBzZXJ2aWNlLnN0b3BNb25pdG9yaW5nKClcbiAgICAgIGV4cGVjdCgoc2VydmljZSBhcyBhbnkpLmlzTW9uaXRvcmluZykudG9CZShmYWxzZSlcbiAgICB9KVxuXG4gICAgaXQoJ+W6lOivpeWcqOWBnOatouebkeaOp+aXtua4heeQhui1hOa6kCcsIGFzeW5jICgpID0+IHtcbiAgICAgIGF3YWl0IHNlcnZpY2UuaW5pdGlhbGl6ZSgpXG4gICAgICBzZXJ2aWNlLnN0YXJ0TW9uaXRvcmluZygpXG4gICAgICBcbiAgICAgIGNvbnN0IHJlbW92ZUV2ZW50TGlzdGVuZXJTcHkgPSBqZXN0LnNweU9uKHdpbmRvdywgJ3JlbW92ZUV2ZW50TGlzdGVuZXInKVxuICAgICAgXG4gICAgICBzZXJ2aWNlLnN0b3BNb25pdG9yaW5nKClcbiAgICAgIFxuICAgICAgZXhwZWN0KHJlbW92ZUV2ZW50TGlzdGVuZXJTcHkpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKCdvbmxpbmUnLCBleHBlY3QuYW55KEZ1bmN0aW9uKSlcbiAgICAgIGV4cGVjdChyZW1vdmVFdmVudExpc3RlbmVyU3B5KS50b0hhdmVCZWVuQ2FsbGVkV2l0aCgnb2ZmbGluZScsIGV4cGVjdC5hbnkoRnVuY3Rpb24pKVxuICAgIH0pXG4gIH0pXG5cbiAgZGVzY3JpYmUoJ+S6i+S7tuWkhOeQhicsICgpID0+IHtcbiAgICBpdCgn5bqU6K+l6IO95aSf5re75Yqg5ZKM56e76Zmk5LqL5Lu255uR5ZCs5ZmoJywgKCkgPT4ge1xuICAgICAgY29uc3QgbW9ja0xpc3RlbmVyID0gamVzdC5mbigpXG4gICAgICBjb25zdCB1bnN1YnNjcmliZSA9IHNlcnZpY2Uub25OZXR3b3JrQ2hhbmdlKG1vY2tMaXN0ZW5lcilcbiAgICAgIFxuICAgICAgZXhwZWN0KHR5cGVvZiB1bnN1YnNjcmliZSkudG9CZSgnZnVuY3Rpb24nKVxuICAgICAgXG4gICAgICAvLyDop6blj5Hkuovku7ZcbiAgICAgIHNlcnZpY2VbJ25vdGlmeUxpc3RlbmVycyddKHsgdHlwZTogJ3Rlc3QnLCBpc09ubGluZTogdHJ1ZSB9KVxuICAgICAgZXhwZWN0KG1vY2tMaXN0ZW5lcikudG9IYXZlQmVlbkNhbGxlZCgpXG4gICAgICBcbiAgICAgIC8vIOenu+mZpOebkeWQrOWZqFxuICAgICAgdW5zdWJzY3JpYmUoKVxuICAgICAgc2VydmljZVsnbm90aWZ5TGlzdGVuZXJzJ10oeyB0eXBlOiAndGVzdCcsIGlzT25saW5lOiB0cnVlIH0pXG4gICAgICBleHBlY3QobW9ja0xpc3RlbmVyKS50b0hhdmVCZWVuQ2FsbGVkVGltZXMoMSlcbiAgICB9KVxuXG4gICAgaXQoJ+W6lOivpeato+ehrumAmuefpeWkmuS4quebkeWQrOWZqCcsICgpID0+IHtcbiAgICAgIGNvbnN0IG1vY2tMaXN0ZW5lcjEgPSBqZXN0LmZuKClcbiAgICAgIGNvbnN0IG1vY2tMaXN0ZW5lcjIgPSBqZXN0LmZuKClcbiAgICAgIFxuICAgICAgc2VydmljZS5vbk5ldHdvcmtDaGFuZ2UobW9ja0xpc3RlbmVyMSlcbiAgICAgIHNlcnZpY2Uub25OZXR3b3JrQ2hhbmdlKG1vY2tMaXN0ZW5lcjIpXG4gICAgICBcbiAgICAgIGNvbnN0IGV2ZW50OiBOZXR3b3JrRXZlbnQgPSB7XG4gICAgICAgIHR5cGU6ICdzdGF0dXNfY2hhbmdlJyxcbiAgICAgICAgaXNPbmxpbmU6IGZhbHNlLFxuICAgICAgICBjb25uZWN0aW9uVHlwZTogJ25vbmUnLFxuICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCksXG4gICAgICAgIHF1YWxpdHk6IHsgbGV2ZWw6ICdvZmZsaW5lJywgc2NvcmU6IDAsIHN0YWJpbGl0eTogMCB9XG4gICAgICB9XG4gICAgICBcbiAgICAgIHNlcnZpY2VbJ25vdGlmeUxpc3RlbmVycyddKGV2ZW50KVxuICAgICAgXG4gICAgICBleHBlY3QobW9ja0xpc3RlbmVyMSkudG9IYXZlQmVlbkNhbGxlZFdpdGgoZXZlbnQpXG4gICAgICBleHBlY3QobW9ja0xpc3RlbmVyMikudG9IYXZlQmVlbkNhbGxlZFdpdGgoZXZlbnQpXG4gICAgfSlcbiAgfSlcblxuICBkZXNjcmliZSgn6ZSZ6K+v5aSE55CGJywgKCkgPT4ge1xuICAgIGl0KCflupTor6XlpITnkIbnvZHnu5zmtYvor5XkuK3nmoTlvILluLgnLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyDmqKHmi58gZmV0Y2gg5oqb5Ye65byC5bi4XG4gICAgICBnbG9iYWwuZmV0Y2ggPSBqZXN0LmZuKCkubW9ja0ltcGxlbWVudGF0aW9uKCgpID0+IHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdDb25uZWN0aW9uIHRpbWVvdXQnKVxuICAgICAgfSlcbiAgICAgIFxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgKHNlcnZpY2UgYXMgYW55KS50ZXN0Q29ubmVjdGlvbignaHR0cHM6Ly9hcGkuZXhhbXBsZS5jb20vaGVhbHRoJylcbiAgICAgIFxuICAgICAgZXhwZWN0KHJlc3VsdC5zdWNjZXNzKS50b0JlKGZhbHNlKVxuICAgICAgZXhwZWN0KHJlc3VsdC5lcnJvcikudG9CZSgnQ29ubmVjdGlvbiB0aW1lb3V0JylcbiAgICB9KVxuXG4gICAgaXQoJ+W6lOivpeWkhOeQhuaXoOaViOeahOi/nuaOpeS/oeaBrycsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIOaooeaLn+aXoOaViOeahOi/nuaOpeS/oeaBr1xuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG5hdmlnYXRvci5jb25uZWN0aW9uLCAnZWZmZWN0aXZlVHlwZScsIHsgXG4gICAgICAgIHZhbHVlOiAnaW52YWxpZC10eXBlJywgXG4gICAgICAgIHdyaXRhYmxlOiB0cnVlIFxuICAgICAgfSlcbiAgICAgIFxuICAgICAgYXdhaXQgc2VydmljZS5pbml0aWFsaXplKClcbiAgICAgIFxuICAgICAgY29uc3QgcXVhbGl0eSA9IHNlcnZpY2UuZ2V0TmV0d29ya1F1YWxpdHkoKVxuICAgICAgLy8g5bqU6K+l5L2/55So6buY6K6k5YC85oiW5ZCI55CG5Lyw6K6hXG4gICAgICBleHBlY3QocXVhbGl0eS5sZXZlbCkudG9CZURlZmluZWQoKVxuICAgICAgZXhwZWN0KHF1YWxpdHkuc2NvcmUpLnRvQmVHcmVhdGVyVGhhbk9yRXF1YWwoMClcbiAgICB9KVxuICB9KVxuXG4gIGRlc2NyaWJlKCfphY3nva7nrqHnkIYnLCAoKSA9PiB7XG4gICAgaXQoJ+W6lOivpeiDveWkn+abtOaWsOebkeaOp+mFjee9ricsICgpID0+IHtcbiAgICAgIGNvbnN0IG5ld0NvbmZpZyA9IHtcbiAgICAgICAgY2hlY2tJbnRlcnZhbDogNjAwMDAsXG4gICAgICAgIGVuZHBvaW50czogWydodHRwczovL2N1c3RvbS1lbmRwb2ludC5jb20vaGVhbHRoJ10sXG4gICAgICAgIHRlc3RUaW1lb3V0OiAxMDAwMCxcbiAgICAgICAgaGlzdG9yeVNpemU6IDEwMCxcbiAgICAgICAgZW5hYmxlTGF0ZW5jeVRyYWNraW5nOiB0cnVlLFxuICAgICAgICBlbmFibGVCYW5kd2lkdGhUcmFja2luZzogdHJ1ZSxcbiAgICAgICAgZW5hYmxlU3RhYmlsaXR5VHJhY2tpbmc6IHRydWVcbiAgICAgIH1cbiAgICAgIFxuICAgICAgc2VydmljZS51cGRhdGVDb25maWcobmV3Q29uZmlnKVxuICAgICAgXG4gICAgICAvLyDpqozor4HphY3nva7lt7Lmm7TmlrBcbiAgICAgIGV4cGVjdCgoc2VydmljZSBhcyBhbnkpLmNvbmZpZykudG9NYXRjaE9iamVjdChuZXdDb25maWcpXG4gICAgfSlcblxuICAgIGl0KCflupTor6Xpqozor4HphY3nva7lj4LmlbAnLCAoKSA9PiB7XG4gICAgICBjb25zdCBpbnZhbGlkQ29uZmlnID0ge1xuICAgICAgICBjaGVja0ludGVydmFsOiAtMTAwMCxcbiAgICAgICAgdGVzdFRpbWVvdXQ6IDBcbiAgICAgIH1cbiAgICAgIFxuICAgICAgZXhwZWN0KCgpID0+IHNlcnZpY2UudXBkYXRlQ29uZmlnKGludmFsaWRDb25maWcgYXMgYW55KSkudG9UaHJvdygpXG4gICAgfSlcbiAgfSlcbn0pIl0sInZlcnNpb24iOjN9