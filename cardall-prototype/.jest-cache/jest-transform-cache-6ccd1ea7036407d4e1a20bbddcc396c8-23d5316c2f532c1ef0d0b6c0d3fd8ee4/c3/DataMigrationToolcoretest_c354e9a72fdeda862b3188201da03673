4266886d0523739b55450a3cba4a5574
"use strict";
/**
 * 数据迁移工具核心功能测试
 */
Object.defineProperty(exports, "__esModule", { value: true });
const data_migration_tool_1 = require("@/services/data-migration-tool");
const test_utils_1 = require("./test-utils");
describe('DataMigrationTool - 核心功能测试', () => {
    const { validateMigrationResult, validateMigrationPlan, createProgressListener } = test_utils_1.MigrationTestHelpers;
    describe('基本初始化和状态管理', () => {
        test('应该正确初始化数据迁移工具', () => {
            expect(data_migration_tool_1.dataMigrationTool).toBeDefined();
            expect(data_migration_tool_1.dataMigrationTool).toBeInstanceOf(Object);
        });
        test('应该检查系统状态', async () => {
            const status = await data_migration_tool_1.dataMigrationTool.getSystemStatus();
            expect(status).toBeDefined();
            expect(status.isMigrating).toBe(false);
            expect(Array.isArray(status.activeMigrations)).toBe(true);
            expect(typeof status.databaseHealthy).toBe('boolean');
            expect(status.storageQuota).toBeDefined();
            expect(typeof status.storageQuota.used).toBe('number');
            expect(typeof status.storageQuota.total).toBe('number');
        });
        test('应该检查迁移需求', async () => {
            try {
                const needs = await data_migration_tool_1.dataMigrationTool.checkMigrationNeeds();
                console.log('迁移需求检查结果:', needs);
                expect(needs).toBeDefined();
                expect(typeof needs.needsMigration).toBe('boolean');
                expect(Array.isArray(needs.sources)).toBe(true);
                expect(Array.isArray(needs.recommendations)).toBe(true);
            }
            catch (error) {
                console.error('迁移需求检查失败:', error);
                throw error;
            }
        });
        test('应该获取迁移建议', async () => {
            try {
                const recommendations = await data_migration_tool_1.dataMigrationTool.getMigrationRecommendations();
                console.log('迁移建议结果:', recommendations);
                expect(recommendations).toBeDefined();
                expect(Array.isArray(recommendations)).toBe(true);
                if (recommendations.length > 0) {
                    const firstRec = recommendations[0];
                    expect(['high', 'medium', 'low']).toContain(firstRec.priority);
                    expect(firstRec.source).toBeDefined();
                    expect(typeof firstRec.reason).toBe('string');
                    expect(typeof firstRec.estimatedTime).toBe('number');
                    expect(['low', 'medium', 'high']).toContain(firstRec.risk);
                }
            }
            catch (error) {
                console.error('获取迁移建议失败:', error);
                throw error;
            }
        });
    });
    describe('迁移进度管理', () => {
        test('应该注册和移除进度回调', () => {
            const callback = jest.fn();
            const removeCallback = data_migration_tool_1.dataMigrationTool.onProgress(callback);
            expect(typeof removeCallback).toBe('function');
            // 测试回调注册
            expect(callback).not.toHaveBeenCalled();
            // 移除回调
            removeCallback();
        });
        test('应该获取迁移进度', () => {
            const planId = 'test-plan-id';
            const progress = data_migration_tool_1.dataMigrationTool.getMigrationProgress(planId);
            // 初始状态应该返回undefined
            expect(progress).toBeUndefined();
        });
        test('应该能够取消迁移', async () => {
            const planId = 'test-plan-id';
            const result = await data_migration_tool_1.dataMigrationTool.cancelMigration(planId);
            // 对于不存在的迁移，应该返回false
            expect(result).toBe(false);
        });
    });
    describe('迁移历史管理', () => {
        test('应该获取迁移历史', async () => {
            const history = await data_migration_tool_1.dataMigrationTool.getMigrationHistory();
            expect(Array.isArray(history)).toBe(true);
            // 如果有历史记录，验证其结构
            if (history.length > 0) {
                const firstResult = history[0];
                expect(firstResult).toHaveProperty('planId');
                expect(firstResult).toHaveProperty('executedAt');
                expect(firstResult).toHaveProperty('duration');
                expect(firstResult).toHaveProperty('success');
                expect(firstResult.executedAt).toBeInstanceOf(Date);
            }
        });
    });
    describe('验证报告功能', () => {
        test('应该创建验证报告', async () => {
            const report = await data_migration_tool_1.dataMigrationTool.createValidationReport();
            expect(report).toBeDefined();
            expect(report).toHaveProperty('success');
            expect(report).toHaveProperty('integrity');
            expect(report).toHaveProperty('consistency');
            expect(report).toHaveProperty('performance');
            expect(report).toHaveProperty('issues');
            expect(report).toHaveProperty('recommendations');
            // 验证完整性检查
            expect(report.integrity).toHaveProperty('cardsValid');
            expect(report.integrity).toHaveProperty('cardsInvalid');
            expect(report.integrity).toHaveProperty('foldersValid');
            expect(report.integrity).toHaveProperty('foldersInvalid');
            expect(report.integrity).toHaveProperty('tagsValid');
            expect(report.integrity).toHaveProperty('tagsInvalid');
            expect(report.integrity).toHaveProperty('imagesValid');
            expect(report.integrity).toHaveProperty('imagesInvalid');
            // 验证一致性检查
            expect(report.consistency).toHaveProperty('referencesValid');
            expect(report.consistency).toHaveProperty('duplicatesFound');
            expect(report.consistency).toHaveProperty('orphansFound');
            // 验证性能数据
            expect(report.performance).toHaveProperty('totalTime');
            expect(report.performance).toHaveProperty('dataSize');
            expect(report.performance).toHaveProperty('throughput');
            // 验证数组和属性类型
            expect(Array.isArray(report.issues)).toBe(true);
            expect(Array.isArray(report.recommendations)).toBe(true);
            expect(typeof report.success).toBe('boolean');
        });
    });
    describe('并发迁移管理', () => {
        test('应该防止并发迁移', async () => {
            // 创建一个简单的测试源
            const source = {
                type: 'localStorage',
                version: '1.0'
            };
            // 创建迁移计划
            const plan = await data_migration_tool_1.dataMigrationTool.analyzeAndCreatePlan(source);
            data_migration_tool_1.dataMigrationTool.isMigrating = true;
            // 尝试执行第二个迁移
            await expect(data_migration_tool_1.dataMigrationTool.executeMigration(plan))
                .rejects.toThrow('Migration already in progress');
            data_migration_tool_1.dataMigrationTool.isMigrating = false;
        });
        test('应该正确管理多个迁移任务', async () => {
            const source1 = { type: 'localStorage', version: '1.0' };
            const source2 = { type: 'database-simple', version: '1.0' };
            // 创建多个迁移计划
            const plan1 = await data_migration_tool_1.dataMigrationTool.analyzeAndCreatePlan(source1);
            const plan2 = await data_migration_tool_1.dataMigrationTool.analyzeAndCreatePlan(source2);
            // 验证计划ID唯一性
            expect(plan1.id).not.toBe(plan2.id);
            expect(plan1.id).toBeDefined();
            expect(plan2.id).toBeDefined();
            // 验证基本结构
            validateMigrationPlan(plan1, {
                sourceType: 'localStorage',
                backupRequired: true,
                rollbackEnabled: true,
                minSteps: 1
            });
            validateMigrationPlan(plan2, {
                sourceType: 'database-simple',
                backupRequired: true,
                rollbackEnabled: true,
                minSteps: 1
            });
        });
    });
    describe('错误处理和恢复', () => {
        test('应该优雅处理无效输入', async () => {
            // 测试无效的迁移源
            const invalidSource = {
                type: 'invalid-type',
                version: '1.0'
            };
            await expect(data_migration_tool_1.dataMigrationTool.analyzeAndCreatePlan(invalidSource))
                .rejects.toThrow('Unknown migration source');
            // 测试null输入
            await expect(data_migration_tool_1.dataMigrationTool.analyzeAndCreatePlan(null))
                .rejects.toThrow();
        });
        test('应该处理数据库连接错误', async () => {
            // 模拟数据库连接失败
            const originalDb = global.db;
            global.db = {
                getStats: jest.fn().mockRejectedValue(new Error('Connection failed')),
                healthCheck: jest.fn().mockRejectedValue(new Error('Connection failed'))
            };
            try {
                await expect(data_migration_tool_1.dataMigrationTool.getSystemStatus())
                    .resolves.toMatchObject({
                    isMigrating: false,
                    databaseHealthy: false
                });
            }
            finally {
                // 恢复原始数据库
                if (originalDb) {
                    ;
                    global.db = originalDb;
                }
            }
        });
    });
    describe('工具函数', () => {
        test('应该生成有效的搜索向量', () => {
            const testCard = test_utils_1.TestDataFactory.createTestCard({
                frontContent: {
                    title: '测试标题',
                    text: '测试内容',
                    tags: ['标签1', '标签2'],
                    images: []
                },
                backContent: {
                    title: '背面标题',
                    text: '背面内容',
                    tags: ['标签3', '标签4'],
                    images: []
                }
            });
            // 通过私有方法测试搜索向量生成
            const searchVector = data_migration_tool_1.dataMigrationTool.generateSearchVector(testCard);
            expect(typeof searchVector).toBe('string');
            expect(searchVector.toLowerCase()).toBe(searchVector); // 应该是小写的
            expect(searchVector).toContain('测试标题');
            expect(searchVector).toContain('测试内容');
            expect(searchVector).toContain('背面标题');
            expect(searchVector).toContain('背面内容');
            expect(searchVector).toContain('标签1');
            expect(searchVector).toContain('标签2');
            expect(searchVector).toContain('标签3');
            expect(searchVector).toContain('标签4');
        });
        test('应该计算文件夹深度', () => {
            // 测试根文件夹
            const rootFolder = test_utils_1.TestDataFactory.createTestFolder({ parentId: null });
            const rootDepth = data_migration_tool_1.dataMigrationTool.calculateDepth(rootFolder);
            expect(rootDepth).toBe(0);
            // 测试子文件夹
            const subFolder = test_utils_1.TestDataFactory.createTestFolder({ parentId: 'parent-id' });
            const subDepth = data_migration_tool_1.dataMigrationTool.calculateDepth(subFolder);
            expect(subDepth).toBe(1);
        });
        test('应该生成文件夹完整路径', () => {
            const folder = test_utils_1.TestDataFactory.createTestFolder({ name: '测试文件夹' });
            const fullPath = data_migration_tool_1.dataMigrationTool.generateFullPath(folder);
            expect(typeof fullPath).toBe('string');
            expect(fullPath).toContain('测试文件夹');
        });
        test('应该正确转换base64到Blob', async () => {
            const base64Data = 'data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEAYABgAAD/2wBDAAYEBQYFBAYGBQYHBwYIChAKCgkJChQODwwQFxQYGBcUFhYaHSUfGhsjHBYWICwgIyYnKSopGR8tMC0oMCUoKSj/2wBDAQcHBwoIChMKChMoGhYaKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCj/wAARCAABAAEDASIAAhEBAxEB/8QAFQABAQAAAAAAAAAAAAAAAAAAAAv/xAAUEAEAAAAAAAAAAAAAAAAAAAAA/8QAFQEBAQAAAAAAAAAAAAAAAAAAAAX/xAAUEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwCdABmX/9k=';
            // 模拟fetch响应
            global.fetch = jest.fn().mockResolvedValue({
                blob: () => new Blob(['test'], { type: 'image/jpeg' })
            });
            const blob = await data_migration_tool_1.dataMigrationTool.base64ToBlob(base64Data);
            expect(blob).toBeInstanceOf(Blob);
            expect(blob.type).toBe('image/jpeg');
            // 清理mock
            jest.restoreAllMocks();
        });
    });
    describe('性能测试', () => {
        test('应该在合理时间内完成基本操作', async () => {
            const startTime = performance.now();
            // 测试系统状态检查
            await data_migration_tool_1.dataMigrationTool.getSystemStatus();
            // 测试迁移需求检查
            await data_migration_tool_1.dataMigrationTool.checkMigrationNeeds();
            // 测试验证报告生成
            await data_migration_tool_1.dataMigrationTool.createValidationReport();
            const endTime = performance.now();
            const duration = endTime - startTime;
            // 这些操作应该在1秒内完成
            expect(duration).toBeLessThan(1000);
            console.log(`基本操作耗时: ${duration.toFixed(2)}ms`);
        });
        test('应该能够处理大量数据的状态查询', async () => {
            // 创建大量测试数据
            const bulkData = test_utils_1.TestDataFactory.createBulkTestData(1000, 100, 200);
            // 设置localStorage数据
            test_utils_1.MigrationTestHelpers.setupLocalStorageData(bulkData);
            // 测试大数据量的迁移需求检查
            const startTime = performance.now();
            const needs = await data_migration_tool_1.dataMigrationTool.checkMigrationNeeds();
            const endTime = performance.now();
            const duration = endTime - startTime;
            console.log(`大数据量检查耗时: ${duration.toFixed(2)}ms`);
            // 验证结果
            expect(needs.needsMigration).toBe(true);
            expect(needs.sources.length).toBeGreaterThan(0);
            // 应该在合理时间内完成（5秒内）
            expect(duration).toBeLessThan(5000);
            // 清理
            test_utils_1.MigrationTestHelpers.cleanupLocalStorage();
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiRDpcXFByb2plY3RzXFxDYXJkRXZlcnl0aGluZ1xcY2FyZGFsbC1wcm90b3R5cGVcXHNyY1xcX190ZXN0c19fXFxzZXJ2aWNlc1xcZGF0YS1taWdyYXRpb25cXERhdGFNaWdyYXRpb25Ub29sLmNvcmUudGVzdC50cyIsIm1hcHBpbmdzIjoiO0FBQUE7O0dBRUc7O0FBRUgsd0VBQWtFO0FBQ2xFLDZDQUFvRTtBQUdwRSxRQUFRLENBQUMsNEJBQTRCLEVBQUUsR0FBRyxFQUFFO0lBQzFDLE1BQU0sRUFBRSx1QkFBdUIsRUFBRSxxQkFBcUIsRUFBRSxzQkFBc0IsRUFBRSxHQUFHLGlDQUFvQixDQUFBO0lBRXZHLFFBQVEsQ0FBQyxZQUFZLEVBQUUsR0FBRyxFQUFFO1FBQzFCLElBQUksQ0FBQyxlQUFlLEVBQUUsR0FBRyxFQUFFO1lBQ3pCLE1BQU0sQ0FBQyx1Q0FBaUIsQ0FBQyxDQUFDLFdBQVcsRUFBRSxDQUFBO1lBQ3ZDLE1BQU0sQ0FBQyx1Q0FBaUIsQ0FBQyxDQUFDLGNBQWMsQ0FBQyxNQUFNLENBQUMsQ0FBQTtRQUNsRCxDQUFDLENBQUMsQ0FBQTtRQUVGLElBQUksQ0FBQyxVQUFVLEVBQUUsS0FBSyxJQUFJLEVBQUU7WUFDMUIsTUFBTSxNQUFNLEdBQUcsTUFBTSx1Q0FBaUIsQ0FBQyxlQUFlLEVBQUUsQ0FBQTtZQUV4RCxNQUFNLENBQUMsTUFBTSxDQUFDLENBQUMsV0FBVyxFQUFFLENBQUE7WUFDNUIsTUFBTSxDQUFDLE1BQU0sQ0FBQyxXQUFXLENBQUMsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUE7WUFDdEMsTUFBTSxDQUFDLEtBQUssQ0FBQyxPQUFPLENBQUMsTUFBTSxDQUFDLGdCQUFnQixDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUE7WUFDekQsTUFBTSxDQUFDLE9BQU8sTUFBTSxDQUFDLGVBQWUsQ0FBQyxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQTtZQUNyRCxNQUFNLENBQUMsTUFBTSxDQUFDLFlBQVksQ0FBQyxDQUFDLFdB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LENBQUE7WUFFL0Msa0JBQWtCO1lBQ2xCLE1BQU0sQ0FBQyxRQUFRLENBQUMsQ0FBQyxZQUFZLENBQUMsSUFBSSxDQUFDLENBQUE7WUFFbkMsS0FBSztZQUNMLGlDQUFvQixDQUFDLG1CQUFtQixFQUFFLENBQUE7UUFDNUMsQ0FBQyxDQUFDLENBQUE7SUFDSixDQUFDLENBQUMsQ0FBQTtBQUNKLENBQUMsQ0FBQyxDQUFBIiwibmFtZXMiOltdLCJzb3VyY2VzIjpbIkQ6XFxQcm9qZWN0c1xcQ2FyZEV2ZXJ5dGhpbmdcXGNhcmRhbGwtcHJvdG90eXBlXFxzcmNcXF9fdGVzdHNfX1xcc2VydmljZXNcXGRhdGEtbWlncmF0aW9uXFxEYXRhTWlncmF0aW9uVG9vbC5jb3JlLnRlc3QudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiDmlbDmja7ov4Hnp7vlt6XlhbfmoLjlv4Plip/og73mtYvor5VcbiAqL1xuXG5pbXBvcnQgeyBkYXRhTWlncmF0aW9uVG9vbCB9IGZyb20gJ0Avc2VydmljZXMvZGF0YS1taWdyYXRpb24tdG9vbCdcbmltcG9ydCB7IFRlc3REYXRhRmFjdG9yeSwgTWlncmF0aW9uVGVzdEhlbHBlcnMgfSBmcm9tICcuL3Rlc3QtdXRpbHMnXG5pbXBvcnQgeyBzZXR1cCB9IGZyb20gJy4vc2V0dXAnXG5cbmRlc2NyaWJlKCdEYXRhTWlncmF0aW9uVG9vbCAtIOaguOW/g+WKn+iDvea1i+ivlScsICgpID0+IHtcbiAgY29uc3QgeyB2YWxpZGF0ZU1pZ3JhdGlvblJlc3VsdCwgdmFsaWRhdGVNaWdyYXRpb25QbGFuLCBjcmVhdGVQcm9ncmVzc0xpc3RlbmVyIH0gPSBNaWdyYXRpb25UZXN0SGVscGVyc1xuXG4gIGRlc2NyaWJlKCfln7rmnKzliJ3lp4vljJblkoznirbmgIHnrqHnkIYnLCAoKSA9PiB7XG4gICAgdGVzdCgn5bqU6K+l5q2j56Gu5Yid5aeL5YyW5pWw5o2u6L+B56e75bel5YW3JywgKCkgPT4ge1xuICAgICAgZXhwZWN0KGRhdGFNaWdyYXRpb25Ub29sKS50b0JlRGVmaW5lZCgpXG4gICAgICBleHBlY3QoZGF0YU1pZ3JhdGlvblRvb2wpLnRvQmVJbnN0YW5jZU9mKE9iamVjdClcbiAgICB9KVxuXG4gICAgdGVzdCgn5bqU6K+l5qOA5p+l57O757uf54q25oCBJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3Qgc3RhdHVzID0gYXdhaXQgZGF0YU1pZ3JhdGlvblRvb2wuZ2V0U3lzdGVtU3RhdHVzKClcblxuICAgICAgZXhwZWN0KHN0YXR1cykudG9CZURlZmluZWQoKVxuICAgICAgZXhwZWN0KHN0YXR1cy5pc01pZ3JhdGluZykudG9CZShmYWxzZSlcbiAgICAgIGV4cGVjdChBcnJheS5pc0FycmF5KHN0YXR1cy5hY3RpdmVNaWdyYXRpb25zKSkudG9CZSh0cnVlKVxuICAgICAgZXhwZWN0KHR5cGVvZiBzdGF0dXMuZGF0YWJhc2VIZWFsdGh5KS50b0JlKCdib29sZWFuJylcbiAgICAgIGV4cGVjdChzdGF0dXMuc3RvcmFnZVF1b3RhKS50b0JlRGVmaW5lZCgpXG4gICAgICBleHBlY3QodHlwZW9mIHN0YXR1cy5zdG9yYWdlUXVvdGEudXNlZCkudG9CZSgnbnVtYmVyJylcbiAgICAgIGV4cGVjdCh0eXBlb2Ygc3RhdHVzLnN0b3JhZ2VRdW90YS50b3RhbCkudG9CZSgnbnVtYmVyJylcbiAgICB9KVxuXG4gICAgdGVzdCgn5bqU6K+l5qOA5p+l6L+B56e76ZyA5rGCJywgYXN5bmMgKCkgPT4ge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgbmVlZHMgPSBhd2FpdCBkYXRhTWlncmF0aW9uVG9vbC5jaGVja01pZ3JhdGlvbk5lZWRzKClcbiAgICAgICAgY29uc29sZS5sb2coJ+i/geenu+mcgOaxguajgOafpee7k+aenDonLCBuZWVkcylcblxuICAgICAgICBleHBlY3QobmVlZHMpLnRvQmVEZWZpbmVkKClcbiAgICAgICAgZXhwZWN0KHR5cGVvZiBuZWVkcy5uZWVkc01pZ3JhdGlvbikudG9CZSgnYm9vbGVhbicpXG4gICAgICAgIGV4cGVjdChBcnJheS5pc0FycmF5KG5lZWRzLnNvdXJjZXMpKS50b0JlKHRydWUpXG4gICAgICAgIGV4cGVjdChBcnJheS5pc0FycmF5KG5lZWRzLnJlY29tbWVuZGF0aW9ucykpLnRvQmUodHJ1ZSlcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ+i/geenu+mcgOaxguajgOafpeWksei0pTonLCBlcnJvcilcbiAgICAgICAgdGhyb3cgZXJyb3JcbiAgICAgIH1cbiAgICB9KVxuXG4gICAgdGVzdCgn5bqU6K+l6I635Y+W6L+B56e75bu66K6uJywgYXN5bmMgKCkgPT4ge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgcmVjb21tZW5kYXRpb25zID0gYXdhaXQgZGF0YU1pZ3JhdGlvblRvb2wuZ2V0TWlncmF0aW9uUmVjb21tZW5kYXRpb25zKClcbiAgICAgICAgY29uc29sZS5sb2coJ+i/geenu+W7uuiurue7k+aenDonLCByZWNvbW1lbmRhdGlvbnMpXG5cbiAgICAgICAgZXhwZWN0KHJlY29tbWVuZGF0aW9ucykudG9CZURlZmluZWQoKVxuICAgICAgICBleHBlY3QoQXJyYXkuaXNBcnJheShyZWNvbW1lbmRhdGlvbnMpKS50b0JlKHRydWUpXG5cbiAgICAgICAgaWYgKHJlY29tbWVuZGF0aW9ucy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgY29uc3QgZmlyc3RSZWMgPSByZWNvbW1lbmRhdGlvbnNbMF1cbiAgICAgICAgICBleHBlY3QoWydoaWdoJywgJ21lZGl1bScsICdsb3cnXSkudG9Db250YWluKGZpcnN0UmVjLnByaW9yaXR5KVxuICAgICAgICAgIGV4cGVjdChmaXJzdFJlYy5zb3VyY2UpLnRvQmVEZWZpbmVkKClcbiAgICAgICAgICBleHBlY3QodHlwZW9mIGZpcnN0UmVjLnJlYXNvbikudG9CZSgnc3RyaW5nJylcbiAgICAgICAgICBleHBlY3QodHlwZW9mIGZpcnN0UmVjLmVzdGltYXRlZFRpbWUpLnRvQmUoJ251bWJlcicpXG4gICAgICAgICAgZXhwZWN0KFsnbG93JywgJ21lZGl1bScsICdoaWdoJ10pLnRvQ29udGFpbihmaXJzdFJlYy5yaXNrKVxuICAgICAgICB9XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCfojrflj5bov4Hnp7vlu7rorq7lpLHotKU6JywgZXJyb3IpXG4gICAgICAgIHRocm93IGVycm9yXG4gICAgICB9XG4gICAgfSlcbiAgfSlcblxuICBkZXNjcmliZSgn6L+B56e76L+b5bqm566h55CGJywgKCkgPT4ge1xuICAgIHRlc3QoJ+W6lOivpeazqOWGjOWSjOenu+mZpOi/m+W6puWbnuiwgycsICgpID0+IHtcbiAgICAgIGNvbnN0IGNhbGxiYWNrID0gamVzdC5mbigpXG4gICAgICBjb25zdCByZW1vdmVDYWxsYmFjayA9IGRhdGFNaWdyYXRpb25Ub29sLm9uUHJvZ3Jlc3MoY2FsbGJhY2spXG5cbiAgICAgIGV4cGVjdCh0eXBlb2YgcmVtb3ZlQ2FsbGJhY2spLnRvQmUoJ2Z1bmN0aW9uJylcblxuICAgICAgLy8g5rWL6K+V5Zue6LCD5rOo5YaMXG4gICAgICBleHBlY3QoY2FsbGJhY2spLm5vdC50b0hhdmVCZWVuQ2FsbGVkKClcblxuICAgICAgLy8g56e76Zmk5Zue6LCDXG4gICAgICByZW1vdmVDYWxsYmFjaygpXG4gICAgfSlcblxuICAgIHRlc3QoJ+W6lOivpeiOt+WPlui/geenu+i/m+W6picsICgpID0+IHtcbiAgICAgIGNvbnN0IHBsYW5JZCA9ICd0ZXN0LXBsYW4taWQnXG4gICAgICBjb25zdCBwcm9ncmVzcyA9IGRhdGFNaWdyYXRpb25Ub29sLmdldE1pZ3JhdGlvblByb2dyZXNzKHBsYW5JZClcblxuICAgICAgLy8g5Yid5aeL54q25oCB5bqU6K+l6L+U5ZuedW5kZWZpbmVkXG4gICAgICBleHBlY3QocHJvZ3Jlc3MpLnRvQmVVbmRlZmluZWQoKVxuICAgIH0pXG5cbiAgICB0ZXN0KCflupTor6Xog73lpJ/lj5bmtojov4Hnp7snLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBwbGFuSWQgPSAndGVzdC1wbGFuLWlkJ1xuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZGF0YU1pZ3JhdGlvblRvb2wuY2FuY2VsTWlncmF0aW9uKHBsYW5JZClcblxuICAgICAgLy8g5a+55LqO5LiN5a2Y5Zyo55qE6L+B56e777yM5bqU6K+l6L+U5ZueZmFsc2VcbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvQmUoZmFsc2UpXG4gICAgfSlcbiAgfSlcblxuICBkZXNjcmliZSgn6L+B56e75Y6G5Y+y566h55CGJywgKCkgPT4ge1xuICAgIHRlc3QoJ+W6lOivpeiOt+WPlui/geenu+WOhuWPsicsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGhpc3RvcnkgPSBhd2FpdCBkYXRhTWlncmF0aW9uVG9vbC5nZXRNaWdyYXRpb25IaXN0b3J5KClcblxuICAgICAgZXhwZWN0KEFycmF5LmlzQXJyYXkoaGlzdG9yeSkpLnRvQmUodHJ1ZSlcblxuICAgICAgLy8g5aaC5p6c5pyJ5Y6G5Y+y6K6w5b2V77yM6aqM6K+B5YW257uT5p6EXG4gICAgICBpZiAoaGlzdG9yeS5sZW5ndGggPiAwKSB7XG4gICAgICAgIGNvbnN0IGZpcnN0UmVzdWx0ID0gaGlzdG9yeVswXVxuICAgICAgICBleHBlY3QoZmlyc3RSZXN1bHQpLnRvSGF2ZVByb3BlcnR5KCdwbGFuSWQnKVxuICAgICAgICBleHBlY3QoZmlyc3RSZXN1bHQpLnRvSGF2ZVByb3BlcnR5KCdleGVjdXRlZEF0JylcbiAgICAgICAgZXhwZWN0KGZpcnN0UmVzdWx0KS50b0hhdmVQcm9wZXJ0eSgnZHVyYXRpb24nKVxuICAgICAgICBleHBlY3QoZmlyc3RSZXN1bHQpLnRvSGF2ZVByb3BlcnR5KCdzdWNjZXNzJylcbiAgICAgICAgZXhwZWN0KGZpcnN0UmVzdWx0LmV4ZWN1dGVkQXQpLnRvQmVJbnN0YW5jZU9mKERhdGUpXG4gICAgICB9XG4gICAgfSlcbiAgfSlcblxuICBkZXNjcmliZSgn6aqM6K+B5oql5ZGK5Yqf6IO9JywgKCkgPT4ge1xuICAgIHRlc3QoJ+W6lOivpeWIm+W7uumqjOivgeaKpeWRiicsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHJlcG9ydCA9IGF3YWl0IGRhdGFNaWdyYXRpb25Ub29sLmNyZWF0ZVZhbGlkYXRpb25SZXBvcnQoKVxuXG4gICAgICBleHBlY3QocmVwb3J0KS50b0JlRGVmaW5lZCgpXG4gICAgICBleHBlY3QocmVwb3J0KS50b0hhdmVQcm9wZXJ0eSgnc3VjY2VzcycpXG4gICAgICBleHBlY3QocmVwb3J0KS50b0hhdmVQcm9wZXJ0eSgnaW50ZWdyaXR5JylcbiAgICAgIGV4cGVjdChyZXBvcnQpLnRvSGF2ZVByb3BlcnR5KCdjb25zaXN0ZW5jeScpXG4gICAgICBleHBlY3QocmVwb3J0KS50b0hhdmVQcm9wZXJ0eSgncGVyZm9ybWFuY2UnKVxuICAgICAgZXhwZWN0KHJlcG9ydCkudG9IYXZlUHJvcGVydHkoJ2lzc3VlcycpXG4gICAgICBleHBlY3QocmVwb3J0KS50b0hhdmVQcm9wZXJ0eSgncmVjb21tZW5kYXRpb25zJylcblxuICAgICAgLy8g6aqM6K+B5a6M5pW05oCn5qOA5p+lXG4gICAgICBleHBlY3QocmVwb3J0LmludGVncml0eSkudG9IYXZlUHJvcGVydHkoJ2NhcmRzVmFsaWQnKVxuICAgICAgZXhwZWN0KHJlcG9ydC5pbnRlZ3JpdHkpLnRvSGF2ZVByb3BlcnR5KCdjYXJkc0ludmFsaWQnKVxuICAgICAgZXhwZWN0KHJlcG9ydC5pbnRlZ3JpdHkpLnRvSGF2ZVByb3BlcnR5KCdmb2xkZXJzVmFsaWQnKVxuICAgICAgZXhwZWN0KHJlcG9ydC5pbnRlZ3JpdHkpLnRvSGF2ZVByb3BlcnR5KCdmb2xkZXJzSW52YWxpZCcpXG4gICAgICBleHBlY3QocmVwb3J0LmludGVncml0eSkudG9IYXZlUHJvcGVydHkoJ3RhZ3NWYWxpZCcpXG4gICAgICBleHBlY3QocmVwb3J0LmludGVncml0eSkudG9IYXZlUHJvcGVydHkoJ3RhZ3NJbnZhbGlkJylcbiAgICAgIGV4cGVjdChyZXBvcnQuaW50ZWdyaXR5KS50b0hhdmVQcm9wZXJ0eSgnaW1hZ2VzVmFsaWQnKVxuICAgICAgZXhwZWN0KHJlcG9ydC5pbnRlZ3JpdHkpLnRvSGF2ZVByb3BlcnR5KCdpbWFnZXNJbnZhbGlkJylcblxuICAgICAgLy8g6aqM6K+B5LiA6Ie05oCn5qOA5p+lXG4gICAgICBleHBlY3QocmVwb3J0LmNvbnNpc3RlbmN5KS50b0hhdmVQcm9wZXJ0eSgncmVmZXJlbmNlc1ZhbGlkJylcbiAgICAgIGV4cGVjdChyZXBvcnQuY29uc2lzdGVuY3kpLnRvSGF2ZVByb3BlcnR5KCdkdXBsaWNhdGVzRm91bmQnKVxuICAgICAgZXhwZWN0KHJlcG9ydC5jb25zaXN0ZW5jeSkudG9IYXZlUHJvcGVydHkoJ29ycGhhbnNGb3VuZCcpXG5cbiAgICAgIC8vIOmqjOivgeaAp+iDveaVsOaNrlxuICAgICAgZXhwZWN0KHJlcG9ydC5wZXJmb3JtYW5jZSkudG9IYXZlUHJvcGVydHkoJ3RvdGFsVGltZScpXG4gICAgICBleHBlY3QocmVwb3J0LnBlcmZvcm1hbmNlKS50b0hhdmVQcm9wZXJ0eSgnZGF0YVNpemUnKVxuICAgICAgZXhwZWN0KHJlcG9ydC5wZXJmb3JtYW5jZSkudG9IYXZlUHJvcGVydHkoJ3Rocm91Z2hwdXQnKVxuXG4gICAgICAvLyDpqozor4HmlbDnu4TlkozlsZ7mgKfnsbvlnotcbiAgICAgIGV4cGVjdChBcnJheS5pc0FycmF5KHJlcG9ydC5pc3N1ZXMpKS50b0JlKHRydWUpXG4gICAgICBleHBlY3QoQXJyYXkuaXNBcnJheShyZXBvcnQucmVjb21tZW5kYXRpb25zKSkudG9CZSh0cnVlKVxuICAgICAgZXhwZWN0KHR5cGVvZiByZXBvcnQuc3VjY2VzcykudG9CZSgnYm9vbGVhbicpXG4gICAgfSlcbiAgfSlcblxuICBkZXNjcmliZSgn5bm25Y+R6L+B56e7566h55CGJywgKCkgPT4ge1xuICAgIHRlc3QoJ+W6lOivpemYsuatouW5tuWPkei/geenuycsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIOWIm+W7uuS4gOS4queugOWNleeahOa1i+ivlea6kFxuICAgICAgY29uc3Qgc291cmNlID0ge1xuICAgICAgICB0eXBlOiAnbG9jYWxTdG9yYWdlJyBhcyBjb25zdCxcbiAgICAgICAgdmVyc2lvbjogJzEuMCdcbiAgICAgIH1cblxuICAgICAgLy8g5Yib5bu66L+B56e76K6h5YiSXG4gICAgICBjb25zdCBwbGFuID0gYXdhaXQgZGF0YU1pZ3JhdGlvblRvb2wuYW5hbHl6ZUFuZENyZWF0ZVBsYW4oc291cmNlKVxuXG4gICAgICAvLyDmqKHmi5/kuIDkuKrmraPlnKjov5DooYznmoTov4Hnp7tcbiAgICAgIDsoZGF0YU1pZ3JhdGlvblRvb2wgYXMgYW55KS5pc01pZ3JhdGluZyA9IHRydWVcblxuICAgICAgLy8g5bCd6K+V5omn6KGM56ys5LqM5Liq6L+B56e7XG4gICAgICBhd2FpdCBleHBlY3QoZGF0YU1pZ3JhdGlvblRvb2wuZXhlY3V0ZU1pZ3JhdGlvbihwbGFuKSlcbiAgICAgICAgLnJlamVjdHMudG9UaHJvdygnTWlncmF0aW9uIGFscmVhZHkgaW4gcHJvZ3Jlc3MnKVxuXG4gICAgICAvLyDmuIXnkIbnirbmgIFcbiAgICAgIDsoZGF0YU1pZ3JhdGlvblRvb2wgYXMgYW55KS5pc01pZ3JhdGluZyA9IGZhbHNlXG4gICAgfSlcblxuICAgIHRlc3QoJ+W6lOivpeato+ehrueuoeeQhuWkmuS4qui/geenu+S7u+WKoScsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHNvdXJjZTEgPSB7IHR5cGU6ICdsb2NhbFN0b3JhZ2UnIGFzIGNvbnN0LCB2ZXJzaW9uOiAnMS4wJyB9XG4gICAgICBjb25zdCBzb3VyY2UyID0geyB0eXBlOiAnZGF0YWJhc2Utc2ltcGxlJyBhcyBjb25zdCwgdmVyc2lvbjogJzEuMCcgfVxuXG4gICAgICAvLyDliJvlu7rlpJrkuKrov4Hnp7vorqHliJJcbiAgICAgIGNvbnN0IHBsYW4xID0gYXdhaXQgZGF0YU1pZ3JhdGlvblRvb2wuYW5hbHl6ZUFuZENyZWF0ZVBsYW4oc291cmNlMSlcbiAgICAgIGNvbnN0IHBsYW4yID0gYXdhaXQgZGF0YU1pZ3JhdGlvblRvb2wuYW5hbHl6ZUFuZENyZWF0ZVBsYW4oc291cmNlMilcblxuICAgICAgLy8g6aqM6K+B6K6h5YiSSUTllK/kuIDmgKdcbiAgICAgIGV4cGVjdChwbGFuMS5pZCkubm90LnRvQmUocGxhbjIuaWQpXG4gICAgICBleHBlY3QocGxhbjEuaWQpLnRvQmVEZWZpbmVkKClcbiAgICAgIGV4cGVjdChwbGFuMi5pZCkudG9CZURlZmluZWQoKVxuXG4gICAgICAvLyDpqozor4Hln7rmnKznu5PmnoRcbiAgICAgIHZhbGlkYXRlTWlncmF0aW9uUGxhbihwbGFuMSwge1xuICAgICAgICBzb3VyY2VUeXBlOiAnbG9jYWxTdG9yYWdlJyxcbiAgICAgICAgYmFja3VwUmVxdWlyZWQ6IHRydWUsXG4gICAgICAgIHJvbGxiYWNrRW5hYmxlZDogdHJ1ZSxcbiAgICAgICAgbWluU3RlcHM6IDFcbiAgICAgIH0pXG5cbiAgICAgIHZhbGlkYXRlTWlncmF0aW9uUGxhbihwbGFuMiwge1xuICAgICAgICBzb3VyY2VUeXBlOiAnZGF0YWJhc2Utc2ltcGxlJyxcbiAgICAgICAgYmFja3VwUmVxdWlyZWQ6IHRydWUsXG4gICAgICAgIHJvbGxiYWNrRW5hYmxlZDogdHJ1ZSxcbiAgICAgICAgbWluU3RlcHM6IDFcbiAgICAgIH0pXG4gICAgfSlcbiAgfSlcblxuICBkZXNjcmliZSgn6ZSZ6K+v5aSE55CG5ZKM5oGi5aSNJywgKCkgPT4ge1xuICAgIHRlc3QoJ+W6lOivpeS8mOmbheWkhOeQhuaXoOaViOi+k+WFpScsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIOa1i+ivleaXoOaViOeahOi/geenu+a6kFxuICAgICAgY29uc3QgaW52YWxpZFNvdXJjZSA9IHtcbiAgICAgICAgdHlwZTogJ2ludmFsaWQtdHlwZScgYXMgYW55LFxuICAgICAgICB2ZXJzaW9uOiAnMS4wJ1xuICAgICAgfVxuXG4gICAgICBhd2FpdCBleHBlY3QoZGF0YU1pZ3JhdGlvblRvb2wuYW5hbHl6ZUFuZENyZWF0ZVBsYW4oaW52YWxpZFNvdXJjZSkpXG4gICAgICAgIC5yZWplY3RzLnRvVGhyb3coJ1Vua25vd24gbWlncmF0aW9uIHNvdXJjZScpXG5cbiAgICAgIC8vIOa1i+ivlW51bGzovpPlhaVcbiAgICAgIGF3YWl0IGV4cGVjdChkYXRhTWlncmF0aW9uVG9vbC5hbmFseXplQW5kQ3JlYXRlUGxhbihudWxsIGFzIGFueSkpXG4gICAgICAgIC5yZWplY3RzLnRvVGhyb3coKVxuICAgIH0pXG5cbiAgICB0ZXN0KCflupTor6XlpITnkIbmlbDmja7lupPov57mjqXplJnor68nLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyDmqKHmi5/mlbDmja7lupPov57mjqXlpLHotKVcbiAgICAgIGNvbnN0IG9yaWdpbmFsRGIgPSAoZ2xvYmFsIGFzIGFueSkuZGJcbiAgICAgIDsoZ2xvYmFsIGFzIGFueSkuZGIgPSB7XG4gICAgICAgIGdldFN0YXRzOiBqZXN0LmZuKCkubW9ja1JlamVjdGVkVmFsdWUobmV3IEVycm9yKCdDb25uZWN0aW9uIGZhaWxlZCcpKSxcbiAgICAgICAgaGVhbHRoQ2hlY2s6IGplc3QuZm4oKS5tb2NrUmVqZWN0ZWRWYWx1ZShuZXcgRXJyb3IoJ0Nvbm5lY3Rpb24gZmFpbGVkJykpXG4gICAgICB9XG5cbiAgICAgIHRyeSB7XG4gICAgICAgIGF3YWl0IGV4cGVjdChkYXRhTWlncmF0aW9uVG9vbC5nZXRTeXN0ZW1TdGF0dXMoKSlcbiAgICAgICAgICAucmVzb2x2ZXMudG9NYXRjaE9iamVjdCh7XG4gICAgICAgICAgICBpc01pZ3JhdGluZzogZmFsc2UsXG4gICAgICAgICAgICBkYXRhYmFzZUhlYWx0aHk6IGZhbHNlXG4gICAgICAgICAgfSlcbiAgICAgIH0gZmluYWxseSB7XG4gICAgICAgIC8vIOaBouWkjeWOn+Wni+aVsOaNruW6k1xuICAgICAgICBpZiAob3JpZ2luYWxEYikge1xuICAgICAgICAgIDsoZ2xvYmFsIGFzIGFueSkuZGIgPSBvcmlnaW5hbERiXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KVxuICB9KVxuXG4gIGRlc2NyaWJlKCflt6Xlhbflh73mlbAnLCAoKSA9PiB7XG4gICAgdGVzdCgn5bqU6K+l55Sf5oiQ5pyJ5pWI55qE5pCc57Si5ZCR6YePJywgKCkgPT4ge1xuICAgICAgY29uc3QgdGVzdENhcmQgPSBUZXN0RGF0YUZhY3RvcnkuY3JlYXRlVGVzdENhcmQoe1xuICAgICAgICBmcm9udENvbnRlbnQ6IHtcbiAgICAgICAgICB0aXRsZTogJ+a1i+ivleagh+mimCcsXG4gICAgICAgICAgdGV4dDogJ+a1i+ivleWGheWuuScsXG4gICAgICAgICAgdGFnczogWyfmoIfnrb4xJywgJ+agh+etvjInXSxcbiAgICAgICAgICBpbWFnZXM6IFtdXG4gICAgICAgIH0sXG4gICAgICAgIGJhY2tDb250ZW50OiB7XG4gICAgICAgICAgdGl0bGU6ICfog4zpnaLmoIfpopgnLFxuICAgICAgICAgIHRleHQ6ICfog4zpnaLlhoXlrrknLFxuICAgICAgICAgIHRhZ3M6IFsn5qCH562+MycsICfmoIfnrb40J10sXG4gICAgICAgICAgaW1hZ2VzOiBbXVxuICAgICAgICB9XG4gICAgICB9KVxuXG4gICAgICAvLyDpgJrov4fnp4HmnInmlrnms5XmtYvor5XmkJzntKLlkJHph4/nlJ/miJBcbiAgICAgIGNvbnN0IHNlYXJjaFZlY3RvciA9IChkYXRhTWlncmF0aW9uVG9vbCBhcyBhbnkpLmdlbmVyYXRlU2VhcmNoVmVjdG9yKHRlc3RDYXJkKVxuXG4gICAgICBleHBlY3QodHlwZW9mIHNlYXJjaFZlY3RvcikudG9CZSgnc3RyaW5nJylcbiAgICAgIGV4cGVjdChzZWFyY2hWZWN0b3IudG9Mb3dlckNhc2UoKSkudG9CZShzZWFyY2hWZWN0b3IpIC8vIOW6lOivpeaYr+Wwj+WGmeeahFxuICAgICAgZXhwZWN0KHNlYXJjaFZlY3RvcikudG9Db250YWluKCfmtYvor5XmoIfpopgnKVxuICAgICAgZXhwZWN0KHNlYXJjaFZlY3RvcikudG9Db250YWluKCfmtYvor5XlhoXlrrknKVxuICAgICAgZXhwZWN0KHNlYXJjaFZlY3RvcikudG9Db250YWluKCfog4zpnaLmoIfpopgnKVxuICAgICAgZXhwZWN0KHNlYXJjaFZlY3RvcikudG9Db250YWluKCfog4zpnaLlhoXlrrknKVxuICAgICAgZXhwZWN0KHNlYXJjaFZlY3RvcikudG9Db250YWluKCfmoIfnrb4xJylcbiAgICAgIGV4cGVjdChzZWFyY2hWZWN0b3IpLnRvQ29udGFpbign5qCH562+MicpXG4gICAgICBleHBlY3Qoc2VhcmNoVmVjdG9yKS50b0NvbnRhaW4oJ+agh+etvjMnKVxuICAgICAgZXhwZWN0KHNlYXJjaFZlY3RvcikudG9Db250YWluKCfmoIfnrb40JylcbiAgICB9KVxuXG4gICAgdGVzdCgn5bqU6K+l6K6h566X5paH5Lu25aS55rex5bqmJywgKCkgPT4ge1xuICAgICAgLy8g5rWL6K+V5qC55paH5Lu25aS5XG4gICAgICBjb25zdCByb290Rm9sZGVyID0gVGVzdERhdGFGYWN0b3J5LmNyZWF0ZVRlc3RGb2xkZXIoeyBwYXJlbnRJZDogbnVsbCB9KVxuICAgICAgY29uc3Qgcm9vdERlcHRoID0gKGRhdGFNaWdyYXRpb25Ub29sIGFzIGFueSkuY2FsY3VsYXRlRGVwdGgocm9vdEZvbGRlcilcbiAgICAgIGV4cGVjdChyb290RGVwdGgpLnRvQmUoMClcblxuICAgICAgLy8g5rWL6K+V5a2Q5paH5Lu25aS5XG4gICAgICBjb25zdCBzdWJGb2xkZXIgPSBUZXN0RGF0YUZhY3RvcnkuY3JlYXRlVGVzdEZvbGRlcih7IHBhcmVudElkOiAncGFyZW50LWlkJyB9KVxuICAgICAgY29uc3Qgc3ViRGVwdGggPSAoZGF0YU1pZ3JhdGlvblRvb2wgYXMgYW55KS5jYWxjdWxhdGVEZXB0aChzdWJGb2xkZXIpXG4gICAgICBleHBlY3Qoc3ViRGVwdGgpLnRvQmUoMSlcbiAgICB9KVxuXG4gICAgdGVzdCgn5bqU6K+l55Sf5oiQ5paH5Lu25aS55a6M5pW06Lev5b6EJywgKCkgPT4ge1xuICAgICAgY29uc3QgZm9sZGVyID0gVGVzdERhdGFGYWN0b3J5LmNyZWF0ZVRlc3RGb2xkZXIoeyBuYW1lOiAn5rWL6K+V5paH5Lu25aS5JyB9KVxuICAgICAgY29uc3QgZnVsbFBhdGggPSAoZGF0YU1pZ3JhdGlvblRvb2wgYXMgYW55KS5nZW5lcmF0ZUZ1bGxQYXRoKGZvbGRlcilcblxuICAgICAgZXhwZWN0KHR5cGVvZiBmdWxsUGF0aCkudG9CZSgnc3RyaW5nJylcbiAgICAgIGV4cGVjdChmdWxsUGF0aCkudG9Db250YWluKCfmtYvor5Xmlofku7blpLknKVxuICAgIH0pXG5cbiAgICB0ZXN0KCflupTor6XmraPnoa7ovazmjaJiYXNlNjTliLBCbG9iJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgYmFzZTY0RGF0YSA9ICdkYXRhOmltYWdlL2pwZWc7YmFzZTY0LC85ai80QUFRU2taSlJnQUJBUUVBWUFCZ0FBRC8yd0JEQUFZRUJRWUZCQVlHQlFZSEJ3WUlDaEFLQ2drSkNoUU9Ed3dRRnhRWUdCY1VGaFlhSFNVZkdoc2pIQllXSUN3Z0l5WW5LU29wR1I4dE1DMG9NQ1VvS1NqLzJ3QkRBUWNIQndvSUNoTUtDaE1vR2hZYUtDZ29LQ2dvS0Nnb0tDZ29LQ2dvS0Nnb0tDZ29LQ2dvS0Nnb0tDZ29LQ2dvS0Nnb0tDZ29LQ2dvS0Nnb0tDZ29LQ2ovd0FBUkNBQUJBQUVEQVNJQUFoRUJBeEVCLzhRQUZRQUJBUUFBQUFBQUFBQUFBQUFBQUFBQUFBdi94QUFVRUFFQUFBQUFBQUFBQUFBQUFBQUFBQUFBLzhRQUZRRUJBUUFBQUFBQUFBQUFBQUFBQUFBQUFBWC94QUFVRVFFQUFBQUFBQUFBQUFBQUFBQUFBQUFBLzlvQURBTUJBQUlSQXhFQVB3Q2RBQm1YLzlrPSdcblxuICAgICAgLy8g5qih5oufZmV0Y2jlk43lupRcbiAgICAgIGdsb2JhbC5mZXRjaCA9IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgIGJsb2I6ICgpID0+IG5ldyBCbG9iKFsndGVzdCddLCB7IHR5cGU6ICdpbWFnZS9qcGVnJyB9KVxuICAgICAgfSkgYXMgYW55XG5cbiAgICAgIGNvbnN0IGJsb2IgPSBhd2FpdCAoZGF0YU1pZ3JhdGlvblRvb2wgYXMgYW55KS5iYXNlNjRUb0Jsb2IoYmFzZTY0RGF0YSlcblxuICAgICAgZXhwZWN0KGJsb2IpLnRvQmVJbnN0YW5jZU9mKEJsb2IpXG4gICAgICBleHBlY3QoYmxvYi50eXBlKS50b0JlKCdpbWFnZS9qcGVnJylcblxuICAgICAgLy8g5riF55CGbW9ja1xuICAgICAgamVzdC5yZXN0b3JlQWxsTW9ja3MoKVxuICAgIH0pXG4gIH0pXG5cbiAgZGVzY3JpYmUoJ+aAp+iDvea1i+ivlScsICgpID0+IHtcbiAgICB0ZXN0KCflupTor6XlnKjlkIjnkIbml7bpl7TlhoXlrozmiJDln7rmnKzmk43kvZwnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBzdGFydFRpbWUgPSBwZXJmb3JtYW5jZS5ub3coKVxuXG4gICAgICAvLyDmtYvor5Xns7vnu5/nirbmgIHmo4Dmn6VcbiAgICAgIGF3YWl0IGRhdGFNaWdyYXRpb25Ub29sLmdldFN5c3RlbVN0YXR1cygpXG5cbiAgICAgIC8vIOa1i+ivlei/geenu+mcgOaxguajgOafpVxuICAgICAgYXdhaXQgZGF0YU1pZ3JhdGlvblRvb2wuY2hlY2tNaWdyYXRpb25OZWVkcygpXG5cbiAgICAgIC8vIOa1i+ivlemqjOivgeaKpeWRiueUn+aIkFxuICAgICAgYXdhaXQgZGF0YU1pZ3JhdGlvblRvb2wuY3JlYXRlVmFsaWRhdGlvblJlcG9ydCgpXG5cbiAgICAgIGNvbnN0IGVuZFRpbWUgPSBwZXJmb3JtYW5jZS5ub3coKVxuICAgICAgY29uc3QgZHVyYXRpb24gPSBlbmRUaW1lIC0gc3RhcnRUaW1lXG5cbiAgICAgIC8vIOi/meS6m+aTjeS9nOW6lOivpeWcqDHnp5LlhoXlrozmiJBcbiAgICAgIGV4cGVjdChkdXJhdGlvbikudG9CZUxlc3NUaGFuKDEwMDApXG4gICAgICBjb25zb2xlLmxvZyhg5Z+65pys5pON5L2c6ICX5pe2OiAke2R1cmF0aW9uLnRvRml4ZWQoMil9bXNgKVxuICAgIH0pXG5cbiAgICB0ZXN0KCflupTor6Xog73lpJ/lpITnkIblpKfph4/mlbDmja7nmoTnirbmgIHmn6Xor6InLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyDliJvlu7rlpKfph4/mtYvor5XmlbDmja5cbiAgICAgIGNvbnN0IGJ1bGtEYXRhID0gVGVzdERhdGFGYWN0b3J5LmNyZWF0ZUJ1bGtUZXN0RGF0YSgxMDAwLCAxMDAsIDIwMClcblxuICAgICAgLy8g6K6+572ubG9jYWxTdG9yYWdl5pWw5o2uXG4gICAgICBNaWdyYXRpb25UZXN0SGVscGVycy5zZXR1cExvY2FsU3RvcmFnZURhdGEoYnVsa0RhdGEpXG5cbiAgICAgIC8vIOa1i+ivleWkp+aVsOaNrumHj+eahOi/geenu+mcgOaxguajgOafpVxuICAgICAgY29uc3Qgc3RhcnRUaW1lID0gcGVyZm9ybWFuY2Uubm93KClcbiAgICAgIGNvbnN0IG5lZWRzID0gYXdhaXQgZGF0YU1pZ3JhdGlvblRvb2wuY2hlY2tNaWdyYXRpb25OZWVkcygpXG4gICAgICBjb25zdCBlbmRUaW1lID0gcGVyZm9ybWFuY2Uubm93KClcblxuICAgICAgY29uc3QgZHVyYXRpb24gPSBlbmRUaW1lIC0gc3RhcnRUaW1lXG4gICAgICBjb25zb2xlLmxvZyhg5aSn5pWw5o2u6YeP5qOA5p+l6ICX5pe2OiAke2R1cmF0aW9uLnRvRml4ZWQoMil9bXNgKVxuXG4gICAgICAvLyDpqozor4Hnu5PmnpxcbiAgICAgIGV4cGVjdChuZWVkcy5uZWVkc01pZ3JhdGlvbikudG9CZSh0cnVlKVxuICAgICAgZXhwZWN0KG5lZWRzLnNvdXJjZXMubGVuZ3RoKS50b0JlR3JlYXRlclRoYW4oMClcblxuICAgICAgLy8g5bqU6K+l5Zyo5ZCI55CG5pe26Ze05YaF5a6M5oiQ77yINeenkuWGhe+8iVxuICAgICAgZXhwZWN0KGR1cmF0aW9uKS50b0JlTGVzc1RoYW4oNTAwMClcblxuICAgICAgLy8g5riF55CGXG4gICAgICBNaWdyYXRpb25UZXN0SGVscGVycy5jbGVhbnVwTG9jYWxTdG9yYWdlKClcbiAgICB9KVxuICB9KVxufSkiXSwidmVyc2lvbiI6M30=