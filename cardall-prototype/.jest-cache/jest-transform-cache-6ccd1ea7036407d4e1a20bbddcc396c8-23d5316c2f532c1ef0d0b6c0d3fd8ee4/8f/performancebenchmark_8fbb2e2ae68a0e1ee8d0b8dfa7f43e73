ab97418aac9b4aacd29744d004d824b0
"use strict";
/**
 * CardAll性能基准测试工具
 * 用于建立当前性能基准和设定优化目标
 */
Object.defineProperty(exports, "__esModule", { value: true });
exports.performanceBenchmark = exports.PerformanceBenchmarkSuite = void 0;
class PerformanceBenchmarkSuite {
    constructor() {
        Object.defineProperty(this, "metrics", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: {
                firstContentfulPaint: 0,
                largestContentfulPaint: 0,
                timeToInteractive: 0,
                totalBlockingTime: 0,
                cumulativeLayoutShift: 0,
                jsHeapSizeLimit: 0,
                totalJSHeapSize: 0,
                usedJSHeapSize: 0,
                syncOperationTime: 0,
                syncSuccessRate: 0,
                conflictResolutionTime: 0,
                dbQueryTime: 0,
                dbWriteTime: 0,
                dbReadTime: 0,
                componentRenderTime: 0,
                stateUpdateTime: 0,
                virtualScrollPerformance: 0,
                apiResponseTime: 0,
                networkLatency: 0,
                bundleLoadTime: 0
            }
        });
        Object.defineProperty(this, "benchmarks", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: [
                // 加载性能基准
                {
                    name: '首次内容绘制时间',
                    currentValue: 0,
                    targetValue: 800,
                    unit: 'ms',
                    improvementTarget: 70,
                    category: 'loading'
                },
                {
                    name: '最大内容绘制时间',
                    currentValue: 0,
                    targetValue: 1200,
                    unit: 'ms',
                    improvementTarget: 75,
                    category: 'loading'
                },
                {
                    name: '可交互时间',
                    currentValue: 0,
                    targetValue: 1500,
                    unit: 'ms',
                    improvementTarget: 80,
                    category: 'loading'
                },
                {
                    name: '总阻塞时间',
                    currentValue: 0,
                    targetValue: 150,
                    unit: 'ms',
                    improvementTarget: 85,
                    category: 'loading'
                },
                {
                    name: '累积布局偏移',
                    currentValue: 0,
                    targetValue: 0.1,
                    unit: '',
                    improvementTarget: 80,
                    category: 'loading'
                },
                // 运行时性能基准
                {
                    name: 'JS堆内存使用',
                    currentValue: 0,
                    targetValue: 50,
                    unit: 'MB',
                    improvementTarget: 60,
                    category: 'runtime'
                },
                {
                    name: '组件渲染时间',
                    currentValue: 0,
                    targetValue: 16,
                    unit: 'ms',
                    improvementTarget: 75,
                    category: 'component'
                },
                {
                    name: '状态更新时间',
                    currentValue: 0,
                    targetValue: 8,
                    unit: 'ms',
                    improvementTarget: 80,
                    category: 'component'
                },
                {
                    name: '虚拟滚动性能',
                    currentValue: 0,
                    targetValue: 60,
                    unit: 'FPS',
                    improvementTarget: 70,
                    category: 'component'
                },
                // 同步性能基准
                {
                    name: '同步操作时间',
                    currentValue: 0,
                    targetValue: 200,
                    unit: 'ms',
                    improvementTarget: 85,
                    category: 'sync'
                },
                {
                    name: '同步成功率',
                    currentValue: 0,
                    targetValue: 99,
                    unit: '%',
                    improvementTarget: 15,
                    category: 'sync'
                },
                {
                    name: '冲突解决时间',
                    currentValue: 0,
                    targetValue: 50,
                    unit: 'ms',
                    improvementTarget: 80,
                    category: 'sync'
                },
                // 数据库性能基准
                {
                    name: '数据库查询时间',
                    currentValue: 0,
                    targetValue: 10,
                    unit: 'ms',
                    improvementTarget: 90,
                    category: 'database'
                },
                {
                    name: '数据库写入时间',
                    currentValue: 0,
                    targetValue: 5,
                    unit: 'ms',
                    improvementTarget: 85,
                    category: 'database'
                },
                {
                    name: '数据库读取时间',
                    currentValue: 0,
                    targetValue: 2,
                    unit: 'ms',
                    improvementTarget: 90,
                    category: 'database'
                },
                // 网络性能基准
                {
                    name: 'API响应时间',
                    currentValue: 0,
                    targetValue: 300,
                    unit: 'ms',
                    improvementTarget: 70,
                    category: 'network'
                },
                {
                    name: '网络延迟',
                    currentValue: 0,
                    targetValue: 100,
                    unit: 'ms',
                    improvementTarget: 75,
                    category: 'network'
                },
                {
                    name: 'Bundle加载时间',
                    currentValue: 0,
                    targetValue: 1000,
                    unit: 'ms',
                    improvementTarget: 80,
                    category: 'network'
                }
            ]
        });
    }
    // 测量Web Vitals
    async measureWebVitals() {
        if (typeof window !== 'undefined' && 'performance' in window) {
            // 首次内容绘制
            const paintEntries = performance.getEntriesByType('paint');
            const fcpEntry = paintEntries.find(entry => entry.name === 'first-contentful-paint');
            if (fcpEntry) {
                this.metrics.firstContentfulPaint = fcpEntry.startTime;
                this.updateBenchmark('首次内容绘制时间', fcpEntry.startTime);
            }
            // 最大内容绘制
            const lcpObserver = new PerformanceObserver((entryList) => {
                const entries = entryList.getEntries();
                const lastEntry = entries[entries.length - 1];
                this.metrics.largestContentfulPaint = lastEntry.startTime;
                this.updateBenchmark('最大内容绘制时间', lastEntry.startTime);
            });
            lcpObserver.observe({ entryTypes: ['largest-contentful-paint'] });
            // 总阻塞时间
            const tbt = this.calculateTotalBlockingTime();
            this.metrics.totalBlockingTime = tbt;
            this.updateBenchmark('总阻塞时间', tbt);
            // 累积布局偏移
            const clsObserver = new PerformanceObserver((entryList) => {
                let clsValue = 0;
                for (const entry of entryList.getEntries()) {
                    if (!entry.hadRecentInput) {
                        clsValue += entry.value;
                    }
                }
                this.metrics.cumulativeLayoutShift = clsValue;
                this.updateBenchmark('累积布局偏移', clsValue);
            });
            clsObserver.observe({ entryTypes: ['layout-shift'] });
        }
    }
    // 测量内存使用
    measureMemoryUsage() {
        if (typeof window !== 'undefined' && 'performance' in window && 'memory' in performance) {
            const memory = performance.memory;
            this.metrics.jsHeapSizeLimit = memory.jsHeapSizeLimit / (1024 * 1024);
            this.metrics.totalJSHeapSize = memory.totalJSHeapSize / (1024 * 1024);
            this.metrics.usedJSHeapSize = memory.usedJSHeapSize / (1024 * 1024);
            this.updateBenchmark('JS堆内存使用', this.metrics.usedJSHeapSize);
        }
    }
    // 测量组件渲染性能
    measureComponentRenderTime(componentName, renderFunction) {
        const start = performance.now();
        renderFunction();
        const end = performance.now();
        const renderTime = end - start;
        this.metrics.componentRenderTime = renderTime;
        this.updateBenchmark('组件渲染时间', renderTime);
        return renderTime;
    }
    // 测量同步性能
    async measureSyncPerformance(syncOperation) {
        const start = performance.now();
        try {
            const result = await syncOperation();
            const end = performance.now();
            this.metrics.syncOperationTime = end - start;
            this.metrics.syncSuccessRate = 100;
            this.updateBenchmark('同步操作时间', this.metrics.syncOperationTime);
            this.updateBenchmark('同步成功率', this.metrics.syncSuccessRate);
        }
        catch (error) {
            const end = performance.now();
            this.metrics.syncOperationTime = end - start;
            this.metrics.syncSuccessRate = 0;
            this.updateBenchmark('同步操作时间', this.metrics.syncOperationTime);
            this.updateBenchmark('同步成功率', this.metrics.syncSuccessRate);
        }
    }
    // 测量数据库性能
    async measureDatabasePerformance(dbOperation, operationType) {
        const start = performance.now();
        try {
            await dbOperation();
            const end = performance.now();
            const duration = end - start;
            switch (operationType) {
                case 'query':
                    this.metrics.dbQueryTime = duration;
                    this.updateBenchmark('数据库查询时间', duration);
                    break;
                case 'write':
                    this.metrics.dbWriteTime = duration;
                    this.updateBenchmark('数据库写入时间', duration);
                    break;
                case 'read':
                    this.metrics.dbReadTime = duration;
                    this.updateBenchmark('数据库读取时间', duration);
                    break;
            }
        }
        catch (error) {
            console.error('Database performance measurement failed:', error);
        }
    }
    // 计算总阻塞时间
    calculateTotalBlockingTime() {
        const navigation = performance.getEntriesByType('navigation')[0];
        const tbt = this.metrics.totalBlockingTime || 0;
        return tbt;
    }
    // 更新基准值
    updateBenchmark(name, value) {
        const benchmark = this.benchmarks.find(b => b.name === name);
        if (benchmark) {
            benchmark.currentValue = value;
        }
    }
    // 获取性能报告
    getPerformanceReport() {
        const overallProgress = this.calculateOverallProgress();
        const categoryProgress = this.calculateCategoryProgress();
        return {
            timestamp: new Date().toISOString(),
            metrics: this.metrics,
            benchmarks: this.benchmarks,
            overallProgress,
            categoryProgress,
            recommendations: this.generateRecommendations()
        };
    }
    // 计算总体进度
    calculateOverallProgress() {
        let totalProgress = 0;
        let count = 0;
        this.benchmarks.forEach(benchmark => {
            if (benchmark.currentValue > 0 && benchmark.targetValue > 0) {
                const progress = Math.min(100, (benchmark.currentValue / benchmark.targetValue) * 100);
                totalProgress += progress;
                count++;
            }
        });
        return count > 0 ? totalProgress / count : 0;
    }
    // 计算分类进度
    calculateCategoryProgress() {
        const categories = ['loading', 'runtime', 'sync', 'database', 'component', 'network'];
        const progress = {};
        categories.forEach(category => {
            let totalProgress = 0;
            let count = 0;
            this.benchmarks.filter(b => b.category === category).forEach(benchmark => {
                if (benchmark.currentValue > 0 && benchmark.targetValue > 0) {
                    const progress = Math.min(100, (benchmark.currentValue / benchmark.targetValue) * 100);
                    totalProgress += progress;
                    count++;
                }
            });
            progress[category] = count > 0 ? totalProgress / count : 0;
        });
        return progress;
    }
    // 生成优化建议
    generateRecommendations() {
        const recommendations = [];
        this.benchmarks.forEach(benchmark => {
            if (benchmark.currentValue > 0) {
                const ratio = benchmark.currentValue / benchmark.targetValue;
                if (ratio > 2) {
                    recommendations.push(`${benchmark.name}严重超标(${benchmark.currentValue}${benchmark.unit}，目标${benchmark.targetValue}${benchmark.unit})，需要立即优化`);
                }
                else if (ratio > 1.5) {
                    recommendations.push(`${benchmark.name}超出预期(${benchmark.currentValue}${benchmark.unit}，目标${benchmark.targetValue}${benchmark.unit})，建议优先优化`);
                }
                else if (ratio > 1.2) {
                    recommendations.push(`${benchmark.name}略高于目标(${benchmark.currentValue}${benchmark.unit}，目标${benchmark.targetValue}${benchmark.unit})，可以进一步优化`);
                }
            }
        });
        return recommendations;
    }
    // 设置性能目标
    setPerformanceTargets(targets) {
        Object.entries(targets).forEach(([name, targetValue]) => {
            const benchmark = this.benchmarks.find(b => b.name === name);
            if (benchmark) {
                benchmark.targetValue = targetValue;
            }
        });
    }
    // 获取当前基准值
    getCurrentMetrics() {
        return { ...this.metrics };
    }
    // 重置基准
    reset() {
        this.metrics = {
            firstContentfulPaint: 0,
            largestContentfulPaint: 0,
            timeToInteractive: 0,
            totalBlockingTime: 0,
            cumulativeLayoutShift: 0,
            jsHeapSizeLimit: 0,
            totalJSHeapSize: 0,
            usedJSHeapSize: 0,
            syncOperationTime: 0,
            syncSuccessRate: 0,
            conflictResolutionTime: 0,
            dbQueryTime: 0,
            dbWriteTime: 0,
            dbReadTime: 0,
            componentRenderTime: 0,
            stateUpdateTime: 0,
            virtualScrollPerformance: 0,
            apiResponseTime: 0,
            networkLatency: 0,
            bundleLoadTime: 0
        };
        this.benchmarks.forEach(benchmark => {
            benchmark.currentValue = 0;
        });
    }
}
exports.PerformanceBenchmarkSuite = PerformanceBenchmarkSuite;
// 创建全局性能基准实例
exports.performanceBenchmark = new PerformanceBenchmarkSuite();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiRDpcXFByb2plY3RzXFxDYXJkRXZlcnl0aGluZ1xcY2FyZGFsbC1wcm90b3R5cGVcXHNyY1xcdXRpbHNcXHBlcmZvcm1hbmNlLWJlbmNobWFyay50cyIsIm1hcHBpbmdzIjoiO0FBQUE7OztHQUdHOzs7QUE2Q0gsTUFBYSx5QkFBeUI7SUFBdEM7UUFDVTs7OzttQkFBOEI7Z0JBQ3BDLG9CQUFvQixFQUFFLENBQUM7Z0JBQ3ZCLHNCQUFzQixFQUFFLENBQUM7Z0JBQ3pCLGlCQUFpQixFQUFFLENBQUM7Z0JBQ3BCLGlCQUFpQixFQUFFLENBQUM7Z0JBQ3BCLHFCQUFxQixFQUFFLENBQUM7Z0JBQ3hCLGVBQWUsRUFBRSxDQUFDO2dCQUNsQixlQUFlLEVBQUUsQ0FBQztnQkFDbEIsY0FBYyxFQUFFLENBQUM7Z0JBQ2pCLGlCQUFpQixFQUFFLENBQUM7Z0JBQ3BCLGVBQWUsRUFBRSxDQUFDO2dCQUNsQixzQkFBc0IsRUFBRSxDQUFDO2dCQUN6QixXQUFXLEVBQUUsQ0FBQztnQkFDZCxXQUFXLEVBQUUsQ0FBQztnQkFDZCxVQUFVLEVBQUUsQ0FBQztnQkFDYixtQkFBbUIsRUFBRSxDQUFDO2dCQUN0QixlQUFlLEVBQUUsQ0FBQztnQkFDbEIsd0JBQXdCLEVBQUUsQ0FBQztnQkFDM0IsZUFBZSxFQUFFLENBQUM7Z0JBQ2xCLGNBQWMsRUFBRSxDQUFDO2dCQUNqQixjQUFjLEVBQUUsQ0FBQzthQUNsQjtXQUFBO1FBRU87Ozs7bUJBQXFDO2dCQUMzQyxTQUFTO2dCQUNUO29CQUNFLElBQUksRUFBRSxVQUFVO29CQUNoQixZQUFZLEVBQUUsQ0FBQztvQkFDZixXQUFXLEVBQUUsR0FBRztvQkFDaEIsSUFBSSxFQUFFLElBQUk7b0JBQ1YsaUJBQWlCLEVBQUUsRUFBRTtvQkFDckIsUUFBUSxFQUFFLFNBQVM7aUJBQ3BCO2dCQUNEO29CQUNFLElBQUksRUFBRSxVQUFVO29CQUNoQixZQUFZLEVBQUUsQ0FBQztvQkFDZixXQUFXLEVBQUUsSUFBSTtvQkFDakIsSUFBSSxFQUFFLElBQUk7b0JBQ1YsaUJB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RSxDQUFDO1lBQ2xCLGNBQWMsRUFBRSxDQUFDO1lBQ2pCLGNBQWMsRUFBRSxDQUFDO1NBQ2xCLENBQUE7UUFFRCxJQUFJLENBQUMsVUFBVSxDQUFDLE9BQU8sQ0FBQyxTQUFTLENBQUMsRUFBRTtZQUNsQyxTQUFTLENBQUMsWUFBWSxHQUFHLENBQUMsQ0FBQTtRQUM1QixDQUFDLENBQUMsQ0FBQTtJQUNKLENBQUM7Q0FDRjtBQXRhRCw4REFzYUM7QUFXRCxhQUFhO0FBQ0EsUUFBQSxvQkFBb0IsR0FBRyxJQUFJLHlCQUF5QixFQUFFLENBQUEiLCJuYW1lcyI6W10sInNvdXJjZXMiOlsiRDpcXFByb2plY3RzXFxDYXJkRXZlcnl0aGluZ1xcY2FyZGFsbC1wcm90b3R5cGVcXHNyY1xcdXRpbHNcXHBlcmZvcm1hbmNlLWJlbmNobWFyay50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIENhcmRBbGzmgKfog73ln7rlh4bmtYvor5Xlt6XlhbdcbiAqIOeUqOS6juW7uueri+W9k+WJjeaAp+iDveWfuuWHhuWSjOiuvuWumuS8mOWMluebruagh1xuICovXG5cbmV4cG9ydCBpbnRlcmZhY2UgUGVyZm9ybWFuY2VNZXRyaWNzIHtcbiAgLy8g5Yqg6L295oCn6IO9XG4gIGZpcnN0Q29udGVudGZ1bFBhaW50OiBudW1iZXJcbiAgbGFyZ2VzdENvbnRlbnRmdWxQYWludDogbnVtYmVyXG4gIHRpbWVUb0ludGVyYWN0aXZlOiBudW1iZXJcbiAgdG90YWxCbG9ja2luZ1RpbWU6IG51bWJlclxuICBjdW11bGF0aXZlTGF5b3V0U2hpZnQ6IG51bWJlclxuXG4gIC8vIOi/kOihjOaXtuaAp+iDvVxuICBqc0hlYXBTaXplTGltaXQ6IG51bWJlclxuICB0b3RhbEpTSGVhcFNpemU6IG51bWJlclxuICB1c2VkSlNIZWFwU2l6ZTogbnVtYmVyXG5cbiAgLy8g5ZCM5q2l5oCn6IO9XG4gIHN5bmNPcGVyYXRpb25UaW1lOiBudW1iZXJcbiAgc3luY1N1Y2Nlc3NSYXRlOiBudW1iZXJcbiAgY29uZmxpY3RSZXNvbHV0aW9uVGltZTogbnVtYmVyXG5cbiAgLy8g5pWw5o2u5bqT5oCn6IO9XG4gIGRiUXVlcnlUaW1lOiBudW1iZXJcbiAgZGJXcml0ZVRpbWU6IG51bWJlclxuICBkYlJlYWRUaW1lOiBudW1iZXJcblxuICAvLyDnu4Tku7bmgKfog71cbiAgY29tcG9uZW50UmVuZGVyVGltZTogbnVtYmVyXG4gIHN0YXRlVXBkYXRlVGltZTogbnVtYmVyXG4gIHZpcnR1YWxTY3JvbGxQZXJmb3JtYW5jZTogbnVtYmVyXG5cbiAgLy8g572R57uc5oCn6IO9XG4gIGFwaVJlc3BvbnNlVGltZTogbnVtYmVyXG4gIG5ldHdvcmtMYXRlbmN5OiBudW1iZXJcbiAgYnVuZGxlTG9hZFRpbWU6IG51bWJlclxufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBlcmZvcm1hbmNlQmVuY2htYXJrIHtcbiAgbmFtZTogc3RyaW5nXG4gIGN1cnJlbnRWYWx1ZTogbnVtYmVyXG4gIHRhcmdldFZhbHVlOiBudW1iZXJcbiAgdW5pdDogc3RyaW5nXG4gIGltcHJvdmVtZW50VGFyZ2V0OiBudW1iZXIgLy8g55m+5YiG5q+UXG4gIGNhdGVnb3J5OiAnbG9hZGluZycgfCAncnVudGltZScgfCAnc3luYycgfCAnZGF0YWJhc2UnIHwgJ2NvbXBvbmVudCcgfCAnbmV0d29yaydcbn1cblxuZXhwb3J0IGNsYXNzIFBlcmZvcm1hbmNlQmVuY2htYXJrU3VpdGUge1xuICBwcml2YXRlIG1ldHJpY3M6IFBlcmZvcm1hbmNlTWV0cmljcyA9IHtcbiAgICBmaXJzdENvbnRlbnRmdWxQYWludDogMCxcbiAgICBsYXJnZXN0Q29udGVudGZ1bFBhaW50OiAwLFxuICAgIHRpbWVUb0ludGVyYWN0aXZlOiAwLFxuICAgIHRvdGFsQmxvY2tpbmdUaW1lOiAwLFxuICAgIGN1bXVsYXRpdmVMYXlvdXRTaGlmdDogMCxcbiAgICBqc0hlYXBTaXplTGltaXQ6IDAsXG4gICAgdG90YWxKU0hlYXBTaXplOiAwLFxuICAgIHVzZWRKU0hlYXBTaXplOiAwLFxuICAgIHN5bmNPcGVyYXRpb25UaW1lOiAwLFxuICAgIHN5bmNTdWNjZXNzUmF0ZTogMCxcbiAgICBjb25mbGljdFJlc29sdXRpb25UaW1lOiAwLFxuICAgIGRiUXVlcnlUaW1lOiAwLFxuICAgIGRiV3JpdGVUaW1lOiAwLFxuICAgIGRiUmVhZFRpbWU6IDAsXG4gICAgY29tcG9uZW50UmVuZGVyVGltZTogMCxcbiAgICBzdGF0ZVVwZGF0ZVRpbWU6IDAsXG4gICAgdmlydHVhbFNjcm9sbFBlcmZvcm1hbmNlOiAwLFxuICAgIGFwaVJlc3BvbnNlVGltZTogMCxcbiAgICBuZXR3b3JrTGF0ZW5jeTogMCxcbiAgICBidW5kbGVMb2FkVGltZTogMFxuICB9XG5cbiAgcHJpdmF0ZSBiZW5jaG1hcmtzOiBQZXJmb3JtYW5jZUJlbmNobWFya1tdID0gW1xuICAgIC8vIOWKoOi9veaAp+iDveWfuuWHhlxuICAgIHtcbiAgICAgIG5hbWU6ICfpppbmrKHlhoXlrrnnu5jliLbml7bpl7QnLFxuICAgICAgY3VycmVudFZhbHVlOiAwLFxuICAgICAgdGFyZ2V0VmFsdWU6IDgwMCxcbiAgICAgIHVuaXQ6ICdtcycsXG4gICAgICBpbXByb3ZlbWVudFRhcmdldDogNzAsXG4gICAgICBjYXRlZ29yeTogJ2xvYWRpbmcnXG4gICAgfSxcbiAgICB7XG4gICAgICBuYW1lOiAn5pyA5aSn5YaF5a6557uY5Yi25pe26Ze0JyxcbiAgICAgIGN1cnJlbnRWYWx1ZTogMCxcbiAgICAgIHRhcmdldFZhbHVlOiAxMjAwLFxuICAgICAgdW5pdDogJ21zJyxcbiAgICAgIGltcHJvdmVtZW50VGFyZ2V0OiA3NSxcbiAgICAgIGNhdGVnb3J5OiAnbG9hZGluZydcbiAgICB9LFxuICAgIHtcbiAgICAgIG5hbWU6ICflj6/kuqTkupLml7bpl7QnLFxuICAgICAgY3VycmVudFZhbHVlOiAwLFxuICAgICAgdGFyZ2V0VmFsdWU6IDE1MDAsXG4gICAgICB1bml0OiAnbXMnLFxuICAgICAgaW1wcm92ZW1lbnRUYXJnZXQ6IDgwLFxuICAgICAgY2F0ZWdvcnk6ICdsb2FkaW5nJ1xuICAgIH0sXG4gICAge1xuICAgICAgbmFtZTogJ+aAu+mYu+WhnuaXtumXtCcsXG4gICAgICBjdXJyZW50VmFsdWU6IDAsXG4gICAgICB0YXJnZXRWYWx1ZTogMTUwLFxuICAgICAgdW5pdDogJ21zJyxcbiAgICAgIGltcHJvdmVtZW50VGFyZ2V0OiA4NSxcbiAgICAgIGNhdGVnb3J5OiAnbG9hZGluZydcbiAgICB9LFxuICAgIHtcbiAgICAgIG5hbWU6ICfntK/np6/luIPlsYDlgY/np7snLFxuICAgICAgY3VycmVudFZhbHVlOiAwLFxuICAgICAgdGFyZ2V0VmFsdWU6IDAuMSxcbiAgICAgIHVuaXQ6ICcnLFxuICAgICAgaW1wcm92ZW1lbnRUYXJnZXQ6IDgwLFxuICAgICAgY2F0ZWdvcnk6ICdsb2FkaW5nJ1xuICAgIH0sXG5cbiAgICAvLyDov5DooYzml7bmgKfog73ln7rlh4ZcbiAgICB7XG4gICAgICBuYW1lOiAnSlPloIblhoXlrZjkvb/nlKgnLFxuICAgICAgY3VycmVudFZhbHVlOiAwLFxuICAgICAgdGFyZ2V0VmFsdWU6IDUwLFxuICAgICAgdW5pdDogJ01CJyxcbiAgICAgIGltcHJvdmVtZW50VGFyZ2V0OiA2MCxcbiAgICAgIGNhdGVnb3J5OiAncnVudGltZSdcbiAgICB9LFxuICAgIHtcbiAgICAgIG5hbWU6ICfnu4Tku7bmuLLmn5Pml7bpl7QnLFxuICAgICAgY3VycmVudFZhbHVlOiAwLFxuICAgICAgdGFyZ2V0VmFsdWU6IDE2LFxuICAgICAgdW5pdDogJ21zJyxcbiAgICAgIGltcHJvdmVtZW50VGFyZ2V0OiA3NSxcbiAgICAgIGNhdGVnb3J5OiAnY29tcG9uZW50J1xuICAgIH0sXG4gICAge1xuICAgICAgbmFtZTogJ+eKtuaAgeabtOaWsOaXtumXtCcsXG4gICAgICBjdXJyZW50VmFsdWU6IDAsXG4gICAgICB0YXJnZXRWYWx1ZTogOCxcbiAgICAgIHVuaXQ6ICdtcycsXG4gICAgICBpbXByb3ZlbWVudFRhcmdldDogODAsXG4gICAgICBjYXRlZ29yeTogJ2NvbXBvbmVudCdcbiAgICB9LFxuICAgIHtcbiAgICAgIG5hbWU6ICfomZrmi5/mu5rliqjmgKfog70nLFxuICAgICAgY3VycmVudFZhbHVlOiAwLFxuICAgICAgdGFyZ2V0VmFsdWU6IDYwLFxuICAgICAgdW5pdDogJ0ZQUycsXG4gICAgICBpbXByb3ZlbWVudFRhcmdldDogNzAsXG4gICAgICBjYXRlZ29yeTogJ2NvbXBvbmVudCdcbiAgICB9LFxuXG4gICAgLy8g5ZCM5q2l5oCn6IO95Z+65YeGXG4gICAge1xuICAgICAgbmFtZTogJ+WQjOatpeaTjeS9nOaXtumXtCcsXG4gICAgICBjdXJyZW50VmFsdWU6IDAsXG4gICAgICB0YXJnZXRWYWx1ZTogMjAwLFxuICAgICAgdW5pdDogJ21zJyxcbiAgICAgIGltcHJvdmVtZW50VGFyZ2V0OiA4NSxcbiAgICAgIGNhdGVnb3J5OiAnc3luYydcbiAgICB9LFxuICAgIHtcbiAgICAgIG5hbWU6ICflkIzmraXmiJDlip/njocnLFxuICAgICAgY3VycmVudFZhbHVlOiAwLFxuICAgICAgdGFyZ2V0VmFsdWU6IDk5LFxuICAgICAgdW5pdDogJyUnLFxuICAgICAgaW1wcm92ZW1lbnRUYXJnZXQ6IDE1LFxuICAgICAgY2F0ZWdvcnk6ICdzeW5jJ1xuICAgIH0sXG4gICAge1xuICAgICAgbmFtZTogJ+WGsueqgeino+WGs+aXtumXtCcsXG4gICAgICBjdXJyZW50VmFsdWU6IDAsXG4gICAgICB0YXJnZXRWYWx1ZTogNTAsXG4gICAgICB1bml0OiAnbXMnLFxuICAgICAgaW1wcm92ZW1lbnRUYXJnZXQ6IDgwLFxuICAgICAgY2F0ZWdvcnk6ICdzeW5jJ1xuICAgIH0sXG5cbiAgICAvLyDmlbDmja7lupPmgKfog73ln7rlh4ZcbiAgICB7XG4gICAgICBuYW1lOiAn5pWw5o2u5bqT5p+l6K+i5pe26Ze0JyxcbiAgICAgIGN1cnJlbnRWYWx1ZTogMCxcbiAgICAgIHRhcmdldFZhbHVlOiAxMCxcbiAgICAgIHVuaXQ6ICdtcycsXG4gICAgICBpbXByb3ZlbWVudFRhcmdldDogOTAsXG4gICAgICBjYXRlZ29yeTogJ2RhdGFiYXNlJ1xuICAgIH0sXG4gICAge1xuICAgICAgbmFtZTogJ+aVsOaNruW6k+WGmeWFpeaXtumXtCcsXG4gICAgICBjdXJyZW50VmFsdWU6IDAsXG4gICAgICB0YXJnZXRWYWx1ZTogNSxcbiAgICAgIHVuaXQ6ICdtcycsXG4gICAgICBpbXByb3ZlbWVudFRhcmdldDogODUsXG4gICAgICBjYXRlZ29yeTogJ2RhdGFiYXNlJ1xuICAgIH0sXG4gICAge1xuICAgICAgbmFtZTogJ+aVsOaNruW6k+ivu+WPluaXtumXtCcsXG4gICAgICBjdXJyZW50VmFsdWU6IDAsXG4gICAgICB0YXJnZXRWYWx1ZTogMixcbiAgICAgIHVuaXQ6ICdtcycsXG4gICAgICBpbXByb3ZlbWVudFRhcmdldDogOTAsXG4gICAgICBjYXRlZ29yeTogJ2RhdGFiYXNlJ1xuICAgIH0sXG5cbiAgICAvLyDnvZHnu5zmgKfog73ln7rlh4ZcbiAgICB7XG4gICAgICBuYW1lOiAnQVBJ5ZON5bqU5pe26Ze0JyxcbiAgICAgIGN1cnJlbnRWYWx1ZTogMCxcbiAgICAgIHRhcmdldFZhbHVlOiAzMDAsXG4gICAgICB1bml0OiAnbXMnLFxuICAgICAgaW1wcm92ZW1lbnRUYXJnZXQ6IDcwLFxuICAgICAgY2F0ZWdvcnk6ICduZXR3b3JrJ1xuICAgIH0sXG4gICAge1xuICAgICAgbmFtZTogJ+e9kee7nOW7tui/nycsXG4gICAgICBjdXJyZW50VmFsdWU6IDAsXG4gICAgICB0YXJnZXRWYWx1ZTogMTAwLFxuICAgICAgdW5pdDogJ21zJyxcbiAgICAgIGltcHJvdmVtZW50VGFyZ2V0OiA3NSxcbiAgICAgIGNhdGVnb3J5OiAnbmV0d29yaydcbiAgICB9LFxuICAgIHtcbiAgICAgIG5hbWU6ICdCdW5kbGXliqDovb3ml7bpl7QnLFxuICAgICAgY3VycmVudFZhbHVlOiAwLFxuICAgICAgdGFyZ2V0VmFsdWU6IDEwMDAsXG4gICAgICB1bml0OiAnbXMnLFxuICAgICAgaW1wcm92ZW1lbnRUYXJnZXQ6IDgwLFxuICAgICAgY2F0ZWdvcnk6ICduZXR3b3JrJ1xuICAgIH1cbiAgXVxuXG4gIC8vIOa1i+mHj1dlYiBWaXRhbHNcbiAgYXN5bmMgbWVhc3VyZVdlYlZpdGFscygpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiYgJ3BlcmZvcm1hbmNlJyBpbiB3aW5kb3cpIHtcbiAgICAgIC8vIOmmluasoeWGheWuuee7mOWItlxuICAgICAgY29uc3QgcGFpbnRFbnRyaWVzID0gcGVyZm9ybWFuY2UuZ2V0RW50cmllc0J5VHlwZSgncGFpbnQnKVxuICAgICAgY29uc3QgZmNwRW50cnkgPSBwYWludEVudHJpZXMuZmluZChlbnRyeSA9PiBlbnRyeS5uYW1lID09PSAnZmlyc3QtY29udGVudGZ1bC1wYWludCcpXG4gICAgICBpZiAoZmNwRW50cnkpIHtcbiAgICAgICAgdGhpcy5tZXRyaWNzLmZpcnN0Q29udGVudGZ1bFBhaW50ID0gZmNwRW50cnkuc3RhcnRUaW1lXG4gICAgICAgIHRoaXMudXBkYXRlQmVuY2htYXJrKCfpppbmrKHlhoXlrrnnu5jliLbml7bpl7QnLCBmY3BFbnRyeS5zdGFydFRpbWUpXG4gICAgICB9XG5cbiAgICAgIC8vIOacgOWkp+WGheWuuee7mOWItlxuICAgICAgY29uc3QgbGNwT2JzZXJ2ZXIgPSBuZXcgUGVyZm9ybWFuY2VPYnNlcnZlcigoZW50cnlMaXN0KSA9PiB7XG4gICAgICAgIGNvbnN0IGVudHJpZXMgPSBlbnRyeUxpc3QuZ2V0RW50cmllcygpXG4gICAgICAgIGNvbnN0IGxhc3RFbnRyeSA9IGVudHJpZXNbZW50cmllcy5sZW5ndGggLSAxXVxuICAgICAgICB0aGlzLm1ldHJpY3MubGFyZ2VzdENvbnRlbnRmdWxQYWludCA9IGxhc3RFbnRyeS5zdGFydFRpbWVcbiAgICAgICAgdGhpcy51cGRhdGVCZW5jaG1hcmsoJ+acgOWkp+WGheWuuee7mOWItuaXtumXtCcsIGxhc3RFbnRyeS5zdGFydFRpbWUpXG4gICAgICB9KVxuICAgICAgbGNwT2JzZXJ2ZXIub2JzZXJ2ZSh7IGVudHJ5VHlwZXM6IFsnbGFyZ2VzdC1jb250ZW50ZnVsLXBhaW50J10gfSlcblxuICAgICAgLy8g5oC76Zi75aGe5pe26Ze0XG4gICAgICBjb25zdCB0YnQgPSB0aGlzLmNhbGN1bGF0ZVRvdGFsQmxvY2tpbmdUaW1lKClcbiAgICAgIHRoaXMubWV0cmljcy50b3RhbEJsb2NraW5nVGltZSA9IHRidFxuICAgICAgdGhpcy51cGRhdGVCZW5jaG1hcmsoJ+aAu+mYu+WhnuaXtumXtCcsIHRidClcblxuICAgICAgLy8g57Sv56ev5biD5bGA5YGP56e7XG4gICAgICBjb25zdCBjbHNPYnNlcnZlciA9IG5ldyBQZXJmb3JtYW5jZU9ic2VydmVyKChlbnRyeUxpc3QpID0+IHtcbiAgICAgICAgbGV0IGNsc1ZhbHVlID0gMFxuICAgICAgICBmb3IgKGNvbnN0IGVudHJ5IG9mIGVudHJ5TGlzdC5nZXRFbnRyaWVzKCkpIHtcbiAgICAgICAgICBpZiAoIShlbnRyeSBhcyBhbnkpLmhhZFJlY2VudElucHV0KSB7XG4gICAgICAgICAgICBjbHNWYWx1ZSArPSAoZW50cnkgYXMgYW55KS52YWx1ZVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aGlzLm1ldHJpY3MuY3VtdWxhdGl2ZUxheW91dFNoaWZ0ID0gY2xzVmFsdWVcbiAgICAgICAgdGhpcy51cGRhdGVCZW5jaG1hcmsoJ+e0r+enr+W4g+WxgOWBj+enuycsIGNsc1ZhbHVlKVxuICAgICAgfSlcbiAgICAgIGNsc09ic2VydmVyLm9ic2VydmUoeyBlbnRyeVR5cGVzOiBbJ2xheW91dC1zaGlmdCddIH0pXG4gICAgfVxuICB9XG5cbiAgLy8g5rWL6YeP5YaF5a2Y5L2/55SoXG4gIG1lYXN1cmVNZW1vcnlVc2FnZSgpOiB2b2lkIHtcbiAgICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiYgJ3BlcmZvcm1hbmNlJyBpbiB3aW5kb3cgJiYgJ21lbW9yeScgaW4gcGVyZm9ybWFuY2UpIHtcbiAgICAgIGNvbnN0IG1lbW9yeSA9IChwZXJmb3JtYW5jZSBhcyBhbnkpLm1lbW9yeVxuICAgICAgdGhpcy5tZXRyaWNzLmpzSGVhcFNpemVMaW1pdCA9IG1lbW9yeS5qc0hlYXBTaXplTGltaXQgLyAoMTAyNCAqIDEwMjQpXG4gICAgICB0aGlzLm1ldHJpY3MudG90YWxKU0hlYXBTaXplID0gbWVtb3J5LnRvdGFsSlNIZWFwU2l6ZSAvICgxMDI0ICogMTAyNClcbiAgICAgIHRoaXMubWV0cmljcy51c2VkSlNIZWFwU2l6ZSA9IG1lbW9yeS51c2VkSlNIZWFwU2l6ZSAvICgxMDI0ICogMTAyNClcbiAgICAgIHRoaXMudXBkYXRlQmVuY2htYXJrKCdKU+WghuWGheWtmOS9v+eUqCcsIHRoaXMubWV0cmljcy51c2VkSlNIZWFwU2l6ZSlcbiAgICB9XG4gIH1cblxuICAvLyDmtYvph4/nu4Tku7bmuLLmn5PmgKfog71cbiAgbWVhc3VyZUNvbXBvbmVudFJlbmRlclRpbWUoY29tcG9uZW50TmFtZTogc3RyaW5nLCByZW5kZXJGdW5jdGlvbjogKCkgPT4gdm9pZCk6IG51bWJlciB7XG4gICAgY29uc3Qgc3RhcnQgPSBwZXJmb3JtYW5jZS5ub3coKVxuICAgIHJlbmRlckZ1bmN0aW9uKClcbiAgICBjb25zdCBlbmQgPSBwZXJmb3JtYW5jZS5ub3coKVxuICAgIGNvbnN0IHJlbmRlclRpbWUgPSBlbmQgLSBzdGFydFxuICAgIHRoaXMubWV0cmljcy5jb21wb25lbnRSZW5kZXJUaW1lID0gcmVuZGVyVGltZVxuICAgIHRoaXMudXBkYXRlQmVuY2htYXJrKCfnu4Tku7bmuLLmn5Pml7bpl7QnLCByZW5kZXJUaW1lKVxuICAgIHJldHVybiByZW5kZXJUaW1lXG4gIH1cblxuICAvLyDmtYvph4/lkIzmraXmgKfog71cbiAgYXN5bmMgbWVhc3VyZVN5bmNQZXJmb3JtYW5jZShzeW5jT3BlcmF0aW9uOiAoKSA9PiBQcm9taXNlPGFueT4pOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBjb25zdCBzdGFydCA9IHBlcmZvcm1hbmNlLm5vdygpXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHN5bmNPcGVyYXRpb24oKVxuICAgICAgY29uc3QgZW5kID0gcGVyZm9ybWFuY2Uubm93KClcbiAgICAgIHRoaXMubWV0cmljcy5zeW5jT3BlcmF0aW9uVGltZSA9IGVuZCAtIHN0YXJ0XG4gICAgICB0aGlzLm1ldHJpY3Muc3luY1N1Y2Nlc3NSYXRlID0gMTAwXG4gICAgICB0aGlzLnVwZGF0ZUJlbmNobWFyaygn5ZCM5q2l5pON5L2c5pe26Ze0JywgdGhpcy5tZXRyaWNzLnN5bmNPcGVyYXRpb25UaW1lKVxuICAgICAgdGhpcy51cGRhdGVCZW5jaG1hcmsoJ+WQjOatpeaIkOWKn+eOhycsIHRoaXMubWV0cmljcy5zeW5jU3VjY2Vzc1JhdGUpXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnN0IGVuZCA9IHBlcmZvcm1hbmNlLm5vdygpXG4gICAgICB0aGlzLm1ldHJpY3Muc3luY09wZXJhdGlvblRpbWUgPSBlbmQgLSBzdGFydFxuICAgICAgdGhpcy5tZXRyaWNzLnN5bmNTdWNjZXNzUmF0ZSA9IDBcbiAgICAgIHRoaXMudXBkYXRlQmVuY2htYXJrKCflkIzmraXmk43kvZzml7bpl7QnLCB0aGlzLm1ldHJpY3Muc3luY09wZXJhdGlvblRpbWUpXG4gICAgICB0aGlzLnVwZGF0ZUJlbmNobWFyaygn5ZCM5q2l5oiQ5Yqf546HJywgdGhpcy5tZXRyaWNzLnN5bmNTdWNjZXNzUmF0ZSlcbiAgICB9XG4gIH1cblxuICAvLyDmtYvph4/mlbDmja7lupPmgKfog71cbiAgYXN5bmMgbWVhc3VyZURhdGFiYXNlUGVyZm9ybWFuY2UoZGJPcGVyYXRpb246ICgpID0+IFByb21pc2U8YW55Piwgb3BlcmF0aW9uVHlwZTogJ3F1ZXJ5JyB8ICd3cml0ZScgfCAncmVhZCcpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBjb25zdCBzdGFydCA9IHBlcmZvcm1hbmNlLm5vdygpXG4gICAgdHJ5IHtcbiAgICAgIGF3YWl0IGRiT3BlcmF0aW9uKClcbiAgICAgIGNvbnN0IGVuZCA9IHBlcmZvcm1hbmNlLm5vdygpXG4gICAgICBjb25zdCBkdXJhdGlvbiA9IGVuZCAtIHN0YXJ0XG5cbiAgICAgIHN3aXRjaCAob3BlcmF0aW9uVHlwZSkge1xuICAgICAgICBjYXNlICdxdWVyeSc6XG4gICAgICAgICAgdGhpcy5tZXRyaWNzLmRiUXVlcnlUaW1lID0gZHVyYXRpb25cbiAgICAgICAgICB0aGlzLnVwZGF0ZUJlbmNobWFyaygn5pWw5o2u5bqT5p+l6K+i5pe26Ze0JywgZHVyYXRpb24pXG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgY2FzZSAnd3JpdGUnOlxuICAgICAgICAgIHRoaXMubWV0cmljcy5kYldyaXRlVGltZSA9IGR1cmF0aW9uXG4gICAgICAgICAgdGhpcy51cGRhdGVCZW5jaG1hcmsoJ+aVsOaNruW6k+WGmeWFpeaXtumXtCcsIGR1cmF0aW9uKVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGNhc2UgJ3JlYWQnOlxuICAgICAgICAgIHRoaXMubWV0cmljcy5kYlJlYWRUaW1lID0gZHVyYXRpb25cbiAgICAgICAgICB0aGlzLnVwZGF0ZUJlbmNobWFyaygn5pWw5o2u5bqT6K+75Y+W5pe26Ze0JywgZHVyYXRpb24pXG4gICAgICAgICAgYnJlYWtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRGF0YWJhc2UgcGVyZm9ybWFuY2UgbWVhc3VyZW1lbnQgZmFpbGVkOicsIGVycm9yKVxuICAgIH1cbiAgfVxuXG4gIC8vIOiuoeeul+aAu+mYu+WhnuaXtumXtFxuICBwcml2YXRlIGNhbGN1bGF0ZVRvdGFsQmxvY2tpbmdUaW1lKCk6IG51bWJlciB7XG4gICAgY29uc3QgbmF2aWdhdGlvbiA9IHBlcmZvcm1hbmNlLmdldEVudHJpZXNCeVR5cGUoJ25hdmlnYXRpb24nKVswXSBhcyBQZXJmb3JtYW5jZU5hdmlnYXRpb25UaW1pbmdcbiAgICBjb25zdCB0YnQgPSB0aGlzLm1ldHJpY3MudG90YWxCbG9ja2luZ1RpbWUgfHwgMFxuICAgIHJldHVybiB0YnRcbiAgfVxuXG4gIC8vIOabtOaWsOWfuuWHhuWAvFxuICBwcml2YXRlIHVwZGF0ZUJlbmNobWFyayhuYW1lOiBzdHJpbmcsIHZhbHVlOiBudW1iZXIpOiB2b2lkIHtcbiAgICBjb25zdCBiZW5jaG1hcmsgPSB0aGlzLmJlbmNobWFya3MuZmluZChiID0+IGIubmFtZSA9PT0gbmFtZSlcbiAgICBpZiAoYmVuY2htYXJrKSB7XG4gICAgICBiZW5jaG1hcmsuY3VycmVudFZhbHVlID0gdmFsdWVcbiAgICB9XG4gIH1cblxuICAvLyDojrflj5bmgKfog73miqXlkYpcbiAgZ2V0UGVyZm9ybWFuY2VSZXBvcnQoKTogUGVyZm9ybWFuY2VSZXBvcnQge1xuICAgIGNvbnN0IG92ZXJhbGxQcm9ncmVzcyA9IHRoaXMuY2FsY3VsYXRlT3ZlcmFsbFByb2dyZXNzKClcbiAgICBjb25zdCBjYXRlZ29yeVByb2dyZXNzID0gdGhpcy5jYWxjdWxhdGVDYXRlZ29yeVByb2dyZXNzKClcblxuICAgIHJldHVybiB7XG4gICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICAgIG1ldHJpY3M6IHRoaXMubWV0cmljcyxcbiAgICAgIGJlbmNobWFya3M6IHRoaXMuYmVuY2htYXJrcyxcbiAgICAgIG92ZXJhbGxQcm9ncmVzcyxcbiAgICAgIGNhdGVnb3J5UHJvZ3Jlc3MsXG4gICAgICByZWNvbW1lbmRhdGlvbnM6IHRoaXMuZ2VuZXJhdGVSZWNvbW1lbmRhdGlvbnMoKVxuICAgIH1cbiAgfVxuXG4gIC8vIOiuoeeul+aAu+S9k+i/m+W6plxuICBwcml2YXRlIGNhbGN1bGF0ZU92ZXJhbGxQcm9ncmVzcygpOiBudW1iZXIge1xuICAgIGxldCB0b3RhbFByb2dyZXNzID0gMFxuICAgIGxldCBjb3VudCA9IDBcblxuICAgIHRoaXMuYmVuY2htYXJrcy5mb3JFYWNoKGJlbmNobWFyayA9PiB7XG4gICAgICBpZiAoYmVuY2htYXJrLmN1cnJlbnRWYWx1ZSA+IDAgJiYgYmVuY2htYXJrLnRhcmdldFZhbHVlID4gMCkge1xuICAgICAgICBjb25zdCBwcm9ncmVzcyA9IE1hdGgubWluKDEwMCwgKGJlbmNobWFyay5jdXJyZW50VmFsdWUgLyBiZW5jaG1hcmsudGFyZ2V0VmFsdWUpICogMTAwKVxuICAgICAgICB0b3RhbFByb2dyZXNzICs9IHByb2dyZXNzXG4gICAgICAgIGNvdW50KytcbiAgICAgIH1cbiAgICB9KVxuXG4gICAgcmV0dXJuIGNvdW50ID4gMCA/IHRvdGFsUHJvZ3Jlc3MgLyBjb3VudCA6IDBcbiAgfVxuXG4gIC8vIOiuoeeul+WIhuexu+i/m+W6plxuICBwcml2YXRlIGNhbGN1bGF0ZUNhdGVnb3J5UHJvZ3Jlc3MoKTogUmVjb3JkPHN0cmluZywgbnVtYmVyPiB7XG4gICAgY29uc3QgY2F0ZWdvcmllcyA9IFsnbG9hZGluZycsICdydW50aW1lJywgJ3N5bmMnLCAnZGF0YWJhc2UnLCAnY29tcG9uZW50JywgJ25ldHdvcmsnXVxuICAgIGNvbnN0IHByb2dyZXNzOiBSZWNvcmQ8c3RyaW5nLCBudW1iZXI+ID0ge31cblxuICAgIGNhdGVnb3JpZXMuZm9yRWFjaChjYXRlZ29yeSA9PiB7XG4gICAgICBsZXQgdG90YWxQcm9ncmVzcyA9IDBcbiAgICAgIGxldCBjb3VudCA9IDBcblxuICAgICAgdGhpcy5iZW5jaG1hcmtzLmZpbHRlcihiID0+IGIuY2F0ZWdvcnkgPT09IGNhdGVnb3J5KS5mb3JFYWNoKGJlbmNobWFyayA9PiB7XG4gICAgICAgIGlmIChiZW5jaG1hcmsuY3VycmVudFZhbHVlID4gMCAmJiBiZW5jaG1hcmsudGFyZ2V0VmFsdWUgPiAwKSB7XG4gICAgICAgICAgY29uc3QgcHJvZ3Jlc3MgPSBNYXRoLm1pbigxMDAsIChiZW5jaG1hcmsuY3VycmVudFZhbHVlIC8gYmVuY2htYXJrLnRhcmdldFZhbHVlKSAqIDEwMClcbiAgICAgICAgICB0b3RhbFByb2dyZXNzICs9IHByb2dyZXNzXG4gICAgICAgICAgY291bnQrK1xuICAgICAgICB9XG4gICAgICB9KVxuXG4gICAgICBwcm9ncmVzc1tjYXRlZ29yeV0gPSBjb3VudCA+IDAgPyB0b3RhbFByb2dyZXNzIC8gY291bnQgOiAwXG4gICAgfSlcblxuICAgIHJldHVybiBwcm9ncmVzc1xuICB9XG5cbiAgLy8g55Sf5oiQ5LyY5YyW5bu66K6uXG4gIHByaXZhdGUgZ2VuZXJhdGVSZWNvbW1lbmRhdGlvbnMoKTogc3RyaW5nW10ge1xuICAgIGNvbnN0IHJlY29tbWVuZGF0aW9uczogc3RyaW5nW10gPSBbXVxuXG4gICAgdGhpcy5iZW5jaG1hcmtzLmZvckVhY2goYmVuY2htYXJrID0+IHtcbiAgICAgIGlmIChiZW5jaG1hcmsuY3VycmVudFZhbHVlID4gMCkge1xuICAgICAgICBjb25zdCByYXRpbyA9IGJlbmNobWFyay5jdXJyZW50VmFsdWUgLyBiZW5jaG1hcmsudGFyZ2V0VmFsdWVcblxuICAgICAgICBpZiAocmF0aW8gPiAyKSB7XG4gICAgICAgICAgcmVjb21tZW5kYXRpb25zLnB1c2goYCR7YmVuY2htYXJrLm5hbWV95Lil6YeN6LaF5qCHKCR7YmVuY2htYXJrLmN1cnJlbnRWYWx1ZX0ke2JlbmNobWFyay51bml0fe+8jOebruaghyR7YmVuY2htYXJrLnRhcmdldFZhbHVlfSR7YmVuY2htYXJrLnVuaXR9Ke+8jOmcgOimgeeri+WNs+S8mOWMlmApXG4gICAgICAgIH0gZWxzZSBpZiAocmF0aW8gPiAxLjUpIHtcbiAgICAgICAgICByZWNvbW1lbmRhdGlvbnMucHVzaChgJHtiZW5jaG1hcmsubmFtZX3otoXlh7rpooTmnJ8oJHtiZW5jaG1hcmsuY3VycmVudFZhbHVlfSR7YmVuY2htYXJrLnVuaXR977yM55uu5qCHJHtiZW5jaG1hcmsudGFyZ2V0VmFsdWV9JHtiZW5jaG1hcmsudW5pdH0p77yM5bu66K6u5LyY5YWI5LyY5YyWYClcbiAgICAgICAgfSBlbHNlIGlmIChyYXRpbyA+IDEuMikge1xuICAgICAgICAgIHJlY29tbWVuZGF0aW9ucy5wdXNoKGAke2JlbmNobWFyay5uYW1lfeeVpemrmOS6juebruaghygke2JlbmNobWFyay5jdXJyZW50VmFsdWV9JHtiZW5jaG1hcmsudW5pdH3vvIznm67moIcke2JlbmNobWFyay50YXJnZXRWYWx1ZX0ke2JlbmNobWFyay51bml0fSnvvIzlj6/ku6Xov5vkuIDmraXkvJjljJZgKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSlcblxuICAgIHJldHVybiByZWNvbW1lbmRhdGlvbnNcbiAgfVxuXG4gIC8vIOiuvue9ruaAp+iDveebruagh1xuICBzZXRQZXJmb3JtYW5jZVRhcmdldHModGFyZ2V0czogUGFydGlhbDxSZWNvcmQ8c3RyaW5nLCBudW1iZXI+Pik6IHZvaWQge1xuICAgIE9iamVjdC5lbnRyaWVzKHRhcmdldHMpLmZvckVhY2goKFtuYW1lLCB0YXJnZXRWYWx1ZV0pID0+IHtcbiAgICAgIGNvbnN0IGJlbmNobWFyayA9IHRoaXMuYmVuY2htYXJrcy5maW5kKGIgPT4gYi5uYW1lID09PSBuYW1lKVxuICAgICAgaWYgKGJlbmNobWFyaykge1xuICAgICAgICBiZW5jaG1hcmsudGFyZ2V0VmFsdWUgPSB0YXJnZXRWYWx1ZVxuICAgICAgfVxuICAgIH0pXG4gIH1cblxuICAvLyDojrflj5blvZPliY3ln7rlh4blgLxcbiAgZ2V0Q3VycmVudE1ldHJpY3MoKTogUGVyZm9ybWFuY2VNZXRyaWNzIHtcbiAgICByZXR1cm4geyAuLi50aGlzLm1ldHJpY3MgfVxuICB9XG5cbiAgLy8g6YeN572u5Z+65YeGXG4gIHJlc2V0KCk6IHZvaWQge1xuICAgIHRoaXMubWV0cmljcyA9IHtcbiAgICAgIGZpcnN0Q29udGVudGZ1bFBhaW50OiAwLFxuICAgICAgbGFyZ2VzdENvbnRlbnRmdWxQYWludDogMCxcbiAgICAgIHRpbWVUb0ludGVyYWN0aXZlOiAwLFxuICAgICAgdG90YWxCbG9ja2luZ1RpbWU6IDAsXG4gICAgICBjdW11bGF0aXZlTGF5b3V0U2hpZnQ6IDAsXG4gICAgICBqc0hlYXBTaXplTGltaXQ6IDAsXG4gICAgICB0b3RhbEpTSGVhcFNpemU6IDAsXG4gICAgICB1c2VkSlNIZWFwU2l6ZTogMCxcbiAgICAgIHN5bmNPcGVyYXRpb25UaW1lOiAwLFxuICAgICAgc3luY1N1Y2Nlc3NSYXRlOiAwLFxuICAgICAgY29uZmxpY3RSZXNvbHV0aW9uVGltZTogMCxcbiAgICAgIGRiUXVlcnlUaW1lOiAwLFxuICAgICAgZGJXcml0ZVRpbWU6IDAsXG4gICAgICBkYlJlYWRUaW1lOiAwLFxuICAgICAgY29tcG9uZW50UmVuZGVyVGltZTogMCxcbiAgICAgIHN0YXRlVXBkYXRlVGltZTogMCxcbiAgICAgIHZpcnR1YWxTY3JvbGxQZXJmb3JtYW5jZTogMCxcbiAgICAgIGFwaVJlc3BvbnNlVGltZTogMCxcbiAgICAgIG5ldHdvcmtMYXRlbmN5OiAwLFxuICAgICAgYnVuZGxlTG9hZFRpbWU6IDBcbiAgICB9XG5cbiAgICB0aGlzLmJlbmNobWFya3MuZm9yRWFjaChiZW5jaG1hcmsgPT4ge1xuICAgICAgYmVuY2htYXJrLmN1cnJlbnRWYWx1ZSA9IDBcbiAgICB9KVxuICB9XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGVyZm9ybWFuY2VSZXBvcnQge1xuICB0aW1lc3RhbXA6IHN0cmluZ1xuICBtZXRyaWNzOiBQZXJmb3JtYW5jZU1ldHJpY3NcbiAgYmVuY2htYXJrczogUGVyZm9ybWFuY2VCZW5jaG1hcmtbXVxuICBvdmVyYWxsUHJvZ3Jlc3M6IG51bWJlclxuICBjYXRlZ29yeVByb2dyZXNzOiBSZWNvcmQ8c3RyaW5nLCBudW1iZXI+XG4gIHJlY29tbWVuZGF0aW9uczogc3RyaW5nW11cbn1cblxuLy8g5Yib5bu65YWo5bGA5oCn6IO95Z+65YeG5a6e5L6LXG5leHBvcnQgY29uc3QgcGVyZm9ybWFuY2VCZW5jaG1hcmsgPSBuZXcgUGVyZm9ybWFuY2VCZW5jaG1hcmtTdWl0ZSgpIl0sInZlcnNpb24iOjN9