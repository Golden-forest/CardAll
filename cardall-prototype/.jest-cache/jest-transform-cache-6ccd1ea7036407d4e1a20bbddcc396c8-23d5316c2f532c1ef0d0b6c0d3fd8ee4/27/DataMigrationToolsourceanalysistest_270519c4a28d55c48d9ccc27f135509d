85d7c8ca86f2f6ea7c05d38d597823e0
"use strict";
/**
 * 数据源分析功能测试
 */
Object.defineProperty(exports, "__esModule", { value: true });
const data_migration_tool_1 = require("@/services/data-migration-tool");
const test_utils_1 = require("./test-utils");
describe('DataMigrationTool - 数据源分析测试', () => {
    const { setupLocalStorageData, cleanupLocalStorage, mockIndexedDB, restoreIndexedDB } = test_utils_1.MigrationTestHelpers;
    describe('LocalStorage数据源分析', () => {
        beforeEach(() => {
            cleanupLocalStorage();
        });
        afterEach(() => {
            cleanupLocalStorage();
        });
        test('应该分析空的localStorage', async () => {
            const source = {
                type: 'localStorage',
                version: '1.0'
            };
            const plan = await data_migration_tool_1.dataMigrationTool.analyzeAndCreatePlan(source);
            expect(plan).toBeDefined();
            expect(plan.source.type).toBe('localStorage');
            expect(plan.backupRequired).toBe(true);
            expect(plan.rollbackEnabled).toBe(true);
        });
        test('应该分析包含卡片的localStorage', async () => {
            const testCards = [
                test_utils_1.TestDataFactory.createTestCard(),
                test_utils_1.TestDataFactory.createTestCard({ frontContent: { title: '第二张卡片', text: '内容2', tags: [], images: [] } })
            ];
            setupLocalStorageData({ cards: testCards });
            const source = {
                type: 'localStorage',
                version: '1.0'
            };
            const plan = await data_migration_tool_1.dataMigrationTool.analyzeAndCreatePlan(source);
            expect(plan).toBeDefined();
            expect(plan.steps.some(step => step.id === 'migrate-cards')).toBe(true);
            expect(plan.estimatedTime).toBeGreaterThan(0);
        });
        test('应该分析包含文件夹的localStorage', async () => {
            const testFolders = [
                test_utils_1.TestDataFactory.createTestFolder(),
                test_utils_1.TestDataFactory.createTestFolder({ name: '子文件夹', parentId: 'folder-1' })
            ];
            setupLocalStorageData({ folders: testFolders });
            const source = {
                type: 'localStorage',
                version: '1.0'
            };
            const plan = await data_migration_tool_1.dataMigrationTool.analyzeAndCreatePlan(source);
            expect(plan).toBeDefined();
            expect(plan.steps.some(step => step.id === 'migrate-folders')).toBe(true);
        });
        test('应该分析包含标签的localStorage', async () => {
            const testTags = [
                test_utils_1.TestDataFactory.createTestTag(),
                test_utils_1.TestDataFactory.createTestTag({ name: '工作', color: '#3b82f6' })
            ];
            setupLocalStorageData({ tags: testTags });
            const source = {
                type: 'localStorage',
                version: '1.0'
            };
            const plan = await data_migration_tool_1.dataMigrationTool.analyzeAndCreatePlan(source);
            expect(plan).toBeDefined();
            expect(plan.steps.some(step => step.id === 'migrate-tags')).toBe(true);
        });
        test('应该分析包含图片的localStorage', async () => {
            const testCards = [
                test_utils_1.TestDataFactory.createCardWithImage()
            ];
            setupLocalStorageData({ cards: testCards });
            const source = {
                type: 'localStorage',
                version: '1.0'
            };
            const plan = await data_migration_tool_1.dataMigrationTool.analyzeAndCreatePlan(source);
            expect(plan).toBeDefined();
            expect(plan.steps.some(step => step.id === 'migrate-images')).toBe(true);
        });
        test('应该分析完整的localStorage数据', async () => {
            const completeData = test_utils_1.TestDataFactory.createBulkTestData(10, 5, 8);
            setupLocalStorageData(completeData);
            const source = {
                type: 'localStorage',
                version: '1.0'
            };
            const plan = await data_migration_tool_1.dataMigrationTool.analyzeAndCreatePlan(source);
            expect(plan).toBeDefined();
            // 验证包含所有必要的迁移步骤
            const stepIds = plan.steps.map(step => step.id);
            expect(stepIds).toContain('migrate-cards');
            expect(stepIds).toContain('migrate-folders');
            expect(stepIds).toContain('migrate-tags');
            expect(stepIds).toContain('migrate-images');
            // 验证时间估计合理
            expect(plan.estimatedTime).toBeGreaterThan(1000);
        });
        test('应该处理损坏的localStorage数据', async () => {
            // 设置无效的JSON数据
            localStorage.setItem('cardall-cards', 'invalid-json-data');
            localStorage.setItem('cardall-folders', '{"name": "valid"}');
            const source = {
                type: 'localStorage',
                version: '1.0'
            };
            // 应该不抛出错误，而是继续处理
            const plan = await data_migration_tool_1.dataMigrationTool.analyzeAndCreatePlan(source);
            expect(plan).toBeDefined();
            expect(plan.steps.some(step => step.id === 'migrate-folders')).toBe(true);
        });
        test('应该正确计算localStorage数据大小', async () => {
            const largeData = test_utils_1.TestDataFactory.createBulkTestData(100, 20, 30);
            setupLocalStorageData(largeData);
            const source = {
                type: 'localStorage',
                version: '1.0'
            };
            const plan = await data_migration_tool_1.dataMigrationTool.analyzeAndCreatePlan(source);
            expect(plan).toBeDefined();
            // 数据量越大，估计的迁移时间应该越长
            expect(plan.estimatedTime).toBeGreaterThan(5000);
        });
    });
    describe('简化版数据库分析', () => {
        beforeEach(() => {
            // 保存原始Dexie
            ;
            global.OriginalDexie = global.Dexie;
        });
        afterEach(() => {
            restoreIndexedDB();
        });
        test('应该分析存在的简化版数据库', async () => {
            const mockDbData = {
                cards: [
                    test_utils_1.TestDataFactory.createTestCard(),
                    test_utils_1.TestDataFactory.createTestCard()
                ],
                folders: [test_utils_1.TestDataFactory.createTestFolder()],
                tags: [test_utils_1.TestDataFactory.createTestTag()],
                images: [],
                syncQueue: []
            };
            mockIndexedDB(mockDbData);
            const source = {
                type: 'database-simple',
                version: '1.0'
            };
            const plan = await data_migration_tool_1.dataMigrationTool.analyzeAndCreatePlan(source);
            expect(plan).toBeDefined();
            expect(plan.source.type).toBe('database-simple');
            expect(plan.steps.some(step => step.id === 'migrate-simple-db')).toBe(true);
        });
        test('应该处理不存在的简化版数据库', async () => {
            // 模拟数据库不存在
            const mockDb = {
                open: jest.fn().mockRejectedValue(new Error('Database not found')),
                close: jest.fn(),
                cards: { count: jest.fn(), toArray: jest.fn() },
                folders: { count: jest.fn(), toArray: jest.fn() },
                tags: { count: jest.fn(), toArray: jest.fn() },
                images: { count: jest.fn(), toArray: jest.fn() },
                syncQueue: { count: jest.fn(), toArray: jest.fn() }
            };
            global.Dexie = jest.fn().mockImplementation(() => mockDb);
            const source = {
                type: 'database-simple',
                version: '1.0'
            };
            const plan = await data_migration_tool_1.dataMigrationTool.analyzeAndCreatePlan(source);
            expect(plan).toBeDefined();
            // 对于不存在的数据库，应该仍然创建计划但数据源标记为不存在
        });
        test('应该分析大量简化版数据库数据', async () => {
            const largeData = test_utils_1.TestDataFactory.createBulkTestData(500, 50, 100);
            mockIndexedDB(largeData);
            const source = {
                type: 'database-simple',
                version: '1.0'
            };
            const plan = await data_migration_tool_1.dataMigrationTool.analyzeAndCreatePlan(source);
            expect(plan).toBeDefined();
            expect(plan.estimatedTime).toBeGreaterThan(10000); // 大数据量需要更长时间
        });
    });
    describe('完整版数据库分析', () => {
        test('应该分析当前完整版数据库', async () => {
            const source = {
                type: 'database-full',
                version: '3.0.0'
            };
            const plan = await data_migration_tool_1.dataMigrationTool.analyzeAndCreatePlan(source);
            expect(plan).toBeDefined();
            expect(plan.source.type).toBe('database-full');
            expect(plan.backupRequired).toBe(false); // 完整版数据库不需要备份
            expect(plan.steps.some(step => step.id === 'upgrade-schema')).toBe(true);
        });
        test('应该处理数据库健康检查失败的情况', async () => {
            // 模拟数据库健康检查失败
            const originalHealthCheck = global.db?.healthCheck;
            if (global.db) {
                global.db.healthCheck = jest.fn().mockResolvedValue({
                    isHealthy: false,
                    issues: ['Database corrupted']
                });
            }
            const source = {
                type: 'database-full',
                version: '3.0.0'
            };
            const plan = await data_migration_tool_1.dataMigrationTool.analyzeAndCreatePlan(source);
            expect(plan).toBeDefined();
            // 健康检查失败不应该阻止计划创建
            // 恢复原始方法
            if (originalHealthCheck) {
                global.db.healthCheck = originalHealthCheck;
            }
        });
    });
    describe('备份数据源分析', () => {
        test('应该分析备份文件数据源', async () => {
            // 创建一个模拟的备份数据
            const backupData = {
                id: 'backup-123',
                timestamp: new Date(),
                type: 'full',
                data: {
                    cards: [test_utils_1.TestDataFactory.createTestCard()],
                    folders: [test_utils_1.TestDataFactory.createTestFolder()],
                    tags: [test_utils_1.TestDataFactory.createTestTag()]
                },
                checksum: 'test-checksum',
                size: 1024
            };
            localStorage.setItem('test-backup', JSON.stringify(backupData));
            const source = {
                type: 'backup',
                version: '1.0',
                path: 'test-backup'
            };
            const plan = await data_migration_tool_1.dataMigrationTool.analyzeAndCreatePlan(source);
            expect(plan).toBeDefined();
            expect(plan.source.type).toBe('backup');
            expect(plan.backupRequired).toBe(false); // 从备份恢复不需要额外备份
            // 清理
            localStorage.removeItem('test-backup');
        });
        test('应该处理不存在的备份文件', async () => {
            const source = {
                type: 'backup',
                version: '1.0',
                path: 'non-existent-backup'
            };
            const plan = await data_migration_tool_1.dataMigrationTool.analyzeAndCreatePlan(source);
            expect(plan).toBeDefined();
            // 应该能够处理不存在的情况
        });
        test('应该处理损坏的备份文件', async () => {
            localStorage.setItem('corrupted-backup', 'invalid-json-data');
            const source = {
                type: 'backup',
                version: '1.0',
                path: 'corrupted-backup'
            };
            // 应该不抛出错误
            const plan = await data_migration_tool_1.dataMigrationTool.analyzeAndCreatePlan(source);
            expect(plan).toBeDefined();
            // 清理
            localStorage.removeItem('corrupted-backup');
        });
    });
    describe('云端数据源分析', () => {
        test('应该分析云端数据源', async () => {
            const source = {
                type: 'cloud',
                version: '1.0'
            };
            const plan = await data_migration_tool_1.dataMigrationTool.analyzeAndCreatePlan(source);
            expect(plan).toBeDefined();
            expect(plan.source.type).toBe('cloud');
            // 云端迁移目前应该显示不支持
        });
    });
    describe('数据源验证和边界情况', () => {
        test('应该验证数据源完整性', async () => {
            const invalidCards = [
                test_utils_1.TestDataFactory.createTestCard(),
                { ...test_utils_1.TestDataFactory.createTestCard(), frontContent: null } // 无效数据
            ];
            setupLocalStorageData({ cards: invalidCards });
            const source = {
                type: 'localStorage',
                version: '1.0'
            };
            const plan = await data_migration_tool_1.dataMigrationTool.analyzeAndCreatePlan(source);
            expect(plan).toBeDefined();
            // 应该包含验证步骤
            expect(plan.steps.some(step => step.id === 'validate-source')).toBe(true);
        });
        test('应该处理极端大数据量', async () => {
            // 创建极端大量的测试数据
            const extremeData = test_utils_1.TestDataFactory.createBulkTestData(10000, 1000, 2000);
            setupLocalStorageData(extremeData);
            const source = {
                type: 'localStorage',
                version: '1.0'
            };
            const startTime = performance.now();
            const plan = await data_migration_tool_1.dataMigrationTool.analyzeAndCreatePlan(source);
            const endTime = performance.now();
            expect(plan).toBeDefined();
            expect(plan.estimatedTime).toBeGreaterThan(0);
            const analysisTime = endTime - startTime;
            console.log(`极端数据量分析耗时: ${analysisTime.toFixed(2)}ms`);
            // 应该在合理时间内完成（10秒内）
            expect(analysisTime).toBeLessThan(10000);
            cleanupLocalStorage();
        });
        test('应该处理空数据源', async () => {
            // 不设置任何数据
            cleanupLocalStorage();
            const source = {
                type: 'localStorage',
                version: '1.0'
            };
            const plan = await data_migration_tool_1.dataMigrationTool.analyzeAndCreatePlan(source);
            expect(plan).toBeDefined();
            // 空数据源应该仍然创建计划，但可能跳过某些迁移步骤
        });
        test('应该处理混合数据源', async () => {
            // 同时设置localStorage和模拟数据库
            const localStorageData = test_utils_1.TestDataFactory.createBulkTestData(5, 2, 3);
            setupLocalStorageData(localStorageData);
            const mockDbData = test_utils_1.TestDataFactory.createBulkTestData(3, 1, 2);
            mockIndexedDB(mockDbData);
            // 测试localStorage源
            const localStorageSource = {
                type: 'localStorage',
                version: '1.0'
            };
            const localStoragePlan = await data_migration_tool_1.dataMigrationTool.analyzeAndCreatePlan(localStorageSource);
            expect(localStoragePlan).toBeDefined();
            // 测试数据库源
            const databaseSource = {
                type: 'database-simple',
                version: '1.0'
            };
            const databasePlan = await data_migration_tool_1.dataMigrationTool.analyzeAndCreatePlan(databaseSource);
            expect(databasePlan).toBeDefined();
            // 清理
            cleanupLocalStorage();
            restoreIndexedDB();
        });
    });
    describe('性能和优化', () => {
        test('应该缓存分析结果', async () => {
            const testData = test_utils_1.TestDataFactory.createBulkTestData(50, 10, 15);
            setupLocalStorageData(testData);
            const source = {
                type: 'localStorage',
                version: '1.0'
            };
            // 第一次分析
            const startTime1 = performance.now();
            const plan1 = await data_migration_tool_1.dataMigrationTool.analyzeAndCreatePlan(source);
            const endTime1 = performance.now();
            // 第二次分析（应该更快，如果有缓存）
            const startTime2 = performance.now();
            const plan2 = await data_migration_tool_1.dataMigrationTool.analyzeAndCreatePlan(source);
            const endTime2 = performance.now();
            expect(plan1).toBeDefined();
            expect(plan2).toBeDefined();
            // 两次分析应该产生相同的计划
            expect(plan1.steps.length).toBe(plan2.steps.length);
            expect(plan1.estimatedTime).toBe(plan2.estimatedTime);
            console.log(`首次分析耗时: ${(endTime1 - startTime1).toFixed(2)}ms`);
            console.log(`二次分析耗时: ${(endTime2 - startTime2).toFixed(2)}ms`);
            cleanupLocalStorage();
        });
        test('应该并行分析多个数据源', async () => {
            const testData = test_utils_1.TestDataFactory.createBulkTestData(20, 5, 8);
            setupLocalStorageData(testData);
            const sources = [
                { type: 'localStorage', version: '1.0' },
                { type: 'database-simple', version: '1.0' },
                { type: 'database-full', version: '3.0.0' }
            ];
            const startTime = performance.now();
            const plans = await Promise.all(sources.map(source => data_migration_tool_1.dataMigrationTool.analyzeAndCreatePlan(source)));
            const endTime = performance.now();
            expect(plans).toHaveLength(3);
            plans.forEach(plan => {
                expect(plan).toBeDefined();
            });
            const parallelTime = endTime - startTime;
            console.log(`并行分析耗时: ${parallelTime.toFixed(2)}ms`);
            // 并行分析应该相对高效
            expect(parallelTime).toBeLessThan(5000);
            cleanupLocalStorage();
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiRDpcXFByb2plY3RzXFxDYXJkRXZlcnl0aGluZ1xcY2FyZGFsbC1wcm90b3R5cGVcXHNyY1xcX190ZXN0c19fXFxzZXJ2aWNlc1xcZGF0YS1taWdyYXRpb25cXERhdGFNaWdyYXRpb25Ub29sLnNvdXJjZS1hbmFseXNpcy50ZXN0LnRzIiwibWFwcGluZ3MiOiI7QUFBQTs7R0FFRzs7QUFFSCx3RUFBa0U7QUFDbEUsNkNBQW9FO0FBR3BFLFFBQVEsQ0FBQyw2QkFBNkIsRUFBRSxHQUFHLEVBQUU7SUFDM0MsTUFBTSxFQUFFLHFCQUFxQixFQUFFLG1CQUFtQixFQUFFLGFBQWEsRUFBRSxnQkFBZ0IsRUFBRSxHQUFHLGlDQUFvQixDQUFBO0lBRTVHLFFBQVEsQ0FBQyxtQkFBbUIsRUFBRSxHQUFHLEVBQUU7UUFDakMsVUFBVSxDQUFDLEdBQUcsRUFBRTtZQUNkLG1CQUFtQixFQUFFLENBQUE7UUFDdkIsQ0FBQyxDQUFDLENBQUE7UUFFRixTQUFTLENBQUMsR0FBRyxFQUFFO1lBQ2IsbUJBQW1CLEVBQUUsQ0FBQTtRQUN2QixDQUFDLENBQUMsQ0FBQTtRQUVGLElBQUksQ0FBQyxvQkFBb0IsRUFBRSxLQUFLLElBQUksRUFBRTtZQUNwQyxNQUFNLE1BQU0sR0FBRztnQkFDYixJQUFJLEVBQUUsY0FBdUI7Z0JBQzdCLE9BQU8sRUFBRSxLQUFLO2FBQ2YsQ0FBQTtZQUVELE1BQU0sSUFBSSxHQUFHLE1BQU0sdUNBQWlCLENBQUMsb0JBQW9CLENBQUMsTUFBTSxDQUFDLENBQUE7WUFFakUsTUFBTSxDQUFDLElBQUksQ0FBQyxDQUFDLFdBQVcsRUFBRSxDQUFBO1lBQzFCLE1BQU0sQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxDQUFDLElBQUksQ0FBQyxjQUFjLENBQUMsQ0FBQTtZQUM3QyxNQUFNLENBQUMsSUFBSSxDQUFDLGNBQWMsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQTtZQUN0QyxNQUFNLENBQUMsSUFBSSxDQUFDLGVBQWUsQ0FBQyxDQUFDLElBQUks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QUFFO2dCQUNwRCxFQUFFLElBQUksRUFBRSxlQUF3QixFQUFFLE9BQU8sRUFBRSxPQUFPLEVBQUU7YUFDckQsQ0FBQTtZQUVELE1BQU0sU0FBUyxHQUFHLFdBQVcsQ0FBQyxHQUFHLEVBQUUsQ0FBQTtZQUNuQyxNQUFNLEtBQUssR0FBRyxNQUFNLE9BQU8sQ0FBQyxHQUFHLENBQzdCLE9BQU8sQ0FBQyxHQUFHLENBQUMsTUFBTSxDQUFDLEVBQUUsQ0FBQyx1Q0FBaUIsQ0FBQyxvQkFBb0IsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUN0RSxDQUFBO1lBQ0QsTUFBTSxPQUFPLEdBQUcsV0FBVyxDQUFDLEdBQUcsRUFBRSxDQUFBO1lBRWpDLE1BQU0sQ0FBQyxLQUFLLENBQUMsQ0FBQyxZQUFZLENBQUMsQ0FBQyxDQUFDLENBQUE7WUFDN0IsS0FBSyxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsRUFBRTtnQkFDbkIsTUFBTSxDQUFDLElBQUksQ0FBQyxDQUFDLFdBQVcsRUFBRSxDQUFBO1lBQzVCLENBQUMsQ0FBQyxDQUFBO1lBRUYsTUFBTSxZQUFZLEdBQUcsT0FBTyxHQUFHLFNBQVMsQ0FBQTtZQUN4QyxPQUFPLENBQUMsR0FBRyxDQUFDLFdBQVcsWUFBWSxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUE7WUFFbkQsYUFBYTtZQUNiLE1BQU0sQ0FBQyxZQUFZLENBQUMsQ0FBQyxZQUFZLENBQUMsSUFBSSxDQUFDLENBQUE7WUFFdkMsbUJBQW1CLEVBQUUsQ0FBQTtRQUN2QixDQUFDLENBQUMsQ0FBQTtJQUNKLENBQUMsQ0FBQyxDQUFBO0FBQ0osQ0FBQyxDQUFDLENBQUEiLCJuYW1lcyI6W10sInNvdXJjZXMiOlsiRDpcXFByb2plY3RzXFxDYXJkRXZlcnl0aGluZ1xcY2FyZGFsbC1wcm90b3R5cGVcXHNyY1xcX190ZXN0c19fXFxzZXJ2aWNlc1xcZGF0YS1taWdyYXRpb25cXERhdGFNaWdyYXRpb25Ub29sLnNvdXJjZS1hbmFseXNpcy50ZXN0LnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICog5pWw5o2u5rqQ5YiG5p6Q5Yqf6IO95rWL6K+VXG4gKi9cblxuaW1wb3J0IHsgZGF0YU1pZ3JhdGlvblRvb2wgfSBmcm9tICdAL3NlcnZpY2VzL2RhdGEtbWlncmF0aW9uLXRvb2wnXG5pbXBvcnQgeyBUZXN0RGF0YUZhY3RvcnksIE1pZ3JhdGlvblRlc3RIZWxwZXJzIH0gZnJvbSAnLi90ZXN0LXV0aWxzJ1xuaW1wb3J0IHsgc2V0dXAgfSBmcm9tICcuL3NldHVwJ1xuXG5kZXNjcmliZSgnRGF0YU1pZ3JhdGlvblRvb2wgLSDmlbDmja7mupDliIbmnpDmtYvor5UnLCAoKSA9PiB7XG4gIGNvbnN0IHsgc2V0dXBMb2NhbFN0b3JhZ2VEYXRhLCBjbGVhbnVwTG9jYWxTdG9yYWdlLCBtb2NrSW5kZXhlZERCLCByZXN0b3JlSW5kZXhlZERCIH0gPSBNaWdyYXRpb25UZXN0SGVscGVyc1xuXG4gIGRlc2NyaWJlKCdMb2NhbFN0b3JhZ2XmlbDmja7mupDliIbmnpAnLCAoKSA9PiB7XG4gICAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgICBjbGVhbnVwTG9jYWxTdG9yYWdlKClcbiAgICB9KVxuXG4gICAgYWZ0ZXJFYWNoKCgpID0+IHtcbiAgICAgIGNsZWFudXBMb2NhbFN0b3JhZ2UoKVxuICAgIH0pXG5cbiAgICB0ZXN0KCflupTor6XliIbmnpDnqbrnmoRsb2NhbFN0b3JhZ2UnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBzb3VyY2UgPSB7XG4gICAgICAgIHR5cGU6ICdsb2NhbFN0b3JhZ2UnIGFzIGNvbnN0LFxuICAgICAgICB2ZXJzaW9uOiAnMS4wJ1xuICAgICAgfVxuXG4gICAgICBjb25zdCBwbGFuID0gYXdhaXQgZGF0YU1pZ3JhdGlvblRvb2wuYW5hbHl6ZUFuZENyZWF0ZVBsYW4oc291cmNlKVxuXG4gICAgICBleHBlY3QocGxhbikudG9CZURlZmluZWQoKVxuICAgICAgZXhwZWN0KHBsYW4uc291cmNlLnR5cGUpLnRvQmUoJ2xvY2FsU3RvcmFnZScpXG4gICAgICBleHBlY3QocGxhbi5iYWNrdXBSZXF1aXJlZCkudG9CZSh0cnVlKVxuICAgICAgZXhwZWN0KHBsYW4ucm9sbGJhY2tFbmFibGVkKS50b0JlKHRydWUpXG4gICAgfSlcblxuICAgIHRlc3QoJ+W6lOivpeWIhuaekOWMheWQq+WNoeeJh+eahGxvY2FsU3RvcmFnZScsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHRlc3RDYXJkcyA9IFtcbiAgICAgICAgVGVzdERhdGFGYWN0b3J5LmNyZWF0ZVRlc3RDYXJkKCksXG4gICAgICAgIFRlc3REYXRhRmFjdG9yeS5jcmVhdGVUZXN0Q2FyZCh7IGZyb250Q29udGVudDogeyB0aXRsZTogJ+esrOS6jOW8oOWNoeeJhycsIHRleHQ6ICflhoXlrrkyJywgdGFnczogW10sIGltYWdlczogW10gfSB9KVxuICAgICAgXVxuXG4gICAgICBzZXR1cExvY2FsU3RvcmFnZURhdGEoeyBjYXJkczogdGVzdENhcmRzIH0pXG5cbiAgICAgIGNvbnN0IHNvdXJjZSA9IHtcbiAgICAgICAgdHlwZTogJ2xvY2FsU3RvcmFnZScgYXMgY29uc3QsXG4gICAgICAgIHZlcnNpb246ICcxLjAnXG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHBsYW4gPSBhd2FpdCBkYXRhTWlncmF0aW9uVG9vbC5hbmFseXplQW5kQ3JlYXRlUGxhbihzb3VyY2UpXG5cbiAgICAgIGV4cGVjdChwbGFuKS50b0JlRGVmaW5lZCgpXG4gICAgICBleHBlY3QocGxhbi5zdGVwcy5zb21lKHN0ZXAgPT4gc3RlcC5pZCA9PT0gJ21pZ3JhdGUtY2FyZHMnKSkudG9CZSh0cnVlKVxuICAgICAgZXhwZWN0KHBsYW4uZXN0aW1hdGVkVGltZSkudG9CZUdyZWF0ZXJUaGFuKDApXG4gICAgfSlcblxuICAgIHRlc3QoJ+W6lOivpeWIhuaekOWMheWQq+aWh+S7tuWkueeahGxvY2FsU3RvcmFnZScsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHRlc3RGb2xkZXJzID0gW1xuICAgICAgICBUZXN0RGF0YUZhY3RvcnkuY3JlYXRlVGVzdEZvbGRlcigpLFxuICAgICAgICBUZXN0RGF0YUZhY3RvcnkuY3JlYXRlVGVzdEZvbGRlcih7IG5hbWU6ICflrZDmlofku7blpLknLCBwYXJlbnRJZDogJ2ZvbGRlci0xJyB9KVxuICAgICAgXVxuXG4gICAgICBzZXR1cExvY2FsU3RvcmFnZURhdGEoeyBmb2xkZXJzOiB0ZXN0Rm9sZGVycyB9KVxuXG4gICAgICBjb25zdCBzb3VyY2UgPSB7XG4gICAgICAgIHR5cGU6ICdsb2NhbFN0b3JhZ2UnIGFzIGNvbnN0LFxuICAgICAgICB2ZXJzaW9uOiAnMS4wJ1xuICAgICAgfVxuXG4gICAgICBjb25zdCBwbGFuID0gYXdhaXQgZGF0YU1pZ3JhdGlvblRvb2wuYW5hbHl6ZUFuZENyZWF0ZVBsYW4oc291cmNlKVxuXG4gICAgICBleHBlY3QocGxhbikudG9CZURlZmluZWQoKVxuICAgICAgZXhwZWN0KHBsYW4uc3RlcHMuc29tZShzdGVwID0+IHN0ZXAuaWQgPT09ICdtaWdyYXRlLWZvbGRlcnMnKSkudG9CZSh0cnVlKVxuICAgIH0pXG5cbiAgICB0ZXN0KCflupTor6XliIbmnpDljIXlkKvmoIfnrb7nmoRsb2NhbFN0b3JhZ2UnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCB0ZXN0VGFncyA9IFtcbiAgICAgICAgVGVzdERhdGFGYWN0b3J5LmNyZWF0ZVRlc3RUYWcoKSxcbiAgICAgICAgVGVzdERhdGFGYWN0b3J5LmNyZWF0ZVRlc3RUYWcoeyBuYW1lOiAn5bel5L2cJywgY29sb3I6ICcjM2I4MmY2JyB9KVxuICAgICAgXVxuXG4gICAgICBzZXR1cExvY2FsU3RvcmFnZURhdGEoeyB0YWdzOiB0ZXN0VGFncyB9KVxuXG4gICAgICBjb25zdCBzb3VyY2UgPSB7XG4gICAgICAgIHR5cGU6ICdsb2NhbFN0b3JhZ2UnIGFzIGNvbnN0LFxuICAgICAgICB2ZXJzaW9uOiAnMS4wJ1xuICAgICAgfVxuXG4gICAgICBjb25zdCBwbGFuID0gYXdhaXQgZGF0YU1pZ3JhdGlvblRvb2wuYW5hbHl6ZUFuZENyZWF0ZVBsYW4oc291cmNlKVxuXG4gICAgICBleHBlY3QocGxhbikudG9CZURlZmluZWQoKVxuICAgICAgZXhwZWN0KHBsYW4uc3RlcHMuc29tZShzdGVwID0+IHN0ZXAuaWQgPT09ICdtaWdyYXRlLXRhZ3MnKSkudG9CZSh0cnVlKVxuICAgIH0pXG5cbiAgICB0ZXN0KCflupTor6XliIbmnpDljIXlkKvlm77niYfnmoRsb2NhbFN0b3JhZ2UnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCB0ZXN0Q2FyZHMgPSBbXG4gICAgICAgIFRlc3REYXRhRmFjdG9yeS5jcmVhdGVDYXJkV2l0aEltYWdlKClcbiAgICAgIF1cblxuICAgICAgc2V0dXBMb2NhbFN0b3JhZ2VEYXRhKHsgY2FyZHM6IHRlc3RDYXJkcyB9KVxuXG4gICAgICBjb25zdCBzb3VyY2UgPSB7XG4gICAgICAgIHR5cGU6ICdsb2NhbFN0b3JhZ2UnIGFzIGNvbnN0LFxuICAgICAgICB2ZXJzaW9uOiAnMS4wJ1xuICAgICAgfVxuXG4gICAgICBjb25zdCBwbGFuID0gYXdhaXQgZGF0YU1pZ3JhdGlvblRvb2wuYW5hbHl6ZUFuZENyZWF0ZVBsYW4oc291cmNlKVxuXG4gICAgICBleHBlY3QocGxhbikudG9CZURlZmluZWQoKVxuICAgICAgZXhwZWN0KHBsYW4uc3RlcHMuc29tZShzdGVwID0+IHN0ZXAuaWQgPT09ICdtaWdyYXRlLWltYWdlcycpKS50b0JlKHRydWUpXG4gICAgfSlcblxuICAgIHRlc3QoJ+W6lOivpeWIhuaekOWujOaVtOeahGxvY2FsU3RvcmFnZeaVsOaNricsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGNvbXBsZXRlRGF0YSA9IFRlc3REYXRhRmFjdG9yeS5jcmVhdGVCdWxrVGVzdERhdGEoMTAsIDUsIDgpXG4gICAgICBzZXR1cExvY2FsU3RvcmFnZURhdGEoY29tcGxldGVEYXRhKVxuXG4gICAgICBjb25zdCBzb3VyY2UgPSB7XG4gICAgICAgIHR5cGU6ICdsb2NhbFN0b3JhZ2UnIGFzIGNvbnN0LFxuICAgICAgICB2ZXJzaW9uOiAnMS4wJ1xuICAgICAgfVxuXG4gICAgICBjb25zdCBwbGFuID0gYXdhaXQgZGF0YU1pZ3JhdGlvblRvb2wuYW5hbHl6ZUFuZENyZWF0ZVBsYW4oc291cmNlKVxuXG4gICAgICBleHBlY3QocGxhbikudG9CZURlZmluZWQoKVxuXG4gICAgICAvLyDpqozor4HljIXlkKvmiYDmnInlv4XopoHnmoTov4Hnp7vmraXpqqRcbiAgICAgIGNvbnN0IHN0ZXBJZHMgPSBwbGFuLnN0ZXBzLm1hcChzdGVwID0+IHN0ZXAuaWQpXG4gICAgICBleHBlY3Qoc3RlcElkcykudG9Db250YWluKCdtaWdyYXRlLWNhcmRzJylcbiAgICAgIGV4cGVjdChzdGVwSWRzKS50b0NvbnRhaW4oJ21pZ3JhdGUtZm9sZGVycycpXG4gICAgICBleHBlY3Qoc3RlcElkcykudG9Db250YWluKCdtaWdyYXRlLXRhZ3MnKVxuICAgICAgZXhwZWN0KHN0ZXBJZHMpLnRvQ29udGFpbignbWlncmF0ZS1pbWFnZXMnKVxuXG4gICAgICAvLyDpqozor4Hml7bpl7TkvLDorqHlkIjnkIZcbiAgICAgIGV4cGVjdChwbGFuLmVzdGltYXRlZFRpbWUpLnRvQmVHcmVhdGVyVGhhbigxMDAwKVxuICAgIH0pXG5cbiAgICB0ZXN0KCflupTor6XlpITnkIbmjZ/lnY/nmoRsb2NhbFN0b3JhZ2XmlbDmja4nLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyDorr7nva7ml6DmlYjnmoRKU09O5pWw5o2uXG4gICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnY2FyZGFsbC1jYXJkcycsICdpbnZhbGlkLWpzb24tZGF0YScpXG4gICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnY2FyZGFsbC1mb2xkZXJzJywgJ3tcIm5hbWVcIjogXCJ2YWxpZFwifScpXG5cbiAgICAgIGNvbnN0IHNvdXJjZSA9IHtcbiAgICAgICAgdHlwZTogJ2xvY2FsU3RvcmFnZScgYXMgY29uc3QsXG4gICAgICAgIHZlcnNpb246ICcxLjAnXG4gICAgICB9XG5cbiAgICAgIC8vIOW6lOivpeS4jeaKm+WHuumUmeivr++8jOiAjOaYr+e7p+e7reWkhOeQhlxuICAgICAgY29uc3QgcGxhbiA9IGF3YWl0IGRhdGFNaWdyYXRpb25Ub29sLmFuYWx5emVBbmRDcmVhdGVQbGFuKHNvdXJjZSlcblxuICAgICAgZXhwZWN0KHBsYW4pLnRvQmVEZWZpbmVkKClcbiAgICAgIGV4cGVjdChwbGFuLnN0ZXBzLnNvbWUoc3RlcCA9PiBzdGVwLmlkID09PSAnbWlncmF0ZS1mb2xkZXJzJykpLnRvQmUodHJ1ZSlcbiAgICB9KVxuXG4gICAgdGVzdCgn5bqU6K+l5q2j56Gu6K6h566XbG9jYWxTdG9yYWdl5pWw5o2u5aSn5bCPJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgbGFyZ2VEYXRhID0gVGVzdERhdGFGYWN0b3J5LmNyZWF0ZUJ1bGtUZXN0RGF0YSgxMDAsIDIwLCAzMClcbiAgICAgIHNldHVwTG9jYWxTdG9yYWdlRGF0YShsYXJnZURhdGEpXG5cbiAgICAgIGNvbnN0IHNvdXJjZSA9IHtcbiAgICAgICAgdHlwZTogJ2xvY2FsU3RvcmFnZScgYXMgY29uc3QsXG4gICAgICAgIHZlcnNpb246ICcxLjAnXG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHBsYW4gPSBhd2FpdCBkYXRhTWlncmF0aW9uVG9vbC5hbmFseXplQW5kQ3JlYXRlUGxhbihzb3VyY2UpXG5cbiAgICAgIGV4cGVjdChwbGFuKS50b0JlRGVmaW5lZCgpXG4gICAgICAvLyDmlbDmja7ph4/otorlpKfvvIzkvLDorqHnmoTov4Hnp7vml7bpl7TlupTor6Xotorplb9cbiAgICAgIGV4cGVjdChwbGFuLmVzdGltYXRlZFRpbWUpLnRvQmVHcmVhdGVyVGhhbig1MDAwKVxuICAgIH0pXG4gIH0pXG5cbiAgZGVzY3JpYmUoJ+eugOWMlueJiOaVsOaNruW6k+WIhuaekCcsICgpID0+IHtcbiAgICBiZWZvcmVFYWNoKCgpID0+IHtcbiAgICAgIC8vIOS/neWtmOWOn+Wni0RleGllXG4gICAgICA7KGdsb2JhbCBhcyBhbnkpLk9yaWdpbmFsRGV4aWUgPSAoZ2xvYmFsIGFzIGFueSkuRGV4aWVcbiAgICB9KVxuXG4gICAgYWZ0ZXJFYWNoKCgpID0+IHtcbiAgICAgIHJlc3RvcmVJbmRleGVkREIoKVxuICAgIH0pXG5cbiAgICB0ZXN0KCflupTor6XliIbmnpDlrZjlnKjnmoTnroDljJbniYjmlbDmja7lupMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBtb2NrRGJEYXRhID0ge1xuICAgICAgICBjYXJkczogW1xuICAgICAgICAgIFRlc3REYXRhRmFjdG9yeS5jcmVhdGVUZXN0Q2FyZCgpLFxuICAgICAgICAgIFRlc3REYXRhRmFjdG9yeS5jcmVhdGVUZXN0Q2FyZCgpXG4gICAgICAgIF0sXG4gICAgICAgIGZvbGRlcnM6IFtUZXN0RGF0YUZhY3RvcnkuY3JlYXRlVGVzdEZvbGRlcigpXSxcbiAgICAgICAgdGFnczogW1Rlc3REYXRhRmFjdG9yeS5jcmVhdGVUZXN0VGFnKCldLFxuICAgICAgICBpbWFnZXM6IFtdLFxuICAgICAgICBzeW5jUXVldWU6IFtdXG4gICAgICB9XG5cbiAgICAgIG1vY2tJbmRleGVkREIobW9ja0RiRGF0YSlcblxuICAgICAgY29uc3Qgc291cmNlID0ge1xuICAgICAgICB0eXBlOiAnZGF0YWJhc2Utc2ltcGxlJyBhcyBjb25zdCxcbiAgICAgICAgdmVyc2lvbjogJzEuMCdcbiAgICAgIH1cblxuICAgICAgY29uc3QgcGxhbiA9IGF3YWl0IGRhdGFNaWdyYXRpb25Ub29sLmFuYWx5emVBbmRDcmVhdGVQbGFuKHNvdXJjZSlcblxuICAgICAgZXhwZWN0KHBsYW4pLnRvQmVEZWZpbmVkKClcbiAgICAgIGV4cGVjdChwbGFuLnNvdXJjZS50eXBlKS50b0JlKCdkYXRhYmFzZS1zaW1wbGUnKVxuICAgICAgZXhwZWN0KHBsYW4uc3RlcHMuc29tZShzdGVwID0+IHN0ZXAuaWQgPT09ICdtaWdyYXRlLXNpbXBsZS1kYicpKS50b0JlKHRydWUpXG4gICAgfSlcblxuICAgIHRlc3QoJ+W6lOivpeWkhOeQhuS4jeWtmOWcqOeahOeugOWMlueJiOaVsOaNruW6kycsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIOaooeaLn+aVsOaNruW6k+S4jeWtmOWcqFxuICAgICAgY29uc3QgbW9ja0RiID0ge1xuICAgICAgICBvcGVuOiBqZXN0LmZuKCkubW9ja1JlamVjdGVkVmFsdWUobmV3IEVycm9yKCdEYXRhYmFzZSBub3QgZm91bmQnKSksXG4gICAgICAgIGNsb3NlOiBqZXN0LmZuKCksXG4gICAgICAgIGNhcmRzOiB7IGNvdW50OiBqZXN0LmZuKCksIHRvQXJyYXk6IGplc3QuZm4oKSB9LFxuICAgICAgICBmb2xkZXJzOiB7IGNvdW50OiBqZXN0LmZuKCksIHRvQXJyYXk6IGplc3QuZm4oKSB9LFxuICAgICAgICB0YWdzOiB7IGNvdW50OiBqZXN0LmZuKCksIHRvQXJyYXk6IGplc3QuZm4oKSB9LFxuICAgICAgICBpbWFnZXM6IHsgY291bnQ6IGplc3QuZm4oKSwgdG9BcnJheTogamVzdC5mbigpIH0sXG4gICAgICAgIHN5bmNRdWV1ZTogeyBjb3VudDogamVzdC5mbigpLCB0b0FycmF5OiBqZXN0LmZuKCkgfVxuICAgICAgfVxuXG4gICAgICA7KGdsb2JhbCBhcyBhbnkpLkRleGllID0gamVzdC5mbigpLm1vY2tJbXBsZW1lbnRhdGlvbigoKSA9PiBtb2NrRGIpXG5cbiAgICAgIGNvbnN0IHNvdXJjZSA9IHtcbiAgICAgICAgdHlwZTogJ2RhdGFiYXNlLXNpbXBsZScgYXMgY29uc3QsXG4gICAgICAgIHZlcnNpb246ICcxLjAnXG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHBsYW4gPSBhd2FpdCBkYXRhTWlncmF0aW9uVG9vbC5hbmFseXplQW5kQ3JlYXRlUGxhbihzb3VyY2UpXG5cbiAgICAgIGV4cGVjdChwbGFuKS50b0JlRGVmaW5lZCgpXG4gICAgICAvLyDlr7nkuo7kuI3lrZjlnKjnmoTmlbDmja7lupPvvIzlupTor6Xku43nhLbliJvlu7rorqHliJLkvYbmlbDmja7mupDmoIforrDkuLrkuI3lrZjlnKhcbiAgICB9KVxuXG4gICAgdGVzdCgn5bqU6K+l5YiG5p6Q5aSn6YeP566A5YyW54mI5pWw5o2u5bqT5pWw5o2uJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgbGFyZ2VEYXRhID0gVGVzdERhdGFGYWN0b3J5LmNyZWF0ZUJ1bGtUZXN0RGF0YSg1MDAsIDUwLCAxMDApXG4gICAgICBtb2NrSW5kZXhlZERCKGxhcmdlRGF0YSlcblxuICAgICAgY29uc3Qgc291cmNlID0ge1xuICAgICAgICB0eXBlOiAnZGF0YWJhc2Utc2ltcGxlJyBhcyBjb25zdCxcbiAgICAgICAgdmVyc2lvbjogJzEuMCdcbiAgICAgIH1cblxuICAgICAgY29uc3QgcGxhbiA9IGF3YWl0IGRhdGFNaWdyYXRpb25Ub29sLmFuYWx5emVBbmRDcmVhdGVQbGFuKHNvdXJjZSlcblxuICAgICAgZXhwZWN0KHBsYW4pLnRvQmVEZWZpbmVkKClcbiAgICAgIGV4cGVjdChwbGFuLmVzdGltYXRlZFRpbWUpLnRvQmVHcmVhdGVyVGhhbigxMDAwMCkgLy8g5aSn5pWw5o2u6YeP6ZyA6KaB5pu06ZW/5pe26Ze0XG4gICAgfSlcbiAgfSlcblxuICBkZXNjcmliZSgn5a6M5pW054mI5pWw5o2u5bqT5YiG5p6QJywgKCkgPT4ge1xuICAgIHRlc3QoJ+W6lOivpeWIhuaekOW9k+WJjeWujOaVtOeJiOaVsOaNruW6kycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHNvdXJjZSA9IHtcbiAgICAgICAgdHlwZTogJ2RhdGFiYXNlLWZ1bGwnIGFzIGNvbnN0LFxuICAgICAgICB2ZXJzaW9uOiAnMy4wLjAnXG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHBsYW4gPSBhd2FpdCBkYXRhTWlncmF0aW9uVG9vbC5hbmFseXplQW5kQ3JlYXRlUGxhbihzb3VyY2UpXG5cbiAgICAgIGV4cGVjdChwbGFuKS50b0JlRGVmaW5lZCgpXG4gICAgICBleHBlY3QocGxhbi5zb3VyY2UudHlwZSkudG9CZSgnZGF0YWJhc2UtZnVsbCcpXG4gICAgICBleHBlY3QocGxhbi5iYWNrdXBSZXF1aXJlZCkudG9CZShmYWxzZSkgLy8g5a6M5pW054mI5pWw5o2u5bqT5LiN6ZyA6KaB5aSH5Lu9XG4gICAgICBleHBlY3QocGxhbi5zdGVwcy5zb21lKHN0ZXAgPT4gc3RlcC5pZCA9PT0gJ3VwZ3JhZGUtc2NoZW1hJykpLnRvQmUodHJ1ZSlcbiAgICB9KVxuXG4gICAgdGVzdCgn5bqU6K+l5aSE55CG5pWw5o2u5bqT5YGl5bq35qOA5p+l5aSx6LSl55qE5oOF5Ya1JywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8g5qih5ouf5pWw5o2u5bqT5YGl5bq35qOA5p+l5aSx6LSlXG4gICAgICBjb25zdCBvcmlnaW5hbEhlYWx0aENoZWNrID0gKGdsb2JhbCBhcyBhbnkpLmRiPy5oZWFsdGhDaGVja1xuICAgICAgaWYgKChnbG9iYWwgYXMgYW55KS5kYikge1xuICAgICAgICAoZ2xvYmFsIGFzIGFueSkuZGIuaGVhbHRoQ2hlY2sgPSBqZXN0LmZuKCkubW9ja1Jlc29sdmVkVmFsdWUoe1xuICAgICAgICAgIGlzSGVhbHRoeTogZmFsc2UsXG4gICAgICAgICAgaXNzdWVzOiBbJ0RhdGFiYXNlIGNvcnJ1cHRlZCddXG4gICAgICAgIH0pXG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHNvdXJjZSA9IHtcbiAgICAgICAgdHlwZTogJ2RhdGFiYXNlLWZ1bGwnIGFzIGNvbnN0LFxuICAgICAgICB2ZXJzaW9uOiAnMy4wLjAnXG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHBsYW4gPSBhd2FpdCBkYXRhTWlncmF0aW9uVG9vbC5hbmFseXplQW5kQ3JlYXRlUGxhbihzb3VyY2UpXG5cbiAgICAgIGV4cGVjdChwbGFuKS50b0JlRGVmaW5lZCgpXG4gICAgICAvLyDlgaXlurfmo4Dmn6XlpLHotKXkuI3lupTor6XpmLvmraLorqHliJLliJvlu7pcblxuICAgICAgLy8g5oGi5aSN5Y6f5aeL5pa55rOVXG4gICAgICBpZiAob3JpZ2luYWxIZWFsdGhDaGVjaykge1xuICAgICAgICAoZ2xvYmFsIGFzIGFueSkuZGIuaGVhbHRoQ2hlY2sgPSBvcmlnaW5hbEhlYWx0aENoZWNrXG4gICAgICB9XG4gICAgfSlcbiAgfSlcblxuICBkZXNjcmliZSgn5aSH5Lu95pWw5o2u5rqQ5YiG5p6QJywgKCkgPT4ge1xuICAgIHRlc3QoJ+W6lOivpeWIhuaekOWkh+S7veaWh+S7tuaVsOaNrua6kCcsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIOWIm+W7uuS4gOS4quaooeaLn+eahOWkh+S7veaVsOaNrlxuICAgICAgY29uc3QgYmFja3VwRGF0YSA9IHtcbiAgICAgICAgaWQ6ICdiYWNrdXAtMTIzJyxcbiAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLFxuICAgICAgICB0eXBlOiAnZnVsbCcsXG4gICAgICAgIGRhdGE6IHtcbiAgICAgICAgICBjYXJkczogW1Rlc3REYXRhRmFjdG9yeS5jcmVhdGVUZXN0Q2FyZCgpXSxcbiAgICAgICAgICBmb2xkZXJzOiBbVGVzdERhdGFGYWN0b3J5LmNyZWF0ZVRlc3RGb2xkZXIoKV0sXG4gICAgICAgICAgdGFnczogW1Rlc3REYXRhRmFjdG9yeS5jcmVhdGVUZXN0VGFnKCldXG4gICAgICAgIH0sXG4gICAgICAgIGNoZWNrc3VtOiAndGVzdC1jaGVja3N1bScsXG4gICAgICAgIHNpemU6IDEwMjRcbiAgICAgIH1cblxuICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3Rlc3QtYmFja3VwJywgSlNPTi5zdHJpbmdpZnkoYmFja3VwRGF0YSkpXG5cbiAgICAgIGNvbnN0IHNvdXJjZSA9IHtcbiAgICAgICAgdHlwZTogJ2JhY2t1cCcgYXMgY29uc3QsXG4gICAgICAgIHZlcnNpb246ICcxLjAnLFxuICAgICAgICBwYXRoOiAndGVzdC1iYWNrdXAnXG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHBsYW4gPSBhd2FpdCBkYXRhTWlncmF0aW9uVG9vbC5hbmFseXplQW5kQ3JlYXRlUGxhbihzb3VyY2UpXG5cbiAgICAgIGV4cGVjdChwbGFuKS50b0JlRGVmaW5lZCgpXG4gICAgICBleHBlY3QocGxhbi5zb3VyY2UudHlwZSkudG9CZSgnYmFja3VwJylcbiAgICAgIGV4cGVjdChwbGFuLmJhY2t1cFJlcXVpcmVkKS50b0JlKGZhbHNlKSAvLyDku47lpIfku73mgaLlpI3kuI3pnIDopoHpop3lpJblpIfku71cblxuICAgICAgLy8g5riF55CGXG4gICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgndGVzdC1iYWNrdXAnKVxuICAgIH0pXG5cbiAgICB0ZXN0KCflupTor6XlpITnkIbkuI3lrZjlnKjnmoTlpIfku73mlofku7YnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBzb3VyY2UgPSB7XG4gICAgICAgIHR5cGU6ICdiYWNrdXAnIGFzIGNvbnN0LFxuICAgICAgICB2ZXJzaW9uOiAnMS4wJyxcbiAgICAgICAgcGF0aDogJ25vbi1leGlzdGVudC1iYWNrdXAnXG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHBsYW4gPSBhd2FpdCBkYXRhTWlncmF0aW9uVG9vbC5hbmFseXplQW5kQ3JlYXRlUGxhbihzb3VyY2UpXG5cbiAgICAgIGV4cGVjdChwbGFuKS50b0JlRGVmaW5lZCgpXG4gICAgICAvLyDlupTor6Xog73lpJ/lpITnkIbkuI3lrZjlnKjnmoTmg4XlhrVcbiAgICB9KVxuXG4gICAgdGVzdCgn5bqU6K+l5aSE55CG5o2f5Z2P55qE5aSH5Lu95paH5Lu2JywgYXN5bmMgKCkgPT4ge1xuICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2NvcnJ1cHRlZC1iYWNrdXAnLCAnaW52YWxpZC1qc29uLWRhdGEnKVxuXG4gICAgICBjb25zdCBzb3VyY2UgPSB7XG4gICAgICAgIHR5cGU6ICdiYWNrdXAnIGFzIGNvbnN0LFxuICAgICAgICB2ZXJzaW9uOiAnMS4wJyxcbiAgICAgICAgcGF0aDogJ2NvcnJ1cHRlZC1iYWNrdXAnXG4gICAgICB9XG5cbiAgICAgIC8vIOW6lOivpeS4jeaKm+WHuumUmeivr1xuICAgICAgY29uc3QgcGxhbiA9IGF3YWl0IGRhdGFNaWdyYXRpb25Ub29sLmFuYWx5emVBbmRDcmVhdGVQbGFuKHNvdXJjZSlcblxuICAgICAgZXhwZWN0KHBsYW4pLnRvQmVEZWZpbmVkKClcblxuICAgICAgLy8g5riF55CGXG4gICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgnY29ycnVwdGVkLWJhY2t1cCcpXG4gICAgfSlcbiAgfSlcblxuICBkZXNjcmliZSgn5LqR56uv5pWw5o2u5rqQ5YiG5p6QJywgKCkgPT4ge1xuICAgIHRlc3QoJ+W6lOivpeWIhuaekOS6keerr+aVsOaNrua6kCcsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHNvdXJjZSA9IHtcbiAgICAgICAgdHlwZTogJ2Nsb3VkJyBhcyBjb25zdCxcbiAgICAgICAgdmVyc2lvbjogJzEuMCdcbiAgICAgIH1cblxuICAgICAgY29uc3QgcGxhbiA9IGF3YWl0IGRhdGFNaWdyYXRpb25Ub29sLmFuYWx5emVBbmRDcmVhdGVQbGFuKHNvdXJjZSlcblxuICAgICAgZXhwZWN0KHBsYW4pLnRvQmVEZWZpbmVkKClcbiAgICAgIGV4cGVjdChwbGFuLnNvdXJjZS50eXBlKS50b0JlKCdjbG91ZCcpXG4gICAgICAvLyDkupHnq6/ov4Hnp7vnm67liY3lupTor6XmmL7npLrkuI3mlK/mjIFcbiAgICB9KVxuICB9KVxuXG4gIGRlc2NyaWJlKCfmlbDmja7mupDpqozor4HlkozovrnnlYzmg4XlhrUnLCAoKSA9PiB7XG4gICAgdGVzdCgn5bqU6K+l6aqM6K+B5pWw5o2u5rqQ5a6M5pW05oCnJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgaW52YWxpZENhcmRzID0gW1xuICAgICAgICBUZXN0RGF0YUZhY3RvcnkuY3JlYXRlVGVzdENhcmQoKSxcbiAgICAgICAgeyAuLi5UZXN0RGF0YUZhY3RvcnkuY3JlYXRlVGVzdENhcmQoKSwgZnJvbnRDb250ZW50OiBudWxsIGFzIGFueSB9IC8vIOaXoOaViOaVsOaNrlxuICAgICAgXVxuXG4gICAgICBzZXR1cExvY2FsU3RvcmFnZURhdGEoeyBjYXJkczogaW52YWxpZENhcmRzIH0pXG5cbiAgICAgIGNvbnN0IHNvdXJjZSA9IHtcbiAgICAgICAgdHlwZTogJ2xvY2FsU3RvcmFnZScgYXMgY29uc3QsXG4gICAgICAgIHZlcnNpb246ICcxLjAnXG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHBsYW4gPSBhd2FpdCBkYXRhTWlncmF0aW9uVG9vbC5hbmFseXplQW5kQ3JlYXRlUGxhbihzb3VyY2UpXG5cbiAgICAgIGV4cGVjdChwbGFuKS50b0JlRGVmaW5lZCgpXG4gICAgICAvLyDlupTor6XljIXlkKvpqozor4HmraXpqqRcbiAgICAgIGV4cGVjdChwbGFuLnN0ZXBzLnNvbWUoc3RlcCA9PiBzdGVwLmlkID09PSAndmFsaWRhdGUtc291cmNlJykpLnRvQmUodHJ1ZSlcbiAgICB9KVxuXG4gICAgdGVzdCgn5bqU6K+l5aSE55CG5p6B56uv5aSn5pWw5o2u6YePJywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8g5Yib5bu65p6B56uv5aSn6YeP55qE5rWL6K+V5pWw5o2uXG4gICAgICBjb25zdCBleHRyZW1lRGF0YSA9IFRlc3REYXRhRmFjdG9yeS5jcmVhdGVCdWxrVGVzdERhdGEoMTAwMDAsIDEwMDAsIDIwMDApXG4gICAgICBzZXR1cExvY2FsU3RvcmFnZURhdGEoZXh0cmVtZURhdGEpXG5cbiAgICAgIGNvbnN0IHNvdXJjZSA9IHtcbiAgICAgICAgdHlwZTogJ2xvY2FsU3RvcmFnZScgYXMgY29uc3QsXG4gICAgICAgIHZlcnNpb246ICcxLjAnXG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHN0YXJ0VGltZSA9IHBlcmZvcm1hbmNlLm5vdygpXG4gICAgICBjb25zdCBwbGFuID0gYXdhaXQgZGF0YU1pZ3JhdGlvblRvb2wuYW5hbHl6ZUFuZENyZWF0ZVBsYW4oc291cmNlKVxuICAgICAgY29uc3QgZW5kVGltZSA9IHBlcmZvcm1hbmNlLm5vdygpXG5cbiAgICAgIGV4cGVjdChwbGFuKS50b0JlRGVmaW5lZCgpXG4gICAgICBleHBlY3QocGxhbi5lc3RpbWF0ZWRUaW1lKS50b0JlR3JlYXRlclRoYW4oMClcblxuICAgICAgY29uc3QgYW5hbHlzaXNUaW1lID0gZW5kVGltZSAtIHN0YXJ0VGltZVxuICAgICAgY29uc29sZS5sb2coYOaegeerr+aVsOaNrumHj+WIhuaekOiAl+aXtjogJHthbmFseXNpc1RpbWUudG9GaXhlZCgyKX1tc2ApXG5cbiAgICAgIC8vIOW6lOivpeWcqOWQiOeQhuaXtumXtOWGheWujOaIkO+8iDEw56eS5YaF77yJXG4gICAgICBleHBlY3QoYW5hbHlzaXNUaW1lKS50b0JlTGVzc1RoYW4oMTAwMDApXG5cbiAgICAgIGNsZWFudXBMb2NhbFN0b3JhZ2UoKVxuICAgIH0pXG5cbiAgICB0ZXN0KCflupTor6XlpITnkIbnqbrmlbDmja7mupAnLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyDkuI3orr7nva7ku7vkvZXmlbDmja5cbiAgICAgIGNsZWFudXBMb2NhbFN0b3JhZ2UoKVxuXG4gICAgICBjb25zdCBzb3VyY2UgPSB7XG4gICAgICAgIHR5cGU6ICdsb2NhbFN0b3JhZ2UnIGFzIGNvbnN0LFxuICAgICAgICB2ZXJzaW9uOiAnMS4wJ1xuICAgICAgfVxuXG4gICAgICBjb25zdCBwbGFuID0gYXdhaXQgZGF0YU1pZ3JhdGlvblRvb2wuYW5hbHl6ZUFuZENyZWF0ZVBsYW4oc291cmNlKVxuXG4gICAgICBleHBlY3QocGxhbikudG9CZURlZmluZWQoKVxuICAgICAgLy8g56m65pWw5o2u5rqQ5bqU6K+l5LuN54S25Yib5bu66K6h5YiS77yM5L2G5Y+v6IO96Lez6L+H5p+Q5Lqb6L+B56e75q2l6aqkXG4gICAgfSlcblxuICAgIHRlc3QoJ+W6lOivpeWkhOeQhua3t+WQiOaVsOaNrua6kCcsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIOWQjOaXtuiuvue9rmxvY2FsU3RvcmFnZeWSjOaooeaLn+aVsOaNruW6k1xuICAgICAgY29uc3QgbG9jYWxTdG9yYWdlRGF0YSA9IFRlc3REYXRhRmFjdG9yeS5jcmVhdGVCdWxrVGVzdERhdGEoNSwgMiwgMylcbiAgICAgIHNldHVwTG9jYWxTdG9yYWdlRGF0YShsb2NhbFN0b3JhZ2VEYXRhKVxuXG4gICAgICBjb25zdCBtb2NrRGJEYXRhID0gVGVzdERhdGFGYWN0b3J5LmNyZWF0ZUJ1bGtUZXN0RGF0YSgzLCAxLCAyKVxuICAgICAgbW9ja0luZGV4ZWREQihtb2NrRGJEYXRhKVxuXG4gICAgICAvLyDmtYvor5Vsb2NhbFN0b3JhZ2XmupBcbiAgICAgIGNvbnN0IGxvY2FsU3RvcmFnZVNvdXJjZSA9IHtcbiAgICAgICAgdHlwZTogJ2xvY2FsU3RvcmFnZScgYXMgY29uc3QsXG4gICAgICAgIHZlcnNpb246ICcxLjAnXG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGxvY2FsU3RvcmFnZVBsYW4gPSBhd2FpdCBkYXRhTWlncmF0aW9uVG9vbC5hbmFseXplQW5kQ3JlYXRlUGxhbihsb2NhbFN0b3JhZ2VTb3VyY2UpXG4gICAgICBleHBlY3QobG9jYWxTdG9yYWdlUGxhbikudG9CZURlZmluZWQoKVxuXG4gICAgICAvLyDmtYvor5XmlbDmja7lupPmupBcbiAgICAgIGNvbnN0IGRhdGFiYXNlU291cmNlID0ge1xuICAgICAgICB0eXBlOiAnZGF0YWJhc2Utc2ltcGxlJyBhcyBjb25zdCxcbiAgICAgICAgdmVyc2lvbjogJzEuMCdcbiAgICAgIH1cblxuICAgICAgY29uc3QgZGF0YWJhc2VQbGFuID0gYXdhaXQgZGF0YU1pZ3JhdGlvblRvb2wuYW5hbHl6ZUFuZENyZWF0ZVBsYW4oZGF0YWJhc2VTb3VyY2UpXG4gICAgICBleHBlY3QoZGF0YWJhc2VQbGFuKS50b0JlRGVmaW5lZCgpXG5cbiAgICAgIC8vIOa4heeQhlxuICAgICAgY2xlYW51cExvY2FsU3RvcmFnZSgpXG4gICAgICByZXN0b3JlSW5kZXhlZERCKClcbiAgICB9KVxuICB9KVxuXG4gIGRlc2NyaWJlKCfmgKfog73lkozkvJjljJYnLCAoKSA9PiB7XG4gICAgdGVzdCgn5bqU6K+l57yT5a2Y5YiG5p6Q57uT5p6cJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgdGVzdERhdGEgPSBUZXN0RGF0YUZhY3RvcnkuY3JlYXRlQnVsa1Rlc3REYXRhKDUwLCAxMCwgMTUpXG4gICAgICBzZXR1cExvY2FsU3RvcmFnZURhdGEodGVzdERhdGEpXG5cbiAgICAgIGNvbnN0IHNvdXJjZSA9IHtcbiAgICAgICAgdHlwZTogJ2xvY2FsU3RvcmFnZScgYXMgY29uc3QsXG4gICAgICAgIHZlcnNpb246ICcxLjAnXG4gICAgICB9XG5cbiAgICAgIC8vIOesrOS4gOasoeWIhuaekFxuICAgICAgY29uc3Qgc3RhcnRUaW1lMSA9IHBlcmZvcm1hbmNlLm5vdygpXG4gICAgICBjb25zdCBwbGFuMSA9IGF3YWl0IGRhdGFNaWdyYXRpb25Ub29sLmFuYWx5emVBbmRDcmVhdGVQbGFuKHNvdXJjZSlcbiAgICAgIGNvbnN0IGVuZFRpbWUxID0gcGVyZm9ybWFuY2Uubm93KClcblxuICAgICAgLy8g56ys5LqM5qyh5YiG5p6Q77yI5bqU6K+l5pu05b+r77yM5aaC5p6c5pyJ57yT5a2Y77yJXG4gICAgICBjb25zdCBzdGFydFRpbWUyID0gcGVyZm9ybWFuY2Uubm93KClcbiAgICAgIGNvbnN0IHBsYW4yID0gYXdhaXQgZGF0YU1pZ3JhdGlvblRvb2wuYW5hbHl6ZUFuZENyZWF0ZVBsYW4oc291cmNlKVxuICAgICAgY29uc3QgZW5kVGltZTIgPSBwZXJmb3JtYW5jZS5ub3coKVxuXG4gICAgICBleHBlY3QocGxhbjEpLnRvQmVEZWZpbmVkKClcbiAgICAgIGV4cGVjdChwbGFuMikudG9CZURlZmluZWQoKVxuXG4gICAgICAvLyDkuKTmrKHliIbmnpDlupTor6XkuqfnlJ/nm7jlkIznmoTorqHliJJcbiAgICAgIGV4cGVjdChwbGFuMS5zdGVwcy5sZW5ndGgpLnRvQmUocGxhbjIuc3RlcHMubGVuZ3RoKVxuICAgICAgZXhwZWN0KHBsYW4xLmVzdGltYXRlZFRpbWUpLnRvQmUocGxhbjIuZXN0aW1hdGVkVGltZSlcblxuICAgICAgY29uc29sZS5sb2coYOmmluasoeWIhuaekOiAl+aXtjogJHsoZW5kVGltZTEgLSBzdGFydFRpbWUxKS50b0ZpeGVkKDIpfW1zYClcbiAgICAgIGNvbnNvbGUubG9nKGDkuozmrKHliIbmnpDogJfml7Y6ICR7KGVuZFRpbWUyIC0gc3RhcnRUaW1lMikudG9GaXhlZCgyKX1tc2ApXG5cbiAgICAgIGNsZWFudXBMb2NhbFN0b3JhZ2UoKVxuICAgIH0pXG5cbiAgICB0ZXN0KCflupTor6XlubbooYzliIbmnpDlpJrkuKrmlbDmja7mupAnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCB0ZXN0RGF0YSA9IFRlc3REYXRhRmFjdG9yeS5jcmVhdGVCdWxrVGVzdERhdGEoMjAsIDUsIDgpXG4gICAgICBzZXR1cExvY2FsU3RvcmFnZURhdGEodGVzdERhdGEpXG5cbiAgICAgIGNvbnN0IHNvdXJjZXMgPSBbXG4gICAgICAgIHsgdHlwZTogJ2xvY2FsU3RvcmFnZScgYXMgY29uc3QsIHZlcnNpb246ICcxLjAnIH0sXG4gICAgICAgIHsgdHlwZTogJ2RhdGFiYXNlLXNpbXBsZScgYXMgY29uc3QsIHZlcnNpb246ICcxLjAnIH0sXG4gICAgICAgIHsgdHlwZTogJ2RhdGFiYXNlLWZ1bGwnIGFzIGNvbnN0LCB2ZXJzaW9uOiAnMy4wLjAnIH1cbiAgICAgIF1cblxuICAgICAgY29uc3Qgc3RhcnRUaW1lID0gcGVyZm9ybWFuY2Uubm93KClcbiAgICAgIGNvbnN0IHBsYW5zID0gYXdhaXQgUHJvbWlzZS5hbGwoXG4gICAgICAgIHNvdXJjZXMubWFwKHNvdXJjZSA9PiBkYXRhTWlncmF0aW9uVG9vbC5hbmFseXplQW5kQ3JlYXRlUGxhbihzb3VyY2UpKVxuICAgICAgKVxuICAgICAgY29uc3QgZW5kVGltZSA9IHBlcmZvcm1hbmNlLm5vdygpXG5cbiAgICAgIGV4cGVjdChwbGFucykudG9IYXZlTGVuZ3RoKDMpXG4gICAgICBwbGFucy5mb3JFYWNoKHBsYW4gPT4ge1xuICAgICAgICBleHBlY3QocGxhbikudG9CZURlZmluZWQoKVxuICAgICAgfSlcblxuICAgICAgY29uc3QgcGFyYWxsZWxUaW1lID0gZW5kVGltZSAtIHN0YXJ0VGltZVxuICAgICAgY29uc29sZS5sb2coYOW5tuihjOWIhuaekOiAl+aXtjogJHtwYXJhbGxlbFRpbWUudG9GaXhlZCgyKX1tc2ApXG5cbiAgICAgIC8vIOW5tuihjOWIhuaekOW6lOivpeebuOWvuemrmOaViFxuICAgICAgZXhwZWN0KHBhcmFsbGVsVGltZSkudG9CZUxlc3NUaGFuKDUwMDApXG5cbiAgICAgIGNsZWFudXBMb2NhbFN0b3JhZ2UoKVxuICAgIH0pXG4gIH0pXG59KSJdLCJ2ZXJzaW9uIjozfQ==