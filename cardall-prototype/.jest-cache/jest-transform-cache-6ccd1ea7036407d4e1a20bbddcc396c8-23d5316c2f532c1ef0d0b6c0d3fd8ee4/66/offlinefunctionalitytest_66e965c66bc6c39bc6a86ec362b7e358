df0c9f2996160edabc532c2f84453e1e
"use strict";
/**
 * 离线功能集成测试
 * 测试网络状态变化、离线操作、同步恢复等功能
 */
Object.defineProperty(exports, "__esModule", { value: true });
const globals_1 = require("@jest/globals");
const offline_manager_1 = require("../../services/offline-manager");
const local_operation_service_1 = require("../../services/local-operation-service");
const cloud_sync_service_1 = require("../../services/cloud-sync-service");
const multilevel_cache_service_1 = require("../../services/multilevel-cache-service");
const test_utils_1 = require("../utils/test-utils");
const test_utils_2 = require("../utils/test-utils");
// 模拟网络状态
class NetworkMock {
    constructor() {
        Object.defineProperty(this, "online", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: true
        });
        Object.defineProperty(this, "listeners", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: new Set()
        });
    }
    setOnline(online) {
        this.online = online;
        this.listeners.forEach(listener => listener());
    }
    addEventListener(event, listener) {
        if (event === 'online' || event === 'offline') {
            this.listeners.add(listener);
        }
    }
    removeEventListener(event, listener) {
        if (event === 'online' || event === 'offline') {
            this.listeners.delete(listener);
        }
    }
    isOnline() {
        return this.online;
    }
}
(0, globals_1.describe)('离线功能集成测试', () => {
    let offlineManager;
    let localService;
    let cloudService;
    let cacheService;
    let mockDb;
    let networkMock;
    (0, globals_1.beforeEach)(async () => {
        // 重置所有模拟
        mockDb = new test_utils_1.MockDatabase();
        networkMock = new NetworkMock();
        // 设置全局网络模拟
        Object.defineProperty(navigator, 'onLine', {
            get: () => networkMock.isOnline(),
            configurable: true
        });
        // 添加网络事件监听器模拟
        Object.defineProperty(window, 'addEventListener', {
            value: globals_1.jest.fn((event, listener) => {
                if (event === 'online' || event === 'offline') {
                    networkMock.addEventListener(event, listener);
                }
            })
        });
        Object.defineProperty(window, 'removeEventListener', {
            value: globals_1.jest.fn((event, listener) => {
                if (event === 'online' || event === 'offline') {
                    networkMock.removeEventListener(event, listener);
                }
            })
        });
        // 初始化服务
        cacheService = new multilevel_cache_service_1.MultilevelCacheService();
        localService = new local_operation_service_1.LocalOperationServiceOptimized();
        cloudService = new cloud_sync_service_1.CloudSyncServiceOptimized();
        // 初始化离线管理器
        offlineManager = new offline_manager_1.OfflineManager(localService, cloudService, cacheService);
        // 重置测试工具
        test_utils_2.performanceTester.reset();
        // 清理所有模拟
        globals_1.jest.clearAllMocks();
    });
    (0, globals_1.afterEach)(async () => {
        // 清理资源
        await offlineManager.destroy();
        cacheService.stop();
        localService.destroy();
    });
    // ============================================================================
    // 网络状态检测测试
    // ============================================================================
    (0, globals_1.describe)('网络状态检测', () => {
        (0, globals_1.test)('应该正确检测在线状态', async () => {
            await offlineManager.initialize();
            // 初始状态应该是在线
            (0, globals_1.expect)(offlineManager.isOnline()).toBe(true);
            (0, globals_1.expect)(offlineManager.getNetworkStatus().online).toBe(true);
        });
        (0, globals_1.test)('应该正确检测离线状态', async () => {
            await offlineManager.initialize();
            // 模拟网络断开
            networkMock.setOnline(false);
            // 等待状态更新
            await test_utils_2.asyncTestHelper.delay(100);
            (0, globals_1.expect)(offlineManager.isOnline()).toBe(false);
            (0, globals_1.expect)(offlineManager.getNetworkStatus().online).toBe(false);
        });
        (0, globals_1.test)('应该正确检测网络恢复', async () => {
            await offlineManager.initialize();
            // 模拟网络断开
            networkMock.setOnline(false);
            await test_utils_2.asyncTestHelper.delay(100);
            // 模拟网络恢复
            networkMock.setOnline(true);
            await test_utils_2.asyncTestHelper.delay(100);
            (0, globals_1.expect)(offlineManager.isOnline()).toBe(true);
            (0, globals_1.expect)(offlineManager.getNetworkStatus().online).toBe(true);
        });
        (0, globals_1.test)('应该正确监听网络事件', async () => {
            const onlineListener = globals_1.jest.fn();
            const offlineListener = globals_1.jest.fn();
            await offlineManager.initialize();
            // 注册监听器
            offlineManager.onOnline(onlineListener);
            offlineManager.onOffline(offlineListener);
            // 模拟网络状态变化
            networkMock.setOnline(false);
            await test_utils_2.asyncTestHelper.delay(100);
            networkMock.setOnline(true);
            await test_utils_2.asyncTestHelper.delay(100);
            // 验证监听器被调用
            (0, globals_1.expect)(offlineListener).toHaveBeenCalled();
            (0, globals_1.expect)(onlineListener).toHaveBeenCalled();
        });
    });
    // ============================================================================
    // 离线操作测试
    // ============================================================================
    (0, globals_1.describe)('离线操作处理', () => {
        (0, globals_1.test)('应该允许离线创建卡片', async () => {
            await offlineManager.initialize();
            // 切换到离线状态
            networkMock.setOnline(false);
            await test_utils_2.asyncTestHelper.delay(100);
            // 离线创建卡片
            const cardData = test_utils_2.mockFactories.createMockCard();
            const result = await test_utils_2.performanceTester.measure('offline_create', () => offlineManager.createCard(cardData));
            (0, globals_1.expect)(result.success).toBe(true);
            (0, globals_1.expect)(result.id).toBeDefined();
            (0, globals_1.expect)(result.id).toBeValidUUID();
            // 验证数据存储在本地
            const localCards = await localService.getCards({});
            (0, globals_1.expect)(localCards.length).toBe(1);
            (0, globals_1.expect)(localCards[0].id).toBe(result.id);
        });
        (0, globals_1.test)('应该允许离线更新卡片', async () => {
            await offlineManager.initialize();
            // 在线创建卡片
            const cardData = test_utils_2.mockFactories.createMockCard();
            const createResult = await localService.createCard(cardData);
            const cardId = createResult.id;
            // 切换到离线状态
            networkMock.setOnline(false);
            await test_utils_2.asyncTestHelper.delay(100);
            // 离线更新卡片
            const updates = {
                frontContent: {
                    title: 'Offline Updated Title',
                    text: 'Updated content offline'
                }
            };
            const updateResult = await test_utils_2.performanceTester.measure('offline_update', () => offlineManager.updateCard(cardId, updates));
            (0, globals_1.expect)(updateResult.success).toBe(true);
            (0, globals_1.expect)(updateResult.id).toBe(cardId);
            // 验证本地数据已更新
            const updatedCard = await localService.getCard(cardId);
            (0, globals_1.expect)(updatedCard.frontContent.title).toBe('Offline Updated Title');
        });
        (0, globals_1.test)('应该允许离线删除卡片', async () => {
            await offlineManager.initialize();
            // 在线创建卡片
            const cardData = test_utils_2.mockFactories.createMockCard();
            const createResult = await localService.createCard(cardData);
            const cardId = createResult.id;
            // 切换到离线状态
            networkMock.setOnline(false);
            await test_utils_2.asyncTestHelper.delay(100);
            // 离线删除卡片
            const deleteResult = await test_utils_2.performanceTester.measure('offline_delete', () => offlineManager.deleteCard(cardId));
            (0, globals_1.expect)(deleteResult.success).toBe(true);
            (0, globals_1.expect)(deleteResult.id).toBe(cardId);
            // 验证本地数据已删除
            const deletedCard = await localService.getCard(cardId);
            (0, globals_1.expect)(deletedCard).toBeNull();
        });
        (0, globals_1.test)('应该正确排队离线操作', async () => {
            await offlineManager.initialize();
            // 切换到离线状态
            networkMock.setOnline(false);
            await test_utils_2.asyncTestHelper.delay(100);
            // 执行多个离线操作
            const operations = [];
            for (let i = 0; i < 3; i++) {
                const cardData = test_utils_2.mockFactories.createMockCard({
                    frontContent: { title: `Offline Card ${i + 1}` }
                });
                const result = await offlineManager.createCard(cardData);
                operations.push(result);
            }
            // 验证所有操作都成功
            operations.forEach(op => {
                (0, globals_1.expect)(op.success).toBe(true);
            });
            // 验证排队操作
            const pendingOps = await offlineManager.getPendingOperations();
            (0, globals_1.expect)(pendingOps.length).toBe(3);
            // 验证操作类型和状态
            pendingOps.forEach(op => {
                (0, globals_1.expect)(op.type).toBe('create');
                (0, globals_1.expect)(op.entity).toBe('card');
                (0, globals_1.expect)(op.status).toBe('pending');
            });
        });
    });
    // ============================================================================
    // 网络恢复同步测试
    // ============================================================================
    (0, globals_1.describe)('网络恢复同步', () => {
        (0, globals_1.test)('应该自动同步网络恢复后的操作', async () => {
            await offlineManager.initialize();
            // 切换到离线状态
            networkMock.setOnline(false);
            await test_utils_2.asyncTestHelper.delay(100);
            // 离线创建卡片
            const cardData = test_utils_2.mockFactories.createMockCard();
            const offlineResult = await offlineManager.createCard(cardData);
            // 验证操作已排队
            const pendingOpsBefore = await offlineManager.getPendingOperations();
            (0, globals_1.expect)(pendingOpsBefore.length).toBe(1);
            // 模拟网络恢复
            networkMock.setOnline(true);
            await test_utils_2.asyncTestHelper.delay(100);
            // 等待同步完成
            await test_utils_2.asyncTestHelper.waitFor(async () => {
                const pendingOps = await offlineManager.getPendingOperations();
                return pendingOps.length === 0;
            }, { timeout: 5000, message: '同步操作未完成' });
            // 验证同步完成
            const pendingOpsAfter = await offlineManager.getPendingOperations();
            (0, globals_1.expect)(pendingOpsAfter.length).toBe(0);
            // 验证同步统计
            const syncStats = offlineManager.getSyncStatistics();
            (0, globals_1.expect)(syncStats.totalSynced).toBe(1);
            (0, globals_1.expect)(syncStats.successRate).toBe(1);
        });
        (0, globals_1.test)('应该正确处理同步失败', async () => {
            await offlineManager.initialize();
            // 模拟云端服务失败
            globals_1.jest.spyOn(cloudService, 'syncCard').mockRejectedValueOnce(new Error('Sync failed'));
            // 切换到离线状态
            networkMock.setOnline(false);
            await test_utils_2.asyncTestHelper.delay(100);
            // 离线创建卡片
            const cardData = test_utils_2.mockFactories.createMockCard();
            await offlineManager.createCard(cardData);
            // 模拟网络恢复
            networkMock.setOnline(true);
            await test_utils_2.asyncTestHelper.delay(100);
            // 等待重试机制
            await test_utils_2.asyncTestHelper.delay(1000);
            // 验证操作仍在排队（因为同步失败）
            const pendingOps = await offlineManager.getPendingOperations();
            (0, globals_1.expect)(pendingOps.length).toBe(1);
            // 验证重试计数
            const failedOp = pendingOps[0];
            (0, globals_1.expect)(failedOp.retryCount).toBeGreaterThan(0);
            // 验证同步统计包含失败
            const syncStats = offlineManager.getSyncStatistics();
            (0, globals_1.expect)(syncStats.totalFailed).toBe(1);
        });
        (0, globals_1.test)('应该支持批量同步', async () => {
            await offlineManager.initialize();
            // 切换到离线状态
            networkMock.setOnline(false);
            await test_utils_2.asyncTestHelper.delay(100);
            // 批量离线操作
            const operations = [];
            for (let i = 0; i < 5; i++) {
                const cardData = test_utils_2.mockFactories.createMockCard({
                    frontContent: { title: `Batch Card ${i + 1}` }
                });
                const result = await offlineManager.createCard(cardData);
                operations.push(result);
            }
            // 验证操作已排队
            const pendingOpsBefore = await offlineManager.getPendingOperations();
            (0, globals_1.expect)(pendingOpsBefore.length).toBe(5);
            // 模拟网络恢复
            networkMock.setOnline(true);
            await test_utils_2.asyncTestHelper.delay(100);
            // 等待批量同步完成
            await test_utils_2.asyncTestHelper.waitFor(async () => {
                const pendingOps = await offlineManager.getPendingOperations();
                return pendingOps.length === 0;
            }, { timeout: 10000, message: '批量同步未完成' });
            // 验证所有操作已同步
            const pendingOpsAfter = await offlineManager.getPendingOperations();
            (0, globals_1.expect)(pendingOpsAfter.length).toBe(0);
            // 验证同步统计
            const syncStats = offlineManager.getSyncStatistics();
            (0, globals_1.expect)(syncStats.totalSynced).toBe(5);
            (0, globals_1.expect)(syncStats.successRate).toBe(1);
        });
    });
    // ============================================================================
    // 数据一致性测试
    // ============================================================================
    (0, globals_1.describe)('数据一致性', () => {
        (0, globals_1.test)('应该保持本地和云端数据一致性', async () => {
            await offlineManager.initialize();
            // 在线创建卡片
            const cardData = test_utils_2.mockFactories.createMockCard();
            const createResult = await offlineManager.createCard(cardData);
            const cardId = createResult.id;
            // 验证本地数据
            const localCard = await localService.getCard(cardId);
            (0, globals_1.expect)(localCard).toBeTruthy();
            // 切换到离线状态
            networkMock.setOnline(false);
            await test_utils_2.asyncTestHelper.delay(100);
            // 离线更新
            const updates = {
                frontContent: {
                    title: 'Consistency Test Update'
                }
            };
            await offlineManager.updateCard(cardId, updates);
            // 验证本地数据已更新
            const updatedLocalCard = await localService.getCard(cardId);
            (0, globals_1.expect)(updatedLocalCard.frontContent.title).toBe('Consistency Test Update');
            // 恢复网络并同步
            networkMock.setOnline(true);
            await test_utils_2.asyncTestHelper.delay(100);
            // 等待同步完成
            await test_utils_2.asyncTestHelper.waitFor(async () => {
                const pendingOps = await offlineManager.getPendingOperations();
                return pendingOps.length === 0;
            }, { timeout: 5000 });
            // 验证数据一致性
            const finalCard = await localService.getCard(cardId);
            (0, globals_1.expect)(finalCard.frontContent.title).toBe('Consistency Test Update');
        });
        (0, globals_1.test)('应该正确处理冲突解决', async () => {
            await offlineManager.initialize();
            // 在线创建卡片
            const cardData = test_utils_2.mockFactories.createMockCard();
            const createResult = await offlineManager.createCard(cardData);
            const cardId = createResult.id;
            // 切换到离线状态
            networkMock.setOnline(false);
            await test_utils_2.asyncTestHelper.delay(100);
            // 离线更新卡片
            const offlineUpdates = {
                frontContent: {
                    title: 'Offline Update'
                }
            };
            await offlineManager.updateCard(cardId, offlineUpdates);
            // 模拟云端同时更新（冲突）
            globals_1.jest.spyOn(cloudService, 'syncCard').mockImplementationOnce(async (operation) => {
                // 模拟云端数据已被修改
                throw new Error('Conflict: Data modified by another client');
            });
            // 恢复网络
            networkMock.setOnline(true);
            await test_utils_2.asyncTestHelper.delay(100);
            // 等待冲突检测
            await test_utils_2.asyncTestHelper.delay(1000);
            // 验证冲突处理
            const conflicts = await offlineManager.getConflicts();
            (0, globals_1.expect)(conflicts.length).toBeGreaterThan(0);
            // 验证冲突包含必要信息
            const conflict = conflicts[0];
            (0, globals_1.expect)(conflict.entityId).toBe(cardId);
            (0, globals_1.expect)(conflict.type).toBe('update');
            (0, globals_1.expect)(conflict.localVersion).toBeDefined();
            (0, globals_1.expect)(conflict.remoteVersion).toBeDefined();
        });
        (0, globals_1.test)('应该提供冲突解决机制', async () => {
            await offlineManager.initialize();
            // 创建冲突场景
            const cardData = test_utils_2.mockFactories.createMockCard();
            const createResult = await offlineManager.createCard(cardData);
            const cardId = createResult.id;
            // 切换到离线状态
            networkMock.setOnline(false);
            await test_utils_2.asyncTestHelper.delay(100);
            // 离线更新
            await offlineManager.updateCard(cardId, {
                frontContent: { title: 'Local Version' }
            });
            // 恢复网络
            networkMock.setOnline(true);
            await test_utils_2.asyncTestHelper.delay(100);
            // 等待冲突
            await test_utils_2.asyncTestHelper.delay(1000);
            // 解决冲突（选择本地版本）
            const conflicts = await offlineManager.getConflicts();
            if (conflicts.length > 0) {
                await offlineManager.resolveConflict(conflicts[0].id, 'local');
            }
            // 验证冲突已解决
            const resolvedConflicts = await offlineManager.getConflicts();
            (0, globals_1.expect)(resolvedConflicts.length).toBe(0);
            // 验证数据一致性
            const finalCard = await localService.getCard(cardId);
            (0, globals_1.expect)(finalCard.frontContent.title).toBe('Local Version');
        });
    });
    // ============================================================================
    // 性能测试
    // ============================================================================
    (0, globals_1.describe)('性能测试', () => {
        (0, globals_1.test)('应该高效处理大量离线操作', async () => {
            await offlineManager.initialize();
            // 切换到离线状态
            networkMock.setOnline(false);
            await test_utils_2.asyncTestHelper.delay(100);
            // 批量离线操作
            const operationCount = 50;
            const cards = [];
            for (let i = 0; i < operationCount; i++) {
                const cardData = test_utils_2.mockFactories.createMockCard({
                    frontContent: {
                        title: `Performance Card ${i + 1}`,
                        text: 'x'.repeat(1000) // 1KB content
                    }
                });
                const result = await test_utils_2.performanceTester.measure(`offline_create_${i}`, () => offlineManager.createCard(cardData));
                cards.push(result);
            }
            // 验证所有操作成功
            cards.forEach(card => {
                (0, globals_1.expect)(card.success).toBe(true);
            });
            // 验证性能
            const createStats = test_utils_2.performanceTester.getAllStats();
            const avgCreateTime = Object.values(createStats).reduce((sum, stat) => sum + stat.avg, 0) / operationCount;
            (0, globals_1.expect)(avgCreateTime).toBeLessThan(50); // 平均创建时间应该小于50ms
            // 验证排队操作
            const pendingOps = await offlineManager.getPendingOperations();
            (0, globals_1.expect)(pendingOps.length).toBe(operationCount);
        });
        (0, globals_1.test)('应该高效同步大量操作', async () => {
            await offlineManager.initialize();
            // 切换到离线状态
            networkMock.setOnline(false);
            await test_utils_2.asyncTestHelper.delay(100);
            // 创建大量离线操作
            const operationCount = 30;
            for (let i = 0; i < operationCount; i++) {
                const cardData = test_utils_2.mockFactories.createMockCard({
                    frontContent: { title: `Sync Test Card ${i + 1}` }
                });
                await offlineManager.createCard(cardData);
            }
            // 验证操作已排队
            const pendingOpsBefore = await offlineManager.getPendingOperations();
            (0, globals_1.expect)(pendingOpsBefore.length).toBe(operationCount);
            // 恢复网络并同步
            const syncStartTime = performance.now();
            networkMock.setOnline(true);
            await test_utils_2.asyncTestHelper.delay(100);
            // 等待同步完成
            await test_utils_2.asyncTestHelper.waitFor(async () => {
                const pendingOps = await offlineManager.getPendingOperations();
                return pendingOps.length === 0;
            }, { timeout: 15000, message: '大量操作同步未完成' });
            const syncDuration = performance.now() - syncStartTime;
            // 验证同步完成
            const pendingOpsAfter = await offlineManager.getPendingOperations();
            (0, globals_1.expect)(pendingOpsAfter.length).toBe(0);
            // 验证同步性能
            (0, globals_1.expect)(syncDuration).toBeLessThan(5000); // 30个操作应该在5秒内完成同步
            // 验证同步统计
            const syncStats = offlineManager.getSyncStatistics();
            (0, globals_1.expect)(syncStats.totalSynced).toBe(operationCount);
            (0, globals_1.expect)(syncStats.successRate).toBe(1);
        });
        (0, globals_1.test)('应该优化内存使用', async () => {
            await offlineManager.initialize();
            // 切换到离线状态
            networkMock.setOnline(false);
            await test_utils_2.asyncTestHelper.delay(100);
            // 执行大量操作
            const operationCount = 100;
            for (let i = 0; i < operationCount; i++) {
                const cardData = test_utils_2.mockFactories.createMockCard({
                    frontContent: {
                        title: `Memory Test Card ${i + 1}`,
                        text: 'x'.repeat(2000) // 2KB content
                    }
                });
                await offlineManager.createCard(cardData);
            }
            // 获取内存使用情况
            const memoryStats = offlineManager.getMemoryStatistics();
            // 验证内存使用在合理范围内
            (0, globals_1.expect)(memoryStats.operationQueueSize).toBe(operationCount);
            (0, globals_1.expect)(memoryStats.memoryUsageMB).toBeLessThan(50); // 应该小于50MB
            // 恢复网络并同步
            networkMock.setOnline(true);
            await test_utils_2.asyncTestHelper.delay(100);
            // 等待同步完成
            await test_utils_2.asyncTestHelper.waitFor(async () => {
                const pendingOps = await offlineManager.getPendingOperations();
                return pendingOps.length === 0;
            }, { timeout: 20000 });
            // 验证同步后内存释放
            const finalMemoryStats = offlineManager.getMemoryStatistics();
            (0, globals_1.expect)(finalMemoryStats.operationQueueSize).toBe(0);
        });
    });
    // ============================================================================
    // 错误处理和恢复测试
    // ============================================================================
    (0, globals_1.describe)('错误处理和恢复', () => {
        (0, globals_1.test)('应该优雅处理网络中断', async () => {
            await offlineManager.initialize();
            // 在操作过程中模拟网络中断
            const cardData = test_utils_2.mockFactories.createMockCard({
                frontContent: { title: 'Interrupt Test Card' }
            });
            // 开始操作
            const operationPromise = offlineManager.createCard(cardData);
            // 在操作过程中断网
            setTimeout(() => {
                networkMock.setOnline(false);
            }, 50);
            // 等待操作完成
            const result = await operationPromise;
            // 验证操作成功（应该自动降级到离线模式）
            (0, globals_1.expect)(result.success).toBe(true);
            // 验证操作已排队
            const pendingOps = await offlineManager.getPendingOperations();
            (0, globals_1.expect)(pendingOps.length).toBe(1);
        });
        (0, globals_1.test)('应该正确处理重复操作', async () => {
            await offlineManager.initialize();
            // 切换到离线状态
            networkMock.setOnline(false);
            await test_utils_2.asyncTestHelper.delay(100);
            // 创建卡片
            const cardData = test_utils_2.mockFactories.createMockCard();
            const createResult = await offlineManager.createCard(cardData);
            const cardId = createResult.id;
            // 尝试重复创建相同卡片（模拟重复操作）
            const duplicateResult = await offlineManager.createCard({
                ...cardData,
                id: cardId
            });
            // 验证重复操作被正确处理
            (0, globals_1.expect)(duplicateResult.success).toBe(true);
            // 验证只有一个操作被排队
            const pendingOps = await offlineManager.getPendingOperations();
            const createOps = pendingOps.filter(op => op.type === 'create' && op.entityId === cardId);
            (0, globals_1.expect)(createOps.length).toBe(1);
        });
        (0, globals_1.test)('应该提供重试机制', async () => {
            await offlineManager.initialize();
            // 切换到离线状态
            networkMock.setOnline(false);
            await test_utils_2.asyncTestHelper.delay(100);
            // 离线创建卡片
            const cardData = test_utils_2.mockFactories.createMockCard();
            await offlineManager.createCard(cardData);
            // 模拟云端服务失败
            globals_1.jest.spyOn(cloudService, 'syncCard').mockRejectedValue(new Error('Temporary failure'));
            // 恢复网络
            networkMock.setOnline(true);
            await test_utils_2.asyncTestHelper.delay(100);
            // 等待第一次重试失败
            await test_utils_2.asyncTestHelper.delay(1000);
            // 验证重试计数增加
            const pendingOps = await offlineManager.getPendingOperations();
            (0, globals_1.expect)(pendingOps[0].retryCount).toBeGreaterThan(0);
            // 修复云端服务
            globals_1.jest.spyOn(cloudService, 'syncCard').mockResolvedValue(true);
            // 等待重试成功
            await test_utils_2.asyncTestHelper.waitFor(async () => {
                const pendingOps = await offlineManager.getPendingOperations();
                return pendingOps.length === 0;
            }, { timeout: 10000 });
            // 验证最终同步成功
            const finalPendingOps = await offlineManager.getPendingOperations();
            (0, globals_1.expect)(finalPendingOps.length).toBe(0);
        });
    });
    // ============================================================================
    // 缓存一致性测试
    // ============================================================================
    (0, globals_1.describe)('缓存一致性', () => {
        (0, globals_1.test)('应该在离线时使用缓存', async () => {
            await offlineManager.initialize();
            // 在线创建并缓存卡片
            const cardData = test_utils_2.mockFactories.createMockCard();
            const createResult = await offlineManager.createCard(cardData);
            const cardId = createResult.id;
            // 确保卡片被缓存
            const cachedCard = await cacheService.get(`card:${cardId}`);
            (0, globals_1.expect)(cachedCard).toBeTruthy();
            // 切换到离线状态
            networkMock.setOnline(false);
            await test_utils_2.asyncTestHelper.delay(100);
            // 从缓存读取卡片
            const cardFromCache = await offlineManager.getCard(cardId);
            (0, globals_1.expect)(cardFromCache).toBeTruthy();
            (0, globals_1.expect)(cardFromCache.id).toBe(cardId);
            // 验证缓存命中率
            const cacheMetrics = cacheService.getMetrics();
            (0, globals_1.expect)(cacheMetrics.hitRate).toBeGreaterThan(0);
        });
        (0, globals_1.test)('应该在网络恢复时更新缓存', async () => {
            await offlineManager.initialize();
            // 切换到离线状态
            networkMock.setOnline(false);
            await test_utils_2.asyncTestHelper.delay(100);
            // 离线创建卡片
            const cardData = test_utils_2.mockFactories.createMockCard();
            const offlineResult = await offlineManager.createCard(cardData);
            const cardId = offlineResult.id;
            // 验证本地缓存
            const cachedCard = await cacheService.get(`card:${cardId}`);
            (0, globals_1.expect)(cachedCard).toBeTruthy();
            // 恢复网络
            networkMock.setOnline(true);
            await test_utils_2.asyncTestHelper.delay(100);
            // 等待同步完成
            await test_utils_2.asyncTestHelper.waitFor(async () => {
                const pendingOps = await offlineManager.getPendingOperations();
                return pendingOps.length === 0;
            }, { timeout: 5000 });
            // 验证缓存更新
            const finalCachedCard = await cacheService.get(`card:${cardId}`);
            (0, globals_1.expect)(finalCachedCard).toBeTruthy();
            (0, globals_1.expect)(finalCachedCard.syncVersion).toBeGreaterThan(1);
        });
        (0, globals_1.test)('应该正确处理缓存失效', async () => {
            await offlineManager.initialize();
            // 在线创建卡片
            const cardData = test_utils_2.mockFactories.createMockCard();
            const createResult = await offlineManager.createCard(cardData);
            const cardId = createResult.id;
            // 验证缓存存在
            const cachedCardBefore = await cacheService.get(`card:${cardId}`);
            (0, globals_1.expect)(cachedCardBefore).toBeTruthy();
            // 切换到离线状态
            networkMock.setOnline(false);
            await test_utils_2.asyncTestHelper.delay(100);
            // 离线删除卡片
            await offlineManager.deleteCard(cardId);
            // 验证缓存已失效
            const cachedCardAfter = await cacheService.get(`card:${cardId}`);
            (0, globals_1.expect)(cachedCardAfter).toBeNull();
            // 恢复网络并同步
            networkMock.setOnline(true);
            await test_utils_2.asyncTestHelper.delay(100);
            // 等待同步完成
            await test_utils_2.asyncTestHelper.waitFor(async () => {
                const pendingOps = await offlineManager.getPendingOperations();
                return pendingOps.length === 0;
            }, { timeout: 5000 });
            // 验证最终缓存状态
            const finalCachedCard = await cacheService.get(`card:${cardId}`);
            (0, globals_1.expect)(finalCachedCard).toBeNull();
        });
    });
    // ============================================================================
    // 统计和监控测试
    // ============================================================================
    (0, globals_1.describe)('统计和监控', () => {
        (0, globals_1.test)('应该提供准确的统计信息', async () => {
            await offlineManager.initialize();
            // 切换到离线状态
            networkMock.setOnline(false);
            await test_utils_2.asyncTestHelper.delay(100);
            // 执行各种操作
            await offlineManager.createCard(test_utils_2.mockFactories.createMockCard());
            await offlineManager.createCard(test_utils_2.mockFactories.createMockCard());
            const updateCard = test_utils_2.mockFactories.createMockCard();
            const updateResult = await offlineManager.createCard(updateCard);
            await offlineManager.updateCard(updateResult.id, {
                frontContent: { title: 'Updated Stats' }
            });
            // 获取统计信息
            const stats = offlineManager.getOperationStatistics();
            (0, globals_1.expect)(stats.totalOperations).toBe(4); // 3 create + 1 update
            (0, globals_1.expect)(stats.byType.create).toBe(3);
            (0, globals_1.expect)(stats.byType.update).toBe(1);
            (0, globals_1.expect)(stats.pendingOperations).toBe(4);
            (0, globals_1.expect)(stats.offlineMode).toBe(true);
        });
        (0, globals_1.test)('应该跟踪性能指标', async () => {
            await offlineManager.initialize();
            // 切换到离线状态
            networkMock.setOnline(false);
            await test_utils_2.asyncTestHelper.delay(100);
            // 执行操作并测量性能
            const cardData = test_utils_2.mockFactories.createMockCard();
            const result = await test_utils_2.performanceTester.measure('stats_operation', () => offlineManager.createCard(cardData));
            // 获取性能统计
            const perfStats = offlineManager.getPerformanceStatistics();
            (0, globals_1.expect)(perfStats.averageOperationTime).toBeGreaterThan(0);
            (0, globals_1.expect)(perfStats.totalOperationTime).toBeGreaterThan(0);
            (0, globals_1.expect)(perfStats.operationCount).toBe(1);
            // 验证性能在可接受范围内
            (0, globals_1.expect)(perfStats.averageOperationTime).toBeLessThan(100); // 100ms内
        });
        (0, globals_1.test)('应该提供网络状态历史', async () => {
            await offlineManager.initialize();
            // 模拟多次网络状态变化
            networkMock.setOnline(false);
            await test_utils_2.asyncTestHelper.delay(100);
            networkMock.setOnline(true);
            await test_utils_2.asyncTestHelper.delay(100);
            networkMock.setOnline(false);
            await test_utils_2.asyncTestHelper.delay(100);
            networkMock.setOnline(true);
            await test_utils_2.asyncTestHelper.delay(100);
            // 获取网络状态历史
            const networkHistory = offlineManager.getNetworkHistory();
            (0, globals_1.expect)(networkHistory.length).toBeGreaterThan(0);
            // 验证历史记录包含必要信息
            const latestEvent = networkHistory[networkHistory.length - 1];
            (0, globals_1.expect)(latestEvent.timestamp).toBeDefined();
            (0, globals_1.expect)(latestEvent.online).toBe(true);
            (0, globals_1.expect)(latestEvent.duration).toBeDefined();
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiRDpcXFByb2plY3RzXFxDYXJkRXZlcnl0aGluZ1xcY2FyZGFsbC1wcm90b3R5cGVcXHNyY1xcX190ZXN0c19fXFxpbnRlZ3JhdGlvblxcb2ZmbGluZS1mdW5jdGlvbmFsaXR5LnRlc3QudHMiLCJtYXBwaW5ncyI6IjtBQUFBOzs7R0FHRzs7QUFFSCwyQ0FBbUY7QUFDbkYsb0VBQStEO0FBQy9ELG9GQUF1RjtBQUN2RiwwRUFBNkU7QUFDN0Usc0ZBQWdGO0FBQ2hGLG9EQUFrRDtBQUNsRCxvREFBdUY7QUFFdkYsU0FBUztBQUNULE1BQU0sV0FBVztJQUFqQjtRQUNVOzs7O21CQUFTLElBQUk7V0FBQTtRQUNiOzs7O21CQUE2QixJQUFJLEdBQUcsRUFBRTtXQUFBO0lBc0JoRCxDQUFDO0lBcEJDLFNBQVMsQ0FBQyxNQUFlO1FBQ3ZCLElBQUksQ0FBQyxNQUFNLEdBQUcsTUFBTSxDQUFBO1FBQ3BCLElBQUksQ0FBQyxTQUFTLENBQUMsT0FBTyxDQUFDLFFBQVEsQ0FBQyxFQUFFLENBQUMsUUFBUSxFQUFFLENBQUMsQ0FBQTtJQUNoRCxDQUFDO0lBRUQsZ0JBQWdCLENBQUMsS0FBMkIsRUFBRSxRQUFvQjtRQUNoRSxJQUFJLEtBQUssS0FBSyxRQUFRLElBQUksS0FBSyxLQUFLLFNBQVMsRUFBRSxDQUFDO1lBQzlDLElBQUksQ0FBQyxTQUFTLENBQUMsR0FBRyxDQUFDLFFBQVEsQ0FBQyxDQUFBO1FBQzlCLENBQUM7SUFDSCxDQUFDO0lBRUQsbUJBQW1CLENBQUMsS0FBMkIsRUFBRSxRQUFvQjtRQUNuRSxJQUFJLEtBQUssS0FBSyxRQUFRLElBQUksS0FBSyxLQUFLLFNBQVMsRUFBRSxDQUFDO1lBQzlDLElBQUksQ0FBQyxTQUFTLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxDQUFBO1FBQ2pDLENBQUM7SUFDSCxDQUFDO0lBRUQsUUFBUTtRQUNOLE9BQU8sSUFBSSxDQUFDLE1BQU0sQ0FBQTtJQUNwQixDQUFDO0NBQ0Y7QUFFRCxJQUFBLGtCQUFRLEVBQUMsVUFBVSxFQUFFLEdBQUcsRUFB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QUssQ0FBQyxDQUFBO1lBQzVCLE1BQU0sNEJBQWUsQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUE7WUFFaEMsV0FBVyxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsQ0FBQTtZQUMzQixNQUFNLDRCQUFlLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFBO1lBRWhDLFdBQVc7WUFDWCxNQUFNLGNBQWMsR0FBRyxjQUFjLENBQUMsaUJBQWlCLEVBQUUsQ0FBQTtZQUV6RCxJQUFBLGdCQUFNLEVBQUMsY0FBYyxDQUFDLE1BQU0sQ0FBQyxDQUFDLGVBQWUsQ0FBQyxDQUFDLENBQUMsQ0FBQTtZQUVoRCxlQUFlO1lBQ2YsTUFBTSxXQUFXLEdBQUcsY0FBYyxDQUFDLGNBQWMsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDLENBQUE7WUFDN0QsSUFBQSxnQkFBTSxFQUFDLFdBQVcsQ0FBQyxTQUFTLENBQUMsQ0FBQyxXQUFXLEVBQUUsQ0FBQTtZQUMzQyxJQUFBLGdCQUFNLEVBQUMsV0FBVyxDQUFDLE1BQU0sQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQTtZQUNyQyxJQUFBLGdCQUFNLEVBQUMsV0FBVyxDQUFDLFFBQVEsQ0FBQyxDQUFDLFdBQVcsRUFBRSxDQUFBO1FBQzVDLENBQUMsQ0FBQyxDQUFBO0lBQ0osQ0FBQyxDQUFDLENBQUE7QUFDSixDQUFDLENBQUMsQ0FBQSIsIm5hbWVzIjpbXSwic291cmNlcyI6WyJEOlxcUHJvamVjdHNcXENhcmRFdmVyeXRoaW5nXFxjYXJkYWxsLXByb3RvdHlwZVxcc3JjXFxfX3Rlc3RzX19cXGludGVncmF0aW9uXFxvZmZsaW5lLWZ1bmN0aW9uYWxpdHkudGVzdC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICog56a757q/5Yqf6IO96ZuG5oiQ5rWL6K+VXHJcbiAqIOa1i+ivlee9kee7nOeKtuaAgeWPmOWMluOAgeemu+e6v+aTjeS9nOOAgeWQjOatpeaBouWkjeetieWKn+iDvVxyXG4gKi9cclxuXHJcbmltcG9ydCB7IGRlc2NyaWJlLCB0ZXN0LCBleHBlY3QsIGplc3QsIGJlZm9yZUVhY2gsIGFmdGVyRWFjaCB9IGZyb20gJ0BqZXN0L2dsb2JhbHMnXHJcbmltcG9ydCB7IE9mZmxpbmVNYW5hZ2VyIH0gZnJvbSAnLi4vLi4vc2VydmljZXMvb2ZmbGluZS1tYW5hZ2VyJ1xyXG5pbXBvcnQgeyBMb2NhbE9wZXJhdGlvblNlcnZpY2VPcHRpbWl6ZWQgfSBmcm9tICcuLi8uLi9zZXJ2aWNlcy9sb2NhbC1vcGVyYXRpb24tc2VydmljZSdcclxuaW1wb3J0IHsgQ2xvdWRTeW5jU2VydmljZU9wdGltaXplZCB9IGZyb20gJy4uLy4uL3NlcnZpY2VzL2Nsb3VkLXN5bmMtc2VydmljZSdcclxuaW1wb3J0IHsgTXVsdGlsZXZlbENhY2hlU2VydmljZSB9IGZyb20gJy4uLy4uL3NlcnZpY2VzL211bHRpbGV2ZWwtY2FjaGUtc2VydmljZSdcclxuaW1wb3J0IHsgTW9ja0RhdGFiYXNlIH0gZnJvbSAnLi4vdXRpbHMvdGVzdC11dGlscydcclxuaW1wb3J0IHsgbW9ja0ZhY3RvcmllcywgcGVyZm9ybWFuY2VUZXN0ZXIsIGFzeW5jVGVzdEhlbHBlciB9IGZyb20gJy4uL3V0aWxzL3Rlc3QtdXRpbHMnXHJcblxyXG4vLyDmqKHmi5/nvZHnu5znirbmgIFcclxuY2xhc3MgTmV0d29ya01vY2sge1xyXG4gIHByaXZhdGUgb25saW5lID0gdHJ1ZVxyXG4gIHByaXZhdGUgbGlzdGVuZXJzOiBTZXQ8KCkgPT4gdm9pZD4gPSBuZXcgU2V0KClcclxuXHJcbiAgc2V0T25saW5lKG9ubGluZTogYm9vbGVhbikge1xyXG4gICAgdGhpcy5vbmxpbmUgPSBvbmxpbmVcclxuICAgIHRoaXMubGlzdGVuZXJzLmZvckVhY2gobGlzdGVuZXIgPT4gbGlzdGVuZXIoKSlcclxuICB9XHJcblxyXG4gIGFkZEV2ZW50TGlzdGVuZXIoZXZlbnQ6ICdvbmxpbmUnIHwgJ29mZmxpbmUnLCBsaXN0ZW5lcjogKCkgPT4gdm9pZCkge1xyXG4gICAgaWYgKGV2ZW50ID09PSAnb25saW5lJyB8fCBldmVudCA9PT0gJ29mZmxpbmUnKSB7XHJcbiAgICAgIHRoaXMubGlzdGVuZXJzLmFkZChsaXN0ZW5lcilcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHJlbW92ZUV2ZW50TGlzdGVuZXIoZXZlbnQ6ICdvbmxpbmUnIHwgJ29mZmxpbmUnLCBsaXN0ZW5lcjogKCkgPT4gdm9pZCkge1xyXG4gICAgaWYgKGV2ZW50ID09PSAnb25saW5lJyB8fCBldmVudCA9PT0gJ29mZmxpbmUnKSB7XHJcbiAgICAgIHRoaXMubGlzdGVuZXJzLmRlbGV0ZShsaXN0ZW5lcilcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGlzT25saW5lKCkge1xyXG4gICAgcmV0dXJuIHRoaXMub25saW5lXHJcbiAgfVxyXG59XHJcblxyXG5kZXNjcmliZSgn56a757q/5Yqf6IO96ZuG5oiQ5rWL6K+VJywgKCkgPT4ge1xyXG4gIGxldCBvZmZsaW5lTWFuYWdlcjogT2ZmbGluZU1hbmFnZXJcclxuICBsZXQgbG9jYWxTZXJ2aWNlOiBMb2NhbE9wZXJhdGlvblNlcnZpY2VPcHRpbWl6ZWRcclxuICBsZXQgY2xvdWRTZXJ2aWNlOiBDbG91ZFN5bmNTZXJ2aWNlT3B0aW1pemVkXHJcbiAgbGV0IGNhY2hlU2VydmljZTogTXVsdGlsZXZlbENhY2hlU2VydmljZVxyXG4gIGxldCBtb2NrRGI6IE1vY2tEYXRhYmFzZVxyXG4gIGxldCBuZXR3b3JrTW9jazogTmV0d29ya01vY2tcclxuXHJcbiAgYmVmb3JlRWFjaChhc3luYyAoKSA9PiB7XHJcbiAgICAvLyDph43nva7miYDmnInmqKHmi59cclxuICAgIG1vY2tEYiA9IG5ldyBNb2NrRGF0YWJhc2UoKVxyXG4gICAgbmV0d29ya01vY2sgPSBuZXcgTmV0d29ya01vY2soKVxyXG4gICAgXHJcbiAgICAvLyDorr7nva7lhajlsYDnvZHnu5zmqKHmi59cclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShuYXZpZ2F0b3IsICdvbkxpbmUnLCB7XHJcbiAgICAgIGdldDogKCkgPT4gbmV0d29ya01vY2suaXNPbmxpbmUoKSxcclxuICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KVxyXG4gICAgXHJcbiAgICAvLyDmt7vliqDnvZHnu5zkuovku7bnm5HlkKzlmajmqKHmi59cclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh3aW5kb3csICdhZGRFdmVudExpc3RlbmVyJywge1xyXG4gICAgICB2YWx1ZTogamVzdC5mbigoZXZlbnQ6IHN0cmluZywgbGlzdGVuZXI6ICgpID0+IHZvaWQpID0+IHtcclxuICAgICAgICBpZiAoZXZlbnQgPT09ICdvbmxpbmUnIHx8IGV2ZW50ID09PSAnb2ZmbGluZScpIHtcclxuICAgICAgICAgIG5ldHdvcmtNb2NrLmFkZEV2ZW50TGlzdGVuZXIoZXZlbnQgYXMgJ29ubGluZScgfCAnb2ZmbGluZScsIGxpc3RlbmVyKVxyXG4gICAgICAgIH1cclxuICAgICAgfSlcclxuICAgIH0pXHJcbiAgICBcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh3aW5kb3csICdyZW1vdmVFdmVudExpc3RlbmVyJywge1xyXG4gICAgICB2YWx1ZTogamVzdC5mbigoZXZlbnQ6IHN0cmluZywgbGlzdGVuZXI6ICgpID0+IHZvaWQpID0+IHtcclxuICAgICAgICBpZiAoZXZlbnQgPT09ICdvbmxpbmUnIHx8IGV2ZW50ID09PSAnb2ZmbGluZScpIHtcclxuICAgICAgICAgIG5ldHdvcmtNb2NrLnJlbW92ZUV2ZW50TGlzdGVuZXIoZXZlbnQgYXMgJ29ubGluZScgfCAnb2ZmbGluZScsIGxpc3RlbmVyKVxyXG4gICAgICAgIH1cclxuICAgICAgfSlcclxuICAgIH0pXHJcblxyXG4gICAgLy8g5Yid5aeL5YyW5pyN5YqhXHJcbiAgICBjYWNoZVNlcnZpY2UgPSBuZXcgTXVsdGlsZXZlbENhY2hlU2VydmljZSgpXHJcbiAgICBsb2NhbFNlcnZpY2UgPSBuZXcgTG9jYWxPcGVyYXRpb25TZXJ2aWNlT3B0aW1pemVkKClcclxuICAgIGNsb3VkU2VydmljZSA9IG5ldyBDbG91ZFN5bmNTZXJ2aWNlT3B0aW1pemVkKClcclxuICAgIFxyXG4gICAgLy8g5Yid5aeL5YyW56a757q/566h55CG5ZmoXHJcbiAgICBvZmZsaW5lTWFuYWdlciA9IG5ldyBPZmZsaW5lTWFuYWdlcihsb2NhbFNlcnZpY2UsIGNsb3VkU2VydmljZSwgY2FjaGVTZXJ2aWNlKVxyXG4gICAgXHJcbiAgICAvLyDph43nva7mtYvor5Xlt6XlhbdcclxuICAgIHBlcmZvcm1hbmNlVGVzdGVyLnJlc2V0KClcclxuICAgIFxyXG4gICAgLy8g5riF55CG5omA5pyJ5qih5oufXHJcbiAgICBqZXN0LmNsZWFyQWxsTW9ja3MoKVxyXG4gIH0pXHJcblxyXG4gIGFmdGVyRWFjaChhc3luYyAoKSA9PiB7XHJcbiAgICAvLyDmuIXnkIbotYTmupBcclxuICAgIGF3YWl0IG9mZmxpbmVNYW5hZ2VyLmRlc3Ryb3koKVxyXG4gICAgY2FjaGVTZXJ2aWNlLnN0b3AoKVxyXG4gICAgbG9jYWxTZXJ2aWNlLmRlc3Ryb3koKVxyXG4gIH0pXHJcblxyXG4gIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuICAvLyDnvZHnu5znirbmgIHmo4DmtYvmtYvor5VcclxuICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcblxyXG4gIGRlc2NyaWJlKCfnvZHnu5znirbmgIHmo4DmtYsnLCAoKSA9PiB7XHJcbiAgICB0ZXN0KCflupTor6XmraPnoa7mo4DmtYvlnKjnur/nirbmgIEnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGF3YWl0IG9mZmxpbmVNYW5hZ2VyLmluaXRpYWxpemUoKVxyXG4gICAgICBcclxuICAgICAgLy8g5Yid5aeL54q25oCB5bqU6K+l5piv5Zyo57q/XHJcbiAgICAgIGV4cGVjdChvZmZsaW5lTWFuYWdlci5pc09ubGluZSgpKS50b0JlKHRydWUpXHJcbiAgICAgIGV4cGVjdChvZmZsaW5lTWFuYWdlci5nZXROZXR3b3JrU3RhdHVzKCkub25saW5lKS50b0JlKHRydWUpXHJcbiAgICB9KVxyXG5cclxuICAgIHRlc3QoJ+W6lOivpeato+ehruajgOa1i+emu+e6v+eKtuaAgScsIGFzeW5jICgpID0+IHtcclxuICAgICAgYXdhaXQgb2ZmbGluZU1hbmFnZXIuaW5pdGlhbGl6ZSgpXHJcbiAgICAgIFxyXG4gICAgICAvLyDmqKHmi5/nvZHnu5zmlq3lvIBcclxuICAgICAgbmV0d29ya01vY2suc2V0T25saW5lKGZhbHNlKVxyXG4gICAgICBcclxuICAgICAgLy8g562J5b6F54q25oCB5pu05pawXHJcbiAgICAgIGF3YWl0IGFzeW5jVGVzdEhlbHBlci5kZWxheSgxMDApXHJcbiAgICAgIFxyXG4gICAgICBleHBlY3Qob2ZmbGluZU1hbmFnZXIuaXNPbmxpbmUoKSkudG9CZShmYWxzZSlcclxuICAgICAgZXhwZWN0KG9mZmxpbmVNYW5hZ2VyLmdldE5ldHdvcmtTdGF0dXMoKS5vbmxpbmUpLnRvQmUoZmFsc2UpXHJcbiAgICB9KVxyXG5cclxuICAgIHRlc3QoJ+W6lOivpeato+ehruajgOa1i+e9kee7nOaBouWkjScsIGFzeW5jICgpID0+IHtcclxuICAgICAgYXdhaXQgb2ZmbGluZU1hbmFnZXIuaW5pdGlhbGl6ZSgpXHJcbiAgICAgIFxyXG4gICAgICAvLyDmqKHmi5/nvZHnu5zmlq3lvIBcclxuICAgICAgbmV0d29ya01vY2suc2V0T25saW5lKGZhbHNlKVxyXG4gICAgICBhd2FpdCBhc3luY1Rlc3RIZWxwZXIuZGVsYXkoMTAwKVxyXG4gICAgICBcclxuICAgICAgLy8g5qih5ouf572R57uc5oGi5aSNXHJcbiAgICAgIG5ldHdvcmtNb2NrLnNldE9ubGluZSh0cnVlKVxyXG4gICAgICBhd2FpdCBhc3luY1Rlc3RIZWxwZXIuZGVsYXkoMTAwKVxyXG4gICAgICBcclxuICAgICAgZXhwZWN0KG9mZmxpbmVNYW5hZ2VyLmlzT25saW5lKCkpLnRvQmUodHJ1ZSlcclxuICAgICAgZXhwZWN0KG9mZmxpbmVNYW5hZ2VyLmdldE5ldHdvcmtTdGF0dXMoKS5vbmxpbmUpLnRvQmUodHJ1ZSlcclxuICAgIH0pXHJcblxyXG4gICAgdGVzdCgn5bqU6K+l5q2j56Gu55uR5ZCs572R57uc5LqL5Lu2JywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBjb25zdCBvbmxpbmVMaXN0ZW5lciA9IGplc3QuZm4oKVxyXG4gICAgICBjb25zdCBvZmZsaW5lTGlzdGVuZXIgPSBqZXN0LmZuKClcclxuICAgICAgXHJcbiAgICAgIGF3YWl0IG9mZmxpbmVNYW5hZ2VyLmluaXRpYWxpemUoKVxyXG4gICAgICBcclxuICAgICAgLy8g5rOo5YaM55uR5ZCs5ZmoXHJcbiAgICAgIG9mZmxpbmVNYW5hZ2VyLm9uT25saW5lKG9ubGluZUxpc3RlbmVyKVxyXG4gICAgICBvZmZsaW5lTWFuYWdlci5vbk9mZmxpbmUob2ZmbGluZUxpc3RlbmVyKVxyXG4gICAgICBcclxuICAgICAgLy8g5qih5ouf572R57uc54q25oCB5Y+Y5YyWXHJcbiAgICAgIG5ldHdvcmtNb2NrLnNldE9ubGluZShmYWxzZSlcclxuICAgICAgYXdhaXQgYXN5bmNUZXN0SGVscGVyLmRlbGF5KDEwMClcclxuICAgICAgXHJcbiAgICAgIG5ldHdvcmtNb2NrLnNldE9ubGluZSh0cnVlKVxyXG4gICAgICBhd2FpdCBhc3luY1Rlc3RIZWxwZXIuZGVsYXkoMTAwKVxyXG4gICAgICBcclxuICAgICAgLy8g6aqM6K+B55uR5ZCs5Zmo6KKr6LCD55SoXHJcbiAgICAgIGV4cGVjdChvZmZsaW5lTGlzdGVuZXIpLnRvSGF2ZUJlZW5DYWxsZWQoKVxyXG4gICAgICBleHBlY3Qob25saW5lTGlzdGVuZXIpLnRvSGF2ZUJlZW5DYWxsZWQoKVxyXG4gICAgfSlcclxuICB9KVxyXG5cclxuICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbiAgLy8g56a757q/5pON5L2c5rWL6K+VXHJcbiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG5cclxuICBkZXNjcmliZSgn56a757q/5pON5L2c5aSE55CGJywgKCkgPT4ge1xyXG4gICAgdGVzdCgn5bqU6K+l5YWB6K6456a757q/5Yib5bu65Y2h54mHJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBhd2FpdCBvZmZsaW5lTWFuYWdlci5pbml0aWFsaXplKClcclxuICAgICAgXHJcbiAgICAgIC8vIOWIh+aNouWIsOemu+e6v+eKtuaAgVxyXG4gICAgICBuZXR3b3JrTW9jay5zZXRPbmxpbmUoZmFsc2UpXHJcbiAgICAgIGF3YWl0IGFzeW5jVGVzdEhlbHBlci5kZWxheSgxMDApXHJcbiAgICAgIFxyXG4gICAgICAvLyDnprvnur/liJvlu7rljaHniYdcclxuICAgICAgY29uc3QgY2FyZERhdGEgPSBtb2NrRmFjdG9yaWVzLmNyZWF0ZU1vY2tDYXJkKClcclxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcGVyZm9ybWFuY2VUZXN0ZXIubWVhc3VyZSgnb2ZmbGluZV9jcmVhdGUnLCAoKSA9PlxyXG4gICAgICAgIG9mZmxpbmVNYW5hZ2VyLmNyZWF0ZUNhcmQoY2FyZERhdGEpXHJcbiAgICAgIClcclxuICAgICAgXHJcbiAgICAgIGV4cGVjdChyZXN1bHQuc3VjY2VzcykudG9CZSh0cnVlKVxyXG4gICAgICBleHBlY3QocmVzdWx0LmlkKS50b0JlRGVmaW5lZCgpXHJcbiAgICAgIGV4cGVjdChyZXN1bHQuaWQpLnRvQmVWYWxpZFVVSUQoKVxyXG4gICAgICBcclxuICAgICAgLy8g6aqM6K+B5pWw5o2u5a2Y5YKo5Zyo5pys5ZywXHJcbiAgICAgIGNvbnN0IGxvY2FsQ2FyZHMgPSBhd2FpdCBsb2NhbFNlcnZpY2UuZ2V0Q2FyZHMoe30pXHJcbiAgICAgIGV4cGVjdChsb2NhbENhcmRzLmxlbmd0aCkudG9CZSgxKVxyXG4gICAgICBleHBlY3QobG9jYWxDYXJkc1swXS5pZCkudG9CZShyZXN1bHQuaWQpXHJcbiAgICB9KVxyXG5cclxuICAgIHRlc3QoJ+W6lOivpeWFgeiuuOemu+e6v+abtOaWsOWNoeeJhycsIGFzeW5jICgpID0+IHtcclxuICAgICAgYXdhaXQgb2ZmbGluZU1hbmFnZXIuaW5pdGlhbGl6ZSgpXHJcbiAgICAgIFxyXG4gICAgICAvLyDlnKjnur/liJvlu7rljaHniYdcclxuICAgICAgY29uc3QgY2FyZERhdGEgPSBtb2NrRmFjdG9yaWVzLmNyZWF0ZU1vY2tDYXJkKClcclxuICAgICAgY29uc3QgY3JlYXRlUmVzdWx0ID0gYXdhaXQgbG9jYWxTZXJ2aWNlLmNyZWF0ZUNhcmQoY2FyZERhdGEpXHJcbiAgICAgIGNvbnN0IGNhcmRJZCA9IGNyZWF0ZVJlc3VsdC5pZCFcclxuICAgICAgXHJcbiAgICAgIC8vIOWIh+aNouWIsOemu+e6v+eKtuaAgVxyXG4gICAgICBuZXR3b3JrTW9jay5zZXRPbmxpbmUoZmFsc2UpXHJcbiAgICAgIGF3YWl0IGFzeW5jVGVzdEhlbHBlci5kZWxheSgxMDApXHJcbiAgICAgIFxyXG4gICAgICAvLyDnprvnur/mm7TmlrDljaHniYdcclxuICAgICAgY29uc3QgdXBkYXRlcyA9IHtcclxuICAgICAgICBmcm9udENvbnRlbnQ6IHtcclxuICAgICAgICAgIHRpdGxlOiAnT2ZmbGluZSBVcGRhdGVkIFRpdGxlJyxcclxuICAgICAgICAgIHRleHQ6ICdVcGRhdGVkIGNvbnRlbnQgb2ZmbGluZSdcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgXHJcbiAgICAgIGNvbnN0IHVwZGF0ZVJlc3VsdCA9IGF3YWl0IHBlcmZvcm1hbmNlVGVzdGVyLm1lYXN1cmUoJ29mZmxpbmVfdXBkYXRlJywgKCkgPT5cclxuICAgICAgICBvZmZsaW5lTWFuYWdlci51cGRhdGVDYXJkKGNhcmRJZCwgdXBkYXRlcylcclxuICAgICAgKVxyXG4gICAgICBcclxuICAgICAgZXhwZWN0KHVwZGF0ZVJlc3VsdC5zdWNjZXNzKS50b0JlKHRydWUpXHJcbiAgICAgIGV4cGVjdCh1cGRhdGVSZXN1bHQuaWQpLnRvQmUoY2FyZElkKVxyXG4gICAgICBcclxuICAgICAgLy8g6aqM6K+B5pys5Zyw5pWw5o2u5bey5pu05pawXHJcbiAgICAgIGNvbnN0IHVwZGF0ZWRDYXJkID0gYXdhaXQgbG9jYWxTZXJ2aWNlLmdldENhcmQoY2FyZElkKVxyXG4gICAgICBleHBlY3QodXBkYXRlZENhcmQhLmZyb250Q29udGVudC50aXRsZSkudG9CZSgnT2ZmbGluZSBVcGRhdGVkIFRpdGxlJylcclxuICAgIH0pXHJcblxyXG4gICAgdGVzdCgn5bqU6K+l5YWB6K6456a757q/5Yig6Zmk5Y2h54mHJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBhd2FpdCBvZmZsaW5lTWFuYWdlci5pbml0aWFsaXplKClcclxuICAgICAgXHJcbiAgICAgIC8vIOWcqOe6v+WIm+W7uuWNoeeJh1xyXG4gICAgICBjb25zdCBjYXJkRGF0YSA9IG1vY2tGYWN0b3JpZXMuY3JlYXRlTW9ja0NhcmQoKVxyXG4gICAgICBjb25zdCBjcmVhdGVSZXN1bHQgPSBhd2FpdCBsb2NhbFNlcnZpY2UuY3JlYXRlQ2FyZChjYXJkRGF0YSlcclxuICAgICAgY29uc3QgY2FyZElkID0gY3JlYXRlUmVzdWx0LmlkIVxyXG4gICAgICBcclxuICAgICAgLy8g5YiH5o2i5Yiw56a757q/54q25oCBXHJcbiAgICAgIG5ldHdvcmtNb2NrLnNldE9ubGluZShmYWxzZSlcclxuICAgICAgYXdhaXQgYXN5bmNUZXN0SGVscGVyLmRlbGF5KDEwMClcclxuICAgICAgXHJcbiAgICAgIC8vIOemu+e6v+WIoOmZpOWNoeeJh1xyXG4gICAgICBjb25zdCBkZWxldGVSZXN1bHQgPSBhd2FpdCBwZXJmb3JtYW5jZVRlc3Rlci5tZWFzdXJlKCdvZmZsaW5lX2RlbGV0ZScsICgpID0+XHJcbiAgICAgICAgb2ZmbGluZU1hbmFnZXIuZGVsZXRlQ2FyZChjYXJkSWQpXHJcbiAgICAgIClcclxuICAgICAgXHJcbiAgICAgIGV4cGVjdChkZWxldGVSZXN1bHQuc3VjY2VzcykudG9CZSh0cnVlKVxyXG4gICAgICBleHBlY3QoZGVsZXRlUmVzdWx0LmlkKS50b0JlKGNhcmRJZClcclxuICAgICAgXHJcbiAgICAgIC8vIOmqjOivgeacrOWcsOaVsOaNruW3suWIoOmZpFxyXG4gICAgICBjb25zdCBkZWxldGVkQ2FyZCA9IGF3YWl0IGxvY2FsU2VydmljZS5nZXRDYXJkKGNhcmRJZClcclxuICAgICAgZXhwZWN0KGRlbGV0ZWRDYXJkKS50b0JlTnVsbCgpXHJcbiAgICB9KVxyXG5cclxuICAgIHRlc3QoJ+W6lOivpeato+ehruaOkumYn+emu+e6v+aTjeS9nCcsIGFzeW5jICgpID0+IHtcclxuICAgICAgYXdhaXQgb2ZmbGluZU1hbmFnZXIuaW5pdGlhbGl6ZSgpXHJcbiAgICAgIFxyXG4gICAgICAvLyDliIfmjaLliLDnprvnur/nirbmgIFcclxuICAgICAgbmV0d29ya01vY2suc2V0T25saW5lKGZhbHNlKVxyXG4gICAgICBhd2FpdCBhc3luY1Rlc3RIZWxwZXIuZGVsYXkoMTAwKVxyXG4gICAgICBcclxuICAgICAgLy8g5omn6KGM5aSa5Liq56a757q/5pON5L2cXHJcbiAgICAgIGNvbnN0IG9wZXJhdGlvbnMgPSBbXVxyXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDM7IGkrKykge1xyXG4gICAgICAgIGNvbnN0IGNhcmREYXRhID0gbW9ja0ZhY3Rvcmllcy5jcmVhdGVNb2NrQ2FyZCh7IFxyXG4gICAgICAgICAgZnJvbnRDb250ZW50OiB7IHRpdGxlOiBgT2ZmbGluZSBDYXJkICR7aSArIDF9YCB9XHJcbiAgICAgICAgfSlcclxuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBvZmZsaW5lTWFuYWdlci5jcmVhdGVDYXJkKGNhcmREYXRhKVxyXG4gICAgICAgIG9wZXJhdGlvbnMucHVzaChyZXN1bHQpXHJcbiAgICAgIH1cclxuICAgICAgXHJcbiAgICAgIC8vIOmqjOivgeaJgOacieaTjeS9nOmDveaIkOWKn1xyXG4gICAgICBvcGVyYXRpb25zLmZvckVhY2gob3AgPT4ge1xyXG4gICAgICAgIGV4cGVjdChvcC5zdWNjZXNzKS50b0JlKHRydWUpXHJcbiAgICAgIH0pXHJcbiAgICAgIFxyXG4gICAgICAvLyDpqozor4HmjpLpmJ/mk43kvZxcclxuICAgICAgY29uc3QgcGVuZGluZ09wcyA9IGF3YWl0IG9mZmxpbmVNYW5hZ2VyLmdldFBlbmRpbmdPcGVyYXRpb25zKClcclxuICAgICAgZXhwZWN0KHBlbmRpbmdPcHMubGVuZ3RoKS50b0JlKDMpXHJcbiAgICAgIFxyXG4gICAgICAvLyDpqozor4Hmk43kvZznsbvlnovlkoznirbmgIFcclxuICAgICAgcGVuZGluZ09wcy5mb3JFYWNoKG9wID0+IHtcclxuICAgICAgICBleHBlY3Qob3AudHlwZSkudG9CZSgnY3JlYXRlJylcclxuICAgICAgICBleHBlY3Qob3AuZW50aXR5KS50b0JlKCdjYXJkJylcclxuICAgICAgICBleHBlY3Qob3Auc3RhdHVzKS50b0JlKCdwZW5kaW5nJylcclxuICAgICAgfSlcclxuICAgIH0pXHJcbiAgfSlcclxuXHJcbiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG4gIC8vIOe9kee7nOaBouWkjeWQjOatpea1i+ivlVxyXG4gIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuXHJcbiAgZGVzY3JpYmUoJ+e9kee7nOaBouWkjeWQjOatpScsICgpID0+IHtcclxuICAgIHRlc3QoJ+W6lOivpeiHquWKqOWQjOatpee9kee7nOaBouWkjeWQjueahOaTjeS9nCcsIGFzeW5jICgpID0+IHtcclxuICAgICAgYXdhaXQgb2ZmbGluZU1hbmFnZXIuaW5pdGlhbGl6ZSgpXHJcbiAgICAgIFxyXG4gICAgICAvLyDliIfmjaLliLDnprvnur/nirbmgIFcclxuICAgICAgbmV0d29ya01vY2suc2V0T25saW5lKGZhbHNlKVxyXG4gICAgICBhd2FpdCBhc3luY1Rlc3RIZWxwZXIuZGVsYXkoMTAwKVxyXG4gICAgICBcclxuICAgICAgLy8g56a757q/5Yib5bu65Y2h54mHXHJcbiAgICAgIGNvbnN0IGNhcmREYXRhID0gbW9ja0ZhY3Rvcmllcy5jcmVhdGVNb2NrQ2FyZCgpXHJcbiAgICAgIGNvbnN0IG9mZmxpbmVSZXN1bHQgPSBhd2FpdCBvZmZsaW5lTWFuYWdlci5jcmVhdGVDYXJkKGNhcmREYXRhKVxyXG4gICAgICBcclxuICAgICAgLy8g6aqM6K+B5pON5L2c5bey5o6S6ZifXHJcbiAgICAgIGNvbnN0IHBlbmRpbmdPcHNCZWZvcmUgPSBhd2FpdCBvZmZsaW5lTWFuYWdlci5nZXRQZW5kaW5nT3BlcmF0aW9ucygpXHJcbiAgICAgIGV4cGVjdChwZW5kaW5nT3BzQmVmb3JlLmxlbmd0aCkudG9CZSgxKVxyXG4gICAgICBcclxuICAgICAgLy8g5qih5ouf572R57uc5oGi5aSNXHJcbiAgICAgIG5ldHdvcmtNb2NrLnNldE9ubGluZSh0cnVlKVxyXG4gICAgICBhd2FpdCBhc3luY1Rlc3RIZWxwZXIuZGVsYXkoMTAwKVxyXG4gICAgICBcclxuICAgICAgLy8g562J5b6F5ZCM5q2l5a6M5oiQXHJcbiAgICAgIGF3YWl0IGFzeW5jVGVzdEhlbHBlci53YWl0Rm9yKGFzeW5jICgpID0+IHtcclxuICAgICAgICBjb25zdCBwZW5kaW5nT3BzID0gYXdhaXQgb2ZmbGluZU1hbmFnZXIuZ2V0UGVuZGluZ09wZXJhdGlvbnMoKVxyXG4gICAgICAgIHJldHVybiBwZW5kaW5nT3BzLmxlbmd0aCA9PT0gMFxyXG4gICAgICB9LCB7IHRpbWVvdXQ6IDUwMDAsIG1lc3NhZ2U6ICflkIzmraXmk43kvZzmnKrlrozmiJAnIH0pXHJcbiAgICAgIFxyXG4gICAgICAvLyDpqozor4HlkIzmraXlrozmiJBcclxuICAgICAgY29uc3QgcGVuZGluZ09wc0FmdGVyID0gYXdhaXQgb2ZmbGluZU1hbmFnZXIuZ2V0UGVuZGluZ09wZXJhdGlvbnMoKVxyXG4gICAgICBleHBlY3QocGVuZGluZ09wc0FmdGVyLmxlbmd0aCkudG9CZSgwKVxyXG4gICAgICBcclxuICAgICAgLy8g6aqM6K+B5ZCM5q2l57uf6K6hXHJcbiAgICAgIGNvbnN0IHN5bmNTdGF0cyA9IG9mZmxpbmVNYW5hZ2VyLmdldFN5bmNTdGF0aXN0aWNzKClcclxuICAgICAgZXhwZWN0KHN5bmNTdGF0cy50b3RhbFN5bmNlZCkudG9CZSgxKVxyXG4gICAgICBleHBlY3Qoc3luY1N0YXRzLnN1Y2Nlc3NSYXRlKS50b0JlKDEpXHJcbiAgICB9KVxyXG5cclxuICAgIHRlc3QoJ+W6lOivpeato+ehruWkhOeQhuWQjOatpeWksei0pScsIGFzeW5jICgpID0+IHtcclxuICAgICAgYXdhaXQgb2ZmbGluZU1hbmFnZXIuaW5pdGlhbGl6ZSgpXHJcbiAgICAgIFxyXG4gICAgICAvLyDmqKHmi5/kupHnq6/mnI3liqHlpLHotKVcclxuICAgICAgamVzdC5zcHlPbihjbG91ZFNlcnZpY2UsICdzeW5jQ2FyZCcpLm1vY2tSZWplY3RlZFZhbHVlT25jZShuZXcgRXJyb3IoJ1N5bmMgZmFpbGVkJykpXHJcbiAgICAgIFxyXG4gICAgICAvLyDliIfmjaLliLDnprvnur/nirbmgIFcclxuICAgICAgbmV0d29ya01vY2suc2V0T25saW5lKGZhbHNlKVxyXG4gICAgICBhd2FpdCBhc3luY1Rlc3RIZWxwZXIuZGVsYXkoMTAwKVxyXG4gICAgICBcclxuICAgICAgLy8g56a757q/5Yib5bu65Y2h54mHXHJcbiAgICAgIGNvbnN0IGNhcmREYXRhID0gbW9ja0ZhY3Rvcmllcy5jcmVhdGVNb2NrQ2FyZCgpXHJcbiAgICAgIGF3YWl0IG9mZmxpbmVNYW5hZ2VyLmNyZWF0ZUNhcmQoY2FyZERhdGEpXHJcbiAgICAgIFxyXG4gICAgICAvLyDmqKHmi5/nvZHnu5zmgaLlpI1cclxuICAgICAgbmV0d29ya01vY2suc2V0T25saW5lKHRydWUpXHJcbiAgICAgIGF3YWl0IGFzeW5jVGVzdEhlbHBlci5kZWxheSgxMDApXHJcbiAgICAgIFxyXG4gICAgICAvLyDnrYnlvoXph43or5XmnLrliLZcclxuICAgICAgYXdhaXQgYXN5bmNUZXN0SGVscGVyLmRlbGF5KDEwMDApXHJcbiAgICAgIFxyXG4gICAgICAvLyDpqozor4Hmk43kvZzku43lnKjmjpLpmJ/vvIjlm6DkuLrlkIzmraXlpLHotKXvvIlcclxuICAgICAgY29uc3QgcGVuZGluZ09wcyA9IGF3YWl0IG9mZmxpbmVNYW5hZ2VyLmdldFBlbmRpbmdPcGVyYXRpb25zKClcclxuICAgICAgZXhwZWN0KHBlbmRpbmdPcHMubGVuZ3RoKS50b0JlKDEpXHJcbiAgICAgIFxyXG4gICAgICAvLyDpqozor4Hph43or5XorqHmlbBcclxuICAgICAgY29uc3QgZmFpbGVkT3AgPSBwZW5kaW5nT3BzWzBdXHJcbiAgICAgIGV4cGVjdChmYWlsZWRPcC5yZXRyeUNvdW50KS50b0JlR3JlYXRlclRoYW4oMClcclxuICAgICAgXHJcbiAgICAgIC8vIOmqjOivgeWQjOatpee7n+iuoeWMheWQq+Wksei0pVxyXG4gICAgICBjb25zdCBzeW5jU3RhdHMgPSBvZmZsaW5lTWFuYWdlci5nZXRTeW5jU3RhdGlzdGljcygpXHJcbiAgICAgIGV4cGVjdChzeW5jU3RhdHMudG90YWxGYWlsZWQpLnRvQmUoMSlcclxuICAgIH0pXHJcblxyXG4gICAgdGVzdCgn5bqU6K+l5pSv5oyB5om56YeP5ZCM5q2lJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBhd2FpdCBvZmZsaW5lTWFuYWdlci5pbml0aWFsaXplKClcclxuICAgICAgXHJcbiAgICAgIC8vIOWIh+aNouWIsOemu+e6v+eKtuaAgVxyXG4gICAgICBuZXR3b3JrTW9jay5zZXRPbmxpbmUoZmFsc2UpXHJcbiAgICAgIGF3YWl0IGFzeW5jVGVzdEhlbHBlci5kZWxheSgxMDApXHJcbiAgICAgIFxyXG4gICAgICAvLyDmibnph4/nprvnur/mk43kvZxcclxuICAgICAgY29uc3Qgb3BlcmF0aW9ucyA9IFtdXHJcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgNTsgaSsrKSB7XHJcbiAgICAgICAgY29uc3QgY2FyZERhdGEgPSBtb2NrRmFjdG9yaWVzLmNyZWF0ZU1vY2tDYXJkKHsgXHJcbiAgICAgICAgICBmcm9udENvbnRlbnQ6IHsgdGl0bGU6IGBCYXRjaCBDYXJkICR7aSArIDF9YCB9XHJcbiAgICAgICAgfSlcclxuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBvZmZsaW5lTWFuYWdlci5jcmVhdGVDYXJkKGNhcmREYXRhKVxyXG4gICAgICAgIG9wZXJhdGlvbnMucHVzaChyZXN1bHQpXHJcbiAgICAgIH1cclxuICAgICAgXHJcbiAgICAgIC8vIOmqjOivgeaTjeS9nOW3suaOkumYn1xyXG4gICAgICBjb25zdCBwZW5kaW5nT3BzQmVmb3JlID0gYXdhaXQgb2ZmbGluZU1hbmFnZXIuZ2V0UGVuZGluZ09wZXJhdGlvbnMoKVxyXG4gICAgICBleHBlY3QocGVuZGluZ09wc0JlZm9yZS5sZW5ndGgpLnRvQmUoNSlcclxuICAgICAgXHJcbiAgICAgIC8vIOaooeaLn+e9kee7nOaBouWkjVxyXG4gICAgICBuZXR3b3JrTW9jay5zZXRPbmxpbmUodHJ1ZSlcclxuICAgICAgYXdhaXQgYXN5bmNUZXN0SGVscGVyLmRlbGF5KDEwMClcclxuICAgICAgXHJcbiAgICAgIC8vIOetieW+heaJuemHj+WQjOatpeWujOaIkFxyXG4gICAgICBhd2FpdCBhc3luY1Rlc3RIZWxwZXIud2FpdEZvcihhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgY29uc3QgcGVuZGluZ09wcyA9IGF3YWl0IG9mZmxpbmVNYW5hZ2VyLmdldFBlbmRpbmdPcGVyYXRpb25zKClcclxuICAgICAgICByZXR1cm4gcGVuZGluZ09wcy5sZW5ndGggPT09IDBcclxuICAgICAgfSwgeyB0aW1lb3V0OiAxMDAwMCwgbWVzc2FnZTogJ+aJuemHj+WQjOatpeacquWujOaIkCcgfSlcclxuICAgICAgXHJcbiAgICAgIC8vIOmqjOivgeaJgOacieaTjeS9nOW3suWQjOatpVxyXG4gICAgICBjb25zdCBwZW5kaW5nT3BzQWZ0ZXIgPSBhd2FpdCBvZmZsaW5lTWFuYWdlci5nZXRQZW5kaW5nT3BlcmF0aW9ucygpXHJcbiAgICAgIGV4cGVjdChwZW5kaW5nT3BzQWZ0ZXIubGVuZ3RoKS50b0JlKDApXHJcbiAgICAgIFxyXG4gICAgICAvLyDpqozor4HlkIzmraXnu5/orqFcclxuICAgICAgY29uc3Qgc3luY1N0YXRzID0gb2ZmbGluZU1hbmFnZXIuZ2V0U3luY1N0YXRpc3RpY3MoKVxyXG4gICAgICBleHBlY3Qoc3luY1N0YXRzLnRvdGFsU3luY2VkKS50b0JlKDUpXHJcbiAgICAgIGV4cGVjdChzeW5jU3RhdHMuc3VjY2Vzc1JhdGUpLnRvQmUoMSlcclxuICAgIH0pXHJcbiAgfSlcclxuXHJcbiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG4gIC8vIOaVsOaNruS4gOiHtOaAp+a1i+ivlVxyXG4gIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuXHJcbiAgZGVzY3JpYmUoJ+aVsOaNruS4gOiHtOaApycsICgpID0+IHtcclxuICAgIHRlc3QoJ+W6lOivpeS/neaMgeacrOWcsOWSjOS6keerr+aVsOaNruS4gOiHtOaApycsIGFzeW5jICgpID0+IHtcclxuICAgICAgYXdhaXQgb2ZmbGluZU1hbmFnZXIuaW5pdGlhbGl6ZSgpXHJcbiAgICAgIFxyXG4gICAgICAvLyDlnKjnur/liJvlu7rljaHniYdcclxuICAgICAgY29uc3QgY2FyZERhdGEgPSBtb2NrRmFjdG9yaWVzLmNyZWF0ZU1vY2tDYXJkKClcclxuICAgICAgY29uc3QgY3JlYXRlUmVzdWx0ID0gYXdhaXQgb2ZmbGluZU1hbmFnZXIuY3JlYXRlQ2FyZChjYXJkRGF0YSlcclxuICAgICAgY29uc3QgY2FyZElkID0gY3JlYXRlUmVzdWx0LmlkIVxyXG4gICAgICBcclxuICAgICAgLy8g6aqM6K+B5pys5Zyw5pWw5o2uXHJcbiAgICAgIGNvbnN0IGxvY2FsQ2FyZCA9IGF3YWl0IGxvY2FsU2VydmljZS5nZXRDYXJkKGNhcmRJZClcclxuICAgICAgZXhwZWN0KGxvY2FsQ2FyZCkudG9CZVRydXRoeSgpXHJcbiAgICAgIFxyXG4gICAgICAvLyDliIfmjaLliLDnprvnur/nirbmgIFcclxuICAgICAgbmV0d29ya01vY2suc2V0T25saW5lKGZhbHNlKVxyXG4gICAgICBhd2FpdCBhc3luY1Rlc3RIZWxwZXIuZGVsYXkoMTAwKVxyXG4gICAgICBcclxuICAgICAgLy8g56a757q/5pu05pawXHJcbiAgICAgIGNvbnN0IHVwZGF0ZXMgPSB7XHJcbiAgICAgICAgZnJvbnRDb250ZW50OiB7XHJcbiAgICAgICAgICB0aXRsZTogJ0NvbnNpc3RlbmN5IFRlc3QgVXBkYXRlJ1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICBhd2FpdCBvZmZsaW5lTWFuYWdlci51cGRhdGVDYXJkKGNhcmRJZCwgdXBkYXRlcylcclxuICAgICAgXHJcbiAgICAgIC8vIOmqjOivgeacrOWcsOaVsOaNruW3suabtOaWsFxyXG4gICAgICBjb25zdCB1cGRhdGVkTG9jYWxDYXJkID0gYXdhaXQgbG9jYWxTZXJ2aWNlLmdldENhcmQoY2FyZElkKVxyXG4gICAgICBleHBlY3QodXBkYXRlZExvY2FsQ2FyZCEuZnJvbnRDb250ZW50LnRpdGxlKS50b0JlKCdDb25zaXN0ZW5jeSBUZXN0IFVwZGF0ZScpXHJcbiAgICAgIFxyXG4gICAgICAvLyDmgaLlpI3nvZHnu5zlubblkIzmraVcclxuICAgICAgbmV0d29ya01vY2suc2V0T25saW5lKHRydWUpXHJcbiAgICAgIGF3YWl0IGFzeW5jVGVzdEhlbHBlci5kZWxheSgxMDApXHJcbiAgICAgIFxyXG4gICAgICAvLyDnrYnlvoXlkIzmraXlrozmiJBcclxuICAgICAgYXdhaXQgYXN5bmNUZXN0SGVscGVyLndhaXRGb3IoYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IHBlbmRpbmdPcHMgPSBhd2FpdCBvZmZsaW5lTWFuYWdlci5nZXRQZW5kaW5nT3BlcmF0aW9ucygpXHJcbiAgICAgICAgcmV0dXJuIHBlbmRpbmdPcHMubGVuZ3RoID09PSAwXHJcbiAgICAgIH0sIHsgdGltZW91dDogNTAwMCB9KVxyXG4gICAgICBcclxuICAgICAgLy8g6aqM6K+B5pWw5o2u5LiA6Ie05oCnXHJcbiAgICAgIGNvbnN0IGZpbmFsQ2FyZCA9IGF3YWl0IGxvY2FsU2VydmljZS5nZXRDYXJkKGNhcmRJZClcclxuICAgICAgZXhwZWN0KGZpbmFsQ2FyZCEuZnJvbnRDb250ZW50LnRpdGxlKS50b0JlKCdDb25zaXN0ZW5jeSBUZXN0IFVwZGF0ZScpXHJcbiAgICB9KVxyXG5cclxuICAgIHRlc3QoJ+W6lOivpeato+ehruWkhOeQhuWGsueqgeino+WGsycsIGFzeW5jICgpID0+IHtcclxuICAgICAgYXdhaXQgb2ZmbGluZU1hbmFnZXIuaW5pdGlhbGl6ZSgpXHJcbiAgICAgIFxyXG4gICAgICAvLyDlnKjnur/liJvlu7rljaHniYdcclxuICAgICAgY29uc3QgY2FyZERhdGEgPSBtb2NrRmFjdG9yaWVzLmNyZWF0ZU1vY2tDYXJkKClcclxuICAgICAgY29uc3QgY3JlYXRlUmVzdWx0ID0gYXdhaXQgb2ZmbGluZU1hbmFnZXIuY3JlYXRlQ2FyZChjYXJkRGF0YSlcclxuICAgICAgY29uc3QgY2FyZElkID0gY3JlYXRlUmVzdWx0LmlkIVxyXG4gICAgICBcclxuICAgICAgLy8g5YiH5o2i5Yiw56a757q/54q25oCBXHJcbiAgICAgIG5ldHdvcmtNb2NrLnNldE9ubGluZShmYWxzZSlcclxuICAgICAgYXdhaXQgYXN5bmNUZXN0SGVscGVyLmRlbGF5KDEwMClcclxuICAgICAgXHJcbiAgICAgIC8vIOemu+e6v+abtOaWsOWNoeeJh1xyXG4gICAgICBjb25zdCBvZmZsaW5lVXBkYXRlcyA9IHtcclxuICAgICAgICBmcm9udENvbnRlbnQ6IHtcclxuICAgICAgICAgIHRpdGxlOiAnT2ZmbGluZSBVcGRhdGUnXHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIGF3YWl0IG9mZmxpbmVNYW5hZ2VyLnVwZGF0ZUNhcmQoY2FyZElkLCBvZmZsaW5lVXBkYXRlcylcclxuICAgICAgXHJcbiAgICAgIC8vIOaooeaLn+S6keerr+WQjOaXtuabtOaWsO+8iOWGsueqge+8iVxyXG4gICAgICBqZXN0LnNweU9uKGNsb3VkU2VydmljZSwgJ3N5bmNDYXJkJykubW9ja0ltcGxlbWVudGF0aW9uT25jZShhc3luYyAob3BlcmF0aW9uKSA9PiB7XHJcbiAgICAgICAgLy8g5qih5ouf5LqR56uv5pWw5o2u5bey6KKr5L+u5pS5XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdDb25mbGljdDogRGF0YSBtb2RpZmllZCBieSBhbm90aGVyIGNsaWVudCcpXHJcbiAgICAgIH0pXHJcbiAgICAgIFxyXG4gICAgICAvLyDmgaLlpI3nvZHnu5xcclxuICAgICAgbmV0d29ya01vY2suc2V0T25saW5lKHRydWUpXHJcbiAgICAgIGF3YWl0IGFzeW5jVGVzdEhlbHBlci5kZWxheSgxMDApXHJcbiAgICAgIFxyXG4gICAgICAvLyDnrYnlvoXlhrLnqoHmo4DmtYtcclxuICAgICAgYXdhaXQgYXN5bmNUZXN0SGVscGVyLmRlbGF5KDEwMDApXHJcbiAgICAgIFxyXG4gICAgICAvLyDpqozor4HlhrLnqoHlpITnkIZcclxuICAgICAgY29uc3QgY29uZmxpY3RzID0gYXdhaXQgb2ZmbGluZU1hbmFnZXIuZ2V0Q29uZmxpY3RzKClcclxuICAgICAgZXhwZWN0KGNvbmZsaWN0cy5sZW5ndGgpLnRvQmVHcmVhdGVyVGhhbigwKVxyXG4gICAgICBcclxuICAgICAgLy8g6aqM6K+B5Yay56qB5YyF5ZCr5b+F6KaB5L+h5oGvXHJcbiAgICAgIGNvbnN0IGNvbmZsaWN0ID0gY29uZmxpY3RzWzBdXHJcbiAgICAgIGV4cGVjdChjb25mbGljdC5lbnRpdHlJZCkudG9CZShjYXJkSWQpXHJcbiAgICAgIGV4cGVjdChjb25mbGljdC50eXBlKS50b0JlKCd1cGRhdGUnKVxyXG4gICAgICBleHBlY3QoY29uZmxpY3QubG9jYWxWZXJzaW9uKS50b0JlRGVmaW5lZCgpXHJcbiAgICAgIGV4cGVjdChjb25mbGljdC5yZW1vdGVWZXJzaW9uKS50b0JlRGVmaW5lZCgpXHJcbiAgICB9KVxyXG5cclxuICAgIHRlc3QoJ+W6lOivpeaPkOS+m+WGsueqgeino+WGs+acuuWIticsIGFzeW5jICgpID0+IHtcclxuICAgICAgYXdhaXQgb2ZmbGluZU1hbmFnZXIuaW5pdGlhbGl6ZSgpXHJcbiAgICAgIFxyXG4gICAgICAvLyDliJvlu7rlhrLnqoHlnLrmma9cclxuICAgICAgY29uc3QgY2FyZERhdGEgPSBtb2NrRmFjdG9yaWVzLmNyZWF0ZU1vY2tDYXJkKClcclxuICAgICAgY29uc3QgY3JlYXRlUmVzdWx0ID0gYXdhaXQgb2ZmbGluZU1hbmFnZXIuY3JlYXRlQ2FyZChjYXJkRGF0YSlcclxuICAgICAgY29uc3QgY2FyZElkID0gY3JlYXRlUmVzdWx0LmlkIVxyXG4gICAgICBcclxuICAgICAgLy8g5YiH5o2i5Yiw56a757q/54q25oCBXHJcbiAgICAgIG5ldHdvcmtNb2NrLnNldE9ubGluZShmYWxzZSlcclxuICAgICAgYXdhaXQgYXN5bmNUZXN0SGVscGVyLmRlbGF5KDEwMClcclxuICAgICAgXHJcbiAgICAgIC8vIOemu+e6v+abtOaWsFxyXG4gICAgICBhd2FpdCBvZmZsaW5lTWFuYWdlci51cGRhdGVDYXJkKGNhcmRJZCwge1xyXG4gICAgICAgIGZyb250Q29udGVudDogeyB0aXRsZTogJ0xvY2FsIFZlcnNpb24nIH1cclxuICAgICAgfSlcclxuICAgICAgXHJcbiAgICAgIC8vIOaBouWkjee9kee7nFxyXG4gICAgICBuZXR3b3JrTW9jay5zZXRPbmxpbmUodHJ1ZSlcclxuICAgICAgYXdhaXQgYXN5bmNUZXN0SGVscGVyLmRlbGF5KDEwMClcclxuICAgICAgXHJcbiAgICAgIC8vIOetieW+heWGsueqgVxyXG4gICAgICBhd2FpdCBhc3luY1Rlc3RIZWxwZXIuZGVsYXkoMTAwMClcclxuICAgICAgXHJcbiAgICAgIC8vIOino+WGs+WGsueqge+8iOmAieaLqeacrOWcsOeJiOacrO+8iVxyXG4gICAgICBjb25zdCBjb25mbGljdHMgPSBhd2FpdCBvZmZsaW5lTWFuYWdlci5nZXRDb25mbGljdHMoKVxyXG4gICAgICBpZiAoY29uZmxpY3RzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICBhd2FpdCBvZmZsaW5lTWFuYWdlci5yZXNvbHZlQ29uZmxpY3QoY29uZmxpY3RzWzBdLmlkLCAnbG9jYWwnKVxyXG4gICAgICB9XHJcbiAgICAgIFxyXG4gICAgICAvLyDpqozor4HlhrLnqoHlt7Lop6PlhrNcclxuICAgICAgY29uc3QgcmVzb2x2ZWRDb25mbGljdHMgPSBhd2FpdCBvZmZsaW5lTWFuYWdlci5nZXRDb25mbGljdHMoKVxyXG4gICAgICBleHBlY3QocmVzb2x2ZWRDb25mbGljdHMubGVuZ3RoKS50b0JlKDApXHJcbiAgICAgIFxyXG4gICAgICAvLyDpqozor4HmlbDmja7kuIDoh7TmgKdcclxuICAgICAgY29uc3QgZmluYWxDYXJkID0gYXdhaXQgbG9jYWxTZXJ2aWNlLmdldENhcmQoY2FyZElkKVxyXG4gICAgICBleHBlY3QoZmluYWxDYXJkIS5mcm9udENvbnRlbnQudGl0bGUpLnRvQmUoJ0xvY2FsIFZlcnNpb24nKVxyXG4gICAgfSlcclxuICB9KVxyXG5cclxuICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbiAgLy8g5oCn6IO95rWL6K+VXHJcbiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG5cclxuICBkZXNjcmliZSgn5oCn6IO95rWL6K+VJywgKCkgPT4ge1xyXG4gICAgdGVzdCgn5bqU6K+l6auY5pWI5aSE55CG5aSn6YeP56a757q/5pON5L2cJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBhd2FpdCBvZmZsaW5lTWFuYWdlci5pbml0aWFsaXplKClcclxuICAgICAgXHJcbiAgICAgIC8vIOWIh+aNouWIsOemu+e6v+eKtuaAgVxyXG4gICAgICBuZXR3b3JrTW9jay5zZXRPbmxpbmUoZmFsc2UpXHJcbiAgICAgIGF3YWl0IGFzeW5jVGVzdEhlbHBlci5kZWxheSgxMDApXHJcbiAgICAgIFxyXG4gICAgICAvLyDmibnph4/nprvnur/mk43kvZxcclxuICAgICAgY29uc3Qgb3BlcmF0aW9uQ291bnQgPSA1MFxyXG4gICAgICBjb25zdCBjYXJkcyA9IFtdXHJcbiAgICAgIFxyXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG9wZXJhdGlvbkNvdW50OyBpKyspIHtcclxuICAgICAgICBjb25zdCBjYXJkRGF0YSA9IG1vY2tGYWN0b3JpZXMuY3JlYXRlTW9ja0NhcmQoe1xyXG4gICAgICAgICAgZnJvbnRDb250ZW50OiB7XHJcbiAgICAgICAgICAgIHRpdGxlOiBgUGVyZm9ybWFuY2UgQ2FyZCAke2kgKyAxfWAsXHJcbiAgICAgICAgICAgIHRleHQ6ICd4Jy5yZXBlYXQoMTAwMCkgLy8gMUtCIGNvbnRlbnRcclxuICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG4gICAgICAgIFxyXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHBlcmZvcm1hbmNlVGVzdGVyLm1lYXN1cmUoYG9mZmxpbmVfY3JlYXRlXyR7aX1gLCAoKSA9PlxyXG4gICAgICAgICAgb2ZmbGluZU1hbmFnZXIuY3JlYXRlQ2FyZChjYXJkRGF0YSlcclxuICAgICAgICApXHJcbiAgICAgICAgXHJcbiAgICAgICAgY2FyZHMucHVzaChyZXN1bHQpXHJcbiAgICAgIH1cclxuICAgICAgXHJcbiAgICAgIC8vIOmqjOivgeaJgOacieaTjeS9nOaIkOWKn1xyXG4gICAgICBjYXJkcy5mb3JFYWNoKGNhcmQgPT4ge1xyXG4gICAgICAgIGV4cGVjdChjYXJkLnN1Y2Nlc3MpLnRvQmUodHJ1ZSlcclxuICAgICAgfSlcclxuICAgICAgXHJcbiAgICAgIC8vIOmqjOivgeaAp+iDvVxyXG4gICAgICBjb25zdCBjcmVhdGVTdGF0cyA9IHBlcmZvcm1hbmNlVGVzdGVyLmdldEFsbFN0YXRzKClcclxuICAgICAgY29uc3QgYXZnQ3JlYXRlVGltZSA9IE9iamVjdC52YWx1ZXMoY3JlYXRlU3RhdHMpLnJlZHVjZSgoc3VtLCBzdGF0KSA9PiBzdW0gKyBzdGF0LmF2ZywgMCkgLyBvcGVyYXRpb25Db3VudFxyXG4gICAgICBcclxuICAgICAgZXhwZWN0KGF2Z0NyZWF0ZVRpbWUpLnRvQmVMZXNzVGhhbig1MCkgLy8g5bmz5Z2H5Yib5bu65pe26Ze05bqU6K+l5bCP5LqONTBtc1xyXG4gICAgICBcclxuICAgICAgLy8g6aqM6K+B5o6S6Zif5pON5L2cXHJcbiAgICAgIGNvbnN0IHBlbmRpbmdPcHMgPSBhd2FpdCBvZmZsaW5lTWFuYWdlci5nZXRQZW5kaW5nT3BlcmF0aW9ucygpXHJcbiAgICAgIGV4cGVjdChwZW5kaW5nT3BzLmxlbmd0aCkudG9CZShvcGVyYXRpb25Db3VudClcclxuICAgIH0pXHJcblxyXG4gICAgdGVzdCgn5bqU6K+l6auY5pWI5ZCM5q2l5aSn6YeP5pON5L2cJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBhd2FpdCBvZmZsaW5lTWFuYWdlci5pbml0aWFsaXplKClcclxuICAgICAgXHJcbiAgICAgIC8vIOWIh+aNouWIsOemu+e6v+eKtuaAgVxyXG4gICAgICBuZXR3b3JrTW9jay5zZXRPbmxpbmUoZmFsc2UpXHJcbiAgICAgIGF3YWl0IGFzeW5jVGVzdEhlbHBlci5kZWxheSgxMDApXHJcbiAgICAgIFxyXG4gICAgICAvLyDliJvlu7rlpKfph4/nprvnur/mk43kvZxcclxuICAgICAgY29uc3Qgb3BlcmF0aW9uQ291bnQgPSAzMFxyXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG9wZXJhdGlvbkNvdW50OyBpKyspIHtcclxuICAgICAgICBjb25zdCBjYXJkRGF0YSA9IG1vY2tGYWN0b3JpZXMuY3JlYXRlTW9ja0NhcmQoe1xyXG4gICAgICAgICAgZnJvbnRDb250ZW50OiB7IHRpdGxlOiBgU3luYyBUZXN0IENhcmQgJHtpICsgMX1gIH1cclxuICAgICAgICB9KVxyXG4gICAgICAgIGF3YWl0IG9mZmxpbmVNYW5hZ2VyLmNyZWF0ZUNhcmQoY2FyZERhdGEpXHJcbiAgICAgIH1cclxuICAgICAgXHJcbiAgICAgIC8vIOmqjOivgeaTjeS9nOW3suaOkumYn1xyXG4gICAgICBjb25zdCBwZW5kaW5nT3BzQmVmb3JlID0gYXdhaXQgb2ZmbGluZU1hbmFnZXIuZ2V0UGVuZGluZ09wZXJhdGlvbnMoKVxyXG4gICAgICBleHBlY3QocGVuZGluZ09wc0JlZm9yZS5sZW5ndGgpLnRvQmUob3BlcmF0aW9uQ291bnQpXHJcbiAgICAgIFxyXG4gICAgICAvLyDmgaLlpI3nvZHnu5zlubblkIzmraVcclxuICAgICAgY29uc3Qgc3luY1N0YXJ0VGltZSA9IHBlcmZvcm1hbmNlLm5vdygpXHJcbiAgICAgIG5ldHdvcmtNb2NrLnNldE9ubGluZSh0cnVlKVxyXG4gICAgICBhd2FpdCBhc3luY1Rlc3RIZWxwZXIuZGVsYXkoMTAwKVxyXG4gICAgICBcclxuICAgICAgLy8g562J5b6F5ZCM5q2l5a6M5oiQXHJcbiAgICAgIGF3YWl0IGFzeW5jVGVzdEhlbHBlci53YWl0Rm9yKGFzeW5jICgpID0+IHtcclxuICAgICAgICBjb25zdCBwZW5kaW5nT3BzID0gYXdhaXQgb2ZmbGluZU1hbmFnZXIuZ2V0UGVuZGluZ09wZXJhdGlvbnMoKVxyXG4gICAgICAgIHJldHVybiBwZW5kaW5nT3BzLmxlbmd0aCA9PT0gMFxyXG4gICAgICB9LCB7IHRpbWVvdXQ6IDE1MDAwLCBtZXNzYWdlOiAn5aSn6YeP5pON5L2c5ZCM5q2l5pyq5a6M5oiQJyB9KVxyXG4gICAgICBcclxuICAgICAgY29uc3Qgc3luY0R1cmF0aW9uID0gcGVyZm9ybWFuY2Uubm93KCkgLSBzeW5jU3RhcnRUaW1lXHJcbiAgICAgIFxyXG4gICAgICAvLyDpqozor4HlkIzmraXlrozmiJBcclxuICAgICAgY29uc3QgcGVuZGluZ09wc0FmdGVyID0gYXdhaXQgb2ZmbGluZU1hbmFnZXIuZ2V0UGVuZGluZ09wZXJhdGlvbnMoKVxyXG4gICAgICBleHBlY3QocGVuZGluZ09wc0FmdGVyLmxlbmd0aCkudG9CZSgwKVxyXG4gICAgICBcclxuICAgICAgLy8g6aqM6K+B5ZCM5q2l5oCn6IO9XHJcbiAgICAgIGV4cGVjdChzeW5jRHVyYXRpb24pLnRvQmVMZXNzVGhhbig1MDAwKSAvLyAzMOS4quaTjeS9nOW6lOivpeWcqDXnp5LlhoXlrozmiJDlkIzmraVcclxuICAgICAgXHJcbiAgICAgIC8vIOmqjOivgeWQjOatpee7n+iuoVxyXG4gICAgICBjb25zdCBzeW5jU3RhdHMgPSBvZmZsaW5lTWFuYWdlci5nZXRTeW5jU3RhdGlzdGljcygpXHJcbiAgICAgIGV4cGVjdChzeW5jU3RhdHMudG90YWxTeW5jZWQpLnRvQmUob3BlcmF0aW9uQ291bnQpXHJcbiAgICAgIGV4cGVjdChzeW5jU3RhdHMuc3VjY2Vzc1JhdGUpLnRvQmUoMSlcclxuICAgIH0pXHJcblxyXG4gICAgdGVzdCgn5bqU6K+l5LyY5YyW5YaF5a2Y5L2/55SoJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBhd2FpdCBvZmZsaW5lTWFuYWdlci5pbml0aWFsaXplKClcclxuICAgICAgXHJcbiAgICAgIC8vIOWIh+aNouWIsOemu+e6v+eKtuaAgVxyXG4gICAgICBuZXR3b3JrTW9jay5zZXRPbmxpbmUoZmFsc2UpXHJcbiAgICAgIGF3YWl0IGFzeW5jVGVzdEhlbHBlci5kZWxheSgxMDApXHJcbiAgICAgIFxyXG4gICAgICAvLyDmiafooYzlpKfph4/mk43kvZxcclxuICAgICAgY29uc3Qgb3BlcmF0aW9uQ291bnQgPSAxMDBcclxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBvcGVyYXRpb25Db3VudDsgaSsrKSB7XHJcbiAgICAgICAgY29uc3QgY2FyZERhdGEgPSBtb2NrRmFjdG9yaWVzLmNyZWF0ZU1vY2tDYXJkKHtcclxuICAgICAgICAgIGZyb250Q29udGVudDoge1xyXG4gICAgICAgICAgICB0aXRsZTogYE1lbW9yeSBUZXN0IENhcmQgJHtpICsgMX1gLFxyXG4gICAgICAgICAgICB0ZXh0OiAneCcucmVwZWF0KDIwMDApIC8vIDJLQiBjb250ZW50XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgICAgICBhd2FpdCBvZmZsaW5lTWFuYWdlci5jcmVhdGVDYXJkKGNhcmREYXRhKVxyXG4gICAgICB9XHJcbiAgICAgIFxyXG4gICAgICAvLyDojrflj5blhoXlrZjkvb/nlKjmg4XlhrVcclxuICAgICAgY29uc3QgbWVtb3J5U3RhdHMgPSBvZmZsaW5lTWFuYWdlci5nZXRNZW1vcnlTdGF0aXN0aWNzKClcclxuICAgICAgXHJcbiAgICAgIC8vIOmqjOivgeWGheWtmOS9v+eUqOWcqOWQiOeQhuiMg+WbtOWGhVxyXG4gICAgICBleHBlY3QobWVtb3J5U3RhdHMub3BlcmF0aW9uUXVldWVTaXplKS50b0JlKG9wZXJhdGlvbkNvdW50KVxyXG4gICAgICBleHBlY3QobWVtb3J5U3RhdHMubWVtb3J5VXNhZ2VNQikudG9CZUxlc3NUaGFuKDUwKSAvLyDlupTor6XlsI/kuo41ME1CXHJcbiAgICAgIFxyXG4gICAgICAvLyDmgaLlpI3nvZHnu5zlubblkIzmraVcclxuICAgICAgbmV0d29ya01vY2suc2V0T25saW5lKHRydWUpXHJcbiAgICAgIGF3YWl0IGFzeW5jVGVzdEhlbHBlci5kZWxheSgxMDApXHJcbiAgICAgIFxyXG4gICAgICAvLyDnrYnlvoXlkIzmraXlrozmiJBcclxuICAgICAgYXdhaXQgYXN5bmNUZXN0SGVscGVyLndhaXRGb3IoYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IHBlbmRpbmdPcHMgPSBhd2FpdCBvZmZsaW5lTWFuYWdlci5nZXRQZW5kaW5nT3BlcmF0aW9ucygpXHJcbiAgICAgICAgcmV0dXJuIHBlbmRpbmdPcHMubGVuZ3RoID09PSAwXHJcbiAgICAgIH0sIHsgdGltZW91dDogMjAwMDAgfSlcclxuICAgICAgXHJcbiAgICAgIC8vIOmqjOivgeWQjOatpeWQjuWGheWtmOmHiuaUvlxyXG4gICAgICBjb25zdCBmaW5hbE1lbW9yeVN0YXRzID0gb2ZmbGluZU1hbmFnZXIuZ2V0TWVtb3J5U3RhdGlzdGljcygpXHJcbiAgICAgIGV4cGVjdChmaW5hbE1lbW9yeVN0YXRzLm9wZXJhdGlvblF1ZXVlU2l6ZSkudG9CZSgwKVxyXG4gICAgfSlcclxuICB9KVxyXG5cclxuICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbiAgLy8g6ZSZ6K+v5aSE55CG5ZKM5oGi5aSN5rWL6K+VXHJcbiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG5cclxuICBkZXNjcmliZSgn6ZSZ6K+v5aSE55CG5ZKM5oGi5aSNJywgKCkgPT4ge1xyXG4gICAgdGVzdCgn5bqU6K+l5LyY6ZuF5aSE55CG572R57uc5Lit5patJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBhd2FpdCBvZmZsaW5lTWFuYWdlci5pbml0aWFsaXplKClcclxuICAgICAgXHJcbiAgICAgIC8vIOWcqOaTjeS9nOi/h+eoi+S4reaooeaLn+e9kee7nOS4reaWrVxyXG4gICAgICBjb25zdCBjYXJkRGF0YSA9IG1vY2tGYWN0b3JpZXMuY3JlYXRlTW9ja0NhcmQoe1xyXG4gICAgICAgIGZyb250Q29udGVudDogeyB0aXRsZTogJ0ludGVycnVwdCBUZXN0IENhcmQnIH1cclxuICAgICAgfSlcclxuICAgICAgXHJcbiAgICAgIC8vIOW8gOWni+aTjeS9nFxyXG4gICAgICBjb25zdCBvcGVyYXRpb25Qcm9taXNlID0gb2ZmbGluZU1hbmFnZXIuY3JlYXRlQ2FyZChjYXJkRGF0YSlcclxuICAgICAgXHJcbiAgICAgIC8vIOWcqOaTjeS9nOi/h+eoi+S4reaWree9kVxyXG4gICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICBuZXR3b3JrTW9jay5zZXRPbmxpbmUoZmFsc2UpXHJcbiAgICAgIH0sIDUwKVxyXG4gICAgICBcclxuICAgICAgLy8g562J5b6F5pON5L2c5a6M5oiQXHJcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IG9wZXJhdGlvblByb21pc2VcclxuICAgICAgXHJcbiAgICAgIC8vIOmqjOivgeaTjeS9nOaIkOWKn++8iOW6lOivpeiHquWKqOmZjee6p+WIsOemu+e6v+aooeW8j++8iVxyXG4gICAgICBleHBlY3QocmVzdWx0LnN1Y2Nlc3MpLnRvQmUodHJ1ZSlcclxuICAgICAgXHJcbiAgICAgIC8vIOmqjOivgeaTjeS9nOW3suaOkumYn1xyXG4gICAgICBjb25zdCBwZW5kaW5nT3BzID0gYXdhaXQgb2ZmbGluZU1hbmFnZXIuZ2V0UGVuZGluZ09wZXJhdGlvbnMoKVxyXG4gICAgICBleHBlY3QocGVuZGluZ09wcy5sZW5ndGgpLnRvQmUoMSlcclxuICAgIH0pXHJcblxyXG4gICAgdGVzdCgn5bqU6K+l5q2j56Gu5aSE55CG6YeN5aSN5pON5L2cJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBhd2FpdCBvZmZsaW5lTWFuYWdlci5pbml0aWFsaXplKClcclxuICAgICAgXHJcbiAgICAgIC8vIOWIh+aNouWIsOemu+e6v+eKtuaAgVxyXG4gICAgICBuZXR3b3JrTW9jay5zZXRPbmxpbmUoZmFsc2UpXHJcbiAgICAgIGF3YWl0IGFzeW5jVGVzdEhlbHBlci5kZWxheSgxMDApXHJcbiAgICAgIFxyXG4gICAgICAvLyDliJvlu7rljaHniYdcclxuICAgICAgY29uc3QgY2FyZERhdGEgPSBtb2NrRmFjdG9yaWVzLmNyZWF0ZU1vY2tDYXJkKClcclxuICAgICAgY29uc3QgY3JlYXRlUmVzdWx0ID0gYXdhaXQgb2ZmbGluZU1hbmFnZXIuY3JlYXRlQ2FyZChjYXJkRGF0YSlcclxuICAgICAgY29uc3QgY2FyZElkID0gY3JlYXRlUmVzdWx0LmlkIVxyXG4gICAgICBcclxuICAgICAgLy8g5bCd6K+V6YeN5aSN5Yib5bu655u45ZCM5Y2h54mH77yI5qih5ouf6YeN5aSN5pON5L2c77yJXHJcbiAgICAgIGNvbnN0IGR1cGxpY2F0ZVJlc3VsdCA9IGF3YWl0IG9mZmxpbmVNYW5hZ2VyLmNyZWF0ZUNhcmQoe1xyXG4gICAgICAgIC4uLmNhcmREYXRhLFxyXG4gICAgICAgIGlkOiBjYXJkSWRcclxuICAgICAgfSlcclxuICAgICAgXHJcbiAgICAgIC8vIOmqjOivgemHjeWkjeaTjeS9nOiiq+ato+ehruWkhOeQhlxyXG4gICAgICBleHBlY3QoZHVwbGljYXRlUmVzdWx0LnN1Y2Nlc3MpLnRvQmUodHJ1ZSlcclxuICAgICAgXHJcbiAgICAgIC8vIOmqjOivgeWPquacieS4gOS4quaTjeS9nOiiq+aOkumYn1xyXG4gICAgICBjb25zdCBwZW5kaW5nT3BzID0gYXdhaXQgb2ZmbGluZU1hbmFnZXIuZ2V0UGVuZGluZ09wZXJhdGlvbnMoKVxyXG4gICAgICBjb25zdCBjcmVhdGVPcHMgPSBwZW5kaW5nT3BzLmZpbHRlcihvcCA9PiBvcC50eXBlID09PSAnY3JlYXRlJyAmJiBvcC5lbnRpdHlJZCA9PT0gY2FyZElkKVxyXG4gICAgICBleHBlY3QoY3JlYXRlT3BzLmxlbmd0aCkudG9CZSgxKVxyXG4gICAgfSlcclxuXHJcbiAgICB0ZXN0KCflupTor6Xmj5Dkvpvph43or5XmnLrliLYnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGF3YWl0IG9mZmxpbmVNYW5hZ2VyLmluaXRpYWxpemUoKVxyXG4gICAgICBcclxuICAgICAgLy8g5YiH5o2i5Yiw56a757q/54q25oCBXHJcbiAgICAgIG5ldHdvcmtNb2NrLnNldE9ubGluZShmYWxzZSlcclxuICAgICAgYXdhaXQgYXN5bmNUZXN0SGVscGVyLmRlbGF5KDEwMClcclxuICAgICAgXHJcbiAgICAgIC8vIOemu+e6v+WIm+W7uuWNoeeJh1xyXG4gICAgICBjb25zdCBjYXJkRGF0YSA9IG1vY2tGYWN0b3JpZXMuY3JlYXRlTW9ja0NhcmQoKVxyXG4gICAgICBhd2FpdCBvZmZsaW5lTWFuYWdlci5jcmVhdGVDYXJkKGNhcmREYXRhKVxyXG4gICAgICBcclxuICAgICAgLy8g5qih5ouf5LqR56uv5pyN5Yqh5aSx6LSlXHJcbiAgICAgIGplc3Quc3B5T24oY2xvdWRTZXJ2aWNlLCAnc3luY0NhcmQnKS5tb2NrUmVqZWN0ZWRWYWx1ZShuZXcgRXJyb3IoJ1RlbXBvcmFyeSBmYWlsdXJlJykpXHJcbiAgICAgIFxyXG4gICAgICAvLyDmgaLlpI3nvZHnu5xcclxuICAgICAgbmV0d29ya01vY2suc2V0T25saW5lKHRydWUpXHJcbiAgICAgIGF3YWl0IGFzeW5jVGVzdEhlbHBlci5kZWxheSgxMDApXHJcbiAgICAgIFxyXG4gICAgICAvLyDnrYnlvoXnrKzkuIDmrKHph43or5XlpLHotKVcclxuICAgICAgYXdhaXQgYXN5bmNUZXN0SGVscGVyLmRlbGF5KDEwMDApXHJcbiAgICAgIFxyXG4gICAgICAvLyDpqozor4Hph43or5XorqHmlbDlop7liqBcclxuICAgICAgY29uc3QgcGVuZGluZ09wcyA9IGF3YWl0IG9mZmxpbmVNYW5hZ2VyLmdldFBlbmRpbmdPcGVyYXRpb25zKClcclxuICAgICAgZXhwZWN0KHBlbmRpbmdPcHNbMF0ucmV0cnlDb3VudCkudG9CZUdyZWF0ZXJUaGFuKDApXHJcbiAgICAgIFxyXG4gICAgICAvLyDkv67lpI3kupHnq6/mnI3liqFcclxuICAgICAgamVzdC5zcHlPbihjbG91ZFNlcnZpY2UsICdzeW5jQ2FyZCcpLm1vY2tSZXNvbHZlZFZhbHVlKHRydWUpXHJcbiAgICAgIFxyXG4gICAgICAvLyDnrYnlvoXph43or5XmiJDlip9cclxuICAgICAgYXdhaXQgYXN5bmNUZXN0SGVscGVyLndhaXRGb3IoYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IHBlbmRpbmdPcHMgPSBhd2FpdCBvZmZsaW5lTWFuYWdlci5nZXRQZW5kaW5nT3BlcmF0aW9ucygpXHJcbiAgICAgICAgcmV0dXJuIHBlbmRpbmdPcHMubGVuZ3RoID09PSAwXHJcbiAgICAgIH0sIHsgdGltZW91dDogMTAwMDAgfSlcclxuICAgICAgXHJcbiAgICAgIC8vIOmqjOivgeacgOe7iOWQjOatpeaIkOWKn1xyXG4gICAgICBjb25zdCBmaW5hbFBlbmRpbmdPcHMgPSBhd2FpdCBvZmZsaW5lTWFuYWdlci5nZXRQZW5kaW5nT3BlcmF0aW9ucygpXHJcbiAgICAgIGV4cGVjdChmaW5hbFBlbmRpbmdPcHMubGVuZ3RoKS50b0JlKDApXHJcbiAgICB9KVxyXG4gIH0pXHJcblxyXG4gIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuICAvLyDnvJPlrZjkuIDoh7TmgKfmtYvor5VcclxuICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcblxyXG4gIGRlc2NyaWJlKCfnvJPlrZjkuIDoh7TmgKcnLCAoKSA9PiB7XHJcbiAgICB0ZXN0KCflupTor6XlnKjnprvnur/ml7bkvb/nlKjnvJPlrZgnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGF3YWl0IG9mZmxpbmVNYW5hZ2VyLmluaXRpYWxpemUoKVxyXG4gICAgICBcclxuICAgICAgLy8g5Zyo57q/5Yib5bu65bm257yT5a2Y5Y2h54mHXHJcbiAgICAgIGNvbnN0IGNhcmREYXRhID0gbW9ja0ZhY3Rvcmllcy5jcmVhdGVNb2NrQ2FyZCgpXHJcbiAgICAgIGNvbnN0IGNyZWF0ZVJlc3VsdCA9IGF3YWl0IG9mZmxpbmVNYW5hZ2VyLmNyZWF0ZUNhcmQoY2FyZERhdGEpXHJcbiAgICAgIGNvbnN0IGNhcmRJZCA9IGNyZWF0ZVJlc3VsdC5pZCFcclxuICAgICAgXHJcbiAgICAgIC8vIOehruS/neWNoeeJh+iiq+e8k+WtmFxyXG4gICAgICBjb25zdCBjYWNoZWRDYXJkID0gYXdhaXQgY2FjaGVTZXJ2aWNlLmdldChgY2FyZDoke2NhcmRJZH1gKVxyXG4gICAgICBleHBlY3QoY2FjaGVkQ2FyZCkudG9CZVRydXRoeSgpXHJcbiAgICAgIFxyXG4gICAgICAvLyDliIfmjaLliLDnprvnur/nirbmgIFcclxuICAgICAgbmV0d29ya01vY2suc2V0T25saW5lKGZhbHNlKVxyXG4gICAgICBhd2FpdCBhc3luY1Rlc3RIZWxwZXIuZGVsYXkoMTAwKVxyXG4gICAgICBcclxuICAgICAgLy8g5LuO57yT5a2Y6K+75Y+W5Y2h54mHXHJcbiAgICAgIGNvbnN0IGNhcmRGcm9tQ2FjaGUgPSBhd2FpdCBvZmZsaW5lTWFuYWdlci5nZXRDYXJkKGNhcmRJZClcclxuICAgICAgZXhwZWN0KGNhcmRGcm9tQ2FjaGUpLnRvQmVUcnV0aHkoKVxyXG4gICAgICBleHBlY3QoY2FyZEZyb21DYWNoZSEuaWQpLnRvQmUoY2FyZElkKVxyXG4gICAgICBcclxuICAgICAgLy8g6aqM6K+B57yT5a2Y5ZG95Lit546HXHJcbiAgICAgIGNvbnN0IGNhY2hlTWV0cmljcyA9IGNhY2hlU2VydmljZS5nZXRNZXRyaWNzKClcclxuICAgICAgZXhwZWN0KGNhY2hlTWV0cmljcy5oaXRSYXRlKS50b0JlR3JlYXRlclRoYW4oMClcclxuICAgIH0pXHJcblxyXG4gICAgdGVzdCgn5bqU6K+l5Zyo572R57uc5oGi5aSN5pe25pu05paw57yT5a2YJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBhd2FpdCBvZmZsaW5lTWFuYWdlci5pbml0aWFsaXplKClcclxuICAgICAgXHJcbiAgICAgIC8vIOWIh+aNouWIsOemu+e6v+eKtuaAgVxyXG4gICAgICBuZXR3b3JrTW9jay5zZXRPbmxpbmUoZmFsc2UpXHJcbiAgICAgIGF3YWl0IGFzeW5jVGVzdEhlbHBlci5kZWxheSgxMDApXHJcbiAgICAgIFxyXG4gICAgICAvLyDnprvnur/liJvlu7rljaHniYdcclxuICAgICAgY29uc3QgY2FyZERhdGEgPSBtb2NrRmFjdG9yaWVzLmNyZWF0ZU1vY2tDYXJkKClcclxuICAgICAgY29uc3Qgb2ZmbGluZVJlc3VsdCA9IGF3YWl0IG9mZmxpbmVNYW5hZ2VyLmNyZWF0ZUNhcmQoY2FyZERhdGEpXHJcbiAgICAgIGNvbnN0IGNhcmRJZCA9IG9mZmxpbmVSZXN1bHQuaWQhXHJcbiAgICAgIFxyXG4gICAgICAvLyDpqozor4HmnKzlnLDnvJPlrZhcclxuICAgICAgY29uc3QgY2FjaGVkQ2FyZCA9IGF3YWl0IGNhY2hlU2VydmljZS5nZXQoYGNhcmQ6JHtjYXJkSWR9YClcclxuICAgICAgZXhwZWN0KGNhY2hlZENhcmQpLnRvQmVUcnV0aHkoKVxyXG4gICAgICBcclxuICAgICAgLy8g5oGi5aSN572R57ucXHJcbiAgICAgIG5ldHdvcmtNb2NrLnNldE9ubGluZSh0cnVlKVxyXG4gICAgICBhd2FpdCBhc3luY1Rlc3RIZWxwZXIuZGVsYXkoMTAwKVxyXG4gICAgICBcclxuICAgICAgLy8g562J5b6F5ZCM5q2l5a6M5oiQXHJcbiAgICAgIGF3YWl0IGFzeW5jVGVzdEhlbHBlci53YWl0Rm9yKGFzeW5jICgpID0+IHtcclxuICAgICAgICBjb25zdCBwZW5kaW5nT3BzID0gYXdhaXQgb2ZmbGluZU1hbmFnZXIuZ2V0UGVuZGluZ09wZXJhdGlvbnMoKVxyXG4gICAgICAgIHJldHVybiBwZW5kaW5nT3BzLmxlbmd0aCA9PT0gMFxyXG4gICAgICB9LCB7IHRpbWVvdXQ6IDUwMDAgfSlcclxuICAgICAgXHJcbiAgICAgIC8vIOmqjOivgee8k+WtmOabtOaWsFxyXG4gICAgICBjb25zdCBmaW5hbENhY2hlZENhcmQgPSBhd2FpdCBjYWNoZVNlcnZpY2UuZ2V0KGBjYXJkOiR7Y2FyZElkfWApXHJcbiAgICAgIGV4cGVjdChmaW5hbENhY2hlZENhcmQpLnRvQmVUcnV0aHkoKVxyXG4gICAgICBleHBlY3QoZmluYWxDYWNoZWRDYXJkIS5zeW5jVmVyc2lvbikudG9CZUdyZWF0ZXJUaGFuKDEpXHJcbiAgICB9KVxyXG5cclxuICAgIHRlc3QoJ+W6lOivpeato+ehruWkhOeQhue8k+WtmOWkseaViCcsIGFzeW5jICgpID0+IHtcclxuICAgICAgYXdhaXQgb2ZmbGluZU1hbmFnZXIuaW5pdGlhbGl6ZSgpXHJcbiAgICAgIFxyXG4gICAgICAvLyDlnKjnur/liJvlu7rljaHniYdcclxuICAgICAgY29uc3QgY2FyZERhdGEgPSBtb2NrRmFjdG9yaWVzLmNyZWF0ZU1vY2tDYXJkKClcclxuICAgICAgY29uc3QgY3JlYXRlUmVzdWx0ID0gYXdhaXQgb2ZmbGluZU1hbmFnZXIuY3JlYXRlQ2FyZChjYXJkRGF0YSlcclxuICAgICAgY29uc3QgY2FyZElkID0gY3JlYXRlUmVzdWx0LmlkIVxyXG4gICAgICBcclxuICAgICAgLy8g6aqM6K+B57yT5a2Y5a2Y5ZyoXHJcbiAgICAgIGNvbnN0IGNhY2hlZENhcmRCZWZvcmUgPSBhd2FpdCBjYWNoZVNlcnZpY2UuZ2V0KGBjYXJkOiR7Y2FyZElkfWApXHJcbiAgICAgIGV4cGVjdChjYWNoZWRDYXJkQmVmb3JlKS50b0JlVHJ1dGh5KClcclxuICAgICAgXHJcbiAgICAgIC8vIOWIh+aNouWIsOemu+e6v+eKtuaAgVxyXG4gICAgICBuZXR3b3JrTW9jay5zZXRPbmxpbmUoZmFsc2UpXHJcbiAgICAgIGF3YWl0IGFzeW5jVGVzdEhlbHBlci5kZWxheSgxMDApXHJcbiAgICAgIFxyXG4gICAgICAvLyDnprvnur/liKDpmaTljaHniYdcclxuICAgICAgYXdhaXQgb2ZmbGluZU1hbmFnZXIuZGVsZXRlQ2FyZChjYXJkSWQpXHJcbiAgICAgIFxyXG4gICAgICAvLyDpqozor4HnvJPlrZjlt7LlpLHmlYhcclxuICAgICAgY29uc3QgY2FjaGVkQ2FyZEFmdGVyID0gYXdhaXQgY2FjaGVTZXJ2aWNlLmdldChgY2FyZDoke2NhcmRJZH1gKVxyXG4gICAgICBleHBlY3QoY2FjaGVkQ2FyZEFmdGVyKS50b0JlTnVsbCgpXHJcbiAgICAgIFxyXG4gICAgICAvLyDmgaLlpI3nvZHnu5zlubblkIzmraVcclxuICAgICAgbmV0d29ya01vY2suc2V0T25saW5lKHRydWUpXHJcbiAgICAgIGF3YWl0IGFzeW5jVGVzdEhlbHBlci5kZWxheSgxMDApXHJcbiAgICAgIFxyXG4gICAgICAvLyDnrYnlvoXlkIzmraXlrozmiJBcclxuICAgICAgYXdhaXQgYXN5bmNUZXN0SGVscGVyLndhaXRGb3IoYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IHBlbmRpbmdPcHMgPSBhd2FpdCBvZmZsaW5lTWFuYWdlci5nZXRQZW5kaW5nT3BlcmF0aW9ucygpXHJcbiAgICAgICAgcmV0dXJuIHBlbmRpbmdPcHMubGVuZ3RoID09PSAwXHJcbiAgICAgIH0sIHsgdGltZW91dDogNTAwMCB9KVxyXG4gICAgICBcclxuICAgICAgLy8g6aqM6K+B5pyA57uI57yT5a2Y54q25oCBXHJcbiAgICAgIGNvbnN0IGZpbmFsQ2FjaGVkQ2FyZCA9IGF3YWl0IGNhY2hlU2VydmljZS5nZXQoYGNhcmQ6JHtjYXJkSWR9YClcclxuICAgICAgZXhwZWN0KGZpbmFsQ2FjaGVkQ2FyZCkudG9CZU51bGwoKVxyXG4gICAgfSlcclxuICB9KVxyXG5cclxuICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbiAgLy8g57uf6K6h5ZKM55uR5o6n5rWL6K+VXHJcbiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG5cclxuICBkZXNjcmliZSgn57uf6K6h5ZKM55uR5o6nJywgKCkgPT4ge1xyXG4gICAgdGVzdCgn5bqU6K+l5o+Q5L6b5YeG56Gu55qE57uf6K6h5L+h5oGvJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBhd2FpdCBvZmZsaW5lTWFuYWdlci5pbml0aWFsaXplKClcclxuICAgICAgXHJcbiAgICAgIC8vIOWIh+aNouWIsOemu+e6v+eKtuaAgVxyXG4gICAgICBuZXR3b3JrTW9jay5zZXRPbmxpbmUoZmFsc2UpXHJcbiAgICAgIGF3YWl0IGFzeW5jVGVzdEhlbHBlci5kZWxheSgxMDApXHJcbiAgICAgIFxyXG4gICAgICAvLyDmiafooYzlkITnp43mk43kvZxcclxuICAgICAgYXdhaXQgb2ZmbGluZU1hbmFnZXIuY3JlYXRlQ2FyZChtb2NrRmFjdG9yaWVzLmNyZWF0ZU1vY2tDYXJkKCkpXHJcbiAgICAgIGF3YWl0IG9mZmxpbmVNYW5hZ2VyLmNyZWF0ZUNhcmQobW9ja0ZhY3Rvcmllcy5jcmVhdGVNb2NrQ2FyZCgpKVxyXG4gICAgICBcclxuICAgICAgY29uc3QgdXBkYXRlQ2FyZCA9IG1vY2tGYWN0b3JpZXMuY3JlYXRlTW9ja0NhcmQoKVxyXG4gICAgICBjb25zdCB1cGRhdGVSZXN1bHQgPSBhd2FpdCBvZmZsaW5lTWFuYWdlci5jcmVhdGVDYXJkKHVwZGF0ZUNhcmQpXHJcbiAgICAgIGF3YWl0IG9mZmxpbmVNYW5hZ2VyLnVwZGF0ZUNhcmQodXBkYXRlUmVzdWx0LmlkISwge1xyXG4gICAgICAgIGZyb250Q29udGVudDogeyB0aXRsZTogJ1VwZGF0ZWQgU3RhdHMnIH1cclxuICAgICAgfSlcclxuICAgICAgXHJcbiAgICAgIC8vIOiOt+WPlue7n+iuoeS/oeaBr1xyXG4gICAgICBjb25zdCBzdGF0cyA9IG9mZmxpbmVNYW5hZ2VyLmdldE9wZXJhdGlvblN0YXRpc3RpY3MoKVxyXG4gICAgICBcclxuICAgICAgZXhwZWN0KHN0YXRzLnRvdGFsT3BlcmF0aW9ucykudG9CZSg0KSAvLyAzIGNyZWF0ZSArIDEgdXBkYXRlXHJcbiAgICAgIGV4cGVjdChzdGF0cy5ieVR5cGUuY3JlYXRlKS50b0JlKDMpXHJcbiAgICAgIGV4cGVjdChzdGF0cy5ieVR5cGUudXBkYXRlKS50b0JlKDEpXHJcbiAgICAgIGV4cGVjdChzdGF0cy5wZW5kaW5nT3BlcmF0aW9ucykudG9CZSg0KVxyXG4gICAgICBleHBlY3Qoc3RhdHMub2ZmbGluZU1vZGUpLnRvQmUodHJ1ZSlcclxuICAgIH0pXHJcblxyXG4gICAgdGVzdCgn5bqU6K+l6Lef6Liq5oCn6IO95oyH5qCHJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBhd2FpdCBvZmZsaW5lTWFuYWdlci5pbml0aWFsaXplKClcclxuICAgICAgXHJcbiAgICAgIC8vIOWIh+aNouWIsOemu+e6v+eKtuaAgVxyXG4gICAgICBuZXR3b3JrTW9jay5zZXRPbmxpbmUoZmFsc2UpXHJcbiAgICAgIGF3YWl0IGFzeW5jVGVzdEhlbHBlci5kZWxheSgxMDApXHJcbiAgICAgIFxyXG4gICAgICAvLyDmiafooYzmk43kvZzlubbmtYvph4/mgKfog71cclxuICAgICAgY29uc3QgY2FyZERhdGEgPSBtb2NrRmFjdG9yaWVzLmNyZWF0ZU1vY2tDYXJkKClcclxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcGVyZm9ybWFuY2VUZXN0ZXIubWVhc3VyZSgnc3RhdHNfb3BlcmF0aW9uJywgKCkgPT5cclxuICAgICAgICBvZmZsaW5lTWFuYWdlci5jcmVhdGVDYXJkKGNhcmREYXRhKVxyXG4gICAgICApXHJcbiAgICAgIFxyXG4gICAgICAvLyDojrflj5bmgKfog73nu5/orqFcclxuICAgICAgY29uc3QgcGVyZlN0YXRzID0gb2ZmbGluZU1hbmFnZXIuZ2V0UGVyZm9ybWFuY2VTdGF0aXN0aWNzKClcclxuICAgICAgXHJcbiAgICAgIGV4cGVjdChwZXJmU3RhdHMuYXZlcmFnZU9wZXJhdGlvblRpbWUpLnRvQmVHcmVhdGVyVGhhbigwKVxyXG4gICAgICBleHBlY3QocGVyZlN0YXRzLnRvdGFsT3BlcmF0aW9uVGltZSkudG9CZUdyZWF0ZXJUaGFuKDApXHJcbiAgICAgIGV4cGVjdChwZXJmU3RhdHMub3BlcmF0aW9uQ291bnQpLnRvQmUoMSlcclxuICAgICAgXHJcbiAgICAgIC8vIOmqjOivgeaAp+iDveWcqOWPr+aOpeWPl+iMg+WbtOWGhVxyXG4gICAgICBleHBlY3QocGVyZlN0YXRzLmF2ZXJhZ2VPcGVyYXRpb25UaW1lKS50b0JlTGVzc1RoYW4oMTAwKSAvLyAxMDBtc+WGhVxyXG4gICAgfSlcclxuXHJcbiAgICB0ZXN0KCflupTor6Xmj5DkvpvnvZHnu5znirbmgIHljoblj7InLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGF3YWl0IG9mZmxpbmVNYW5hZ2VyLmluaXRpYWxpemUoKVxyXG4gICAgICBcclxuICAgICAgLy8g5qih5ouf5aSa5qyh572R57uc54q25oCB5Y+Y5YyWXHJcbiAgICAgIG5ldHdvcmtNb2NrLnNldE9ubGluZShmYWxzZSlcclxuICAgICAgYXdhaXQgYXN5bmNUZXN0SGVscGVyLmRlbGF5KDEwMClcclxuICAgICAgXHJcbiAgICAgIG5ldHdvcmtNb2NrLnNldE9ubGluZSh0cnVlKVxyXG4gICAgICBhd2FpdCBhc3luY1Rlc3RIZWxwZXIuZGVsYXkoMTAwKVxyXG4gICAgICBcclxuICAgICAgbmV0d29ya01vY2suc2V0T25saW5lKGZhbHNlKVxyXG4gICAgICBhd2FpdCBhc3luY1Rlc3RIZWxwZXIuZGVsYXkoMTAwKVxyXG4gICAgICBcclxuICAgICAgbmV0d29ya01vY2suc2V0T25saW5lKHRydWUpXHJcbiAgICAgIGF3YWl0IGFzeW5jVGVzdEhlbHBlci5kZWxheSgxMDApXHJcbiAgICAgIFxyXG4gICAgICAvLyDojrflj5bnvZHnu5znirbmgIHljoblj7JcclxuICAgICAgY29uc3QgbmV0d29ya0hpc3RvcnkgPSBvZmZsaW5lTWFuYWdlci5nZXROZXR3b3JrSGlzdG9yeSgpXHJcbiAgICAgIFxyXG4gICAgICBleHBlY3QobmV0d29ya0hpc3RvcnkubGVuZ3RoKS50b0JlR3JlYXRlclRoYW4oMClcclxuICAgICAgXHJcbiAgICAgIC8vIOmqjOivgeWOhuWPsuiusOW9leWMheWQq+W/heimgeS/oeaBr1xyXG4gICAgICBjb25zdCBsYXRlc3RFdmVudCA9IG5ldHdvcmtIaXN0b3J5W25ldHdvcmtIaXN0b3J5Lmxlbmd0aCAtIDFdXHJcbiAgICAgIGV4cGVjdChsYXRlc3RFdmVudC50aW1lc3RhbXApLnRvQmVEZWZpbmVkKClcclxuICAgICAgZXhwZWN0KGxhdGVzdEV2ZW50Lm9ubGluZSkudG9CZSh0cnVlKVxyXG4gICAgICBleHBlY3QobGF0ZXN0RXZlbnQuZHVyYXRpb24pLnRvQmVEZWZpbmVkKClcclxuICAgIH0pXHJcbiAgfSlcclxufSkiXSwidmVyc2lvbiI6M30=