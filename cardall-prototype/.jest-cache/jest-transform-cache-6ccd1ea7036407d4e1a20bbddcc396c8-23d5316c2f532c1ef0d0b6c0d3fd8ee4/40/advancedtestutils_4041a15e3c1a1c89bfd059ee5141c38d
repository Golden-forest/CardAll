c99d1227d3aad75484762d32f5790664
"use strict";
var __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    var desc = Object.getOwnPropertyDescriptor(m, k);
    if (!desc || ("get" in desc ? !m.__esModule : desc.writable || desc.configurable)) {
      desc = { enumerable: true, get: function() { return m[k]; } };
    }
    Object.defineProperty(o, k2, desc);
}) : (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    o[k2] = m[k];
}));
var __exportStar = (this && this.__exportStar) || function(m, exports) {
    for (var p in m) if (p !== "default" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.render = exports.EventSimulator = exports.NetworkSimulator = exports.PerformanceTester = exports.TestDataGenerator = exports.MockIndexedDB = exports.MockSupabaseClient = void 0;
const jsx_runtime_1 = require("react/jsx-runtime");
// 高级测试工具 - 包含完整的数据生成器和模拟服务
const react_1 = require("@testing-library/react");
const jest_axe_1 = require("jest-axe");
const react_query_1 = require("@tanstack/react-query");
const react_dnd_1 = require("react-dnd");
const react_dnd_html5_backend_1 = require("react-dnd-html5-backend");
const styled_components_1 = require("styled-components");
const toast_provider_1 = require("@/components/ui/toast-provider");
// 扩展 Jest 匹配器
expect.extend(jest_axe_1.toHaveNoViolations);
// ============================================================================
// 模拟服务
// ============================================================================
class MockSupabaseClient {
    constructor() {
        Object.defineProperty(this, "data", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: {
                cards: new Map(),
                folders: new Map(),
                tags: new Map(),
                syncOperations: new Map(),
            }
        });
        // 卡片操作
        Object.defineProperty(this, "cards", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: {
                select: jest.fn(() => ({
                    eq: jest.fn(() => ({
                        order: jest.fn(() => ({
                            data: Array.from(this.data.cards.values()),
                            error: null,
                        })),
                    })),
                    in: jest.fn(() => ({
                        data: Array.from(this.data.cards.values()),
                        error: null,
                    })),
                })),
                insert: jest.fn((card) => {
                    const newCard = {
                        id: crypto.randomUUID(),
                        frontContent: card.frontContent || {
                            title: '',
                            text: '',
                            images: [],
                            tags: [],
                            lastModified: new Date(),
                        },
                        backContent: card.backContent || {
                            title: '',
                            text: '',
                            images: [],
                            tags: [],
                            lastModified: new Date(),
                        },
                        style: card.style || {
                            type: 'solid',
                            backgroundColor: '#ffffff',
                            fontFamily: 'system-ui',
                            fontSize: 'base',
                            fontWeight: 'normal',
                            textColor: '#1f2937',
                            borderRadius: 'xl',
                            shadow: 'md',
                            borderWidth: 0,
                        },
                        isFlipped: card.isFlipped || false,
                        createdAt: new Date(),
                        updatedAt: new Date(),
                        ...card,
                    };
                    this.data.cards.set(newCard.id, newCard);
                    return Promise.resolve({
                        data: [newCard],
                        error: null,
                    });
                }),
                update: jest.fn((id, updates) => {
                    const card = this.data.cards.get(id);
                    if (card) {
                        const updatedCard = { ...card, ...updates, updatedAt: new Date() };
                        this.data.cards.set(id, updatedCard);
                        return Promise.resolve({
                            data: [updatedCard],
                            error: null,
                        });
                    }
                    return Promise.resolve({
                        data: null,
                        error: { message: 'Card not found' },
                    });
                }),
                delete: jest.fn((id) => {
                    const deleted = this.data.cards.delete(id);
                    return Promise.resolve({
                        data: null,
                        error: deleted ? null : { message: 'Card not found' },
                    });
                }),
            }
        });
        // 文件夹操作
        Object.defineProperty(this, "folders", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: {
                select: jest.fn(() => ({
                    eq: jest.fn(() => ({
                        data: Array.from(this.data.folders.values()),
                        error: null,
                    })),
                })),
                insert: jest.fn((folder) => {
                    const newFolder = {
                        id: crypto.randomUUID(),
                        name: folder.name || '',
                        color: folder.color || '#3b82f6',
                        cardIds: folder.cardIds || [],
                        createdAt: new Date(),
                        updatedAt: new Date(),
                        ...folder,
                    };
                    this.data.folders.set(newFolder.id, newFolder);
                    return Promise.resolve({
                        data: [newFolder],
                        error: null,
                    });
                }),
            }
        });
        // 标签操作
        Object.defineProperty(this, "tags", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: {
                select: jest.fn(() => ({
                    data: Array.from(this.data.tags.values()),
                    error: null,
                })),
                insert: jest.fn((tag) => {
                    const newTag = {
                        id: crypto.randomUUID(),
                        name: tag.name || '',
                        color: tag.color || '#3b82f6',
                        count: tag.count || 0,
                        createdAt: new Date(),
                        ...tag,
                    };
                    this.data.tags.set(newTag.id, newTag);
                    return Promise.resolve({
                        data: [newTag],
                        error: null,
                    });
                }),
            }
        });
        // 重置模拟数据
        Object.defineProperty(this, "reset", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: () => {
                this.data.cards.clear();
                this.data.folders.clear();
                this.data.tags.clear();
                this.data.syncOperations.clear();
            }
        });
        // 获取当前数据状态
        Object.defineProperty(this, "getData", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: () => ({
                cards: Array.from(this.data.cards.values()),
                folders: Array.from(this.data.folders.values()),
                tags: Array.from(this.data.tags.values()),
                syncOperations: Array.from(this.data.syncOperations.values()),
            })
        });
    }
}
exports.MockSupabaseClient = MockSupabaseClient;
class MockIndexedDB {
    constructor() {
        Object.defineProperty(this, "stores", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: new Map()
        });
        // 重置数据库
        Object.defineProperty(this, "reset", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: () => {
                this.stores.forEach(store => store.clear());
            }
        });
        // 获取存储数据
        Object.defineProperty(this, "getStoreData", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: (name) => {
                const store = this.stores.get(name);
                return store ? Array.from(store.values()) : [];
            }
        });
        // 初始化存储表
        this.stores.set('cards', new Map());
        this.stores.set('folders', new Map());
        this.stores.set('tags', new Map());
        this.stores.set('syncQueue', new Map());
    }
    // 模拟 Dexie 风格的操作
    table(name) {
        return {
            add: jest.fn((data) => {
                const store = this.stores.get(name);
                if (store) {
                    const id = data.id || crypto.randomUUID();
                    store.set(id, { ...data, id });
                    return Promise.resolve(id);
                }
                return Promise.reject(new Error(`Table ${name} not found`));
            }),
            bulkAdd: jest.fn((items) => {
                const store = this.stores.get(name);
                if (store) {
                    const ids = items.map(item => {
                        const id = item.id || crypto.randomUUID();
                        store.set(id, { ...item, id });
                        return id;
                    });
                    return Promise.resolve(ids);
                }
                return Promise.reject(new Error(`Table ${name} not found`));
            }),
            get: jest.fn((id) => {
                const store = this.stores.get(name);
                if (store) {
                    return Promise.resolve(store.get(id) || undefined);
                }
                return Promise.resolve(undefined);
            }),
            where: jest.fn((key) => ({
                equals: jest.fn((value) => ({
                    toArray: jest.fn(() => {
                        const store = this.stores.get(name);
                        if (store) {
                            const results = Array.from(store.values()).filter(item => item[key] === value);
                            return Promise.resolve(results);
                        }
                        return Promise.resolve([]);
                    }),
                    delete: jest.fn(() => {
                        const store = this.stores.get(name);
                        if (store) {
                            const toDelete = Array.from(store.entries()).filter(([_, item]) => item[key] === value);
                            toDelete.forEach(([id]) => store.delete(id));
                            return Promise.resolve(toDelete.length);
                        }
                        return Promise.resolve(0);
                    }),
                    modify: jest.fn((updates) => {
                        const store = this.stores.get(name);
                        if (store) {
                            const toModify = Array.from(store.entries()).filter(([_, item]) => item[key] === value);
                            toModify.forEach(([id, item]) => {
                                store.set(id, { ...item, ...updates });
                            });
                            return Promise.resolve(toModify.length);
                        }
                        return Promise.resolve(0);
                    }),
                })),
                anyOf: jest.fn((values) => ({
                    toArray: jest.fn(() => {
                        const store = this.stores.get(name);
                        if (store) {
                            const results = Array.from(store.values()).filter(item => values.includes(item[key]));
                            return Promise.resolve(results);
                        }
                        return Promise.resolve([]);
                    }),
                })),
            })),
            toArray: jest.fn(() => {
                const store = this.stores.get(name);
                if (store) {
                    return Promise.resolve(Array.from(store.values()));
                }
                return Promise.resolve([]);
            }),
            delete: jest.fn((id) => {
                const store = this.stores.get(name);
                if (store) {
                    const deleted = store.delete(id);
                    return Promise.resolve(deleted ? 1 : 0);
                }
                return Promise.resolve(0);
            }),
            clear: jest.fn(() => {
                const store = this.stores.get(name);
                if (store) {
                    store.clear();
                    return Promise.resolve();
                }
                return Promise.reject(new Error(`Table ${name} not found`));
            }),
        };
    }
}
exports.MockIndexedDB = MockIndexedDB;
// ============================================================================
// 数据生成器
// ============================================================================
class TestDataGenerator {
    static generateId() {
        return `test-id-${this.idCounter++}`;
    }
    static generateCard(overrides = {}) {
        const id = overrides.id || this.generateId();
        return {
            id,
            frontContent: {
                title: `Test Card ${id}`,
                text: 'This is a test card content for testing purposes.',
                images: [],
                tags: ['test'],
                lastModified: new Date(),
            },
            backContent: {
                title: `Back of Card ${id}`,
                text: 'This is the back content of the test card.',
                images: [],
                tags: [],
                lastModified: new Date(),
            },
            style: {
                type: 'solid',
                backgroundColor: '#ffffff',
                fontFamily: 'system-ui',
                fontSize: 'base',
                fontWeight: 'normal',
                textColor: '#1f2937',
                borderRadius: 'xl',
                shadow: 'md',
                borderWidth: 0,
            },
            isFlipped: false,
            createdAt: new Date(),
            updatedAt: new Date(),
            ...overrides,
        };
    }
    static generateFolder(overrides = {}) {
        const id = overrides.id || this.generateId();
        return {
            id,
            name: `Test Folder ${id}`,
            color: '#3b82f6',
            cardIds: [],
            createdAt: new Date(),
            updatedAt: new Date(),
            ...overrides,
        };
    }
    static generateTag(overrides = {}) {
        const id = overrides.id || this.generateId();
        return {
            id,
            name: `Test Tag ${id}`,
            color: '#3b82f6',
            count: 0,
            createdAt: new Date(),
            ...overrides,
        };
    }
    static generateSyncOperation(overrides = {}) {
        return {
            id: this.generateId(),
            type: 'create',
            entity: 'card',
            entityId: this.generateId(),
            data: {},
            priority: 'normal',
            timestamp: new Date(),
            retryCount: 0,
            maxRetries: 3,
            status: 'pending',
            ...overrides,
        };
    }
    static generateCardList(count, overrides) {
        return Array.from({ length: count }, (_, i) => this.generateCard({ ...overrides, id: `card-${i + 1}` }));
    }
    static generateFolderList(count, overrides) {
        return Array.from({ length: count }, (_, i) => this.generateFolder({ ...overrides, id: `folder-${i + 1}` }));
    }
    static generateTagList(count, overrides) {
        return Array.from({ length: count }, (_, i) => this.generateTag({ ...overrides, id: `tag-${i + 1}` }));
    }
}
exports.TestDataGenerator = TestDataGenerator;
Object.defineProperty(TestDataGenerator, "idCounter", {
    enumerable: true,
    configurable: true,
    writable: true,
    value: 1
});
// ============================================================================
// 自定义渲染器
// ============================================================================
const createTestQueryClient = () => new react_query_1.QueryClient({
    defaultOptions: {
        queries: {
            retry: false,
            cacheTime: 0,
        },
    },
});
const AllTheProviders = ({ children }) => {
    const queryClient = createTestQueryClient();
    return ((0, jsx_runtime_1.jsx)(react_query_1.QueryClientProvider, { client: queryClient, children: (0, jsx_runtime_1.jsx)(react_dnd_1.DndProvider, { backend: react_dnd_html5_backend_1.HTML5Backend, children: (0, jsx_runtime_1.jsx)(styled_components_1.ThemeProvider, { theme: { mode: 'light' }, children: (0, jsx_runtime_1.jsx)(toast_provider_1.ToastProvider, { children: children }) }) }) }));
};
const customRender = (ui, options) => {
    return (0, react_1.render)(ui, { wrapper: AllTheProviders, ...options });
};
exports.render = customRender;
// ============================================================================
// 性能测试工具
// ============================================================================
class PerformanceTester {
    constructor() {
        Object.defineProperty(this, "measurements", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: new Map()
        });
    }
    async measure(name, fn) {
        const start = performance.now();
        const result = await fn();
        const end = performance.now();
        const duration = end - start;
        if (!this.measurements.has(name)) {
            this.measurements.set(name, []);
        }
        this.measurements.get(name).push(duration);
        return result;
    }
    measureSync(name, fn) {
        const start = performance.now();
        const result = fn();
        const end = performance.now();
        const duration = end - start;
        if (!this.measurements.has(name)) {
            this.measurements.set(name, []);
        }
        this.measurements.get(name).push(duration);
        return result;
    }
    getStats(name) {
        const measurements = this.measurements.get(name) || [];
        if (measurements.length === 0)
            return null;
        const sum = measurements.reduce((a, b) => a + b, 0);
        const avg = sum / measurements.length;
        const min = Math.min(...measurements);
        const max = Math.max(...measurements);
        return {
            count: measurements.length,
            sum,
            avg,
            min,
            max,
            measurements,
        };
    }
    clear() {
        this.measurements.clear();
    }
}
exports.PerformanceTester = PerformanceTester;
// ============================================================================
// 网络模拟工具
// ============================================================================
class NetworkSimulator {
    constructor() {
        Object.defineProperty(this, "originalFetch", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: global.fetch
        });
        Object.defineProperty(this, "latency", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: 0
        });
        Object.defineProperty(this, "failureRate", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: 0
        });
        Object.defineProperty(this, "offline", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: false
        });
        this.setupMockFetch();
    }
    setLatency(ms) {
        this.latency = ms;
    }
    setFailureRate(rate) {
        this.failureRate = Math.max(0, Math.min(1, rate));
    }
    setOffline(offline) {
        this.offline = offline;
    }
    setupMockFetch() {
        global.fetch = jest.fn(async (input, init) => {
            if (this.offline) {
                throw new Error('Network: Offline');
            }
            if (Math.random() < this.failureRate) {
                throw new Error('Network: Request failed');
            }
            if (this.latency > 0) {
                await new Promise(resolve => setTimeout(resolve, this.latency));
            }
            return this.originalFetch(input, init);
        });
    }
    restore() {
        global.fetch = this.originalFetch;
    }
}
exports.NetworkSimulator = NetworkSimulator;
// ============================================================================
// 事件模拟工具
// ============================================================================
class EventSimulator {
    static simulateFileUpload(files) {
        return {
            target: {
                files,
            },
        };
    }
    static simulateDragStart(data) {
        return {
            dataTransfer: {
                setData: jest.fn(),
                getData: jest.fn(() => JSON.stringify(data)),
                clearData: jest.fn(),
            },
            preventDefault: jest.fn(),
            stopPropagation: jest.fn(),
        };
    }
    static simulateDragOver(position) {
        return {
            clientX: position.x,
            clientY: position.y,
            preventDefault: jest.fn(),
            stopPropagation: jest.fn(),
        };
    }
    static simulateDrop(data, position) {
        return {
            clientX: position.x,
            clientY: position.y,
            dataTransfer: {
                getData: jest.fn(() => JSON.stringify(data)),
                setData: jest.fn(),
                clearData: jest.fn(),
            },
            preventDefault: jest.fn(),
            stopPropagation: jest.fn(),
        };
    }
    static simulateKeyboardEvent(type, key, options = {}) {
        return new KeyboardEvent(type, {
            key,
            bubbles: true,
            cancelable: true,
            ...options,
        });
    }
    static simulateMouseEvent(type, options = {}) {
        return new MouseEvent(type, {
            bubbles: true,
            cancelable: true,
            ...options,
        });
    }
}
exports.EventSimulator = EventSimulator;
// ============================================================================
// 导出
// ============================================================================
// 重新导出 testing-library 工具
__exportStar(require("@testing-library/react"), exports);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiRDpcXFByb2plY3RzXFxDYXJkRXZlcnl0aGluZ1xcY2FyZGFsbC1wcm90b3R5cGVcXHRlc3RzXFxhZHZhbmNlZC10ZXN0LXV0aWxzLnRzeCIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQSwyQkFBMkI7QUFDM0Isa0RBQWlGO0FBRWpGLHVDQUFrRDtBQUNsRCx1REFBd0U7QUFDeEUseUNBQXVDO0FBQ3ZDLHFFQUFzRDtBQUN0RCx5REFBaUQ7QUFDakQsbUVBQThEO0FBRTlELGNBQWM7QUFDZCxNQUFNLENBQUMsTUFBTSxDQUFDLDZCQUFrQixDQUFDLENBQUE7QUE0RmpDLCtFQUErRTtBQUMvRSxPQUFPO0FBQ1AsK0VBQStFO0FBRS9FLE1BQWEsa0JBQWtCO0lBQS9CO1FBQ1U7Ozs7bUJBQU87Z0JBQ2IsS0FBSyxFQUFFLElBQUksR0FBRyxFQUF3QjtnQkFDdEMsT0FBTyxFQUFFLElBQUksR0FBRyxFQUEwQjtnQkFDMUMsSUFBSSxFQUFFLElBQUksR0FBRyxFQUF1QjtnQkFDcEMsY0FBYyxFQUFFLElBQUksR0FBRyxFQUE2QjthQUNyRDtXQUFBO1FBRUQsT0FBTztRQUNQOzs7O21CQUFRO2dCQUNOLE1BQU0sRUFBRSxJQUFJLENBQUMsRUFBRSxDQUFDLEdBQUcsRUFBRSxDQUFDLENBQUM7b0JBQ3JCLEVBQUUsRUFBRSxJQUFJLENBQUMsRUFBRSxDQUFDLEdBQUcsRUFBRSxDQUFDLENBQUM7d0JBQ2pCLEtBQUssRUFBRSxJQUFJLENBQUMsRUFBRSxDQUFDLEdBQUcsRUFBRSxDQUFDLENBQUM7NEJBQ3BCLElBQUksRUFBRSxLQUFLLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLE1BQU0sRUFBRSxDQUFDOzRCQUMxQyxLQUFLLEVBQUUsSUFBSTt5QkFDWixDQUFDLENBQUM7cUJBQ0osQ0FBQyxDQUFDO29CQUNILEVBQUUsRUFBRSxJQUFJLENBQUMsRUFBRSxDQUFDLEdBQUcsRUFBRSxDQUFDLENBQUM7d0JBQ2pCLElBQUksRUFBRSxLQUFLLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLE1BQU0sRUFBRSxDQUFDO3dCQUMxQyxLQUFLLEVBQUUsSUFBSTtxQkFDWixDQUFDLENBQUM7aUJBQ0osQ0FBQyxDQUFDO2dCQUNILE1BQU0sRUFBRSxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUMsSUFBMkIsRUFBRSxFQUFFO29CQUM5QyxNQUFNLE9BQU8sR0FBaUI7d0JBQzVCLEVBQUUsRUFBRSxNQUFNLENBQUMsVUFBVSxFQUFFO3dCQUN2QixZQUFZLEVBQUUsSUFBSSxDQUFDLFlBQVksSUFBSTs0QkFDakMsS0FBSyxFQUFFLEVBQUU7NEJBQ1QsSUFBSSxFQUFFLEVBQUU7NEJBQ1IsTUFBTSxFQUFFLEVBQUU7NEJBQ1YsSUFBSSxFQUFFLEVBQUU7NEJBQ1IsWUFBWSxFQUFFLElBQUksSUFBSSxFQUFFO3lCQUN6Qjt3QkFDRCxXQUFXLEVBQUUsSUFBSSxDQUFDLFdBQVcsSUFBSTs0QkFDL0IsS0FBSyxFQUFFLEVBQUU7NEJBQ1QsSUFBSSxFQUFFLEVBQUU7NEJBQ1IsTUFBTSxFQUFFLEVBQUU7NEJBQ1YsSUFBSSxFQUFFLEVBQUU7NEJBQ1IsWUFBWSxFQUFFLElBQUksSUFBSSxFQUFFO3lCQUN6Qjt3QkFDRCxLQUFLLEVBQUUsSUFBSSxDQUFDLEtBQUssSUFBSTs0QkFDbkIsSUFBSSxFQUFFLE9BQU87NEJBQ2IsZUFBZSxFQUFFLFNBQVM7NEJBQzFCLFVBQVUsRUFBRSxXQUFXOzRCQUN2QixRQUFRLEVBQUUsTUFBTTs0QkFDaEIsVUFBVSxFQUFFLFFBQVE7NEJBQ3BCLFNBQVMsRUFBRSxTQUFTOzRCQUNwQixZQUFZLEVBQUUsSUFBSTs0QkFDbEIsTUFBTSxFQUFFLElBQUk7NEJBQ1osV0FBVyxFQUFFLENBQUM7eUJBQ2Y7d0JBQ0QsU0FBUyxFQUFFLElBQUksQ0FBQyxTQUFTLElBQUksS0FBSzt3QkFDbEMsU0FBUyxFQUFFLElBQUksSUFBSSxFQUFFO3dCQUNyQixTQUFTLEVBQUUsSUFBSSxJQUFJLEVBQUU7d0JBQ3JCLEdBQUcsSUFBSTtxQkFDUSxDQUFBO29CQUVqQixJQUFJLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsT0FBTyxDQUFDLEVBQUUsRUFBRSxPQUFPLENBQUMsQ0FBQTtvQkFFeEMsT0FBTyxPQUFPLENBQUMsT0FBTyxDQUFDO3dCQUNyQixJQUFJLEVBQUUsQ0FBQyxPQUFPLENBQUM7d0JBQ2YsS0FBSyxFQUFFLElBQUk7cUJBQ1osQ0FBQyxDQUFBO2dCQUNKLENBQUMsQ0FBQztnQkFDRixNQUFNLEVBQUUsSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQVUsRUFBRSxPQUE4QixFQUFFLEVBQUU7b0JBQzdELE1BQU0sSUFBSSxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsQ0FBQTtvQkFDcEMsSUFBSSxJQUFJLEVBQUUsQ0FBQzt3QkFDVCxNQUFNLFdBQVcsR0FBRyxFQUFFLEdBQUcsSUFBSSxFQUFFLEdBQUcsT0FBTyxFQUFFLFNBQVMsRUFBRSxJQUFJLElBQUksRUFBRSxFQUFFLENBQUE7d0JBQ2xFLElBQUksQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxFQUFFLEVBQUUsV0FBVyxDQUFDLENBQUE7d0JBQ3BDLE9BQU8sT0FBTyxDQUFDLE9BQU8sQ0FBQzs0QkFDckIsSUFBSSxFQUFFLENBQUMsV0FBVyxDQUFDOzRCQUNuQixLQUFLLEVBQUUsSUFBSTt5QkFDWixDQUFDLENBQUE7b0JBQ0osQ0FBQztvQkFDRCxPQUFPLE9BQU8sQ0FBQyxPQUFPLENBQUM7d0JBQ3JCLElBQUksRUFBRSxJQUFJO3dCQUNWLEtBQUssRUFBRSxFQUFFLE9BQU8sRUFBRSxnQkFBZ0IsRUFBRTtxQkFDckMsQ0FBQyxDQUFBO2dCQUNKLENBQUMsQ0FBQztnQkFDRixNQUFNLEVBQUUsSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQVUsRUFBRSxFQUFFO29CQUM3QixNQUFNLE9BQU8sR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUMsRUFBRSxDQUFDLENBQUE7b0JBQzFDLE9BQU8sT0FBTyxDQUFDLE9BQU8sQ0FBQzt3QkFDckIsSUFBSSxFQUFFLElBQUk7d0JBQ1YsS0FBSyxFQUFFLE9BQU8sQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxFQUFFLE9BQU8sRUFBRSxnQkFBZ0IsRUFBRTtxQkFDdEQsQ0FBQyxDQUFBO2dCQUNKLENBQUMsQ0FBQzthQUNIO1dBQUE7UUFFRCxRQUFRO1FBQ1I7Ozs7bUJBQVU7Z0JBQ1IsTUFBTSxFQUFFLElBQUksQ0FBQyxFQUFFLENBQUMsR0FBRyxFQUFFLENBQUMsQ0FBQztvQkFDckIsRUFBRSxFQUFFLElBQUksQ0FBQyxFQUFFLENBQUMsR0FBRyxFQUFFLENBQUMsQ0FBQzt3QkFDakIsSUFBSSxFQUFFLEtBQUssQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsTUFBTSxFQUFFLENBQUM7d0JBQzVDLEtBQUssRUFBRSxJQUFJO3FCQUNaLENBQUMsQ0FBQztpQkFDSixDQUFDLENBQUM7Z0JBQ0gsTUFBTSxFQUFFLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQyxNQUErQixFQUFFLEVBQUU7b0JBQ2xELE1BQU0sU0FBUyxHQUFtQjt3QkFDaEMsRUFBRSxFQUFFLE1BQU0sQ0FBQyxVQUFVLEVBQUU7d0JBQ3ZCLElBQUksRUFBRSxNQUFNLENBQUMsSUFBSSxJQUFJLEVBQUU7d0JBQ3ZCLEtBQUssRUFBRSxNQUFNLENBQUMsS0FBSyxJQUFJLFNBQVM7d0JBQ2hDLE9BQU8sRUFBRSxNQUFNLENBQUMsT0FBTyxJQUFJLEVBQUU7d0JBQzdCLFNBQVMsRUFBRSxJQUFJLElBQUksRUFBRTt3QkFDckIsU0FBUyxFQUFFLElBQUksSUFBSSxFQUFFO3dCQUNyQixHQUFHLE1BQU07cUJBQ1EsQ0FBQTtvQkFFbkIsSUFBSSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsR0FBRyxDQUFDLFNBQVMsQ0FBQyxFQUFFLEVBQUUsU0FBUyxDQUFDLENBQUE7b0JBRTlDLE9BQU8sT0FBTyxDQUFDLE9BQU8sQ0FBQzt3QkFDckIsSUFBSSxFQUFFLENBQUMsU0FBUyxDQUFDO3dCQUNqQixLQUFLLEVBQUUsSUFBSTtxQkFDWixDQUFDLENBQUE7Z0JBQ0osQ0FBQyxDQUFDO2FBQ0g7V0FBQTtRQUVELE9BQU87UUFDUDs7OzttQkFBTztnQkFDTCxNQUFNLEVBQUUsSUFBSSxDQUFDLEVBQUUsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxDQUFDO29CQUNyQixJQUFJLEVBQUUsS0FBSyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxNQUFNLEVBQUUsQ0FBQztvQkFDekMsS0FBSyxFQUFFLElBQUk7aUJBQ1osQ0FBQyxDQUFDO2dCQUNILE1BQU0sRUFBRSxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUMsR0FBeUIsRUFBRSxFQUFFO29CQUM1QyxNQUFNLE1BQU0sR0FBZ0I7d0JBQzFCLEVBQUUsRUFBRSxNQUFNLENBQUMsVUFBVSxFQUFFO3dCQUN2QixJQUFJLEVBQUUsR0FBRyxDQUFDLElBQUksSUFBSSxFQUFFO3dCQUNwQixLQUFLLEVBQUUsR0FBRyxDQUFDLEtBQUssSUFBSSxTQUFTO3dCQUM3QixLQUFLLEVBQUUsR0FBRyxDQUFDLEtBQUssSUFBSSxDQUFDO3dCQUNyQixTQUFTLEVBQUUsSUFBSSxJQUFJLEVBQUU7d0JBQ3JCLEdBQUcsR0FBRztxQkFDUSxDQUFBO29CQUVoQixJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsTUFBTSxDQUFDLEVBQUUsRUFBRSxNQUFNLENBQUMsQ0FBQTtvQkFFckMsT0FBTyxPQUFPLENBQUMsT0FBTyxDQUFDO3dCQUNyQixJQUFJLEVBQUUsQ0FBQyxNQUFNLENBQUM7d0JBQ2QsS0FBSyxFQUFFLElBQUk7cUJBQ1osQ0FBQyxDQUFBO2dCQUNKLENBQUMsQ0FBQzthQUNIO1dBQUE7UUFFRCxTQUFTO1FBQ1Q7Ozs7bUJBQVEsR0FBRyxFQUFFO2dCQUNYLElBQUksQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLEtBQUssRUFBRSxDQUFBO2dCQUN2QixJQUFJLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxLQUFLLEVBQUUsQ0FBQTtnQkFDekIsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsS0FBSyxFQUFFLENBQUE7Z0JBQ3RCLElBQUksQ0FBQyxJQUFJLENBQUMsY0FBYyxDQUFDLEtBQUssRUFBRSxDQUFBO1lBQ2xDLENBQUM7V0FBQTtRQUVELFdBQVc7UUFDWDs7OzttQkFBVSxHQUFHLEVBQUUsQ0FBQyxDQUFDO2dCQUNmLEtBQUssRUFBRSxLQUFLLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLE1BQU0sRUFBRSxDQUFDO2dCQUMzQyxPQUFPLEVBQUUsS0FBSyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxNQUFNLEVBQUUsQ0FBQztnQkFDL0MsSUFBSSxFQUFFLEtBQUssQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsTUFBTSxFQUFFLENBQUM7Z0JBQ3pDLGNBQWMsRUFBRSxLQUFLLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsY0FBYyxDQUFDLE1BQU0sRUFBRSxDQUFDO2FBQzlELENBQUM7V0FBQTtJQUNKLENBQUM7Q0FBQTtBQTNKRCxnREEySkM7QUFFRCxNQUFhLGFBQWE7SUFHeEI7UUFGUTs7OzttQkFBUyxJQUFJLEdBQUcsRUFBNEI7V0FBQTtRQTZHcEQsUUFBUTtRQUNSOzs7O21CQUFRLEdBQUcsRUFBRTtnQkFDWCxJQUFJLENBQUMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUMsRUFBRSxDQUFDLEtBQUssQ0FBQyxLQUFLLEVBQUUsQ0FBQyxDQUFBO1lBQzdDLENBQUM7V0FBQTtRQUVELFNBQVM7UUFDVDs7OzttQkFBZSxDQUFDLElBQVksRUFBRSxFQUFFO2dCQUM5QixNQUFNLEtBQUssR0FBRyxJQUFJLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsQ0FBQTtnQkFDbkMsT0FBTyxLQUFLLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLE1BQU0sRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQTtZQUNoRCxDQUFDO1dBQUE7UUFuSEMsU0FBUztRQUNULElBQUksQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDLE9BQU8sRUFBRSxJQUFJLEdBQUcsRUFBRSxDQUFDLENBQUE7UUFDbkMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsU0FBUyxFQUFFLElBQUksR0FBRyxFQUFFLENBQUMsQ0FBQTtRQUNyQyxJQUFJLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxNQUFNLEVBQUUsSUFBSSxHQUFHLEVBQUUsQ0FBQyxDQUFBO1FBQ2xDLElBQUksQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDLFdBQVcsRUFBRSxJQUFJLEdBQUcsRUFBRSxDQUFDLENBQUE7SUFDekMsQ0FBQztJQUVELGlCQUFpQjtJQUNqQixLQUFLLENBQUMsSUFBWTtRQUNoQixPQUFPO1lBQ0wsR0FBRyxFQUFFLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQyxJQUFTLEVBQUUsRUFBRTtnQkFDekIsTUFBTSxLQUFLLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLENBQUE7Z0JBQ25DLElBQUksS0FBSyxFQUFFLENBQUM7b0JBQ1YsTUFBTSxFQUFFLEdBQUcsSUFBSSxDQUFDLEVBQUUsSUFBSSxNQUFNLENBQUMsVUFBVSxFQUFFLENBQUE7b0JBQ3pDLEtBQUssQ0FBQyxHQUFHLENBQUMsRUFBRSxFQUFFLEVBQUUsR0FBRyxJQUFJLEVBQUUsRUFBRSxFQUFFLENBQUMsQ0FBQTtvQkFDOUIsT0FBTyxPQUFPLENBQUMsT0FBTyxDQUFDLEVBQUUsQ0FBQyxDQUFBO2dCQUM1QixDQUFDO2dCQUNELE9BQU8sT0FBTyxDQUFDLE1BQU0sQ0FBQyxJQUFJLEtBQUssQ0FBQyxTQUFTLElBQUksWUFBWSxDQUFDLENBQUMsQ0FBQTtZQUM3RCxDQUFDLENBQUM7WUFDRixPQUFPLEVBQUUsSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFDLEtBQVksRUFBRSxFQUFFO2dCQUNoQyxNQUFNLEtBQUssR0FBRyxJQUFJLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsQ0FBQTtnQkFDbkMsSUFBSSxLQUFLLEVBQUUsQ0FBQztvQkFDVixNQUFNLEdBQUcsR0FBRyxLQUFLLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxFQUFFO3dCQUMzQixNQUFNLEVBQUUsR0FBRyxJQUFJLENBQUMsRUFBRSxJQUFJLE1BQU0sQ0FBQyxVQUFVLEVBQUUsQ0FBQTt3QkFDekMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxFQUFFLEVBQUUsRUFBRSxHQUFHLElBQUksRUFBRSxFQUFFLEVBQUUsQ0FBQyxDQUFBO3dCQUM5QixPQUFPLEVBQUUsQ0FBQTtvQkFDWCxDQUFDLENBQUMsQ0FBQTtvQkFDRixPQUFPLE9BQU8sQ0FBQyxPQUFPLENBQUMsR0FBRyxDQUFDLENBQUE7Z0JBQzdCLENBQUM7Z0JBQ0QsT0FBTyxPQUFPLENBQUMsTUFBTSxDQUFDLElBQUksS0FBSyxDQUFDLFNBQVMsSUFBSSxZQUFZLENBQUMsQ0FBQyxDQUFBO1lBQzdELENBQUMsQ0FBQztZQUNGLEdBQUcsRUFBRSxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBVSxFQUFFLEVBQUU7Z0JBQzFCLE1BQU0sS0FBSyxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxDQUFBO2dCQUNuQyxJQUFJLEtBQUssRUFBRSxDQUFDO29CQUNWLE9BQU8sT0FBTyxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxJQUFJLFNBQVMsQ0FBQyxDQUFBO2dCQUNwRCxDQUFDO2dCQUNELE9BQU8sT0FBTyxDQUFDLE9BQU8sQ0FBQyxTQUFTLENBQUMsQ0FBQTtZQUNuQyxDQUFDLENBQUM7WUFDRixLQUFLLEVBQUUsSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFDLEdBQVcsRUFBRSxFQUFFLENBQUMsQ0FBQztnQkFDL0IsTUFBTSxFQUFFLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQyxLQUFVLEVBQUUsRUFBRSxDQUFDLENBQUM7b0JBQy9CLE9BQU8sRUFBRSxJQUFJLENBQUMsRUFBRSxDQUFDLEdBQUcsRUFBRTt3QkFDcEIsTUFBTSxLQUFLLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLENBQUE7d0JBQ25DLElBQUksS0FBSyxFQUFFLENBQUM7NEJBQ1YsTUFBTSxPQUFPLEdBQUcsS0FBSyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsTUFBTSxFQUFFLENBQUMsQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLEtBQUssS0FBSyxDQUFDLENBQUE7NEJBQzlFLE9BQU8sT0FBTyxDQUFDLE9BQU8sQ0FBQyxPQUFPLENBQUMsQ0FBQTt3QkFDakMsQ0FBQzt3QkFDRCxPQUFPLE9BQU8sQ0FBQyxPQUFPLENBQUMsRUFBRSxDQUFDLENBQUE7b0JBQzVCLENBQUMsQ0FBQztvQkFDRixNQUFNLEVBQUUsSUFBSSxDQUFDLEVBQUUsQ0FBQyxHQUFHLEVBQUU7d0JBQ25CLE1BQU0sS0FBSyxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxDQUFBO3dCQUNuQyxJQUFJLEtBQUssRUFBRSxDQUFDOzRCQUNWLE1BQU0sUUFBUSxHQUFHLEtBQUssQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLE9BQU8sRUFBRSxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsS0FBSyxLQUFLLENBQUMsQ0FBQTs0QkFDdkYsUUFBUSxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsRUFBRSxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQTs0QkFDNUMsT0FBTyxPQUFPLENBQUMsT0FBTyxDQUFDLFFBQVEsQ0FBQyxNQUFNLENBQUMsQ0FBQTt3QkFDekMsQ0FBQzt3QkFDRCxPQUFPLE9BQU8sQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUE7b0JBQzNCLENBQUMsQ0FBQztvQkFDRixNQUFNLEVBQUUsSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFDLE9BQVksRUFBRSxFQUFFO3dCQUMvQixNQUFNLEtBQUssR0FBRyxJQUFJLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsQ0FBQTt3QkFDbkMsSUFBSSxLQUFLLEVBQUUsQ0FBQzs0QkFDVixNQUFNLFFBQVEsR0FBRyxLQUFLLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxPQUFPLEVBQUUsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLElBQUksQ0FBQyxFQUFFLEVBQUUsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLEtBQUssS0FBSyxDQUFDLENBQUE7NEJBQ3ZGLFFBQVEsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxJQUFJLENBQUMsRUFBRSxFQUFFO2dDQUM5QixLQUFLLENBQUMsR0FBRyxDQUFDLEVBQUUsRUFBRSxFQUFFLEdBQUcsSUFBSSxFQUFFLEdBQUcsT0FBTyxFQUFFLENBQUMsQ0FBQTs0QkFDeEMsQ0FBQyxDQUFDLENBQUE7NEJBQ0YsT0FBTyxPQUFPLENBQUMsT0FBTyxDQUFDLFFBQVEsQ0FBQyxNQUFNLENBQUMsQ0FBQTt3QkFDekMsQ0FBQzt3QkFDRCxPQUFPLE9BQU8sQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUE7b0JBQzNCLENBQUMsQ0FBQztpQkFDSCxDQUFDLENBQUM7Z0JBQ0gsS0FBSyxFQUFFLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQyxNQUFhLEVBQUUsRUFBRSxDQUFDLENBQUM7b0JBQ2pDLE9BQU8sRUFBRSxJQUFJLENBQUMsRUFBRSxDQUFDLEdBQUcsRUFBRTt3QkFDcEIsTUFBTSxLQUFLLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLENBQUE7d0JBQ25DLElBQUksS0FBSyxFQUFFLENBQUM7NEJBQ1YsTUFBTSxPQUFPLEdBQUcsS0FBSyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsTUFBTSxFQUFFLENBQUMsQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUE7NEJBQ3JGLE9BQU8sT0FBTyxDQUFDLE9BQU8sQ0FBQyxPQUFPLENBQUMsQ0FBQTt3QkFDakMsQ0FBQzt3QkFDRCxPQUFPLE9BQU8sQ0FBQyxPQUFPLENBQUMsRUFBRSxDQUFDLENBQUE7b0JBQzVCLENBQUMsQ0FBQztpQkFDSCxDQUFDLENBQUM7YUFDSixDQUFDLENBQUM7WUFDSCxPQUFPLEVBQUUsSUFBSSxDQUFDLEVBQUUsQ0FBQyxHQUFHLEVBQUU7Z0JBQ3BCLE1BQU0sS0FBSyxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxDQUFBO2dCQUNuQyxJQUFJLEtBQUssRUFBRSxDQUFDO29CQUNWLE9BQU8sT0FBTyxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxNQUFNLEVBQUUsQ0FBQyxDQUFDLENBQUE7Z0JBQ3BELENBQUM7Z0JBQ0QsT0FBTyxPQUFPLENBQUMsT0FBTyxDQUFDLEVBQUUsQ0FBQyxDQUFBO1lBQzVCLENBQUMsQ0FBQztZQUNGLE1BQU0sRUFBRSxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBVSxFQUFFLEVBQUU7Z0JBQzdCLE1BQU0sS0FBSyxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxDQUFBO2dCQUNuQyxJQUFJLEtBQUssRUFBRSxDQUFDO29CQUNWLE1BQU0sT0FBTyxHQUFHLEtBQUssQ0FBQyxNQUFNLENBQUMsRUFBRSxDQUFDLENBQUE7b0JBQ2hDLE9BQU8sT0FBTyxDQUFDLE9BQU8sQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUE7Z0JBQ3pDLENBQUM7Z0JBQ0QsT0FBTyxPQUFPLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFBO1lBQzNCLENBQUMsQ0FBQztZQUNGLEtBQUssRUFBRSxJQUFJLENBQUMsRUFBRSxDQUFDLEdBQUcsRUFBRTtnQkFDbEIsTUFBTSxLQUFLLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLENBQUE7Z0JBQ25DLElBQUksS0FBSyxFQUFFLENBQUM7b0JBQ1YsS0FBSyxDQUFDLEtBQUssRUFBRSxDQUFBO29CQUNiLE9BQU8sT0FBTyxDQUFDLE9BQU8sRUFBRSxDQUFBO2dCQUMxQixDQUFDO2dCQUNELE9BQU8sT0FBTyxDQUFDLE1BQU0sQ0FBQyxJQUFJLEtBQUssQ0FBQyxTQUFTLElBQUksWUFBWSxDQUFDLENBQUMsQ0FBQTtZQUM3RCxDQUFDLENBQUM7U0FDSCxDQUFBO0lBQ0gsQ0FBQztDQVlGO0FBeEhELHNDQXdIQztBQUVELCtFQUErRTtBQUMvRSxRQUFRO0FBQ1IsK0VBQStFO0FBRS9FLE1BQWEsaUJBQWlCO0lBRzVCLE1BQU0sQ0FBQyxVQUFVO1FBQ2YsT0FBTyxXQUFXLElBQUksQ0FBQyxTQUFTLEVBQUUsRUFBRSxDQUFBO0lBQ3RDLENBQUM7SUFFRCxNQUFNLENBQUMsWUFBWSxDQUFDLFlBQW1DLEVBQUU7UUFDdkQsTUFBTSxFQUFFLEdBQUcsU0FBUyxDQUFDLEVBQUUsSUFBSSxJQUFJLENBQUMsVUFBVSxFQUFFLENBQUE7UUFDNUMsT0FBTztZQUNMLEVBQUU7WUFDRixZQUFZLEVBQUU7Z0JBQ1osS0FBSyxFQUFFLGFBQWEsRUFBRSxFQUFFO2dCQUN4QixJQUFJLEVBQUUsbURBQW1EO2dCQUN6RCxNQUFNLEVBQUUsRUFBRTtnQkFDVixJQUFJLEVBQUUsQ0FBQyxNQUFNLENBQUM7Z0JBQ2QsWUFBWSxFQUFFLElBQUksSUFBSSxFQUFFO2FBQ3pCO1lBQ0QsV0FBVyxFQUFFO2dCQUNYLEtBQUssRUFBRSxnQkFBZ0IsRUFBRSxFQUFFO2dCQUMzQixJQUFJLEVBQUUsNENBQTRDO2dCQUNsRCxNQUFNLEVBQUUsRUFBRTtnQkFDVixJQUFJLEVBQUUsRUFBRTtnQkFDUixZQUFZLEVBQUUsSUFBSSxJQUFJLEVBQUU7YUFDekI7WUFDRCxLQUFLLEVBQUU7Z0JBQ0wsSUFBSSxFQUFFLE9BQU87Z0JBQ2IsZUFBZSxFQUFFLFNBQVM7Z0JBQzFCLFVBQVUsRUFBRSxXQUFXO2dCQUN2QixRQUFRLEVBQUUsTUFBTTtnQkFDaEIsVUFBVSxFQUFFLFFBQVE7Z0JBQ3BCLFNBQVMsRUFBRSxTQUFTO2dCQUNwQixZQUFZLEVBQUUsSUFBSTtnQkFDbEIsTUFBTSxFQUFFLElBQUk7Z0JBQ1osV0FBVyxFQUFFLENBQUM7YUFDZjtZQUNELFNBQVMsRUFBRSxLQUFLO1lBQ2hCLFNBQVMsRUFBRSxJQUFJLElBQUksRUFBRTtZQUNyQixTQUFTLEVBQUUsSUFBSSxJQUFJLEVBQUU7WUFDckIsR0FBRyxTQUFTO1NBQ2IsQ0FBQTtJQUNILENBQUM7SUFFRCxNQUFNLENBQUMsY0FBYyxDQUFDLFlBQXFDLEVBQUU7UUFDM0QsTUFBTSxFQUFFLEdBQUcsU0FBUyxDQUFDLEVBQUUsSUFBSSxJQUFJLENBQUMsVUFBVSxFQUFFLENBQUE7UUFDNUMsT0FBTztZQUNMLEVBQUU7WUFDRixJQUFJLEVBQUUsZUFBZSxFQUFFLEVBQUU7WUFDekIsS0FBSyxFQUFFLFNBQVM7WUFDaEIsT0FBTyxFQUFFLEVBQUU7WUFDWCxTQUFTLEVBQUUsSUFBSSxJQUFJLEVBQUU7WUFDckIsU0FBUyxFQUFFLElBQUksSUFBSSxFQUFFO1lBQ3JCLEdBQUcsU0FBUztTQUNiLENBQUE7SUFDSCxDQUFDO0lBRUQsTUFBTSxDQUFDLFdBQVcsQ0FBQyxZQUFrQyxFQUFFO1FBQ3JELE1BQU0sRUFBRSxHQUFHLFNBQVMsQ0FBQyxFQUFFLElBQUksSUFBSSxDQUFDLFVBQVUsRUFBRSxDQUFBO1FBQzVDLE9BQU87WUFDTCxFQUFFO1lBQ0YsSUFBSSxFQUFFLFlBQVksRUFBRSxFQUFFO1lBQ3RCLEtBQUssRUFBRSxTQUFTO1lBQ2hCLEtBQUssRUFBRSxDQUFDO1lBQ1IsU0FBUyxFQUFFLElBQUksSUFBSSxFQUFFO1lBQ3JCLEdBQUcsU0FBUztTQUNiLENBQUE7SUFDSCxDQUFDO0lBRUQsTUFBTSxDQUFDLHFCQUFxQixDQUFDLFlBQXdDLEVBQUU7UUFDckUsT0FBTztZQUNMLEVBQUUsRUFBRSxJQUFJLENBQUMsVUFBVSxFQUFFO1lBQ3JCLElBQUksRUFBRSxRQUFRO1lBQ2QsTUFBTSxFQUFFLE1BQU07WUFDZCxRQUFRLEVBQUUsSUFBSSxDQUFDLFVBQVUsRUFBRTtZQUMzQixJQUFJLEVBQUUsRUFBRTtZQUNSLFFBQVEsRUFBRSxRQUFRO1lBQ2xCLFNBQVMsRUFBRSxJQUFJLElBQUksRUFBRTtZQUNyQixVQUFVLEVBQUUsQ0FBQztZQUNiLFVBQVUsRUFBRSxDQUFDO1lBQ2IsTUFBTSxFQUFFLFNBQVM7WUFDakIsR0FBRyxTQUFTO1NBQ2IsQ0FBQTtJQUNILENBQUM7SUFFRCxNQUFNLENBQUMsZ0JBQWdCLENBQUMsS0FBYSxFQUFFLFNBQWlDO1FBQ3RFLE9BQU8sS0FBSyxDQUFDLElBQUksQ0FBQyxFQUFFLE1BQU0sRUFBRSxLQUFLLEVBQUUsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsRUFBRSxDQUM1QyxJQUFJLENBQUMsWUFBWSxDQUFDLEVBQUUsR0FBRyxTQUFTLEVBQUUsRUFBRSxFQUFFLFFBQVEsQ0FBQyxHQUFHLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FDekQsQ0FBQTtJQUNILENBQUM7SUFFRCxNQUFNLENBQUMsa0JBQWtCLENBQUMsS0FBYSxFQUFFLFNBQW1DO1FBQzFFLE9BQU8sS0FBSyxDQUFDLElBQUksQ0FBQyxFQUFFLE1BQU0sRUFBRSxLQUFLLEVBQUUsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsRUFBRSxDQUM1QyxJQUFJLENBQUMsY0FBYyxDQUFDLEVBQUUsR0FBRyxTQUFTLEVBQUUsRUFBRSxFQUFFLFVBQVUsQ0FBQyxHQUFHLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FDN0QsQ0FBQTtJQUNILENBQUM7SUFFRCxNQUFNLENBQUMsZUFBZSxDQUFDLEtBQWEsRUFBRSxTQUFnQztRQUNwRSxPQUFPLEtBQUssQ0FBQyxJQUFJLENBQUMsRUFBRSxNQUFNLEVBQUUsS0FBSyxFQUFFLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLEVBQUUsQ0FDNUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxFQUFFLEdBQUcsU0FBUyxFQUFFLEVBQUUsRUFBRSxPQUFPLENBQUMsR0FBRyxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQ3ZELENBQUE7SUFDSCxDQUFDOztBQXBHSCw4Q0FxR0M7QUFwR2dCOzs7O1dBQVksQ0FBQztHQUFBO0FBc0c5QiwrRUFBK0U7QUFDL0UsU0FBUztBQUNULCtFQUErRTtBQUUvRSxNQUFNLHFCQUFxQixHQUFHLEdBQUcsRUFBRSxDQUFDLElBQUkseUJBQVcsQ0FBQztJQUNsRCxjQUFjLEVBQUU7UUFDZCxPQUFPLEVBQUU7WUFDUCxLQUFLLEVBQUUsS0FBSztZQUNaLFNBQVMsRUFBRSxDQUFDO1NBQ2I7S0FDRjtDQUNGLENBQUMsQ0FBQTtBQUVGLE1BQU0sZUFBZSxHQUFHLENBQUMsRUFBRSxRQUFRLEVBQWlDLEVBQUUsRUFBRTtJQUN0RSxNQUFNLFdBQVcsR0FBRyxxQkFBcUIsRUFBRSxDQUFBO0lBRTNDLE9BQU8sQ0FDTCx1QkFBQyxpQ0FBbUIsSUFBQyxNQUFNLEVBQUUsV0FBVyxZQUN0Qyx1QkFBQyx1QkFBVyxJQUFDLE9BQU8sRUFBRSxzQ0FBWSxZQUNoQyx1QkFBQyxpQ0FBYSxJQUFDLEtBQUssRUFBRSxFQUFFLElBQUksRUFBRSxPQUFPLEVBQUUsWUFDckMsdUJBQUMsOEJBQWEsY0FDWCxRQUFRLEdBQ0ssR0FDRixHQUNKLEdBQ00sQ0FDdkIsQ0FBQTtBQUNILENBQUMsQ0FBQTtBQUVELE1BQU0sWUFBWSxHQUFHLENBQ25CLEVBQWdCLEVBQ2hCLE9BQXdDLEVBQzFCLEVBQUU7SUFDaEIsT0FBTyxJQUFBLGNBQU0sRUFBQyxFQUFFLEVBQUUsRUFBRSxPQUFPLEVBQUUsZUFBZSxFQUFFLEdBQUcsT0FBTyxFQUFFLENBQUMsQ0FBQTtBQUM3RCxDQUFDLENBQUE7QUF3THdCLDhCQUFNO0FBdEwvQiwrRUFBK0U7QUFDL0UsU0FBUztBQUNULCtFQUErRTtBQUUvRSxNQUFhLGlCQUFpQjtJQUE5QjtRQUNVOzs7O21CQUFlLElBQUksR0FBRyxFQUFvQjtXQUFBO0lBb0RwRCxDQUFDO0lBbERDLEtBQUssQ0FBQyxPQUFPLENBQUksSUFBWSxFQUFFLEVBQW9CO1FBQ2pELE1BQU0sS0FBSyxHQUFHLFdBQVcsQ0FBQyxHQUFHLEVBQUUsQ0FBQTtRQUMvQixNQUFNLE1BQU0sR0FBRyxNQUFNLEVBQUUsRUFBRSxDQUFBO1FBQ3pCLE1BQU0sR0FBRyxHQUFHLFdBQVcsQ0FBQyxHQUFHLEVBQUUsQ0FBQTtRQUM3QixNQUFNLFFBQVEsR0FBRyxHQUFHLEdBQUcsS0FBSyxDQUFBO1FBRTVCLElBQUksQ0FBQyxJQUFJLENBQUMsWUFBWSxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDO1lBQ2pDLElBQUksQ0FBQyxZQUFZLENBQUMsR0FBRyxDQUFDLElBQUksRUFBRSxFQUFFLENBQUMsQ0FBQTtRQUNqQyxDQUFDO1FBQ0QsSUFBSSxDQUFDLFlBQVksQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFFLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFBO1FBRTNDLE9BQU8sTUFBTSxDQUFBO0lBQ2YsQ0FBQztJQUVELFdBQVcsQ0FBSSxJQUFZLEVBQUUsRUFBVztRQUN0QyxNQUFNLEtBQUssR0FBRyxXQUFXLENBQUMsR0FBRyxFQUFFLENBQUE7UUFDL0IsTUFBTSxNQUFNLEdBQUcsRUFBRSxFQUFFLENBQUE7UUFDbkIsTUFBTSxHQUFHLEdBQUcsV0FBVyxDQUFDLEdBQUcsRUFBRSxDQUFBO1FBQzdCLE1BQU0sUUFBUSxHQUFHLEdBQUcsR0FBRyxLQUFLLENBQUE7UUFFNUIsSUFBSSxDQUFDLElBQUksQ0FBQyxZQUFZLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUM7WUFDakMsSUFBSSxDQUFDLFlBQVksQ0FBQyxHQUFHLENBQUMsSUFBSSxFQUFFLEVBQUUsQ0FBQyxDQUFBO1FBQ2pDLENBQUM7UUFDRCxJQUFJLENBQUMsWUFBWSxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUUsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUE7UUFFM0MsT0FBTyxNQUFNLENBQUE7SUFDZixDQUFDO0lBRUQsUUFBUSxDQUFDLElBQVk7UUFDbkIsTUFBTSxZQUFZLEdBQUcsSUFBSSxDQUFDLFlBQVksQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLElBQUksRUFBRSxDQUFBO1FBQ3RELElBQUksWUFBWSxDQUFDLE1BQU0sS0FBSyxDQUFDO1lBQUUsT0FBTyxJQUFJLENBQUE7UUFFMUMsTUFBTSxHQUFHLEdBQUcsWUFBWSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUE7UUFDbkQsTUFBTSxHQUFHLEdBQUcsR0FBRyxHQUFHLFlBQVksQ0FBQyxNQUFNLENBQUE7UUFDckMsTUFBTSxHQUFHLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxHQUFHLFlBQVksQ0FBQyxDQUFBO1FBQ3JDLE1BQU0sR0FBRyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsR0FBRyxZQUFZLENBQUMsQ0FBQTtRQUVyQyxPQUFPO1lBQ0wsS0FBSyxFQUFFLFlBQVksQ0FBQyxNQUFNO1lBQzFCLEdBQUc7WUFDSCxHQUFHO1lBQ0gsR0FBRztZQUNILEdBQUc7WUFDSCxZQUFZO1NBQ2IsQ0FBQTtJQUNILENBQUM7SUFFRCxLQUFLO1FBQ0gsSUFBSSxDQUFDLFlBQVksQ0FBQyxLQUFLLEVBQUUsQ0FBQTtJQUMzQixDQUFDO0NBQ0Y7QUFyREQsOENBcURDO0FBRUQsK0VBQStFO0FBQy9FLFNBQVM7QUFDVCwrRUFBK0U7QUFFL0UsTUFBYSxnQkFBZ0I7SUFNM0I7UUFMUTs7OzttQkFBZ0IsTUFBTSxDQUFDLEtBQUs7V0FBQTtRQUM1Qjs7OzttQkFBVSxDQUFDO1dBQUE7UUFDWDs7OzttQkFBYyxDQUFDO1dBQUE7UUFDZjs7OzttQkFBVSxLQUFLO1dBQUE7UUFHckIsSUFBSSxDQUFDLGNBQWMsRUFBRSxDQUFBO0lBQ3ZCLENBQUM7SUFFRCxVQUFVLENBQUMsRUFBVTtRQUNuQixJQUFJLENBQUMsT0FBTyxHQUFHLEVBQUUsQ0FBQTtJQUNuQixDQUFDO0lBRUQsY0FBYyxDQUFDLElBQVk7UUFDekIsSUFBSSxDQUFDLFdBQVcsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsRUFBRSxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsRUFBRSxJQUFJLENBQUMsQ0FBQyxDQUFBO0lBQ25ELENBQUM7SUFFRCxVQUFVLENBQUMsT0FBZ0I7UUFDekIsSUFBSSxDQUFDLE9BQU8sR0FBRyxPQUFPLENBQUE7SUFDeEIsQ0FBQztJQUVPLGNBQWM7UUFDcEIsTUFBTSxDQUFDLEtBQUssR0FBRyxJQUFJLENBQUMsRUFBRSxDQUFDLEtBQUssRUFBRSxLQUF3QixFQUFFLElBQWtCLEVBQUUsRUFBRTtZQUM1RSxJQUFJLElBQUksQ0FBQyxPQUFPLEVBQUUsQ0FBQztnQkFDakIsTUFBTSxJQUFJLEtBQUssQ0FBQyxrQkFBa0IsQ0FBQyxDQUFBO1lBQ3JDLENBQUM7WUFFRCxJQUFJLElBQUksQ0FBQyxNQUFNLEVBQUUsR0FBRyxJQUFJLENBQUMsV0FBVyxFQUFFLENBQUM7Z0JBQ3JDLE1BQU0sSUFBSSxLQUFLLENBQUMseUJBQXlCLENBQUMsQ0FBQTtZQUM1QyxDQUFDO1lBRUQsSUFBSSxJQUFJLENBQUMsT0FBTyxHQUFHLENBQUMsRUFBRSxDQUFDO2dCQUNyQixNQUFNLElBQUksT0FBTyxDQUFDLE9BQU8sQ0FBQyxFQUFFLENBQUMsVUFBVSxDQUFDLE9BQU8sRUFBRSxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQTtZQUNqRSxDQUFDO1lBRUQsT0FBTyxJQUFJLENBQUMsYUFBYSxDQUFDLEtBQUssRUFBRSxJQUFJLENBQUMsQ0FBQTtRQUN4QyxDQUFDLENBQVEsQ0FBQTtJQUNYLENBQUM7SUFFRCxPQUFPO1FBQ0wsTUFBTSxDQUFDLEtBQUssR0FBRyxJQUFJLENBQUMsYUFBYSxDQUFBO0lBQ25DLENBQUM7Q0FDRjtBQTNDRCw0Q0EyQ0M7QUFFRCwrRUFBK0U7QUFDL0UsU0FBUztBQUNULCtFQUErRTtBQUUvRSxNQUFhLGNBQWM7SUFDekIsTUFBTSxDQUFDLGtCQUFrQixDQUFDLEtBQWE7UUFDckMsT0FBTztZQUNMLE1BQU0sRUFBRTtnQkFDTixLQUFLO2FBQ047U0FDa0IsQ0FBQTtJQUN2QixDQUFDO0lBRUQsTUFBTSxDQUFDLGlCQUFpQixDQUFDLElBQVM7UUFDaEMsT0FBTztZQUNMLFlBQVksRUFBRTtnQkFDWixPQUFPLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRTtnQkFDbEIsT0FBTyxFQUFFLElBQUksQ0FBQyxFQUFFLENBQUMsR0FBRyxFQUFFLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsQ0FBQztnQkFDNUMsU0FBUyxFQUFFLElBQUksQ0FBQyxFQUFFLEVBQUU7YUFDckI7WUFDRCxjQUFjLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRTtZQUN6QixlQUFlLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRTtTQUNILENBQUE7SUFDM0IsQ0FBQztJQUVELE1BQU0sQ0FBQyxnQkFBZ0IsQ0FBQyxRQUFrQztRQUN4RCxPQUFPO1lBQ0wsT0FBTyxFQUFFLFFBQVEsQ0FBQyxDQUFDO1lBQ25CLE9BQU8sRUFBRSxRQUFRLENBQUMsQ0FBQztZQUNuQixjQUFjLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRTtZQUN6QixlQUFlLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRTtTQUNILENBQUE7SUFDM0IsQ0FBQztJQUVELE1BQU0sQ0FBQyxZQUFZLENBQUMsSUFBUyxFQUFFLFFBQWtDO1FBQy9ELE9BQU87WUFDTCxPQUFPLEVBQUUsUUFBUSxDQUFDLENBQUM7WUFDbkIsT0FBTyxFQUFFLFFBQVEsQ0FBQyxDQUFDO1lBQ25CLFlBQVksRUFBRTtnQkFDWixPQUFPLEVBQUUsSUFBSSxDQUFDLEVBQUUsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxDQUFDO2dCQUM1QyxPQUFPLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRTtnQkFDbEIsU0FBUyxFQUFFLElBQUksQ0FBQyxFQUFFLEVBQUU7YUFDckI7WUFDRCxjQUFjLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRTtZQUN6QixlQUFlLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRTtTQUNILENBQUE7SUFDM0IsQ0FBQztJQUVELE1BQU0sQ0FBQyxxQkFBcUIsQ0FBQyxJQUFZLEVBQUUsR0FBVyxFQUFFLFVBQTZCLEVBQUU7UUFDckYsT0FBTyxJQUFJLGFBQWEsQ0FBQyxJQUFJLEVBQUU7WUFDN0IsR0FBRztZQUNILE9BQU8sRUFBRSxJQUFJO1lBQ2IsVUFBVSxFQUFFLElBQUk7WUFDaEIsR0FBRyxPQUFPO1NBQ1gsQ0FBQyxDQUFBO0lBQ0osQ0FBQztJQUVELE1BQU0sQ0FBQyxrQkFBa0IsQ0FBQyxJQUFZLEVBQUUsVUFBMEIsRUFBRTtRQUNsRSxPQUFPLElBQUksVUFBVSxDQUFDLElBQUksRUFBRTtZQUMxQixPQUFPLEVBQUUsSUFBSTtZQUNiLFVBQVUsRUFBRSxJQUFJO1lBQ2hCLEdBQUcsT0FBTztTQUNYLENBQUMsQ0FBQTtJQUNKLENBQUM7Q0FDRjtBQTVERCx3Q0E0REM7QUFFRCwrRUFBK0U7QUFDL0UsS0FBSztBQUNMLCtFQUErRTtBQUUvRSwwQkFBMEI7QUFDMUIseURBQXNDIiwibmFtZXMiOltdLCJzb3VyY2VzIjpbIkQ6XFxQcm9qZWN0c1xcQ2FyZEV2ZXJ5dGhpbmdcXGNhcmRhbGwtcHJvdG90eXBlXFx0ZXN0c1xcYWR2YW5jZWQtdGVzdC11dGlscy50c3giXSwic291cmNlc0NvbnRlbnQiOlsiLy8g6auY57qn5rWL6K+V5bel5YW3IC0g5YyF5ZCr5a6M5pW055qE5pWw5o2u55Sf5oiQ5Zmo5ZKM5qih5ouf5pyN5YqhXG5pbXBvcnQgeyByZW5kZXIsIFJlbmRlck9wdGlvbnMsIFJlbmRlclJlc3VsdCwgYWN0IH0gZnJvbSAnQHRlc3RpbmctbGlicmFyeS9yZWFjdCdcbmltcG9ydCB7IFJlYWN0RWxlbWVudCB9IGZyb20gJ3JlYWN0J1xuaW1wb3J0IHsgYXhlLCB0b0hhdmVOb1Zpb2xhdGlvbnMgfSBmcm9tICdqZXN0LWF4ZSdcbmltcG9ydCB7IFF1ZXJ5Q2xpZW50LCBRdWVyeUNsaWVudFByb3ZpZGVyIH0gZnJvbSAnQHRhbnN0YWNrL3JlYWN0LXF1ZXJ5J1xuaW1wb3J0IHsgRG5kUHJvdmlkZXIgfSBmcm9tICdyZWFjdC1kbmQnXG5pbXBvcnQgeyBIVE1MNUJhY2tlbmQgfSBmcm9tICdyZWFjdC1kbmQtaHRtbDUtYmFja2VuZCdcbmltcG9ydCB7IFRoZW1lUHJvdmlkZXIgfSBmcm9tICdzdHlsZWQtY29tcG9uZW50cydcbmltcG9ydCB7IFRvYXN0UHJvdmlkZXIgfSBmcm9tICdAL2NvbXBvbmVudHMvdWkvdG9hc3QtcHJvdmlkZXInXG5cbi8vIOaJqeWxlSBKZXN0IOWMuemFjeWZqFxuZXhwZWN0LmV4dGVuZCh0b0hhdmVOb1Zpb2xhdGlvbnMpXG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIOexu+Wei+WumuS5iVxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG5leHBvcnQgaW50ZXJmYWNlIFRlc3RDYXJkRGF0YSB7XG4gIGlkOiBzdHJpbmdcbiAgdGl0bGU6IHN0cmluZ1xuICBmcm9udENvbnRlbnQ6IHtcbiAgICB0aXRsZTogc3RyaW5nXG4gICAgdGV4dDogc3RyaW5nXG4gICAgaW1hZ2VzOiBBcnJheTx7XG4gICAgICBpZDogc3RyaW5nXG4gICAgICB1cmw6IHN0cmluZ1xuICAgICAgYWx0OiBzdHJpbmdcbiAgICAgIHdpZHRoPzogbnVtYmVyXG4gICAgICBoZWlnaHQ/OiBudW1iZXJcbiAgICB9PlxuICAgIHRhZ3M6IHN0cmluZ1tdXG4gICAgbGFzdE1vZGlmaWVkOiBEYXRlXG4gIH1cbiAgYmFja0NvbnRlbnQ6IHtcbiAgICB0aXRsZTogc3RyaW5nXG4gICAgdGV4dDogc3RyaW5nXG4gICAgaW1hZ2VzOiBBcnJheTx7XG4gICAgICBpZDogc3RyaW5nXG4gICAgICB1cmw6IHN0cmluZ1xuICAgICAgYWx0OiBzdHJpbmdcbiAgICAgIHdpZHRoPzogbnVtYmVyXG4gICAgICBoZWlnaHQ/OiBudW1iZXJcbiAgICB9PlxuICAgIHRhZ3M6IHN0cmluZ1tdXG4gICAgbGFzdE1vZGlmaWVkOiBEYXRlXG4gIH1cbiAgc3R5bGU6IHtcbiAgICB0eXBlOiAnc29saWQnIHwgJ2dyYWRpZW50JyB8ICdnbGFzcydcbiAgICBiYWNrZ3JvdW5kQ29sb3I/OiBzdHJpbmdcbiAgICBncmFkaWVudENvbG9ycz86IHN0cmluZ1tdXG4gICAgZm9udEZhbWlseT86IHN0cmluZ1xuICAgIGZvbnRTaXplPzogJ3NtJyB8ICdiYXNlJyB8ICdsZycgfCAneGwnXG4gICAgZm9udFdlaWdodD86ICdub3JtYWwnIHwgJ21lZGl1bScgfCAnc2VtaWJvbGQnIHwgJ2JvbGQnXG4gICAgdGV4dENvbG9yPzogc3RyaW5nXG4gICAgYm9yZGVyUmFkaXVzPzogJ3NtJyB8ICdtZCcgfCAnbGcnIHwgJ3hsJyB8ICcyeGwnIHwgJzN4bCdcbiAgICBzaGFkb3c/OiAnbm9uZScgfCAnc20nIHwgJ21kJyB8ICdsZycgfCAneGwnIHwgJzJ4bCcgfCAnZ2xhc3MnXG4gICAgYm9yZGVyV2lkdGg/OiBudW1iZXJcbiAgICBib3JkZXJDb2xvcj86IHN0cmluZ1xuICB9XG4gIGlzRmxpcHBlZDogYm9vbGVhblxuICBjcmVhdGVkQXQ6IERhdGVcbiAgdXBkYXRlZEF0OiBEYXRlXG4gIGZvbGRlcklkPzogc3RyaW5nXG4gIGlzU2VsZWN0ZWQ/OiBib29sZWFuXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgVGVzdEZvbGRlckRhdGEge1xuICBpZDogc3RyaW5nXG4gIG5hbWU6IHN0cmluZ1xuICBjb2xvcjogc3RyaW5nXG4gIGljb24/OiBzdHJpbmdcbiAgY2FyZElkczogc3RyaW5nW11cbiAgcGFyZW50SWQ/OiBzdHJpbmdcbiAgaXNFeHBhbmRlZD86IGJvb2xlYW5cbiAgY3JlYXRlZEF0OiBEYXRlXG4gIHVwZGF0ZWRBdDogRGF0ZVxufVxuXG5leHBvcnQgaW50ZXJmYWNlIFRlc3RUYWdEYXRhIHtcbiAgaWQ6IHN0cmluZ1xuICBuYW1lOiBzdHJpbmdcbiAgY29sb3I6IHN0cmluZ1xuICBjb3VudDogbnVtYmVyXG4gIGlzSGlkZGVuPzogYm9vbGVhblxuICBjcmVhdGVkQXQ6IERhdGVcbn1cblxuZXhwb3J0IGludGVyZmFjZSBUZXN0U3luY09wZXJhdGlvbiB7XG4gIGlkOiBzdHJpbmdcbiAgdHlwZTogJ2NyZWF0ZScgfCAndXBkYXRlJyB8ICdkZWxldGUnXG4gIGVudGl0eTogJ2NhcmQnIHwgJ2ZvbGRlcicgfCAndGFnJyB8ICdpbWFnZSdcbiAgZW50aXR5SWQ6IHN0cmluZ1xuICB1c2VySWQ/OiBzdHJpbmdcbiAgZGF0YTogYW55XG4gIHByaW9yaXR5OiAnaGlnaCcgfCAnbm9ybWFsJyB8ICdsb3cnXG4gIHRpbWVzdGFtcDogRGF0ZVxuICByZXRyeUNvdW50OiBudW1iZXJcbiAgbWF4UmV0cmllczogbnVtYmVyXG4gIHN0YXR1czogJ3BlbmRpbmcnIHwgJ3Byb2Nlc3NpbmcnIHwgJ2NvbXBsZXRlZCcgfCAnZmFpbGVkJyB8ICdyZXRyeWluZydcbiAgZXJyb3I/OiBzdHJpbmdcbiAgZGVwZW5kZW5jaWVzPzogc3RyaW5nW11cbn1cblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8g5qih5ouf5pyN5YqhXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbmV4cG9ydCBjbGFzcyBNb2NrU3VwYWJhc2VDbGllbnQge1xuICBwcml2YXRlIGRhdGEgPSB7XG4gICAgY2FyZHM6IG5ldyBNYXA8c3RyaW5nLCBUZXN0Q2FyZERhdGE+KCksXG4gICAgZm9sZGVyczogbmV3IE1hcDxzdHJpbmcsIFRlc3RGb2xkZXJEYXRhPigpLFxuICAgIHRhZ3M6IG5ldyBNYXA8c3RyaW5nLCBUZXN0VGFnRGF0YT4oKSxcbiAgICBzeW5jT3BlcmF0aW9uczogbmV3IE1hcDxzdHJpbmcsIFRlc3RTeW5jT3BlcmF0aW9uPigpLFxuICB9XG5cbiAgLy8g5Y2h54mH5pON5L2cXG4gIGNhcmRzID0ge1xuICAgIHNlbGVjdDogamVzdC5mbigoKSA9PiAoe1xuICAgICAgZXE6IGplc3QuZm4oKCkgPT4gKHtcbiAgICAgICAgb3JkZXI6IGplc3QuZm4oKCkgPT4gKHtcbiAgICAgICAgICBkYXRhOiBBcnJheS5mcm9tKHRoaXMuZGF0YS5jYXJkcy52YWx1ZXMoKSksXG4gICAgICAgICAgZXJyb3I6IG51bGwsXG4gICAgICAgIH0pKSxcbiAgICAgIH0pKSxcbiAgICAgIGluOiBqZXN0LmZuKCgpID0+ICh7XG4gICAgICAgIGRhdGE6IEFycmF5LmZyb20odGhpcy5kYXRhLmNhcmRzLnZhbHVlcygpKSxcbiAgICAgICAgZXJyb3I6IG51bGwsXG4gICAgICB9KSksXG4gICAgfSkpLFxuICAgIGluc2VydDogamVzdC5mbigoY2FyZDogUGFydGlhbDxUZXN0Q2FyZERhdGE+KSA9PiB7XG4gICAgICBjb25zdCBuZXdDYXJkOiBUZXN0Q2FyZERhdGEgPSB7XG4gICAgICAgIGlkOiBjcnlwdG8ucmFuZG9tVVVJRCgpLFxuICAgICAgICBmcm9udENvbnRlbnQ6IGNhcmQuZnJvbnRDb250ZW50IHx8IHtcbiAgICAgICAgICB0aXRsZTogJycsXG4gICAgICAgICAgdGV4dDogJycsXG4gICAgICAgICAgaW1hZ2VzOiBbXSxcbiAgICAgICAgICB0YWdzOiBbXSxcbiAgICAgICAgICBsYXN0TW9kaWZpZWQ6IG5ldyBEYXRlKCksXG4gICAgICAgIH0sXG4gICAgICAgIGJhY2tDb250ZW50OiBjYXJkLmJhY2tDb250ZW50IHx8IHtcbiAgICAgICAgICB0aXRsZTogJycsXG4gICAgICAgICAgdGV4dDogJycsXG4gICAgICAgICAgaW1hZ2VzOiBbXSxcbiAgICAgICAgICB0YWdzOiBbXSxcbiAgICAgICAgICBsYXN0TW9kaWZpZWQ6IG5ldyBEYXRlKCksXG4gICAgICAgIH0sXG4gICAgICAgIHN0eWxlOiBjYXJkLnN0eWxlIHx8IHtcbiAgICAgICAgICB0eXBlOiAnc29saWQnLFxuICAgICAgICAgIGJhY2tncm91bmRDb2xvcjogJyNmZmZmZmYnLFxuICAgICAgICAgIGZvbnRGYW1pbHk6ICdzeXN0ZW0tdWknLFxuICAgICAgICAgIGZvbnRTaXplOiAnYmFzZScsXG4gICAgICAgICAgZm9udFdlaWdodDogJ25vcm1hbCcsXG4gICAgICAgICAgdGV4dENvbG9yOiAnIzFmMjkzNycsXG4gICAgICAgICAgYm9yZGVyUmFkaXVzOiAneGwnLFxuICAgICAgICAgIHNoYWRvdzogJ21kJyxcbiAgICAgICAgICBib3JkZXJXaWR0aDogMCxcbiAgICAgICAgfSxcbiAgICAgICAgaXNGbGlwcGVkOiBjYXJkLmlzRmxpcHBlZCB8fCBmYWxzZSxcbiAgICAgICAgY3JlYXRlZEF0OiBuZXcgRGF0ZSgpLFxuICAgICAgICB1cGRhdGVkQXQ6IG5ldyBEYXRlKCksXG4gICAgICAgIC4uLmNhcmQsXG4gICAgICB9IGFzIFRlc3RDYXJkRGF0YVxuICAgICAgXG4gICAgICB0aGlzLmRhdGEuY2FyZHMuc2V0KG5ld0NhcmQuaWQsIG5ld0NhcmQpXG4gICAgICBcbiAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoe1xuICAgICAgICBkYXRhOiBbbmV3Q2FyZF0sXG4gICAgICAgIGVycm9yOiBudWxsLFxuICAgICAgfSlcbiAgICB9KSxcbiAgICB1cGRhdGU6IGplc3QuZm4oKGlkOiBzdHJpbmcsIHVwZGF0ZXM6IFBhcnRpYWw8VGVzdENhcmREYXRhPikgPT4ge1xuICAgICAgY29uc3QgY2FyZCA9IHRoaXMuZGF0YS5jYXJkcy5nZXQoaWQpXG4gICAgICBpZiAoY2FyZCkge1xuICAgICAgICBjb25zdCB1cGRhdGVkQ2FyZCA9IHsgLi4uY2FyZCwgLi4udXBkYXRlcywgdXBkYXRlZEF0OiBuZXcgRGF0ZSgpIH1cbiAgICAgICAgdGhpcy5kYXRhLmNhcmRzLnNldChpZCwgdXBkYXRlZENhcmQpXG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoe1xuICAgICAgICAgIGRhdGE6IFt1cGRhdGVkQ2FyZF0sXG4gICAgICAgICAgZXJyb3I6IG51bGwsXG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHtcbiAgICAgICAgZGF0YTogbnVsbCxcbiAgICAgICAgZXJyb3I6IHsgbWVzc2FnZTogJ0NhcmQgbm90IGZvdW5kJyB9LFxuICAgICAgfSlcbiAgICB9KSxcbiAgICBkZWxldGU6IGplc3QuZm4oKGlkOiBzdHJpbmcpID0+IHtcbiAgICAgIGNvbnN0IGRlbGV0ZWQgPSB0aGlzLmRhdGEuY2FyZHMuZGVsZXRlKGlkKVxuICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh7XG4gICAgICAgIGRhdGE6IG51bGwsXG4gICAgICAgIGVycm9yOiBkZWxldGVkID8gbnVsbCA6IHsgbWVzc2FnZTogJ0NhcmQgbm90IGZvdW5kJyB9LFxuICAgICAgfSlcbiAgICB9KSxcbiAgfVxuXG4gIC8vIOaWh+S7tuWkueaTjeS9nFxuICBmb2xkZXJzID0ge1xuICAgIHNlbGVjdDogamVzdC5mbigoKSA9PiAoe1xuICAgICAgZXE6IGplc3QuZm4oKCkgPT4gKHtcbiAgICAgICAgZGF0YTogQXJyYXkuZnJvbSh0aGlzLmRhdGEuZm9sZGVycy52YWx1ZXMoKSksXG4gICAgICAgIGVycm9yOiBudWxsLFxuICAgICAgfSkpLFxuICAgIH0pKSxcbiAgICBpbnNlcnQ6IGplc3QuZm4oKGZvbGRlcjogUGFydGlhbDxUZXN0Rm9sZGVyRGF0YT4pID0+IHtcbiAgICAgIGNvbnN0IG5ld0ZvbGRlcjogVGVzdEZvbGRlckRhdGEgPSB7XG4gICAgICAgIGlkOiBjcnlwdG8ucmFuZG9tVVVJRCgpLFxuICAgICAgICBuYW1lOiBmb2xkZXIubmFtZSB8fCAnJyxcbiAgICAgICAgY29sb3I6IGZvbGRlci5jb2xvciB8fCAnIzNiODJmNicsXG4gICAgICAgIGNhcmRJZHM6IGZvbGRlci5jYXJkSWRzIHx8IFtdLFxuICAgICAgICBjcmVhdGVkQXQ6IG5ldyBEYXRlKCksXG4gICAgICAgIHVwZGF0ZWRBdDogbmV3IERhdGUoKSxcbiAgICAgICAgLi4uZm9sZGVyLFxuICAgICAgfSBhcyBUZXN0Rm9sZGVyRGF0YVxuICAgICAgXG4gICAgICB0aGlzLmRhdGEuZm9sZGVycy5zZXQobmV3Rm9sZGVyLmlkLCBuZXdGb2xkZXIpXG4gICAgICBcbiAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoe1xuICAgICAgICBkYXRhOiBbbmV3Rm9sZGVyXSxcbiAgICAgICAgZXJyb3I6IG51bGwsXG4gICAgICB9KVxuICAgIH0pLFxuICB9XG5cbiAgLy8g5qCH562+5pON5L2cXG4gIHRhZ3MgPSB7XG4gICAgc2VsZWN0OiBqZXN0LmZuKCgpID0+ICh7XG4gICAgICBkYXRhOiBBcnJheS5mcm9tKHRoaXMuZGF0YS50YWdzLnZhbHVlcygpKSxcbiAgICAgIGVycm9yOiBudWxsLFxuICAgIH0pKSxcbiAgICBpbnNlcnQ6IGplc3QuZm4oKHRhZzogUGFydGlhbDxUZXN0VGFnRGF0YT4pID0+IHtcbiAgICAgIGNvbnN0IG5ld1RhZzogVGVzdFRhZ0RhdGEgPSB7XG4gICAgICAgIGlkOiBjcnlwdG8ucmFuZG9tVVVJRCgpLFxuICAgICAgICBuYW1lOiB0YWcubmFtZSB8fCAnJyxcbiAgICAgICAgY29sb3I6IHRhZy5jb2xvciB8fCAnIzNiODJmNicsXG4gICAgICAgIGNvdW50OiB0YWcuY291bnQgfHwgMCxcbiAgICAgICAgY3JlYXRlZEF0OiBuZXcgRGF0ZSgpLFxuICAgICAgICAuLi50YWcsXG4gICAgICB9IGFzIFRlc3RUYWdEYXRhXG4gICAgICBcbiAgICAgIHRoaXMuZGF0YS50YWdzLnNldChuZXdUYWcuaWQsIG5ld1RhZylcbiAgICAgIFxuICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh7XG4gICAgICAgIGRhdGE6IFtuZXdUYWddLFxuICAgICAgICBlcnJvcjogbnVsbCxcbiAgICAgIH0pXG4gICAgfSksXG4gIH1cblxuICAvLyDph43nva7mqKHmi5/mlbDmja5cbiAgcmVzZXQgPSAoKSA9PiB7XG4gICAgdGhpcy5kYXRhLmNhcmRzLmNsZWFyKClcbiAgICB0aGlzLmRhdGEuZm9sZGVycy5jbGVhcigpXG4gICAgdGhpcy5kYXRhLnRhZ3MuY2xlYXIoKVxuICAgIHRoaXMuZGF0YS5zeW5jT3BlcmF0aW9ucy5jbGVhcigpXG4gIH1cblxuICAvLyDojrflj5blvZPliY3mlbDmja7nirbmgIFcbiAgZ2V0RGF0YSA9ICgpID0+ICh7XG4gICAgY2FyZHM6IEFycmF5LmZyb20odGhpcy5kYXRhLmNhcmRzLnZhbHVlcygpKSxcbiAgICBmb2xkZXJzOiBBcnJheS5mcm9tKHRoaXMuZGF0YS5mb2xkZXJzLnZhbHVlcygpKSxcbiAgICB0YWdzOiBBcnJheS5mcm9tKHRoaXMuZGF0YS50YWdzLnZhbHVlcygpKSxcbiAgICBzeW5jT3BlcmF0aW9uczogQXJyYXkuZnJvbSh0aGlzLmRhdGEuc3luY09wZXJhdGlvbnMudmFsdWVzKCkpLFxuICB9KVxufVxuXG5leHBvcnQgY2xhc3MgTW9ja0luZGV4ZWREQiB7XG4gIHByaXZhdGUgc3RvcmVzID0gbmV3IE1hcDxzdHJpbmcsIE1hcDxzdHJpbmcsIGFueT4+KClcblxuICBjb25zdHJ1Y3RvcigpIHtcbiAgICAvLyDliJ3lp4vljJblrZjlgqjooahcbiAgICB0aGlzLnN0b3Jlcy5zZXQoJ2NhcmRzJywgbmV3IE1hcCgpKVxuICAgIHRoaXMuc3RvcmVzLnNldCgnZm9sZGVycycsIG5ldyBNYXAoKSlcbiAgICB0aGlzLnN0b3Jlcy5zZXQoJ3RhZ3MnLCBuZXcgTWFwKCkpXG4gICAgdGhpcy5zdG9yZXMuc2V0KCdzeW5jUXVldWUnLCBuZXcgTWFwKCkpXG4gIH1cblxuICAvLyDmqKHmi58gRGV4aWUg6aOO5qC855qE5pON5L2cXG4gIHRhYmxlKG5hbWU6IHN0cmluZykge1xuICAgIHJldHVybiB7XG4gICAgICBhZGQ6IGplc3QuZm4oKGRhdGE6IGFueSkgPT4ge1xuICAgICAgICBjb25zdCBzdG9yZSA9IHRoaXMuc3RvcmVzLmdldChuYW1lKVxuICAgICAgICBpZiAoc3RvcmUpIHtcbiAgICAgICAgICBjb25zdCBpZCA9IGRhdGEuaWQgfHwgY3J5cHRvLnJhbmRvbVVVSUQoKVxuICAgICAgICAgIHN0b3JlLnNldChpZCwgeyAuLi5kYXRhLCBpZCB9KVxuICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoaWQpXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyBFcnJvcihgVGFibGUgJHtuYW1lfSBub3QgZm91bmRgKSlcbiAgICAgIH0pLFxuICAgICAgYnVsa0FkZDogamVzdC5mbigoaXRlbXM6IGFueVtdKSA9PiB7XG4gICAgICAgIGNvbnN0IHN0b3JlID0gdGhpcy5zdG9yZXMuZ2V0KG5hbWUpXG4gICAgICAgIGlmIChzdG9yZSkge1xuICAgICAgICAgIGNvbnN0IGlkcyA9IGl0ZW1zLm1hcChpdGVtID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGlkID0gaXRlbS5pZCB8fCBjcnlwdG8ucmFuZG9tVVVJRCgpXG4gICAgICAgICAgICBzdG9yZS5zZXQoaWQsIHsgLi4uaXRlbSwgaWQgfSlcbiAgICAgICAgICAgIHJldHVybiBpZFxuICAgICAgICAgIH0pXG4gICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShpZHMpXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyBFcnJvcihgVGFibGUgJHtuYW1lfSBub3QgZm91bmRgKSlcbiAgICAgIH0pLFxuICAgICAgZ2V0OiBqZXN0LmZuKChpZDogc3RyaW5nKSA9PiB7XG4gICAgICAgIGNvbnN0IHN0b3JlID0gdGhpcy5zdG9yZXMuZ2V0KG5hbWUpXG4gICAgICAgIGlmIChzdG9yZSkge1xuICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoc3RvcmUuZ2V0KGlkKSB8fCB1bmRlZmluZWQpXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh1bmRlZmluZWQpXG4gICAgICB9KSxcbiAgICAgIHdoZXJlOiBqZXN0LmZuKChrZXk6IHN0cmluZykgPT4gKHtcbiAgICAgICAgZXF1YWxzOiBqZXN0LmZuKCh2YWx1ZTogYW55KSA9PiAoe1xuICAgICAgICAgIHRvQXJyYXk6IGplc3QuZm4oKCkgPT4ge1xuICAgICAgICAgICAgY29uc3Qgc3RvcmUgPSB0aGlzLnN0b3Jlcy5nZXQobmFtZSlcbiAgICAgICAgICAgIGlmIChzdG9yZSkge1xuICAgICAgICAgICAgICBjb25zdCByZXN1bHRzID0gQXJyYXkuZnJvbShzdG9yZS52YWx1ZXMoKSkuZmlsdGVyKGl0ZW0gPT4gaXRlbVtrZXldID09PSB2YWx1ZSlcbiAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShyZXN1bHRzKVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShbXSlcbiAgICAgICAgICB9KSxcbiAgICAgICAgICBkZWxldGU6IGplc3QuZm4oKCkgPT4ge1xuICAgICAgICAgICAgY29uc3Qgc3RvcmUgPSB0aGlzLnN0b3Jlcy5nZXQobmFtZSlcbiAgICAgICAgICAgIGlmIChzdG9yZSkge1xuICAgICAgICAgICAgICBjb25zdCB0b0RlbGV0ZSA9IEFycmF5LmZyb20oc3RvcmUuZW50cmllcygpKS5maWx0ZXIoKFtfLCBpdGVtXSkgPT4gaXRlbVtrZXldID09PSB2YWx1ZSlcbiAgICAgICAgICAgICAgdG9EZWxldGUuZm9yRWFjaCgoW2lkXSkgPT4gc3RvcmUuZGVsZXRlKGlkKSlcbiAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh0b0RlbGV0ZS5sZW5ndGgpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKDApXG4gICAgICAgICAgfSksXG4gICAgICAgICAgbW9kaWZ5OiBqZXN0LmZuKCh1cGRhdGVzOiBhbnkpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHN0b3JlID0gdGhpcy5zdG9yZXMuZ2V0KG5hbWUpXG4gICAgICAgICAgICBpZiAoc3RvcmUpIHtcbiAgICAgICAgICAgICAgY29uc3QgdG9Nb2RpZnkgPSBBcnJheS5mcm9tKHN0b3JlLmVudHJpZXMoKSkuZmlsdGVyKChbXywgaXRlbV0pID0+IGl0ZW1ba2V5XSA9PT0gdmFsdWUpXG4gICAgICAgICAgICAgIHRvTW9kaWZ5LmZvckVhY2goKFtpZCwgaXRlbV0pID0+IHtcbiAgICAgICAgICAgICAgICBzdG9yZS5zZXQoaWQsIHsgLi4uaXRlbSwgLi4udXBkYXRlcyB9KVxuICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHRvTW9kaWZ5Lmxlbmd0aClcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoMClcbiAgICAgICAgICB9KSxcbiAgICAgICAgfSkpLFxuICAgICAgICBhbnlPZjogamVzdC5mbigodmFsdWVzOiBhbnlbXSkgPT4gKHtcbiAgICAgICAgICB0b0FycmF5OiBqZXN0LmZuKCgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHN0b3JlID0gdGhpcy5zdG9yZXMuZ2V0KG5hbWUpXG4gICAgICAgICAgICBpZiAoc3RvcmUpIHtcbiAgICAgICAgICAgICAgY29uc3QgcmVzdWx0cyA9IEFycmF5LmZyb20oc3RvcmUudmFsdWVzKCkpLmZpbHRlcihpdGVtID0+IHZhbHVlcy5pbmNsdWRlcyhpdGVtW2tleV0pKVxuICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHJlc3VsdHMpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKFtdKVxuICAgICAgICAgIH0pLFxuICAgICAgICB9KSksXG4gICAgICB9KSksXG4gICAgICB0b0FycmF5OiBqZXN0LmZuKCgpID0+IHtcbiAgICAgICAgY29uc3Qgc3RvcmUgPSB0aGlzLnN0b3Jlcy5nZXQobmFtZSlcbiAgICAgICAgaWYgKHN0b3JlKSB7XG4gICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShBcnJheS5mcm9tKHN0b3JlLnZhbHVlcygpKSlcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKFtdKVxuICAgICAgfSksXG4gICAgICBkZWxldGU6IGplc3QuZm4oKGlkOiBzdHJpbmcpID0+IHtcbiAgICAgICAgY29uc3Qgc3RvcmUgPSB0aGlzLnN0b3Jlcy5nZXQobmFtZSlcbiAgICAgICAgaWYgKHN0b3JlKSB7XG4gICAgICAgICAgY29uc3QgZGVsZXRlZCA9IHN0b3JlLmRlbGV0ZShpZClcbiAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKGRlbGV0ZWQgPyAxIDogMClcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKDApXG4gICAgICB9KSxcbiAgICAgIGNsZWFyOiBqZXN0LmZuKCgpID0+IHtcbiAgICAgICAgY29uc3Qgc3RvcmUgPSB0aGlzLnN0b3Jlcy5nZXQobmFtZSlcbiAgICAgICAgaWYgKHN0b3JlKSB7XG4gICAgICAgICAgc3RvcmUuY2xlYXIoKVxuICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChuZXcgRXJyb3IoYFRhYmxlICR7bmFtZX0gbm90IGZvdW5kYCkpXG4gICAgICB9KSxcbiAgICB9XG4gIH1cblxuICAvLyDph43nva7mlbDmja7lupNcbiAgcmVzZXQgPSAoKSA9PiB7XG4gICAgdGhpcy5zdG9yZXMuZm9yRWFjaChzdG9yZSA9PiBzdG9yZS5jbGVhcigpKVxuICB9XG5cbiAgLy8g6I635Y+W5a2Y5YKo5pWw5o2uXG4gIGdldFN0b3JlRGF0YSA9IChuYW1lOiBzdHJpbmcpID0+IHtcbiAgICBjb25zdCBzdG9yZSA9IHRoaXMuc3RvcmVzLmdldChuYW1lKVxuICAgIHJldHVybiBzdG9yZSA/IEFycmF5LmZyb20oc3RvcmUudmFsdWVzKCkpIDogW11cbiAgfVxufVxuXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyDmlbDmja7nlJ/miJDlmahcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuZXhwb3J0IGNsYXNzIFRlc3REYXRhR2VuZXJhdG9yIHtcbiAgcHJpdmF0ZSBzdGF0aWMgaWRDb3VudGVyID0gMVxuXG4gIHN0YXRpYyBnZW5lcmF0ZUlkKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIGB0ZXN0LWlkLSR7dGhpcy5pZENvdW50ZXIrK31gXG4gIH1cblxuICBzdGF0aWMgZ2VuZXJhdGVDYXJkKG92ZXJyaWRlczogUGFydGlhbDxUZXN0Q2FyZERhdGE+ID0ge30pOiBUZXN0Q2FyZERhdGEge1xuICAgIGNvbnN0IGlkID0gb3ZlcnJpZGVzLmlkIHx8IHRoaXMuZ2VuZXJhdGVJZCgpXG4gICAgcmV0dXJuIHtcbiAgICAgIGlkLFxuICAgICAgZnJvbnRDb250ZW50OiB7XG4gICAgICAgIHRpdGxlOiBgVGVzdCBDYXJkICR7aWR9YCxcbiAgICAgICAgdGV4dDogJ1RoaXMgaXMgYSB0ZXN0IGNhcmQgY29udGVudCBmb3IgdGVzdGluZyBwdXJwb3Nlcy4nLFxuICAgICAgICBpbWFnZXM6IFtdLFxuICAgICAgICB0YWdzOiBbJ3Rlc3QnXSxcbiAgICAgICAgbGFzdE1vZGlmaWVkOiBuZXcgRGF0ZSgpLFxuICAgICAgfSxcbiAgICAgIGJhY2tDb250ZW50OiB7XG4gICAgICAgIHRpdGxlOiBgQmFjayBvZiBDYXJkICR7aWR9YCxcbiAgICAgICAgdGV4dDogJ1RoaXMgaXMgdGhlIGJhY2sgY29udGVudCBvZiB0aGUgdGVzdCBjYXJkLicsXG4gICAgICAgIGltYWdlczogW10sXG4gICAgICAgIHRhZ3M6IFtdLFxuICAgICAgICBsYXN0TW9kaWZpZWQ6IG5ldyBEYXRlKCksXG4gICAgICB9LFxuICAgICAgc3R5bGU6IHtcbiAgICAgICAgdHlwZTogJ3NvbGlkJyxcbiAgICAgICAgYmFja2dyb3VuZENvbG9yOiAnI2ZmZmZmZicsXG4gICAgICAgIGZvbnRGYW1pbHk6ICdzeXN0ZW0tdWknLFxuICAgICAgICBmb250U2l6ZTogJ2Jhc2UnLFxuICAgICAgICBmb250V2VpZ2h0OiAnbm9ybWFsJyxcbiAgICAgICAgdGV4dENvbG9yOiAnIzFmMjkzNycsXG4gICAgICAgIGJvcmRlclJhZGl1czogJ3hsJyxcbiAgICAgICAgc2hhZG93OiAnbWQnLFxuICAgICAgICBib3JkZXJXaWR0aDogMCxcbiAgICAgIH0sXG4gICAgICBpc0ZsaXBwZWQ6IGZhbHNlLFxuICAgICAgY3JlYXRlZEF0OiBuZXcgRGF0ZSgpLFxuICAgICAgdXBkYXRlZEF0OiBuZXcgRGF0ZSgpLFxuICAgICAgLi4ub3ZlcnJpZGVzLFxuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBnZW5lcmF0ZUZvbGRlcihvdmVycmlkZXM6IFBhcnRpYWw8VGVzdEZvbGRlckRhdGE+ID0ge30pOiBUZXN0Rm9sZGVyRGF0YSB7XG4gICAgY29uc3QgaWQgPSBvdmVycmlkZXMuaWQgfHwgdGhpcy5nZW5lcmF0ZUlkKClcbiAgICByZXR1cm4ge1xuICAgICAgaWQsXG4gICAgICBuYW1lOiBgVGVzdCBGb2xkZXIgJHtpZH1gLFxuICAgICAgY29sb3I6ICcjM2I4MmY2JyxcbiAgICAgIGNhcmRJZHM6IFtdLFxuICAgICAgY3JlYXRlZEF0OiBuZXcgRGF0ZSgpLFxuICAgICAgdXBkYXRlZEF0OiBuZXcgRGF0ZSgpLFxuICAgICAgLi4ub3ZlcnJpZGVzLFxuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBnZW5lcmF0ZVRhZyhvdmVycmlkZXM6IFBhcnRpYWw8VGVzdFRhZ0RhdGE+ID0ge30pOiBUZXN0VGFnRGF0YSB7XG4gICAgY29uc3QgaWQgPSBvdmVycmlkZXMuaWQgfHwgdGhpcy5nZW5lcmF0ZUlkKClcbiAgICByZXR1cm4ge1xuICAgICAgaWQsXG4gICAgICBuYW1lOiBgVGVzdCBUYWcgJHtpZH1gLFxuICAgICAgY29sb3I6ICcjM2I4MmY2JyxcbiAgICAgIGNvdW50OiAwLFxuICAgICAgY3JlYXRlZEF0OiBuZXcgRGF0ZSgpLFxuICAgICAgLi4ub3ZlcnJpZGVzLFxuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBnZW5lcmF0ZVN5bmNPcGVyYXRpb24ob3ZlcnJpZGVzOiBQYXJ0aWFsPFRlc3RTeW5jT3BlcmF0aW9uPiA9IHt9KTogVGVzdFN5bmNPcGVyYXRpb24ge1xuICAgIHJldHVybiB7XG4gICAgICBpZDogdGhpcy5nZW5lcmF0ZUlkKCksXG4gICAgICB0eXBlOiAnY3JlYXRlJyxcbiAgICAgIGVudGl0eTogJ2NhcmQnLFxuICAgICAgZW50aXR5SWQ6IHRoaXMuZ2VuZXJhdGVJZCgpLFxuICAgICAgZGF0YToge30sXG4gICAgICBwcmlvcml0eTogJ25vcm1hbCcsXG4gICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCksXG4gICAgICByZXRyeUNvdW50OiAwLFxuICAgICAgbWF4UmV0cmllczogMyxcbiAgICAgIHN0YXR1czogJ3BlbmRpbmcnLFxuICAgICAgLi4ub3ZlcnJpZGVzLFxuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBnZW5lcmF0ZUNhcmRMaXN0KGNvdW50OiBudW1iZXIsIG92ZXJyaWRlcz86IFBhcnRpYWw8VGVzdENhcmREYXRhPik6IFRlc3RDYXJkRGF0YVtdIHtcbiAgICByZXR1cm4gQXJyYXkuZnJvbSh7IGxlbmd0aDogY291bnQgfSwgKF8sIGkpID0+IFxuICAgICAgdGhpcy5nZW5lcmF0ZUNhcmQoeyAuLi5vdmVycmlkZXMsIGlkOiBgY2FyZC0ke2kgKyAxfWAgfSlcbiAgICApXG4gIH1cblxuICBzdGF0aWMgZ2VuZXJhdGVGb2xkZXJMaXN0KGNvdW50OiBudW1iZXIsIG92ZXJyaWRlcz86IFBhcnRpYWw8VGVzdEZvbGRlckRhdGE+KTogVGVzdEZvbGRlckRhdGFbXSB7XG4gICAgcmV0dXJuIEFycmF5LmZyb20oeyBsZW5ndGg6IGNvdW50IH0sIChfLCBpKSA9PiBcbiAgICAgIHRoaXMuZ2VuZXJhdGVGb2xkZXIoeyAuLi5vdmVycmlkZXMsIGlkOiBgZm9sZGVyLSR7aSArIDF9YCB9KVxuICAgIClcbiAgfVxuXG4gIHN0YXRpYyBnZW5lcmF0ZVRhZ0xpc3QoY291bnQ6IG51bWJlciwgb3ZlcnJpZGVzPzogUGFydGlhbDxUZXN0VGFnRGF0YT4pOiBUZXN0VGFnRGF0YVtdIHtcbiAgICByZXR1cm4gQXJyYXkuZnJvbSh7IGxlbmd0aDogY291bnQgfSwgKF8sIGkpID0+IFxuICAgICAgdGhpcy5nZW5lcmF0ZVRhZyh7IC4uLm92ZXJyaWRlcywgaWQ6IGB0YWctJHtpICsgMX1gIH0pXG4gICAgKVxuICB9XG59XG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIOiHquWumuS5iea4suafk+WZqFxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG5jb25zdCBjcmVhdGVUZXN0UXVlcnlDbGllbnQgPSAoKSA9PiBuZXcgUXVlcnlDbGllbnQoe1xuICBkZWZhdWx0T3B0aW9uczoge1xuICAgIHF1ZXJpZXM6IHtcbiAgICAgIHJldHJ5OiBmYWxzZSxcbiAgICAgIGNhY2hlVGltZTogMCxcbiAgICB9LFxuICB9LFxufSlcblxuY29uc3QgQWxsVGhlUHJvdmlkZXJzID0gKHsgY2hpbGRyZW4gfTogeyBjaGlsZHJlbjogUmVhY3QuUmVhY3ROb2RlIH0pID0+IHtcbiAgY29uc3QgcXVlcnlDbGllbnQgPSBjcmVhdGVUZXN0UXVlcnlDbGllbnQoKVxuICBcbiAgcmV0dXJuIChcbiAgICA8UXVlcnlDbGllbnRQcm92aWRlciBjbGllbnQ9e3F1ZXJ5Q2xpZW50fT5cbiAgICAgIDxEbmRQcm92aWRlciBiYWNrZW5kPXtIVE1MNUJhY2tlbmR9PlxuICAgICAgICA8VGhlbWVQcm92aWRlciB0aGVtZT17eyBtb2RlOiAnbGlnaHQnIH19PlxuICAgICAgICAgIDxUb2FzdFByb3ZpZGVyPlxuICAgICAgICAgICAge2NoaWxkcmVufVxuICAgICAgICAgIDwvVG9hc3RQcm92aWRlcj5cbiAgICAgICAgPC9UaGVtZVByb3ZpZGVyPlxuICAgICAgPC9EbmRQcm92aWRlcj5cbiAgICA8L1F1ZXJ5Q2xpZW50UHJvdmlkZXI+XG4gIClcbn1cblxuY29uc3QgY3VzdG9tUmVuZGVyID0gKFxuICB1aTogUmVhY3RFbGVtZW50LFxuICBvcHRpb25zPzogT21pdDxSZW5kZXJPcHRpb25zLCAnd3JhcHBlcic+XG4pOiBSZW5kZXJSZXN1bHQgPT4ge1xuICByZXR1cm4gcmVuZGVyKHVpLCB7IHdyYXBwZXI6IEFsbFRoZVByb3ZpZGVycywgLi4ub3B0aW9ucyB9KVxufVxuXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyDmgKfog73mtYvor5Xlt6Xlhbdcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuZXhwb3J0IGNsYXNzIFBlcmZvcm1hbmNlVGVzdGVyIHtcbiAgcHJpdmF0ZSBtZWFzdXJlbWVudHMgPSBuZXcgTWFwPHN0cmluZywgbnVtYmVyW10+KClcblxuICBhc3luYyBtZWFzdXJlPFQ+KG5hbWU6IHN0cmluZywgZm46ICgpID0+IFByb21pc2U8VD4pOiBQcm9taXNlPFQ+IHtcbiAgICBjb25zdCBzdGFydCA9IHBlcmZvcm1hbmNlLm5vdygpXG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZm4oKVxuICAgIGNvbnN0IGVuZCA9IHBlcmZvcm1hbmNlLm5vdygpXG4gICAgY29uc3QgZHVyYXRpb24gPSBlbmQgLSBzdGFydFxuXG4gICAgaWYgKCF0aGlzLm1lYXN1cmVtZW50cy5oYXMobmFtZSkpIHtcbiAgICAgIHRoaXMubWVhc3VyZW1lbnRzLnNldChuYW1lLCBbXSlcbiAgICB9XG4gICAgdGhpcy5tZWFzdXJlbWVudHMuZ2V0KG5hbWUpIS5wdXNoKGR1cmF0aW9uKVxuXG4gICAgcmV0dXJuIHJlc3VsdFxuICB9XG5cbiAgbWVhc3VyZVN5bmM8VD4obmFtZTogc3RyaW5nLCBmbjogKCkgPT4gVCk6IFQge1xuICAgIGNvbnN0IHN0YXJ0ID0gcGVyZm9ybWFuY2Uubm93KClcbiAgICBjb25zdCByZXN1bHQgPSBmbigpXG4gICAgY29uc3QgZW5kID0gcGVyZm9ybWFuY2Uubm93KClcbiAgICBjb25zdCBkdXJhdGlvbiA9IGVuZCAtIHN0YXJ0XG5cbiAgICBpZiAoIXRoaXMubWVhc3VyZW1lbnRzLmhhcyhuYW1lKSkge1xuICAgICAgdGhpcy5tZWFzdXJlbWVudHMuc2V0KG5hbWUsIFtdKVxuICAgIH1cbiAgICB0aGlzLm1lYXN1cmVtZW50cy5nZXQobmFtZSkhLnB1c2goZHVyYXRpb24pXG5cbiAgICByZXR1cm4gcmVzdWx0XG4gIH1cblxuICBnZXRTdGF0cyhuYW1lOiBzdHJpbmcpIHtcbiAgICBjb25zdCBtZWFzdXJlbWVudHMgPSB0aGlzLm1lYXN1cmVtZW50cy5nZXQobmFtZSkgfHwgW11cbiAgICBpZiAobWVhc3VyZW1lbnRzLmxlbmd0aCA9PT0gMCkgcmV0dXJuIG51bGxcblxuICAgIGNvbnN0IHN1bSA9IG1lYXN1cmVtZW50cy5yZWR1Y2UoKGEsIGIpID0+IGEgKyBiLCAwKVxuICAgIGNvbnN0IGF2ZyA9IHN1bSAvIG1lYXN1cmVtZW50cy5sZW5ndGhcbiAgICBjb25zdCBtaW4gPSBNYXRoLm1pbiguLi5tZWFzdXJlbWVudHMpXG4gICAgY29uc3QgbWF4ID0gTWF0aC5tYXgoLi4ubWVhc3VyZW1lbnRzKVxuICAgIFxuICAgIHJldHVybiB7XG4gICAgICBjb3VudDogbWVhc3VyZW1lbnRzLmxlbmd0aCxcbiAgICAgIHN1bSxcbiAgICAgIGF2ZyxcbiAgICAgIG1pbixcbiAgICAgIG1heCxcbiAgICAgIG1lYXN1cmVtZW50cyxcbiAgICB9XG4gIH1cblxuICBjbGVhcigpIHtcbiAgICB0aGlzLm1lYXN1cmVtZW50cy5jbGVhcigpXG4gIH1cbn1cblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8g572R57uc5qih5ouf5bel5YW3XG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbmV4cG9ydCBjbGFzcyBOZXR3b3JrU2ltdWxhdG9yIHtcbiAgcHJpdmF0ZSBvcmlnaW5hbEZldGNoID0gZ2xvYmFsLmZldGNoXG4gIHByaXZhdGUgbGF0ZW5jeSA9IDBcbiAgcHJpdmF0ZSBmYWlsdXJlUmF0ZSA9IDBcbiAgcHJpdmF0ZSBvZmZsaW5lID0gZmFsc2VcblxuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLnNldHVwTW9ja0ZldGNoKClcbiAgfVxuXG4gIHNldExhdGVuY3kobXM6IG51bWJlcikge1xuICAgIHRoaXMubGF0ZW5jeSA9IG1zXG4gIH1cblxuICBzZXRGYWlsdXJlUmF0ZShyYXRlOiBudW1iZXIpIHtcbiAgICB0aGlzLmZhaWx1cmVSYXRlID0gTWF0aC5tYXgoMCwgTWF0aC5taW4oMSwgcmF0ZSkpXG4gIH1cblxuICBzZXRPZmZsaW5lKG9mZmxpbmU6IGJvb2xlYW4pIHtcbiAgICB0aGlzLm9mZmxpbmUgPSBvZmZsaW5lXG4gIH1cblxuICBwcml2YXRlIHNldHVwTW9ja0ZldGNoKCkge1xuICAgIGdsb2JhbC5mZXRjaCA9IGplc3QuZm4oYXN5bmMgKGlucHV0OiBSZXF1ZXN0SW5mbyB8IFVSTCwgaW5pdD86IFJlcXVlc3RJbml0KSA9PiB7XG4gICAgICBpZiAodGhpcy5vZmZsaW5lKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignTmV0d29yazogT2ZmbGluZScpXG4gICAgICB9XG5cbiAgICAgIGlmIChNYXRoLnJhbmRvbSgpIDwgdGhpcy5mYWlsdXJlUmF0ZSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ05ldHdvcms6IFJlcXVlc3QgZmFpbGVkJylcbiAgICAgIH1cblxuICAgICAgaWYgKHRoaXMubGF0ZW5jeSA+IDApIHtcbiAgICAgICAgYXdhaXQgbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIHRoaXMubGF0ZW5jeSkpXG4gICAgICB9XG5cbiAgICAgIHJldHVybiB0aGlzLm9yaWdpbmFsRmV0Y2goaW5wdXQsIGluaXQpXG4gICAgfSkgYXMgYW55XG4gIH1cblxuICByZXN0b3JlKCkge1xuICAgIGdsb2JhbC5mZXRjaCA9IHRoaXMub3JpZ2luYWxGZXRjaFxuICB9XG59XG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIOS6i+S7tuaooeaLn+W3peWFt1xuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG5leHBvcnQgY2xhc3MgRXZlbnRTaW11bGF0b3Ige1xuICBzdGF0aWMgc2ltdWxhdGVGaWxlVXBsb2FkKGZpbGVzOiBGaWxlW10pOiBFdmVudCB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHRhcmdldDoge1xuICAgICAgICBmaWxlcyxcbiAgICAgIH0sXG4gICAgfSBhcyB1bmtub3duIGFzIEV2ZW50XG4gIH1cblxuICBzdGF0aWMgc2ltdWxhdGVEcmFnU3RhcnQoZGF0YTogYW55KTogRHJhZ0V2ZW50IHtcbiAgICByZXR1cm4ge1xuICAgICAgZGF0YVRyYW5zZmVyOiB7XG4gICAgICAgIHNldERhdGE6IGplc3QuZm4oKSxcbiAgICAgICAgZ2V0RGF0YTogamVzdC5mbigoKSA9PiBKU09OLnN0cmluZ2lmeShkYXRhKSksXG4gICAgICAgIGNsZWFyRGF0YTogamVzdC5mbigpLFxuICAgICAgfSxcbiAgICAgIHByZXZlbnREZWZhdWx0OiBqZXN0LmZuKCksXG4gICAgICBzdG9wUHJvcGFnYXRpb246IGplc3QuZm4oKSxcbiAgICB9IGFzIHVua25vd24gYXMgRHJhZ0V2ZW50XG4gIH1cblxuICBzdGF0aWMgc2ltdWxhdGVEcmFnT3Zlcihwb3NpdGlvbjogeyB4OiBudW1iZXI7IHk6IG51bWJlciB9KTogRHJhZ0V2ZW50IHtcbiAgICByZXR1cm4ge1xuICAgICAgY2xpZW50WDogcG9zaXRpb24ueCxcbiAgICAgIGNsaWVudFk6IHBvc2l0aW9uLnksXG4gICAgICBwcmV2ZW50RGVmYXVsdDogamVzdC5mbigpLFxuICAgICAgc3RvcFByb3BhZ2F0aW9uOiBqZXN0LmZuKCksXG4gICAgfSBhcyB1bmtub3duIGFzIERyYWdFdmVudFxuICB9XG5cbiAgc3RhdGljIHNpbXVsYXRlRHJvcChkYXRhOiBhbnksIHBvc2l0aW9uOiB7IHg6IG51bWJlcjsgeTogbnVtYmVyIH0pOiBEcmFnRXZlbnQge1xuICAgIHJldHVybiB7XG4gICAgICBjbGllbnRYOiBwb3NpdGlvbi54LFxuICAgICAgY2xpZW50WTogcG9zaXRpb24ueSxcbiAgICAgIGRhdGFUcmFuc2Zlcjoge1xuICAgICAgICBnZXREYXRhOiBqZXN0LmZuKCgpID0+IEpTT04uc3RyaW5naWZ5KGRhdGEpKSxcbiAgICAgICAgc2V0RGF0YTogamVzdC5mbigpLFxuICAgICAgICBjbGVhckRhdGE6IGplc3QuZm4oKSxcbiAgICAgIH0sXG4gICAgICBwcmV2ZW50RGVmYXVsdDogamVzdC5mbigpLFxuICAgICAgc3RvcFByb3BhZ2F0aW9uOiBqZXN0LmZuKCksXG4gICAgfSBhcyB1bmtub3duIGFzIERyYWdFdmVudFxuICB9XG5cbiAgc3RhdGljIHNpbXVsYXRlS2V5Ym9hcmRFdmVudCh0eXBlOiBzdHJpbmcsIGtleTogc3RyaW5nLCBvcHRpb25zOiBLZXlib2FyZEV2ZW50SW5pdCA9IHt9KTogS2V5Ym9hcmRFdmVudCB7XG4gICAgcmV0dXJuIG5ldyBLZXlib2FyZEV2ZW50KHR5cGUsIHtcbiAgICAgIGtleSxcbiAgICAgIGJ1YmJsZXM6IHRydWUsXG4gICAgICBjYW5jZWxhYmxlOiB0cnVlLFxuICAgICAgLi4ub3B0aW9ucyxcbiAgICB9KVxuICB9XG5cbiAgc3RhdGljIHNpbXVsYXRlTW91c2VFdmVudCh0eXBlOiBzdHJpbmcsIG9wdGlvbnM6IE1vdXNlRXZlbnRJbml0ID0ge30pOiBNb3VzZUV2ZW50IHtcbiAgICByZXR1cm4gbmV3IE1vdXNlRXZlbnQodHlwZSwge1xuICAgICAgYnViYmxlczogdHJ1ZSxcbiAgICAgIGNhbmNlbGFibGU6IHRydWUsXG4gICAgICAuLi5vcHRpb25zLFxuICAgIH0pXG4gIH1cbn1cblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8g5a+85Ye6XG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbi8vIOmHjeaWsOWvvOWHuiB0ZXN0aW5nLWxpYnJhcnkg5bel5YW3XG5leHBvcnQgKiBmcm9tICdAdGVzdGluZy1saWJyYXJ5L3JlYWN0J1xuXG4vLyDlr7zlh7roh6rlrprkuYnmuLLmn5PlmahcbmV4cG9ydCB7IGN1c3RvbVJlbmRlciBhcyByZW5kZXIgfVxuXG4vLyDlr7zlh7rlt6XlhbfnsbtcbmV4cG9ydCB7XG4gIE1vY2tTdXBhYmFzZUNsaWVudCxcbiAgTW9ja0luZGV4ZWREQixcbiAgVGVzdERhdGFHZW5lcmF0b3IsXG4gIFBlcmZvcm1hbmNlVGVzdGVyLFxuICBOZXR3b3JrU2ltdWxhdG9yLFxuICBFdmVudFNpbXVsYXRvcixcbn1cblxuLy8g5a+85Ye657G75Z6LXG5leHBvcnQgdHlwZSB7XG4gIFRlc3RDYXJkRGF0YSxcbiAgVGVzdEZvbGRlckRhdGEsXG4gIFRlc3RUYWdEYXRhLFxuICBUZXN0U3luY09wZXJhdGlvbixcbn0iXSwidmVyc2lvbiI6M30=