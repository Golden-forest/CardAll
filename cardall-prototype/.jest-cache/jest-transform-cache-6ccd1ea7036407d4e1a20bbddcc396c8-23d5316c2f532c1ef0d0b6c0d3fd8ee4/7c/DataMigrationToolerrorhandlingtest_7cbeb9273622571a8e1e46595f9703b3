37f5e2fed04ec1156e4c7ae0be8a6dfb
"use strict";
/**
 * 迁移错误处理和回滚测试
 */
Object.defineProperty(exports, "__esModule", { value: true });
const data_migration_tool_1 = require("@/services/data-migration-tool");
const database_unified_1 = require("@/services/database-unified");
const test_utils_1 = require("./test-utils");
describe('DataMigrationTool - 迁移错误处理和回滚测试', () => {
    const { setupLocalStorageData, cleanupLocalStorage, validateMigrationResult, createProgressListener } = test_utils_1.MigrationTestHelpers;
    describe('迁移步骤错误处理', () => {
        beforeEach(async () => {
            cleanupLocalStorage();
            await database_unified_1.db.clearAll();
        });
        afterEach(async () => {
            cleanupLocalStorage();
            await database_unified_1.db.clearAll();
        });
        test('应该处理数据源验证错误', async () => {
            // 设置无效的localStorage数据
            localStorage.setItem('cardall-cards', 'invalid-json{');
            const source = {
                type: 'localStorage',
                version: '1.0'
            };
            const plan = await data_migration_tool_1.dataMigrationTool.analyzeAndCreatePlan(source);
            const result = await data_migration_tool_1.dataMigrationTool.executeMigration(plan);
            // 应该能够处理验证错误，迁移可能部分成功
            expect(result).toBeDefined();
            expect(result.executedAt).toBeInstanceOf(Date);
            expect(result.errors.length).toBeGreaterThan(0);
            expect(result.errors.some(error => error.includes('Invalid cards data format'))).toBe(true);
            cleanupLocalStorage();
        });
        test('应该处理数据库操作失败', async () => {
            const testData = test_utils_1.TestDataFactory.createBulkTestData(3, 1, 2);
            setupLocalStorageData(testData);
            // 模拟数据库bulkAdd失败
            const originalBulkAdd = database_unified_1.db.cards.bulkAdd;
            database_unified_1.db.cards.bulkAdd = jest.fn().mockRejectedValue(new Error('Database constraint violation'));
            try {
                const source = {
                    type: 'localStorage',
                    version: '1.0'
                };
                const plan = await data_migration_tool_1.dataMigrationTool.analyzeAndCreatePlan(source);
                const result = await data_migration_tool_1.dataMigrationTool.executeMigration(plan);
                // 应该记录错误信息
                expect(result.errors.length).toBeGreaterThan(0);
                expect(result.errors.some(error => error.includes('Database constraint violation'))).toBe(true);
                // 应该尝试重试
                expect(result.stepsCompleted).toBeLessThan(plan.steps.length);
            }
            finally {
                // 恢复原始方法
                database_unified_1.db.cards.bulkAdd = originalBulkAdd;
                cleanupLocalStorage();
            }
        });
        test('应该处理文件系统错误', async () => {
            const imageCard = test_utils_1.TestDataFactory.createCardWithImage();
            setupLocalStorageData({ cards: [imageCard] });
            // 模拟文件系统服务失败
            const originalFileSystem = global.fileSystemService;
            global.fileSystemService = {
                saveImage: jest.fn().mockRejectedValue(new Error('File system write failed'))
            };
            try {
                const source = {
                    type: 'localStorage',
                    version: '1.0'
                };
                const plan = await data_migration_tool_1.dataMigrationTool.analyzeAndCreatePlan(source);
                const result = await data_migration_tool_1.dataMigrationTool.executeMigration(plan);
                // 应该处理图片迁移失败
                expect(result.errors.length).toBeGreaterThan(0);
                expect(result.errors.some(error => error.includes('File system write failed'))).toBe(true);
                // 其他数据应该仍然能够迁移
                expect(result.migratedCards).toBe(1);
            }
            finally {
                // 恢复原始服务
                if (originalFileSystem) {
                    ;
                    global.fileSystemService = originalFileSystem;
                }
                cleanupLocalStorage();
            }
        });
        test('应该处理内存不足错误', async () => {
            const largeData = test_utils_1.TestDataFactory.createBulkTestData(1000, 100, 200);
            setupLocalStorageData(largeData);
            // 模拟内存不足
            const originalCreateRollbackPoint = data_migration_tool_1.dataMigrationTool.createRollbackPoint;
            data_migration_tool_1.dataMigrationTool.createRollbackPoint = jest.fn()
                .mockRejectedValueOnce(new Error('Out of memory'))
                .mockResolvedValueOnce('test-rollback-point');
            try {
                const source = {
                    type: 'localStorage',
                    version: '1.0'
                };
                const plan = await data_migration_tool_1.dataMigrationTool.analyzeAndCreatePlan(source);
                const result = await data_migration_tool_1.dataMigrationTool.executeMigration(plan);
                // 应该重试并最终成功
                expect(result.success).toBe(true);
            }
            finally {
                // 恢复原始方法
                data_migration_tool_1.dataMigrationTool.createRollbackPoint = originalCreateRollbackPoint;
                cleanupLocalStorage();
            }
        });
    });
    describe('必需步骤失败处理', () => {
        beforeEach(async () => {
            cleanupLocalStorage();
            await database_unified_1.db.clearAll();
        });
        afterEach(async () => {
            cleanupLocalStorage();
            await database_unified_1.db.clearAll();
        });
        test('应该在必需步骤失败时停止迁移', async () => {
            const testData = test_utils_1.TestDataFactory.createBulkTestData(2, 1, 1);
            setupLocalStorageData(testData);
            // 模拟必需步骤（源验证）失败
            const originalValidateSource = data_migration_tool_1.dataMigrationTool.validateSource;
            data_migration_tool_1.dataMigrationTool.validateSource = jest.fn()
                .mockResolvedValue({
                success: false,
                error: 'Critical validation failure'
            });
            try {
                const source = {
                    type: 'localStorage',
                    version: '1.0'
                };
                const plan = await data_migration_tool_1.dataMigrationTool.analyzeAndCreatePlan(source);
                const result = await data_migration_tool_1.dataMigrationTool.executeMigration(plan);
                // 必需步骤失败应该导致整个迁移失败
                expect(result.success).toBe(false);
                expect(result.errors.some(error => error.includes('Critical validation failure'))).toBe(true);
                expect(result.stepsCompleted).toBe(0); // 没有步骤完成
            }
            finally {
                // 恢复原始方法
                data_migration_tool_1.dataMigrationTool.validateSource = originalValidateSource;
                cleanupLocalStorage();
            }
        });
        test('应该在可选步骤失败时继续迁移', async () => {
            const testData = test_utils_1.TestDataFactory.createBulkTestData(2, 1, 1);
            setupLocalStorageData(testData);
            // 模拟可选步骤（清理）失败
            const originalCleanupSource = data_migration_tool_1.dataMigrationTool.cleanupSource;
            data_migration_tool_1.dataMigrationTool.cleanupSource = jest.fn()
                .mockResolvedValue({
                success: false,
                error: 'Cleanup failed'
            });
            try {
                const source = {
                    type: 'localStorage',
                    version: '1.0'
                };
                const plan = await data_migration_tool_1.dataMigrationTool.analyzeAndCreatePlan(source);
                const result = await data_migration_tool_1.dataMigrationTool.executeMigration(plan);
                // 可选步骤失败不应该阻止迁移成功
                expect(result.success).toBe(true);
                expect(result.warnings.some(warning => warning.includes('Cleanup failed'))).toBe(true);
                expect(result.stepsCompleted).toBe(plan.steps.length); // 所有步骤都尝试了
            }
            finally {
                // 恢复原始方法
                data_migration_tool_1.dataMigrationTool.cleanupSource = originalCleanupSource;
                cleanupLocalStorage();
            }
        });
    });
    describe('自动回滚机制', () => {
        beforeEach(async () => {
            cleanupLocalStorage();
            await database_unified_1.db.clearAll();
        });
        afterEach(async () => {
            cleanupLocalStorage();
            await database_unified_1.db.clearAll();
        });
        test('应该在关键步骤失败时自动回滚', async () => {
            // 准备原始数据
            const originalData = test_utils_1.TestDataFactory.createBulkTestData(5, 2, 3);
            await database_unified_1.db.cards.bulkAdd(originalData.cards.map(card => ({
                ...card,
                userId: 'default',
                syncVersion: 1,
                pendingSync: false,
                updatedAt: new Date(),
                searchVector: 'original data'
            })));
            const testData = test_utils_1.TestDataFactory.createBulkTestData(3, 1, 2);
            setupLocalStorageData(testData);
            // 模拟关键步骤失败
            const originalMigrateCards = data_migration_tool_1.dataMigrationTool.migrateCardsFromLocalStorage;
            data_migration_tool_1.dataMigrationTool.migrateCardsFromLocalStorage = jest.fn()
                .mockRejectedValue(new Error('Critical migration failure'));
            try {
                const source = {
                    type: 'localStorage',
                    version: '1.0'
                };
                const plan = await data_migration_tool_1.dataMigrationTool.analyzeAndCreatePlan(source);
                const result = await data_migration_tool_1.dataMigrationTool.executeMigration(plan);
                // 应该失败并触发回滚
                expect(result.success).toBe(false);
                expect(result.errors.some(error => error.includes('Critical migration failure'))).toBe(true);
                // 验证数据已回滚
                const dbCards = await database_unified_1.db.cards.toArray();
                expect(dbCards.length).toBe(originalData.cards.length);
                // 验证原始数据未受影响
                dbCards.forEach(card => {
                    expect(card.searchVector).toBe('original data');
                });
            }
            finally {
                // 恢复原始方法
                data_migration_tool_1.dataMigrationTool.migrateCardsFromLocalStorage = originalMigrateCards;
                cleanupLocalStorage();
            }
        });
        test('应该正确处理回滚失败的情况', async () => {
            const testData = test_utils_1.TestDataFactory.createBulkTestData(2, 1, 1);
            setupLocalStorageData(testData);
            // 模拟迁移失败
            const originalExecuteStep = data_migration_tool_1.dataMigrationTool.executeStep;
            data_migration_tool_1.dataMigrationTool.executeStep = jest.fn()
                .mockRejectedValue(new Error('Migration failed'));
            // 模拟回滚也失败
            const originalRollbackMigration = data_migration_tool_1.dataMigrationTool.rollbackMigration;
            data_migration_tool_1.dataMigrationTool.rollbackMigration = jest.fn()
                .mockRejectedValue(new Error('Rollback also failed'));
            try {
                const source = {
                    type: 'localStorage',
                    version: '1.0'
                };
                const plan = await data_migration_tool_1.dataMigrationTool.analyzeAndCreatePlan(source);
                const result = await data_migration_tool_1.dataMigrationTool.executeMigration(plan);
                // 应该记录迁移失败和回滚失败
                expect(result.success).toBe(false);
                expect(result.errors.some(error => error.includes('Migration failed'))).toBe(true);
                expect(result.errors.some(error => error.includes('Rollback failed'))).toBe(true);
            }
            finally {
                // 恢复原始方法
                data_migration_tool_1.dataMigrationTool.executeStep = originalExecuteStep(data_migration_tool_1.dataMigrationTool).rollbackMigration = originalRollbackMigration;
                cleanupLocalStorage();
            }
        });
        test('应该在回滚后验证数据一致性', async () => {
            // 准备复杂的原始数据关系
            const originalData = test_utils_1.TestDataFactory.createBulkTestData(10, 3, 5);
            // 建立文件夹引用关系
            originalData.cards.forEach((card, index) => {
                card.folderId = originalData.folders[index % originalData.folders.length].id;
            });
            await database_unified_1.db.cards.bulkAdd(originalData.cards.map(card => ({
                ...card,
                userId: 'default',
                syncVersion: 1,
                pendingSync: false,
                updatedAt: new Date(),
                searchVector: 'original complex data'
            })));
            await database_unified_1.db.folders.bulkAdd(originalData.folders.map(folder => ({
                ...folder,
                userId: 'default',
                syncVersion: 1,
                pendingSync: false,
                updatedAt: new Date(),
                fullPath: folder.name,
                depth: 0
            })));
            await database_unified_1.db.tags.bulkAdd(originalData.tags.map(tag => ({
                ...tag,
                userId: 'default',
                syncVersion: 1,
                pendingSync: false,
                updatedAt: new Date(),
                count: 0
            })));
            const testData = test_utils_1.TestDataFactory.createBulkTestData(5, 2, 3);
            setupLocalStorageData(testData);
            // 模拟迁移失败
            const originalTransformData = data_migration_tool_1.dataMigrationTool.transformData;
            data_migration_tool_1.dataMigrationTool.transformData = jest.fn()
                .mockRejectedValue(new Error('Data transformation failed'));
            try {
                const source = {
                    type: 'localStorage',
                    version: '1.0'
                };
                const plan = await data_migration_tool_1.dataMigrationTool.analyzeAndCreatePlan(source);
                const result = await data_migration_tool_1.dataMigrationTool.executeMigration(plan);
                expect(result.success).toBe(false);
                // 验证回滚后的数据一致性
                const validationReport = await data_migration_tool_1.dataMigrationTool.createValidationReport();
                expect(validationReport.success).toBe(true);
                expect(validationReport.consistency.referencesValid).toBe(true);
                expect(validationReport.consistency.orphansFound).toBe(0);
                // 验证原始数据关系完整
                const dbCards = await database_unified_1.db.cards.toArray();
                const dbFolders = await database_unified_1.db.folders.toArray();
                dbCards.forEach(card => {
                    if (card.folderId) {
                        expect(dbFolders.some(folder => folder.id === card.folderId)).toBe(true);
                    }
                });
            }
            finally {
                // 恢复原始方法
                data_migration_tool_1.dataMigrationTool.transformData = originalTransformData;
                cleanupLocalStorage();
            }
        });
    });
    describe('错误恢复和重试机制', () => {
        beforeEach(async () => {
            cleanupLocalStorage();
            await database_unified_1.db.clearAll();
        });
        afterEach(async () => {
            cleanupLocalStorage();
            await database_unified_1.db.clearAll();
        });
        test('应该根据错误类型决定重试策略', async () => {
            const testData = test_utils_1.TestDataFactory.createBulkTestData(3, 1, 1);
            setupLocalStorageData(testData);
            let attemptCount = 0;
            // 模拟暂时性错误，然后成功
            const originalMigrateCards = data_migration_tool_1.dataMigrationTool.migrateCardsFromLocalStorage;
            data_migration_tool_1.dataMigrationTool.migrateCardsFromLocalStorage = jest.fn()
                .mockImplementation(async () => {
                attemptCount++;
                if (attemptCount <= 2) {
                    throw new Error('Temporary network error');
                }
                return {
                    success: true,
                    migratedCards: testData.cards.length,
                    dataSize: 1024
                };
            });
            try {
                const source = {
                    type: 'localStorage',
                    version: '1.0'
                };
                const plan = await data_migration_tool_1.dataMigrationTool.analyzeAndCreatePlan(source);
                const result = await data_migration_tool_1.dataMigrationTool.executeMigration(plan);
                // 重试后应该成功
                expect(result.success).toBe(true);
                expect(attemptCount).toBe(3); // 初始尝试 + 2次重试
            }
            finally {
                // 恢复原始方法
                data_migration_tool_1.dataMigrationTool.migrateCardsFromLocalStorage = originalMigrateCards;
                cleanupLocalStorage();
            }
        });
        test('应该对永久性错误快速失败', async () => {
            const testData = test_utils_1.TestDataFactory.createBulkTestData(2, 1, 1);
            setupLocalStorageData(testData);
            // 模拟永久性错误
            const originalMigrateCards = data_migration_tool_1.dataMigrationTool.migrateCardsFromLocalStorage;
            data_migration_tool_1.dataMigrationTool.migrateCardsFromLocalStorage = jest.fn()
                .mockRejectedValue(new Error('Invalid data format - permanent error'));
            try {
                const source = {
                    type: 'localStorage',
                    version: '1.0'
                };
                const plan = await data_migration_tool_1.dataMigrationTool.analyzeAndCreatePlan(source);
                const result = await data_migration_tool_1.dataMigrationTool.executeMigration(plan);
                // 永久性错误应该快速失败
                expect(result.success).toBe(false);
                expect(result.errors.some(error => error.includes('Invalid data format'))).toBe(true);
            }
            finally {
                // 恢复原始方法
                data_migration_tool_1.dataMigrationTool.migrateCardsFromLocalStorage = originalMigrateCards;
                cleanupLocalStorage();
            }
        });
        test('应该在重试间隔增加延迟', async () => {
            const testData = test_utils_1.TestDataFactory.createBulkTestData(1, 0, 0);
            setupLocalStorageData(testData);
            const callTimes = [];
            // 模拟需要重试的步骤
            const originalDelay = data_migration_tool_1.dataMigrationTool.delay;
            data_migration_tool_1.dataMigrationTool.delay = jest.fn()
                .mockImplementation(async (ms) => {
                callTimes.push(Date.now());
                await originalDelay.call(data_migration_tool_1.dataMigrationTool, ms);
            });
            const originalMigrateCards = data_migration_tool_1.dataMigrationTool.migrateCardsFromLocalStorage;
            data_migration_tool_1.dataMigrationTool.migrateCardsFromLocalStorage = jest.fn()
                .mockImplementation(async () => {
                if (callTimes.length < 3) {
                    throw new Error('Retryable error');
                }
                return {
                    success: true,
                    migratedCards: 1,
                    dataSize: 512
                };
            });
            try {
                const source = {
                    type: 'localStorage',
                    version: '1.0'
                };
                const plan = await data_migration_tool_1.dataMigrationTool.analyzeAndCreatePlan(source);
                const startTime = Date.now();
                const result = await data_migration_tool_1.dataMigrationTool.executeMigration(plan);
                const endTime = Date.now();
                // 应该重试并最终成功
                expect(result.success).toBe(true);
                expect(callTimes.length).toBe(3); // 3次重试
                // 验证重试间隔递增
                expect(callTimes[1] - callTimes[0]).toBeGreaterThan(0);
                expect(callTimes[2] - callTimes[1]).toBeGreaterThan(callTimes[1] - callTimes[0]);
            }
            finally {
                // 恢复原始方法
                data_migration_tool_1.dataMigrationTool.delay = originalDelay(data_migration_tool_1.dataMigrationTool).migrateCardsFromLocalStorage = originalMigrateCards;
                cleanupLocalStorage();
            }
        });
    });
    describe('错误报告和诊断', () => {
        beforeEach(async () => {
            cleanupLocalStorage();
            await database_unified_1.db.clearAll();
        });
        afterEach(async () => {
            cleanupLocalStorage();
            await database_unified_1.db.clearAll();
        });
        test('应该提供详细的错误信息', async () => {
            const testData = test_utils_1.TestDataFactory.createBulkTestData(2, 1, 1);
            setupLocalStorageData(testData);
            // 模拟不同类型的错误
            const originalMigrateCards = data_migration_tool_1.dataMigrationTool.migrateCardsFromLocalStorage;
            data_migration_tool_1.dataMigrationTool.migrateCardsFromLocalStorage = jest.fn()
                .mockRejectedValue(new Error('Card migration failed: constraint violation on unique index'));
            const originalMigrateFolders = data_migration_tool_1.dataMigrationTool.migrateFoldersFromLocalStorage;
            data_migration_tool_1.dataMigrationTool.migrateFoldersFromLocalStorage = jest.fn()
                .mockRejectedValue(new Error('Folder migration failed: parent folder not found'));
            try {
                const source = {
                    type: 'localStorage',
                    version: '1.0'
                };
                const plan = await data_migration_tool_1.dataMigrationTool.analyzeAndCreatePlan(source);
                const result = await data_migration_tool_1.dataMigrationTool.executeMigration(plan);
                expect(result.success).toBe(false);
                // 验证错误信息详细程度
                expect(result.errors.length).toBeGreaterThan(0);
                expect(result.errors.some(error => error.includes('Card migration failed'))).toBe(true);
                expect(result.errors.some(error => error.includes('Folder migration failed'))).toBe(true);
                // 验证错误包含有用的上下文信息
                const cardError = result.errors.find(e => e.includes('Card migration failed'));
                expect(cardError).toContain('constraint violation');
                const folderError = result.errors.find(e => e.includes('Folder migration failed'));
                expect(folderError).toContain('parent folder not found');
            }
            finally {
                // 恢复原始方法
                data_migration_tool_1.dataMigrationTool.migrateCardsFromLocalStorage = originalMigrateCards(data_migration_tool_1.dataMigrationTool).migrateFoldersFromLocalStorage = originalMigrateFolders;
                cleanupLocalStorage();
            }
        });
        test('应该区分错误和警告', async () => {
            const testData = test_utils_1.TestDataFactory.createBulkTestData(3, 1, 2);
            setupLocalStorageData(testData);
            // 模拟产生警告但不完全失败的情况
            const originalMigrateImages = data_migration_tool_1.dataMigrationTool.migrateImagesFromLocalStorage;
            data_migration_tool_1.dataMigrationTool.migrateImagesFromLocalStorage = jest.fn()
                .mockResolvedValue({
                success: true,
                migratedImages: 1,
                dataSize: 1024,
                warnings: ['Some images could not be migrated due to unsupported format']
            });
            // 模拟部分失败
            const originalMigrateTags = data_migration_tool_1.dataMigrationTool.migrateTagsFromLocalStorage;
            data_migration_tool_1.dataMigrationTool.migrateTagsFromLocalStorage = jest.fn()
                .mockRejectedValue(new Error('Tag migration failed'));
            try {
                const source = {
                    type: 'localStorage',
                    version: '1.0'
                };
                const plan = await data_migration_tool_1.dataMigrationTool.analyzeAndCreatePlan(source);
                const result = await data_migration_tool_1.dataMigrationTool.executeMigration(plan);
                expect(result.success).toBe(false);
                // 验证有错误
                expect(result.errors.length).toBeGreaterThan(0);
                expect(result.errors.some(error => error.includes('Tag migration failed'))).toBe(true);
                // 验证有警告
                expect(result.warnings.length).toBeGreaterThan(0);
                expect(result.warnings.some(warning => warning.includes('unsupported format'))).toBe(true);
                // 错误和警告应该分开记录
                expect(result.errors.length + result.warnings.length).toBeGreaterThan(1);
            }
            finally {
                // 恢复原始方法
                data_migration_tool_1.dataMigrationTool.migrateImagesFromLocalStorage = originalMigrateImages(data_migration_tool_1.dataMigrationTool).migrateTagsFromLocalStorage = originalMigrateTags;
                cleanupLocalStorage();
            }
        });
        test('应该在失败后提供恢复建议', async () => {
            const testData = test_utils_1.TestDataFactory.createBulkTestData(2, 1, 1);
            setupLocalStorageData(testData);
            // 模拟存储空间不足错误
            const originalCreateBackup = data_migration_tool_1.dataMigrationTool.createBackup;
            data_migration_tool_1.dataMigrationTool.createBackup = jest.fn()
                .mockRejectedValue(new Error('Insufficient storage space for backup'));
            try {
                const source = {
                    type: 'localStorage',
                    version: '1.0'
                };
                const plan = await data_migration_tool_1.dataMigrationTool.analyzeAndCreatePlan(source);
                const result = await data_migration_tool_1.dataMigrationTool.executeMigration(plan);
                expect(result.success).toBe(false);
                // 验证创建验证报告仍然可用
                const validationReport = await data_migration_tool_1.dataMigrationTool.createValidationReport();
                expect(validationReport).toBeDefined();
                expect(Array.isArray(validationReport.recommendations)).toBe(true);
                // 验证包含恢复相关的建议
                const hasRecoveryRecommendation = validationReport.recommendations.some(rec => rec.toLowerCase().includes('storage') ||
                    rec.toLowerCase().includes('space') ||
                    rec.toLowerCase().includes('backup'));
                // 建议可能存在，但不强制要求
                console.log('验证报告建议:', validationReport.recommendations);
            }
            finally {
                // 恢复原始方法
                data_migration_tool_1.dataMigrationTool.createBackup = originalCreateBackup;
                cleanupLocalStorage();
            }
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiRDpcXFByb2plY3RzXFxDYXJkRXZlcnl0aGluZ1xcY2FyZGFsbC1wcm90b3R5cGVcXHNyY1xcX190ZXN0c19fXFxzZXJ2aWNlc1xcZGF0YS1taWdyYXRpb25cXERhdGFNaWdyYXRpb25Ub29sLmVycm9yLWhhbmRsaW5nLnRlc3QudHMiLCJtYXBwaW5ncyI6IjtBQUFBOztHQUVHOztBQUVILHdFQUFrRTtBQUNsRSxrRUFBZ0Q7QUFDaEQsNkNBQW9FO0FBR3BFLFFBQVEsQ0FBQyxpQ0FBaUMsRUFBRSxHQUFHLEVBQUU7SUFDL0MsTUFBTSxFQUNKLHFCQUFxQixFQUNyQixtQkFBbUIsRUFDbkIsdUJBQXVCLEVBQ3ZCLHNCQUFzQixFQUN2QixHQUFHLGlDQUFvQixDQUFBO0lBRXhCLFFBQVEsQ0FBQyxVQUFVLEVBQUUsR0FBRyxFQUFFO1FBQ3hCLFVBQVUsQ0FBQyxLQUFLLElBQUksRUFBRTtZQUNwQixtQkFBbUIsRUFBRSxDQUFBO1lBQ3JCLE1BQU0scUJBQUUsQ0FBQyxRQUFRLEVBQUUsQ0FBQTtRQUNyQixDQUFDLENBQUMsQ0FBQTtRQUVGLFNBQVMsQ0FBQyxLQUFLLElBQUksRUFBRTtZQUNuQixtQkFBbUIsRUFBRSxDQUFBO1lBQ3JCLE1BQU0scUJBQUUsQ0FBQyxRQUFRLEVBQUUsQ0FBQTtRQUNyQixDQUFDLENBQUMsQ0FBQTtRQUVGLElBQUksQ0FBQyxhQUFhLEVBQUUsS0FBSyxJQUFJLEVBQUU7WUFDN0Isc0JBQXNCO1lBQ3RCLFlBQVksQ0FBQyxPQUFPLENBQUMsZUFBZSxFQUFFLGVBQWUsQ0FBQyxDQUFBO1lBRXRELE1BQU0sTUFBTSxHQUFHO2dCQUNiLElBQUksRUFBRSxjQUF1QjtnQkFDN0IsT0FBTyxFQUFFLEtBQUs7YUFDZixDQUFBO1lBRUQsTUFBTSxJQUFJLEdBQUcsTUFBTSx1Q0FBaUIsQ0FBQyxvQkFBb0IsQ0FBQyxNQUFNLENBQUMsQ0FBQTtZQUNqRSxNQUFNLE1BQU0sR0FBRyxNQUFNLHVDQUFpQixDQUFDLGdCQUFnQixDQUFDLElBQUksQ0FBQyxDQUFBO1lBRTdE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bmdcXGNhcmRhbGwtcHJvdG90eXBlXFxzcmNcXF9fdGVzdHNfX1xcc2VydmljZXNcXGRhdGEtbWlncmF0aW9uXFxEYXRhTWlncmF0aW9uVG9vbC5lcnJvci1oYW5kbGluZy50ZXN0LnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICog6L+B56e76ZSZ6K+v5aSE55CG5ZKM5Zue5rua5rWL6K+VXG4gKi9cblxuaW1wb3J0IHsgZGF0YU1pZ3JhdGlvblRvb2wgfSBmcm9tICdAL3NlcnZpY2VzL2RhdGEtbWlncmF0aW9uLXRvb2wnXG5pbXBvcnQgeyBkYiB9IGZyb20gJ0Avc2VydmljZXMvZGF0YWJhc2UtdW5pZmllZCdcbmltcG9ydCB7IFRlc3REYXRhRmFjdG9yeSwgTWlncmF0aW9uVGVzdEhlbHBlcnMgfSBmcm9tICcuL3Rlc3QtdXRpbHMnXG5pbXBvcnQgeyBzZXR1cCB9IGZyb20gJy4vc2V0dXAnXG5cbmRlc2NyaWJlKCdEYXRhTWlncmF0aW9uVG9vbCAtIOi/geenu+mUmeivr+WkhOeQhuWSjOWbnua7mua1i+ivlScsICgpID0+IHtcbiAgY29uc3Qge1xuICAgIHNldHVwTG9jYWxTdG9yYWdlRGF0YSxcbiAgICBjbGVhbnVwTG9jYWxTdG9yYWdlLFxuICAgIHZhbGlkYXRlTWlncmF0aW9uUmVzdWx0LFxuICAgIGNyZWF0ZVByb2dyZXNzTGlzdGVuZXJcbiAgfSA9IE1pZ3JhdGlvblRlc3RIZWxwZXJzXG5cbiAgZGVzY3JpYmUoJ+i/geenu+atpemqpOmUmeivr+WkhOeQhicsICgpID0+IHtcbiAgICBiZWZvcmVFYWNoKGFzeW5jICgpID0+IHtcbiAgICAgIGNsZWFudXBMb2NhbFN0b3JhZ2UoKVxuICAgICAgYXdhaXQgZGIuY2xlYXJBbGwoKVxuICAgIH0pXG5cbiAgICBhZnRlckVhY2goYXN5bmMgKCkgPT4ge1xuICAgICAgY2xlYW51cExvY2FsU3RvcmFnZSgpXG4gICAgICBhd2FpdCBkYi5jbGVhckFsbCgpXG4gICAgfSlcblxuICAgIHRlc3QoJ+W6lOivpeWkhOeQhuaVsOaNrua6kOmqjOivgemUmeivrycsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIOiuvue9ruaXoOaViOeahGxvY2FsU3RvcmFnZeaVsOaNrlxuICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2NhcmRhbGwtY2FyZHMnLCAnaW52YWxpZC1qc29ueycpXG5cbiAgICAgIGNvbnN0IHNvdXJjZSA9IHtcbiAgICAgICAgdHlwZTogJ2xvY2FsU3RvcmFnZScgYXMgY29uc3QsXG4gICAgICAgIHZlcnNpb246ICcxLjAnXG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHBsYW4gPSBhd2FpdCBkYXRhTWlncmF0aW9uVG9vbC5hbmFseXplQW5kQ3JlYXRlUGxhbihzb3VyY2UpXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBkYXRhTWlncmF0aW9uVG9vbC5leGVjdXRlTWlncmF0aW9uKHBsYW4pXG5cbiAgICAgIC8vIOW6lOivpeiDveWkn+WkhOeQhumqjOivgemUmeivr++8jOi/geenu+WPr+iDvemDqOWIhuaIkOWKn1xuICAgICAgZXhwZWN0KHJlc3VsdCkudG9CZURlZmluZWQoKVxuICAgICAgZXhwZWN0KHJlc3VsdC5leGVjdXRlZEF0KS50b0JlSW5zdGFuY2VPZihEYXRlKVxuICAgICAgZXhwZWN0KHJlc3VsdC5lcnJvcnMubGVuZ3RoKS50b0JlR3JlYXRlclRoYW4oMClcbiAgICAgIGV4cGVjdChyZXN1bHQuZXJyb3JzLnNvbWUoZXJyb3IgPT4gZXJyb3IuaW5jbHVkZXMoJ0ludmFsaWQgY2FyZHMgZGF0YSBmb3JtYXQnKSkpLnRvQmUodHJ1ZSlcblxuICAgICAgY2xlYW51cExvY2FsU3RvcmFnZSgpXG4gICAgfSlcblxuICAgIHRlc3QoJ+W6lOivpeWkhOeQhuaVsOaNruW6k+aTjeS9nOWksei0pScsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHRlc3REYXRhID0gVGVzdERhdGFGYWN0b3J5LmNyZWF0ZUJ1bGtUZXN0RGF0YSgzLCAxLCAyKVxuICAgICAgc2V0dXBMb2NhbFN0b3JhZ2VEYXRhKHRlc3REYXRhKVxuXG4gICAgICAvLyDmqKHmi5/mlbDmja7lupNidWxrQWRk5aSx6LSlXG4gICAgICBjb25zdCBvcmlnaW5hbEJ1bGtBZGQgPSBkYi5jYXJkcy5idWxrQWRkXG4gICAgICBkYi5jYXJkcy5idWxrQWRkID0gamVzdC5mbigpLm1vY2tSZWplY3RlZFZhbHVlKG5ldyBFcnJvcignRGF0YWJhc2UgY29uc3RyYWludCB2aW9sYXRpb24nKSlcblxuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3Qgc291cmNlID0ge1xuICAgICAgICAgIHR5cGU6ICdsb2NhbFN0b3JhZ2UnIGFzIGNvbnN0LFxuICAgICAgICAgIHZlcnNpb246ICcxLjAnXG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBwbGFuID0gYXdhaXQgZGF0YU1pZ3JhdGlvblRvb2wuYW5hbHl6ZUFuZENyZWF0ZVBsYW4oc291cmNlKVxuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBkYXRhTWlncmF0aW9uVG9vbC5leGVjdXRlTWlncmF0aW9uKHBsYW4pXG5cbiAgICAgICAgLy8g5bqU6K+l6K6w5b2V6ZSZ6K+v5L+h5oGvXG4gICAgICAgIGV4cGVjdChyZXN1bHQuZXJyb3JzLmxlbmd0aCkudG9CZUdyZWF0ZXJUaGFuKDApXG4gICAgICAgIGV4cGVjdChyZXN1bHQuZXJyb3JzLnNvbWUoZXJyb3IgPT4gZXJyb3IuaW5jbHVkZXMoJ0RhdGFiYXNlIGNvbnN0cmFpbnQgdmlvbGF0aW9uJykpKS50b0JlKHRydWUpXG5cbiAgICAgICAgLy8g5bqU6K+l5bCd6K+V6YeN6K+VXG4gICAgICAgIGV4cGVjdChyZXN1bHQuc3RlcHNDb21wbGV0ZWQpLnRvQmVMZXNzVGhhbihwbGFuLnN0ZXBzLmxlbmd0aClcblxuICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgLy8g5oGi5aSN5Y6f5aeL5pa55rOVXG4gICAgICAgIGRiLmNhcmRzLmJ1bGtBZGQgPSBvcmlnaW5hbEJ1bGtBZGRcbiAgICAgICAgY2xlYW51cExvY2FsU3RvcmFnZSgpXG4gICAgICB9XG4gICAgfSlcblxuICAgIHRlc3QoJ+W6lOivpeWkhOeQhuaWh+S7tuezu+e7n+mUmeivrycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGltYWdlQ2FyZCA9IFRlc3REYXRhRmFjdG9yeS5jcmVhdGVDYXJkV2l0aEltYWdlKClcbiAgICAgIHNldHVwTG9jYWxTdG9yYWdlRGF0YSh7IGNhcmRzOiBbaW1hZ2VDYXJkXSB9KVxuXG4gICAgICAvLyDmqKHmi5/mlofku7bns7vnu5/mnI3liqHlpLHotKVcbiAgICAgIGNvbnN0IG9yaWdpbmFsRmlsZVN5c3RlbSA9IChnbG9iYWwgYXMgYW55KS5maWxlU3lzdGVtU2VydmljZVxuICAgICAgOyhnbG9iYWwgYXMgYW55KS5maWxlU3lzdGVtU2VydmljZSA9IHtcbiAgICAgICAgc2F2ZUltYWdlOiBqZXN0LmZuKCkubW9ja1JlamVjdGVkVmFsdWUobmV3IEVycm9yKCdGaWxlIHN5c3RlbSB3cml0ZSBmYWlsZWQnKSlcbiAgICAgIH1cblxuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3Qgc291cmNlID0ge1xuICAgICAgICAgIHR5cGU6ICdsb2NhbFN0b3JhZ2UnIGFzIGNvbnN0LFxuICAgICAgICAgIHZlcnNpb246ICcxLjAnXG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBwbGFuID0gYXdhaXQgZGF0YU1pZ3JhdGlvblRvb2wuYW5hbHl6ZUFuZENyZWF0ZVBsYW4oc291cmNlKVxuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBkYXRhTWlncmF0aW9uVG9vbC5leGVjdXRlTWlncmF0aW9uKHBsYW4pXG5cbiAgICAgICAgLy8g5bqU6K+l5aSE55CG5Zu+54mH6L+B56e75aSx6LSlXG4gICAgICAgIGV4cGVjdChyZXN1bHQuZXJyb3JzLmxlbmd0aCkudG9CZUdyZWF0ZXJUaGFuKDApXG4gICAgICAgIGV4cGVjdChyZXN1bHQuZXJyb3JzLnNvbWUoZXJyb3IgPT4gZXJyb3IuaW5jbHVkZXMoJ0ZpbGUgc3lzdGVtIHdyaXRlIGZhaWxlZCcpKSkudG9CZSh0cnVlKVxuXG4gICAgICAgIC8vIOWFtuS7luaVsOaNruW6lOivpeS7jeeEtuiDveWkn+i/geenu1xuICAgICAgICBleHBlY3QocmVzdWx0Lm1pZ3JhdGVkQ2FyZHMpLnRvQmUoMSlcblxuICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgLy8g5oGi5aSN5Y6f5aeL5pyN5YqhXG4gICAgICAgIGlmIChvcmlnaW5hbEZpbGVTeXN0ZW0pIHtcbiAgICAgICAgICA7KGdsb2JhbCBhcyBhbnkpLmZpbGVTeXN0ZW1TZXJ2aWNlID0gb3JpZ2luYWxGaWxlU3lzdGVtXG4gICAgICAgIH1cbiAgICAgICAgY2xlYW51cExvY2FsU3RvcmFnZSgpXG4gICAgICB9XG4gICAgfSlcblxuICAgIHRlc3QoJ+W6lOivpeWkhOeQhuWGheWtmOS4jei2s+mUmeivrycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGxhcmdlRGF0YSA9IFRlc3REYXRhRmFjdG9yeS5jcmVhdGVCdWxrVGVzdERhdGEoMTAwMCwgMTAwLCAyMDApXG4gICAgICBzZXR1cExvY2FsU3RvcmFnZURhdGEobGFyZ2VEYXRhKVxuXG4gICAgICAvLyDmqKHmi5/lhoXlrZjkuI3otrNcbiAgICAgIGNvbnN0IG9yaWdpbmFsQ3JlYXRlUm9sbGJhY2tQb2ludCA9IChkYXRhTWlncmF0aW9uVG9vbCBhcyBhbnkpLmNyZWF0ZVJvbGxiYWNrUG9pbnRcbiAgICAgIDsoZGF0YU1pZ3JhdGlvblRvb2wgYXMgYW55KS5jcmVhdGVSb2xsYmFja1BvaW50ID0gamVzdC5mbigpXG4gICAgICAgIC5tb2NrUmVqZWN0ZWRWYWx1ZU9uY2UobmV3IEVycm9yKCdPdXQgb2YgbWVtb3J5JykpXG4gICAgICAgIC5tb2NrUmVzb2x2ZWRWYWx1ZU9uY2UoJ3Rlc3Qtcm9sbGJhY2stcG9pbnQnKVxuXG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCBzb3VyY2UgPSB7XG4gICAgICAgICAgdHlwZTogJ2xvY2FsU3RvcmFnZScgYXMgY29uc3QsXG4gICAgICAgICAgdmVyc2lvbjogJzEuMCdcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHBsYW4gPSBhd2FpdCBkYXRhTWlncmF0aW9uVG9vbC5hbmFseXplQW5kQ3JlYXRlUGxhbihzb3VyY2UpXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGRhdGFNaWdyYXRpb25Ub29sLmV4ZWN1dGVNaWdyYXRpb24ocGxhbilcblxuICAgICAgICAvLyDlupTor6Xph43or5XlubbmnIDnu4jmiJDlip9cbiAgICAgICAgZXhwZWN0KHJlc3VsdC5zdWNjZXNzKS50b0JlKHRydWUpXG5cbiAgICAgIH0gZmluYWxseSB7XG4gICAgICAgIC8vIOaBouWkjeWOn+Wni+aWueazlVxuICAgICAgICAoZGF0YU1pZ3JhdGlvblRvb2wgYXMgYW55KS5jcmVhdGVSb2xsYmFja1BvaW50ID0gb3JpZ2luYWxDcmVhdGVSb2xsYmFja1BvaW50XG4gICAgICAgIGNsZWFudXBMb2NhbFN0b3JhZ2UoKVxuICAgICAgfVxuICAgIH0pXG4gIH0pXG5cbiAgZGVzY3JpYmUoJ+W/hemcgOatpemqpOWksei0peWkhOeQhicsICgpID0+IHtcbiAgICBiZWZvcmVFYWNoKGFzeW5jICgpID0+IHtcbiAgICAgIGNsZWFudXBMb2NhbFN0b3JhZ2UoKVxuICAgICAgYXdhaXQgZGIuY2xlYXJBbGwoKVxuICAgIH0pXG5cbiAgICBhZnRlckVhY2goYXN5bmMgKCkgPT4ge1xuICAgICAgY2xlYW51cExvY2FsU3RvcmFnZSgpXG4gICAgICBhd2FpdCBkYi5jbGVhckFsbCgpXG4gICAgfSlcblxuICAgIHRlc3QoJ+W6lOivpeWcqOW/hemcgOatpemqpOWksei0peaXtuWBnOatoui/geenuycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHRlc3REYXRhID0gVGVzdERhdGFGYWN0b3J5LmNyZWF0ZUJ1bGtUZXN0RGF0YSgyLCAxLCAxKVxuICAgICAgc2V0dXBMb2NhbFN0b3JhZ2VEYXRhKHRlc3REYXRhKVxuXG4gICAgICAvLyDmqKHmi5/lv4XpnIDmraXpqqTvvIjmupDpqozor4HvvInlpLHotKVcbiAgICAgIGNvbnN0IG9yaWdpbmFsVmFsaWRhdGVTb3VyY2UgPSAoZGF0YU1pZ3JhdGlvblRvb2wgYXMgYW55KS52YWxpZGF0ZVNvdXJjZVxuICAgICAgOyhkYXRhTWlncmF0aW9uVG9vbCBhcyBhbnkpLnZhbGlkYXRlU291cmNlID0gamVzdC5mbigpXG4gICAgICAgIC5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgZXJyb3I6ICdDcml0aWNhbCB2YWxpZGF0aW9uIGZhaWx1cmUnXG4gICAgICAgIH0pXG5cbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHNvdXJjZSA9IHtcbiAgICAgICAgICB0eXBlOiAnbG9jYWxTdG9yYWdlJyBhcyBjb25zdCxcbiAgICAgICAgICB2ZXJzaW9uOiAnMS4wJ1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgcGxhbiA9IGF3YWl0IGRhdGFNaWdyYXRpb25Ub29sLmFuYWx5emVBbmRDcmVhdGVQbGFuKHNvdXJjZSlcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZGF0YU1pZ3JhdGlvblRvb2wuZXhlY3V0ZU1pZ3JhdGlvbihwbGFuKVxuXG4gICAgICAgIC8vIOW/hemcgOatpemqpOWksei0peW6lOivpeWvvOiHtOaVtOS4qui/geenu+Wksei0pVxuICAgICAgICBleHBlY3QocmVzdWx0LnN1Y2Nlc3MpLnRvQmUoZmFsc2UpXG4gICAgICAgIGV4cGVjdChyZXN1bHQuZXJyb3JzLnNvbWUoZXJyb3IgPT4gZXJyb3IuaW5jbHVkZXMoJ0NyaXRpY2FsIHZhbGlkYXRpb24gZmFpbHVyZScpKSkudG9CZSh0cnVlKVxuICAgICAgICBleHBlY3QocmVzdWx0LnN0ZXBzQ29tcGxldGVkKS50b0JlKDApIC8vIOayoeacieatpemqpOWujOaIkFxuXG4gICAgICB9IGZpbmFsbHkge1xuICAgICAgICAvLyDmgaLlpI3ljp/lp4vmlrnms5VcbiAgICAgICAgKGRhdGFNaWdyYXRpb25Ub29sIGFzIGFueSkudmFsaWRhdGVTb3VyY2UgPSBvcmlnaW5hbFZhbGlkYXRlU291cmNlXG4gICAgICAgIGNsZWFudXBMb2NhbFN0b3JhZ2UoKVxuICAgICAgfVxuICAgIH0pXG5cbiAgICB0ZXN0KCflupTor6XlnKjlj6/pgInmraXpqqTlpLHotKXml7bnu6fnu63ov4Hnp7snLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCB0ZXN0RGF0YSA9IFRlc3REYXRhRmFjdG9yeS5jcmVhdGVCdWxrVGVzdERhdGEoMiwgMSwgMSlcbiAgICAgIHNldHVwTG9jYWxTdG9yYWdlRGF0YSh0ZXN0RGF0YSlcblxuICAgICAgLy8g5qih5ouf5Y+v6YCJ5q2l6aqk77yI5riF55CG77yJ5aSx6LSlXG4gICAgICBjb25zdCBvcmlnaW5hbENsZWFudXBTb3VyY2UgPSAoZGF0YU1pZ3JhdGlvblRvb2wgYXMgYW55KS5jbGVhbnVwU291cmNlXG4gICAgICA7KGRhdGFNaWdyYXRpb25Ub29sIGFzIGFueSkuY2xlYW51cFNvdXJjZSA9IGplc3QuZm4oKVxuICAgICAgICAubW9ja1Jlc29sdmVkVmFsdWUoe1xuICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICAgIGVycm9yOiAnQ2xlYW51cCBmYWlsZWQnXG4gICAgICAgIH0pXG5cbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHNvdXJjZSA9IHtcbiAgICAgICAgICB0eXBlOiAnbG9jYWxTdG9yYWdlJyBhcyBjb25zdCxcbiAgICAgICAgICB2ZXJzaW9uOiAnMS4wJ1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgcGxhbiA9IGF3YWl0IGRhdGFNaWdyYXRpb25Ub29sLmFuYWx5emVBbmRDcmVhdGVQbGFuKHNvdXJjZSlcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZGF0YU1pZ3JhdGlvblRvb2wuZXhlY3V0ZU1pZ3JhdGlvbihwbGFuKVxuXG4gICAgICAgIC8vIOWPr+mAieatpemqpOWksei0peS4jeW6lOivpemYu+atoui/geenu+aIkOWKn1xuICAgICAgICBleHBlY3QocmVzdWx0LnN1Y2Nlc3MpLnRvQmUodHJ1ZSlcbiAgICAgICAgZXhwZWN0KHJlc3VsdC53YXJuaW5ncy5zb21lKHdhcm5pbmcgPT4gd2FybmluZy5pbmNsdWRlcygnQ2xlYW51cCBmYWlsZWQnKSkpLnRvQmUodHJ1ZSlcbiAgICAgICAgZXhwZWN0KHJlc3VsdC5zdGVwc0NvbXBsZXRlZCkudG9CZShwbGFuLnN0ZXBzLmxlbmd0aCkgLy8g5omA5pyJ5q2l6aqk6YO95bCd6K+V5LqGXG5cbiAgICAgIH0gZmluYWxseSB7XG4gICAgICAgIC8vIOaBouWkjeWOn+Wni+aWueazlVxuICAgICAgICAoZGF0YU1pZ3JhdGlvblRvb2wgYXMgYW55KS5jbGVhbnVwU291cmNlID0gb3JpZ2luYWxDbGVhbnVwU291cmNlXG4gICAgICAgIGNsZWFudXBMb2NhbFN0b3JhZ2UoKVxuICAgICAgfVxuICAgIH0pXG4gIH0pXG5cbiAgZGVzY3JpYmUoJ+iHquWKqOWbnua7muacuuWIticsICgpID0+IHtcbiAgICBiZWZvcmVFYWNoKGFzeW5jICgpID0+IHtcbiAgICAgIGNsZWFudXBMb2NhbFN0b3JhZ2UoKVxuICAgICAgYXdhaXQgZGIuY2xlYXJBbGwoKVxuICAgIH0pXG5cbiAgICBhZnRlckVhY2goYXN5bmMgKCkgPT4ge1xuICAgICAgY2xlYW51cExvY2FsU3RvcmFnZSgpXG4gICAgICBhd2FpdCBkYi5jbGVhckFsbCgpXG4gICAgfSlcblxuICAgIHRlc3QoJ+W6lOivpeWcqOWFs+mUruatpemqpOWksei0peaXtuiHquWKqOWbnua7micsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIOWHhuWkh+WOn+Wni+aVsOaNrlxuICAgICAgY29uc3Qgb3JpZ2luYWxEYXRhID0gVGVzdERhdGFGYWN0b3J5LmNyZWF0ZUJ1bGtUZXN0RGF0YSg1LCAyLCAzKVxuICAgICAgYXdhaXQgZGIuY2FyZHMuYnVsa0FkZChvcmlnaW5hbERhdGEuY2FyZHMubWFwKGNhcmQgPT4gKHtcbiAgICAgICAgLi4uY2FyZCxcbiAgICAgICAgdXNlcklkOiAnZGVmYXVsdCcsXG4gICAgICAgIHN5bmNWZXJzaW9uOiAxLFxuICAgICAgICBwZW5kaW5nU3luYzogZmFsc2UsXG4gICAgICAgIHVwZGF0ZWRBdDogbmV3IERhdGUoKSxcbiAgICAgICAgc2VhcmNoVmVjdG9yOiAnb3JpZ2luYWwgZGF0YSdcbiAgICAgIH0pKSlcblxuICAgICAgY29uc3QgdGVzdERhdGEgPSBUZXN0RGF0YUZhY3RvcnkuY3JlYXRlQnVsa1Rlc3REYXRhKDMsIDEsIDIpXG4gICAgICBzZXR1cExvY2FsU3RvcmFnZURhdGEodGVzdERhdGEpXG5cbiAgICAgIC8vIOaooeaLn+WFs+mUruatpemqpOWksei0pVxuICAgICAgY29uc3Qgb3JpZ2luYWxNaWdyYXRlQ2FyZHMgPSAoZGF0YU1pZ3JhdGlvblRvb2wgYXMgYW55KS5taWdyYXRlQ2FyZHNGcm9tTG9jYWxTdG9yYWdlXG4gICAgICA7KGRhdGFNaWdyYXRpb25Ub29sIGFzIGFueSkubWlncmF0ZUNhcmRzRnJvbUxvY2FsU3RvcmFnZSA9IGplc3QuZm4oKVxuICAgICAgICAubW9ja1JlamVjdGVkVmFsdWUobmV3IEVycm9yKCdDcml0aWNhbCBtaWdyYXRpb24gZmFpbHVyZScpKVxuXG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCBzb3VyY2UgPSB7XG4gICAgICAgICAgdHlwZTogJ2xvY2FsU3RvcmFnZScgYXMgY29uc3QsXG4gICAgICAgICAgdmVyc2lvbjogJzEuMCdcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHBsYW4gPSBhd2FpdCBkYXRhTWlncmF0aW9uVG9vbC5hbmFseXplQW5kQ3JlYXRlUGxhbihzb3VyY2UpXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGRhdGFNaWdyYXRpb25Ub29sLmV4ZWN1dGVNaWdyYXRpb24ocGxhbilcblxuICAgICAgICAvLyDlupTor6XlpLHotKXlubbop6blj5Hlm57mu5pcbiAgICAgICAgZXhwZWN0KHJlc3VsdC5zdWNjZXNzKS50b0JlKGZhbHNlKVxuICAgICAgICBleHBlY3QocmVzdWx0LmVycm9ycy5zb21lKGVycm9yID0+IGVycm9yLmluY2x1ZGVzKCdDcml0aWNhbCBtaWdyYXRpb24gZmFpbHVyZScpKSkudG9CZSh0cnVlKVxuXG4gICAgICAgIC8vIOmqjOivgeaVsOaNruW3suWbnua7mlxuICAgICAgICBjb25zdCBkYkNhcmRzID0gYXdhaXQgZGIuY2FyZHMudG9BcnJheSgpXG4gICAgICAgIGV4cGVjdChkYkNhcmRzLmxlbmd0aCkudG9CZShvcmlnaW5hbERhdGEuY2FyZHMubGVuZ3RoKVxuXG4gICAgICAgIC8vIOmqjOivgeWOn+Wni+aVsOaNruacquWPl+W9seWTjVxuICAgICAgICBkYkNhcmRzLmZvckVhY2goY2FyZCA9PiB7XG4gICAgICAgICAgZXhwZWN0KGNhcmQuc2VhcmNoVmVjdG9yKS50b0JlKCdvcmlnaW5hbCBkYXRhJylcbiAgICAgICAgfSlcblxuICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgLy8g5oGi5aSN5Y6f5aeL5pa55rOVXG4gICAgICAgIChkYXRhTWlncmF0aW9uVG9vbCBhcyBhbnkpLm1pZ3JhdGVDYXJkc0Zyb21Mb2NhbFN0b3JhZ2UgPSBvcmlnaW5hbE1pZ3JhdGVDYXJkc1xuICAgICAgICBjbGVhbnVwTG9jYWxTdG9yYWdlKClcbiAgICAgIH1cbiAgICB9KVxuXG4gICAgdGVzdCgn5bqU6K+l5q2j56Gu5aSE55CG5Zue5rua5aSx6LSl55qE5oOF5Ya1JywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgdGVzdERhdGEgPSBUZXN0RGF0YUZhY3RvcnkuY3JlYXRlQnVsa1Rlc3REYXRhKDIsIDEsIDEpXG4gICAgICBzZXR1cExvY2FsU3RvcmFnZURhdGEodGVzdERhdGEpXG5cbiAgICAgIC8vIOaooeaLn+i/geenu+Wksei0pVxuICAgICAgY29uc3Qgb3JpZ2luYWxFeGVjdXRlU3RlcCA9IChkYXRhTWlncmF0aW9uVG9vbCBhcyBhbnkpLmV4ZWN1dGVTdGVwXG4gICAgICA7KGRhdGFNaWdyYXRpb25Ub29sIGFzIGFueSkuZXhlY3V0ZVN0ZXAgPSBqZXN0LmZuKClcbiAgICAgICAgLm1vY2tSZWplY3RlZFZhbHVlKG5ldyBFcnJvcignTWlncmF0aW9uIGZhaWxlZCcpKVxuXG4gICAgICAvLyDmqKHmi5/lm57mu5rkuZ/lpLHotKVcbiAgICAgIGNvbnN0IG9yaWdpbmFsUm9sbGJhY2tNaWdyYXRpb24gPSAoZGF0YU1pZ3JhdGlvblRvb2wgYXMgYW55KS5yb2xsYmFja01pZ3JhdGlvblxuICAgICAgOyhkYXRhTWlncmF0aW9uVG9vbCBhcyBhbnkpLnJvbGxiYWNrTWlncmF0aW9uID0gamVzdC5mbigpXG4gICAgICAgIC5tb2NrUmVqZWN0ZWRWYWx1ZShuZXcgRXJyb3IoJ1JvbGxiYWNrIGFsc28gZmFpbGVkJykpXG5cbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHNvdXJjZSA9IHtcbiAgICAgICAgICB0eXBlOiAnbG9jYWxTdG9yYWdlJyBhcyBjb25zdCxcbiAgICAgICAgICB2ZXJzaW9uOiAnMS4wJ1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgcGxhbiA9IGF3YWl0IGRhdGFNaWdyYXRpb25Ub29sLmFuYWx5emVBbmRDcmVhdGVQbGFuKHNvdXJjZSlcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZGF0YU1pZ3JhdGlvblRvb2wuZXhlY3V0ZU1pZ3JhdGlvbihwbGFuKVxuXG4gICAgICAgIC8vIOW6lOivpeiusOW9lei/geenu+Wksei0peWSjOWbnua7muWksei0pVxuICAgICAgICBleHBlY3QocmVzdWx0LnN1Y2Nlc3MpLnRvQmUoZmFsc2UpXG4gICAgICAgIGV4cGVjdChyZXN1bHQuZXJyb3JzLnNvbWUoZXJyb3IgPT4gZXJyb3IuaW5jbHVkZXMoJ01pZ3JhdGlvbiBmYWlsZWQnKSkpLnRvQmUodHJ1ZSlcbiAgICAgICAgZXhwZWN0KHJlc3VsdC5lcnJvcnMuc29tZShlcnJvciA9PiBlcnJvci5pbmNsdWRlcygnUm9sbGJhY2sgZmFpbGVkJykpKS50b0JlKHRydWUpXG5cbiAgICAgIH0gZmluYWxseSB7XG4gICAgICAgIC8vIOaBouWkjeWOn+Wni+aWueazlVxuICAgICAgICAoZGF0YU1pZ3JhdGlvblRvb2wgYXMgYW55KS5leGVjdXRlU3RlcCA9IG9yaWdpbmFsRXhlY3V0ZVN0ZXBcbiAgICAgICAgKGRhdGFNaWdyYXRpb25Ub29sIGFzIGFueSkucm9sbGJhY2tNaWdyYXRpb24gPSBvcmlnaW5hbFJvbGxiYWNrTWlncmF0aW9uXG4gICAgICAgIGNsZWFudXBMb2NhbFN0b3JhZ2UoKVxuICAgICAgfVxuICAgIH0pXG5cbiAgICB0ZXN0KCflupTor6XlnKjlm57mu5rlkI7pqozor4HmlbDmja7kuIDoh7TmgKcnLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyDlh4blpIflpI3mnYLnmoTljp/lp4vmlbDmja7lhbPns7tcbiAgICAgIGNvbnN0IG9yaWdpbmFsRGF0YSA9IFRlc3REYXRhRmFjdG9yeS5jcmVhdGVCdWxrVGVzdERhdGEoMTAsIDMsIDUpXG5cbiAgICAgIC8vIOW7uueri+aWh+S7tuWkueW8leeUqOWFs+ezu1xuICAgICAgb3JpZ2luYWxEYXRhLmNhcmRzLmZvckVhY2goKGNhcmQsIGluZGV4KSA9PiB7XG4gICAgICAgIGNhcmQuZm9sZGVySWQgPSBvcmlnaW5hbERhdGEuZm9sZGVyc1tpbmRleCAlIG9yaWdpbmFsRGF0YS5mb2xkZXJzLmxlbmd0aF0uaWRcbiAgICAgIH0pXG5cbiAgICAgIGF3YWl0IGRiLmNhcmRzLmJ1bGtBZGQob3JpZ2luYWxEYXRhLmNhcmRzLm1hcChjYXJkID0+ICh7XG4gICAgICAgIC4uLmNhcmQsXG4gICAgICAgIHVzZXJJZDogJ2RlZmF1bHQnLFxuICAgICAgICBzeW5jVmVyc2lvbjogMSxcbiAgICAgICAgcGVuZGluZ1N5bmM6IGZhbHNlLFxuICAgICAgICB1cGRhdGVkQXQ6IG5ldyBEYXRlKCksXG4gICAgICAgIHNlYXJjaFZlY3RvcjogJ29yaWdpbmFsIGNvbXBsZXggZGF0YSdcbiAgICAgIH0pKSlcbiAgICAgIGF3YWl0IGRiLmZvbGRlcnMuYnVsa0FkZChvcmlnaW5hbERhdGEuZm9sZGVycy5tYXAoZm9sZGVyID0+ICh7XG4gICAgICAgIC4uLmZvbGRlcixcbiAgICAgICAgdXNlcklkOiAnZGVmYXVsdCcsXG4gICAgICAgIHN5bmNWZXJzaW9uOiAxLFxuICAgICAgICBwZW5kaW5nU3luYzogZmFsc2UsXG4gICAgICAgIHVwZGF0ZWRBdDogbmV3IERhdGUoKSxcbiAgICAgICAgZnVsbFBhdGg6IGZvbGRlci5uYW1lLFxuICAgICAgICBkZXB0aDogMFxuICAgICAgfSkpKVxuICAgICAgYXdhaXQgZGIudGFncy5idWxrQWRkKG9yaWdpbmFsRGF0YS50YWdzLm1hcCh0YWcgPT4gKHtcbiAgICAgICAgLi4udGFnLFxuICAgICAgICB1c2VySWQ6ICdkZWZhdWx0JyxcbiAgICAgICAgc3luY1ZlcnNpb246IDEsXG4gICAgICAgIHBlbmRpbmdTeW5jOiBmYWxzZSxcbiAgICAgICAgdXBkYXRlZEF0OiBuZXcgRGF0ZSgpLFxuICAgICAgICBjb3VudDogMFxuICAgICAgfSkpKVxuXG4gICAgICBjb25zdCB0ZXN0RGF0YSA9IFRlc3REYXRhRmFjdG9yeS5jcmVhdGVCdWxrVGVzdERhdGEoNSwgMiwgMylcbiAgICAgIHNldHVwTG9jYWxTdG9yYWdlRGF0YSh0ZXN0RGF0YSlcblxuICAgICAgLy8g5qih5ouf6L+B56e75aSx6LSlXG4gICAgICBjb25zdCBvcmlnaW5hbFRyYW5zZm9ybURhdGEgPSAoZGF0YU1pZ3JhdGlvblRvb2wgYXMgYW55KS50cmFuc2Zvcm1EYXRhXG4gICAgICA7KGRhdGFNaWdyYXRpb25Ub29sIGFzIGFueSkudHJhbnNmb3JtRGF0YSA9IGplc3QuZm4oKVxuICAgICAgICAubW9ja1JlamVjdGVkVmFsdWUobmV3IEVycm9yKCdEYXRhIHRyYW5zZm9ybWF0aW9uIGZhaWxlZCcpKVxuXG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCBzb3VyY2UgPSB7XG4gICAgICAgICAgdHlwZTogJ2xvY2FsU3RvcmFnZScgYXMgY29uc3QsXG4gICAgICAgICAgdmVyc2lvbjogJzEuMCdcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHBsYW4gPSBhd2FpdCBkYXRhTWlncmF0aW9uVG9vbC5hbmFseXplQW5kQ3JlYXRlUGxhbihzb3VyY2UpXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGRhdGFNaWdyYXRpb25Ub29sLmV4ZWN1dGVNaWdyYXRpb24ocGxhbilcblxuICAgICAgICBleHBlY3QocmVzdWx0LnN1Y2Nlc3MpLnRvQmUoZmFsc2UpXG5cbiAgICAgICAgLy8g6aqM6K+B5Zue5rua5ZCO55qE5pWw5o2u5LiA6Ie05oCnXG4gICAgICAgIGNvbnN0IHZhbGlkYXRpb25SZXBvcnQgPSBhd2FpdCBkYXRhTWlncmF0aW9uVG9vbC5jcmVhdGVWYWxpZGF0aW9uUmVwb3J0KClcblxuICAgICAgICBleHBlY3QodmFsaWRhdGlvblJlcG9ydC5zdWNjZXNzKS50b0JlKHRydWUpXG4gICAgICAgIGV4cGVjdCh2YWxpZGF0aW9uUmVwb3J0LmNvbnNpc3RlbmN5LnJlZmVyZW5jZXNWYWxpZCkudG9CZSh0cnVlKVxuICAgICAgICBleHBlY3QodmFsaWRhdGlvblJlcG9ydC5jb25zaXN0ZW5jeS5vcnBoYW5zRm91bmQpLnRvQmUoMClcblxuICAgICAgICAvLyDpqozor4Hljp/lp4vmlbDmja7lhbPns7vlrozmlbRcbiAgICAgICAgY29uc3QgZGJDYXJkcyA9IGF3YWl0IGRiLmNhcmRzLnRvQXJyYXkoKVxuICAgICAgICBjb25zdCBkYkZvbGRlcnMgPSBhd2FpdCBkYi5mb2xkZXJzLnRvQXJyYXkoKVxuXG4gICAgICAgIGRiQ2FyZHMuZm9yRWFjaChjYXJkID0+IHtcbiAgICAgICAgICBpZiAoY2FyZC5mb2xkZXJJZCkge1xuICAgICAgICAgICAgZXhwZWN0KGRiRm9sZGVycy5zb21lKGZvbGRlciA9PiBmb2xkZXIuaWQgPT09IGNhcmQuZm9sZGVySWQpKS50b0JlKHRydWUpXG4gICAgICAgICAgfVxuICAgICAgICB9KVxuXG4gICAgICB9IGZpbmFsbHkge1xuICAgICAgICAvLyDmgaLlpI3ljp/lp4vmlrnms5VcbiAgICAgICAgKGRhdGFNaWdyYXRpb25Ub29sIGFzIGFueSkudHJhbnNmb3JtRGF0YSA9IG9yaWdpbmFsVHJhbnNmb3JtRGF0YVxuICAgICAgICBjbGVhbnVwTG9jYWxTdG9yYWdlKClcbiAgICAgIH1cbiAgICB9KVxuICB9KVxuXG4gIGRlc2NyaWJlKCfplJnor6/mgaLlpI3lkozph43or5XmnLrliLYnLCAoKSA9PiB7XG4gICAgYmVmb3JlRWFjaChhc3luYyAoKSA9PiB7XG4gICAgICBjbGVhbnVwTG9jYWxTdG9yYWdlKClcbiAgICAgIGF3YWl0IGRiLmNsZWFyQWxsKClcbiAgICB9KVxuXG4gICAgYWZ0ZXJFYWNoKGFzeW5jICgpID0+IHtcbiAgICAgIGNsZWFudXBMb2NhbFN0b3JhZ2UoKVxuICAgICAgYXdhaXQgZGIuY2xlYXJBbGwoKVxuICAgIH0pXG5cbiAgICB0ZXN0KCflupTor6XmoLnmja7plJnor6/nsbvlnovlhrPlrprph43or5XnrZbnlaUnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCB0ZXN0RGF0YSA9IFRlc3REYXRhRmFjdG9yeS5jcmVhdGVCdWxrVGVzdERhdGEoMywgMSwgMSlcbiAgICAgIHNldHVwTG9jYWxTdG9yYWdlRGF0YSh0ZXN0RGF0YSlcblxuICAgICAgbGV0IGF0dGVtcHRDb3VudCA9IDBcblxuICAgICAgLy8g5qih5ouf5pqC5pe25oCn6ZSZ6K+v77yM54S25ZCO5oiQ5YqfXG4gICAgICBjb25zdCBvcmlnaW5hbE1pZ3JhdGVDYXJkcyA9IChkYXRhTWlncmF0aW9uVG9vbCBhcyBhbnkpLm1pZ3JhdGVDYXJkc0Zyb21Mb2NhbFN0b3JhZ2VcbiAgICAgIDsoZGF0YU1pZ3JhdGlvblRvb2wgYXMgYW55KS5taWdyYXRlQ2FyZHNGcm9tTG9jYWxTdG9yYWdlID0gamVzdC5mbigpXG4gICAgICAgIC5tb2NrSW1wbGVtZW50YXRpb24oYXN5bmMgKCkgPT4ge1xuICAgICAgICAgIGF0dGVtcHRDb3VudCsrXG4gICAgICAgICAgaWYgKGF0dGVtcHRDb3VudCA8PSAyKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1RlbXBvcmFyeSBuZXR3b3JrIGVycm9yJylcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgICAgICBtaWdyYXRlZENhcmRzOiB0ZXN0RGF0YS5jYXJkcy5sZW5ndGgsXG4gICAgICAgICAgICBkYXRhU2l6ZTogMTAyNFxuICAgICAgICAgIH1cbiAgICAgICAgfSlcblxuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3Qgc291cmNlID0ge1xuICAgICAgICAgIHR5cGU6ICdsb2NhbFN0b3JhZ2UnIGFzIGNvbnN0LFxuICAgICAgICAgIHZlcnNpb246ICcxLjAnXG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBwbGFuID0gYXdhaXQgZGF0YU1pZ3JhdGlvblRvb2wuYW5hbHl6ZUFuZENyZWF0ZVBsYW4oc291cmNlKVxuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBkYXRhTWlncmF0aW9uVG9vbC5leGVjdXRlTWlncmF0aW9uKHBsYW4pXG5cbiAgICAgICAgLy8g6YeN6K+V5ZCO5bqU6K+l5oiQ5YqfXG4gICAgICAgIGV4cGVjdChyZXN1bHQuc3VjY2VzcykudG9CZSh0cnVlKVxuICAgICAgICBleHBlY3QoYXR0ZW1wdENvdW50KS50b0JlKDMpIC8vIOWIneWni+WwneivlSArIDLmrKHph43or5VcblxuICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgLy8g5oGi5aSN5Y6f5aeL5pa55rOVXG4gICAgICAgIChkYXRhTWlncmF0aW9uVG9vbCBhcyBhbnkpLm1pZ3JhdGVDYXJkc0Zyb21Mb2NhbFN0b3JhZ2UgPSBvcmlnaW5hbE1pZ3JhdGVDYXJkc1xuICAgICAgICBjbGVhbnVwTG9jYWxTdG9yYWdlKClcbiAgICAgIH1cbiAgICB9KVxuXG4gICAgdGVzdCgn5bqU6K+l5a+55rC45LmF5oCn6ZSZ6K+v5b+r6YCf5aSx6LSlJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgdGVzdERhdGEgPSBUZXN0RGF0YUZhY3RvcnkuY3JlYXRlQnVsa1Rlc3REYXRhKDIsIDEsIDEpXG4gICAgICBzZXR1cExvY2FsU3RvcmFnZURhdGEodGVzdERhdGEpXG5cbiAgICAgIC8vIOaooeaLn+awuOS5heaAp+mUmeivr1xuICAgICAgY29uc3Qgb3JpZ2luYWxNaWdyYXRlQ2FyZHMgPSAoZGF0YU1pZ3JhdGlvblRvb2wgYXMgYW55KS5taWdyYXRlQ2FyZHNGcm9tTG9jYWxTdG9yYWdlXG4gICAgICA7KGRhdGFNaWdyYXRpb25Ub29sIGFzIGFueSkubWlncmF0ZUNhcmRzRnJvbUxvY2FsU3RvcmFnZSA9IGplc3QuZm4oKVxuICAgICAgICAubW9ja1JlamVjdGVkVmFsdWUobmV3IEVycm9yKCdJbnZhbGlkIGRhdGEgZm9ybWF0IC0gcGVybWFuZW50IGVycm9yJykpXG5cbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHNvdXJjZSA9IHtcbiAgICAgICAgICB0eXBlOiAnbG9jYWxTdG9yYWdlJyBhcyBjb25zdCxcbiAgICAgICAgICB2ZXJzaW9uOiAnMS4wJ1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgcGxhbiA9IGF3YWl0IGRhdGFNaWdyYXRpb25Ub29sLmFuYWx5emVBbmRDcmVhdGVQbGFuKHNvdXJjZSlcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZGF0YU1pZ3JhdGlvblRvb2wuZXhlY3V0ZU1pZ3JhdGlvbihwbGFuKVxuXG4gICAgICAgIC8vIOawuOS5heaAp+mUmeivr+W6lOivpeW/q+mAn+Wksei0pVxuICAgICAgICBleHBlY3QocmVzdWx0LnN1Y2Nlc3MpLnRvQmUoZmFsc2UpXG4gICAgICAgIGV4cGVjdChyZXN1bHQuZXJyb3JzLnNvbWUoZXJyb3IgPT4gZXJyb3IuaW5jbHVkZXMoJ0ludmFsaWQgZGF0YSBmb3JtYXQnKSkpLnRvQmUodHJ1ZSlcblxuICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgLy8g5oGi5aSN5Y6f5aeL5pa55rOVXG4gICAgICAgIChkYXRhTWlncmF0aW9uVG9vbCBhcyBhbnkpLm1pZ3JhdGVDYXJkc0Zyb21Mb2NhbFN0b3JhZ2UgPSBvcmlnaW5hbE1pZ3JhdGVDYXJkc1xuICAgICAgICBjbGVhbnVwTG9jYWxTdG9yYWdlKClcbiAgICAgIH1cbiAgICB9KVxuXG4gICAgdGVzdCgn5bqU6K+l5Zyo6YeN6K+V6Ze06ZqU5aKe5Yqg5bu26L+fJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgdGVzdERhdGEgPSBUZXN0RGF0YUZhY3RvcnkuY3JlYXRlQnVsa1Rlc3REYXRhKDEsIDAsIDApXG4gICAgICBzZXR1cExvY2FsU3RvcmFnZURhdGEodGVzdERhdGEpXG5cbiAgICAgIGNvbnN0IGNhbGxUaW1lczogbnVtYmVyW10gPSBbXVxuXG4gICAgICAvLyDmqKHmi5/pnIDopoHph43or5XnmoTmraXpqqRcbiAgICAgIGNvbnN0IG9yaWdpbmFsRGVsYXkgPSAoZGF0YU1pZ3JhdGlvblRvb2wgYXMgYW55KS5kZWxheVxuICAgICAgOyhkYXRhTWlncmF0aW9uVG9vbCBhcyBhbnkpLmRlbGF5ID0gamVzdC5mbigpXG4gICAgICAgIC5tb2NrSW1wbGVtZW50YXRpb24oYXN5bmMgKG1zOiBudW1iZXIpID0+IHtcbiAgICAgICAgICBjYWxsVGltZXMucHVzaChEYXRlLm5vdygpKVxuICAgICAgICAgIGF3YWl0IG9yaWdpbmFsRGVsYXkuY2FsbChkYXRhTWlncmF0aW9uVG9vbCwgbXMpXG4gICAgICAgIH0pXG5cbiAgICAgIGNvbnN0IG9yaWdpbmFsTWlncmF0ZUNhcmRzID0gKGRhdGFNaWdyYXRpb25Ub29sIGFzIGFueSkubWlncmF0ZUNhcmRzRnJvbUxvY2FsU3RvcmFnZVxuICAgICAgOyhkYXRhTWlncmF0aW9uVG9vbCBhcyBhbnkpLm1pZ3JhdGVDYXJkc0Zyb21Mb2NhbFN0b3JhZ2UgPSBqZXN0LmZuKClcbiAgICAgICAgLm1vY2tJbXBsZW1lbnRhdGlvbihhc3luYyAoKSA9PiB7XG4gICAgICAgICAgaWYgKGNhbGxUaW1lcy5sZW5ndGggPCAzKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JldHJ5YWJsZSBlcnJvcicpXG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICAgICAgbWlncmF0ZWRDYXJkczogMSxcbiAgICAgICAgICAgIGRhdGFTaXplOiA1MTJcbiAgICAgICAgICB9XG4gICAgICAgIH0pXG5cbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHNvdXJjZSA9IHtcbiAgICAgICAgICB0eXBlOiAnbG9jYWxTdG9yYWdlJyBhcyBjb25zdCxcbiAgICAgICAgICB2ZXJzaW9uOiAnMS4wJ1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgcGxhbiA9IGF3YWl0IGRhdGFNaWdyYXRpb25Ub29sLmFuYWx5emVBbmRDcmVhdGVQbGFuKHNvdXJjZSlcbiAgICAgICAgY29uc3Qgc3RhcnRUaW1lID0gRGF0ZS5ub3coKVxuXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGRhdGFNaWdyYXRpb25Ub29sLmV4ZWN1dGVNaWdyYXRpb24ocGxhbilcbiAgICAgICAgY29uc3QgZW5kVGltZSA9IERhdGUubm93KClcblxuICAgICAgICAvLyDlupTor6Xph43or5XlubbmnIDnu4jmiJDlip9cbiAgICAgICAgZXhwZWN0KHJlc3VsdC5zdWNjZXNzKS50b0JlKHRydWUpXG4gICAgICAgIGV4cGVjdChjYWxsVGltZXMubGVuZ3RoKS50b0JlKDMpIC8vIDPmrKHph43or5VcblxuICAgICAgICAvLyDpqozor4Hph43or5Xpl7TpmpTpgJLlop5cbiAgICAgICAgZXhwZWN0KGNhbGxUaW1lc1sxXSAtIGNhbGxUaW1lc1swXSkudG9CZUdyZWF0ZXJUaGFuKDApXG4gICAgICAgIGV4cGVjdChjYWxsVGltZXNbMl0gLSBjYWxsVGltZXNbMV0pLnRvQmVHcmVhdGVyVGhhbihjYWxsVGltZXNbMV0gLSBjYWxsVGltZXNbMF0pXG5cbiAgICAgIH0gZmluYWxseSB7XG4gICAgICAgIC8vIOaBouWkjeWOn+Wni+aWueazlVxuICAgICAgICAoZGF0YU1pZ3JhdGlvblRvb2wgYXMgYW55KS5kZWxheSA9IG9yaWdpbmFsRGVsYXlcbiAgICAgICAgKGRhdGFNaWdyYXRpb25Ub29sIGFzIGFueSkubWlncmF0ZUNhcmRzRnJvbUxvY2FsU3RvcmFnZSA9IG9yaWdpbmFsTWlncmF0ZUNhcmRzXG4gICAgICAgIGNsZWFudXBMb2NhbFN0b3JhZ2UoKVxuICAgICAgfVxuICAgIH0pXG4gIH0pXG5cbiAgZGVzY3JpYmUoJ+mUmeivr+aKpeWRiuWSjOiviuaWrScsICgpID0+IHtcbiAgICBiZWZvcmVFYWNoKGFzeW5jICgpID0+IHtcbiAgICAgIGNsZWFudXBMb2NhbFN0b3JhZ2UoKVxuICAgICAgYXdhaXQgZGIuY2xlYXJBbGwoKVxuICAgIH0pXG5cbiAgICBhZnRlckVhY2goYXN5bmMgKCkgPT4ge1xuICAgICAgY2xlYW51cExvY2FsU3RvcmFnZSgpXG4gICAgICBhd2FpdCBkYi5jbGVhckFsbCgpXG4gICAgfSlcblxuICAgIHRlc3QoJ+W6lOivpeaPkOS+m+ivpue7hueahOmUmeivr+S/oeaBrycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHRlc3REYXRhID0gVGVzdERhdGFGYWN0b3J5LmNyZWF0ZUJ1bGtUZXN0RGF0YSgyLCAxLCAxKVxuICAgICAgc2V0dXBMb2NhbFN0b3JhZ2VEYXRhKHRlc3REYXRhKVxuXG4gICAgICAvLyDmqKHmi5/kuI3lkIznsbvlnovnmoTplJnor69cbiAgICAgIGNvbnN0IG9yaWdpbmFsTWlncmF0ZUNhcmRzID0gKGRhdGFNaWdyYXRpb25Ub29sIGFzIGFueSkubWlncmF0ZUNhcmRzRnJvbUxvY2FsU3RvcmFnZVxuICAgICAgOyhkYXRhTWlncmF0aW9uVG9vbCBhcyBhbnkpLm1pZ3JhdGVDYXJkc0Zyb21Mb2NhbFN0b3JhZ2UgPSBqZXN0LmZuKClcbiAgICAgICAgLm1vY2tSZWplY3RlZFZhbHVlKG5ldyBFcnJvcignQ2FyZCBtaWdyYXRpb24gZmFpbGVkOiBjb25zdHJhaW50IHZpb2xhdGlvbiBvbiB1bmlxdWUgaW5kZXgnKSlcblxuICAgICAgY29uc3Qgb3JpZ2luYWxNaWdyYXRlRm9sZGVycyA9IChkYXRhTWlncmF0aW9uVG9vbCBhcyBhbnkpLm1pZ3JhdGVGb2xkZXJzRnJvbUxvY2FsU3RvcmFnZVxuICAgICAgOyhkYXRhTWlncmF0aW9uVG9vbCBhcyBhbnkpLm1pZ3JhdGVGb2xkZXJzRnJvbUxvY2FsU3RvcmFnZSA9IGplc3QuZm4oKVxuICAgICAgICAubW9ja1JlamVjdGVkVmFsdWUobmV3IEVycm9yKCdGb2xkZXIgbWlncmF0aW9uIGZhaWxlZDogcGFyZW50IGZvbGRlciBub3QgZm91bmQnKSlcblxuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3Qgc291cmNlID0ge1xuICAgICAgICAgIHR5cGU6ICdsb2NhbFN0b3JhZ2UnIGFzIGNvbnN0LFxuICAgICAgICAgIHZlcnNpb246ICcxLjAnXG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBwbGFuID0gYXdhaXQgZGF0YU1pZ3JhdGlvblRvb2wuYW5hbHl6ZUFuZENyZWF0ZVBsYW4oc291cmNlKVxuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBkYXRhTWlncmF0aW9uVG9vbC5leGVjdXRlTWlncmF0aW9uKHBsYW4pXG5cbiAgICAgICAgZXhwZWN0KHJlc3VsdC5zdWNjZXNzKS50b0JlKGZhbHNlKVxuXG4gICAgICAgIC8vIOmqjOivgemUmeivr+S/oeaBr+ivpue7hueoi+W6plxuICAgICAgICBleHBlY3QocmVzdWx0LmVycm9ycy5sZW5ndGgpLnRvQmVHcmVhdGVyVGhhbigwKVxuICAgICAgICBleHBlY3QocmVzdWx0LmVycm9ycy5zb21lKGVycm9yID0+IGVycm9yLmluY2x1ZGVzKCdDYXJkIG1pZ3JhdGlvbiBmYWlsZWQnKSkpLnRvQmUodHJ1ZSlcbiAgICAgICAgZXhwZWN0KHJlc3VsdC5lcnJvcnMuc29tZShlcnJvciA9PiBlcnJvci5pbmNsdWRlcygnRm9sZGVyIG1pZ3JhdGlvbiBmYWlsZWQnKSkpLnRvQmUodHJ1ZSlcblxuICAgICAgICAvLyDpqozor4HplJnor6/ljIXlkKvmnInnlKjnmoTkuIrkuIvmlofkv6Hmga9cbiAgICAgICAgY29uc3QgY2FyZEVycm9yID0gcmVzdWx0LmVycm9ycy5maW5kKGUgPT4gZS5pbmNsdWRlcygnQ2FyZCBtaWdyYXRpb24gZmFpbGVkJykpXG4gICAgICAgIGV4cGVjdChjYXJkRXJyb3IpLnRvQ29udGFpbignY29uc3RyYWludCB2aW9sYXRpb24nKVxuXG4gICAgICAgIGNvbnN0IGZvbGRlckVycm9yID0gcmVzdWx0LmVycm9ycy5maW5kKGUgPT4gZS5pbmNsdWRlcygnRm9sZGVyIG1pZ3JhdGlvbiBmYWlsZWQnKSlcbiAgICAgICAgZXhwZWN0KGZvbGRlckVycm9yKS50b0NvbnRhaW4oJ3BhcmVudCBmb2xkZXIgbm90IGZvdW5kJylcblxuICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgLy8g5oGi5aSN5Y6f5aeL5pa55rOVXG4gICAgICAgIChkYXRhTWlncmF0aW9uVG9vbCBhcyBhbnkpLm1pZ3JhdGVDYXJkc0Zyb21Mb2NhbFN0b3JhZ2UgPSBvcmlnaW5hbE1pZ3JhdGVDYXJkc1xuICAgICAgICAoZGF0YU1pZ3JhdGlvblRvb2wgYXMgYW55KS5taWdyYXRlRm9sZGVyc0Zyb21Mb2NhbFN0b3JhZ2UgPSBvcmlnaW5hbE1pZ3JhdGVGb2xkZXJzXG4gICAgICAgIGNsZWFudXBMb2NhbFN0b3JhZ2UoKVxuICAgICAgfVxuICAgIH0pXG5cbiAgICB0ZXN0KCflupTor6XljLrliIbplJnor6/lkozorablkYonLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCB0ZXN0RGF0YSA9IFRlc3REYXRhRmFjdG9yeS5jcmVhdGVCdWxrVGVzdERhdGEoMywgMSwgMilcbiAgICAgIHNldHVwTG9jYWxTdG9yYWdlRGF0YSh0ZXN0RGF0YSlcblxuICAgICAgLy8g5qih5ouf5Lqn55Sf6K2m5ZGK5L2G5LiN5a6M5YWo5aSx6LSl55qE5oOF5Ya1XG4gICAgICBjb25zdCBvcmlnaW5hbE1pZ3JhdGVJbWFnZXMgPSAoZGF0YU1pZ3JhdGlvblRvb2wgYXMgYW55KS5taWdyYXRlSW1hZ2VzRnJvbUxvY2FsU3RvcmFnZVxuICAgICAgOyhkYXRhTWlncmF0aW9uVG9vbCBhcyBhbnkpLm1pZ3JhdGVJbWFnZXNGcm9tTG9jYWxTdG9yYWdlID0gamVzdC5mbigpXG4gICAgICAgIC5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgICBtaWdyYXRlZEltYWdlczogMSxcbiAgICAgICAgICBkYXRhU2l6ZTogMTAyNCxcbiAgICAgICAgICB3YXJuaW5nczogWydTb21lIGltYWdlcyBjb3VsZCBub3QgYmUgbWlncmF0ZWQgZHVlIHRvIHVuc3VwcG9ydGVkIGZvcm1hdCddXG4gICAgICAgIH0pXG5cbiAgICAgIC8vIOaooeaLn+mDqOWIhuWksei0pVxuICAgICAgY29uc3Qgb3JpZ2luYWxNaWdyYXRlVGFncyA9IChkYXRhTWlncmF0aW9uVG9vbCBhcyBhbnkpLm1pZ3JhdGVUYWdzRnJvbUxvY2FsU3RvcmFnZVxuICAgICAgOyhkYXRhTWlncmF0aW9uVG9vbCBhcyBhbnkpLm1pZ3JhdGVUYWdzRnJvbUxvY2FsU3RvcmFnZSA9IGplc3QuZm4oKVxuICAgICAgICAubW9ja1JlamVjdGVkVmFsdWUobmV3IEVycm9yKCdUYWcgbWlncmF0aW9uIGZhaWxlZCcpKVxuXG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCBzb3VyY2UgPSB7XG4gICAgICAgICAgdHlwZTogJ2xvY2FsU3RvcmFnZScgYXMgY29uc3QsXG4gICAgICAgICAgdmVyc2lvbjogJzEuMCdcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHBsYW4gPSBhd2FpdCBkYXRhTWlncmF0aW9uVG9vbC5hbmFseXplQW5kQ3JlYXRlUGxhbihzb3VyY2UpXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGRhdGFNaWdyYXRpb25Ub29sLmV4ZWN1dGVNaWdyYXRpb24ocGxhbilcblxuICAgICAgICBleHBlY3QocmVzdWx0LnN1Y2Nlc3MpLnRvQmUoZmFsc2UpXG5cbiAgICAgICAgLy8g6aqM6K+B5pyJ6ZSZ6K+vXG4gICAgICAgIGV4cGVjdChyZXN1bHQuZXJyb3JzLmxlbmd0aCkudG9CZUdyZWF0ZXJUaGFuKDApXG4gICAgICAgIGV4cGVjdChyZXN1bHQuZXJyb3JzLnNvbWUoZXJyb3IgPT4gZXJyb3IuaW5jbHVkZXMoJ1RhZyBtaWdyYXRpb24gZmFpbGVkJykpKS50b0JlKHRydWUpXG5cbiAgICAgICAgLy8g6aqM6K+B5pyJ6K2m5ZGKXG4gICAgICAgIGV4cGVjdChyZXN1bHQud2FybmluZ3MubGVuZ3RoKS50b0JlR3JlYXRlclRoYW4oMClcbiAgICAgICAgZXhwZWN0KHJlc3VsdC53YXJuaW5ncy5zb21lKHdhcm5pbmcgPT4gd2FybmluZy5pbmNsdWRlcygndW5zdXBwb3J0ZWQgZm9ybWF0JykpKS50b0JlKHRydWUpXG5cbiAgICAgICAgLy8g6ZSZ6K+v5ZKM6K2m5ZGK5bqU6K+l5YiG5byA6K6w5b2VXG4gICAgICAgIGV4cGVjdChyZXN1bHQuZXJyb3JzLmxlbmd0aCArIHJlc3VsdC53YXJuaW5ncy5sZW5ndGgpLnRvQmVHcmVhdGVyVGhhbigxKVxuXG4gICAgICB9IGZpbmFsbHkge1xuICAgICAgICAvLyDmgaLlpI3ljp/lp4vmlrnms5VcbiAgICAgICAgKGRhdGFNaWdyYXRpb25Ub29sIGFzIGFueSkubWlncmF0ZUltYWdlc0Zyb21Mb2NhbFN0b3JhZ2UgPSBvcmlnaW5hbE1pZ3JhdGVJbWFnZXNcbiAgICAgICAgKGRhdGFNaWdyYXRpb25Ub29sIGFzIGFueSkubWlncmF0ZVRhZ3NGcm9tTG9jYWxTdG9yYWdlID0gb3JpZ2luYWxNaWdyYXRlVGFnc1xuICAgICAgICBjbGVhbnVwTG9jYWxTdG9yYWdlKClcbiAgICAgIH1cbiAgICB9KVxuXG4gICAgdGVzdCgn5bqU6K+l5Zyo5aSx6LSl5ZCO5o+Q5L6b5oGi5aSN5bu66K6uJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgdGVzdERhdGEgPSBUZXN0RGF0YUZhY3RvcnkuY3JlYXRlQnVsa1Rlc3REYXRhKDIsIDEsIDEpXG4gICAgICBzZXR1cExvY2FsU3RvcmFnZURhdGEodGVzdERhdGEpXG5cbiAgICAgIC8vIOaooeaLn+WtmOWCqOepuumXtOS4jei2s+mUmeivr1xuICAgICAgY29uc3Qgb3JpZ2luYWxDcmVhdGVCYWNrdXAgPSAoZGF0YU1pZ3JhdGlvblRvb2wgYXMgYW55KS5jcmVhdGVCYWNrdXBcbiAgICAgIDsoZGF0YU1pZ3JhdGlvblRvb2wgYXMgYW55KS5jcmVhdGVCYWNrdXAgPSBqZXN0LmZuKClcbiAgICAgICAgLm1vY2tSZWplY3RlZFZhbHVlKG5ldyBFcnJvcignSW5zdWZmaWNpZW50IHN0b3JhZ2Ugc3BhY2UgZm9yIGJhY2t1cCcpKVxuXG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCBzb3VyY2UgPSB7XG4gICAgICAgICAgdHlwZTogJ2xvY2FsU3RvcmFnZScgYXMgY29uc3QsXG4gICAgICAgICAgdmVyc2lvbjogJzEuMCdcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHBsYW4gPSBhd2FpdCBkYXRhTWlncmF0aW9uVG9vbC5hbmFseXplQW5kQ3JlYXRlUGxhbihzb3VyY2UpXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGRhdGFNaWdyYXRpb25Ub29sLmV4ZWN1dGVNaWdyYXRpb24ocGxhbilcblxuICAgICAgICBleHBlY3QocmVzdWx0LnN1Y2Nlc3MpLnRvQmUoZmFsc2UpXG5cbiAgICAgICAgLy8g6aqM6K+B5Yib5bu66aqM6K+B5oql5ZGK5LuN54S25Y+v55SoXG4gICAgICAgIGNvbnN0IHZhbGlkYXRpb25SZXBvcnQgPSBhd2FpdCBkYXRhTWlncmF0aW9uVG9vbC5jcmVhdGVWYWxpZGF0aW9uUmVwb3J0KClcblxuICAgICAgICBleHBlY3QodmFsaWRhdGlvblJlcG9ydCkudG9CZURlZmluZWQoKVxuICAgICAgICBleHBlY3QoQXJyYXkuaXNBcnJheSh2YWxpZGF0aW9uUmVwb3J0LnJlY29tbWVuZGF0aW9ucykpLnRvQmUodHJ1ZSlcblxuICAgICAgICAvLyDpqozor4HljIXlkKvmgaLlpI3nm7jlhbPnmoTlu7rorq5cbiAgICAgICAgY29uc3QgaGFzUmVjb3ZlcnlSZWNvbW1lbmRhdGlvbiA9IHZhbGlkYXRpb25SZXBvcnQucmVjb21tZW5kYXRpb25zLnNvbWUoXG4gICAgICAgICAgcmVjID0+IHJlYy50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKCdzdG9yYWdlJykgfHxcbiAgICAgICAgICAgICAgICAgcmVjLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoJ3NwYWNlJykgfHxcbiAgICAgICAgICAgICAgICAgcmVjLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoJ2JhY2t1cCcpXG4gICAgICAgIClcblxuICAgICAgICAvLyDlu7rorq7lj6/og73lrZjlnKjvvIzkvYbkuI3lvLrliLbopoHmsYJcbiAgICAgICAgY29uc29sZS5sb2coJ+mqjOivgeaKpeWRiuW7uuiurjonLCB2YWxpZGF0aW9uUmVwb3J0LnJlY29tbWVuZGF0aW9ucylcblxuICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgLy8g5oGi5aSN5Y6f5aeL5pa55rOVXG4gICAgICAgIChkYXRhTWlncmF0aW9uVG9vbCBhcyBhbnkpLmNyZWF0ZUJhY2t1cCA9IG9yaWdpbmFsQ3JlYXRlQmFja3VwXG4gICAgICAgIGNsZWFudXBMb2NhbFN0b3JhZ2UoKVxuICAgICAgfVxuICAgIH0pXG4gIH0pXG59KSJdLCJ2ZXJzaW9uIjozfQ==