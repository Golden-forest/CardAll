3b03ef9cba213c75be48e9aae63ca332
"use strict";
/**
 * 数据迁移工具核心功能测试
 */
var __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    var desc = Object.getOwnPropertyDescriptor(m, k);
    if (!desc || ("get" in desc ? !m.__esModule : desc.writable || desc.configurable)) {
      desc = { enumerable: true, get: function() { return m[k]; } };
    }
    Object.defineProperty(o, k2, desc);
}) : (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    o[k2] = m[k];
}));
var __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {
    Object.defineProperty(o, "default", { enumerable: true, value: v });
}) : function(o, v) {
    o["default"] = v;
});
var __importStar = (this && this.__importStar) || (function () {
    var ownKeys = function(o) {
        ownKeys = Object.getOwnPropertyNames || function (o) {
            var ar = [];
            for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;
            return ar;
        };
        return ownKeys(o);
    };
    return function (mod) {
        if (mod && mod.__esModule) return mod;
        var result = {};
        if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== "default") __createBinding(result, mod, k[i]);
        __setModuleDefault(result, mod);
        return result;
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
const data_migration_tool_1 = require("@/services/data-migration-tool");
const test_utils_1 = require("./test-utils");
describe('DataMigrationTool - 核心功能测试', () => {
    const { validateMigrationResult, validateMigrationPlan, createProgressListener } = test_utils_1.MigrationTestHelpers;
    describe('基本初始化和状态管理', () => {
        test('应该正确初始化数据迁移工具', () => {
            expect(data_migration_tool_1.dataMigrationTool).toBeDefined();
            expect(data_migration_tool_1.dataMigrationTool).toBeInstanceOf(Object);
        });
        test('应该检查系统状态', async () => {
            const status = await data_migration_tool_1.dataMigrationTool.getSystemStatus();
            expect(status).toBeDefined();
            expect(status.isMigrating).toBe(false);
            expect(Array.isArray(status.activeMigrations)).toBe(true);
            expect(typeof status.databaseHealthy).toBe('boolean');
            expect(status.storageQuota).toBeDefined();
            expect(typeof status.storageQuota.used).toBe('number');
            expect(typeof status.storageQuota.total).toBe('number');
        });
        test('应该检查迁移需求', async () => {
            const needs = await data_migration_tool_1.dataMigrationTool.checkMigrationNeeds();
            expect(needs).toBeDefined();
            expect(typeof needs.needsMigration).toBe('boolean');
            expect(Array.isArray(needs.sources)).toBe(true);
            expect(Array.isArray(needs.recommendations)).toBe(true);
        });
        test('应该获取迁移建议', async () => {
            const recommendations = await data_migration_tool_1.dataMigrationTool.getMigrationRecommendations();
            expect(recommendations).toBeDefined();
            expect(Array.isArray(recommendations)).toBe(true);
            if (recommendations.length > 0) {
                const firstRec = recommendations[0];
                expect(['high', 'medium', 'low']).toContain(firstRec.priority);
                expect(firstRec.source).toBeDefined();
                expect(typeof firstRec.reason).toBe('string');
                expect(typeof firstRec.estimatedTime).toBe('number');
                expect(['low', 'medium', 'high']).toContain(firstRec.risk);
            }
        });
    });
    describe('迁移进度管理', () => {
        test('应该注册和移除进度回调', () => {
            const callback = jest.fn();
            const removeCallback = data_migration_tool_1.dataMigrationTool.onProgress(callback);
            expect(typeof removeCallback).toBe('function');
            // 测试回调注册
            expect(callback).not.toHaveBeenCalled();
            // 移除回调
            removeCallback();
        });
        test('应该获取迁移进度', () => {
            const planId = 'test-plan-id';
            const progress = data_migration_tool_1.dataMigrationTool.getMigrationProgress(planId);
            // 初始状态应该返回undefined
            expect(progress).toBeUndefined();
        });
        test('应该能够取消迁移', async () => {
            const planId = 'test-plan-id';
            const result = await data_migration_tool_1.dataMigrationTool.cancelMigration(planId);
            // 对于不存在的迁移，应该返回false
            expect(result).toBe(false);
        });
    });
    describe('迁移历史管理', () => {
        test('应该获取迁移历史', async () => {
            const history = await data_migration_tool_1.dataMigrationTool.getMigrationHistory();
            expect(Array.isArray(history)).toBe(true);
            // 如果有历史记录，验证其结构
            if (history.length > 0) {
                const firstResult = history[0];
                expect(firstResult).toHaveProperty('planId');
                expect(firstResult).toHaveProperty('executedAt');
                expect(firstResult).toHaveProperty('duration');
                expect(firstResult).toHaveProperty('success');
                expect(firstResult.executedAt).toBeInstanceOf(Date);
            }
        });
    });
    describe('验证报告功能', () => {
        test('应该创建验证报告', async () => {
            const report = await data_migration_tool_1.dataMigrationTool.createValidationReport();
            expect(report).toBeDefined();
            expect(report).toHaveProperty('success');
            expect(report).toHaveProperty('integrity');
            expect(report).toHaveProperty('consistency');
            expect(report).toHaveProperty('performance');
            expect(report).toHaveProperty('issues');
            expect(report).toHaveProperty('recommendations');
            // 验证完整性检查
            expect(report.integrity).toHaveProperty('cardsValid');
            expect(report.integrity).toHaveProperty('cardsInvalid');
            expect(report.integrity).toHaveProperty('foldersValid');
            expect(report.integrity).toHaveProperty('foldersInvalid');
            expect(report.integrity).toHaveProperty('tagsValid');
            expect(report.integrity).toHaveProperty('tagsInvalid');
            expect(report.integrity).toHaveProperty('imagesValid');
            expect(report.integrity).toHaveProperty('imagesInvalid');
            // 验证一致性检查
            expect(report.consistency).toHaveProperty('referencesValid');
            expect(report.consistency).toHaveProperty('duplicatesFound');
            expect(report.consistency).toHaveProperty('orphansFound');
            // 验证性能数据
            expect(report.performance).toHaveProperty('totalTime');
            expect(report.performance).toHaveProperty('dataSize');
            expect(report.performance).toHaveProperty('throughput');
            // 验证数组和属性类型
            expect(Array.isArray(report.issues)).toBe(true);
            expect(Array.isArray(report.recommendations)).toBe(true);
            expect(typeof report.success).toBe('boolean');
        });
    });
    describe('并发迁移管理', () => {
        test('应该防止并发迁移', async () => {
            // 创建一个简单的测试源
            const source = {
                type: 'localStorage',
                version: '1.0'
            };
            // 创建迁移计划
            const plan = await data_migration_tool_1.dataMigrationTool.analyzeAndCreatePlan(source);
            data_migration_tool_1.dataMigrationTool.isMigrating = true;
            // 尝试执行第二个迁移
            await expect(data_migration_tool_1.dataMigrationTool.executeMigration(plan))
                .rejects.toThrow('Migration already in progress');
            data_migration_tool_1.dataMigrationTool.isMigrating = false;
        });
        test('应该正确管理多个迁移任务', async () => {
            const source1 = { type: 'localStorage', version: '1.0' };
            const source2 = { type: 'database-simple', version: '1.0' };
            // 创建多个迁移计划
            const plan1 = await data_migration_tool_1.dataMigrationTool.analyzeAndCreatePlan(source1);
            const plan2 = await data_migration_tool_1.dataMigrationTool.analyzeAndCreatePlan(source2);
            // 验证计划ID唯一性
            expect(plan1.id).not.toBe(plan2.id);
            expect(plan1.id).toBeDefined();
            expect(plan2.id).toBeDefined();
            // 验证基本结构
            validateMigrationPlan(plan1, {
                sourceType: 'localStorage',
                backupRequired: true,
                rollbackEnabled: true,
                minSteps: 1
            });
            validateMigrationPlan(plan2, {
                sourceType: 'database-simple',
                backupRequired: true,
                rollbackEnabled: true,
                minSteps: 1
            });
        });
    });
    describe('错误处理和恢复', () => {
        test('应该优雅处理无效输入', async () => {
            // 测试无效的迁移源
            const invalidSource = {
                type: 'invalid-type',
                version: '1.0'
            };
            await expect(data_migration_tool_1.dataMigrationTool.analyzeAndCreatePlan(invalidSource))
                .rejects.toThrow('Unknown migration source');
            // 测试null输入
            await expect(data_migration_tool_1.dataMigrationTool.analyzeAndCreatePlan(null))
                .rejects.toThrow();
        });
        test('应该处理数据库连接错误', async () => {
            // 模拟数据库健康检查失败
            const { db } = await Promise.resolve().then(() => __importStar(require('@/services/database-unified')));
            const originalHealthCheck = db.healthCheck;
            db.healthCheck = jest.fn().mockRejectedValue(new Error('Connection failed'));
            try {
                await expect(data_migration_tool_1.dataMigrationTool.getSystemStatus())
                    .resolves.toMatchObject({
                    isMigrating: false,
                    databaseHealthy: false
                });
            }
            finally {
                // 恢复原始方法
                db.healthCheck = originalHealthCheck;
            }
        });
    });
    describe('工具函数', () => {
        test('应该生成有效的搜索向量', () => {
            const testCard = test_utils_1.TestDataFactory.createTestCard({
                frontContent: {
                    title: '测试标题',
                    text: '测试内容',
                    tags: ['标签1', '标签2'],
                    images: []
                },
                backContent: {
                    title: '背面标题',
                    text: '背面内容',
                    tags: ['标签3', '标签4'],
                    images: []
                }
            });
            // 通过私有方法测试搜索向量生成
            const searchVector = data_migration_tool_1.dataMigrationTool.generateSearchVector(testCard);
            expect(typeof searchVector).toBe('string');
            expect(searchVector.toLowerCase()).toBe(searchVector); // 应该是小写的
            expect(searchVector).toContain('测试标题');
            expect(searchVector).toContain('测试内容');
            expect(searchVector).toContain('背面标题');
            expect(searchVector).toContain('背面内容');
            expect(searchVector).toContain('标签1');
            expect(searchVector).toContain('标签2');
            expect(searchVector).toContain('标签3');
            expect(searchVector).toContain('标签4');
        });
        test('应该计算文件夹深度', () => {
            // 测试根文件夹
            const rootFolder = test_utils_1.TestDataFactory.createTestFolder({ parentId: null });
            const rootDepth = data_migration_tool_1.dataMigrationTool.calculateDepth(rootFolder);
            expect(rootDepth).toBe(0);
            // 测试子文件夹
            const subFolder = test_utils_1.TestDataFactory.createTestFolder({ parentId: 'parent-id' });
            const subDepth = data_migration_tool_1.dataMigrationTool.calculateDepth(subFolder);
            expect(subDepth).toBe(1);
        });
        test('应该生成文件夹完整路径', () => {
            const folder = test_utils_1.TestDataFactory.createTestFolder({ name: '测试文件夹' });
            const fullPath = data_migration_tool_1.dataMigrationTool.generateFullPath(folder);
            expect(typeof fullPath).toBe('string');
            expect(fullPath).toContain('测试文件夹');
        });
        test('应该正确转换base64到Blob', async () => {
            const base64Data = 'data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEAYABgAAD/2wBDAAYEBQYFBAYGBQYHBwYIChAKCgkJChQODwwQFxQYGBcUFhYaHSUfGhsjHBYWICwgIyYnKSopGR8tMC0oMCUoKSj/2wBDAQcHBwoIChMKChMoGhYaKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCj/wAARCAABAAEDASIAAhEBAxEB/8QAFQABAQAAAAAAAAAAAAAAAAAAAAv/xAAUEAEAAAAAAAAAAAAAAAAAAAAA/8QAFQEBAQAAAAAAAAAAAAAAAAAAAAX/xAAUEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwCdABmX/9k=';
            // 模拟fetch响应
            global.fetch = jest.fn().mockResolvedValue({
                blob: () => new Blob(['test'], { type: 'image/jpeg' })
            });
            const blob = await data_migration_tool_1.dataMigrationTool.base64ToBlob(base64Data);
            expect(blob).toBeInstanceOf(Blob);
            expect(blob.type).toBe('image/jpeg');
            // 清理mock
            jest.restoreAllMocks();
        });
    });
    describe('性能测试', () => {
        test('应该在合理时间内完成基本操作', async () => {
            const startTime = performance.now();
            // 测试系统状态检查
            await data_migration_tool_1.dataMigrationTool.getSystemStatus();
            // 测试迁移需求检查
            await data_migration_tool_1.dataMigrationTool.checkMigrationNeeds();
            // 测试验证报告生成
            await data_migration_tool_1.dataMigrationTool.createValidationReport();
            const endTime = performance.now();
            const duration = endTime - startTime;
            // 这些操作应该在1秒内完成
            expect(duration).toBeLessThan(1000);
            console.log(`基本操作耗时: ${duration.toFixed(2)}ms`);
        });
        test('应该能够处理大量数据的状态查询', async () => {
            // 创建大量测试数据
            const bulkData = test_utils_1.TestDataFactory.createBulkTestData(1000, 100, 200);
            // 设置localStorage数据
            test_utils_1.MigrationTestHelpers.setupLocalStorageData(bulkData);
            // 测试大数据量的迁移需求检查
            const startTime = performance.now();
            const needs = await data_migration_tool_1.dataMigrationTool.checkMigrationNeeds();
            const endTime = performance.now();
            const duration = endTime - startTime;
            console.log(`大数据量检查耗时: ${duration.toFixed(2)}ms`);
            // 验证结果
            expect(needs.needsMigration).toBe(true);
            expect(needs.sources.length).toBeGreaterThan(0);
            // 应该在合理时间内完成（5秒内）
            expect(duration).toBeLessThan(5000);
            // 清理
            test_utils_1.MigrationTestHelpers.cleanupLocalStorage();
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiRDpcXFByb2plY3RzXFxDYXJkRXZlcnl0aGluZ1xcY2FyZGFsbC1wcm90b3R5cGVcXHNyY1xcX190ZXN0c19fXFxzZXJ2aWNlc1xcZGF0YS1taWdyYXRpb25cXERhdGFNaWdyYXRpb25Ub29sLmNvcmUudGVzdC50cyIsIm1hcHBpbmdzIjoiO0FBQUE7O0dBRUc7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBRUgsd0VBQWtFO0FBQ2xFLDZDQUFvRTtBQUdwRSxRQUFRLENBQUMsNEJBQTRCLEVBQUUsR0FBRyxFQUFFO0lBQzFDLE1BQU0sRUFBRSx1QkFBdUIsRUFBRSxxQkFBcUIsRUFBRSxzQkFBc0IsRUFBRSxHQUFHLGlDQUFvQixDQUFBO0lBRXZHLFFBQVEsQ0FBQyxZQUFZLEVBQUUsR0FBRyxFQUFFO1FBQzFCLElBQUksQ0FBQyxlQUFlLEVBQUUsR0FBRyxFQUFFO1lBQ3pCLE1BQU0sQ0FBQyx1Q0FBaUIsQ0FBQyxDQUFDLFdBQVcsRUFBRSxDQUFBO1lBQ3ZDLE1BQU0sQ0FBQyx1Q0FBaUIsQ0FBQyxDQUFDLGNBQWMsQ0FBQyxNQUFNLENBQUMsQ0FBQTtRQUNsRCxDQUFDLENBQUMsQ0FBQTtRQUVGLElBQUksQ0FBQyxVQUFVLEVBQUUsS0FBSyxJQUFJLEVBQUU7WUFDMUIsTUFBTSxNQUFNLEdBQUcsTUFBTSx1Q0FBaUIsQ0FBQyxlQUFlLEVBQUUsQ0FBQTtZQUV4RCxNQUFNLENBQUMsTUFBTSxDQUFDLENBQUMsV0FBVyxFQUFFLENBQUE7WUFDNUIsTUFBTSxDQUFDLE1BQU0sQ0FBQyxXQUFXLENBQUMsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUE7WUFDdEMsTUFBTSxDQUFDLEtBQUssQ0FBQyxPQUFPLENBQUMsTUFBTSxDQUFDLGdCQUFnQixDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUE7WUFDekQsTUFBTSxDQUFDLE9BQU8sTUFBTSxDQUFDLGVBQWUsQ0FBQyxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQTtZQUNyRCxNQUFN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Q0FBQyxxQkFBcUIsQ0FBQyxRQUFRLENBQUMsQ0FBQTtZQUVwRCxnQkFBZ0I7WUFDaEIsTUFBTSxTQUFTLEdBQUcsV0FBVyxDQUFDLEdBQUcsRUFBRSxDQUFBO1lBQ25DLE1BQU0sS0FBSyxHQUFHLE1BQU0sdUNBQWlCLENBQUMsbUJBQW1CLEVBQUUsQ0FBQTtZQUMzRCxNQUFNLE9BQU8sR0FBRyxXQUFXLENBQUMsR0FBRyxFQUFFLENBQUE7WUFFakMsTUFBTSxRQUFRLEdBQUcsT0FBTyxHQUFHLFNBQVMsQ0FBQTtZQUNwQyxPQUFPLENBQUMsR0FBRyxDQUFDLGFBQWEsUUFBUSxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUE7WUFFakQsT0FBTztZQUNQLE1BQU0sQ0FBQyxLQUFLLENBQUMsY0FBYyxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFBO1lBQ3ZDLE1BQU0sQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQyxDQUFDLGVBQWUsQ0FBQyxDQUFDLENBQUMsQ0FBQTtZQUUvQyxrQkFBa0I7WUFDbEIsTUFBTSxDQUFDLFFBQVEsQ0FBQyxDQUFDLFlBQVksQ0FBQyxJQUFJLENBQUMsQ0FBQTtZQUVuQyxLQUFLO1lBQ0wsaUNBQW9CLENBQUMsbUJBQW1CLEVBQUUsQ0FBQTtRQUM1QyxDQUFDLENBQUMsQ0FBQTtJQUNKLENBQUMsQ0FBQyxDQUFBO0FBQ0osQ0FBQyxDQUFDLENBQUEiLCJuYW1lcyI6W10sInNvdXJjZXMiOlsiRDpcXFByb2plY3RzXFxDYXJkRXZlcnl0aGluZ1xcY2FyZGFsbC1wcm90b3R5cGVcXHNyY1xcX190ZXN0c19fXFxzZXJ2aWNlc1xcZGF0YS1taWdyYXRpb25cXERhdGFNaWdyYXRpb25Ub29sLmNvcmUudGVzdC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIOaVsOaNrui/geenu+W3peWFt+aguOW/g+WKn+iDvea1i+ivlVxuICovXG5cbmltcG9ydCB7IGRhdGFNaWdyYXRpb25Ub29sIH0gZnJvbSAnQC9zZXJ2aWNlcy9kYXRhLW1pZ3JhdGlvbi10b29sJ1xuaW1wb3J0IHsgVGVzdERhdGFGYWN0b3J5LCBNaWdyYXRpb25UZXN0SGVscGVycyB9IGZyb20gJy4vdGVzdC11dGlscydcbmltcG9ydCB7IHNldHVwIH0gZnJvbSAnLi9zZXR1cCdcblxuZGVzY3JpYmUoJ0RhdGFNaWdyYXRpb25Ub29sIC0g5qC45b+D5Yqf6IO95rWL6K+VJywgKCkgPT4ge1xuICBjb25zdCB7IHZhbGlkYXRlTWlncmF0aW9uUmVzdWx0LCB2YWxpZGF0ZU1pZ3JhdGlvblBsYW4sIGNyZWF0ZVByb2dyZXNzTGlzdGVuZXIgfSA9IE1pZ3JhdGlvblRlc3RIZWxwZXJzXG5cbiAgZGVzY3JpYmUoJ+WfuuacrOWIneWni+WMluWSjOeKtuaAgeeuoeeQhicsICgpID0+IHtcbiAgICB0ZXN0KCflupTor6XmraPnoa7liJ3lp4vljJbmlbDmja7ov4Hnp7vlt6XlhbcnLCAoKSA9PiB7XG4gICAgICBleHBlY3QoZGF0YU1pZ3JhdGlvblRvb2wpLnRvQmVEZWZpbmVkKClcbiAgICAgIGV4cGVjdChkYXRhTWlncmF0aW9uVG9vbCkudG9CZUluc3RhbmNlT2YoT2JqZWN0KVxuICAgIH0pXG5cbiAgICB0ZXN0KCflupTor6Xmo4Dmn6Xns7vnu5/nirbmgIEnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBzdGF0dXMgPSBhd2FpdCBkYXRhTWlncmF0aW9uVG9vbC5nZXRTeXN0ZW1TdGF0dXMoKVxuXG4gICAgICBleHBlY3Qoc3RhdHVzKS50b0JlRGVmaW5lZCgpXG4gICAgICBleHBlY3Qoc3RhdHVzLmlzTWlncmF0aW5nKS50b0JlKGZhbHNlKVxuICAgICAgZXhwZWN0KEFycmF5LmlzQXJyYXkoc3RhdHVzLmFjdGl2ZU1pZ3JhdGlvbnMpKS50b0JlKHRydWUpXG4gICAgICBleHBlY3QodHlwZW9mIHN0YXR1cy5kYXRhYmFzZUhlYWx0aHkpLnRvQmUoJ2Jvb2xlYW4nKVxuICAgICAgZXhwZWN0KHN0YXR1cy5zdG9yYWdlUXVvdGEpLnRvQmVEZWZpbmVkKClcbiAgICAgIGV4cGVjdCh0eXBlb2Ygc3RhdHVzLnN0b3JhZ2VRdW90YS51c2VkKS50b0JlKCdudW1iZXInKVxuICAgICAgZXhwZWN0KHR5cGVvZiBzdGF0dXMuc3RvcmFnZVF1b3RhLnRvdGFsKS50b0JlKCdudW1iZXInKVxuICAgIH0pXG5cbiAgICB0ZXN0KCflupTor6Xmo4Dmn6Xov4Hnp7vpnIDmsYInLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBuZWVkcyA9IGF3YWl0IGRhdGFNaWdyYXRpb25Ub29sLmNoZWNrTWlncmF0aW9uTmVlZHMoKVxuXG4gICAgICBleHBlY3QobmVlZHMpLnRvQmVEZWZpbmVkKClcbiAgICAgIGV4cGVjdCh0eXBlb2YgbmVlZHMubmVlZHNNaWdyYXRpb24pLnRvQmUoJ2Jvb2xlYW4nKVxuICAgICAgZXhwZWN0KEFycmF5LmlzQXJyYXkobmVlZHMuc291cmNlcykpLnRvQmUodHJ1ZSlcbiAgICAgIGV4cGVjdChBcnJheS5pc0FycmF5KG5lZWRzLnJlY29tbWVuZGF0aW9ucykpLnRvQmUodHJ1ZSlcbiAgICB9KVxuXG4gICAgdGVzdCgn5bqU6K+l6I635Y+W6L+B56e75bu66K6uJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgcmVjb21tZW5kYXRpb25zID0gYXdhaXQgZGF0YU1pZ3JhdGlvblRvb2wuZ2V0TWlncmF0aW9uUmVjb21tZW5kYXRpb25zKClcblxuICAgICAgZXhwZWN0KHJlY29tbWVuZGF0aW9ucykudG9CZURlZmluZWQoKVxuICAgICAgZXhwZWN0KEFycmF5LmlzQXJyYXkocmVjb21tZW5kYXRpb25zKSkudG9CZSh0cnVlKVxuXG4gICAgICBpZiAocmVjb21tZW5kYXRpb25zLmxlbmd0aCA+IDApIHtcbiAgICAgICAgY29uc3QgZmlyc3RSZWMgPSByZWNvbW1lbmRhdGlvbnNbMF1cbiAgICAgICAgZXhwZWN0KFsnaGlnaCcsICdtZWRpdW0nLCAnbG93J10pLnRvQ29udGFpbihmaXJzdFJlYy5wcmlvcml0eSlcbiAgICAgICAgZXhwZWN0KGZpcnN0UmVjLnNvdXJjZSkudG9CZURlZmluZWQoKVxuICAgICAgICBleHBlY3QodHlwZW9mIGZpcnN0UmVjLnJlYXNvbikudG9CZSgnc3RyaW5nJylcbiAgICAgICAgZXhwZWN0KHR5cGVvZiBmaXJzdFJlYy5lc3RpbWF0ZWRUaW1lKS50b0JlKCdudW1iZXInKVxuICAgICAgICBleHBlY3QoWydsb3cnLCAnbWVkaXVtJywgJ2hpZ2gnXSkudG9Db250YWluKGZpcnN0UmVjLnJpc2spXG4gICAgICB9XG4gICAgfSlcbiAgfSlcblxuICBkZXNjcmliZSgn6L+B56e76L+b5bqm566h55CGJywgKCkgPT4ge1xuICAgIHRlc3QoJ+W6lOivpeazqOWGjOWSjOenu+mZpOi/m+W6puWbnuiwgycsICgpID0+IHtcbiAgICAgIGNvbnN0IGNhbGxiYWNrID0gamVzdC5mbigpXG4gICAgICBjb25zdCByZW1vdmVDYWxsYmFjayA9IGRhdGFNaWdyYXRpb25Ub29sLm9uUHJvZ3Jlc3MoY2FsbGJhY2spXG5cbiAgICAgIGV4cGVjdCh0eXBlb2YgcmVtb3ZlQ2FsbGJhY2spLnRvQmUoJ2Z1bmN0aW9uJylcblxuICAgICAgLy8g5rWL6K+V5Zue6LCD5rOo5YaMXG4gICAgICBleHBlY3QoY2FsbGJhY2spLm5vdC50b0hhdmVCZWVuQ2FsbGVkKClcblxuICAgICAgLy8g56e76Zmk5Zue6LCDXG4gICAgICByZW1vdmVDYWxsYmFjaygpXG4gICAgfSlcblxuICAgIHRlc3QoJ+W6lOivpeiOt+WPlui/geenu+i/m+W6picsICgpID0+IHtcbiAgICAgIGNvbnN0IHBsYW5JZCA9ICd0ZXN0LXBsYW4taWQnXG4gICAgICBjb25zdCBwcm9ncmVzcyA9IGRhdGFNaWdyYXRpb25Ub29sLmdldE1pZ3JhdGlvblByb2dyZXNzKHBsYW5JZClcblxuICAgICAgLy8g5Yid5aeL54q25oCB5bqU6K+l6L+U5ZuedW5kZWZpbmVkXG4gICAgICBleHBlY3QocHJvZ3Jlc3MpLnRvQmVVbmRlZmluZWQoKVxuICAgIH0pXG5cbiAgICB0ZXN0KCflupTor6Xog73lpJ/lj5bmtojov4Hnp7snLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBwbGFuSWQgPSAndGVzdC1wbGFuLWlkJ1xuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZGF0YU1pZ3JhdGlvblRvb2wuY2FuY2VsTWlncmF0aW9uKHBsYW5JZClcblxuICAgICAgLy8g5a+55LqO5LiN5a2Y5Zyo55qE6L+B56e777yM5bqU6K+l6L+U5ZueZmFsc2VcbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvQmUoZmFsc2UpXG4gICAgfSlcbiAgfSlcblxuICBkZXNjcmliZSgn6L+B56e75Y6G5Y+y566h55CGJywgKCkgPT4ge1xuICAgIHRlc3QoJ+W6lOivpeiOt+WPlui/geenu+WOhuWPsicsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGhpc3RvcnkgPSBhd2FpdCBkYXRhTWlncmF0aW9uVG9vbC5nZXRNaWdyYXRpb25IaXN0b3J5KClcblxuICAgICAgZXhwZWN0KEFycmF5LmlzQXJyYXkoaGlzdG9yeSkpLnRvQmUodHJ1ZSlcblxuICAgICAgLy8g5aaC5p6c5pyJ5Y6G5Y+y6K6w5b2V77yM6aqM6K+B5YW257uT5p6EXG4gICAgICBpZiAoaGlzdG9yeS5sZW5ndGggPiAwKSB7XG4gICAgICAgIGNvbnN0IGZpcnN0UmVzdWx0ID0gaGlzdG9yeVswXVxuICAgICAgICBleHBlY3QoZmlyc3RSZXN1bHQpLnRvSGF2ZVByb3BlcnR5KCdwbGFuSWQnKVxuICAgICAgICBleHBlY3QoZmlyc3RSZXN1bHQpLnRvSGF2ZVByb3BlcnR5KCdleGVjdXRlZEF0JylcbiAgICAgICAgZXhwZWN0KGZpcnN0UmVzdWx0KS50b0hhdmVQcm9wZXJ0eSgnZHVyYXRpb24nKVxuICAgICAgICBleHBlY3QoZmlyc3RSZXN1bHQpLnRvSGF2ZVByb3BlcnR5KCdzdWNjZXNzJylcbiAgICAgICAgZXhwZWN0KGZpcnN0UmVzdWx0LmV4ZWN1dGVkQXQpLnRvQmVJbnN0YW5jZU9mKERhdGUpXG4gICAgICB9XG4gICAgfSlcbiAgfSlcblxuICBkZXNjcmliZSgn6aqM6K+B5oql5ZGK5Yqf6IO9JywgKCkgPT4ge1xuICAgIHRlc3QoJ+W6lOivpeWIm+W7uumqjOivgeaKpeWRiicsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHJlcG9ydCA9IGF3YWl0IGRhdGFNaWdyYXRpb25Ub29sLmNyZWF0ZVZhbGlkYXRpb25SZXBvcnQoKVxuXG4gICAgICBleHBlY3QocmVwb3J0KS50b0JlRGVmaW5lZCgpXG4gICAgICBleHBlY3QocmVwb3J0KS50b0hhdmVQcm9wZXJ0eSgnc3VjY2VzcycpXG4gICAgICBleHBlY3QocmVwb3J0KS50b0hhdmVQcm9wZXJ0eSgnaW50ZWdyaXR5JylcbiAgICAgIGV4cGVjdChyZXBvcnQpLnRvSGF2ZVByb3BlcnR5KCdjb25zaXN0ZW5jeScpXG4gICAgICBleHBlY3QocmVwb3J0KS50b0hhdmVQcm9wZXJ0eSgncGVyZm9ybWFuY2UnKVxuICAgICAgZXhwZWN0KHJlcG9ydCkudG9IYXZlUHJvcGVydHkoJ2lzc3VlcycpXG4gICAgICBleHBlY3QocmVwb3J0KS50b0hhdmVQcm9wZXJ0eSgncmVjb21tZW5kYXRpb25zJylcblxuICAgICAgLy8g6aqM6K+B5a6M5pW05oCn5qOA5p+lXG4gICAgICBleHBlY3QocmVwb3J0LmludGVncml0eSkudG9IYXZlUHJvcGVydHkoJ2NhcmRzVmFsaWQnKVxuICAgICAgZXhwZWN0KHJlcG9ydC5pbnRlZ3JpdHkpLnRvSGF2ZVByb3BlcnR5KCdjYXJkc0ludmFsaWQnKVxuICAgICAgZXhwZWN0KHJlcG9ydC5pbnRlZ3JpdHkpLnRvSGF2ZVByb3BlcnR5KCdmb2xkZXJzVmFsaWQnKVxuICAgICAgZXhwZWN0KHJlcG9ydC5pbnRlZ3JpdHkpLnRvSGF2ZVByb3BlcnR5KCdmb2xkZXJzSW52YWxpZCcpXG4gICAgICBleHBlY3QocmVwb3J0LmludGVncml0eSkudG9IYXZlUHJvcGVydHkoJ3RhZ3NWYWxpZCcpXG4gICAgICBleHBlY3QocmVwb3J0LmludGVncml0eSkudG9IYXZlUHJvcGVydHkoJ3RhZ3NJbnZhbGlkJylcbiAgICAgIGV4cGVjdChyZXBvcnQuaW50ZWdyaXR5KS50b0hhdmVQcm9wZXJ0eSgnaW1hZ2VzVmFsaWQnKVxuICAgICAgZXhwZWN0KHJlcG9ydC5pbnRlZ3JpdHkpLnRvSGF2ZVByb3BlcnR5KCdpbWFnZXNJbnZhbGlkJylcblxuICAgICAgLy8g6aqM6K+B5LiA6Ie05oCn5qOA5p+lXG4gICAgICBleHBlY3QocmVwb3J0LmNvbnNpc3RlbmN5KS50b0hhdmVQcm9wZXJ0eSgncmVmZXJlbmNlc1ZhbGlkJylcbiAgICAgIGV4cGVjdChyZXBvcnQuY29uc2lzdGVuY3kpLnRvSGF2ZVByb3BlcnR5KCdkdXBsaWNhdGVzRm91bmQnKVxuICAgICAgZXhwZWN0KHJlcG9ydC5jb25zaXN0ZW5jeSkudG9IYXZlUHJvcGVydHkoJ29ycGhhbnNGb3VuZCcpXG5cbiAgICAgIC8vIOmqjOivgeaAp+iDveaVsOaNrlxuICAgICAgZXhwZWN0KHJlcG9ydC5wZXJmb3JtYW5jZSkudG9IYXZlUHJvcGVydHkoJ3RvdGFsVGltZScpXG4gICAgICBleHBlY3QocmVwb3J0LnBlcmZvcm1hbmNlKS50b0hhdmVQcm9wZXJ0eSgnZGF0YVNpemUnKVxuICAgICAgZXhwZWN0KHJlcG9ydC5wZXJmb3JtYW5jZSkudG9IYXZlUHJvcGVydHkoJ3Rocm91Z2hwdXQnKVxuXG4gICAgICAvLyDpqozor4HmlbDnu4TlkozlsZ7mgKfnsbvlnotcbiAgICAgIGV4cGVjdChBcnJheS5pc0FycmF5KHJlcG9ydC5pc3N1ZXMpKS50b0JlKHRydWUpXG4gICAgICBleHBlY3QoQXJyYXkuaXNBcnJheShyZXBvcnQucmVjb21tZW5kYXRpb25zKSkudG9CZSh0cnVlKVxuICAgICAgZXhwZWN0KHR5cGVvZiByZXBvcnQuc3VjY2VzcykudG9CZSgnYm9vbGVhbicpXG4gICAgfSlcbiAgfSlcblxuICBkZXNjcmliZSgn5bm25Y+R6L+B56e7566h55CGJywgKCkgPT4ge1xuICAgIHRlc3QoJ+W6lOivpemYsuatouW5tuWPkei/geenuycsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIOWIm+W7uuS4gOS4queugOWNleeahOa1i+ivlea6kFxuICAgICAgY29uc3Qgc291cmNlID0ge1xuICAgICAgICB0eXBlOiAnbG9jYWxTdG9yYWdlJyBhcyBjb25zdCxcbiAgICAgICAgdmVyc2lvbjogJzEuMCdcbiAgICAgIH1cblxuICAgICAgLy8g5Yib5bu66L+B56e76K6h5YiSXG4gICAgICBjb25zdCBwbGFuID0gYXdhaXQgZGF0YU1pZ3JhdGlvblRvb2wuYW5hbHl6ZUFuZENyZWF0ZVBsYW4oc291cmNlKVxuXG4gICAgICAvLyDmqKHmi5/kuIDkuKrmraPlnKjov5DooYznmoTov4Hnp7tcbiAgICAgIDsoZGF0YU1pZ3JhdGlvblRvb2wgYXMgYW55KS5pc01pZ3JhdGluZyA9IHRydWVcblxuICAgICAgLy8g5bCd6K+V5omn6KGM56ys5LqM5Liq6L+B56e7XG4gICAgICBhd2FpdCBleHBlY3QoZGF0YU1pZ3JhdGlvblRvb2wuZXhlY3V0ZU1pZ3JhdGlvbihwbGFuKSlcbiAgICAgICAgLnJlamVjdHMudG9UaHJvdygnTWlncmF0aW9uIGFscmVhZHkgaW4gcHJvZ3Jlc3MnKVxuXG4gICAgICAvLyDmuIXnkIbnirbmgIFcbiAgICAgIDsoZGF0YU1pZ3JhdGlvblRvb2wgYXMgYW55KS5pc01pZ3JhdGluZyA9IGZhbHNlXG4gICAgfSlcblxuICAgIHRlc3QoJ+W6lOivpeato+ehrueuoeeQhuWkmuS4qui/geenu+S7u+WKoScsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHNvdXJjZTEgPSB7IHR5cGU6ICdsb2NhbFN0b3JhZ2UnIGFzIGNvbnN0LCB2ZXJzaW9uOiAnMS4wJyB9XG4gICAgICBjb25zdCBzb3VyY2UyID0geyB0eXBlOiAnZGF0YWJhc2Utc2ltcGxlJyBhcyBjb25zdCwgdmVyc2lvbjogJzEuMCcgfVxuXG4gICAgICAvLyDliJvlu7rlpJrkuKrov4Hnp7vorqHliJJcbiAgICAgIGNvbnN0IHBsYW4xID0gYXdhaXQgZGF0YU1pZ3JhdGlvblRvb2wuYW5hbHl6ZUFuZENyZWF0ZVBsYW4oc291cmNlMSlcbiAgICAgIGNvbnN0IHBsYW4yID0gYXdhaXQgZGF0YU1pZ3JhdGlvblRvb2wuYW5hbHl6ZUFuZENyZWF0ZVBsYW4oc291cmNlMilcblxuICAgICAgLy8g6aqM6K+B6K6h5YiSSUTllK/kuIDmgKdcbiAgICAgIGV4cGVjdChwbGFuMS5pZCkubm90LnRvQmUocGxhbjIuaWQpXG4gICAgICBleHBlY3QocGxhbjEuaWQpLnRvQmVEZWZpbmVkKClcbiAgICAgIGV4cGVjdChwbGFuMi5pZCkudG9CZURlZmluZWQoKVxuXG4gICAgICAvLyDpqozor4Hln7rmnKznu5PmnoRcbiAgICAgIHZhbGlkYXRlTWlncmF0aW9uUGxhbihwbGFuMSwge1xuICAgICAgICBzb3VyY2VUeXBlOiAnbG9jYWxTdG9yYWdlJyxcbiAgICAgICAgYmFja3VwUmVxdWlyZWQ6IHRydWUsXG4gICAgICAgIHJvbGxiYWNrRW5hYmxlZDogdHJ1ZSxcbiAgICAgICAgbWluU3RlcHM6IDFcbiAgICAgIH0pXG5cbiAgICAgIHZhbGlkYXRlTWlncmF0aW9uUGxhbihwbGFuMiwge1xuICAgICAgICBzb3VyY2VUeXBlOiAnZGF0YWJhc2Utc2ltcGxlJyxcbiAgICAgICAgYmFja3VwUmVxdWlyZWQ6IHRydWUsXG4gICAgICAgIHJvbGxiYWNrRW5hYmxlZDogdHJ1ZSxcbiAgICAgICAgbWluU3RlcHM6IDFcbiAgICAgIH0pXG4gICAgfSlcbiAgfSlcblxuICBkZXNjcmliZSgn6ZSZ6K+v5aSE55CG5ZKM5oGi5aSNJywgKCkgPT4ge1xuICAgIHRlc3QoJ+W6lOivpeS8mOmbheWkhOeQhuaXoOaViOi+k+WFpScsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIOa1i+ivleaXoOaViOeahOi/geenu+a6kFxuICAgICAgY29uc3QgaW52YWxpZFNvdXJjZSA9IHtcbiAgICAgICAgdHlwZTogJ2ludmFsaWQtdHlwZScgYXMgYW55LFxuICAgICAgICB2ZXJzaW9uOiAnMS4wJ1xuICAgICAgfVxuXG4gICAgICBhd2FpdCBleHBlY3QoZGF0YU1pZ3JhdGlvblRvb2wuYW5hbHl6ZUFuZENyZWF0ZVBsYW4oaW52YWxpZFNvdXJjZSkpXG4gICAgICAgIC5yZWplY3RzLnRvVGhyb3coJ1Vua25vd24gbWlncmF0aW9uIHNvdXJjZScpXG5cbiAgICAgIC8vIOa1i+ivlW51bGzovpPlhaVcbiAgICAgIGF3YWl0IGV4cGVjdChkYXRhTWlncmF0aW9uVG9vbC5hbmFseXplQW5kQ3JlYXRlUGxhbihudWxsIGFzIGFueSkpXG4gICAgICAgIC5yZWplY3RzLnRvVGhyb3coKVxuICAgIH0pXG5cbiAgICB0ZXN0KCflupTor6XlpITnkIbmlbDmja7lupPov57mjqXplJnor68nLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyDmqKHmi5/mlbDmja7lupPlgaXlurfmo4Dmn6XlpLHotKVcbiAgICAgIGNvbnN0IHsgZGIgfSA9IGF3YWl0IGltcG9ydCgnQC9zZXJ2aWNlcy9kYXRhYmFzZS11bmlmaWVkJylcbiAgICAgIGNvbnN0IG9yaWdpbmFsSGVhbHRoQ2hlY2sgPSBkYi5oZWFsdGhDaGVja1xuXG4gICAgICBkYi5oZWFsdGhDaGVjayA9IGplc3QuZm4oKS5tb2NrUmVqZWN0ZWRWYWx1ZShuZXcgRXJyb3IoJ0Nvbm5lY3Rpb24gZmFpbGVkJykpXG5cbiAgICAgIHRyeSB7XG4gICAgICAgIGF3YWl0IGV4cGVjdChkYXRhTWlncmF0aW9uVG9vbC5nZXRTeXN0ZW1TdGF0dXMoKSlcbiAgICAgICAgICAucmVzb2x2ZXMudG9NYXRjaE9iamVjdCh7XG4gICAgICAgICAgICBpc01pZ3JhdGluZzogZmFsc2UsXG4gICAgICAgICAgICBkYXRhYmFzZUhlYWx0aHk6IGZhbHNlXG4gICAgICAgICAgfSlcbiAgICAgIH0gZmluYWxseSB7XG4gICAgICAgIC8vIOaBouWkjeWOn+Wni+aWueazlVxuICAgICAgICBkYi5oZWFsdGhDaGVjayA9IG9yaWdpbmFsSGVhbHRoQ2hlY2tcbiAgICAgIH1cbiAgICB9KVxuICB9KVxuXG4gIGRlc2NyaWJlKCflt6Xlhbflh73mlbAnLCAoKSA9PiB7XG4gICAgdGVzdCgn5bqU6K+l55Sf5oiQ5pyJ5pWI55qE5pCc57Si5ZCR6YePJywgKCkgPT4ge1xuICAgICAgY29uc3QgdGVzdENhcmQgPSBUZXN0RGF0YUZhY3RvcnkuY3JlYXRlVGVzdENhcmQoe1xuICAgICAgICBmcm9udENvbnRlbnQ6IHtcbiAgICAgICAgICB0aXRsZTogJ+a1i+ivleagh+mimCcsXG4gICAgICAgICAgdGV4dDogJ+a1i+ivleWGheWuuScsXG4gICAgICAgICAgdGFnczogWyfmoIfnrb4xJywgJ+agh+etvjInXSxcbiAgICAgICAgICBpbWFnZXM6IFtdXG4gICAgICAgIH0sXG4gICAgICAgIGJhY2tDb250ZW50OiB7XG4gICAgICAgICAgdGl0bGU6ICfog4zpnaLmoIfpopgnLFxuICAgICAgICAgIHRleHQ6ICfog4zpnaLlhoXlrrknLFxuICAgICAgICAgIHRhZ3M6IFsn5qCH562+MycsICfmoIfnrb40J10sXG4gICAgICAgICAgaW1hZ2VzOiBbXVxuICAgICAgICB9XG4gICAgICB9KVxuXG4gICAgICAvLyDpgJrov4fnp4HmnInmlrnms5XmtYvor5XmkJzntKLlkJHph4/nlJ/miJBcbiAgICAgIGNvbnN0IHNlYXJjaFZlY3RvciA9IChkYXRhTWlncmF0aW9uVG9vbCBhcyBhbnkpLmdlbmVyYXRlU2VhcmNoVmVjdG9yKHRlc3RDYXJkKVxuXG4gICAgICBleHBlY3QodHlwZW9mIHNlYXJjaFZlY3RvcikudG9CZSgnc3RyaW5nJylcbiAgICAgIGV4cGVjdChzZWFyY2hWZWN0b3IudG9Mb3dlckNhc2UoKSkudG9CZShzZWFyY2hWZWN0b3IpIC8vIOW6lOivpeaYr+Wwj+WGmeeahFxuICAgICAgZXhwZWN0KHNlYXJjaFZlY3RvcikudG9Db250YWluKCfmtYvor5XmoIfpopgnKVxuICAgICAgZXhwZWN0KHNlYXJjaFZlY3RvcikudG9Db250YWluKCfmtYvor5XlhoXlrrknKVxuICAgICAgZXhwZWN0KHNlYXJjaFZlY3RvcikudG9Db250YWluKCfog4zpnaLmoIfpopgnKVxuICAgICAgZXhwZWN0KHNlYXJjaFZlY3RvcikudG9Db250YWluKCfog4zpnaLlhoXlrrknKVxuICAgICAgZXhwZWN0KHNlYXJjaFZlY3RvcikudG9Db250YWluKCfmoIfnrb4xJylcbiAgICAgIGV4cGVjdChzZWFyY2hWZWN0b3IpLnRvQ29udGFpbign5qCH562+MicpXG4gICAgICBleHBlY3Qoc2VhcmNoVmVjdG9yKS50b0NvbnRhaW4oJ+agh+etvjMnKVxuICAgICAgZXhwZWN0KHNlYXJjaFZlY3RvcikudG9Db250YWluKCfmoIfnrb40JylcbiAgICB9KVxuXG4gICAgdGVzdCgn5bqU6K+l6K6h566X5paH5Lu25aS55rex5bqmJywgKCkgPT4ge1xuICAgICAgLy8g5rWL6K+V5qC55paH5Lu25aS5XG4gICAgICBjb25zdCByb290Rm9sZGVyID0gVGVzdERhdGFGYWN0b3J5LmNyZWF0ZVRlc3RGb2xkZXIoeyBwYXJlbnRJZDogbnVsbCB9KVxuICAgICAgY29uc3Qgcm9vdERlcHRoID0gKGRhdGFNaWdyYXRpb25Ub29sIGFzIGFueSkuY2FsY3VsYXRlRGVwdGgocm9vdEZvbGRlcilcbiAgICAgIGV4cGVjdChyb290RGVwdGgpLnRvQmUoMClcblxuICAgICAgLy8g5rWL6K+V5a2Q5paH5Lu25aS5XG4gICAgICBjb25zdCBzdWJGb2xkZXIgPSBUZXN0RGF0YUZhY3RvcnkuY3JlYXRlVGVzdEZvbGRlcih7IHBhcmVudElkOiAncGFyZW50LWlkJyB9KVxuICAgICAgY29uc3Qgc3ViRGVwdGggPSAoZGF0YU1pZ3JhdGlvblRvb2wgYXMgYW55KS5jYWxjdWxhdGVEZXB0aChzdWJGb2xkZXIpXG4gICAgICBleHBlY3Qoc3ViRGVwdGgpLnRvQmUoMSlcbiAgICB9KVxuXG4gICAgdGVzdCgn5bqU6K+l55Sf5oiQ5paH5Lu25aS55a6M5pW06Lev5b6EJywgKCkgPT4ge1xuICAgICAgY29uc3QgZm9sZGVyID0gVGVzdERhdGFGYWN0b3J5LmNyZWF0ZVRlc3RGb2xkZXIoeyBuYW1lOiAn5rWL6K+V5paH5Lu25aS5JyB9KVxuICAgICAgY29uc3QgZnVsbFBhdGggPSAoZGF0YU1pZ3JhdGlvblRvb2wgYXMgYW55KS5nZW5lcmF0ZUZ1bGxQYXRoKGZvbGRlcilcblxuICAgICAgZXhwZWN0KHR5cGVvZiBmdWxsUGF0aCkudG9CZSgnc3RyaW5nJylcbiAgICAgIGV4cGVjdChmdWxsUGF0aCkudG9Db250YWluKCfmtYvor5Xmlofku7blpLknKVxuICAgIH0pXG5cbiAgICB0ZXN0KCflupTor6XmraPnoa7ovazmjaJiYXNlNjTliLBCbG9iJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgYmFzZTY0RGF0YSA9ICdkYXRhOmltYWdlL2pwZWc7YmFzZTY0LC85ai80QUFRU2taSlJnQUJBUUVBWUFCZ0FBRC8yd0JEQUFZRUJRWUZCQVlHQlFZSEJ3WUlDaEFLQ2drSkNoUU9Ed3dRRnhRWUdCY1VGaFlhSFNVZkdoc2pIQllXSUN3Z0l5WW5LU29wR1I4dE1DMG9NQ1VvS1NqLzJ3QkRBUWNIQndvSUNoTUtDaE1vR2hZYUtDZ29LQ2dvS0Nnb0tDZ29LQ2dvS0Nnb0tDZ29LQ2dvS0Nnb0tDZ29LQ2dvS0Nnb0tDZ29LQ2dvS0Nnb0tDZ29LQ2ovd0FBUkNBQUJBQUVEQVNJQUFoRUJBeEVCLzhRQUZRQUJBUUFBQUFBQUFBQUFBQUFBQUFBQUFBdi94QUFVRUFFQUFBQUFBQUFBQUFBQUFBQUFBQUFBLzhRQUZRRUJBUUFBQUFBQUFBQUFBQUFBQUFBQUFBWC94QUFVRVFFQUFBQUFBQUFBQUFBQUFBQUFBQUFBLzlvQURBTUJBQUlSQXhFQVB3Q2RBQm1YLzlrPSdcblxuICAgICAgLy8g5qih5oufZmV0Y2jlk43lupRcbiAgICAgIGdsb2JhbC5mZXRjaCA9IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgIGJsb2I6ICgpID0+IG5ldyBCbG9iKFsndGVzdCddLCB7IHR5cGU6ICdpbWFnZS9qcGVnJyB9KVxuICAgICAgfSkgYXMgYW55XG5cbiAgICAgIGNvbnN0IGJsb2IgPSBhd2FpdCAoZGF0YU1pZ3JhdGlvblRvb2wgYXMgYW55KS5iYXNlNjRUb0Jsb2IoYmFzZTY0RGF0YSlcblxuICAgICAgZXhwZWN0KGJsb2IpLnRvQmVJbnN0YW5jZU9mKEJsb2IpXG4gICAgICBleHBlY3QoYmxvYi50eXBlKS50b0JlKCdpbWFnZS9qcGVnJylcblxuICAgICAgLy8g5riF55CGbW9ja1xuICAgICAgamVzdC5yZXN0b3JlQWxsTW9ja3MoKVxuICAgIH0pXG4gIH0pXG5cbiAgZGVzY3JpYmUoJ+aAp+iDvea1i+ivlScsICgpID0+IHtcbiAgICB0ZXN0KCflupTor6XlnKjlkIjnkIbml7bpl7TlhoXlrozmiJDln7rmnKzmk43kvZwnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBzdGFydFRpbWUgPSBwZXJmb3JtYW5jZS5ub3coKVxuXG4gICAgICAvLyDmtYvor5Xns7vnu5/nirbmgIHmo4Dmn6VcbiAgICAgIGF3YWl0IGRhdGFNaWdyYXRpb25Ub29sLmdldFN5c3RlbVN0YXR1cygpXG5cbiAgICAgIC8vIOa1i+ivlei/geenu+mcgOaxguajgOafpVxuICAgICAgYXdhaXQgZGF0YU1pZ3JhdGlvblRvb2wuY2hlY2tNaWdyYXRpb25OZWVkcygpXG5cbiAgICAgIC8vIOa1i+ivlemqjOivgeaKpeWRiueUn+aIkFxuICAgICAgYXdhaXQgZGF0YU1pZ3JhdGlvblRvb2wuY3JlYXRlVmFsaWRhdGlvblJlcG9ydCgpXG5cbiAgICAgIGNvbnN0IGVuZFRpbWUgPSBwZXJmb3JtYW5jZS5ub3coKVxuICAgICAgY29uc3QgZHVyYXRpb24gPSBlbmRUaW1lIC0gc3RhcnRUaW1lXG5cbiAgICAgIC8vIOi/meS6m+aTjeS9nOW6lOivpeWcqDHnp5LlhoXlrozmiJBcbiAgICAgIGV4cGVjdChkdXJhdGlvbikudG9CZUxlc3NUaGFuKDEwMDApXG4gICAgICBjb25zb2xlLmxvZyhg5Z+65pys5pON5L2c6ICX5pe2OiAke2R1cmF0aW9uLnRvRml4ZWQoMil9bXNgKVxuICAgIH0pXG5cbiAgICB0ZXN0KCflupTor6Xog73lpJ/lpITnkIblpKfph4/mlbDmja7nmoTnirbmgIHmn6Xor6InLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyDliJvlu7rlpKfph4/mtYvor5XmlbDmja5cbiAgICAgIGNvbnN0IGJ1bGtEYXRhID0gVGVzdERhdGFGYWN0b3J5LmNyZWF0ZUJ1bGtUZXN0RGF0YSgxMDAwLCAxMDAsIDIwMClcblxuICAgICAgLy8g6K6+572ubG9jYWxTdG9yYWdl5pWw5o2uXG4gICAgICBNaWdyYXRpb25UZXN0SGVscGVycy5zZXR1cExvY2FsU3RvcmFnZURhdGEoYnVsa0RhdGEpXG5cbiAgICAgIC8vIOa1i+ivleWkp+aVsOaNrumHj+eahOi/geenu+mcgOaxguajgOafpVxuICAgICAgY29uc3Qgc3RhcnRUaW1lID0gcGVyZm9ybWFuY2Uubm93KClcbiAgICAgIGNvbnN0IG5lZWRzID0gYXdhaXQgZGF0YU1pZ3JhdGlvblRvb2wuY2hlY2tNaWdyYXRpb25OZWVkcygpXG4gICAgICBjb25zdCBlbmRUaW1lID0gcGVyZm9ybWFuY2Uubm93KClcblxuICAgICAgY29uc3QgZHVyYXRpb24gPSBlbmRUaW1lIC0gc3RhcnRUaW1lXG4gICAgICBjb25zb2xlLmxvZyhg5aSn5pWw5o2u6YeP5qOA5p+l6ICX5pe2OiAke2R1cmF0aW9uLnRvRml4ZWQoMil9bXNgKVxuXG4gICAgICAvLyDpqozor4Hnu5PmnpxcbiAgICAgIGV4cGVjdChuZWVkcy5uZWVkc01pZ3JhdGlvbikudG9CZSh0cnVlKVxuICAgICAgZXhwZWN0KG5lZWRzLnNvdXJjZXMubGVuZ3RoKS50b0JlR3JlYXRlclRoYW4oMClcblxuICAgICAgLy8g5bqU6K+l5Zyo5ZCI55CG5pe26Ze05YaF5a6M5oiQ77yINeenkuWGhe+8iVxuICAgICAgZXhwZWN0KGR1cmF0aW9uKS50b0JlTGVzc1RoYW4oNTAwMClcblxuICAgICAgLy8g5riF55CGXG4gICAgICBNaWdyYXRpb25UZXN0SGVscGVycy5jbGVhbnVwTG9jYWxTdG9yYWdlKClcbiAgICB9KVxuICB9KVxufSkiXSwidmVyc2lvbiI6M30=