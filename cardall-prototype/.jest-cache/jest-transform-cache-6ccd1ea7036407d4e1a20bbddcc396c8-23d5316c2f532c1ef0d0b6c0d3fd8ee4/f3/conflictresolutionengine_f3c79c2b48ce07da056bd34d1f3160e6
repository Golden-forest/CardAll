d55a7730937b29c78f13a093d63344f7
"use strict";
// ============================================================================
// 智能冲突解决引擎 - 多策略冲突检测和解决
// Week 3 Day 11-13: 同步服务架构重构
// ============================================================================
Object.defineProperty(exports, "__esModule", { value: true });
exports.conflictResolutionEngine = exports.ConflictResolutionEngine = void 0;
// ============================================================================
// 冲突解决引擎
// ============================================================================
class ConflictResolutionEngine {
    constructor() {
        Object.defineProperty(this, "detectionRules", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: new Map()
        });
        Object.defineProperty(this, "resolutionStrategies", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: new Map()
        });
        Object.defineProperty(this, "mergeStrategies", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: new Map()
        });
        Object.defineProperty(this, "conflictPatterns", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: new Map()
        });
        // 冲突历史和学习
        Object.defineProperty(this, "conflictHistory", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: []
        });
        Object.defineProperty(this, "resolutionStats", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: new Map()
        });
        // 机器学习模型（简化版本）
        Object.defineProperty(this, "conflictPredictionModel", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: void 0
        });
        this.initializeDetectionRules();
        this.initializeResolutionStrategies();
        this.initializeMergeStrategies();
        this.initializeConflictPatterns();
        this.initializeMLModel();
    }
    // ============================================================================
    // 核心冲突检测方法
    // ============================================================================
    /**
     * 检测所有类型的冲突
     */
    async detectAllConflicts(localData, cloudData, entityType, entityId, context) {
        const conflicts = [];
        // 应用所有启用的检测规则
        for (const rule of this.detectionRules.values()) {
            if (!rule.enabled)
                continue;
            if (rule.entityType !== 'all' && rule.entityType !== entityType)
                continue;
            try {
                const ruleConflicts = await rule.detectionFunction(localData, cloudData, context);
                conflicts.push(...ruleConflicts);
            }
            catch (error) {
                console.error(`Conflict detection rule ${rule.id} failed:`, error);
            }
        }
        // 去重和优化冲突
        const optimizedConflicts = this.optimizeConflicts(conflicts);
        // 记录到历史
        this.recordConflictDetection(optimizedConflicts, context);
        return optimizedConflicts;
    }
    /**
     * 智能解决冲突
     */
    async resolveConflicts(conflicts, context) {
        const resolvedConflicts = [];
        for (const conflict of conflicts) {
            try {
                const resolvedConflict = await this.resolveSingleConflict(conflict, context);
                resolvedConflicts.push(resolvedConflict);
            }
            catch (error) {
                console.error(`Failed to resolve conflict ${conflict.id}:`, error);
                // 标记为需要手动解决
                conflict.resolution = 'manual';
                conflict.autoResolved = false;
                resolvedConflicts.push(conflict);
            }
        }
        return resolvedConflicts;
    }
    /**
     * 解决单个冲突
     */
    async resolveSingleConflict(conflict, context) {
        // 预测最佳解决策略
        const predictedStrategy = await this.predictResolutionStrategy(conflict, context);
        // 获取策略
        const strategy = this.resolutionStrategies.get(predictedStrategy) ||
            this.selectFallbackStrategy(conflict);
        // 应用解决策略
        const result = await this.applyResolutionStrategy(conflict, strategy, context);
        // 记录解决结果
        this.recordResolutionResult(conflict, strategy, result.success);
        return result.conflict;
    }
    // ============================================================================
    // 高级冲突检测规则
    // ============================================================================
    initializeDetectionRules() {
        // 1. 版本冲突检测
        this.detectionRules.set('version-conflict', {
            id: 'version-conflict',
            name: 'Version Conflict Detection',
            description: '检测基于版本号的冲突',
            entityType: 'all',
            priority: 100,
            enabled: true,
            detectionFunction: (local, cloud, context) => this.detectVersionConflicts(local, cloud, context)
        });
        // 2. 字段级冲突检测
        this.detectionRules.set('field-conflict', {
            id: 'field-conflict',
            name: 'Field-Level Conflict Detection',
            description: '检测字段级别的冲突',
            entityType: 'all',
            priority: 90,
            enabled: true,
            detectionFunction: (local, cloud, context) => this.detectFieldConflicts(local, cloud, context)
        });
        // 3. 结构冲突检测
        this.detectionRules.set('structure-conflict', {
            id: 'structure-conflict',
            name: 'Structure Conflict Detection',
            description: '检测数据结构冲突',
            entityType: 'all',
            priority: 80,
            enabled: true,
            detectionFunction: (local, cloud, context) => this.detectStructureConflicts(local, cloud, context)
        });
        // 4. 引用完整性冲突检测
        this.detectionRules.set('reference-conflict', {
            id: 'reference-conflict',
            name: 'Reference Integrity Conflict Detection',
            description: '检测引用完整性冲突',
            entityType: 'all',
            priority: 70,
            enabled: true,
            detectionFunction: (local, cloud, context) => this.detectReferenceConflicts(local, cloud, context)
        });
        // 5. 业务逻辑冲突检测
        this.detectionRules.set('business-logic-conflict', {
            id: 'business-logic-conflict',
            name: 'Business Logic Conflict Detection',
            description: '检测业务逻辑冲突',
            entityType: 'all',
            priority: 60,
            enabled: true,
            detectionFunction: (local, cloud, context) => this.detectBusinessLogicConflicts(local, cloud, context)
        });
    }
    /**
     * 版本冲突检测
     */
    detectVersionConflicts(local, cloud, context) {
        const conflicts = [];
        const localVersion = local.sync_version || local.localVersion || 0;
        const cloudVersion = cloud.sync_version || cloud.cloudVersion || 0;
        if (localVersion !== cloudVersion) {
            conflicts.push({
                id: crypto.randomUUID(),
                entityType: this.inferEntityType(local),
                entityId: local.id || cloud.id,
                conflictType: 'version',
                localData: local,
                cloudData: cloud,
                detectedAt: new Date()
            });
        }
        return conflicts;
    }
    /**
     * 字段级冲突检测
     */
    detectFieldConflicts(local, cloud, context) {
        const conflicts = [];
        const conflictingFields = [];
        // 获取需要比较的字段
        const fields = this.getComparableFields(local, cloud);
        for (const field of fields) {
            const localValue = this.getNestedValue(local, field);
            const cloudValue = this.getNestedValue(cloud, field);
            if (!this.valuesEqual(localValue, cloudValue)) {
                conflictingFields.push(field);
            }
        }
        if (conflictingFields.length > 0) {
            conflicts.push({
                id: crypto.randomUUID(),
                entityType: this.inferEntityType(local),
                entityId: local.id || cloud.id,
                conflictType: 'field',
                localData: local,
                cloudData: cloud,
                conflictFields: conflictingFields,
                detectedAt: new Date()
            });
        }
        return conflicts;
    }
    /**
     * 结构冲突检测
     */
    detectStructureConflicts(local, cloud, context) {
        const conflicts = [];
        // 检查对象结构差异
        const localKeys = new Set(Object.keys(local));
        const cloudKeys = new Set(Object.keys(cloud));
        const missingInLocal = [...cloudKeys].filter(key => !localKeys.has(key));
        const missingInCloud = [...localKeys].filter(key => !cloudKeys.has(key));
        if (missingInLocal.length > 0 || missingInCloud.length > 0) {
            conflicts.push({
                id: crypto.randomUUID(),
                entityType: this.inferEntityType(local),
                entityId: local.id || cloud.id,
                conflictType: 'structure',
                localData: local,
                cloudData: cloud,
                conflictFields: [...missingInLocal, ...missingInCloud],
                detectedAt: new Date()
            });
        }
        return conflicts;
    }
    /**
     * 引用完整性冲突检测
     */
    detectReferenceConflicts(local, cloud, context) {
        const conflicts = [];
        // 检查文件夹引用
        if (local.folderId !== undefined || cloud.folderId !== undefined) {
            if (local.folderId !== cloud.folderId) {
                conflicts.push({
                    id: crypto.randomUUID(),
                    entityType: 'card',
                    entityId: local.id || cloud.id,
                    conflictType: 'field',
                    localData: local,
                    cloudData: cloud,
                    conflictFields: ['folderId'],
                    detectedAt: new Date()
                });
            }
        }
        // 检查标签引用
        if (local.tags !== undefined || cloud.tags !== undefined) {
            const localTags = new Set(local.tags || []);
            const cloudTags = new Set(cloud.tags || []);
            if (!this.setsEqual(localTags, cloudTags)) {
                conflicts.push({
                    id: crypto.randomUUID(),
                    entityType: this.inferEntityType(local),
                    entityId: local.id || cloud.id,
                    conflictType: 'field',
                    localData: local,
                    cloudData: cloud,
                    conflictFields: ['tags'],
                    detectedAt: new Date()
                });
            }
        }
        return conflicts;
    }
    /**
     * 业务逻辑冲突检测
     */
    detectBusinessLogicConflicts(local, cloud, context) {
        const conflicts = [];
        // 检测卡片内容冲突
        if (local.frontContent || cloud.frontContent) {
            const contentConflict = this.detectContentConflicts(local, cloud);
            if (contentConflict) {
                conflicts.push(contentConflict);
            }
        }
        // 检测样式冲突
        if (local.style || cloud.style) {
            const styleConflict = this.detectStyleConflicts(local, cloud);
            if (styleConflict) {
                conflicts.push(styleConflict);
            }
        }
        return conflicts;
    }
    // ============================================================================
    // 合并策略实现
    // ============================================================================
    initializeMergeStrategies() {
        // 1. 智能文本合并策略
        this.mergeStrategies.set('smart-text-merge', {
            id: 'smart-text-merge',
            name: 'Smart Text Merge',
            description: '智能合并文本内容，保留两边的修改',
            applicableTypes: ['card'],
            mergeFunction: (local, cloud, context) => this.smartTextMerge(local, cloud),
            confidence: 0.8
        });
        // 2. 时间戳优先策略
        this.mergeStrategies.set('timestamp-priority', {
            id: 'timestamp-priority',
            name: 'Timestamp Priority',
            description: '使用最新的时间戳决定优先级',
            applicableTypes: ['all'],
            mergeFunction: (local, cloud, context) => this.timestampPriorityMerge(local, cloud),
            confidence: 0.9
        });
        // 3. 字段级智能合并
        this.mergeStrategies.set('field-smart-merge', {
            id: 'field-smart-merge',
            name: 'Field Smart Merge',
            description: '按字段类型智能选择最佳合并策略',
            applicableTypes: ['all'],
            mergeFunction: (local, cloud, context) => this.fieldSmartMerge(local, cloud),
            confidence: 0.85
        });
        // 4. 用户偏好合并
        this.mergeStrategies.set('user-preference-merge', {
            id: 'user-preference-merge',
            name: 'User Preference Merge',
            description: '基于用户历史偏好进行合并',
            applicableTypes: ['all'],
            mergeFunction: (local, cloud, context) => this.userPreferenceMerge(local, cloud, context),
            confidence: 0.75
        });
        // 5. 机器学习合并
        this.mergeStrategies.set('ml-merge', {
            id: 'ml-merge',
            name: 'Machine Learning Merge',
            description: '使用机器学习模型预测最佳合并策略',
            applicableTypes: ['all'],
            mergeFunction: (local, cloud, context) => this.mlMerge(local, cloud, context),
            confidence: 0.7
        });
    }
    /**
     * 智能文本合并
     */
    smartTextMerge(local, cloud) {
        const result = { ...local };
        // 合并正面内容
        if (local.frontContent && cloud.frontContent) {
            result.frontContent = this.mergeContent(local.frontContent, cloud.frontContent);
        }
        // 合并背面内容
        if (local.backContent && cloud.backContent) {
            result.backContent = this.mergeContent(local.backContent, cloud.backContent);
        }
        return result;
    }
    /**
     * 时间戳优先合并
     */
    timestampPriorityMerge(local, cloud) {
        const localTime = new Date(local.updatedAt || local.timestamp).getTime();
        const cloudTime = new Date(cloud.updatedAt || cloud.timestamp).getTime();
        return cloudTime > localTime ? { ...cloud } : { ...local };
    }
    /**
     * 字段级智能合并
     */
    fieldSmartMerge(local, cloud) {
        const result = { ...local };
        Object.keys(cloud).forEach(key => {
            if (local[key] === undefined) {
                result[key] = cloud[key];
            }
            else if (!this.valuesEqual(local[key], cloud[key])) {
                // 根据字段类型选择合并策略
                result[key] = this.mergeFieldByType(key, local[key], cloud[key]);
            }
        });
        return result;
    }
    /**
     * 用户偏好合并
     */
    userPreferenceMerge(local, cloud, context) {
        // 分析用户历史解决模式
        const userPreference = this.analyzeUserPreference(context.userId);
        switch (userPreference) {
            case 'local-first':
                return { ...local };
            case 'cloud-first':
                return { ...cloud };
            case 'smart-merge':
                return this.fieldSmartMerge(local, cloud);
            default:
                return this.timestampPriorityMerge(local, cloud);
        }
    }
    /**
     * 机器学习合并
     */
    mlMerge(local, cloud, context) {
        // 简化的机器学习合并逻辑
        const features = this.extractFeatures(local, cloud, context);
        const prediction = this.predictMergeStrategy(features);
        switch (prediction.strategy) {
            case 'local':
                return { ...local };
            case 'cloud':
                return { ...cloud };
            case 'merge':
                return this.fieldSmartMerge(local, cloud);
            default:
                return this.timestampPriorityMerge(local, cloud);
        }
    }
    // ============================================================================
    // 机器学习和预测功能
    // ============================================================================
    initializeMLModel() {
        this.conflictPredictionModel = {
            patterns: new Map(),
            confidenceThreshold: 0.7
        };
        // 初始化一些基础模式
        this.conflictPredictionModel.patterns.set('version-conflict-local', 0.8);
        this.conflictPredictionModel.patterns.set('field-conflict-merge', 0.6);
        this.conflictPredictionModel.patterns.set('structure-conflict-manual', 0.9);
    }
    /**
     * 预测最佳解决策略
     */
    async predictResolutionStrategy(conflict, context) {
        // 提取特征
        const features = this.extractConflictFeatures(conflict, context);
        // 查找相似历史冲突
        const similarConflicts = this.findSimilarConflicts(features);
        if (similarConflicts.length > 0) {
            const bestStrategy = this.getMostSuccessfulStrategy(similarConflicts);
            return bestStrategy;
        }
        // 使用启发式规则
        return this.heuristicStrategySelection(conflict, context);
    }
    /**
     * 提取冲突特征
     */
    extractConflictFeatures(conflict, context) {
        return {
            conflictType: conflict.conflictType,
            entityType: conflict.entityType,
            fieldCount: conflict.conflictFields?.length || 0,
            timeOfDay: context.timestamp.getHours(),
            dayOfWeek: context.timestamp.getDay(),
            networkQuality: context.networkInfo.effectiveType,
            deviceType: context.deviceInfo.deviceType,
            userHistoryLength: context.syncHistory.length,
            isWeekend: context.timestamp.getDay() === 0 || context.timestamp.getDay() === 6
        };
    }
    /**
     * 查找相似冲突
     */
    findSimilarConflicts(features) {
        const similarConflicts = [];
        for (const historicalConflict of this.conflictHistory) {
            const similarity = this.calculateSimilarity(features, historicalConflict);
            if (similarity > 0.7) {
                similarConflicts.push(historicalConflict);
            }
        }
        return similarConflicts;
    }
    /**
     * 计算相似度
     */
    calculateSimilarity(features, conflict) {
        let similarity = 0;
        if (features.conflictType === conflict.conflictType)
            similarity += 0.3;
        if (features.entityType === conflict.entityType)
            similarity += 0.2;
        const fieldCountDiff = Math.abs(features.fieldCount - (conflict.conflictFields?.length || 0));
        similarity += Math.max(0, 0.2 - fieldCountDiff * 0.05);
        return similarity;
    }
    // ============================================================================
    // 工具方法和辅助函数
    // ============================================================================
    /**
     * 获取可比较字段
     */
    getComparableFields(local, cloud) {
        const fields = new Set();
        // 添加通用字段
        fields.add('id');
        fields.add('sync_version');
        fields.add('updatedAt');
        fields.add('createdAt');
        // 根据实体类型添加特定字段
        if (local.frontContent || cloud.frontContent) {
            fields.add('frontContent.title');
            fields.add('frontContent.text');
            fields.add('frontContent.tags');
        }
        if (local.backContent || cloud.backContent) {
            fields.add('backContent.title');
            fields.add('backContent.text');
            fields.add('backContent.tags');
        }
        if (local.style || cloud.style) {
            fields.add('style.type');
            fields.add('style.backgroundColor');
            fields.add('style.textColor');
        }
        if (local.folderId !== undefined || cloud.folderId !== undefined) {
            fields.add('folderId');
        }
        return Array.from(fields);
    }
    /**
     * 获取嵌套值
     */
    getNestedValue(obj, path) {
        return path.split('.').reduce((current, key) => current?.[key], obj);
    }
    /**
     * 值相等比较
     */
    valuesEqual(a, b) {
        if (a === b)
            return true;
        if (a == null || b == null)
            return false;
        if (typeof a !== typeof b)
            return false;
        if (typeof a === 'object') {
            return JSON.stringify(a) === JSON.stringify(b);
        }
        return false;
    }
    /**
     * 集合相等
     */
    setsEqual(a, b) {
        if (a.size !== b.size)
            return false;
        for (const item of a) {
            if (!b.has(item))
                return false;
        }
        return true;
    }
    /**
     * 推断实体类型
     */
    inferEntityType(data) {
        if (data.frontContent || data.backContent)
            return 'card';
        if (data.name && data.color)
            return 'tag';
        if (data.name && data.cardIds)
            return 'folder';
        if (data.fileName && data.filePath)
            return 'image';
        return 'unknown';
    }
    /**
     * 合并内容
     */
    mergeContent(local, cloud) {
        const result = { ...local };
        // 智能合并标题
        if (local.title !== cloud.title) {
            result.title = this.mergeTextFields(local.title, cloud.title);
        }
        // 智能合并文本
        if (local.text !== cloud.text) {
            result.text = this.mergeTextFields(local.text, cloud.text);
        }
        // 合并标签
        if (local.tags || cloud.tags) {
            const localTags = new Set(local.tags || []);
            const cloudTags = new Set(cloud.tags || []);
            result.tags = Array.from(new Set([...localTags, ...cloudTags]));
        }
        return result;
    }
    /**
     * 合并文本字段
     */
    mergeTextFields(local, cloud) {
        // 简单的文本合并策略：选择更长的文本
        return local.length > cloud.length ? local : cloud;
    }
    /**
     * 按字段类型合并
     */
    mergeFieldByType(fieldName, localValue, cloudValue) {
        if (fieldName.includes('time') || fieldName.includes('date')) {
            // 时间字段使用最新的
            const localTime = new Date(localValue).getTime();
            const cloudTime = new Date(cloudValue).getTime();
            return cloudTime > localTime ? cloudValue : localValue;
        }
        if (fieldName.includes('version')) {
            // 版本字段使用较大的
            return Math.max(localValue, cloudValue);
        }
        if (typeof localValue === 'string' && typeof cloudValue === 'string') {
            // 文本字段合并
            return this.mergeTextFields(localValue, cloudValue);
        }
        // 默认使用本地值
        return localValue;
    }
    /**
     * 分析用户偏好
     */
    analyzeUserPreference(userId) {
        // 简化的用户偏好分析
        const userStats = this.resolutionStats.get(userId);
        if (!userStats)
            return 'smart-merge';
        if (userStats.success > userStats.failure * 2) {
            return 'smart-merge';
        }
        return 'timestamp-priority';
    }
    /**
     * 优化冲突列表
     */
    optimizeConflicts(conflicts) {
        // 去重
        const uniqueConflicts = new Map();
        for (const conflict of conflicts) {
            const key = `${conflict.entityType}-${conflict.entityId}-${conflict.conflictType}`;
            if (!uniqueConflicts.has(key) ||
                (uniqueConflicts.get(key).priority || 0) < (conflict.priority || 0)) {
                uniqueConflicts.set(key, conflict);
            }
        }
        return Array.from(uniqueConflicts.values());
    }
    /**
     * 记录冲突检测
     */
    recordConflictDetection(conflicts, context) {
        this.conflictHistory.push(...conflicts);
        // 限制历史记录大小
        if (this.conflictHistory.length > 1000) {
            this.conflictHistory = this.conflictHistory.slice(-500);
        }
    }
    /**
     * 记录解决结果
     */
    recordResolutionResult(conflict, strategy, success) {
        const key = `${conflict.entityType}-${strategy}`;
        const stats = this.resolutionStats.get(key) || { success: 0, failure: 0 };
        if (success) {
            stats.success++;
        }
        else {
            stats.failure++;
        }
        this.resolutionStats.set(key, stats);
    }
    // ============================================================================
    // 占位符方法
    // ============================================================================
    detectContentConflicts(local, cloud) {
        // TODO: 实现内容冲突检测
        return null;
    }
    detectStyleConflicts(local, cloud) {
        // TODO: 实现样式冲突检测
        return null;
    }
    selectFallbackStrategy(conflict) {
        // TODO: 实现后备策略选择
        return {
            type: 'manual',
            priority: 0,
            conditions: {},
            resolution: 'manual'
        };
    }
    async applyResolutionStrategy(conflict, strategy, context) {
        // TODO: 实现策略应用
        return { conflict, success: true };
    }
    getMostSuccessfulStrategy(conflicts) {
        // TODO: 实现成功策略获取
        return 'timestamp-priority';
    }
    heuristicStrategySelection(conflict, context) {
        // TODO: 实现启发式策略选择
        return 'timestamp-priority';
    }
    extractFeatures(local, cloud, context) {
        // TODO: 实现特征提取
        return {};
    }
    predictMergeStrategy(features) {
        // TODO: 实现合并策略预测
        return { strategy: 'merge', confidence: 0.7 };
    }
}
exports.ConflictResolutionEngine = ConflictResolutionEngine;
// ============================================================================
// 导出单例实例
// ============================================================================
exports.conflictResolutionEngine = new ConflictResolutionEngine();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiRDpcXFByb2plY3RzXFxDYXJkRXZlcnl0aGluZ1xcY2FyZGFsbC1wcm90b3R5cGVcXHNyY1xcc2VydmljZXNcXGNvbmZsaWN0LXJlc29sdXRpb24tZW5naW5lLnRzIiwibWFwcGluZ3MiOiI7QUFBQSwrRUFBK0U7QUFDL0Usd0JBQXdCO0FBQ3hCLDZCQUE2QjtBQUM3QiwrRUFBK0U7OztBQThDL0UsK0VBQStFO0FBQy9FLFNBQVM7QUFDVCwrRUFBK0U7QUFFL0UsTUFBYSx3QkFBd0I7SUFnQm5DO1FBZlE7Ozs7bUJBQXFELElBQUksR0FBRyxFQUFFO1dBQUE7UUFDOUQ7Ozs7bUJBQWdFLElBQUksR0FBRyxFQUFFO1dBQUE7UUFDekU7Ozs7bUJBQThDLElBQUksR0FBRyxFQUFFO1dBQUE7UUFDdkQ7Ozs7bUJBQWlELElBQUksR0FBRyxFQUFFO1dBQUE7UUFFbEUsVUFBVTtRQUNGOzs7O21CQUFrQyxFQUFFO1dBQUE7UUFDcEM7Ozs7bUJBQXFFLElBQUksR0FBRyxFQUFFO1dBQUE7UUFFdEYsZUFBZTtRQUNQOzs7OztXQUdQO1FBR0MsSUFBSSxDQUFDLHdCQUF3QixFQUFFLENBQUE7UUFDL0IsSUFBSSxDQUFDLDhCQUE4QixFQUFFLENBQUE7UUFDckMsSUFBSSxDQUFDLHlCQUF5QixFQUFFLENBQUE7UUFDaEMsSUFBSSxDQUFDLDBCQUEwQixFQUFFLENBQUE7UUFDakMsSUFBSSxDQUFDLGlCQUFpQixFQUFFLENBQUE7SUFDMUIsQ0FBQztJQUVELCtFQUErRTtJQUMvRSxXQUFXO0lBQ1gsK0VBQStFO0lBRS9FOztPQUVHO0lBQ0gsS0FBSyxDQUFDLGtCQUFrQixDQUN0QixTQUFjLEVBQ2QsU0FBYyxFQUNkLFVBQWtCLEVBQ2xCLFFBQWdCLEVBQ2hCLE9BQXdCO1FBRXhCLE1BQU0sU0FBUyxHQUFtQixFQUFFLENBQUE7UUFFcEMsY0FBYztRQUNkLEtBQUssTUFBTSxJQUFJLElBQUksSUFBSSxDQUFDLGNBQWMsQ0FBQyxNQUFNLEVBQUUsRUFBRSxDQUFDO1lBQ2hELElBQUksQ0FBQyxJQUFJ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O1lBQ2QsVUFBVSxFQUFFLFFBQVE7U0FDckIsQ0FBQTtJQUNILENBQUM7SUFFTyxLQUFLLENBQUMsdUJBQXVCLENBQ25DLFFBQXNCLEVBQ3RCLFFBQW9DLEVBQ3BDLE9BQXdCO1FBRXhCLGVBQWU7UUFDZixPQUFPLEVBQUUsUUFBUSxFQUFFLE9BQU8sRUFBRSxJQUFJLEVBQUUsQ0FBQTtJQUNwQyxDQUFDO0lBRU8seUJBQXlCLENBQUMsU0FBeUI7UUFDekQsaUJBQWlCO1FBQ2pCLE9BQU8sb0JBQW9CLENBQUE7SUFDN0IsQ0FBQztJQUVPLDBCQUEwQixDQUFDLFFBQXNCLEVBQUUsT0FBd0I7UUFDakYsa0JBQWtCO1FBQ2xCLE9BQU8sb0JBQW9CLENBQUE7SUFDN0IsQ0FBQztJQUVPLGVBQWUsQ0FBQyxLQUFVLEVBQUUsS0FBVSxFQUFFLE9BQXdCO1FBQ3RFLGVBQWU7UUFDZixPQUFPLEVBQUUsQ0FBQTtJQUNYLENBQUM7SUFFTyxvQkFBb0IsQ0FBQyxRQUFhO1FBQ3hDLGlCQUFpQjtRQUNqQixPQUFPLEVBQUUsUUFBUSxFQUFFLE9BQU8sRUFBRSxVQUFVLEVBQUUsR0FBRyxFQUFFLENBQUE7SUFDL0MsQ0FBQztDQUNGO0FBenpCRCw0REF5ekJDO0FBRUQsK0VBQStFO0FBQy9FLFNBQVM7QUFDVCwrRUFBK0U7QUFFbEUsUUFBQSx3QkFBd0IsR0FBRyxJQUFJLHdCQUF3QixFQUFFLENBQUEiLCJuYW1lcyI6W10sInNvdXJjZXMiOlsiRDpcXFByb2plY3RzXFxDYXJkRXZlcnl0aGluZ1xcY2FyZGFsbC1wcm90b3R5cGVcXHNyY1xcc2VydmljZXNcXGNvbmZsaWN0LXJlc29sdXRpb24tZW5naW5lLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIOaZuuiDveWGsueqgeino+WGs+W8leaTjiAtIOWkmuetlueVpeWGsueqgeajgOa1i+WSjOino+WGs1xuLy8gV2VlayAzIERheSAxMS0xMzog5ZCM5q2l5pyN5Yqh5p625p6E6YeN5p6EXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbmltcG9ydCB0eXBlIHsgQ29uZmxpY3RJbmZvLCBDb25mbGljdFJlc29sdXRpb25TdHJhdGVneSwgRmllbGRMZXZlbENvbmZsaWN0IH0gZnJvbSAnLi9vcHRpbWl6ZWQtY2xvdWQtc3luYydcbmltcG9ydCB0eXBlIHsgRGJDYXJkLCBEYkZvbGRlciwgRGJUYWcsIERiSW1hZ2UgfSBmcm9tICcuL2RhdGFiYXNlJ1xuXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyDpq5jnuqflhrLnqoHmo4DmtYvnsbvlnotcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuZXhwb3J0IGludGVyZmFjZSBDb25mbGljdERldGVjdGlvblJ1bGUge1xuICBpZDogc3RyaW5nXG4gIG5hbWU6IHN0cmluZ1xuICBkZXNjcmlwdGlvbjogc3RyaW5nXG4gIGVudGl0eVR5cGU6ICdjYXJkJyB8ICdmb2xkZXInIHwgJ3RhZycgfCAnaW1hZ2UnIHwgJ2FsbCdcbiAgZGV0ZWN0aW9uRnVuY3Rpb246IChsb2NhbDogYW55LCBjbG91ZDogYW55LCBjb250ZXh0OiBDb25mbGljdENvbnRleHQpID0+IENvbmZsaWN0SW5mb1tdXG4gIHByaW9yaXR5OiBudW1iZXJcbiAgZW5hYmxlZDogYm9vbGVhblxufVxuXG5leHBvcnQgaW50ZXJmYWNlIENvbmZsaWN0Q29udGV4dCB7XG4gIHVzZXJJZDogc3RyaW5nXG4gIHRpbWVzdGFtcDogRGF0ZVxuICBuZXR3b3JrSW5mbzogYW55XG4gIGRldmljZUluZm86IGFueVxuICB1c2VyUHJlZmVyZW5jZXM6IGFueVxuICBzeW5jSGlzdG9yeTogYW55W11cbn1cblxuZXhwb3J0IGludGVyZmFjZSBDb25mbGljdFBhdHRlcm4ge1xuICBpZDogc3RyaW5nXG4gIHBhdHRlcm46IHN0cmluZ1xuICBkZXNjcmlwdGlvbjogc3RyaW5nXG4gIHNldmVyaXR5OiAnbG93JyB8ICdtZWRpdW0nIHwgJ2hpZ2gnIHwgJ2NyaXRpY2FsJ1xuICBhdXRvUmVzb2x1dGlvbjogYm9vbGVhblxuICByZXNvbHV0aW9uU3RyYXRlZ3k6IHN0cmluZ1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIE1lcmdlU3RyYXRlZ3kge1xuICBpZDogc3RyaW5nXG4gIG5hbWU6IHN0cmluZ1xuICBkZXNjcmlwdGlvbjogc3RyaW5nXG4gIGFwcGxpY2FibGVUeXBlczogc3RyaW5nW11cbiAgbWVyZ2VGdW5jdGlvbjogKGxvY2FsOiBhbnksIGNsb3VkOiBhbnksIGNvbnRleHQ6IENvbmZsaWN0Q29udGV4dCkgPT4gYW55XG4gIGNvbmZpZGVuY2U6IG51bWJlciAvLyAwLTEsIOihqOekuuWQiOW5tuetlueVpeeahOe9ruS/oeW6plxufVxuXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyDlhrLnqoHop6PlhrPlvJXmk45cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuZXhwb3J0IGNsYXNzIENvbmZsaWN0UmVzb2x1dGlvbkVuZ2luZSB7XG4gIHByaXZhdGUgZGV0ZWN0aW9uUnVsZXM6IE1hcDxzdHJpbmcsIENvbmZsaWN0RGV0ZWN0aW9uUnVsZT4gPSBuZXcgTWFwKClcbiAgcHJpdmF0ZSByZXNvbHV0aW9uU3RyYXRlZ2llczogTWFwPHN0cmluZywgQ29uZmxpY3RSZXNvbHV0aW9uU3RyYXRlZ3k+ID0gbmV3IE1hcCgpXG4gIHByaXZhdGUgbWVyZ2VTdHJhdGVnaWVzOiBNYXA8c3RyaW5nLCBNZXJnZVN0cmF0ZWd5PiA9IG5ldyBNYXAoKVxuICBwcml2YXRlIGNvbmZsaWN0UGF0dGVybnM6IE1hcDxzdHJpbmcsIENvbmZsaWN0UGF0dGVybj4gPSBuZXcgTWFwKClcbiAgXG4gIC8vIOWGsueqgeWOhuWPsuWSjOWtpuS5oFxuICBwcml2YXRlIGNvbmZsaWN0SGlzdG9yeTogQ29uZmxpY3RJbmZvW10gPSBbXVxuICBwcml2YXRlIHJlc29sdXRpb25TdGF0czogTWFwPHN0cmluZywgeyBzdWNjZXNzOiBudW1iZXI7IGZhaWx1cmU6IG51bWJlciB9PiA9IG5ldyBNYXAoKVxuICBcbiAgLy8g5py65Zmo5a2m5Lmg5qih5Z6L77yI566A5YyW54mI5pys77yJXG4gIHByaXZhdGUgY29uZmxpY3RQcmVkaWN0aW9uTW9kZWw6IHtcbiAgICBwYXR0ZXJuczogTWFwPHN0cmluZywgbnVtYmVyPlxuICAgIGNvbmZpZGVuY2VUaHJlc2hvbGQ6IG51bWJlclxuICB9XG5cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5pbml0aWFsaXplRGV0ZWN0aW9uUnVsZXMoKVxuICAgIHRoaXMuaW5pdGlhbGl6ZVJlc29sdXRpb25TdHJhdGVnaWVzKClcbiAgICB0aGlzLmluaXRpYWxpemVNZXJnZVN0cmF0ZWdpZXMoKVxuICAgIHRoaXMuaW5pdGlhbGl6ZUNvbmZsaWN0UGF0dGVybnMoKVxuICAgIHRoaXMuaW5pdGlhbGl6ZU1MTW9kZWwoKVxuICB9XG5cbiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICAvLyDmoLjlv4PlhrLnqoHmo4DmtYvmlrnms5VcbiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG4gIC8qKlxuICAgKiDmo4DmtYvmiYDmnInnsbvlnovnmoTlhrLnqoFcbiAgICovXG4gIGFzeW5jIGRldGVjdEFsbENvbmZsaWN0cyhcbiAgICBsb2NhbERhdGE6IGFueSwgXG4gICAgY2xvdWREYXRhOiBhbnksIFxuICAgIGVudGl0eVR5cGU6IHN0cmluZywgXG4gICAgZW50aXR5SWQ6IHN0cmluZywgXG4gICAgY29udGV4dDogQ29uZmxpY3RDb250ZXh0XG4gICk6IFByb21pc2U8Q29uZmxpY3RJbmZvW10+IHtcbiAgICBjb25zdCBjb25mbGljdHM6IENvbmZsaWN0SW5mb1tdID0gW11cbiAgICBcbiAgICAvLyDlupTnlKjmiYDmnInlkK/nlKjnmoTmo4DmtYvop4TliJlcbiAgICBmb3IgKGNvbnN0IHJ1bGUgb2YgdGhpcy5kZXRlY3Rpb25SdWxlcy52YWx1ZXMoKSkge1xuICAgICAgaWYgKCFydWxlLmVuYWJsZWQpIGNvbnRpbnVlXG4gICAgICBpZiAocnVsZS5lbnRpdHlUeXBlICE9PSAnYWxsJyAmJiBydWxlLmVudGl0eVR5cGUgIT09IGVudGl0eVR5cGUpIGNvbnRpbnVlXG4gICAgICBcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHJ1bGVDb25mbGljdHMgPSBhd2FpdCBydWxlLmRldGVjdGlvbkZ1bmN0aW9uKGxvY2FsRGF0YSwgY2xvdWREYXRhLCBjb250ZXh0KVxuICAgICAgICBjb25mbGljdHMucHVzaCguLi5ydWxlQ29uZmxpY3RzKVxuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihgQ29uZmxpY3QgZGV0ZWN0aW9uIHJ1bGUgJHtydWxlLmlkfSBmYWlsZWQ6YCwgZXJyb3IpXG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIC8vIOWOu+mHjeWSjOS8mOWMluWGsueqgVxuICAgIGNvbnN0IG9wdGltaXplZENvbmZsaWN0cyA9IHRoaXMub3B0aW1pemVDb25mbGljdHMoY29uZmxpY3RzKVxuICAgIFxuICAgIC8vIOiusOW9leWIsOWOhuWPslxuICAgIHRoaXMucmVjb3JkQ29uZmxpY3REZXRlY3Rpb24ob3B0aW1pemVkQ29uZmxpY3RzLCBjb250ZXh0KVxuICAgIFxuICAgIHJldHVybiBvcHRpbWl6ZWRDb25mbGljdHNcbiAgfVxuXG4gIC8qKlxuICAgKiDmmbrog73op6PlhrPlhrLnqoFcbiAgICovXG4gIGFzeW5jIHJlc29sdmVDb25mbGljdHMoXG4gICAgY29uZmxpY3RzOiBDb25mbGljdEluZm9bXSwgXG4gICAgY29udGV4dDogQ29uZmxpY3RDb250ZXh0XG4gICk6IFByb21pc2U8Q29uZmxpY3RJbmZvW10+IHtcbiAgICBjb25zdCByZXNvbHZlZENvbmZsaWN0czogQ29uZmxpY3RJbmZvW10gPSBbXVxuICAgIFxuICAgIGZvciAoY29uc3QgY29uZmxpY3Qgb2YgY29uZmxpY3RzKSB7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCByZXNvbHZlZENvbmZsaWN0ID0gYXdhaXQgdGhpcy5yZXNvbHZlU2luZ2xlQ29uZmxpY3QoY29uZmxpY3QsIGNvbnRleHQpXG4gICAgICAgIHJlc29sdmVkQ29uZmxpY3RzLnB1c2gocmVzb2x2ZWRDb25mbGljdClcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoYEZhaWxlZCB0byByZXNvbHZlIGNvbmZsaWN0ICR7Y29uZmxpY3QuaWR9OmAsIGVycm9yKVxuICAgICAgICAvLyDmoIforrDkuLrpnIDopoHmiYvliqjop6PlhrNcbiAgICAgICAgY29uZmxpY3QucmVzb2x1dGlvbiA9ICdtYW51YWwnXG4gICAgICAgIGNvbmZsaWN0LmF1dG9SZXNvbHZlZCA9IGZhbHNlXG4gICAgICAgIHJlc29sdmVkQ29uZmxpY3RzLnB1c2goY29uZmxpY3QpXG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIHJldHVybiByZXNvbHZlZENvbmZsaWN0c1xuICB9XG5cbiAgLyoqXG4gICAqIOino+WGs+WNleS4quWGsueqgVxuICAgKi9cbiAgcHJpdmF0ZSBhc3luYyByZXNvbHZlU2luZ2xlQ29uZmxpY3QoXG4gICAgY29uZmxpY3Q6IENvbmZsaWN0SW5mbywgXG4gICAgY29udGV4dDogQ29uZmxpY3RDb250ZXh0XG4gICk6IFByb21pc2U8Q29uZmxpY3RJbmZvPiB7XG4gICAgLy8g6aKE5rWL5pyA5L2z6Kej5Yaz562W55WlXG4gICAgY29uc3QgcHJlZGljdGVkU3RyYXRlZ3kgPSBhd2FpdCB0aGlzLnByZWRpY3RSZXNvbHV0aW9uU3RyYXRlZ3koY29uZmxpY3QsIGNvbnRleHQpXG4gICAgXG4gICAgLy8g6I635Y+W562W55WlXG4gICAgY29uc3Qgc3RyYXRlZ3kgPSB0aGlzLnJlc29sdXRpb25TdHJhdGVnaWVzLmdldChwcmVkaWN0ZWRTdHJhdGVneSkgfHwgXG4gICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RGYWxsYmFja1N0cmF0ZWd5KGNvbmZsaWN0KVxuICAgIFxuICAgIC8vIOW6lOeUqOino+WGs+etlueVpVxuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMuYXBwbHlSZXNvbHV0aW9uU3RyYXRlZ3koY29uZmxpY3QsIHN0cmF0ZWd5LCBjb250ZXh0KVxuICAgIFxuICAgIC8vIOiusOW9leino+WGs+e7k+aenFxuICAgIHRoaXMucmVjb3JkUmVzb2x1dGlvblJlc3VsdChjb25mbGljdCwgc3RyYXRlZ3ksIHJlc3VsdC5zdWNjZXNzKVxuICAgIFxuICAgIHJldHVybiByZXN1bHQuY29uZmxpY3RcbiAgfVxuXG4gIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgLy8g6auY57qn5Yay56qB5qOA5rWL6KeE5YiZXG4gIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuICBwcml2YXRlIGluaXRpYWxpemVEZXRlY3Rpb25SdWxlcygpOiB2b2lkIHtcbiAgICAvLyAxLiDniYjmnKzlhrLnqoHmo4DmtYtcbiAgICB0aGlzLmRldGVjdGlvblJ1bGVzLnNldCgndmVyc2lvbi1jb25mbGljdCcsIHtcbiAgICAgIGlkOiAndmVyc2lvbi1jb25mbGljdCcsXG4gICAgICBuYW1lOiAnVmVyc2lvbiBDb25mbGljdCBEZXRlY3Rpb24nLFxuICAgICAgZGVzY3JpcHRpb246ICfmo4DmtYvln7rkuo7niYjmnKzlj7fnmoTlhrLnqoEnLFxuICAgICAgZW50aXR5VHlwZTogJ2FsbCcsXG4gICAgICBwcmlvcml0eTogMTAwLFxuICAgICAgZW5hYmxlZDogdHJ1ZSxcbiAgICAgIGRldGVjdGlvbkZ1bmN0aW9uOiAobG9jYWwsIGNsb3VkLCBjb250ZXh0KSA9PiBcbiAgICAgICAgdGhpcy5kZXRlY3RWZXJzaW9uQ29uZmxpY3RzKGxvY2FsLCBjbG91ZCwgY29udGV4dClcbiAgICB9KVxuXG4gICAgLy8gMi4g5a2X5q6157qn5Yay56qB5qOA5rWLXG4gICAgdGhpcy5kZXRlY3Rpb25SdWxlcy5zZXQoJ2ZpZWxkLWNvbmZsaWN0Jywge1xuICAgICAgaWQ6ICdmaWVsZC1jb25mbGljdCcsXG4gICAgICBuYW1lOiAnRmllbGQtTGV2ZWwgQ29uZmxpY3QgRGV0ZWN0aW9uJyxcbiAgICAgIGRlc2NyaXB0aW9uOiAn5qOA5rWL5a2X5q6157qn5Yir55qE5Yay56qBJyxcbiAgICAgIGVudGl0eVR5cGU6ICdhbGwnLFxuICAgICAgcHJpb3JpdHk6IDkwLFxuICAgICAgZW5hYmxlZDogdHJ1ZSxcbiAgICAgIGRldGVjdGlvbkZ1bmN0aW9uOiAobG9jYWwsIGNsb3VkLCBjb250ZXh0KSA9PiBcbiAgICAgICAgdGhpcy5kZXRlY3RGaWVsZENvbmZsaWN0cyhsb2NhbCwgY2xvdWQsIGNvbnRleHQpXG4gICAgfSlcblxuICAgIC8vIDMuIOe7k+aehOWGsueqgeajgOa1i1xuICAgIHRoaXMuZGV0ZWN0aW9uUnVsZXMuc2V0KCdzdHJ1Y3R1cmUtY29uZmxpY3QnLCB7XG4gICAgICBpZDogJ3N0cnVjdHVyZS1jb25mbGljdCcsXG4gICAgICBuYW1lOiAnU3RydWN0dXJlIENvbmZsaWN0IERldGVjdGlvbicsXG4gICAgICBkZXNjcmlwdGlvbjogJ+ajgOa1i+aVsOaNrue7k+aehOWGsueqgScsXG4gICAgICBlbnRpdHlUeXBlOiAnYWxsJyxcbiAgICAgIHByaW9yaXR5OiA4MCxcbiAgICAgIGVuYWJsZWQ6IHRydWUsXG4gICAgICBkZXRlY3Rpb25GdW5jdGlvbjogKGxvY2FsLCBjbG91ZCwgY29udGV4dCkgPT4gXG4gICAgICAgIHRoaXMuZGV0ZWN0U3RydWN0dXJlQ29uZmxpY3RzKGxvY2FsLCBjbG91ZCwgY29udGV4dClcbiAgICB9KVxuXG4gICAgLy8gNC4g5byV55So5a6M5pW05oCn5Yay56qB5qOA5rWLXG4gICAgdGhpcy5kZXRlY3Rpb25SdWxlcy5zZXQoJ3JlZmVyZW5jZS1jb25mbGljdCcsIHtcbiAgICAgIGlkOiAncmVmZXJlbmNlLWNvbmZsaWN0JyxcbiAgICAgIG5hbWU6ICdSZWZlcmVuY2UgSW50ZWdyaXR5IENvbmZsaWN0IERldGVjdGlvbicsXG4gICAgICBkZXNjcmlwdGlvbjogJ+ajgOa1i+W8leeUqOWujOaVtOaAp+WGsueqgScsXG4gICAgICBlbnRpdHlUeXBlOiAnYWxsJyxcbiAgICAgIHByaW9yaXR5OiA3MCxcbiAgICAgIGVuYWJsZWQ6IHRydWUsXG4gICAgICBkZXRlY3Rpb25GdW5jdGlvbjogKGxvY2FsLCBjbG91ZCwgY29udGV4dCkgPT4gXG4gICAgICAgIHRoaXMuZGV0ZWN0UmVmZXJlbmNlQ29uZmxpY3RzKGxvY2FsLCBjbG91ZCwgY29udGV4dClcbiAgICB9KVxuXG4gICAgLy8gNS4g5Lia5Yqh6YC76L6R5Yay56qB5qOA5rWLXG4gICAgdGhpcy5kZXRlY3Rpb25SdWxlcy5zZXQoJ2J1c2luZXNzLWxvZ2ljLWNvbmZsaWN0Jywge1xuICAgICAgaWQ6ICdidXNpbmVzcy1sb2dpYy1jb25mbGljdCcsXG4gICAgICBuYW1lOiAnQnVzaW5lc3MgTG9naWMgQ29uZmxpY3QgRGV0ZWN0aW9uJyxcbiAgICAgIGRlc2NyaXB0aW9uOiAn5qOA5rWL5Lia5Yqh6YC76L6R5Yay56qBJyxcbiAgICAgIGVudGl0eVR5cGU6ICdhbGwnLFxuICAgICAgcHJpb3JpdHk6IDYwLFxuICAgICAgZW5hYmxlZDogdHJ1ZSxcbiAgICAgIGRldGVjdGlvbkZ1bmN0aW9uOiAobG9jYWwsIGNsb3VkLCBjb250ZXh0KSA9PiBcbiAgICAgICAgdGhpcy5kZXRlY3RCdXNpbmVzc0xvZ2ljQ29uZmxpY3RzKGxvY2FsLCBjbG91ZCwgY29udGV4dClcbiAgICB9KVxuICB9XG5cbiAgLyoqXG4gICAqIOeJiOacrOWGsueqgeajgOa1i1xuICAgKi9cbiAgcHJpdmF0ZSBkZXRlY3RWZXJzaW9uQ29uZmxpY3RzKGxvY2FsOiBhbnksIGNsb3VkOiBhbnksIGNvbnRleHQ6IENvbmZsaWN0Q29udGV4dCk6IENvbmZsaWN0SW5mb1tdIHtcbiAgICBjb25zdCBjb25mbGljdHM6IENvbmZsaWN0SW5mb1tdID0gW11cbiAgICBcbiAgICBjb25zdCBsb2NhbFZlcnNpb24gPSBsb2NhbC5zeW5jX3ZlcnNpb24gfHwgbG9jYWwubG9jYWxWZXJzaW9uIHx8IDBcbiAgICBjb25zdCBjbG91ZFZlcnNpb24gPSBjbG91ZC5zeW5jX3ZlcnNpb24gfHwgY2xvdWQuY2xvdWRWZXJzaW9uIHx8IDBcbiAgICBcbiAgICBpZiAobG9jYWxWZXJzaW9uICE9PSBjbG91ZFZlcnNpb24pIHtcbiAgICAgIGNvbmZsaWN0cy5wdXNoKHtcbiAgICAgICAgaWQ6IGNyeXB0by5yYW5kb21VVUlEKCksXG4gICAgICAgIGVudGl0eVR5cGU6IHRoaXMuaW5mZXJFbnRpdHlUeXBlKGxvY2FsKSxcbiAgICAgICAgZW50aXR5SWQ6IGxvY2FsLmlkIHx8IGNsb3VkLmlkLFxuICAgICAgICBjb25mbGljdFR5cGU6ICd2ZXJzaW9uJyxcbiAgICAgICAgbG9jYWxEYXRhOiBsb2NhbCxcbiAgICAgICAgY2xvdWREYXRhOiBjbG91ZCxcbiAgICAgICAgZGV0ZWN0ZWRBdDogbmV3IERhdGUoKVxuICAgICAgfSlcbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIGNvbmZsaWN0c1xuICB9XG5cbiAgLyoqXG4gICAqIOWtl+autee6p+WGsueqgeajgOa1i1xuICAgKi9cbiAgcHJpdmF0ZSBkZXRlY3RGaWVsZENvbmZsaWN0cyhsb2NhbDogYW55LCBjbG91ZDogYW55LCBjb250ZXh0OiBDb25mbGljdENvbnRleHQpOiBDb25mbGljdEluZm9bXSB7XG4gICAgY29uc3QgY29uZmxpY3RzOiBDb25mbGljdEluZm9bXSA9IFtdXG4gICAgY29uc3QgY29uZmxpY3RpbmdGaWVsZHM6IHN0cmluZ1tdID0gW11cbiAgICBcbiAgICAvLyDojrflj5bpnIDopoHmr5TovoPnmoTlrZfmrrVcbiAgICBjb25zdCBmaWVsZHMgPSB0aGlzLmdldENvbXBhcmFibGVGaWVsZHMobG9jYWwsIGNsb3VkKVxuICAgIFxuICAgIGZvciAoY29uc3QgZmllbGQgb2YgZmllbGRzKSB7XG4gICAgICBjb25zdCBsb2NhbFZhbHVlID0gdGhpcy5nZXROZXN0ZWRWYWx1ZShsb2NhbCwgZmllbGQpXG4gICAgICBjb25zdCBjbG91ZFZhbHVlID0gdGhpcy5nZXROZXN0ZWRWYWx1ZShjbG91ZCwgZmllbGQpXG4gICAgICBcbiAgICAgIGlmICghdGhpcy52YWx1ZXNFcXVhbChsb2NhbFZhbHVlLCBjbG91ZFZhbHVlKSkge1xuICAgICAgICBjb25mbGljdGluZ0ZpZWxkcy5wdXNoKGZpZWxkKVxuICAgICAgfVxuICAgIH1cbiAgICBcbiAgICBpZiAoY29uZmxpY3RpbmdGaWVsZHMubGVuZ3RoID4gMCkge1xuICAgICAgY29uZmxpY3RzLnB1c2goe1xuICAgICAgICBpZDogY3J5cHRvLnJhbmRvbVVVSUQoKSxcbiAgICAgICAgZW50aXR5VHlwZTogdGhpcy5pbmZlckVudGl0eVR5cGUobG9jYWwpLFxuICAgICAgICBlbnRpdHlJZDogbG9jYWwuaWQgfHwgY2xvdWQuaWQsXG4gICAgICAgIGNvbmZsaWN0VHlwZTogJ2ZpZWxkJyxcbiAgICAgICAgbG9jYWxEYXRhOiBsb2NhbCxcbiAgICAgICAgY2xvdWREYXRhOiBjbG91ZCxcbiAgICAgICAgY29uZmxpY3RGaWVsZHM6IGNvbmZsaWN0aW5nRmllbGRzLFxuICAgICAgICBkZXRlY3RlZEF0OiBuZXcgRGF0ZSgpXG4gICAgICB9KVxuICAgIH1cbiAgICBcbiAgICByZXR1cm4gY29uZmxpY3RzXG4gIH1cblxuICAvKipcbiAgICog57uT5p6E5Yay56qB5qOA5rWLXG4gICAqL1xuICBwcml2YXRlIGRldGVjdFN0cnVjdHVyZUNvbmZsaWN0cyhsb2NhbDogYW55LCBjbG91ZDogYW55LCBjb250ZXh0OiBDb25mbGljdENvbnRleHQpOiBDb25mbGljdEluZm9bXSB7XG4gICAgY29uc3QgY29uZmxpY3RzOiBDb25mbGljdEluZm9bXSA9IFtdXG4gICAgXG4gICAgLy8g5qOA5p+l5a+56LGh57uT5p6E5beu5byCXG4gICAgY29uc3QgbG9jYWxLZXlzID0gbmV3IFNldChPYmplY3Qua2V5cyhsb2NhbCkpXG4gICAgY29uc3QgY2xvdWRLZXlzID0gbmV3IFNldChPYmplY3Qua2V5cyhjbG91ZCkpXG4gICAgXG4gICAgY29uc3QgbWlzc2luZ0luTG9jYWwgPSBbLi4uY2xvdWRLZXlzXS5maWx0ZXIoa2V5ID0+ICFsb2NhbEtleXMuaGFzKGtleSkpXG4gICAgY29uc3QgbWlzc2luZ0luQ2xvdWQgPSBbLi4ubG9jYWxLZXlzXS5maWx0ZXIoa2V5ID0+ICFjbG91ZEtleXMuaGFzKGtleSkpXG4gICAgXG4gICAgaWYgKG1pc3NpbmdJbkxvY2FsLmxlbmd0aCA+IDAgfHwgbWlzc2luZ0luQ2xvdWQubGVuZ3RoID4gMCkge1xuICAgICAgY29uZmxpY3RzLnB1c2goe1xuICAgICAgICBpZDogY3J5cHRvLnJhbmRvbVVVSUQoKSxcbiAgICAgICAgZW50aXR5VHlwZTogdGhpcy5pbmZlckVudGl0eVR5cGUobG9jYWwpLFxuICAgICAgICBlbnRpdHlJZDogbG9jYWwuaWQgfHwgY2xvdWQuaWQsXG4gICAgICAgIGNvbmZsaWN0VHlwZTogJ3N0cnVjdHVyZScsXG4gICAgICAgIGxvY2FsRGF0YTogbG9jYWwsXG4gICAgICAgIGNsb3VkRGF0YTogY2xvdWQsXG4gICAgICAgIGNvbmZsaWN0RmllbGRzOiBbLi4ubWlzc2luZ0luTG9jYWwsIC4uLm1pc3NpbmdJbkNsb3VkXSxcbiAgICAgICAgZGV0ZWN0ZWRBdDogbmV3IERhdGUoKVxuICAgICAgfSlcbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIGNvbmZsaWN0c1xuICB9XG5cbiAgLyoqXG4gICAqIOW8leeUqOWujOaVtOaAp+WGsueqgeajgOa1i1xuICAgKi9cbiAgcHJpdmF0ZSBkZXRlY3RSZWZlcmVuY2VDb25mbGljdHMobG9jYWw6IGFueSwgY2xvdWQ6IGFueSwgY29udGV4dDogQ29uZmxpY3RDb250ZXh0KTogQ29uZmxpY3RJbmZvW10ge1xuICAgIGNvbnN0IGNvbmZsaWN0czogQ29uZmxpY3RJbmZvW10gPSBbXVxuICAgIFxuICAgIC8vIOajgOafpeaWh+S7tuWkueW8leeUqFxuICAgIGlmIChsb2NhbC5mb2xkZXJJZCAhPT0gdW5kZWZpbmVkIHx8IGNsb3VkLmZvbGRlcklkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIGlmIChsb2NhbC5mb2xkZXJJZCAhPT0gY2xvdWQuZm9sZGVySWQpIHtcbiAgICAgICAgY29uZmxpY3RzLnB1c2goe1xuICAgICAgICAgIGlkOiBjcnlwdG8ucmFuZG9tVVVJRCgpLFxuICAgICAgICAgIGVudGl0eVR5cGU6ICdjYXJkJyxcbiAgICAgICAgICBlbnRpdHlJZDogbG9jYWwuaWQgfHwgY2xvdWQuaWQsXG4gICAgICAgICAgY29uZmxpY3RUeXBlOiAnZmllbGQnLFxuICAgICAgICAgIGxvY2FsRGF0YTogbG9jYWwsXG4gICAgICAgICAgY2xvdWREYXRhOiBjbG91ZCxcbiAgICAgICAgICBjb25mbGljdEZpZWxkczogWydmb2xkZXJJZCddLFxuICAgICAgICAgIGRldGVjdGVkQXQ6IG5ldyBEYXRlKClcbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgLy8g5qOA5p+l5qCH562+5byV55SoXG4gICAgaWYgKGxvY2FsLnRhZ3MgIT09IHVuZGVmaW5lZCB8fCBjbG91ZC50YWdzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIGNvbnN0IGxvY2FsVGFncyA9IG5ldyBTZXQobG9jYWwudGFncyB8fCBbXSlcbiAgICAgIGNvbnN0IGNsb3VkVGFncyA9IG5ldyBTZXQoY2xvdWQudGFncyB8fCBbXSlcbiAgICAgIFxuICAgICAgaWYgKCF0aGlzLnNldHNFcXVhbChsb2NhbFRhZ3MsIGNsb3VkVGFncykpIHtcbiAgICAgICAgY29uZmxpY3RzLnB1c2goe1xuICAgICAgICAgIGlkOiBjcnlwdG8ucmFuZG9tVVVJRCgpLFxuICAgICAgICAgIGVudGl0eVR5cGU6IHRoaXMuaW5mZXJFbnRpdHlUeXBlKGxvY2FsKSxcbiAgICAgICAgICBlbnRpdHlJZDogbG9jYWwuaWQgfHwgY2xvdWQuaWQsXG4gICAgICAgICAgY29uZmxpY3RUeXBlOiAnZmllbGQnLFxuICAgICAgICAgIGxvY2FsRGF0YTogbG9jYWwsXG4gICAgICAgICAgY2xvdWREYXRhOiBjbG91ZCxcbiAgICAgICAgICBjb25mbGljdEZpZWxkczogWyd0YWdzJ10sXG4gICAgICAgICAgZGV0ZWN0ZWRBdDogbmV3IERhdGUoKVxuICAgICAgICB9KVxuICAgICAgfVxuICAgIH1cbiAgICBcbiAgICByZXR1cm4gY29uZmxpY3RzXG4gIH1cblxuICAvKipcbiAgICog5Lia5Yqh6YC76L6R5Yay56qB5qOA5rWLXG4gICAqL1xuICBwcml2YXRlIGRldGVjdEJ1c2luZXNzTG9naWNDb25mbGljdHMobG9jYWw6IGFueSwgY2xvdWQ6IGFueSwgY29udGV4dDogQ29uZmxpY3RDb250ZXh0KTogQ29uZmxpY3RJbmZvW10ge1xuICAgIGNvbnN0IGNvbmZsaWN0czogQ29uZmxpY3RJbmZvW10gPSBbXVxuICAgIFxuICAgIC8vIOajgOa1i+WNoeeJh+WGheWuueWGsueqgVxuICAgIGlmIChsb2NhbC5mcm9udENvbnRlbnQgfHwgY2xvdWQuZnJvbnRDb250ZW50KSB7XG4gICAgICBjb25zdCBjb250ZW50Q29uZmxpY3QgPSB0aGlzLmRldGVjdENvbnRlbnRDb25mbGljdHMobG9jYWwsIGNsb3VkKVxuICAgICAgaWYgKGNvbnRlbnRDb25mbGljdCkge1xuICAgICAgICBjb25mbGljdHMucHVzaChjb250ZW50Q29uZmxpY3QpXG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIC8vIOajgOa1i+agt+W8j+WGsueqgVxuICAgIGlmIChsb2NhbC5zdHlsZSB8fCBjbG91ZC5zdHlsZSkge1xuICAgICAgY29uc3Qgc3R5bGVDb25mbGljdCA9IHRoaXMuZGV0ZWN0U3R5bGVDb25mbGljdHMobG9jYWwsIGNsb3VkKVxuICAgICAgaWYgKHN0eWxlQ29uZmxpY3QpIHtcbiAgICAgICAgY29uZmxpY3RzLnB1c2goc3R5bGVDb25mbGljdClcbiAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIGNvbmZsaWN0c1xuICB9XG5cbiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICAvLyDlkIjlubbnrZbnlaXlrp7njrBcbiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG4gIHByaXZhdGUgaW5pdGlhbGl6ZU1lcmdlU3RyYXRlZ2llcygpOiB2b2lkIHtcbiAgICAvLyAxLiDmmbrog73mlofmnKzlkIjlubbnrZbnlaVcbiAgICB0aGlzLm1lcmdlU3RyYXRlZ2llcy5zZXQoJ3NtYXJ0LXRleHQtbWVyZ2UnLCB7XG4gICAgICBpZDogJ3NtYXJ0LXRleHQtbWVyZ2UnLFxuICAgICAgbmFtZTogJ1NtYXJ0IFRleHQgTWVyZ2UnLFxuICAgICAgZGVzY3JpcHRpb246ICfmmbrog73lkIjlubbmlofmnKzlhoXlrrnvvIzkv53nlZnkuKTovrnnmoTkv67mlLknLFxuICAgICAgYXBwbGljYWJsZVR5cGVzOiBbJ2NhcmQnXSxcbiAgICAgIG1lcmdlRnVuY3Rpb246IChsb2NhbCwgY2xvdWQsIGNvbnRleHQpID0+IHRoaXMuc21hcnRUZXh0TWVyZ2UobG9jYWwsIGNsb3VkKSxcbiAgICAgIGNvbmZpZGVuY2U6IDAuOFxuICAgIH0pXG5cbiAgICAvLyAyLiDml7bpl7TmiLPkvJjlhYjnrZbnlaVcbiAgICB0aGlzLm1lcmdlU3RyYXRlZ2llcy5zZXQoJ3RpbWVzdGFtcC1wcmlvcml0eScsIHtcbiAgICAgIGlkOiAndGltZXN0YW1wLXByaW9yaXR5JyxcbiAgICAgIG5hbWU6ICdUaW1lc3RhbXAgUHJpb3JpdHknLFxuICAgICAgZGVzY3JpcHRpb246ICfkvb/nlKjmnIDmlrDnmoTml7bpl7TmiLPlhrPlrprkvJjlhYjnuqcnLFxuICAgICAgYXBwbGljYWJsZVR5cGVzOiBbJ2FsbCddLFxuICAgICAgbWVyZ2VGdW5jdGlvbjogKGxvY2FsLCBjbG91ZCwgY29udGV4dCkgPT4gdGhpcy50aW1lc3RhbXBQcmlvcml0eU1lcmdlKGxvY2FsLCBjbG91ZCksXG4gICAgICBjb25maWRlbmNlOiAwLjlcbiAgICB9KVxuXG4gICAgLy8gMy4g5a2X5q6157qn5pm66IO95ZCI5bm2XG4gICAgdGhpcy5tZXJnZVN0cmF0ZWdpZXMuc2V0KCdmaWVsZC1zbWFydC1tZXJnZScsIHtcbiAgICAgIGlkOiAnZmllbGQtc21hcnQtbWVyZ2UnLFxuICAgICAgbmFtZTogJ0ZpZWxkIFNtYXJ0IE1lcmdlJyxcbiAgICAgIGRlc2NyaXB0aW9uOiAn5oyJ5a2X5q6157G75Z6L5pm66IO96YCJ5oup5pyA5L2z5ZCI5bm2562W55WlJyxcbiAgICAgIGFwcGxpY2FibGVUeXBlczogWydhbGwnXSxcbiAgICAgIG1lcmdlRnVuY3Rpb246IChsb2NhbCwgY2xvdWQsIGNvbnRleHQpID0+IHRoaXMuZmllbGRTbWFydE1lcmdlKGxvY2FsLCBjbG91ZCksXG4gICAgICBjb25maWRlbmNlOiAwLjg1XG4gICAgfSlcblxuICAgIC8vIDQuIOeUqOaIt+WBj+WlveWQiOW5tlxuICAgIHRoaXMubWVyZ2VTdHJhdGVnaWVzLnNldCgndXNlci1wcmVmZXJlbmNlLW1lcmdlJywge1xuICAgICAgaWQ6ICd1c2VyLXByZWZlcmVuY2UtbWVyZ2UnLFxuICAgICAgbmFtZTogJ1VzZXIgUHJlZmVyZW5jZSBNZXJnZScsXG4gICAgICBkZXNjcmlwdGlvbjogJ+WfuuS6jueUqOaIt+WOhuWPsuWBj+Wlvei/m+ihjOWQiOW5ticsXG4gICAgICBhcHBsaWNhYmxlVHlwZXM6IFsnYWxsJ10sXG4gICAgICBtZXJnZUZ1bmN0aW9uOiAobG9jYWwsIGNsb3VkLCBjb250ZXh0KSA9PiB0aGlzLnVzZXJQcmVmZXJlbmNlTWVyZ2UobG9jYWwsIGNsb3VkLCBjb250ZXh0KSxcbiAgICAgIGNvbmZpZGVuY2U6IDAuNzVcbiAgICB9KVxuXG4gICAgLy8gNS4g5py65Zmo5a2m5Lmg5ZCI5bm2XG4gICAgdGhpcy5tZXJnZVN0cmF0ZWdpZXMuc2V0KCdtbC1tZXJnZScsIHtcbiAgICAgIGlkOiAnbWwtbWVyZ2UnLFxuICAgICAgbmFtZTogJ01hY2hpbmUgTGVhcm5pbmcgTWVyZ2UnLFxuICAgICAgZGVzY3JpcHRpb246ICfkvb/nlKjmnLrlmajlrabkuaDmqKHlnovpooTmtYvmnIDkvbPlkIjlubbnrZbnlaUnLFxuICAgICAgYXBwbGljYWJsZVR5cGVzOiBbJ2FsbCddLFxuICAgICAgbWVyZ2VGdW5jdGlvbjogKGxvY2FsLCBjbG91ZCwgY29udGV4dCkgPT4gdGhpcy5tbE1lcmdlKGxvY2FsLCBjbG91ZCwgY29udGV4dCksXG4gICAgICBjb25maWRlbmNlOiAwLjdcbiAgICB9KVxuICB9XG5cbiAgLyoqXG4gICAqIOaZuuiDveaWh+acrOWQiOW5tlxuICAgKi9cbiAgcHJpdmF0ZSBzbWFydFRleHRNZXJnZShsb2NhbDogYW55LCBjbG91ZDogYW55KTogYW55IHtcbiAgICBjb25zdCByZXN1bHQgPSB7IC4uLmxvY2FsIH1cbiAgICBcbiAgICAvLyDlkIjlubbmraPpnaLlhoXlrrlcbiAgICBpZiAobG9jYWwuZnJvbnRDb250ZW50ICYmIGNsb3VkLmZyb250Q29udGVudCkge1xuICAgICAgcmVzdWx0LmZyb250Q29udGVudCA9IHRoaXMubWVyZ2VDb250ZW50KGxvY2FsLmZyb250Q29udGVudCwgY2xvdWQuZnJvbnRDb250ZW50KVxuICAgIH1cbiAgICBcbiAgICAvLyDlkIjlubbog4zpnaLlhoXlrrlcbiAgICBpZiAobG9jYWwuYmFja0NvbnRlbnQgJiYgY2xvdWQuYmFja0NvbnRlbnQpIHtcbiAgICAgIHJlc3VsdC5iYWNrQ29udGVudCA9IHRoaXMubWVyZ2VDb250ZW50KGxvY2FsLmJhY2tDb250ZW50LCBjbG91ZC5iYWNrQ29udGVudClcbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIHJlc3VsdFxuICB9XG5cbiAgLyoqXG4gICAqIOaXtumXtOaIs+S8mOWFiOWQiOW5tlxuICAgKi9cbiAgcHJpdmF0ZSB0aW1lc3RhbXBQcmlvcml0eU1lcmdlKGxvY2FsOiBhbnksIGNsb3VkOiBhbnkpOiBhbnkge1xuICAgIGNvbnN0IGxvY2FsVGltZSA9IG5ldyBEYXRlKGxvY2FsLnVwZGF0ZWRBdCB8fCBsb2NhbC50aW1lc3RhbXApLmdldFRpbWUoKVxuICAgIGNvbnN0IGNsb3VkVGltZSA9IG5ldyBEYXRlKGNsb3VkLnVwZGF0ZWRBdCB8fCBjbG91ZC50aW1lc3RhbXApLmdldFRpbWUoKVxuICAgIFxuICAgIHJldHVybiBjbG91ZFRpbWUgPiBsb2NhbFRpbWUgPyB7IC4uLmNsb3VkIH0gOiB7IC4uLmxvY2FsIH1cbiAgfVxuXG4gIC8qKlxuICAgKiDlrZfmrrXnuqfmmbrog73lkIjlubZcbiAgICovXG4gIHByaXZhdGUgZmllbGRTbWFydE1lcmdlKGxvY2FsOiBhbnksIGNsb3VkOiBhbnkpOiBhbnkge1xuICAgIGNvbnN0IHJlc3VsdCA9IHsgLi4ubG9jYWwgfVxuICAgIFxuICAgIE9iamVjdC5rZXlzKGNsb3VkKS5mb3JFYWNoKGtleSA9PiB7XG4gICAgICBpZiAobG9jYWxba2V5XSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJlc3VsdFtrZXldID0gY2xvdWRba2V5XVxuICAgICAgfSBlbHNlIGlmICghdGhpcy52YWx1ZXNFcXVhbChsb2NhbFtrZXldLCBjbG91ZFtrZXldKSkge1xuICAgICAgICAvLyDmoLnmja7lrZfmrrXnsbvlnovpgInmi6nlkIjlubbnrZbnlaVcbiAgICAgICAgcmVzdWx0W2tleV0gPSB0aGlzLm1lcmdlRmllbGRCeVR5cGUoa2V5LCBsb2NhbFtrZXldLCBjbG91ZFtrZXldKVxuICAgICAgfVxuICAgIH0pXG4gICAgXG4gICAgcmV0dXJuIHJlc3VsdFxuICB9XG5cbiAgLyoqXG4gICAqIOeUqOaIt+WBj+WlveWQiOW5tlxuICAgKi9cbiAgcHJpdmF0ZSB1c2VyUHJlZmVyZW5jZU1lcmdlKGxvY2FsOiBhbnksIGNsb3VkOiBhbnksIGNvbnRleHQ6IENvbmZsaWN0Q29udGV4dCk6IGFueSB7XG4gICAgLy8g5YiG5p6Q55So5oi35Y6G5Y+y6Kej5Yaz5qih5byPXG4gICAgY29uc3QgdXNlclByZWZlcmVuY2UgPSB0aGlzLmFuYWx5emVVc2VyUHJlZmVyZW5jZShjb250ZXh0LnVzZXJJZClcbiAgICBcbiAgICBzd2l0Y2ggKHVzZXJQcmVmZXJlbmNlKSB7XG4gICAgICBjYXNlICdsb2NhbC1maXJzdCc6XG4gICAgICAgIHJldHVybiB7IC4uLmxvY2FsIH1cbiAgICAgIGNhc2UgJ2Nsb3VkLWZpcnN0JzpcbiAgICAgICAgcmV0dXJuIHsgLi4uY2xvdWQgfVxuICAgICAgY2FzZSAnc21hcnQtbWVyZ2UnOlxuICAgICAgICByZXR1cm4gdGhpcy5maWVsZFNtYXJ0TWVyZ2UobG9jYWwsIGNsb3VkKVxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIHRoaXMudGltZXN0YW1wUHJpb3JpdHlNZXJnZShsb2NhbCwgY2xvdWQpXG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIOacuuWZqOWtpuS5oOWQiOW5tlxuICAgKi9cbiAgcHJpdmF0ZSBtbE1lcmdlKGxvY2FsOiBhbnksIGNsb3VkOiBhbnksIGNvbnRleHQ6IENvbmZsaWN0Q29udGV4dCk6IGFueSB7XG4gICAgLy8g566A5YyW55qE5py65Zmo5a2m5Lmg5ZCI5bm26YC76L6RXG4gICAgY29uc3QgZmVhdHVyZXMgPSB0aGlzLmV4dHJhY3RGZWF0dXJlcyhsb2NhbCwgY2xvdWQsIGNvbnRleHQpXG4gICAgY29uc3QgcHJlZGljdGlvbiA9IHRoaXMucHJlZGljdE1lcmdlU3RyYXRlZ3koZmVhdHVyZXMpXG4gICAgXG4gICAgc3dpdGNoIChwcmVkaWN0aW9uLnN0cmF0ZWd5KSB7XG4gICAgICBjYXNlICdsb2NhbCc6XG4gICAgICAgIHJldHVybiB7IC4uLmxvY2FsIH1cbiAgICAgIGNhc2UgJ2Nsb3VkJzpcbiAgICAgICAgcmV0dXJuIHsgLi4uY2xvdWQgfVxuICAgICAgY2FzZSAnbWVyZ2UnOlxuICAgICAgICByZXR1cm4gdGhpcy5maWVsZFNtYXJ0TWVyZ2UobG9jYWwsIGNsb3VkKVxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIHRoaXMudGltZXN0YW1wUHJpb3JpdHlNZXJnZShsb2NhbCwgY2xvdWQpXG4gICAgfVxuICB9XG5cbiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICAvLyDmnLrlmajlrabkuaDlkozpooTmtYvlip/og71cbiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG4gIHByaXZhdGUgaW5pdGlhbGl6ZU1MTW9kZWwoKTogdm9pZCB7XG4gICAgdGhpcy5jb25mbGljdFByZWRpY3Rpb25Nb2RlbCA9IHtcbiAgICAgIHBhdHRlcm5zOiBuZXcgTWFwKCksXG4gICAgICBjb25maWRlbmNlVGhyZXNob2xkOiAwLjdcbiAgICB9XG4gICAgXG4gICAgLy8g5Yid5aeL5YyW5LiA5Lqb5Z+656GA5qih5byPXG4gICAgdGhpcy5jb25mbGljdFByZWRpY3Rpb25Nb2RlbC5wYXR0ZXJucy5zZXQoJ3ZlcnNpb24tY29uZmxpY3QtbG9jYWwnLCAwLjgpXG4gICAgdGhpcy5jb25mbGljdFByZWRpY3Rpb25Nb2RlbC5wYXR0ZXJucy5zZXQoJ2ZpZWxkLWNvbmZsaWN0LW1lcmdlJywgMC42KVxuICAgIHRoaXMuY29uZmxpY3RQcmVkaWN0aW9uTW9kZWwucGF0dGVybnMuc2V0KCdzdHJ1Y3R1cmUtY29uZmxpY3QtbWFudWFsJywgMC45KVxuICB9XG5cbiAgLyoqXG4gICAqIOmihOa1i+acgOS9s+ino+WGs+etlueVpVxuICAgKi9cbiAgcHJpdmF0ZSBhc3luYyBwcmVkaWN0UmVzb2x1dGlvblN0cmF0ZWd5KFxuICAgIGNvbmZsaWN0OiBDb25mbGljdEluZm8sIFxuICAgIGNvbnRleHQ6IENvbmZsaWN0Q29udGV4dFxuICApOiBQcm9taXNlPHN0cmluZz4ge1xuICAgIC8vIOaPkOWPlueJueW+gVxuICAgIGNvbnN0IGZlYXR1cmVzID0gdGhpcy5leHRyYWN0Q29uZmxpY3RGZWF0dXJlcyhjb25mbGljdCwgY29udGV4dClcbiAgICBcbiAgICAvLyDmn6Xmib7nm7jkvLzljoblj7LlhrLnqoFcbiAgICBjb25zdCBzaW1pbGFyQ29uZmxpY3RzID0gdGhpcy5maW5kU2ltaWxhckNvbmZsaWN0cyhmZWF0dXJlcylcbiAgICBcbiAgICBpZiAoc2ltaWxhckNvbmZsaWN0cy5sZW5ndGggPiAwKSB7XG4gICAgICBjb25zdCBiZXN0U3RyYXRlZ3kgPSB0aGlzLmdldE1vc3RTdWNjZXNzZnVsU3RyYXRlZ3koc2ltaWxhckNvbmZsaWN0cylcbiAgICAgIHJldHVybiBiZXN0U3RyYXRlZ3lcbiAgICB9XG4gICAgXG4gICAgLy8g5L2/55So5ZCv5Y+R5byP6KeE5YiZXG4gICAgcmV0dXJuIHRoaXMuaGV1cmlzdGljU3RyYXRlZ3lTZWxlY3Rpb24oY29uZmxpY3QsIGNvbnRleHQpXG4gIH1cblxuICAvKipcbiAgICog5o+Q5Y+W5Yay56qB54m55b6BXG4gICAqL1xuICBwcml2YXRlIGV4dHJhY3RDb25mbGljdEZlYXR1cmVzKGNvbmZsaWN0OiBDb25mbGljdEluZm8sIGNvbnRleHQ6IENvbmZsaWN0Q29udGV4dCk6IGFueSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGNvbmZsaWN0VHlwZTogY29uZmxpY3QuY29uZmxpY3RUeXBlLFxuICAgICAgZW50aXR5VHlwZTogY29uZmxpY3QuZW50aXR5VHlwZSxcbiAgICAgIGZpZWxkQ291bnQ6IGNvbmZsaWN0LmNvbmZsaWN0RmllbGRzPy5sZW5ndGggfHwgMCxcbiAgICAgIHRpbWVPZkRheTogY29udGV4dC50aW1lc3RhbXAuZ2V0SG91cnMoKSxcbiAgICAgIGRheU9mV2VlazogY29udGV4dC50aW1lc3RhbXAuZ2V0RGF5KCksXG4gICAgICBuZXR3b3JrUXVhbGl0eTogY29udGV4dC5uZXR3b3JrSW5mby5lZmZlY3RpdmVUeXBlLFxuICAgICAgZGV2aWNlVHlwZTogY29udGV4dC5kZXZpY2VJbmZvLmRldmljZVR5cGUsXG4gICAgICB1c2VySGlzdG9yeUxlbmd0aDogY29udGV4dC5zeW5jSGlzdG9yeS5sZW5ndGgsXG4gICAgICBpc1dlZWtlbmQ6IGNvbnRleHQudGltZXN0YW1wLmdldERheSgpID09PSAwIHx8IGNvbnRleHQudGltZXN0YW1wLmdldERheSgpID09PSA2XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIOafpeaJvuebuOS8vOWGsueqgVxuICAgKi9cbiAgcHJpdmF0ZSBmaW5kU2ltaWxhckNvbmZsaWN0cyhmZWF0dXJlczogYW55KTogQ29uZmxpY3RJbmZvW10ge1xuICAgIGNvbnN0IHNpbWlsYXJDb25mbGljdHM6IENvbmZsaWN0SW5mb1tdID0gW11cbiAgICBcbiAgICBmb3IgKGNvbnN0IGhpc3RvcmljYWxDb25mbGljdCBvZiB0aGlzLmNvbmZsaWN0SGlzdG9yeSkge1xuICAgICAgY29uc3Qgc2ltaWxhcml0eSA9IHRoaXMuY2FsY3VsYXRlU2ltaWxhcml0eShmZWF0dXJlcywgaGlzdG9yaWNhbENvbmZsaWN0KVxuICAgICAgaWYgKHNpbWlsYXJpdHkgPiAwLjcpIHtcbiAgICAgICAgc2ltaWxhckNvbmZsaWN0cy5wdXNoKGhpc3RvcmljYWxDb25mbGljdClcbiAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIHNpbWlsYXJDb25mbGljdHNcbiAgfVxuXG4gIC8qKlxuICAgKiDorqHnrpfnm7jkvLzluqZcbiAgICovXG4gIHByaXZhdGUgY2FsY3VsYXRlU2ltaWxhcml0eShmZWF0dXJlczogYW55LCBjb25mbGljdDogQ29uZmxpY3RJbmZvKTogbnVtYmVyIHtcbiAgICBsZXQgc2ltaWxhcml0eSA9IDBcbiAgICBcbiAgICBpZiAoZmVhdHVyZXMuY29uZmxpY3RUeXBlID09PSBjb25mbGljdC5jb25mbGljdFR5cGUpIHNpbWlsYXJpdHkgKz0gMC4zXG4gICAgaWYgKGZlYXR1cmVzLmVudGl0eVR5cGUgPT09IGNvbmZsaWN0LmVudGl0eVR5cGUpIHNpbWlsYXJpdHkgKz0gMC4yXG4gICAgXG4gICAgY29uc3QgZmllbGRDb3VudERpZmYgPSBNYXRoLmFicyhcbiAgICAgIGZlYXR1cmVzLmZpZWxkQ291bnQgLSAoY29uZmxpY3QuY29uZmxpY3RGaWVsZHM/Lmxlbmd0aCB8fCAwKVxuICAgIClcbiAgICBzaW1pbGFyaXR5ICs9IE1hdGgubWF4KDAsIDAuMiAtIGZpZWxkQ291bnREaWZmICogMC4wNSlcbiAgICBcbiAgICByZXR1cm4gc2ltaWxhcml0eVxuICB9XG5cbiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICAvLyDlt6Xlhbfmlrnms5XlkozovoXliqnlh73mlbBcbiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG4gIC8qKlxuICAgKiDojrflj5blj6/mr5TovoPlrZfmrrVcbiAgICovXG4gIHByaXZhdGUgZ2V0Q29tcGFyYWJsZUZpZWxkcyhsb2NhbDogYW55LCBjbG91ZDogYW55KTogc3RyaW5nW10ge1xuICAgIGNvbnN0IGZpZWxkcyA9IG5ldyBTZXQ8c3RyaW5nPigpXG4gICAgXG4gICAgLy8g5re75Yqg6YCa55So5a2X5q61XG4gICAgZmllbGRzLmFkZCgnaWQnKVxuICAgIGZpZWxkcy5hZGQoJ3N5bmNfdmVyc2lvbicpXG4gICAgZmllbGRzLmFkZCgndXBkYXRlZEF0JylcbiAgICBmaWVsZHMuYWRkKCdjcmVhdGVkQXQnKVxuICAgIFxuICAgIC8vIOagueaNruWunuS9k+exu+Wei+a3u+WKoOeJueWumuWtl+autVxuICAgIGlmIChsb2NhbC5mcm9udENvbnRlbnQgfHwgY2xvdWQuZnJvbnRDb250ZW50KSB7XG4gICAgICBmaWVsZHMuYWRkKCdmcm9udENvbnRlbnQudGl0bGUnKVxuICAgICAgZmllbGRzLmFkZCgnZnJvbnRDb250ZW50LnRleHQnKVxuICAgICAgZmllbGRzLmFkZCgnZnJvbnRDb250ZW50LnRhZ3MnKVxuICAgIH1cbiAgICBcbiAgICBpZiAobG9jYWwuYmFja0NvbnRlbnQgfHwgY2xvdWQuYmFja0NvbnRlbnQpIHtcbiAgICAgIGZpZWxkcy5hZGQoJ2JhY2tDb250ZW50LnRpdGxlJylcbiAgICAgIGZpZWxkcy5hZGQoJ2JhY2tDb250ZW50LnRleHQnKVxuICAgICAgZmllbGRzLmFkZCgnYmFja0NvbnRlbnQudGFncycpXG4gICAgfVxuICAgIFxuICAgIGlmIChsb2NhbC5zdHlsZSB8fCBjbG91ZC5zdHlsZSkge1xuICAgICAgZmllbGRzLmFkZCgnc3R5bGUudHlwZScpXG4gICAgICBmaWVsZHMuYWRkKCdzdHlsZS5iYWNrZ3JvdW5kQ29sb3InKVxuICAgICAgZmllbGRzLmFkZCgnc3R5bGUudGV4dENvbG9yJylcbiAgICB9XG4gICAgXG4gICAgaWYgKGxvY2FsLmZvbGRlcklkICE9PSB1bmRlZmluZWQgfHwgY2xvdWQuZm9sZGVySWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgZmllbGRzLmFkZCgnZm9sZGVySWQnKVxuICAgIH1cbiAgICBcbiAgICByZXR1cm4gQXJyYXkuZnJvbShmaWVsZHMpXG4gIH1cblxuICAvKipcbiAgICog6I635Y+W5bWM5aWX5YC8XG4gICAqL1xuICBwcml2YXRlIGdldE5lc3RlZFZhbHVlKG9iajogYW55LCBwYXRoOiBzdHJpbmcpOiBhbnkge1xuICAgIHJldHVybiBwYXRoLnNwbGl0KCcuJykucmVkdWNlKChjdXJyZW50LCBrZXkpID0+IGN1cnJlbnQ/LltrZXldLCBvYmopXG4gIH1cblxuICAvKipcbiAgICog5YC855u4562J5q+U6L6DXG4gICAqL1xuICBwcml2YXRlIHZhbHVlc0VxdWFsKGE6IGFueSwgYjogYW55KTogYm9vbGVhbiB7XG4gICAgaWYgKGEgPT09IGIpIHJldHVybiB0cnVlXG4gICAgaWYgKGEgPT0gbnVsbCB8fCBiID09IG51bGwpIHJldHVybiBmYWxzZVxuICAgIGlmICh0eXBlb2YgYSAhPT0gdHlwZW9mIGIpIHJldHVybiBmYWxzZVxuICAgIFxuICAgIGlmICh0eXBlb2YgYSA9PT0gJ29iamVjdCcpIHtcbiAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeShhKSA9PT0gSlNPTi5zdHJpbmdpZnkoYilcbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cblxuICAvKipcbiAgICog6ZuG5ZCI55u4562JXG4gICAqL1xuICBwcml2YXRlIHNldHNFcXVhbChhOiBTZXQ8YW55PiwgYjogU2V0PGFueT4pOiBib29sZWFuIHtcbiAgICBpZiAoYS5zaXplICE9PSBiLnNpemUpIHJldHVybiBmYWxzZVxuICAgIGZvciAoY29uc3QgaXRlbSBvZiBhKSB7XG4gICAgICBpZiAoIWIuaGFzKGl0ZW0pKSByZXR1cm4gZmFsc2VcbiAgICB9XG4gICAgcmV0dXJuIHRydWVcbiAgfVxuXG4gIC8qKlxuICAgKiDmjqjmlq3lrp7kvZPnsbvlnotcbiAgICovXG4gIHByaXZhdGUgaW5mZXJFbnRpdHlUeXBlKGRhdGE6IGFueSk6IHN0cmluZyB7XG4gICAgaWYgKGRhdGEuZnJvbnRDb250ZW50IHx8IGRhdGEuYmFja0NvbnRlbnQpIHJldHVybiAnY2FyZCdcbiAgICBpZiAoZGF0YS5uYW1lICYmIGRhdGEuY29sb3IpIHJldHVybiAndGFnJ1xuICAgIGlmIChkYXRhLm5hbWUgJiYgZGF0YS5jYXJkSWRzKSByZXR1cm4gJ2ZvbGRlcidcbiAgICBpZiAoZGF0YS5maWxlTmFtZSAmJiBkYXRhLmZpbGVQYXRoKSByZXR1cm4gJ2ltYWdlJ1xuICAgIHJldHVybiAndW5rbm93bidcbiAgfVxuXG4gIC8qKlxuICAgKiDlkIjlubblhoXlrrlcbiAgICovXG4gIHByaXZhdGUgbWVyZ2VDb250ZW50KGxvY2FsOiBhbnksIGNsb3VkOiBhbnkpOiBhbnkge1xuICAgIGNvbnN0IHJlc3VsdCA9IHsgLi4ubG9jYWwgfVxuICAgIFxuICAgIC8vIOaZuuiDveWQiOW5tuagh+mimFxuICAgIGlmIChsb2NhbC50aXRsZSAhPT0gY2xvdWQudGl0bGUpIHtcbiAgICAgIHJlc3VsdC50aXRsZSA9IHRoaXMubWVyZ2VUZXh0RmllbGRzKGxvY2FsLnRpdGxlLCBjbG91ZC50aXRsZSlcbiAgICB9XG4gICAgXG4gICAgLy8g5pm66IO95ZCI5bm25paH5pysXG4gICAgaWYgKGxvY2FsLnRleHQgIT09IGNsb3VkLnRleHQpIHtcbiAgICAgIHJlc3VsdC50ZXh0ID0gdGhpcy5tZXJnZVRleHRGaWVsZHMobG9jYWwudGV4dCwgY2xvdWQudGV4dClcbiAgICB9XG4gICAgXG4gICAgLy8g5ZCI5bm25qCH562+XG4gICAgaWYgKGxvY2FsLnRhZ3MgfHwgY2xvdWQudGFncykge1xuICAgICAgY29uc3QgbG9jYWxUYWdzID0gbmV3IFNldChsb2NhbC50YWdzIHx8IFtdKVxuICAgICAgY29uc3QgY2xvdWRUYWdzID0gbmV3IFNldChjbG91ZC50YWdzIHx8IFtdKVxuICAgICAgcmVzdWx0LnRhZ3MgPSBBcnJheS5mcm9tKG5ldyBTZXQoWy4uLmxvY2FsVGFncywgLi4uY2xvdWRUYWdzXSkpXG4gICAgfVxuICAgIFxuICAgIHJldHVybiByZXN1bHRcbiAgfVxuXG4gIC8qKlxuICAgKiDlkIjlubbmlofmnKzlrZfmrrVcbiAgICovXG4gIHByaXZhdGUgbWVyZ2VUZXh0RmllbGRzKGxvY2FsOiBzdHJpbmcsIGNsb3VkOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIC8vIOeugOWNleeahOaWh+acrOWQiOW5tuetlueVpe+8mumAieaLqeabtOmVv+eahOaWh+acrFxuICAgIHJldHVybiBsb2NhbC5sZW5ndGggPiBjbG91ZC5sZW5ndGggPyBsb2NhbCA6IGNsb3VkXG4gIH1cblxuICAvKipcbiAgICog5oyJ5a2X5q6157G75Z6L5ZCI5bm2XG4gICAqL1xuICBwcml2YXRlIG1lcmdlRmllbGRCeVR5cGUoZmllbGROYW1lOiBzdHJpbmcsIGxvY2FsVmFsdWU6IGFueSwgY2xvdWRWYWx1ZTogYW55KTogYW55IHtcbiAgICBpZiAoZmllbGROYW1lLmluY2x1ZGVzKCd0aW1lJykgfHwgZmllbGROYW1lLmluY2x1ZGVzKCdkYXRlJykpIHtcbiAgICAgIC8vIOaXtumXtOWtl+auteS9v+eUqOacgOaWsOeahFxuICAgICAgY29uc3QgbG9jYWxUaW1lID0gbmV3IERhdGUobG9jYWxWYWx1ZSkuZ2V0VGltZSgpXG4gICAgICBjb25zdCBjbG91ZFRpbWUgPSBuZXcgRGF0ZShjbG91ZFZhbHVlKS5nZXRUaW1lKClcbiAgICAgIHJldHVybiBjbG91ZFRpbWUgPiBsb2NhbFRpbWUgPyBjbG91ZFZhbHVlIDogbG9jYWxWYWx1ZVxuICAgIH1cbiAgICBcbiAgICBpZiAoZmllbGROYW1lLmluY2x1ZGVzKCd2ZXJzaW9uJykpIHtcbiAgICAgIC8vIOeJiOacrOWtl+auteS9v+eUqOi+g+Wkp+eahFxuICAgICAgcmV0dXJuIE1hdGgubWF4KGxvY2FsVmFsdWUsIGNsb3VkVmFsdWUpXG4gICAgfVxuICAgIFxuICAgIGlmICh0eXBlb2YgbG9jYWxWYWx1ZSA9PT0gJ3N0cmluZycgJiYgdHlwZW9mIGNsb3VkVmFsdWUgPT09ICdzdHJpbmcnKSB7XG4gICAgICAvLyDmlofmnKzlrZfmrrXlkIjlubZcbiAgICAgIHJldHVybiB0aGlzLm1lcmdlVGV4dEZpZWxkcyhsb2NhbFZhbHVlLCBjbG91ZFZhbHVlKVxuICAgIH1cbiAgICBcbiAgICAvLyDpu5jorqTkvb/nlKjmnKzlnLDlgLxcbiAgICByZXR1cm4gbG9jYWxWYWx1ZVxuICB9XG5cbiAgLyoqXG4gICAqIOWIhuaekOeUqOaIt+WBj+WlvVxuICAgKi9cbiAgcHJpdmF0ZSBhbmFseXplVXNlclByZWZlcmVuY2UodXNlcklkOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIC8vIOeugOWMlueahOeUqOaIt+WBj+WlveWIhuaekFxuICAgIGNvbnN0IHVzZXJTdGF0cyA9IHRoaXMucmVzb2x1dGlvblN0YXRzLmdldCh1c2VySWQpXG4gICAgaWYgKCF1c2VyU3RhdHMpIHJldHVybiAnc21hcnQtbWVyZ2UnXG4gICAgXG4gICAgaWYgKHVzZXJTdGF0cy5zdWNjZXNzID4gdXNlclN0YXRzLmZhaWx1cmUgKiAyKSB7XG4gICAgICByZXR1cm4gJ3NtYXJ0LW1lcmdlJ1xuICAgIH1cbiAgICBcbiAgICByZXR1cm4gJ3RpbWVzdGFtcC1wcmlvcml0eSdcbiAgfVxuXG4gIC8qKlxuICAgKiDkvJjljJblhrLnqoHliJfooahcbiAgICovXG4gIHByaXZhdGUgb3B0aW1pemVDb25mbGljdHMoY29uZmxpY3RzOiBDb25mbGljdEluZm9bXSk6IENvbmZsaWN0SW5mb1tdIHtcbiAgICAvLyDljrvph41cbiAgICBjb25zdCB1bmlxdWVDb25mbGljdHMgPSBuZXcgTWFwPHN0cmluZywgQ29uZmxpY3RJbmZvPigpXG4gICAgXG4gICAgZm9yIChjb25zdCBjb25mbGljdCBvZiBjb25mbGljdHMpIHtcbiAgICAgIGNvbnN0IGtleSA9IGAke2NvbmZsaWN0LmVudGl0eVR5cGV9LSR7Y29uZmxpY3QuZW50aXR5SWR9LSR7Y29uZmxpY3QuY29uZmxpY3RUeXBlfWBcbiAgICAgIGlmICghdW5pcXVlQ29uZmxpY3RzLmhhcyhrZXkpIHx8IFxuICAgICAgICAgICh1bmlxdWVDb25mbGljdHMuZ2V0KGtleSkhLnByaW9yaXR5IHx8IDApIDwgKGNvbmZsaWN0LnByaW9yaXR5IHx8IDApKSB7XG4gICAgICAgIHVuaXF1ZUNvbmZsaWN0cy5zZXQoa2V5LCBjb25mbGljdClcbiAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIEFycmF5LmZyb20odW5pcXVlQ29uZmxpY3RzLnZhbHVlcygpKVxuICB9XG5cbiAgLyoqXG4gICAqIOiusOW9leWGsueqgeajgOa1i1xuICAgKi9cbiAgcHJpdmF0ZSByZWNvcmRDb25mbGljdERldGVjdGlvbihjb25mbGljdHM6IENvbmZsaWN0SW5mb1tdLCBjb250ZXh0OiBDb25mbGljdENvbnRleHQpOiB2b2lkIHtcbiAgICB0aGlzLmNvbmZsaWN0SGlzdG9yeS5wdXNoKC4uLmNvbmZsaWN0cylcbiAgICBcbiAgICAvLyDpmZDliLbljoblj7LorrDlvZXlpKflsI9cbiAgICBpZiAodGhpcy5jb25mbGljdEhpc3RvcnkubGVuZ3RoID4gMTAwMCkge1xuICAgICAgdGhpcy5jb25mbGljdEhpc3RvcnkgPSB0aGlzLmNvbmZsaWN0SGlzdG9yeS5zbGljZSgtNTAwKVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiDorrDlvZXop6PlhrPnu5PmnpxcbiAgICovXG4gIHByaXZhdGUgcmVjb3JkUmVzb2x1dGlvblJlc3VsdChcbiAgICBjb25mbGljdDogQ29uZmxpY3RJbmZvLCBcbiAgICBzdHJhdGVneTogc3RyaW5nLCBcbiAgICBzdWNjZXNzOiBib29sZWFuXG4gICk6IHZvaWQge1xuICAgIGNvbnN0IGtleSA9IGAke2NvbmZsaWN0LmVudGl0eVR5cGV9LSR7c3RyYXRlZ3l9YFxuICAgIGNvbnN0IHN0YXRzID0gdGhpcy5yZXNvbHV0aW9uU3RhdHMuZ2V0KGtleSkgfHwgeyBzdWNjZXNzOiAwLCBmYWlsdXJlOiAwIH1cbiAgICBcbiAgICBpZiAoc3VjY2Vzcykge1xuICAgICAgc3RhdHMuc3VjY2VzcysrXG4gICAgfSBlbHNlIHtcbiAgICAgIHN0YXRzLmZhaWx1cmUrK1xuICAgIH1cbiAgICBcbiAgICB0aGlzLnJlc29sdXRpb25TdGF0cy5zZXQoa2V5LCBzdGF0cylcbiAgfVxuXG4gIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgLy8g5Y2g5L2N56ym5pa55rOVXG4gIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuICBwcml2YXRlIGRldGVjdENvbnRlbnRDb25mbGljdHMobG9jYWw6IGFueSwgY2xvdWQ6IGFueSk6IENvbmZsaWN0SW5mbyB8IG51bGwge1xuICAgIC8vIFRPRE86IOWunueOsOWGheWuueWGsueqgeajgOa1i1xuICAgIHJldHVybiBudWxsXG4gIH1cblxuICBwcml2YXRlIGRldGVjdFN0eWxlQ29uZmxpY3RzKGxvY2FsOiBhbnksIGNsb3VkOiBhbnkpOiBDb25mbGljdEluZm8gfCBudWxsIHtcbiAgICAvLyBUT0RPOiDlrp7njrDmoLflvI/lhrLnqoHmo4DmtYtcbiAgICByZXR1cm4gbnVsbFxuICB9XG5cbiAgcHJpdmF0ZSBzZWxlY3RGYWxsYmFja1N0cmF0ZWd5KGNvbmZsaWN0OiBDb25mbGljdEluZm8pOiBDb25mbGljdFJlc29sdXRpb25TdHJhdGVneSB7XG4gICAgLy8gVE9ETzog5a6e546w5ZCO5aSH562W55Wl6YCJ5oupXG4gICAgcmV0dXJuIHtcbiAgICAgIHR5cGU6ICdtYW51YWwnLFxuICAgICAgcHJpb3JpdHk6IDAsXG4gICAgICBjb25kaXRpb25zOiB7fSxcbiAgICAgIHJlc29sdXRpb246ICdtYW51YWwnXG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBhcHBseVJlc29sdXRpb25TdHJhdGVneShcbiAgICBjb25mbGljdDogQ29uZmxpY3RJbmZvLCBcbiAgICBzdHJhdGVneTogQ29uZmxpY3RSZXNvbHV0aW9uU3RyYXRlZ3ksIFxuICAgIGNvbnRleHQ6IENvbmZsaWN0Q29udGV4dFxuICApOiBQcm9taXNlPHsgY29uZmxpY3Q6IENvbmZsaWN0SW5mbzsgc3VjY2VzczogYm9vbGVhbiB9PiB7XG4gICAgLy8gVE9ETzog5a6e546w562W55Wl5bqU55SoXG4gICAgcmV0dXJuIHsgY29uZmxpY3QsIHN1Y2Nlc3M6IHRydWUgfVxuICB9XG5cbiAgcHJpdmF0ZSBnZXRNb3N0U3VjY2Vzc2Z1bFN0cmF0ZWd5KGNvbmZsaWN0czogQ29uZmxpY3RJbmZvW10pOiBzdHJpbmcge1xuICAgIC8vIFRPRE86IOWunueOsOaIkOWKn+etlueVpeiOt+WPllxuICAgIHJldHVybiAndGltZXN0YW1wLXByaW9yaXR5J1xuICB9XG5cbiAgcHJpdmF0ZSBoZXVyaXN0aWNTdHJhdGVneVNlbGVjdGlvbihjb25mbGljdDogQ29uZmxpY3RJbmZvLCBjb250ZXh0OiBDb25mbGljdENvbnRleHQpOiBzdHJpbmcge1xuICAgIC8vIFRPRE86IOWunueOsOWQr+WPkeW8j+etlueVpemAieaLqVxuICAgIHJldHVybiAndGltZXN0YW1wLXByaW9yaXR5J1xuICB9XG5cbiAgcHJpdmF0ZSBleHRyYWN0RmVhdHVyZXMobG9jYWw6IGFueSwgY2xvdWQ6IGFueSwgY29udGV4dDogQ29uZmxpY3RDb250ZXh0KTogYW55IHtcbiAgICAvLyBUT0RPOiDlrp7njrDnibnlvoHmj5Dlj5ZcbiAgICByZXR1cm4ge31cbiAgfVxuXG4gIHByaXZhdGUgcHJlZGljdE1lcmdlU3RyYXRlZ3koZmVhdHVyZXM6IGFueSk6IHsgc3RyYXRlZ3k6IHN0cmluZzsgY29uZmlkZW5jZTogbnVtYmVyIH0ge1xuICAgIC8vIFRPRE86IOWunueOsOWQiOW5tuetlueVpemihOa1i1xuICAgIHJldHVybiB7IHN0cmF0ZWd5OiAnbWVyZ2UnLCBjb25maWRlbmNlOiAwLjcgfVxuICB9XG59XG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIOWvvOWHuuWNleS+i+WunuS+i1xuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG5leHBvcnQgY29uc3QgY29uZmxpY3RSZXNvbHV0aW9uRW5naW5lID0gbmV3IENvbmZsaWN0UmVzb2x1dGlvbkVuZ2luZSgpXG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIOWvvOWHuuexu+Wei+WSjOW3peWFt+WHveaVsFxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG5leHBvcnQgdHlwZSB7XG4gIENvbmZsaWN0RGV0ZWN0aW9uUnVsZSxcbiAgQ29uZmxpY3RDb250ZXh0LFxuICBDb25mbGljdFBhdHRlcm4sXG4gIE1lcmdlU3RyYXRlZ3lcbn0iXSwidmVyc2lvbiI6M30=