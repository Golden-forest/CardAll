a2884fa9f9ffc0f4e80df4d62a13e9e8
"use strict";
/**
 * 测试辅助函数
 * 提供通用的测试辅助函数和断言方法
 */
Object.defineProperty(exports, "__esModule", { value: true });
exports.generateRandomData = exports.cleanupAllMocks = exports.mockFetch = exports.expectErrorBoundary = exports.measureMemory = exports.measurePerformance = exports.describeAsync = exports.testAsync = exports.mockConsole = exports.mockCryptoRandomUUID = exports.mockMathRandom = exports.mockDateNow = exports.createMockStorage = exports.createMockElement = exports.createMockFileList = exports.createMockFile = exports.createMockEvent = exports.createTestEvent = exports.mockApiError = exports.mockApiResponse = exports.mockPromiseReject = exports.mockPromiseResolve = exports.waitForAsync = exports.waitForCondition = exports.asyncWait = void 0;
const react_1 = require("@testing-library/react");
// Jest全局函数不需要导入
// 异步工具函数
const asyncWait = (ms) => {
    return new Promise(resolve => setTimeout(resolve, ms));
};
exports.asyncWait = asyncWait;
// 等待条件满足
const waitForCondition = async (condition, timeout = 5000, interval = 100) => {
    const startTime = Date.now();
    while (Date.now() - startTime < timeout) {
        if (condition()) {
            return;
        }
        await (0, exports.asyncWait)(interval);
    }
    throw new Error(`Condition not met within ${timeout}ms`);
};
exports.waitForCondition = waitForCondition;
// 等待异步操作完成
const waitForAsync = async (fn, timeout = 5000) => {
    try {
        await (0, react_1.waitFor)(fn, { timeout });
    }
    catch (error) {
        throw new Error(`Async operation timed out after ${timeout}ms`);
    }
};
exports.waitForAsync = waitForAsync;
// 模拟Promise解决
const mockPromiseResolve = (data, delay = 0) => {
    return new Promise(resolve => {
        setTimeout(() => resolve(data), delay);
    });
};
exports.mockPromiseResolve = mockPromiseResolve;
// 模拟Promise拒绝
const mockPromiseReject = (error, delay = 0) => {
    return new Promise((_, reject) => {
        setTimeout(() => reject(error), delay);
    });
};
exports.mockPromiseReject = mockPromiseReject;
// 模拟API响应
const mockApiResponse = (data, status = 200, statusText = 'OK') => {
    return Promise.resolve({
        ok: status >= 200 && status < 300,
        status,
        statusText,
        json: () => Promise.resolve(data),
        text: () => Promise.resolve(JSON.stringify(data)),
        headers: new Headers(),
        redirected: false,
        type: 'basic',
        url: 'http://test.com',
        clone: () => (0, exports.mockApiResponse)(data, status, statusText),
    });
};
exports.mockApiResponse = mockApiResponse;
// 模拟API错误
const mockApiError = (error, status = 400, statusText = 'Bad Request') => {
    return Promise.resolve({
        ok: false,
        status,
        statusText,
        json: () => Promise.resolve({ error }),
        text: () => Promise.resolve(JSON.stringify({ error })),
        headers: new Headers(),
        redirected: false,
        type: 'basic',
        url: 'http://test.com',
        clone: () => (0, exports.mockApiError)(error, status, statusText),
    });
};
exports.mockApiError = mockApiError;
// 创建测试事件
const createTestEvent = (type, data = {}) => {
    return new Event(type, {
        bubbles: true,
        cancelable: true,
        ...data,
    });
};
exports.createTestEvent = createTestEvent;
// 创建模拟事件
const createMockEvent = (type, data = {}) => {
    return {
        type,
        bubbles: true,
        cancelable: true,
        defaultPrevented: false,
        preventDefault: vi.fn(),
        stopPropagation: vi.fn(),
        stopImmediatePropagation: vi.fn(),
        ...data,
    };
};
exports.createMockEvent = createMockEvent;
// 模拟文件对象
const createMockFile = (name, type, size = 1024) => {
    const content = new Uint8Array(size);
    return new File([content], name, { type });
};
exports.createMockFile = createMockFile;
// 模拟文件列表
const createMockFileList = (files) => {
    const fileList = {
        length: files.length,
        item: (index) => files[index] || null,
        [Symbol.iterator]: function* () {
            for (const file of files) {
                yield file;
            }
        },
    };
    files.forEach((file, index) => {
        fileList[index] = file;
    });
    return fileList;
};
exports.createMockFileList = createMockFileList;
// 模拟DOM元素
const createMockElement = (overrides = {}) => {
    return {
        addEventListener: vi.fn(),
        removeEventListener: vi.fn(),
        dispatchEvent: vi.fn(),
        appendChild: vi.fn(),
        removeChild: vi.fn(),
        replaceChild: vi.fn(),
        insertBefore: vi.fn(),
        getAttribute: vi.fn(),
        setAttribute: vi.fn(),
        removeAttribute: vi.fn(),
        hasAttribute: vi.fn(),
        getBoundingClientRect: vi.fn(() => ({
            top: 0,
            left: 0,
            width: 100,
            height: 100,
            right: 100,
            bottom: 100,
            x: 0,
            y: 0,
            toJSON: vi.fn(),
        })),
        focus: vi.fn(),
        blur: vi.fn(),
        click: vi.fn(),
        classList: {
            add: vi.fn(),
            remove: vi.fn(),
            contains: vi.fn(),
            toggle: vi.fn(),
            replace: vi.fn(),
        },
        style: {
            display: '',
            visibility: '',
            opacity: '',
            transform: '',
        },
        ...overrides,
    };
};
exports.createMockElement = createMockElement;
// 模拟Storage对象
const createMockStorage = () => {
    const store = {};
    return {
        length: 0,
        key: (index) => Object.keys(store)[index] || null,
        getItem: (key) => store[key] || null,
        setItem: (key, value) => {
            store[key] = String(value);
        },
        removeItem: (key) => {
            delete store[key];
        },
        clear: () => {
            Object.keys(store).forEach(key => delete store[key]);
        },
    };
};
exports.createMockStorage = createMockStorage;
// 模拟Date对象
const mockDateNow = (timestamp) => {
    const originalDateNow = Date.now;
    Date.now = () => timestamp;
    return () => {
        Date.now = originalDateNow;
    };
};
exports.mockDateNow = mockDateNow;
// 模拟Math.random
const mockMathRandom = (value) => {
    const originalMathRandom = Math.random;
    Math.random = () => value;
    return () => {
        Math.random = originalMathRandom;
    };
};
exports.mockMathRandom = mockMathRandom;
// 模拟crypto.randomUUID
const mockCryptoRandomUUID = (uuid) => {
    const originalRandomUUID = crypto.randomUUID;
    crypto.randomUUID = () => uuid;
    return () => {
        crypto.randomUUID = originalRandomUUID;
    };
};
exports.mockCryptoRandomUUID = mockCryptoRandomUUID;
// 模拟console方法
const mockConsole = () => {
    const originalConsole = { ...console };
    console.log = vi.fn();
    console.error = vi.fn();
    console.warn = vi.fn();
    console.info = vi.fn();
    console.debug = vi.fn();
    return () => {
        Object.assign(console, originalConsole);
    };
};
exports.mockConsole = mockConsole;
// 测试用例包装器
const testAsync = (name, fn) => {
    return test(name, async () => {
        await (0, react_1.act)(async () => {
            await fn();
        });
    });
};
exports.testAsync = testAsync;
// 分组测试包装器
const describeAsync = (name, fn) => {
    return describe(name, fn);
};
exports.describeAsync = describeAsync;
// 性能测试工具
const measurePerformance = async (name, fn, maxTimeMs = 1000) => {
    const startTime = performance.now();
    const result = await fn();
    const duration = performance.now() - startTime;
    if (duration > maxTimeMs) {
        console.warn(`Performance warning: ${name} took ${duration}ms (expected < ${maxTimeMs}ms)`);
    }
    return { result, duration };
};
exports.measurePerformance = measurePerformance;
// 内存使用测试工具
const measureMemory = async (name, fn, maxMemoryMB = 100) => {
    const memoryBefore = process.memoryUsage();
    const result = await fn();
    const memoryAfter = process.memoryUsage();
    const memoryUsage = {
        rss: memoryAfter.rss - memoryBefore.rss,
        heapTotal: memoryAfter.heapTotal - memoryBefore.heapTotal,
        heapUsed: memoryAfter.heapUsed - memoryBefore.heapUsed,
        external: memoryAfter.external - memoryBefore.external,
        arrayBuffers: memoryAfter.arrayBuffers - memoryBefore.arrayBuffers,
    };
    const memoryMB = memoryUsage.heapUsed / (1024 * 1024);
    if (memoryMB > maxMemoryMB) {
        console.warn(`Memory warning: ${name} used ${memoryMB}MB (expected < ${maxMemoryMB}MB)`);
    }
    return { result, memoryUsage };
};
exports.measureMemory = measureMemory;
// 错误边界测试工具
const expectErrorBoundary = async (fn, expectedError) => {
    try {
        await fn();
        fail('Expected error was not thrown');
    }
    catch (error) {
        if (typeof expectedError === 'string') {
            expect(error.message).toContain(expectedError);
        }
        else {
            expect(error).toBeInstanceOf(expectedError.constructor);
            expect(error.message).toBe(expectedError.message);
        }
    }
};
exports.expectErrorBoundary = expectErrorBoundary;
// 模拟网络请求
const mockFetch = (responses = []) => {
    const mockFetchFn = vi.fn();
    mockFetchFn.mockImplementation((url, options) => {
        const matchingResponse = responses.find(r => !r.condition || r.condition(url, options));
        if (matchingResponse) {
            return matchingResponse.response;
        }
        return (0, exports.mockApiResponse)({ error: 'Not found' }, 404);
    });
    const originalFetch = global.fetch;
    global.fetch = mockFetchFn;
    return () => {
        global.fetch = originalFetch;
    };
};
exports.mockFetch = mockFetch;
// 清理所有mock
const cleanupAllMocks = () => {
    vi.clearAllMocks();
    vi.resetAllMocks();
    vi.restoreAllMocks();
};
exports.cleanupAllMocks = cleanupAllMocks;
// 生成随机测试数据
exports.generateRandomData = {
    string: (length = 10) => {
        return Math.random().toString(36).substring(2, length + 2);
    },
    number: (min = 0, max = 100) => {
        return Math.floor(Math.random() * (max - min + 1)) + min;
    },
    boolean: () => {
        return Math.random() > 0.5;
    },
    date: (start = new Date('2020-01-01'), end = new Date()) => {
        return new Date(start.getTime() + Math.random() * (end.getTime() - start.getTime()));
    },
    email: () => {
        return `${exports.generateRandomData.string()}@${exports.generateRandomData.string(5)}.com`;
    },
    uuid: () => {
        return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, (c) => {
            const r = Math.random() * 16 | 0;
            const v = c === 'x' ? r : (r & 0x3 | 0x8);
            return v.toString(16);
        });
    },
};
exports.default = {
    asyncWait: exports.asyncWait,
    waitForCondition: exports.waitForCondition,
    waitForAsync: exports.waitForAsync,
    mockPromiseResolve: exports.mockPromiseResolve,
    mockPromiseReject: exports.mockPromiseReject,
    mockApiResponse: exports.mockApiResponse,
    mockApiError: exports.mockApiError,
    createTestEvent: exports.createTestEvent,
    createMockEvent: exports.createMockEvent,
    createMockFile: exports.createMockFile,
    createMockFileList: exports.createMockFileList,
    createMockElement: exports.createMockElement,
    createMockStorage: exports.createMockStorage,
    mockDateNow: exports.mockDateNow,
    mockMathRandom: exports.mockMathRandom,
    mockCryptoRandomUUID: exports.mockCryptoRandomUUID,
    mockConsole: exports.mockConsole,
    testAsync: exports.testAsync,
    describeAsync: exports.describeAsync,
    measurePerformance: exports.measurePerformance,
    measureMemory: exports.measureMemory,
    expectErrorBoundary: exports.expectErrorBoundary,
    mockFetch: exports.mockFetch,
    cleanupAllMocks: exports.cleanupAllMocks,
    generateRandomData: exports.generateRandomData,
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiRDpcXFByb2plY3RzXFxDYXJkRXZlcnl0aGluZ1xcY2FyZGFsbC1wcm90b3R5cGVcXHNyY1xcX190ZXN0c19fXFx1dGlsc1xcdGVzdC1oZWxwZXJzLnRzIiwibWFwcGluZ3MiOiI7QUFBQTs7O0dBR0c7OztBQUVILGtEQUFxRDtBQUNyRCxnQkFBZ0I7QUFFaEIsU0FBUztBQUNGLE1BQU0sU0FBUyxHQUFHLENBQUMsRUFBVSxFQUFpQixFQUFFO0lBQ3JELE9BQU8sSUFBSSxPQUFPLENBQUMsT0FBTyxDQUFDLEVBQUUsQ0FBQyxVQUFVLENBQUMsT0FBTyxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUE7QUFDeEQsQ0FBQyxDQUFBO0FBRlksUUFBQSxTQUFTLGFBRXJCO0FBRUQsU0FBUztBQUNGLE1BQU0sZ0JBQWdCLEdBQUcsS0FBSyxFQUNuQyxTQUF3QixFQUN4QixVQUFrQixJQUFJLEVBQ3RCLFdBQW1CLEdBQUcsRUFDUCxFQUFFO0lBQ2pCLE1BQU0sU0FBUyxHQUFHLElBQUksQ0FBQyxHQUFHLEVBQUUsQ0FBQTtJQUU1QixPQUFPLElBQUksQ0FBQyxHQUFHLEVBQUUsR0FBRyxTQUFTLEdBQUcsT0FBTyxFQUFFLENBQUM7UUFDeEMsSUFBSSxTQUFTLEVBQUUsRUFBRSxDQUFDO1lBQ2hCLE9BQU07UUFDUixDQUFDO1FBQ0QsTUFBTSxJQUFBLGlCQUFTLEVBQUMsUUFBUSxDQUFDLENBQUE7SUFDM0IsQ0FBQztJQUVELE1BQU0sSUFBSSxLQUFLLENBQUMsNEJBQTRCLE9BQU8sSUFBSSxDQUFDLENBQUE7QUFDMUQsQ0FBQyxDQUFBO0FBZlksUUFBQSxnQkFBZ0Isb0JBZTVCO0FBRUQsV0FBVztBQUNKLE1BQU0sWUFBWSxHQUFHLEtBQUssRUFDL0IsRUFBdUIsRUFDdkIsVUFBa0IsSUFBSSxFQUNQLEVBQUU7SUFDakIsSUFBSSxDQUFDO1FBQ0gsTUFBTSxJQUFBLGVBQU8sRUFBQyxFQUFFLEVBQUUsRUFBRSxPQUFPLEVBQUUsQ0FBQyxDQUFBO0lBQ2hDLENBQUM7SUFBQyxPQUFPLEtBQUssRUFB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b2plY3RzXFxDYXJkRXZlcnl0aGluZ1xcY2FyZGFsbC1wcm90b3R5cGVcXHNyY1xcX190ZXN0c19fXFx1dGlsc1xcdGVzdC1oZWxwZXJzLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICog5rWL6K+V6L6F5Yqp5Ye95pWwXG4gKiDmj5DkvpvpgJrnlKjnmoTmtYvor5XovoXliqnlh73mlbDlkozmlq3oqIDmlrnms5VcbiAqL1xuXG5pbXBvcnQgeyB3YWl0Rm9yLCBhY3QgfSBmcm9tICdAdGVzdGluZy1saWJyYXJ5L3JlYWN0J1xuLy8gSmVzdOWFqOWxgOWHveaVsOS4jemcgOimgeWvvOWFpVxuXG4vLyDlvILmraXlt6Xlhbflh73mlbBcbmV4cG9ydCBjb25zdCBhc3luY1dhaXQgPSAobXM6IG51bWJlcik6IFByb21pc2U8dm9pZD4gPT4ge1xuICByZXR1cm4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIG1zKSlcbn1cblxuLy8g562J5b6F5p2h5Lu25ruh6LazXG5leHBvcnQgY29uc3Qgd2FpdEZvckNvbmRpdGlvbiA9IGFzeW5jIChcbiAgY29uZGl0aW9uOiAoKSA9PiBib29sZWFuLFxuICB0aW1lb3V0OiBudW1iZXIgPSA1MDAwLFxuICBpbnRlcnZhbDogbnVtYmVyID0gMTAwXG4pOiBQcm9taXNlPHZvaWQ+ID0+IHtcbiAgY29uc3Qgc3RhcnRUaW1lID0gRGF0ZS5ub3coKVxuXG4gIHdoaWxlIChEYXRlLm5vdygpIC0gc3RhcnRUaW1lIDwgdGltZW91dCkge1xuICAgIGlmIChjb25kaXRpb24oKSkge1xuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIGF3YWl0IGFzeW5jV2FpdChpbnRlcnZhbClcbiAgfVxuXG4gIHRocm93IG5ldyBFcnJvcihgQ29uZGl0aW9uIG5vdCBtZXQgd2l0aGluICR7dGltZW91dH1tc2ApXG59XG5cbi8vIOetieW+heW8guatpeaTjeS9nOWujOaIkFxuZXhwb3J0IGNvbnN0IHdhaXRGb3JBc3luYyA9IGFzeW5jIChcbiAgZm46ICgpID0+IFByb21pc2U8dm9pZD4sXG4gIHRpbWVvdXQ6IG51bWJlciA9IDUwMDBcbik6IFByb21pc2U8dm9pZD4gPT4ge1xuICB0cnkge1xuICAgIGF3YWl0IHdhaXRGb3IoZm4sIHsgdGltZW91dCB9KVxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIHRocm93IG5ldyBFcnJvcihgQXN5bmMgb3BlcmF0aW9uIHRpbWVkIG91dCBhZnRlciAke3RpbWVvdXR9bXNgKVxuICB9XG59XG5cbi8vIOaooeaLn1Byb21pc2Xop6PlhrNcbmV4cG9ydCBjb25zdCBtb2NrUHJvbWlzZVJlc29sdmUgPSA8VD4oZGF0YTogVCwgZGVsYXk6IG51bWJlciA9IDApOiBQcm9taXNlPFQ+ID0+IHtcbiAgcmV0dXJuIG5ldyBQcm9taXNlKHJlc29sdmUgPT4ge1xuICAgIHNldFRpbWVvdXQoKCkgPT4gcmVzb2x2ZShkYXRhKSwgZGVsYXkpXG4gIH0pXG59XG5cbi8vIOaooeaLn1Byb21pc2Xmi5Lnu51cbmV4cG9ydCBjb25zdCBtb2NrUHJvbWlzZVJlamVjdCA9IChlcnJvcjogRXJyb3IsIGRlbGF5OiBudW1iZXIgPSAwKTogUHJvbWlzZTxuZXZlcj4gPT4ge1xuICByZXR1cm4gbmV3IFByb21pc2UoKF8sIHJlamVjdCkgPT4ge1xuICAgIHNldFRpbWVvdXQoKCkgPT4gcmVqZWN0KGVycm9yKSwgZGVsYXkpXG4gIH0pXG59XG5cbi8vIOaooeaLn0FQSeWTjeW6lFxuZXhwb3J0IGNvbnN0IG1vY2tBcGlSZXNwb25zZSA9IDxUPihcbiAgZGF0YTogVCxcbiAgc3RhdHVzOiBudW1iZXIgPSAyMDAsXG4gIHN0YXR1c1RleHQ6IHN0cmluZyA9ICdPSydcbik6IFByb21pc2U8UmVzcG9uc2U+ID0+IHtcbiAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh7XG4gICAgb2s6IHN0YXR1cyA+PSAyMDAgJiYgc3RhdHVzIDwgMzAwLFxuICAgIHN0YXR1cyxcbiAgICBzdGF0dXNUZXh0LFxuICAgIGpzb246ICgpID0+IFByb21pc2UucmVzb2x2ZShkYXRhKSxcbiAgICB0ZXh0OiAoKSA9PiBQcm9taXNlLnJlc29sdmUoSlNPTi5zdHJpbmdpZnkoZGF0YSkpLFxuICAgIGhlYWRlcnM6IG5ldyBIZWFkZXJzKCksXG4gICAgcmVkaXJlY3RlZDogZmFsc2UsXG4gICAgdHlwZTogJ2Jhc2ljJyxcbiAgICB1cmw6ICdodHRwOi8vdGVzdC5jb20nLFxuICAgIGNsb25lOiAoKSA9PiBtb2NrQXBpUmVzcG9uc2UoZGF0YSwgc3RhdHVzLCBzdGF0dXNUZXh0KSxcbiAgfSBhcyBSZXNwb25zZSlcbn1cblxuLy8g5qih5oufQVBJ6ZSZ6K+vXG5leHBvcnQgY29uc3QgbW9ja0FwaUVycm9yID0gKFxuICBlcnJvcjogc3RyaW5nLFxuICBzdGF0dXM6IG51bWJlciA9IDQwMCxcbiAgc3RhdHVzVGV4dDogc3RyaW5nID0gJ0JhZCBSZXF1ZXN0J1xuKTogUHJvbWlzZTxSZXNwb25zZT4gPT4ge1xuICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHtcbiAgICBvazogZmFsc2UsXG4gICAgc3RhdHVzLFxuICAgIHN0YXR1c1RleHQsXG4gICAganNvbjogKCkgPT4gUHJvbWlzZS5yZXNvbHZlKHsgZXJyb3IgfSksXG4gICAgdGV4dDogKCkgPT4gUHJvbWlzZS5yZXNvbHZlKEpTT04uc3RyaW5naWZ5KHsgZXJyb3IgfSkpLFxuICAgIGhlYWRlcnM6IG5ldyBIZWFkZXJzKCksXG4gICAgcmVkaXJlY3RlZDogZmFsc2UsXG4gICAgdHlwZTogJ2Jhc2ljJyxcbiAgICB1cmw6ICdodHRwOi8vdGVzdC5jb20nLFxuICAgIGNsb25lOiAoKSA9PiBtb2NrQXBpRXJyb3IoZXJyb3IsIHN0YXR1cywgc3RhdHVzVGV4dCksXG4gIH0gYXMgUmVzcG9uc2UpXG59XG5cbi8vIOWIm+W7uua1i+ivleS6i+S7tlxuZXhwb3J0IGNvbnN0IGNyZWF0ZVRlc3RFdmVudCA9ICh0eXBlOiBzdHJpbmcsIGRhdGE6IGFueSA9IHt9KTogRXZlbnQgPT4ge1xuICByZXR1cm4gbmV3IEV2ZW50KHR5cGUsIHtcbiAgICBidWJibGVzOiB0cnVlLFxuICAgIGNhbmNlbGFibGU6IHRydWUsXG4gICAgLi4uZGF0YSxcbiAgfSlcbn1cblxuLy8g5Yib5bu65qih5ouf5LqL5Lu2XG5leHBvcnQgY29uc3QgY3JlYXRlTW9ja0V2ZW50ID0gPFQgZXh0ZW5kcyBFdmVudD4oXG4gIHR5cGU6IHN0cmluZyxcbiAgZGF0YTogUGFydGlhbDxUPiA9IHt9XG4pOiBUID0+IHtcbiAgcmV0dXJuIHtcbiAgICB0eXBlLFxuICAgIGJ1YmJsZXM6IHRydWUsXG4gICAgY2FuY2VsYWJsZTogdHJ1ZSxcbiAgICBkZWZhdWx0UHJldmVudGVkOiBmYWxzZSxcbiAgICBwcmV2ZW50RGVmYXVsdDogdmkuZm4oKSxcbiAgICBzdG9wUHJvcGFnYXRpb246IHZpLmZuKCksXG4gICAgc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uOiB2aS5mbigpLFxuICAgIC4uLmRhdGEsXG4gIH0gYXMgVFxufVxuXG4vLyDmqKHmi5/mlofku7blr7nosaFcbmV4cG9ydCBjb25zdCBjcmVhdGVNb2NrRmlsZSA9IChcbiAgbmFtZTogc3RyaW5nLFxuICB0eXBlOiBzdHJpbmcsXG4gIHNpemU6IG51bWJlciA9IDEwMjRcbik6IEZpbGUgPT4ge1xuICBjb25zdCBjb250ZW50ID0gbmV3IFVpbnQ4QXJyYXkoc2l6ZSlcbiAgcmV0dXJuIG5ldyBGaWxlKFtjb250ZW50XSwgbmFtZSwgeyB0eXBlIH0pXG59XG5cbi8vIOaooeaLn+aWh+S7tuWIl+ihqFxuZXhwb3J0IGNvbnN0IGNyZWF0ZU1vY2tGaWxlTGlzdCA9IChmaWxlczogRmlsZVtdKTogRmlsZUxpc3QgPT4ge1xuICBjb25zdCBmaWxlTGlzdCA9IHtcbiAgICBsZW5ndGg6IGZpbGVzLmxlbmd0aCxcbiAgICBpdGVtOiAoaW5kZXg6IG51bWJlcikgPT4gZmlsZXNbaW5kZXhdIHx8IG51bGwsXG4gICAgW1N5bWJvbC5pdGVyYXRvcl06IGZ1bmN0aW9uKiAoKSB7XG4gICAgICBmb3IgKGNvbnN0IGZpbGUgb2YgZmlsZXMpIHtcbiAgICAgICAgeWllbGQgZmlsZVxuICAgICAgfVxuICAgIH0sXG4gIH0gYXMgYW55XG5cbiAgZmlsZXMuZm9yRWFjaCgoZmlsZSwgaW5kZXgpID0+IHtcbiAgICBmaWxlTGlzdFtpbmRleF0gPSBmaWxlXG4gIH0pXG5cbiAgcmV0dXJuIGZpbGVMaXN0XG59XG5cbi8vIOaooeaLn0RPTeWFg+e0oFxuZXhwb3J0IGNvbnN0IGNyZWF0ZU1vY2tFbGVtZW50ID0gKG92ZXJyaWRlczogUGFydGlhbDxIVE1MRWxlbWVudD4gPSB7fSk6IEhUTUxFbGVtZW50ID0+IHtcbiAgcmV0dXJuIHtcbiAgICBhZGRFdmVudExpc3RlbmVyOiB2aS5mbigpLFxuICAgIHJlbW92ZUV2ZW50TGlzdGVuZXI6IHZpLmZuKCksXG4gICAgZGlzcGF0Y2hFdmVudDogdmkuZm4oKSxcbiAgICBhcHBlbmRDaGlsZDogdmkuZm4oKSxcbiAgICByZW1vdmVDaGlsZDogdmkuZm4oKSxcbiAgICByZXBsYWNlQ2hpbGQ6IHZpLmZuKCksXG4gICAgaW5zZXJ0QmVmb3JlOiB2aS5mbigpLFxuICAgIGdldEF0dHJpYnV0ZTogdmkuZm4oKSxcbiAgICBzZXRBdHRyaWJ1dGU6IHZpLmZuKCksXG4gICAgcmVtb3ZlQXR0cmlidXRlOiB2aS5mbigpLFxuICAgIGhhc0F0dHJpYnV0ZTogdmkuZm4oKSxcbiAgICBnZXRCb3VuZGluZ0NsaWVudFJlY3Q6IHZpLmZuKCgpID0+ICh7XG4gICAgICB0b3A6IDAsXG4gICAgICBsZWZ0OiAwLFxuICAgICAgd2lkdGg6IDEwMCxcbiAgICAgIGhlaWdodDogMTAwLFxuICAgICAgcmlnaHQ6IDEwMCxcbiAgICAgIGJvdHRvbTogMTAwLFxuICAgICAgeDogMCxcbiAgICAgIHk6IDAsXG4gICAgICB0b0pTT046IHZpLmZuKCksXG4gICAgfSkpLFxuICAgIGZvY3VzOiB2aS5mbigpLFxuICAgIGJsdXI6IHZpLmZuKCksXG4gICAgY2xpY2s6IHZpLmZuKCksXG4gICAgY2xhc3NMaXN0OiB7XG4gICAgICBhZGQ6IHZpLmZuKCksXG4gICAgICByZW1vdmU6IHZpLmZuKCksXG4gICAgICBjb250YWluczogdmkuZm4oKSxcbiAgICAgIHRvZ2dsZTogdmkuZm4oKSxcbiAgICAgIHJlcGxhY2U6IHZpLmZuKCksXG4gICAgfSxcbiAgICBzdHlsZToge1xuICAgICAgZGlzcGxheTogJycsXG4gICAgICB2aXNpYmlsaXR5OiAnJyxcbiAgICAgIG9wYWNpdHk6ICcnLFxuICAgICAgdHJhbnNmb3JtOiAnJyxcbiAgICB9LFxuICAgIC4uLm92ZXJyaWRlcyxcbiAgfSBhcyBIVE1MRWxlbWVudFxufVxuXG4vLyDmqKHmi59TdG9yYWdl5a+56LGhXG5leHBvcnQgY29uc3QgY3JlYXRlTW9ja1N0b3JhZ2UgPSAoKTogU3RvcmFnZSA9PiB7XG4gIGNvbnN0IHN0b3JlOiB7IFtrZXk6IHN0cmluZ106IHN0cmluZyB9ID0ge31cblxuICByZXR1cm4ge1xuICAgIGxlbmd0aDogMCxcbiAgICBrZXk6IChpbmRleDogbnVtYmVyKSA9PiBPYmplY3Qua2V5cyhzdG9yZSlbaW5kZXhdIHx8IG51bGwsXG4gICAgZ2V0SXRlbTogKGtleTogc3RyaW5nKSA9PiBzdG9yZVtrZXldIHx8IG51bGwsXG4gICAgc2V0SXRlbTogKGtleTogc3RyaW5nLCB2YWx1ZTogc3RyaW5nKSA9PiB7XG4gICAgICBzdG9yZVtrZXldID0gU3RyaW5nKHZhbHVlKVxuICAgIH0sXG4gICAgcmVtb3ZlSXRlbTogKGtleTogc3RyaW5nKSA9PiB7XG4gICAgICBkZWxldGUgc3RvcmVba2V5XVxuICAgIH0sXG4gICAgY2xlYXI6ICgpID0+IHtcbiAgICAgIE9iamVjdC5rZXlzKHN0b3JlKS5mb3JFYWNoKGtleSA9PiBkZWxldGUgc3RvcmVba2V5XSlcbiAgICB9LFxuICB9XG59XG5cbi8vIOaooeaLn0RhdGXlr7nosaFcbmV4cG9ydCBjb25zdCBtb2NrRGF0ZU5vdyA9ICh0aW1lc3RhbXA6IG51bWJlcikgPT4ge1xuICBjb25zdCBvcmlnaW5hbERhdGVOb3cgPSBEYXRlLm5vd1xuICBEYXRlLm5vdyA9ICgpID0+IHRpbWVzdGFtcFxuXG4gIHJldHVybiAoKSA9PiB7XG4gICAgRGF0ZS5ub3cgPSBvcmlnaW5hbERhdGVOb3dcbiAgfVxufVxuXG4vLyDmqKHmi59NYXRoLnJhbmRvbVxuZXhwb3J0IGNvbnN0IG1vY2tNYXRoUmFuZG9tID0gKHZhbHVlOiBudW1iZXIpID0+IHtcbiAgY29uc3Qgb3JpZ2luYWxNYXRoUmFuZG9tID0gTWF0aC5yYW5kb21cbiAgTWF0aC5yYW5kb20gPSAoKSA9PiB2YWx1ZVxuXG4gIHJldHVybiAoKSA9PiB7XG4gICAgTWF0aC5yYW5kb20gPSBvcmlnaW5hbE1hdGhSYW5kb21cbiAgfVxufVxuXG4vLyDmqKHmi59jcnlwdG8ucmFuZG9tVVVJRFxuZXhwb3J0IGNvbnN0IG1vY2tDcnlwdG9SYW5kb21VVUlEID0gKHV1aWQ6IHN0cmluZykgPT4ge1xuICBjb25zdCBvcmlnaW5hbFJhbmRvbVVVSUQgPSBjcnlwdG8ucmFuZG9tVVVJRFxuICBjcnlwdG8ucmFuZG9tVVVJRCA9ICgpID0+IHV1aWRcblxuICByZXR1cm4gKCkgPT4ge1xuICAgIGNyeXB0by5yYW5kb21VVUlEID0gb3JpZ2luYWxSYW5kb21VVUlEXG4gIH1cbn1cblxuLy8g5qih5oufY29uc29sZeaWueazlVxuZXhwb3J0IGNvbnN0IG1vY2tDb25zb2xlID0gKCkgPT4ge1xuICBjb25zdCBvcmlnaW5hbENvbnNvbGUgPSB7IC4uLmNvbnNvbGUgfVxuXG4gIGNvbnNvbGUubG9nID0gdmkuZm4oKVxuICBjb25zb2xlLmVycm9yID0gdmkuZm4oKVxuICBjb25zb2xlLndhcm4gPSB2aS5mbigpXG4gIGNvbnNvbGUuaW5mbyA9IHZpLmZuKClcbiAgY29uc29sZS5kZWJ1ZyA9IHZpLmZuKClcblxuICByZXR1cm4gKCkgPT4ge1xuICAgIE9iamVjdC5hc3NpZ24oY29uc29sZSwgb3JpZ2luYWxDb25zb2xlKVxuICB9XG59XG5cbi8vIOa1i+ivleeUqOS+i+WMheijheWZqFxuZXhwb3J0IGNvbnN0IHRlc3RBc3luYyA9IChuYW1lOiBzdHJpbmcsIGZuOiAoKSA9PiBQcm9taXNlPHZvaWQ+KSA9PiB7XG4gIHJldHVybiB0ZXN0KG5hbWUsIGFzeW5jICgpID0+IHtcbiAgICBhd2FpdCBhY3QoYXN5bmMgKCkgPT4ge1xuICAgICAgYXdhaXQgZm4oKVxuICAgIH0pXG4gIH0pXG59XG5cbi8vIOWIhue7hOa1i+ivleWMheijheWZqFxuZXhwb3J0IGNvbnN0IGRlc2NyaWJlQXN5bmMgPSAobmFtZTogc3RyaW5nLCBmbjogKCkgPT4gdm9pZCkgPT4ge1xuICByZXR1cm4gZGVzY3JpYmUobmFtZSwgZm4pXG59XG5cbi8vIOaAp+iDvea1i+ivleW3peWFt1xuZXhwb3J0IGNvbnN0IG1lYXN1cmVQZXJmb3JtYW5jZSA9IGFzeW5jIDxUPihcbiAgbmFtZTogc3RyaW5nLFxuICBmbjogKCkgPT4gUHJvbWlzZTxUPixcbiAgbWF4VGltZU1zOiBudW1iZXIgPSAxMDAwXG4pOiBQcm9taXNlPHsgcmVzdWx0OiBUOyBkdXJhdGlvbjogbnVtYmVyIH0+ID0+IHtcbiAgY29uc3Qgc3RhcnRUaW1lID0gcGVyZm9ybWFuY2Uubm93KClcbiAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZm4oKVxuICBjb25zdCBkdXJhdGlvbiA9IHBlcmZvcm1hbmNlLm5vdygpIC0gc3RhcnRUaW1lXG5cbiAgaWYgKGR1cmF0aW9uID4gbWF4VGltZU1zKSB7XG4gICAgY29uc29sZS53YXJuKGBQZXJmb3JtYW5jZSB3YXJuaW5nOiAke25hbWV9IHRvb2sgJHtkdXJhdGlvbn1tcyAoZXhwZWN0ZWQgPCAke21heFRpbWVNc31tcylgKVxuICB9XG5cbiAgcmV0dXJuIHsgcmVzdWx0LCBkdXJhdGlvbiB9XG59XG5cbi8vIOWGheWtmOS9v+eUqOa1i+ivleW3peWFt1xuZXhwb3J0IGNvbnN0IG1lYXN1cmVNZW1vcnkgPSBhc3luYyA8VD4oXG4gIG5hbWU6IHN0cmluZyxcbiAgZm46ICgpID0+IFByb21pc2U8VD4sXG4gIG1heE1lbW9yeU1COiBudW1iZXIgPSAxMDBcbik6IFByb21pc2U8eyByZXN1bHQ6IFQ7IG1lbW9yeVVzYWdlOiBOb2RlSlMuTWVtb3J5VXNhZ2UgfT4gPT4ge1xuICBjb25zdCBtZW1vcnlCZWZvcmUgPSBwcm9jZXNzLm1lbW9yeVVzYWdlKClcbiAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZm4oKVxuICBjb25zdCBtZW1vcnlBZnRlciA9IHByb2Nlc3MubWVtb3J5VXNhZ2UoKVxuXG4gIGNvbnN0IG1lbW9yeVVzYWdlID0ge1xuICAgIHJzczogbWVtb3J5QWZ0ZXIucnNzIC0gbWVtb3J5QmVmb3JlLnJzcyxcbiAgICBoZWFwVG90YWw6IG1lbW9yeUFmdGVyLmhlYXBUb3RhbCAtIG1lbW9yeUJlZm9yZS5oZWFwVG90YWwsXG4gICAgaGVhcFVzZWQ6IG1lbW9yeUFmdGVyLmhlYXBVc2VkIC0gbWVtb3J5QmVmb3JlLmhlYXBVc2VkLFxuICAgIGV4dGVybmFsOiBtZW1vcnlBZnRlci5leHRlcm5hbCAtIG1lbW9yeUJlZm9yZS5leHRlcm5hbCxcbiAgICBhcnJheUJ1ZmZlcnM6IG1lbW9yeUFmdGVyLmFycmF5QnVmZmVycyAtIG1lbW9yeUJlZm9yZS5hcnJheUJ1ZmZlcnMsXG4gIH1cblxuICBjb25zdCBtZW1vcnlNQiA9IG1lbW9yeVVzYWdlLmhlYXBVc2VkIC8gKDEwMjQgKiAxMDI0KVxuXG4gIGlmIChtZW1vcnlNQiA+IG1heE1lbW9yeU1CKSB7XG4gICAgY29uc29sZS53YXJuKGBNZW1vcnkgd2FybmluZzogJHtuYW1lfSB1c2VkICR7bWVtb3J5TUJ9TUIgKGV4cGVjdGVkIDwgJHttYXhNZW1vcnlNQn1NQilgKVxuICB9XG5cbiAgcmV0dXJuIHsgcmVzdWx0LCBtZW1vcnlVc2FnZSB9XG59XG5cbi8vIOmUmeivr+i+ueeVjOa1i+ivleW3peWFt1xuZXhwb3J0IGNvbnN0IGV4cGVjdEVycm9yQm91bmRhcnkgPSBhc3luYyAoXG4gIGZuOiAoKSA9PiBQcm9taXNlPHZvaWQ+LFxuICBleHBlY3RlZEVycm9yOiBFcnJvciB8IHN0cmluZ1xuKSA9PiB7XG4gIHRyeSB7XG4gICAgYXdhaXQgZm4oKVxuICAgIGZhaWwoJ0V4cGVjdGVkIGVycm9yIHdhcyBub3QgdGhyb3duJylcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBpZiAodHlwZW9mIGV4cGVjdGVkRXJyb3IgPT09ICdzdHJpbmcnKSB7XG4gICAgICBleHBlY3QoZXJyb3IubWVzc2FnZSkudG9Db250YWluKGV4cGVjdGVkRXJyb3IpXG4gICAgfSBlbHNlIHtcbiAgICAgIGV4cGVjdChlcnJvcikudG9CZUluc3RhbmNlT2YoZXhwZWN0ZWRFcnJvci5jb25zdHJ1Y3RvcilcbiAgICAgIGV4cGVjdChlcnJvci5tZXNzYWdlKS50b0JlKGV4cGVjdGVkRXJyb3IubWVzc2FnZSlcbiAgICB9XG4gIH1cbn1cblxuLy8g5qih5ouf572R57uc6K+35rGCXG5leHBvcnQgY29uc3QgbW9ja0ZldGNoID0gKHJlc3BvbnNlczogQXJyYXk8e1xuICByZXNwb25zZTogUHJvbWlzZTxSZXNwb25zZT5cbiAgY29uZGl0aW9uPzogKHVybDogc3RyaW5nLCBvcHRpb25zPzogUmVxdWVzdEluaXQpID0+IGJvb2xlYW5cbn0+ID0gW10pID0+IHtcbiAgY29uc3QgbW9ja0ZldGNoRm4gPSB2aS5mbigpXG5cbiAgbW9ja0ZldGNoRm4ubW9ja0ltcGxlbWVudGF0aW9uKCh1cmw6IHN0cmluZywgb3B0aW9ucz86IFJlcXVlc3RJbml0KSA9PiB7XG4gICAgY29uc3QgbWF0Y2hpbmdSZXNwb25zZSA9IHJlc3BvbnNlcy5maW5kKHIgPT5cbiAgICAgICFyLmNvbmRpdGlvbiB8fCByLmNvbmRpdGlvbih1cmwsIG9wdGlvbnMpXG4gICAgKVxuXG4gICAgaWYgKG1hdGNoaW5nUmVzcG9uc2UpIHtcbiAgICAgIHJldHVybiBtYXRjaGluZ1Jlc3BvbnNlLnJlc3BvbnNlXG4gICAgfVxuXG4gICAgcmV0dXJuIG1vY2tBcGlSZXNwb25zZSh7IGVycm9yOiAnTm90IGZvdW5kJyB9LCA0MDQpXG4gIH0pXG5cbiAgY29uc3Qgb3JpZ2luYWxGZXRjaCA9IGdsb2JhbC5mZXRjaFxuICBnbG9iYWwuZmV0Y2ggPSBtb2NrRmV0Y2hGblxuXG4gIHJldHVybiAoKSA9PiB7XG4gICAgZ2xvYmFsLmZldGNoID0gb3JpZ2luYWxGZXRjaFxuICB9XG59XG5cbi8vIOa4heeQhuaJgOaciW1vY2tcbmV4cG9ydCBjb25zdCBjbGVhbnVwQWxsTW9ja3MgPSAoKSA9PiB7XG4gIHZpLmNsZWFyQWxsTW9ja3MoKVxuICB2aS5yZXNldEFsbE1vY2tzKClcbiAgdmkucmVzdG9yZUFsbE1vY2tzKClcbn1cblxuLy8g55Sf5oiQ6ZqP5py65rWL6K+V5pWw5o2uXG5leHBvcnQgY29uc3QgZ2VuZXJhdGVSYW5kb21EYXRhID0ge1xuICBzdHJpbmc6IChsZW5ndGg6IG51bWJlciA9IDEwKTogc3RyaW5nID0+IHtcbiAgICByZXR1cm4gTWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc3Vic3RyaW5nKDIsIGxlbmd0aCArIDIpXG4gIH0sXG5cbiAgbnVtYmVyOiAobWluOiBudW1iZXIgPSAwLCBtYXg6IG51bWJlciA9IDEwMCk6IG51bWJlciA9PiB7XG4gICAgcmV0dXJuIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIChtYXggLSBtaW4gKyAxKSkgKyBtaW5cbiAgfSxcblxuICBib29sZWFuOiAoKTogYm9vbGVhbiA9PiB7XG4gICAgcmV0dXJuIE1hdGgucmFuZG9tKCkgPiAwLjVcbiAgfSxcblxuICBkYXRlOiAoc3RhcnQ6IERhdGUgPSBuZXcgRGF0ZSgnMjAyMC0wMS0wMScpLCBlbmQ6IERhdGUgPSBuZXcgRGF0ZSgpKTogRGF0ZSA9PiB7XG4gICAgcmV0dXJuIG5ldyBEYXRlKHN0YXJ0LmdldFRpbWUoKSArIE1hdGgucmFuZG9tKCkgKiAoZW5kLmdldFRpbWUoKSAtIHN0YXJ0LmdldFRpbWUoKSkpXG4gIH0sXG5cbiAgZW1haWw6ICgpOiBzdHJpbmcgPT4ge1xuICAgIHJldHVybiBgJHtnZW5lcmF0ZVJhbmRvbURhdGEuc3RyaW5nKCl9QCR7Z2VuZXJhdGVSYW5kb21EYXRhLnN0cmluZyg1KX0uY29tYFxuICB9LFxuXG4gIHV1aWQ6ICgpOiBzdHJpbmcgPT4ge1xuICAgIHJldHVybiAneHh4eHh4eHgteHh4eC00eHh4LXl4eHgteHh4eHh4eHh4eHh4Jy5yZXBsYWNlKC9beHldL2csIChjKSA9PiB7XG4gICAgICBjb25zdCByID0gTWF0aC5yYW5kb20oKSAqIDE2IHwgMFxuICAgICAgY29uc3QgdiA9IGMgPT09ICd4JyA/IHIgOiAociAmIDB4MyB8IDB4OClcbiAgICAgIHJldHVybiB2LnRvU3RyaW5nKDE2KVxuICAgIH0pXG4gIH0sXG59XG5cbmV4cG9ydCBkZWZhdWx0IHtcbiAgYXN5bmNXYWl0LFxuICB3YWl0Rm9yQ29uZGl0aW9uLFxuICB3YWl0Rm9yQXN5bmMsXG4gIG1vY2tQcm9taXNlUmVzb2x2ZSxcbiAgbW9ja1Byb21pc2VSZWplY3QsXG4gIG1vY2tBcGlSZXNwb25zZSxcbiAgbW9ja0FwaUVycm9yLFxuICBjcmVhdGVUZXN0RXZlbnQsXG4gIGNyZWF0ZU1vY2tFdmVudCxcbiAgY3JlYXRlTW9ja0ZpbGUsXG4gIGNyZWF0ZU1vY2tGaWxlTGlzdCxcbiAgY3JlYXRlTW9ja0VsZW1lbnQsXG4gIGNyZWF0ZU1vY2tTdG9yYWdlLFxuICBtb2NrRGF0ZU5vdyxcbiAgbW9ja01hdGhSYW5kb20sXG4gIG1vY2tDcnlwdG9SYW5kb21VVUlELFxuICBtb2NrQ29uc29sZSxcbiAgdGVzdEFzeW5jLFxuICBkZXNjcmliZUFzeW5jLFxuICBtZWFzdXJlUGVyZm9ybWFuY2UsXG4gIG1lYXN1cmVNZW1vcnksXG4gIGV4cGVjdEVycm9yQm91bmRhcnksXG4gIG1vY2tGZXRjaCxcbiAgY2xlYW51cEFsbE1vY2tzLFxuICBnZW5lcmF0ZVJhbmRvbURhdGEsXG59Il0sInZlcnNpb24iOjN9