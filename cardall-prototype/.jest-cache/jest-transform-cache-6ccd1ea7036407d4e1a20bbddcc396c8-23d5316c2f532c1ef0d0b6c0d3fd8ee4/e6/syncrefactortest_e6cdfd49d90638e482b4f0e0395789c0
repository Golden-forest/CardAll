d66ff6c0fcf26d19167ca007adf3dc6f
"use strict";
// 同步机制重构测试
// Week 3 Day 11-13 同步机制重构 - Project-Brainstormer
Object.defineProperty(exports, "__esModule", { value: true });
exports.runSyncRefactorTests = runSyncRefactorTests;
const globals_1 = require("@jest/globals");
const optimized_cloud_sync_1 = require("../../src/services/sync/optimized-cloud-sync");
const incremental_sync_algorithm_1 = require("../../src/services/sync/algorithms/incremental-sync-algorithm");
const intelligent_conflict_resolver_1 = require("../../src/services/sync/conflict/intelligent-conflict-resolver");
const network_state_detector_1 = require("../../src/services/network-state-detector");
describe('Week 3 Day 11-13 同步机制重构测试', () => {
    let mockAuthService;
    let mockNetworkState;
    beforeAll(() => {
        console.log('🚀 开始 Week 3 Day 11-13 同步机制重构测试');
        // 模拟认证服务
        mockAuthService = {
            isAuthenticated: () => true,
            getCurrentUser: () => ({ id: 'test-user-id' }),
            onAuthStateChange: globals_1.jest.fn()
        };
        // 设置认证服务
        optimized_cloud_sync_1.optimizedCloudSyncService.setAuthService(mockAuthService);
        // 模拟网络状态
        mockNetworkState = {
            isOnline: true,
            quality: 'good',
            isReliable: true,
            canSync: true,
            bandwidth: 10,
            latency: 50,
            reliability: 0.9,
            connectionType: 'wifi'
        };
    });
    afterAll(() => {
        console.log('✅ 同步机制重构测试完成');
    });
    describe('增量同步算法测试', () => {
        test('应该能够执行增量同步', async () => {
            const result = await incremental_sync_algorithm_1.incrementalSyncAlgorithm.performIncrementalSync('test-user-id');
            expect(result).toBeDefined();
            expect(typeof result.success).toBe('boolean');
            expect(typeof result.processedCount).toBe('number');
            expect(typeof result.failedCount).toBe('number');
            expect(Array.isArray(result.conflicts)).toBe(true);
            expect(Array.isArray(result.errors)).toBe(true);
            console.log(`✅ 增量同步测试完成 - 成功: ${result.success}, 处理: ${result.processedCount}, 失败: ${result.failedCount}`);
        });
        test('应该能够获取同步指标', () => {
            const metrics = incremental_sync_algorithm_1.incrementalSyncAlgorithm.getSyncMetrics();
            expect(metrics).toBeDefined();
            expect(typeof metrics.totalOperations).toBe('number');
            expect(typeof metrics.successRate).toBe('number');
            expect(typeof metrics.averageResponseTime).toBe('number');
            expect(typeof metrics.bandwidthUsage).toBe('number');
            expect(typeof metrics.conflictRate).toBe('number');
            expect(typeof metrics.retryCount).toBe('number');
            console.log(`✅ 同步指标获取测试完成`);
        });
        test('应该能够清理同步历史', async () => {
            await expect(incremental_sync_algorithm_1.incrementalSyncAlgorithm.cleanupSyncHistory(7)).resolves.not.toThrow();
            console.log(`✅ 同步历史清理测试完成`);
        });
    });
    describe('智能冲突解决测试', () => {
        test('应该能够解决时间戳冲突', async () => {
            const conflict = {
                id: 'test-conflict-1',
                entityId: 'card-1',
                entityType: 'card',
                localData: {
                    frontContent: '本地内容',
                    backContent: '本地背面',
                    updatedAt: new Date(Date.now() - 1000).toISOString()
                },
                cloudData: {
                    frontContent: '云端内容',
                    backContent: '云端背面',
                    updatedAt: new Date().toISOString()
                },
                conflictType: 'concurrent_modification',
                severity: 'medium',
                timestamp: new Date(),
                autoResolved: false
            };
            const context = intelligent_conflict_resolver_1.intelligentConflictResolver['createConflictResolutionContext']?.(conflict) || {
                localOperation: {
                    type: 'update',
                    entity: 'card',
                    entityId: 'card-1',
                    data: conflict.localData,
                    timestamp: new Date(conflict.localData.updatedAt)
                },
                cloudOperation: {
                    type: 'update',
                    entity: 'card',
                    entityId: 'card-1',
                    data: conflict.cloudData,
                    timestamp: new Date(conflict.cloudData.updatedAt)
                },
                userPreferences: intelligent_conflict_resolver_1.intelligentConflictResolver['userPreferences'],
                networkQuality: mockNetworkState,
                timeConstraints: { urgency: 'medium' },
                historyData: intelligent_conflict_resolver_1.intelligentConflictResolver['conflictHistory']
            };
            const resolution = await intelligent_conflict_resolver_1.intelligentConflictResolver.resolveConflict(conflict, context);
            expect(resolution).toBeDefined();
            expect(['local_wins', 'cloud_wins', 'merge', 'manual'].includes(resolution.resolution)).toBe(true);
            expect(typeof resolution.confidence).toBe('number');
            expect(typeof resolution.reasoning).toBe('string');
            expect(typeof resolution.requiresUserConfirmation).toBe('boolean');
            expect(typeof resolution.estimatedTime).toBe('number');
            console.log(`✅ 时间戳冲突解决测试完成 - 方案: ${resolution.resolution}, 置信度: ${resolution.confidence}`);
        });
        test('应该能够获取冲突统计', () => {
            const stats = intelligent_conflict_resolver_1.intelligentConflictResolver.getConflictStatistics();
            expect(stats).toBeDefined();
            expect(typeof stats.totalConflicts).toBe('number');
            expect(typeof stats.autoResolutionRate).toBe('number');
            expect(typeof stats.averageResolutionTime).toBe('number');
            expect(typeof stats.mostCommonConflictType).toBe('string');
            expect(stats.userPreferences).toBeDefined();
            console.log(`✅ 冲突统计获取测试完成`);
        });
    });
    describe('优化同步服务测试', () => {
        test('应该能够获取当前状态', () => {
            const status = optimized_cloud_sync_1.optimizedCloudSyncService.getCurrentStatus();
            expect(status).toBeDefined();
            expect(typeof status.isOnline).toBe('boolean');
            expect(typeof status.syncInProgress).toBe('boolean');
            expect(typeof status.hasConflicts).toBe('boolean');
            console.log(`✅ 同步状态获取测试完成`);
        });
        test('应该能够获取同步统计', () => {
            const stats = optimized_cloud_sync_1.optimizedCloudSyncService.getSyncStatistics();
            expect(stats).toBeDefined();
            expect(typeof stats.totalSyncs).toBe('number');
            expect(typeof stats.successfulSyncs).toBe('number');
            expect(typeof stats.failedSyncs).toBe('number');
            expect(typeof stats.averageSyncTime).toBe('number');
            expect(typeof stats.successRate).toBe('number');
            expect(stats.conflictResolutionRate).toBeDefined();
            expect(stats.networkQuality).toBeDefined();
            console.log(`✅ 同步统计获取测试完成`);
        });
        test('应该能够更新配置', () => {
            const newConfig = {
                enableIncrementalSync: false,
                syncIntervals: {
                    excellent: 30 * 1000,
                    good: 60 * 1000,
                    fair: 120 * 1000,
                    poor: 300 * 1000
                }
            };
            expect(() => {
                optimized_cloud_sync_1.optimizedCloudSyncService.updateConfig(newConfig);
            }).not.toThrow();
            console.log(`✅ 同步配置更新测试完成`);
        });
        test('应该能够添加状态监听器', () => {
            const mockCallback = globals_1.jest.fn();
            const unsubscribe = optimized_cloud_sync_1.optimizedCloudSyncService.onStatusChange(mockCallback);
            expect(typeof unsubscribe).toBe('function');
            expect(mockCallback).toHaveBeenCalled();
            // 测试取消订阅
            unsubscribe();
            console.log(`✅ 状态监听器测试完成`);
        });
    });
    describe('集成测试', () => {
        test('应该能够处理完整的同步流程', async () => {
            // 模拟网络状态良好
            globals_1.jest.spyOn(network_state_detector_1.networkStateDetector, 'getCurrentState').mockReturnValue(mockNetworkState);
            // 执行同步
            const result = await optimized_cloud_sync_1.optimizedCloudSyncService.performOptimizedSync();
            expect(result).toBeDefined();
            expect(typeof result.success).toBe('boolean');
            expect(typeof result.processedCount).toBe('number');
            expect(typeof result.failedCount).toBe('number');
            expect(Array.isArray(result.conflicts)).toBe(true);
            expect(Array.isArray(result.errors)).toBe(true);
            console.log(`✅ 完整同步流程测试完成 - 成功: ${result.success}`);
        });
        test('应该能够在网络不佳时跳过同步', async () => {
            // 模拟网络状态不佳
            const poorNetworkState = {
                ...mockNetworkState,
                quality: 'poor',
                canSync: false
            };
            globals_1.jest.spyOn(network_state_detector_1.networkStateDetector, 'getCurrentState').mockReturnValue(poorNetworkState);
            const result = await optimized_cloud_sync_1.optimizedCloudSyncService.performOptimizedSync();
            expect(result).toBeDefined();
            expect(result.success).toBe(false);
            expect(result.processedCount).toBe(0);
            console.log(`✅ 网络不佳跳过同步测试完成`);
        });
        test('应该能够在认证失败时跳过同步', async () => {
            // 模拟认证失败
            globals_1.jest.spyOn(mockAuthService, 'isAuthenticated').mockReturnValue(false);
            const result = await optimized_cloud_sync_1.optimizedCloudSyncService.performOptimizedSync();
            expect(result).toBeDefined();
            expect(result.success).toBe(false);
            // 恢复认证状态
            globals_1.jest.spyOn(mockAuthService, 'isAuthenticated').mockReturnValue(true);
            console.log(`✅ 认证失败跳过同步测试完成`);
        });
    });
    describe('性能测试', () => {
        test('应该能够在合理时间内完成状态获取', async () => {
            const startTime = performance.now();
            // 执行多次状态获取
            for (let i = 0; i < 100; i++) {
                optimized_cloud_sync_1.optimizedCloudSyncService.getCurrentStatus();
            }
            const duration = performance.now() - startTime;
            expect(duration).toBeLessThan(100); // 应该在100ms内完成100次调用
            console.log(`✅ 状态获取性能测试完成 - 100次调用耗时 ${duration.toFixed(2)}ms`);
        });
        test('应该能够正确处理并发同步请求', async () => {
            // 模拟网络状态良好
            globals_1.jest.spyOn(network_state_detector_1.networkStateDetector, 'getCurrentState').mockReturnValue(mockNetworkState);
            // 并发触发多个同步请求
            const promises = [];
            for (let i = 0; i < 5; i++) {
                promises.push(optimized_cloud_sync_1.optimizedCloudSyncService.performOptimizedSync());
            }
            const results = await Promise.all(promises);
            // 所有请求都应该完成
            expect(results.length).toBe(5);
            results.forEach(result => {
                expect(result).toBeDefined();
            });
            console.log(`✅ 并发同步请求测试完成 - 处理了 ${results.length} 个并发请求`);
        });
    });
    describe('错误处理测试', () => {
        test('应该能够处理网络错误', async () => {
            // 模拟网络错误
            const errorNetworkState = {
                ...mockNetworkState,
                isOnline: false,
                canSync: false
            };
            globals_1.jest.spyOn(network_state_detector_1.networkStateDetector, 'getCurrentState').mockReturnValue(errorNetworkState);
            const result = await optimized_cloud_sync_1.optimizedCloudSyncService.performOptimizedSync();
            expect(result).toBeDefined();
            expect(result.success).toBe(false);
            console.log(`✅ 网络错误处理测试完成`);
        });
        test('应该能够处理服务错误', async () => {
            // 模拟增量同步算法错误
            globals_1.jest.spyOn(incremental_sync_algorithm_1.incrementalSyncAlgorithm, 'performIncrementalSync')
                .mockRejectedValue(new Error('Sync service error'));
            const result = await optimized_cloud_sync_1.optimizedCloudSyncService.performOptimizedSync();
            expect(result).toBeDefined();
            expect(result.success).toBe(false);
            expect(result.errors.length).toBeGreaterThan(0);
            // 恢复原始实现
            globals_1.jest.restoreAllMocks();
            console.log(`✅ 服务错误处理测试完成`);
        });
    });
});
// ============================================================================
// 测试导出函数
// ============================================================================
async function runSyncRefactorTests() {
    console.log('🚀 运行同步机制重构测试');
    try {
        // 运行 Jest 测试
        const { execSync } = require('child_process');
        execSync('npx jest tests/sync/sync-refactor.test.ts --verbose', {
            stdio: 'inherit',
            cwd: process.cwd()
        });
        console.log('✅ 同步机制重构测试完成');
    }
    catch (error) {
        console.error('❌ 同步机制重构测试失败:', error);
        process.exit(1);
    }
}
// 如果直接运行此文件
if (require.main === module) {
    runSyncRefactorTests();
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiRDpcXFByb2plY3RzXFxDYXJkRXZlcnl0aGluZ1xcY2FyZGFsbC1wcm90b3R5cGVcXHRlc3RzXFxzeW5jXFxzeW5jLXJlZmFjdG9yLnRlc3QudHMiLCJtYXBwaW5ncyI6IjtBQUFBLFdBQVc7QUFDWCxpREFBaUQ7O0FBd1ZqRCxvREFrQkM7QUF4V0QsMkNBQW9DO0FBQ3BDLHVGQUF3RjtBQUN4Riw4R0FBd0c7QUFDeEcsa0hBQTRHO0FBQzVHLHNGQUFnRjtBQUVoRixRQUFRLENBQUMsMkJBQTJCLEVBQUUsR0FBRyxFQUFFO0lBRXpDLElBQUksZUFBb0IsQ0FBQTtJQUN4QixJQUFJLGdCQUFxQixDQUFBO0lBRXpCLFNBQVMsQ0FBQyxHQUFHLEVBQUU7UUFDYixPQUFPLENBQUMsR0FBRyxDQUFDLGlDQUFpQyxDQUFDLENBQUE7UUFFOUMsU0FBUztRQUNULGVBQWUsR0FBRztZQUNoQixlQUFlLEVBQUUsR0FBRyxFQUFFLENBQUMsSUFBSTtZQUMzQixjQUFjLEVBQUUsR0FBRyxFQUFFLENBQUMsQ0FBQyxFQUFFLEVBQUUsRUFBRSxjQUFjLEVBQUUsQ0FBQztZQUM5QyxpQkFBaUIsRUFBRSxjQUFJLENBQUMsRUFBRSxFQUFFO1NBQzdCLENBQUE7UUFFRCxTQUFTO1FBQ1QsZ0RBQXlCLENBQUMsY0FBYyxDQUFDLGVBQWUsQ0FBQyxDQUFBO1FBRXpELFNBQVM7UUFDVCxnQkFBZ0IsR0FBRztZQUNqQixRQUFRLEVBQUUsSUFBSTtZQUNkLE9BQU8sRUFBRSxNQUFNO1lBQ2YsVUFBVSxFQUFFLElBQUk7WUFDaEIsT0FBTyxFQUFFLElBQUk7WUFDYixTQUFTLEVBQUUsRUFBRTtZQUNiLE9BQU8sRUFBRSxFQUFFO1lBQ1gsV0FBVyxFQUFFLEdBQUc7WUFDaEIsY0FBYyxFQUFFLE1BQU07U0FDdkIsQ0FBQTtJQUNILENBQUMsQ0FBQyxDQUFBO0lBRUYsUUFBUSxDQUFDLEdBQUcsRUFBRTtRQUNaLE9BQU8sQ0FBQyxHQUFHLENBQUMsY0FBYyxDQUFDLENBQUE7SUFDN0IsQ0FBQyxDQUFDLENBQUE7SUFFRixRQUFRLENBQUMsVUFBVSxFQUFFLEdBQUcsRUFBRTtRQUV4QixJQUFJLENBQUMsWUFBWSxFQUFFLEtBQUssSUFBSSxFQUFFO1lBQzVCLE1BQU0sTUFBTSxHQUFHLE1BQU0scURBQXdCLENBQUMsc0JBQXNCLENBQUMsY0FBYyxDQUFDLENBQUE7WUFFcEYsTUFBTSxDQUFDLE1BQU0sQ0FBQyxDQUFDLFdBQVcsRUFBRSxDQUFBO1lBQzVCLE1BQU0sQ0FBQyxPQUFPLE1BQU0sQ0FBQyxPQUFPLENBQUMsQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLENBQUE7WUFDN0MsTUFBTSxDQUFDLE9BQU8sTUFBTSxDQUFDLGNBQWMsQ0FBQyxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQTtZQUNuRCxNQUFNLENBQUMsT0FBTyxNQUFNLENBQUMsV0FBVyxDQUFDLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFBO1lBQ2hELE1BQU0sQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQTtZQUNsRCxNQUFNLENBQUMsS0FBSyxDQUFDLE9BQU8sQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUE7WUFFL0MsT0FBTyxDQUFDLEdBQUcsQ0FBQyxvQkFBb0IsTUFBTSxDQUFDLE9BQU8sU0FBUyxNQUFNLENBQUMsY0FBYyxTQUFTLE1BQU0sQ0FBQyxXQUFXLEVBQUUsQ0FBQyxDQUFBO1FBQzVHLENBQUMsQ0FBQyxDQUFBO1FBRUYsSUFBSSxDQUFDLFlBQVksRUFBRSxHQUFHLEVBQUU7WUFDdEIsTUFBTSxPQUFPLEdBQUcscURBQXdCLENBQUMsY0FBYyxFQUFFLENBQUE7WUFFekQsTUFBTSxDQUFDLE9BQU8sQ0FBQyxDQUFDLFdBQVcsRUFBRSxDQUFBO1lBQzdCLE1BQU0sQ0FBQyxPQUFPLE9BQU8sQ0FBQyxlQUFlLENBQUMsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUE7WUFDckQsTUFBTSxDQUFDLE9BQU8sT0FBTyxDQUFDLFdBQVcsQ0FBQyxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQTtZQUNqRCxNQUFNLENBQUMsT0FBTyxPQUFPLENBQUMsbUJBQW1CLENBQUMsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUE7WUFDekQsTUFBTSxDQUFDLE9BQU8sT0FBTyxDQUFDLGNBQWMsQ0FBQyxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQTtZQUNwRCxNQUFNLENBQUMsT0FBTyxPQUFPLENBQUMsWUFBWSxDQUFDLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFBO1lBQ2xELE1BQU0sQ0FBQyxPQUFPLE9BQU8sQ0FBQyxVQUFVLENBQUMsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUE7WUFFaEQsT0FBTyxDQUFDLEdBQUcsQ0FBQyxjQUFjLENBQUMsQ0FBQTtRQUM3QixDQUFDLENBQUMsQ0FBQTtRQUVGLElBQUksQ0FBQyxZQUFZLEVBQUUsS0FBSyxJQUFJLEVBQUU7WUFDNUIsTUFBTSxNQUFNLENBQUMscURBQXdCLENBQUMsa0JBQWtCLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxRQUFRLENBQUMsR0FBRyxDQUFDLE9BQU8sRUFBRSxDQUFBO1lBQ25GLE9BQU8sQ0FBQyxHQUFHLENBQUMsY0FBYyxDQUFDLENBQUE7UUFDN0IsQ0FBQyxDQUFDLENBQUE7SUFDSixDQUFDLENBQUMsQ0FBQTtJQUVGLFFBQVEsQ0FBQyxVQUFVLEVBQUUsR0FBRyxFQUFFO1FBRXhCLElBQUksQ0FBQyxhQUFhLEVBQUUsS0FBSyxJQUFJLEVBQUU7WUFDN0IsTUFBTSxRQUFRLEdBQUc7Z0JBQ2YsRUFBRSxFQUFFLGlCQUFpQjtnQkFDckIsUUFBUSxFQUFFLFFBQVE7Z0JBQ2xCLFVBQVUsRUFBRSxNQUFNO2dCQUNsQixTQUFTLEVBQUU7b0JBQ1QsWUFBWSxFQUFFLE1BQU07b0JBQ3BCLFdBQVcsRUFBRSxNQUFNO29CQUNuQixTQUFTLEVBQUUsSUFBSSxJQUFJLENBQUMsSUFBSSxDQUFDLEdBQUcsRUFBRSxHQUFHLElBQUksQ0FBQyxDQUFDLFdBQVcsRUFBRTtpQkFDckQ7Z0JBQ0QsU0FBUyxFQUFFO29CQUNULFlBQVksRUFBRSxNQUFNO29CQUNwQixXQUFXLEVBQUUsTUFBTTtvQkFDbkIsU0FBUyxFQUFFLElBQUksSUFBSSxFQUFFLENBQUMsV0FBVyxFQUFFO2lCQUNwQztnQkFDRCxZQUFZLEVBQUUseUJBQWtDO2dCQUNoRCxRQUFRLEVBQUUsUUFBaUI7Z0JBQzNCLFNBQVMsRUFBRSxJQUFJLElBQUksRUFBRTtnQkFDckIsWUFBWSxFQUFFLEtBQUs7YUFDcEIsQ0FBQTtZQUVELE1BQU0sT0FBTyxHQUFHLDJEQUEyQixDQUFDLGlDQUFpQyxDQUFDLEVBQUUsQ0FBQyxRQUFRLENBQUMsSUFBSTtnQkFDNUYsY0FBYyxFQUFFO29CQUNkLElBQUksRUFBRSxRQUFRO29CQUNkLE1BQU0sRUFBRSxNQUFNO29CQUNkLFFBQVEsRUFBRSxRQUFRO29CQUNsQixJQUFJLEVBQUUsUUFBUSxDQUFDLFNBQVM7b0JBQ3hCLFNBQVMsRUFBRSxJQUFJLElBQUksQ0FBQyxRQUFRLENBQUMsU0FBUyxDQUFDLFNBQVMsQ0FBQztpQkFDbEQ7Z0JBQ0QsY0FBYyxFQUFFO29CQUNkLElBQUksRUFBRSxRQUFRO29CQUNkLE1BQU0sRUFBRSxNQUFNO29CQUNkLFFBQVEsRUFBRSxRQUFRO29CQUNsQixJQUFJLEVBQUUsUUFBUSxDQUFDLFNBQVM7b0JBQ3hCLFNBQVMsRUFBRSxJQUFJLElBQUksQ0FBQyxRQUFRLENBQUMsU0FBUyxDQUFDLFNBQVMsQ0FBQztpQkFDbEQ7Z0JBQ0QsZUFBZSxFQUFFLDJEQUEyQixDQUFDLGlCQUFpQixDQUFDO2dCQUMvRCxjQUFjLEVBQUUsZ0JBQWdCO2dCQUNoQyxlQUFlLEVBQUUsRUFBRSxPQUFPLEVBQUUsUUFBaUIsRUFBRTtnQkFDL0MsV0FBVyxFQUFFLDJEQUEyQixDQUFDLGlCQUFpQixDQUFDO2FBQzVELENBQUE7WUFFRCxNQUFNLFVBQVUsR0FBRyxNQUFNLDJEQUEyQixDQUFDLGVBQWUsQ0FBQyxRQUFRLEVBQUUsT0FBTyxDQUFDLENBQUE7WUFFdkYsTUFBTSxDQUFDLFVBQVUsQ0FBQyxDQUFDLFdBQVcsRUFBRSxDQUFBO1lBQ2hDLE1BQU0sQ0FBQyxDQUFDLFlBQVksRUFBRSxZQUFZLEVBQUUsT0FBTyxFQUFFLFFBQVEsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxVQUFVLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUE7WUFDbEcsTUFBTSxDQUFDLE9BQU8sVUFBVSxDQUFDLFVBQVUsQ0FBQyxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQTtZQUNuRCxNQUFNLENBQUMsT0FBTyxVQUFVLENBQUMsU0FBUyxDQUFDLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFBO1lBQ2xELE1BQU0sQ0FBQyxPQUFPLFVBQVUsQ0FBQyx3QkFBd0IsQ0FBQyxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQTtZQUNsRSxNQUFNLENBQUMsT0FBTyxVQUFVLENBQUMsYUFBYSxDQUFDLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFBO1lBRXRELE9BQU8sQ0FBQyxHQUFHLENBQUMsdUJBQXVCLFVBQVUsQ0FBQyxVQUFVLFVBQVUsVUFBVSxDQUFDLFVBQVUsRUFBRSxDQUFDLENBQUE7UUFDNUYsQ0FBQyxDQUFDLENBQUE7UUFFRixJQUFJLENBQUMsWUFBWSxFQUFFLEdBQUcsRUFBRTtZQUN0QixNQUFNLEtBQUssR0FBRywyREFBMkIsQ0FBQyxxQkFBcUIsRUFBRSxDQUFBO1lBRWpFLE1BQU0sQ0FBQyxLQUFLLENBQUMsQ0FBQyxXQUFXLEVBQUUsQ0FBQTtZQUMzQixNQUFNLENBQUMsT0FBTyxLQUFLLENBQUMsY0FBYyxDQUFDLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFBO1lBQ2xELE1BQU0sQ0FBQyxPQUFPLEtBQUssQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQTtZQUN0RCxNQUFNLENBQUMsT0FBTyxLQUFLLENBQUMscUJBQXFCLENBQUMsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUE7WUFDekQsTUFBTSxDQUFDLE9BQU8sS0FBSyxDQUFDLHNCQUFzQixDQUFDLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFBO1lBQzFELE1BQU0sQ0FBQyxLQUFLLENBQUMsZUFBZSxDQUFDLENBQUMsV0FBVyxFQUFFLENBQUE7WUFFM0MsT0FBTyxDQUFDLEdBQUcsQ0FBQyxjQUFjLENBQUMsQ0FBQTtRQUM3QixDQUFDLENBQUMsQ0FBQTtJQUNKLENBQUMsQ0FBQyxDQUFBO0lBRUYsUUFBUSxDQUFDLFVBQVUsRUFBRSxHQUFHLEVBQUU7UUFFeEIsSUFBSSxDQUFDLFlBQVksRUFBRSxHQUFHLEVBQUU7WUFDdEIsTUFBTSxNQUFNLEdBQUcsZ0RBQXlCLENBQUMsZ0JBQWdCLEVBQUUsQ0FBQTtZQUUzRCxNQUFNLENBQUMsTUFBTSxDQUFDLENBQUMsV0FBVyxFQUFFLENBQUE7WUFDNUIsTUFBTSxDQUFDLE9BQU8sTUFBTSxDQUFDLFFBQVEsQ0FBQyxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQTtZQUM5QyxNQUFNLENBQUMsT0FBTyxNQUFNLENBQUMsY0FBYyxDQUFDLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxDQUFBO1lBQ3BELE1BQU0sQ0FBQyxPQUFPLE1BQU0sQ0FBQyxZQUFZLENBQUMsQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLENBQUE7WUFFbEQsT0FBTyxDQUFDLEdBQUcsQ0FBQyxjQUFjLENBQUMsQ0FBQTtRQUM3QixDQUFDLENBQUMsQ0FBQTtRQUVGLElBQUksQ0FBQyxZQUFZLEVBQUUsR0FBRyxFQUFFO1lBQ3RCLE1BQU0sS0FBSyxHQUFHLGdEQUF5QixDQUFDLGlCQUFpQixFQUFFLENBQUE7WUFFM0QsTUFBTSxDQUFDLEtBQUssQ0FBQyxDQUFDLFdBQVcsRUFBRSxDQUFBO1lBQzNCLE1BQU0sQ0FBQyxPQUFPLEtBQUssQ0FBQyxVQUFVLENBQUMsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUE7WUFDOUMsTUFBTSxDQUFDLE9BQU8sS0FBSyxDQUFDLGVBQWUsQ0FBQyxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQTtZQUNuRCxNQUFNLENBQUMsT0FBTyxLQUFLLENBQUMsV0FBVyxDQUFDLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFBO1lBQy9DLE1BQU0sQ0FBQyxPQUFPLEtBQUssQ0FBQyxlQUFlLENBQUMsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUE7WUFDbkQsTUFBTSxDQUFDLE9BQU8sS0FBSyxDQUFDLFdBQVcsQ0FBQyxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQTtZQUMvQyxNQUFNLENBQUMsS0FBSyxDQUFDLHNCQUFzQixDQUFDLENBQUMsV0FBVyxFQUFFLENBQUE7WUFDbEQsTUFBTSxDQUFDLEtBQUssQ0FBQyxjQUFjLENBQUMsQ0FBQyxXQUFXLEVBQUUsQ0FBQTtZQUUxQyxPQUFPLENBQUMsR0FBRyxDQUFDLGNBQWMsQ0FBQyxDQUFBO1FBQzdCLENBQUMsQ0FBQyxDQUFBO1FBRUYsSUFBSSxDQUFDLFVBQVUsRUFBRSxHQUFHLEVBQUU7WUFDcEIsTUFBTSxTQUFTLEdBQUc7Z0JBQ2hCLHFCQUFxQixFQUFFLEtBQUs7Z0JBQzVCLGFBQWEsRUFBRTtvQkFDYixTQUFTLEVBQUUsRUFBRSxHQUFHLElBQUk7b0JBQ3BCLElBQUksRUFBRSxFQUFFLEdBQUcsSUFBSTtvQkFDZixJQUFJLEVBQUUsR0FBRyxHQUFHLElBQUk7b0JBQ2hCLElBQUksRUFBRSxHQUFHLEdBQUcsSUFBSTtpQkFDakI7YUFDRixDQUFBO1lBRUQsTUFBTSxDQUFDLEdBQUcsRUFBRTtnQkFDVixnREFBeUIsQ0FBQyxZQUFZLENBQUMsU0FBUyxDQUFDLENBQUE7WUFDbkQsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLE9BQU8sRUFBRSxDQUFBO1lBRWhCLE9BQU8sQ0FBQyxHQUFHLENBQUMsY0FBYyxDQUFDLENBQUE7UUFDN0IsQ0FBQyxDQUFDLENBQUE7UUFFRixJQUFJLENBQUMsYUFBYSxFQUFFLEdBQUcsRUFBRTtZQUN2QixNQUFNLFlBQVksR0FBRyxjQUFJLENBQUMsRUFBRSxFQUFFLENBQUE7WUFDOUIsTUFBTSxXQUFXLEdBQUcsZ0RBQXlCLENBQUMsY0FBYyxDQUFDLFlBQVksQ0FBQyxDQUFBO1lBRTFFLE1BQU0sQ0FBQyxPQUFPLFdBQVcsQ0FBQyxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsQ0FBQTtZQUMzQyxNQUFNLENBQUMsWUFBWSxDQUFDLENBQUMsZ0JBQWdCLEVBQUUsQ0FBQTtZQUV2QyxTQUFTO1lBQ1QsV0FBVyxFQUFFLENBQUE7WUFFYixPQUFPLENBQUMsR0FBRyxDQUFDLGFBQWEsQ0FBQyxDQUFBO1FBQzVCLENBQUMsQ0FBQyxDQUFBO0lBQ0osQ0FBQyxDQUFDLENBQUE7SUFFRixRQUFRLENBQUMsTUFBTSxFQUFFLEdBQUcsRUFBRTtRQUVwQixJQUFJLENBQUMsZUFBZSxFQUFFLEtBQUssSUFBSSxFQUFFO1lBQy9CLFdBQVc7WUFDWCxjQUFJLENBQUMsS0FBSyxDQUFDLDZDQUFvQixFQUFFLGlCQUFpQixDQUFDLENBQUMsZUFBZSxDQUFDLGdCQUFnQixDQUFDLENBQUE7WUFFckYsT0FBTztZQUNQLE1BQU0sTUFBTSxHQUFHLE1BQU0sZ0RBQXlCLENBQUMsb0JBQW9CLEVBQUUsQ0FBQTtZQUVyRSxNQUFNLENBQUMsTUFBTSxDQUFDLENBQUMsV0FBVyxFQUFFLENBQUE7WUFDNUIsTUFBTSxDQUFDLE9BQU8sTUFBTSxDQUFDLE9BQU8sQ0FBQyxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQTtZQUM3QyxNQUFNLENBQUMsT0FBTyxNQUFNLENBQUMsY0FBYyxDQUFDLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFBO1lBQ25ELE1BQU0sQ0FBQyxPQUFPLE1BQU0sQ0FBQyxXQUFXLENBQUMsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUE7WUFDaEQsTUFBTSxDQUFDLEtBQUssQ0FBQyxPQUFPLENBQUMsTUFBTSxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFBO1lBQ2xELE1BQU0sQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQTtZQUUvQyxPQUFPLENBQUMsR0FBRyxDQUFDLHNCQUFzQixNQUFNLENBQUMsT0FBTyxFQUFFLENBQUMsQ0FBQTtRQUNyRCxDQUFDLENBQUMsQ0FBQTtRQUVGLElBQUksQ0FBQyxnQkFBZ0IsRUFBRSxLQUFLLElBQUksRUFBRTtZQUNoQyxXQUFXO1lBQ1gsTUFBTSxnQkFBZ0IsR0FBRztnQkFDdkIsR0FBRyxnQkFBZ0I7Z0JBQ25CLE9BQU8sRUFBRSxNQUFNO2dCQUNmLE9BQU8sRUFBRSxLQUFLO2FBQ2YsQ0FBQTtZQUVELGNBQUksQ0FBQyxLQUFLLENBQUMsNkNBQW9CLEVBQUUsaUJBQWlCLENBQUMsQ0FBQyxlQUFlLENBQUMsZ0JBQWdCLENBQUMsQ0FBQTtZQUVyRixNQUFNLE1BQU0sR0FBRyxNQUFNLGdEQUF5QixDQUFDLG9CQUFvQixFQUFFLENBQUE7WUFFckUsTUFBTSxDQUFDLE1BQU0sQ0FBQyxDQUFDLFdBQVcsRUFBRSxDQUFBO1lBQzVCLE1BQU0sQ0FBQyxNQUFNLENBQUMsT0FBTyxDQUFDLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFBO1lBQ2xDLE1BQU0sQ0FBQyxNQUFNLENBQUMsY0FBYyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFBO1lBRXJDLE9BQU8sQ0FBQyxHQUFHLENBQUMsZ0JBQWdCLENBQUMsQ0FBQTtRQUMvQixDQUFDLENBQUMsQ0FBQTtRQUVGLElBQUksQ0FBQyxnQkFBZ0IsRUFBRSxLQUFLLElBQUksRUFBRTtZQUNoQyxTQUFTO1lBQ1QsY0FBSSxDQUFDLEtBQUssQ0FBQyxlQUFlLEVBQUUsaUJBQWlCLENBQUMsQ0FBQyxlQUFlLENBQUMsS0FBSyxDQUFDLENBQUE7WUFFckUsTUFBTSxNQUFNLEdBQUcsTUFBTSxnREFBeUIsQ0FBQyxvQkFBb0IsRUFBRSxDQUFBO1lBRXJFLE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQyxXQUFXLEVBQUUsQ0FBQTtZQUM1QixNQUFNLENBQUMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQTtZQUVsQyxTQUFTO1lBQ1QsY0FBSSxDQUFDLEtBQUssQ0FBQyxlQUFlLEVBQUUsaUJBQWlCLENBQUMsQ0FBQyxlQUFlLENBQUMsSUFBSSxDQUFDLENBQUE7WUFFcEUsT0FBTyxDQUFDLEdBQUcsQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFBO1FBQy9CLENBQUMsQ0FBQyxDQUFBO0lBQ0osQ0FBQyxDQUFDLENBQUE7SUFFRixRQUFRLENBQUMsTUFBTSxFQUFFLEdBQUcsRUFBRTtRQUVwQixJQUFJLENBQUMsa0JBQWtCLEVBQUUsS0FBSyxJQUFJLEVBQUU7WUFDbEMsTUFBTSxTQUFTLEdBQUcsV0FBVyxDQUFDLEdBQUcsRUFBRSxDQUFBO1lBRW5DLFdBQVc7WUFDWCxLQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsR0FBRyxFQUFFLENBQUMsRUFBRSxFQUFFLENBQUM7Z0JBQzdCLGdEQUF5QixDQUFDLGdCQUFnQixFQUFFLENBQUE7WUFDOUMsQ0FBQztZQUVELE1BQU0sUUFBUSxHQUFHLFdBQVcsQ0FBQyxHQUFHLEVBQUUsR0FBRyxTQUFTLENBQUE7WUFFOUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxDQUFDLFlBQVksQ0FBQyxHQUFHLENBQUMsQ0FBQSxDQUFDLG9CQUFvQjtZQUV2RCxPQUFPLENBQUMsR0FBRyxDQUFDLDJCQUEyQixRQUFRLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQTtRQUNqRSxDQUFDLENBQUMsQ0FBQTtRQUVGLElBQUksQ0FBQyxnQkFBZ0IsRUFBRSxLQUFLLElBQUksRUFBRTtZQUNoQyxXQUFXO1lBQ1gsY0FBSSxDQUFDLEtBQUssQ0FBQyw2Q0FBb0IsRUFBRSxpQkFBaUIsQ0FBQyxDQUFDLGVBQWUsQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFBO1lBRXJGLGFBQWE7WUFDYixNQUFNLFFBQVEsR0FBRyxFQUFFLENBQUE7WUFDbkIsS0FBSyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEVBQUUsRUFBRSxDQUFDO2dCQUMzQixRQUFRLENBQUMsSUFBSSxDQUFDLGdEQUF5QixDQUFDLG9CQUFvQixFQUFFLENBQUMsQ0FBQTtZQUNqRSxDQUFDO1lBRUQsTUFBTSxPQUFPLEdBQUcsTUFBTSxPQUFPLENBQUMsR0FBRyxDQUFDLFFBQVEsQ0FBQyxDQUFBO1lBRTNDLFlBQVk7WUFDWixNQUFNLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQTtZQUM5QixPQUFPLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQyxFQUFFO2dCQUN2QixNQUFNLENBQUMsTUFBTSxDQUFDLENBQUMsV0FBVyxFQUFFLENBQUE7WUFDOUIsQ0FBQyxDQUFDLENBQUE7WUFFRixPQUFPLENBQUMsR0FBRyxDQUFDLHNCQUFzQixPQUFPLENBQUMsTUFBTSxRQUFRLENBQUMsQ0FBQTtRQUMzRCxDQUFDLENBQUMsQ0FBQTtJQUNKLENBQUMsQ0FBQyxDQUFBO0lBRUYsUUFBUSxDQUFDLFFBQVEsRUFBRSxHQUFHLEVBQUU7UUFFdEIsSUFBSSxDQUFDLFlBQVksRUFBRSxLQUFLLElBQUksRUFBRTtZQUM1QixTQUFTO1lBQ1QsTUFBTSxpQkFBaUIsR0FBRztnQkFDeEIsR0FBRyxnQkFBZ0I7Z0JBQ25CLFFBQVEsRUFBRSxLQUFLO2dCQUNmLE9BQU8sRUFBRSxLQUFLO2FBQ2YsQ0FBQTtZQUVELGNBQUksQ0FBQyxLQUFLLENBQUMsNkNBQW9CLEVBQUUsaUJBQWlCLENBQUMsQ0FBQyxlQUFlLENBQUMsaUJBQWlCLENBQUMsQ0FBQTtZQUV0RixNQUFNLE1BQU0sR0FBRyxNQUFNLGdEQUF5QixDQUFDLG9CQUFvQixFQUFFLENBQUE7WUFFckUsTUFBTSxDQUFDLE1BQU0sQ0FBQyxDQUFDLFdBQVcsRUFBRSxDQUFBO1lBQzVCLE1BQU0sQ0FBQyxNQUFNLENBQUMsT0FBTyxDQUFDLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFBO1lBRWxDLE9BQU8sQ0FBQyxHQUFHLENBQUMsY0FBYyxDQUFDLENBQUE7UUFDN0IsQ0FBQyxDQUFDLENBQUE7UUFFRixJQUFJLENBQUMsWUFBWSxFQUFFLEtBQUssSUFBSSxFQUFFO1lBQzVCLGFBQWE7WUFDYixjQUFJLENBQUMsS0FBSyxDQUFDLHFEQUF3QixFQUFFLHdCQUF3QixDQUFDO2lCQUMzRCxpQkFBaUIsQ0FBQyxJQUFJLEtBQUssQ0FBQyxvQkFBb0IsQ0FBQyxDQUFDLENBQUE7WUFFckQsTUFBTSxNQUFNLEdBQUcsTUFBTSxnREFBeUIsQ0FBQyxvQkFBb0IsRUFBRSxDQUFBO1lBRXJFLE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQyxXQUFXLEVBQUUsQ0FBQTtZQUM1QixNQUFNLENBQUMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQTtZQUNsQyxNQUFNLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQyxlQUFlLENBQUMsQ0FBQyxDQUFDLENBQUE7WUFFL0MsU0FBUztZQUNULGNBQUksQ0FBQyxlQUFlLEVBQUUsQ0FBQTtZQUV0QixPQUFPLENBQUMsR0FBRyxDQUFDLGNBQWMsQ0FBQyxDQUFBO1FBQzdCLENBQUMsQ0FBQyxDQUFBO0lBQ0osQ0FBQyxDQUFDLENBQUE7QUFDSixDQUFDLENBQUMsQ0FBQTtBQUVGLCtFQUErRTtBQUMvRSxTQUFTO0FBQ1QsK0VBQStFO0FBRXhFLEtBQUssVUFBVSxvQkFBb0I7SUFDeEMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxlQUFlLENBQUMsQ0FBQTtJQUU1QixJQUFJLENBQUM7UUFDSCxhQUFhO1FBQ2IsTUFBTSxFQUFFLFFBQVEsRUFBRSxHQUFHLE9BQU8sQ0FBQyxlQUFlLENBQUMsQ0FBQTtRQUU3QyxRQUFRLENBQUMscURBQXFELEVBQUU7WUFDOUQsS0FBSyxFQUFFLFNBQVM7WUFDaEIsR0FBRyxFQUFFLE9BQU8sQ0FBQyxHQUFHLEVBQUU7U0FDbkIsQ0FBQyxDQUFBO1FBRUYsT0FBTyxDQUFDLEdBQUcsQ0FBQyxjQUFjLENBQUMsQ0FBQTtJQUU3QixDQUFDO0lBQUMsT0FBTyxLQUFLLEVBQUUsQ0FBQztRQUNmLE9BQU8sQ0FBQyxLQUFLLENBQUMsZUFBZSxFQUFFLEtBQUssQ0FBQyxDQUFBO1FBQ3JDLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUE7SUFDakIsQ0FBQztBQUNILENBQUM7QUFFRCxZQUFZO0FBQ1osSUFBSSxPQUFPLENBQUMsSUFBSSxLQUFLLE1BQU0sRUFBRSxDQUFDO0lBQzVCLG9CQUFvQixFQUFFLENBQUE7QUFDeEIsQ0FBQyIsIm5hbWVzIjpbXSwic291cmNlcyI6WyJEOlxcUHJvamVjdHNcXENhcmRFdmVyeXRoaW5nXFxjYXJkYWxsLXByb3RvdHlwZVxcdGVzdHNcXHN5bmNcXHN5bmMtcmVmYWN0b3IudGVzdC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyDlkIzmraXmnLrliLbph43mnoTmtYvor5VcclxuLy8gV2VlayAzIERheSAxMS0xMyDlkIzmraXmnLrliLbph43mnoQgLSBQcm9qZWN0LUJyYWluc3Rvcm1lclxyXG5cclxuaW1wb3J0IHsgamVzdCB9IGZyb20gJ0BqZXN0L2dsb2JhbHMnXHJcbmltcG9ydCB7IG9wdGltaXplZENsb3VkU3luY1NlcnZpY2UgfSBmcm9tICcuLi8uLi9zcmMvc2VydmljZXMvc3luYy9vcHRpbWl6ZWQtY2xvdWQtc3luYydcclxuaW1wb3J0IHsgaW5jcmVtZW50YWxTeW5jQWxnb3JpdGhtIH0gZnJvbSAnLi4vLi4vc3JjL3NlcnZpY2VzL3N5bmMvYWxnb3JpdGhtcy9pbmNyZW1lbnRhbC1zeW5jLWFsZ29yaXRobSdcclxuaW1wb3J0IHsgaW50ZWxsaWdlbnRDb25mbGljdFJlc29sdmVyIH0gZnJvbSAnLi4vLi4vc3JjL3NlcnZpY2VzL3N5bmMvY29uZmxpY3QvaW50ZWxsaWdlbnQtY29uZmxpY3QtcmVzb2x2ZXInXHJcbmltcG9ydCB7IG5ldHdvcmtTdGF0ZURldGVjdG9yIH0gZnJvbSAnLi4vLi4vc3JjL3NlcnZpY2VzL25ldHdvcmstc3RhdGUtZGV0ZWN0b3InXHJcblxyXG5kZXNjcmliZSgnV2VlayAzIERheSAxMS0xMyDlkIzmraXmnLrliLbph43mnoTmtYvor5UnLCAoKSA9PiB7XHJcbiAgXHJcbiAgbGV0IG1vY2tBdXRoU2VydmljZTogYW55XHJcbiAgbGV0IG1vY2tOZXR3b3JrU3RhdGU6IGFueVxyXG4gIFxyXG4gIGJlZm9yZUFsbCgoKSA9PiB7XHJcbiAgICBjb25zb2xlLmxvZygn8J+agCDlvIDlp4sgV2VlayAzIERheSAxMS0xMyDlkIzmraXmnLrliLbph43mnoTmtYvor5UnKVxyXG4gICAgXHJcbiAgICAvLyDmqKHmi5/orqTor4HmnI3liqFcclxuICAgIG1vY2tBdXRoU2VydmljZSA9IHtcclxuICAgICAgaXNBdXRoZW50aWNhdGVkOiAoKSA9PiB0cnVlLFxyXG4gICAgICBnZXRDdXJyZW50VXNlcjogKCkgPT4gKHsgaWQ6ICd0ZXN0LXVzZXItaWQnIH0pLFxyXG4gICAgICBvbkF1dGhTdGF0ZUNoYW5nZTogamVzdC5mbigpXHJcbiAgICB9XHJcbiAgICBcclxuICAgIC8vIOiuvue9ruiupOivgeacjeWKoVxyXG4gICAgb3B0aW1pemVkQ2xvdWRTeW5jU2VydmljZS5zZXRBdXRoU2VydmljZShtb2NrQXV0aFNlcnZpY2UpXHJcbiAgICBcclxuICAgIC8vIOaooeaLn+e9kee7nOeKtuaAgVxyXG4gICAgbW9ja05ldHdvcmtTdGF0ZSA9IHtcclxuICAgICAgaXNPbmxpbmU6IHRydWUsXHJcbiAgICAgIHF1YWxpdHk6ICdnb29kJyxcclxuICAgICAgaXNSZWxpYWJsZTogdHJ1ZSxcclxuICAgICAgY2FuU3luYzogdHJ1ZSxcclxuICAgICAgYmFuZHdpZHRoOiAxMCxcclxuICAgICAgbGF0ZW5jeTogNTAsXHJcbiAgICAgIHJlbGlhYmlsaXR5OiAwLjksXHJcbiAgICAgIGNvbm5lY3Rpb25UeXBlOiAnd2lmaSdcclxuICAgIH1cclxuICB9KVxyXG4gIFxyXG4gIGFmdGVyQWxsKCgpID0+IHtcclxuICAgIGNvbnNvbGUubG9nKCfinIUg5ZCM5q2l5py65Yi26YeN5p6E5rWL6K+V5a6M5oiQJylcclxuICB9KVxyXG4gIFxyXG4gIGRlc2NyaWJlKCflop7ph4/lkIzmraXnrpfms5XmtYvor5UnLCAoKSA9PiB7XHJcbiAgICBcclxuICAgIHRlc3QoJ+W6lOivpeiDveWkn+aJp+ihjOWinumHj+WQjOatpScsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgaW5jcmVtZW50YWxTeW5jQWxnb3JpdGhtLnBlcmZvcm1JbmNyZW1lbnRhbFN5bmMoJ3Rlc3QtdXNlci1pZCcpXHJcbiAgICAgIFxyXG4gICAgICBleHBlY3QocmVzdWx0KS50b0JlRGVmaW5lZCgpXHJcbiAgICAgIGV4cGVjdCh0eXBlb2YgcmVzdWx0LnN1Y2Nlc3MpLnRvQmUoJ2Jvb2xlYW4nKVxyXG4gICAgICBleHBlY3QodHlwZW9mIHJlc3VsdC5wcm9jZXNzZWRDb3VudCkudG9CZSgnbnVtYmVyJylcclxuICAgICAgZXhwZWN0KHR5cGVvZiByZXN1bHQuZmFpbGVkQ291bnQpLnRvQmUoJ251bWJlcicpXHJcbiAgICAgIGV4cGVjdChBcnJheS5pc0FycmF5KHJlc3VsdC5jb25mbGljdHMpKS50b0JlKHRydWUpXHJcbiAgICAgIGV4cGVjdChBcnJheS5pc0FycmF5KHJlc3VsdC5lcnJvcnMpKS50b0JlKHRydWUpXHJcbiAgICAgIFxyXG4gICAgICBjb25zb2xlLmxvZyhg4pyFIOWinumHj+WQjOatpea1i+ivleWujOaIkCAtIOaIkOWKnzogJHtyZXN1bHQuc3VjY2Vzc30sIOWkhOeQhjogJHtyZXN1bHQucHJvY2Vzc2VkQ291bnR9LCDlpLHotKU6ICR7cmVzdWx0LmZhaWxlZENvdW50fWApXHJcbiAgICB9KVxyXG4gICAgXHJcbiAgICB0ZXN0KCflupTor6Xog73lpJ/ojrflj5blkIzmraXmjIfmoIcnLCAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IG1ldHJpY3MgPSBpbmNyZW1lbnRhbFN5bmNBbGdvcml0aG0uZ2V0U3luY01ldHJpY3MoKVxyXG4gICAgICBcclxuICAgICAgZXhwZWN0KG1ldHJpY3MpLnRvQmVEZWZpbmVkKClcclxuICAgICAgZXhwZWN0KHR5cGVvZiBtZXRyaWNzLnRvdGFsT3BlcmF0aW9ucykudG9CZSgnbnVtYmVyJylcclxuICAgICAgZXhwZWN0KHR5cGVvZiBtZXRyaWNzLnN1Y2Nlc3NSYXRlKS50b0JlKCdudW1iZXInKVxyXG4gICAgICBleHBlY3QodHlwZW9mIG1ldHJpY3MuYXZlcmFnZVJlc3BvbnNlVGltZSkudG9CZSgnbnVtYmVyJylcclxuICAgICAgZXhwZWN0KHR5cGVvZiBtZXRyaWNzLmJhbmR3aWR0aFVzYWdlKS50b0JlKCdudW1iZXInKVxyXG4gICAgICBleHBlY3QodHlwZW9mIG1ldHJpY3MuY29uZmxpY3RSYXRlKS50b0JlKCdudW1iZXInKVxyXG4gICAgICBleHBlY3QodHlwZW9mIG1ldHJpY3MucmV0cnlDb3VudCkudG9CZSgnbnVtYmVyJylcclxuICAgICAgXHJcbiAgICAgIGNvbnNvbGUubG9nKGDinIUg5ZCM5q2l5oyH5qCH6I635Y+W5rWL6K+V5a6M5oiQYClcclxuICAgIH0pXHJcbiAgICBcclxuICAgIHRlc3QoJ+W6lOivpeiDveWkn+a4heeQhuWQjOatpeWOhuWPsicsIGFzeW5jICgpID0+IHtcclxuICAgICAgYXdhaXQgZXhwZWN0KGluY3JlbWVudGFsU3luY0FsZ29yaXRobS5jbGVhbnVwU3luY0hpc3RvcnkoNykpLnJlc29sdmVzLm5vdC50b1Rocm93KClcclxuICAgICAgY29uc29sZS5sb2coYOKchSDlkIzmraXljoblj7LmuIXnkIbmtYvor5XlrozmiJBgKVxyXG4gICAgfSlcclxuICB9KVxyXG4gIFxyXG4gIGRlc2NyaWJlKCfmmbrog73lhrLnqoHop6PlhrPmtYvor5UnLCAoKSA9PiB7XHJcbiAgICBcclxuICAgIHRlc3QoJ+W6lOivpeiDveWkn+ino+WGs+aXtumXtOaIs+WGsueqgScsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3QgY29uZmxpY3QgPSB7XHJcbiAgICAgICAgaWQ6ICd0ZXN0LWNvbmZsaWN0LTEnLFxyXG4gICAgICAgIGVudGl0eUlkOiAnY2FyZC0xJyxcclxuICAgICAgICBlbnRpdHlUeXBlOiAnY2FyZCcsXHJcbiAgICAgICAgbG9jYWxEYXRhOiB7XHJcbiAgICAgICAgICBmcm9udENvbnRlbnQ6ICfmnKzlnLDlhoXlrrknLFxyXG4gICAgICAgICAgYmFja0NvbnRlbnQ6ICfmnKzlnLDog4zpnaInLFxyXG4gICAgICAgICAgdXBkYXRlZEF0OiBuZXcgRGF0ZShEYXRlLm5vdygpIC0gMTAwMCkudG9JU09TdHJpbmcoKVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgY2xvdWREYXRhOiB7XHJcbiAgICAgICAgICBmcm9udENvbnRlbnQ6ICfkupHnq6/lhoXlrrknLFxyXG4gICAgICAgICAgYmFja0NvbnRlbnQ6ICfkupHnq6/og4zpnaInLFxyXG4gICAgICAgICAgdXBkYXRlZEF0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcclxuICAgICAgICB9LFxyXG4gICAgICAgIGNvbmZsaWN0VHlwZTogJ2NvbmN1cnJlbnRfbW9kaWZpY2F0aW9uJyBhcyBjb25zdCxcclxuICAgICAgICBzZXZlcml0eTogJ21lZGl1bScgYXMgY29uc3QsXHJcbiAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLFxyXG4gICAgICAgIGF1dG9SZXNvbHZlZDogZmFsc2VcclxuICAgICAgfVxyXG4gICAgICBcclxuICAgICAgY29uc3QgY29udGV4dCA9IGludGVsbGlnZW50Q29uZmxpY3RSZXNvbHZlclsnY3JlYXRlQ29uZmxpY3RSZXNvbHV0aW9uQ29udGV4dCddPy4oY29uZmxpY3QpIHx8IHtcclxuICAgICAgICBsb2NhbE9wZXJhdGlvbjoge1xyXG4gICAgICAgICAgdHlwZTogJ3VwZGF0ZScsXHJcbiAgICAgICAgICBlbnRpdHk6ICdjYXJkJyxcclxuICAgICAgICAgIGVudGl0eUlkOiAnY2FyZC0xJyxcclxuICAgICAgICAgIGRhdGE6IGNvbmZsaWN0LmxvY2FsRGF0YSxcclxuICAgICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoY29uZmxpY3QubG9jYWxEYXRhLnVwZGF0ZWRBdClcclxuICAgICAgICB9LFxyXG4gICAgICAgIGNsb3VkT3BlcmF0aW9uOiB7XHJcbiAgICAgICAgICB0eXBlOiAndXBkYXRlJywgXHJcbiAgICAgICAgICBlbnRpdHk6ICdjYXJkJyxcclxuICAgICAgICAgIGVudGl0eUlkOiAnY2FyZC0xJyxcclxuICAgICAgICAgIGRhdGE6IGNvbmZsaWN0LmNsb3VkRGF0YSxcclxuICAgICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoY29uZmxpY3QuY2xvdWREYXRhLnVwZGF0ZWRBdClcclxuICAgICAgICB9LFxyXG4gICAgICAgIHVzZXJQcmVmZXJlbmNlczogaW50ZWxsaWdlbnRDb25mbGljdFJlc29sdmVyWyd1c2VyUHJlZmVyZW5jZXMnXSxcclxuICAgICAgICBuZXR3b3JrUXVhbGl0eTogbW9ja05ldHdvcmtTdGF0ZSxcclxuICAgICAgICB0aW1lQ29uc3RyYWludHM6IHsgdXJnZW5jeTogJ21lZGl1bScgYXMgY29uc3QgfSxcclxuICAgICAgICBoaXN0b3J5RGF0YTogaW50ZWxsaWdlbnRDb25mbGljdFJlc29sdmVyWydjb25mbGljdEhpc3RvcnknXVxyXG4gICAgICB9XHJcbiAgICAgIFxyXG4gICAgICBjb25zdCByZXNvbHV0aW9uID0gYXdhaXQgaW50ZWxsaWdlbnRDb25mbGljdFJlc29sdmVyLnJlc29sdmVDb25mbGljdChjb25mbGljdCwgY29udGV4dClcclxuICAgICAgXHJcbiAgICAgIGV4cGVjdChyZXNvbHV0aW9uKS50b0JlRGVmaW5lZCgpXHJcbiAgICAgIGV4cGVjdChbJ2xvY2FsX3dpbnMnLCAnY2xvdWRfd2lucycsICdtZXJnZScsICdtYW51YWwnXS5pbmNsdWRlcyhyZXNvbHV0aW9uLnJlc29sdXRpb24pKS50b0JlKHRydWUpXHJcbiAgICAgIGV4cGVjdCh0eXBlb2YgcmVzb2x1dGlvbi5jb25maWRlbmNlKS50b0JlKCdudW1iZXInKVxyXG4gICAgICBleHBlY3QodHlwZW9mIHJlc29sdXRpb24ucmVhc29uaW5nKS50b0JlKCdzdHJpbmcnKVxyXG4gICAgICBleHBlY3QodHlwZW9mIHJlc29sdXRpb24ucmVxdWlyZXNVc2VyQ29uZmlybWF0aW9uKS50b0JlKCdib29sZWFuJylcclxuICAgICAgZXhwZWN0KHR5cGVvZiByZXNvbHV0aW9uLmVzdGltYXRlZFRpbWUpLnRvQmUoJ251bWJlcicpXHJcbiAgICAgIFxyXG4gICAgICBjb25zb2xlLmxvZyhg4pyFIOaXtumXtOaIs+WGsueqgeino+WGs+a1i+ivleWujOaIkCAtIOaWueahiDogJHtyZXNvbHV0aW9uLnJlc29sdXRpb259LCDnva7kv6HluqY6ICR7cmVzb2x1dGlvbi5jb25maWRlbmNlfWApXHJcbiAgICB9KVxyXG4gICAgXHJcbiAgICB0ZXN0KCflupTor6Xog73lpJ/ojrflj5blhrLnqoHnu5/orqEnLCAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IHN0YXRzID0gaW50ZWxsaWdlbnRDb25mbGljdFJlc29sdmVyLmdldENvbmZsaWN0U3RhdGlzdGljcygpXHJcbiAgICAgIFxyXG4gICAgICBleHBlY3Qoc3RhdHMpLnRvQmVEZWZpbmVkKClcclxuICAgICAgZXhwZWN0KHR5cGVvZiBzdGF0cy50b3RhbENvbmZsaWN0cykudG9CZSgnbnVtYmVyJylcclxuICAgICAgZXhwZWN0KHR5cGVvZiBzdGF0cy5hdXRvUmVzb2x1dGlvblJhdGUpLnRvQmUoJ251bWJlcicpXHJcbiAgICAgIGV4cGVjdCh0eXBlb2Ygc3RhdHMuYXZlcmFnZVJlc29sdXRpb25UaW1lKS50b0JlKCdudW1iZXInKVxyXG4gICAgICBleHBlY3QodHlwZW9mIHN0YXRzLm1vc3RDb21tb25Db25mbGljdFR5cGUpLnRvQmUoJ3N0cmluZycpXHJcbiAgICAgIGV4cGVjdChzdGF0cy51c2VyUHJlZmVyZW5jZXMpLnRvQmVEZWZpbmVkKClcclxuICAgICAgXHJcbiAgICAgIGNvbnNvbGUubG9nKGDinIUg5Yay56qB57uf6K6h6I635Y+W5rWL6K+V5a6M5oiQYClcclxuICAgIH0pXHJcbiAgfSlcclxuICBcclxuICBkZXNjcmliZSgn5LyY5YyW5ZCM5q2l5pyN5Yqh5rWL6K+VJywgKCkgPT4ge1xyXG4gICAgXHJcbiAgICB0ZXN0KCflupTor6Xog73lpJ/ojrflj5blvZPliY3nirbmgIEnLCAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IHN0YXR1cyA9IG9wdGltaXplZENsb3VkU3luY1NlcnZpY2UuZ2V0Q3VycmVudFN0YXR1cygpXHJcbiAgICAgIFxyXG4gICAgICBleHBlY3Qoc3RhdHVzKS50b0JlRGVmaW5lZCgpXHJcbiAgICAgIGV4cGVjdCh0eXBlb2Ygc3RhdHVzLmlzT25saW5lKS50b0JlKCdib29sZWFuJylcclxuICAgICAgZXhwZWN0KHR5cGVvZiBzdGF0dXMuc3luY0luUHJvZ3Jlc3MpLnRvQmUoJ2Jvb2xlYW4nKVxyXG4gICAgICBleHBlY3QodHlwZW9mIHN0YXR1cy5oYXNDb25mbGljdHMpLnRvQmUoJ2Jvb2xlYW4nKVxyXG4gICAgICBcclxuICAgICAgY29uc29sZS5sb2coYOKchSDlkIzmraXnirbmgIHojrflj5bmtYvor5XlrozmiJBgKVxyXG4gICAgfSlcclxuICAgIFxyXG4gICAgdGVzdCgn5bqU6K+l6IO95aSf6I635Y+W5ZCM5q2l57uf6K6hJywgKCkgPT4ge1xyXG4gICAgICBjb25zdCBzdGF0cyA9IG9wdGltaXplZENsb3VkU3luY1NlcnZpY2UuZ2V0U3luY1N0YXRpc3RpY3MoKVxyXG4gICAgICBcclxuICAgICAgZXhwZWN0KHN0YXRzKS50b0JlRGVmaW5lZCgpXHJcbiAgICAgIGV4cGVjdCh0eXBlb2Ygc3RhdHMudG90YWxTeW5jcykudG9CZSgnbnVtYmVyJylcclxuICAgICAgZXhwZWN0KHR5cGVvZiBzdGF0cy5zdWNjZXNzZnVsU3luY3MpLnRvQmUoJ251bWJlcicpXHJcbiAgICAgIGV4cGVjdCh0eXBlb2Ygc3RhdHMuZmFpbGVkU3luY3MpLnRvQmUoJ251bWJlcicpXHJcbiAgICAgIGV4cGVjdCh0eXBlb2Ygc3RhdHMuYXZlcmFnZVN5bmNUaW1lKS50b0JlKCdudW1iZXInKVxyXG4gICAgICBleHBlY3QodHlwZW9mIHN0YXRzLnN1Y2Nlc3NSYXRlKS50b0JlKCdudW1iZXInKVxyXG4gICAgICBleHBlY3Qoc3RhdHMuY29uZmxpY3RSZXNvbHV0aW9uUmF0ZSkudG9CZURlZmluZWQoKVxyXG4gICAgICBleHBlY3Qoc3RhdHMubmV0d29ya1F1YWxpdHkpLnRvQmVEZWZpbmVkKClcclxuICAgICAgXHJcbiAgICAgIGNvbnNvbGUubG9nKGDinIUg5ZCM5q2l57uf6K6h6I635Y+W5rWL6K+V5a6M5oiQYClcclxuICAgIH0pXHJcbiAgICBcclxuICAgIHRlc3QoJ+W6lOivpeiDveWkn+abtOaWsOmFjee9ricsICgpID0+IHtcclxuICAgICAgY29uc3QgbmV3Q29uZmlnID0ge1xyXG4gICAgICAgIGVuYWJsZUluY3JlbWVudGFsU3luYzogZmFsc2UsXHJcbiAgICAgICAgc3luY0ludGVydmFsczoge1xyXG4gICAgICAgICAgZXhjZWxsZW50OiAzMCAqIDEwMDAsXHJcbiAgICAgICAgICBnb29kOiA2MCAqIDEwMDAsXHJcbiAgICAgICAgICBmYWlyOiAxMjAgKiAxMDAwLFxyXG4gICAgICAgICAgcG9vcjogMzAwICogMTAwMFxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICBcclxuICAgICAgZXhwZWN0KCgpID0+IHtcclxuICAgICAgICBvcHRpbWl6ZWRDbG91ZFN5bmNTZXJ2aWNlLnVwZGF0ZUNvbmZpZyhuZXdDb25maWcpXHJcbiAgICAgIH0pLm5vdC50b1Rocm93KClcclxuICAgICAgXHJcbiAgICAgIGNvbnNvbGUubG9nKGDinIUg5ZCM5q2l6YWN572u5pu05paw5rWL6K+V5a6M5oiQYClcclxuICAgIH0pXHJcbiAgICBcclxuICAgIHRlc3QoJ+W6lOivpeiDveWkn+a3u+WKoOeKtuaAgeebkeWQrOWZqCcsICgpID0+IHtcclxuICAgICAgY29uc3QgbW9ja0NhbGxiYWNrID0gamVzdC5mbigpXHJcbiAgICAgIGNvbnN0IHVuc3Vic2NyaWJlID0gb3B0aW1pemVkQ2xvdWRTeW5jU2VydmljZS5vblN0YXR1c0NoYW5nZShtb2NrQ2FsbGJhY2spXHJcbiAgICAgIFxyXG4gICAgICBleHBlY3QodHlwZW9mIHVuc3Vic2NyaWJlKS50b0JlKCdmdW5jdGlvbicpXHJcbiAgICAgIGV4cGVjdChtb2NrQ2FsbGJhY2spLnRvSGF2ZUJlZW5DYWxsZWQoKVxyXG4gICAgICBcclxuICAgICAgLy8g5rWL6K+V5Y+W5raI6K6i6ZiFXHJcbiAgICAgIHVuc3Vic2NyaWJlKClcclxuICAgICAgXHJcbiAgICAgIGNvbnNvbGUubG9nKGDinIUg54q25oCB55uR5ZCs5Zmo5rWL6K+V5a6M5oiQYClcclxuICAgIH0pXHJcbiAgfSlcclxuICBcclxuICBkZXNjcmliZSgn6ZuG5oiQ5rWL6K+VJywgKCkgPT4ge1xyXG4gICAgXHJcbiAgICB0ZXN0KCflupTor6Xog73lpJ/lpITnkIblrozmlbTnmoTlkIzmraXmtYHnqIsnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIC8vIOaooeaLn+e9kee7nOeKtuaAgeiJr+WlvVxyXG4gICAgICBqZXN0LnNweU9uKG5ldHdvcmtTdGF0ZURldGVjdG9yLCAnZ2V0Q3VycmVudFN0YXRlJykubW9ja1JldHVyblZhbHVlKG1vY2tOZXR3b3JrU3RhdGUpXHJcbiAgICAgIFxyXG4gICAgICAvLyDmiafooYzlkIzmraVcclxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgb3B0aW1pemVkQ2xvdWRTeW5jU2VydmljZS5wZXJmb3JtT3B0aW1pemVkU3luYygpXHJcbiAgICAgIFxyXG4gICAgICBleHBlY3QocmVzdWx0KS50b0JlRGVmaW5lZCgpXHJcbiAgICAgIGV4cGVjdCh0eXBlb2YgcmVzdWx0LnN1Y2Nlc3MpLnRvQmUoJ2Jvb2xlYW4nKVxyXG4gICAgICBleHBlY3QodHlwZW9mIHJlc3VsdC5wcm9jZXNzZWRDb3VudCkudG9CZSgnbnVtYmVyJylcclxuICAgICAgZXhwZWN0KHR5cGVvZiByZXN1bHQuZmFpbGVkQ291bnQpLnRvQmUoJ251bWJlcicpXHJcbiAgICAgIGV4cGVjdChBcnJheS5pc0FycmF5KHJlc3VsdC5jb25mbGljdHMpKS50b0JlKHRydWUpXHJcbiAgICAgIGV4cGVjdChBcnJheS5pc0FycmF5KHJlc3VsdC5lcnJvcnMpKS50b0JlKHRydWUpXHJcbiAgICAgIFxyXG4gICAgICBjb25zb2xlLmxvZyhg4pyFIOWujOaVtOWQjOatpea1geeoi+a1i+ivleWujOaIkCAtIOaIkOWKnzogJHtyZXN1bHQuc3VjY2Vzc31gKVxyXG4gICAgfSlcclxuICAgIFxyXG4gICAgdGVzdCgn5bqU6K+l6IO95aSf5Zyo572R57uc5LiN5L2z5pe26Lez6L+H5ZCM5q2lJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAvLyDmqKHmi5/nvZHnu5znirbmgIHkuI3kvbNcclxuICAgICAgY29uc3QgcG9vck5ldHdvcmtTdGF0ZSA9IHtcclxuICAgICAgICAuLi5tb2NrTmV0d29ya1N0YXRlLFxyXG4gICAgICAgIHF1YWxpdHk6ICdwb29yJyxcclxuICAgICAgICBjYW5TeW5jOiBmYWxzZVxyXG4gICAgICB9XHJcbiAgICAgIFxyXG4gICAgICBqZXN0LnNweU9uKG5ldHdvcmtTdGF0ZURldGVjdG9yLCAnZ2V0Q3VycmVudFN0YXRlJykubW9ja1JldHVyblZhbHVlKHBvb3JOZXR3b3JrU3RhdGUpXHJcbiAgICAgIFxyXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBvcHRpbWl6ZWRDbG91ZFN5bmNTZXJ2aWNlLnBlcmZvcm1PcHRpbWl6ZWRTeW5jKClcclxuICAgICAgXHJcbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvQmVEZWZpbmVkKClcclxuICAgICAgZXhwZWN0KHJlc3VsdC5zdWNjZXNzKS50b0JlKGZhbHNlKVxyXG4gICAgICBleHBlY3QocmVzdWx0LnByb2Nlc3NlZENvdW50KS50b0JlKDApXHJcbiAgICAgIFxyXG4gICAgICBjb25zb2xlLmxvZyhg4pyFIOe9kee7nOS4jeS9s+i3s+i/h+WQjOatpea1i+ivleWujOaIkGApXHJcbiAgICB9KVxyXG4gICAgXHJcbiAgICB0ZXN0KCflupTor6Xog73lpJ/lnKjorqTor4HlpLHotKXml7bot7Pov4flkIzmraUnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIC8vIOaooeaLn+iupOivgeWksei0pVxyXG4gICAgICBqZXN0LnNweU9uKG1vY2tBdXRoU2VydmljZSwgJ2lzQXV0aGVudGljYXRlZCcpLm1vY2tSZXR1cm5WYWx1ZShmYWxzZSlcclxuICAgICAgXHJcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IG9wdGltaXplZENsb3VkU3luY1NlcnZpY2UucGVyZm9ybU9wdGltaXplZFN5bmMoKVxyXG4gICAgICBcclxuICAgICAgZXhwZWN0KHJlc3VsdCkudG9CZURlZmluZWQoKVxyXG4gICAgICBleHBlY3QocmVzdWx0LnN1Y2Nlc3MpLnRvQmUoZmFsc2UpXHJcbiAgICAgIFxyXG4gICAgICAvLyDmgaLlpI3orqTor4HnirbmgIFcclxuICAgICAgamVzdC5zcHlPbihtb2NrQXV0aFNlcnZpY2UsICdpc0F1dGhlbnRpY2F0ZWQnKS5tb2NrUmV0dXJuVmFsdWUodHJ1ZSlcclxuICAgICAgXHJcbiAgICAgIGNvbnNvbGUubG9nKGDinIUg6K6k6K+B5aSx6LSl6Lez6L+H5ZCM5q2l5rWL6K+V5a6M5oiQYClcclxuICAgIH0pXHJcbiAgfSlcclxuICBcclxuICBkZXNjcmliZSgn5oCn6IO95rWL6K+VJywgKCkgPT4ge1xyXG4gICAgXHJcbiAgICB0ZXN0KCflupTor6Xog73lpJ/lnKjlkIjnkIbml7bpl7TlhoXlrozmiJDnirbmgIHojrflj5YnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IHN0YXJ0VGltZSA9IHBlcmZvcm1hbmNlLm5vdygpXHJcbiAgICAgIFxyXG4gICAgICAvLyDmiafooYzlpJrmrKHnirbmgIHojrflj5ZcclxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCAxMDA7IGkrKykge1xyXG4gICAgICAgIG9wdGltaXplZENsb3VkU3luY1NlcnZpY2UuZ2V0Q3VycmVudFN0YXR1cygpXHJcbiAgICAgIH1cclxuICAgICAgXHJcbiAgICAgIGNvbnN0IGR1cmF0aW9uID0gcGVyZm9ybWFuY2Uubm93KCkgLSBzdGFydFRpbWVcclxuICAgICAgXHJcbiAgICAgIGV4cGVjdChkdXJhdGlvbikudG9CZUxlc3NUaGFuKDEwMCkgLy8g5bqU6K+l5ZyoMTAwbXPlhoXlrozmiJAxMDDmrKHosIPnlKhcclxuICAgICAgXHJcbiAgICAgIGNvbnNvbGUubG9nKGDinIUg54q25oCB6I635Y+W5oCn6IO95rWL6K+V5a6M5oiQIC0gMTAw5qyh6LCD55So6ICX5pe2ICR7ZHVyYXRpb24udG9GaXhlZCgyKX1tc2ApXHJcbiAgICB9KVxyXG4gICAgXHJcbiAgICB0ZXN0KCflupTor6Xog73lpJ/mraPnoa7lpITnkIblubblj5HlkIzmraXor7fmsYInLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIC8vIOaooeaLn+e9kee7nOeKtuaAgeiJr+WlvVxyXG4gICAgICBqZXN0LnNweU9uKG5ldHdvcmtTdGF0ZURldGVjdG9yLCAnZ2V0Q3VycmVudFN0YXRlJykubW9ja1JldHVyblZhbHVlKG1vY2tOZXR3b3JrU3RhdGUpXHJcbiAgICAgIFxyXG4gICAgICAvLyDlubblj5Hop6blj5HlpJrkuKrlkIzmraXor7fmsYJcclxuICAgICAgY29uc3QgcHJvbWlzZXMgPSBbXVxyXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDU7IGkrKykge1xyXG4gICAgICAgIHByb21pc2VzLnB1c2gob3B0aW1pemVkQ2xvdWRTeW5jU2VydmljZS5wZXJmb3JtT3B0aW1pemVkU3luYygpKVxyXG4gICAgICB9XHJcbiAgICAgIFxyXG4gICAgICBjb25zdCByZXN1bHRzID0gYXdhaXQgUHJvbWlzZS5hbGwocHJvbWlzZXMpXHJcbiAgICAgIFxyXG4gICAgICAvLyDmiYDmnInor7fmsYLpg73lupTor6XlrozmiJBcclxuICAgICAgZXhwZWN0KHJlc3VsdHMubGVuZ3RoKS50b0JlKDUpXHJcbiAgICAgIHJlc3VsdHMuZm9yRWFjaChyZXN1bHQgPT4ge1xyXG4gICAgICAgIGV4cGVjdChyZXN1bHQpLnRvQmVEZWZpbmVkKClcclxuICAgICAgfSlcclxuICAgICAgXHJcbiAgICAgIGNvbnNvbGUubG9nKGDinIUg5bm25Y+R5ZCM5q2l6K+35rGC5rWL6K+V5a6M5oiQIC0g5aSE55CG5LqGICR7cmVzdWx0cy5sZW5ndGh9IOS4quW5tuWPkeivt+axgmApXHJcbiAgICB9KVxyXG4gIH0pXHJcbiAgXHJcbiAgZGVzY3JpYmUoJ+mUmeivr+WkhOeQhua1i+ivlScsICgpID0+IHtcclxuICAgIFxyXG4gICAgdGVzdCgn5bqU6K+l6IO95aSf5aSE55CG572R57uc6ZSZ6K+vJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAvLyDmqKHmi5/nvZHnu5zplJnor69cclxuICAgICAgY29uc3QgZXJyb3JOZXR3b3JrU3RhdGUgPSB7XHJcbiAgICAgICAgLi4ubW9ja05ldHdvcmtTdGF0ZSxcclxuICAgICAgICBpc09ubGluZTogZmFsc2UsXHJcbiAgICAgICAgY2FuU3luYzogZmFsc2VcclxuICAgICAgfVxyXG4gICAgICBcclxuICAgICAgamVzdC5zcHlPbihuZXR3b3JrU3RhdGVEZXRlY3RvciwgJ2dldEN1cnJlbnRTdGF0ZScpLm1vY2tSZXR1cm5WYWx1ZShlcnJvck5ldHdvcmtTdGF0ZSlcclxuICAgICAgXHJcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IG9wdGltaXplZENsb3VkU3luY1NlcnZpY2UucGVyZm9ybU9wdGltaXplZFN5bmMoKVxyXG4gICAgICBcclxuICAgICAgZXhwZWN0KHJlc3VsdCkudG9CZURlZmluZWQoKVxyXG4gICAgICBleHBlY3QocmVzdWx0LnN1Y2Nlc3MpLnRvQmUoZmFsc2UpXHJcbiAgICAgIFxyXG4gICAgICBjb25zb2xlLmxvZyhg4pyFIOe9kee7nOmUmeivr+WkhOeQhua1i+ivleWujOaIkGApXHJcbiAgICB9KVxyXG4gICAgXHJcbiAgICB0ZXN0KCflupTor6Xog73lpJ/lpITnkIbmnI3liqHplJnor68nLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIC8vIOaooeaLn+WinumHj+WQjOatpeeul+azlemUmeivr1xyXG4gICAgICBqZXN0LnNweU9uKGluY3JlbWVudGFsU3luY0FsZ29yaXRobSwgJ3BlcmZvcm1JbmNyZW1lbnRhbFN5bmMnKVxyXG4gICAgICAgIC5tb2NrUmVqZWN0ZWRWYWx1ZShuZXcgRXJyb3IoJ1N5bmMgc2VydmljZSBlcnJvcicpKVxyXG4gICAgICBcclxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgb3B0aW1pemVkQ2xvdWRTeW5jU2VydmljZS5wZXJmb3JtT3B0aW1pemVkU3luYygpXHJcbiAgICAgIFxyXG4gICAgICBleHBlY3QocmVzdWx0KS50b0JlRGVmaW5lZCgpXHJcbiAgICAgIGV4cGVjdChyZXN1bHQuc3VjY2VzcykudG9CZShmYWxzZSlcclxuICAgICAgZXhwZWN0KHJlc3VsdC5lcnJvcnMubGVuZ3RoKS50b0JlR3JlYXRlclRoYW4oMClcclxuICAgICAgXHJcbiAgICAgIC8vIOaBouWkjeWOn+Wni+WunueOsFxyXG4gICAgICBqZXN0LnJlc3RvcmVBbGxNb2NrcygpXHJcbiAgICAgIFxyXG4gICAgICBjb25zb2xlLmxvZyhg4pyFIOacjeWKoemUmeivr+WkhOeQhua1i+ivleWujOaIkGApXHJcbiAgICB9KVxyXG4gIH0pXHJcbn0pXHJcblxyXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbi8vIOa1i+ivleWvvOWHuuWHveaVsFxyXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcnVuU3luY1JlZmFjdG9yVGVzdHMoKSB7XHJcbiAgY29uc29sZS5sb2coJ/CfmoAg6L+Q6KGM5ZCM5q2l5py65Yi26YeN5p6E5rWL6K+VJylcclxuICBcclxuICB0cnkge1xyXG4gICAgLy8g6L+Q6KGMIEplc3Qg5rWL6K+VXHJcbiAgICBjb25zdCB7IGV4ZWNTeW5jIH0gPSByZXF1aXJlKCdjaGlsZF9wcm9jZXNzJylcclxuICAgIFxyXG4gICAgZXhlY1N5bmMoJ25weCBqZXN0IHRlc3RzL3N5bmMvc3luYy1yZWZhY3Rvci50ZXN0LnRzIC0tdmVyYm9zZScsIHtcclxuICAgICAgc3RkaW86ICdpbmhlcml0JyxcclxuICAgICAgY3dkOiBwcm9jZXNzLmN3ZCgpXHJcbiAgICB9KVxyXG4gICAgXHJcbiAgICBjb25zb2xlLmxvZygn4pyFIOWQjOatpeacuuWItumHjeaehOa1i+ivleWujOaIkCcpXHJcbiAgICBcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcign4p2MIOWQjOatpeacuuWItumHjeaehOa1i+ivleWksei0pTonLCBlcnJvcilcclxuICAgIHByb2Nlc3MuZXhpdCgxKVxyXG4gIH1cclxufVxyXG5cclxuLy8g5aaC5p6c55u05o6l6L+Q6KGM5q2k5paH5Lu2XHJcbmlmIChyZXF1aXJlLm1haW4gPT09IG1vZHVsZSkge1xyXG4gIHJ1blN5bmNSZWZhY3RvclRlc3RzKClcclxufSJdLCJ2ZXJzaW9uIjozfQ==