b5108b6829b6a9ed1da40b006f61c32b
"use strict";
/**
 * 性能监控服务单元测试
 * 测试性能指标收集、趋势分析、报告生成和监控功能
 */
Object.defineProperty(exports, "__esModule", { value: true });
const performance_monitoring_1 = require("@/services/performance-monitoring");
const test_helpers_1 = require("../utils/test-helpers");
const vitest_1 = require("vitest");
// 模拟数据库服务
const mockDb = {
    cards: {
        count: vitest_1.vi.fn()
    },
    folders: {
        count: vitest_1.vi.fn()
    },
    tags: {
        count: vitest_1.vi.fn()
    },
    images: {
        count: vitest_1.vi.fn()
    }
};
// 模拟查询性能服务
const mockQueryPerformance = {
    getPerformanceStats: vitest_1.vi.fn()
};
// 模拟数据一致性服务
const mockDataConsistency = {
    runQuickCheck: vitest_1.vi.fn()
};
// 模拟导航器存储
const mockStorageEstimate = {
    usage: 1024 * 1024 * 50 // 50MB
};
// 模拟性能内存
const mockPerformanceMemory = {
    usedJSHeapSize: 1024 * 1024 * 25 // 25MB
};
(0, vitest_1.describe)('PerformanceMonitoringService', () => {
    let performanceMonitoringService;
    let restoreDateNow;
    (0, vitest_1.beforeEach)(() => {
        (0, test_helpers_1.cleanupAllMocks)();
        // 设置模拟的时间戳
        const timestamp = 1640995200000; // 2022-01-01 00:00:00
        restoreDateNow = (0, test_helpers_1.mockDateNow)(timestamp);
        // 重置所有mock
        vitest_1.vi.clearAllMocks();
        // 设置默认mock返回值
        mockDb.cards.count.mockResolvedValue(100);
        mockDb.folders.count.mockResolvedValue(10);
        mockDb.tags.count.mockResolvedValue(20);
        mockDb.images.count.mockResolvedValue(50);
        mockQueryPerformance.getPerformanceStats.mockResolvedValue({
            averageQueryTime: 50,
            cacheHitRate: 0.85,
            errorCount: 2,
            warningCount: 5
        });
        mockDataConsistency.runQuickCheck.mockResolvedValue({
            overallScore: 0.95
        });
        // 模拟navigator.storage
        Object.defineProperty(navigator, 'storage', {
            value: {
                estimate: vitest_1.vi.fn().mockResolvedValue(mockStorageEstimate)
            },
            writable: true
        });
        // 模拟performance.memory
        Object.defineProperty(performance, 'memory', {
            value: mockPerformanceMemory,
            writable: true
        });
        // 模拟window.setInterval和clearInterval
        const mockSetInterval = vitest_1.vi.fn().mockReturnValue(1);
        const mockClearInterval = vitest_1.vi.fn();
        Object.defineProperty(window, 'setInterval', { value: mockSetInterval });
        Object.defineProperty(window, 'clearInterval', { value: mockClearInterval });
        // 创建新的服务实例
        performanceMonitoringService = new performance_monitoring_1.PerformanceMonitoringService(mockDb, mockQueryPerformance, mockDataConsistency);
    });
    (0, vitest_1.afterEach)(() => {
        restoreDateNow();
        (0, test_helpers_1.cleanupAllMocks)();
    });
    (0, vitest_1.describe)('Constructor and Configuration', () => {
        (0, vitest_1.test)('should initialize with default config', () => {
            const service = new performance_monitoring_1.PerformanceMonitoringService(mockDb, mockQueryPerformance, mockDataConsistency);
            // 通过私有方法访问配置
            const config = service.config;
            (0, vitest_1.expect)(config.collectionInterval).toBe(5000);
            (0, vitest_1.expect)(config.maxHistorySize).toBe(1000);
            (0, vitest_1.expect)(config.alertThresholds.queryTime).toBe(1000);
            (0, vitest_1.expect)(config.alertThresholds.memoryUsage).toBe(100 * 1024 * 1024);
            (0, vitest_1.expect)(config.autoGenerateReport).toBe(true);
            (0, vitest_1.expect)(config.reportInterval).toBe(24 * 60 * 60 * 1000);
        });
        (0, vitest_1.test)('should merge custom config with defaults', () => {
            const customConfig = {
                collectionInterval: 10000,
                maxHistorySize: 500,
                alertThresholds: {
                    queryTime: 500,
                    memoryUsage: 50 * 1024 * 1024,
                    errorRate: 0.02,
                    cacheHitRate: 0.8
                },
                autoGenerateReport: false,
                reportInterval: 12 * 60 * 60 * 1000
            };
            const service = new performance_monitoring_1.PerformanceMonitoringService(mockDb, mockQueryPerformance, mockDataConsistency, customConfig);
            const config = service.config;
            (0, vitest_1.expect)(config.collectionInterval).toBe(10000);
            (0, vitest_1.expect)(config.maxHistorySize).toBe(500);
            (0, vitest_1.expect)(config.alertThresholds.queryTime).toBe(500);
            (0, vitest_1.expect)(config.alertThresholds.memoryUsage).toBe(50 * 1024 * 1024);
            (0, vitest_1.expect)(config.autoGenerateReport).toBe(false);
            (0, vitest_1.expect)(config.reportInterval).toBe(12 * 60 * 60 * 1000);
        });
        (0, vitest_1.test)('should create singleton instance', () => {
            const instance1 = performance_monitoring_1.PerformanceMonitoringService.getInstance(mockDb, mockQueryPerformance, mockDataConsistency);
            const instance2 = performance_monitoring_1.PerformanceMonitoringService.getInstance(mockDb, mockQueryPerformance, mockDataConsistency);
            (0, vitest_1.expect)(instance1).toBe(instance2);
        });
    });
    (0, vitest_1.describe)('Monitoring Control', () => {
        (0, vitest_1.test)('should start monitoring correctly', () => {
            const service = new performance_monitoring_1.PerformanceMonitoringService(mockDb, mockQueryPerformance, mockDataConsistency);
            service.startMonitoring();
            (0, vitest_1.expect)(service.isMonitoring).toBe(true);
            (0, vitest_1.expect)(window.setInterval).toHaveBeenCalled();
            (0, vitest_1.expect)(window.setInterval).toHaveBeenCalledTimes(2); // monitoring and report intervals
        });
        (0, vitest_1.test)('should stop monitoring correctly', () => {
            const service = new performance_monitoring_1.PerformanceMonitoringService(mockDb, mockQueryPerformance, mockDataConsistency);
            service.startMonitoring();
            service.stopMonitoring();
            (0, vitest_1.expect)(service.isMonitoring).toBe(false);
            (0, vitest_1.expect)(window.clearInterval).toHaveBeenCalledTimes(2);
        });
        (0, vitest_1.test)('should not start monitoring if already running', () => {
            const service = new performance_monitoring_1.PerformanceMonitoringService(mockDb, mockQueryPerformance, mockDataConsistency);
            service.startMonitoring();
            service.startMonitoring(); // 第二次调用
            (0, vitest_1.expect)(window.setInterval).toHaveBeenCalledTimes(2); // 只调用一次
        });
        (0, vitest_1.test)('should not stop monitoring if not running', () => {
            const service = new performance_monitoring_1.PerformanceMonitoringService(mockDb, mockQueryPerformance, mockDataConsistency);
            service.stopMonitoring();
            (0, vitest_1.expect)(window.clearInterval).not.toHaveBeenCalled();
        });
        (0, vitest_1.test)('should restart monitoring when config is updated', () => {
            const service = new performance_monitoring_1.PerformanceMonitoringService(mockDb, mockQueryPerformance, mockDataConsistency);
            service.startMonitoring();
            const clearSpy = vitest_1.vi.spyOn(service, 'stopMonitoring');
            const startSpy = vitest_1.vi.spyOn(service, 'startMonitoring');
            service.updateConfig({ collectionInterval: 10000 });
            (0, vitest_1.expect)(clearSpy).toHaveBeenCalled();
            (0, vitest_1.expect)(startSpy).toHaveBeenCalled();
        });
    });
    (0, vitest_1.describe)('Metrics Collection', () => {
        (0, vitest_1.test)('should collect all metrics correctly', async () => {
            const service = new performance_monitoring_1.PerformanceMonitoringService(mockDb, mockQueryPerformance, mockDataConsistency);
            await service.collectMetrics();
            const metrics = service.getCurrentMetrics();
            (0, vitest_1.expect)(metrics.timestamp).toBe(1640995200000);
            (0, vitest_1.expect)(metrics.databaseSize).toBe(52428800); // 50MB
            (0, vitest_1.expect)(metrics.cardCount).toBe(100);
            (0, vitest_1.expect)(metrics.folderCount).toBe(10);
            (0, vitest_1.expect)(metrics.tagCount).toBe(20);
            (0, vitest_1.expect)(metrics.imageCount).toBe(50);
            (0, vitest_1.expect)(metrics.averageQueryTime).toBe(50);
            (0, vitest_1.expect)(metrics.cacheHitRate).toBe(0.85);
            (0, vitest_1.expect)(metrics.memoryUsage).toBe(26214400); // 25MB
            (0, vitest_1.expect)(metrics.syncStatus).toBe('synced');
            (0, vitest_1.expect)(metrics.consistencyScore).toBe(0.95);
            (0, vitest_1.expect)(metrics.errorCount).toBe(2);
            (0, vitest_1.expect)(metrics.warningCount).toBe(5);
        });
        (0, vitest_1.test)('should handle errors during metric collection', async () => {
            const service = new performance_monitoring_1.PerformanceMonitoringService(mockDb, mockQueryPerformance, mockDataConsistency);
            // 模拟数据库错误
            mockDb.cards.count.mockRejectedValue(new Error('Database error'));
            await service.collectMetrics();
            const metrics = service.getCurrentMetrics();
            // 应该使用默认值或错误处理值
            (0, vitest_1.expect)(metrics.cardCount).toBe(0);
            (0, vitest_1.expect)(metrics.averageQueryTime).toBe(0);
            (0, vitest_1.expect)(metrics.cacheHitRate).toBe(0);
        });
        (0, vitest_1.test)('should handle storage estimate errors', async () => {
            const service = new performance_monitoring_1.PerformanceMonitoringService(mockDb, mockQueryPerformance, mockDataConsistency);
            // 模拟存储API不可用
            Object.defineProperty(navigator, 'storage', {
                value: {
                    estimate: vitest_1.vi.fn().mockRejectedValue(new Error('Storage API not available'))
                },
                writable: true
            });
            await service.collectMetrics();
            const metrics = service.getCurrentMetrics();
            (0, vitest_1.expect)(metrics.databaseSize).toBe(0);
        });
        (0, vitest_1.test)('should handle performance memory errors', async () => {
            const service = new performance_monitoring_1.PerformanceMonitoringService(mockDb, mockQueryPerformance, mockDataConsistency);
            // 模拟性能内存API不可用
            Object.defineProperty(performance, 'memory', {
                value: undefined,
                writable: true
            });
            await service.collectMetrics();
            const metrics = service.getCurrentMetrics();
            (0, vitest_1.expect)(metrics.memoryUsage).toBe(0);
        });
        (0, vitest_1.test)('should limit metrics history size', async () => {
            const service = new performance_monitoring_1.PerformanceMonitoringService(mockDb, mockQueryPerformance, mockDataConsistency, { maxHistorySize: 3 });
            // 收集多次指标
            for (let i = 0; i < 5; i++) {
                await service.collectMetrics();
            }
            const history = service.metricsHistory;
            (0, vitest_1.expect)(history).toHaveLength(3);
            (0, vitest_1.expect)(history[0].timestamp).toBe(1640995200000); // 最旧的
            (0, vitest_1.expect)(history[2].timestamp).toBe(1640995200000); // 最新的
        });
        (0, vitest_1.test)('should check alerts after collecting metrics', async () => {
            const service = new performance_monitoring_1.PerformanceMonitoringService(mockDb, mockQueryPerformance, mockDataConsistency, {
                alertThresholds: {
                    queryTime: 10, // 非常低的阈值
                    memoryUsage: 10 * 1024 * 1024,
                    errorRate: 0.01,
                    cacheHitRate: 0.9
                }
            });
            const consoleWarnSpy = vitest_1.vi.spyOn(console, 'warn');
            await service.collectMetrics();
            (0, vitest_1.expect)(consoleWarnSpy).toHaveBeenCalledWith('性能告警:', vitest_1.expect.arrayContaining([
                '查询时间过长: 50ms',
                '内存使用量过高: 25.00MB',
                '缓存命中率过低: 85.0%'
            ]));
        });
    });
    (0, vitest_1.describe)('Performance Report Generation', () => {
        (0, vitest_1.test)('should generate complete performance report', async () => {
            const service = new performance_monitoring_1.PerformanceMonitoringService(mockDb, mockQueryPerformance, mockDataConsistency);
            // 先收集一些指标
            await service.collectMetrics();
            const report = await service.generateReport();
            (0, vitest_1.expect)(report.reportId).toBeDefined();
            (0, vitest_1.expect)(report.generatedAt).toBe(1640995200000);
            (0, vitest_1.expect)(report.reportPeriod).toBeDefined();
            (0, vitest_1.expect)(report.overallScore).toBeGreaterThanOrEqual(0);
            (0, vitest_1.expect)(report.overallScore).toBeLessThanOrEqual(1);
            (0, vitest_1.expect)(Array.isArray(report.trends)).toBe(true);
            (0, vitest_1.expect)(Array.isArray(report.recommendations)).toBe(true);
            (0, vitest_1.expect)(report.issues).toHaveProperty('critical');
            (0, vitest_1.expect)(report.issues).toHaveProperty('warning');
            (0, vitest_1.expect)(report.issues).toHaveProperty('info');
            (0, vitest_1.expect)(report.optimizations).toHaveProperty('implemented');
            (0, vitest_1.expect)(report.optimizations).toHaveProperty('suggested');
            (0, vitest_1.expect)(report.summary).toHaveProperty('healthStatus');
            (0, vitest_1.expect)(report.summary).toHaveProperty('keyFindings');
            (0, vitest_1.expect)(report.summary).toHaveProperty('nextSteps');
        });
        (0, vitest_1.test)('should handle empty metrics history', async () => {
            const service = new performance_monitoring_1.PerformanceMonitoringService(mockDb, mockQueryPerformance, mockDataConsistency);
            const report = await service.generateReport();
            (0, vitest_1.expect)(report.overallScore).toBe(0); // 基于空指标
            (0, vitest_1.expect)(report.trends).toEqual([]);
        });
        (0, vitest_1.test)('should generate appropriate recommendations', async () => {
            const service = new performance_monitoring_1.PerformanceMonitoringService(mockDb, mockQueryPerformance, mockDataConsistency);
            // 设置不良指标以触发建议
            mockQueryPerformance.getPerformanceStats.mockResolvedValue({
                averageQueryTime: 600, // 慢查询
                cacheHitRate: 0.6, // 低缓存命中率
                errorCount: 15, // 高错误计数
                warningCount: 10
            });
            mockDataConsistency.runQuickCheck.mockResolvedValue({
                overallScore: 0.7 // 中等一致性
            });
            // 模拟高内存使用
            Object.defineProperty(performance, 'memory', {
                value: { usedJSHeapSize: 60 * 1024 * 1024 }, // 60MB
                writable: true
            });
            await service.collectMetrics();
            const report = await service.generateReport();
            (0, vitest_1.expect)(report.recommendations.length).toBeGreaterThan(0);
            (0, vitest_1.expect)(report.recommendations).toEqual(vitest_1.expect.arrayContaining([
                vitest_1.expect.stringContaining('优化查询或增加索引'),
                vitest_1.expect.stringContaining('调整缓存策略'),
                vitest_1.expect.stringContaining('清理不必要的数据'),
                vitest_1.expect.stringContaining('运行数据一致性检查')
            ]));
        });
        (0, vitest_1.test)('should analyze issues correctly', async () => {
            const service = new performance_monitoring_1.PerformanceMonitoringService(mockDb, mockQueryPerformance, mockDataConsistency);
            // 设置严重问题指标
            mockQueryPerformance.getPerformanceStats.mockResolvedValue({
                averageQueryTime: 2500, // 非常慢
                cacheHitRate: 0.3,
                errorCount: 25,
                warningCount: 15
            });
            mockDataConsistency.runQuickCheck.mockResolvedValue({
                overallScore: 0.3 // 低一致性
            });
            await service.collectMetrics();
            const report = await service.generateReport();
            (0, vitest_1.expect)(report.issues.critical).toEqual(vitest_1.expect.arrayContaining([
                '查询性能严重下降',
                '数据一致性严重受损'
            ]));
            (0, vitest_1.expect)(report.issues.warning.length).toBeGreaterThan(0);
        });
        (0, vitest_1.test)('should calculate overall score correctly', async () => {
            const service = new performance_monitoring_1.PerformanceMonitoringService(mockDb, mockQueryPerformance, mockDataConsistency);
            // 设置优秀指标
            mockQueryPerformance.getPerformanceStats.mockResolvedValue({
                averageQueryTime: 50, // 快查询
                cacheHitRate: 0.95, // 高缓存命中率
                errorCount: 0,
                warningCount: 0
            });
            mockDataConsistency.runQuickCheck.mockResolvedValue({
                overallScore: 0.99 // 高一致性
            });
            // 模拟低内存使用
            Object.defineProperty(performance, 'memory', {
                value: { usedJSHeapSize: 10 * 1024 * 1024 }, // 10MB
                writable: true
            });
            await service.collectMetrics();
            const report = await service.generateReport();
            (0, vitest_1.expect)(report.overallScore).toBeGreaterThan(0.8); // 应该有很高的分数
        });
        (0, vitest_1.test)('should save report after generation', async () => {
            const service = new performance_monitoring_1.PerformanceMonitoringService(mockDb, mockQueryPerformance, mockDataConsistency);
            const saveSpy = vitest_1.vi.spyOn(service, 'saveReport');
            await service.generateReport();
            (0, vitest_1.expect)(saveSpy).toHaveBeenCalled();
        });
    });
    (0, vitest_1.describe)('Trend Analysis', () => {
        (0, vitest_1.test)('should calculate trends correctly with multiple data points', async () => {
            const service = new performance_monitoring_1.PerformanceMonitoringService(mockDb, mockQueryPerformance, mockDataConsistency);
            // 模拟多个时间点的数据
            const timestamps = [
                1640995200000, // 2022-01-01
                1640995260000, // 2022-01-01 + 1分钟
                1640995320000, // 2022-01-01 + 2分钟
            ];
            const restoreTimestamps = timestamps.map(timestamp => (0, test_helpers_1.mockDateNow)(timestamp));
            for (const timestamp of timestamps) {
                (0, test_helpers_1.mockDateNow)(timestamp);
                await service.collectMetrics();
            }
            restoreTimestamps.forEach(restore => restore());
            const trends = service.getPerformanceTrends();
            (0, vitest_1.expect)(trends.length).toBeGreaterThan(0);
            trends.forEach(trend => {
                (0, vitest_1.expect)(trend.metric).toBeDefined();
                (0, vitest_1.expect)(trend.values).toHaveLength(3);
                (0, vitest_1.expect)(trend.timestamps).toHaveLength(3);
                (0, vitest_1.expect)(['improving', 'stable', 'declining']).toContain(trend.trend);
                (0, vitest_1.expect)(typeof trend.changeRate).toBe('number');
            });
        });
        (0, vitest_1.test)('should filter trends by metric name', async () => {
            const service = new performance_monitoring_1.PerformanceMonitoringService(mockDb, mockQueryPerformance, mockDataConsistency);
            await service.collectMetrics();
            await service.collectMetrics();
            const allTrends = service.getPerformanceTrends();
            const queryTimeTrends = service.getPerformanceTrends('averageQueryTime');
            (0, vitest_1.expect)(queryTimeTrends.length).toBeLessThanOrEqual(allTrends.length);
            if (queryTimeTrends.length > 0) {
                (0, vitest_1.expect)(queryTimeTrends[0].metric).toBe('averageQueryTime');
            }
        });
        (0, vitest_1.test)('should calculate trend direction correctly', () => {
            const service = new performance_monitoring_1.PerformanceMonitoringService(mockDb, mockQueryPerformance, mockDataConsistency);
            // 测试改善趋势
            const improvingValues = [10, 20, 30, 40, 50];
            const improvingTrend = service.calculateTrendDirection(improvingValues);
            (0, vitest_1.expect)(improvingTrend).toBe('improving');
            // 测试下降趋势
            const decliningValues = [50, 40, 30, 20, 10];
            const decliningTrend = service.calculateTrendDirection(decliningValues);
            (0, vitest_1.expect)(decliningTrend).toBe('declining');
            // 测试稳定趋势
            const stableValues = [50, 51, 49, 50, 51];
            const stableTrend = service.calculateTrendDirection(stableValues);
            (0, vitest_1.expect)(stableTrend).toBe('stable');
        });
        (0, vitest_1.test)('should calculate change rate correctly', () => {
            const service = new performance_monitoring_1.PerformanceMonitoringService(mockDb, mockQueryPerformance, mockDataConsistency);
            const values = [100, 120];
            const changeRate = service.calculateChangeRate(values);
            (0, vitest_1.expect)(changeRate).toBe(0.2); // 20%增长
            const decreasingValues = [120, 100];
            const decreasingRate = service.calculateChangeRate(decreasingValues);
            (0, vitest_1.expect)(decreasingRate).toBeCloseTo(-0.167, 3); // 约16.7%下降
        });
    });
    (0, vitest_1.describe)('Health Status', () => {
        (0, vitest_1.test)('should determine health status correctly', async () => {
            const service = new performance_monitoring_1.PerformanceMonitoringService(mockDb, mockQueryPerformance, mockDataConsistency);
            // 优秀状态
            mockQueryPerformance.getPerformanceStats.mockResolvedValue({
                averageQueryTime: 50,
                cacheHitRate: 0.95,
                errorCount: 0,
                warningCount: 0
            });
            await service.collectMetrics();
            let healthStatus = service.getHealthStatus();
            (0, vitest_1.expect)(healthStatus).toBe('healthy');
            // 良好状态
            mockQueryPerformance.getPerformanceStats.mockResolvedValue({
                averageQueryTime: 200,
                cacheHitRate: 0.8,
                errorCount: 5,
                warningCount: 10
            });
            await service.collectMetrics();
            healthStatus = service.getHealthStatus();
            (0, vitest_1.expect)(['healthy', 'warning'].includes(healthStatus)).toBe(true);
            // 警告状态
            mockQueryPerformance.getPerformanceStats.mockResolvedValue({
                averageQueryTime: 800,
                cacheHitRate: 0.6,
                errorCount: 15,
                warningCount: 20
            });
            await service.collectMetrics();
            healthStatus = service.getHealthStatus();
            (0, vitest_1.expect)(healthStatus).toBe('warning');
            // 严重状态
            mockQueryPerformance.getPerformanceStats.mockResolvedValue({
                averageQueryTime: 3000,
                cacheHitRate: 0.3,
                errorCount: 50,
                warningCount: 100
            });
            await service.collectMetrics();
            healthStatus = service.getHealthStatus();
            (0, vitest_1.expect)(healthStatus).toBe('critical');
        });
    });
    (0, vitest_1.describe)('Performance Statistics', () => {
        (0, vitest_1.test)('should return complete performance stats', async () => {
            const service = new performance_monitoring_1.PerformanceMonitoringService(mockDb, mockQueryPerformance, mockDataConsistency);
            await service.collectMetrics();
            const stats = service.getPerformanceStats();
            (0, vitest_1.expect)(stats).toHaveProperty('currentMetrics');
            (0, vitest_1.expect)(stats).toHaveProperty('healthStatus');
            (0, vitest_1.expect)(stats).toHaveProperty('trends');
            (0, vitest_1.expect)(stats).toHaveProperty('alerts');
            (0, vitest_1.expect)(typeof stats.currentMetrics).toBe('object');
            (0, vitest_1.expect)(typeof stats.healthStatus).toBe('string');
            (0, vitest_1.expect)(Array.isArray(stats.trends)).toBe(true);
            (0, vitest_1.expect)(Array.isArray(stats.alerts)).toBe(true);
        });
        (0, vitest_1.test)('should generate alerts based on thresholds', async () => {
            const service = new performance_monitoring_1.PerformanceMonitoringService(mockDb, mockQueryPerformance, mockDataConsistency, {
                alertThresholds: {
                    queryTime: 100, // 低阈值
                    memoryUsage: 20 * 1024 * 1024, // 20MB
                    errorRate: 0.05,
                    cacheHitRate: 0.9 // 高阈值
                }
            });
            await service.collectMetrics();
            const stats = service.getPerformanceStats();
            const alerts = stats.alerts;
            (0, vitest_1.expect)(alerts.length).toBeGreaterThan(0);
            (0, vitest_1.expect)(alerts.some(alert => alert.includes('查询时间超过阈值'))).toBe(true);
            (0, vitest_1.expect)(alerts.some(alert => alert.includes('内存使用超过阈值'))).toBe(true);
            (0, vitest_1.expect)(alerts.some(alert => alert.includes('缓存命中率低于阈值'))).toBe(true);
        });
    });
    (0, vitest_1.describe)('Data Management', () => {
        (0, vitest_1.test)('should export performance data correctly', () => {
            const service = new performance_monitoring_1.PerformanceMonitoringService(mockDb, mockQueryPerformance, mockDataConsistency);
            const exportData = service.exportPerformanceData();
            const parsedData = JSON.parse(exportData);
            (0, vitest_1.expect)(parsedData).toHaveProperty('config');
            (0, vitest_1.expect)(parsedData).toHaveProperty('metrics');
            (0, vitest_1.expect)(parsedData).toHaveProperty('exportTime');
            (0, vitest_1.expect)(parsedData).toHaveProperty('version');
            (0, vitest_1.expect)(parsedData.version).toBe('3.0.0');
            (0, vitest_1.expect)(Array.isArray(parsedData.metrics)).toBe(true);
        });
        (0, vitest_1.test)('should clear history correctly', () => {
            const service = new performance_monitoring_1.PerformanceMonitoringService(mockDb, mockQueryPerformance, mockDataConsistency);
            service.metricsHistory = [
                { timestamp: 1, databaseSize: 1000 },
                { timestamp: 2, databaseSize: 2000 }
            ];
            service.clearHistory();
            (0, vitest_1.expect)(service.metricsHistory).toEqual([]);
        });
        (0, vitest_1.test)('should return metrics history with limit', async () => {
            const service = new performance_monitoring_1.PerformanceMonitoringService(mockDb, mockQueryPerformance, mockDataConsistency, { maxHistorySize: 5 });
            // 收集多个指标
            for (let i = 0; i < 10; i++) {
                (0, test_helpers_1.mockDateNow)(1640995200000 + i * 1000);
                await service.collectMetrics();
            }
            const limitedHistory = service.getMetricsHistory(3);
            const fullHistory = service.getMetricsHistory();
            (0, vitest_1.expect)(limitedHistory).toHaveLength(3);
            (0, vitest_1.expect)(fullHistory).toHaveLength(5); // 受maxHistorySize限制
        });
    });
    (0, vitest_1.describe)('Utility Functions', () => {
        (0, vitest_1.test)('should format bytes correctly', () => {
            const service = new performance_monitoring_1.PerformanceMonitoringService(mockDb, mockQueryPerformance, mockDataConsistency);
            const formatBytes = service.formatBytes;
            (0, vitest_1.expect)(formatBytes(0)).toBe('0 Bytes');
            (0, vitest_1.expect)(formatBytes(1024)).toBe('1.00 KB');
            (0, vitest_1.expect)(formatBytes(1024 * 1024)).toBe('1.00 MB');
            (0, vitest_1.expect)(formatBytes(1024 * 1024 * 1024)).toBe('1.00 GB');
            (0, vitest_1.expect)(formatBytes(1500)).toBe('1.46 KB');
            (0, vitest_1.expect)(formatBytes(1024 * 1024 * 1.5)).toBe('1.50 MB');
        });
        (0, vitest_1.test)('should handle empty metrics gracefully', () => {
            const service = new performance_monitoring_1.PerformanceMonitoringService(mockDb, mockQueryPerformance, mockDataConsistency);
            const emptyMetrics = service.getEmptyMetrics();
            (0, vitest_1.expect)(emptyMetrics.databaseSize).toBe(0);
            (0, vitest_1.expect)(emptyMetrics.cardCount).toBe(0);
            (0, vitest_1.expect)(emptyMetrics.averageQueryTime).toBe(0);
            (0, vitest_1.expect)(emptyMetrics.syncStatus).toBe('unknown');
        });
        (0, vitest_1.test)('should generate report ID correctly', () => {
            const service = new performance_monitoring_1.PerformanceMonitoringService(mockDb, mockQueryPerformance, mockDataConsistency);
            const reportId = service.generateReportId();
            (0, vitest_1.expect)(reportId).toMatch(/^perf_\d+_[a-z0-9]{9}$/);
        });
    });
    (0, vitest_1.describe)('Error Handling', () => {
        (0, vitest_1.test)('should handle database errors gracefully', async () => {
            const service = new performance_monitoring_1.PerformanceMonitoringService(mockDb, mockQueryPerformance, mockDataConsistency);
            mockDb.cards.count.mockRejectedValue(new Error('Database connection failed'));
            const consoleErrorSpy = vitest_1.vi.spyOn(console, 'error');
            await service.collectMetrics();
            (0, vitest_1.expect)(consoleErrorSpy).toHaveBeenCalledWith('收集性能指标失败:', vitest_1.expect.any(Error));
        });
        (0, vitest_1.test)('should handle service dependency errors', async () => {
            const service = new performance_monitoring_1.PerformanceMonitoringService(mockDb, mockQueryPerformance, mockDataConsistency);
            mockQueryPerformance.getPerformanceStats.mockRejectedValue(new Error('Service unavailable'));
            await service.collectMetrics();
            const metrics = service.getCurrentMetrics();
            (0, vitest_1.expect)(metrics.averageQueryTime).toBe(0);
            (0, vitest_1.expect)(metrics.cacheHitRate).toBe(0);
            (0, vitest_1.expect)(metrics.errorCount).toBe(0);
        });
        (0, vitest_1.test)('should handle report generation errors', async () => {
            const service = new performance_monitoring_1.PerformanceMonitoringService(mockDb, mockQueryPerformance, mockDataConsistency);
            service.metricsHistory = null;
            const consoleErrorSpy = vitest_1.vi.spyOn(console, 'error');
            await (0, vitest_1.expect)(service.generateReport()).rejects.toThrow();
            (0, vitest_1.expect)(consoleErrorSpy).toHaveBeenCalled();
        });
    });
    (0, vitest_1.describe)('Performance Tests', () => {
        (0, vitest_1.test)('should handle large datasets efficiently', async () => {
            const service = new performance_monitoring_1.PerformanceMonitoringService(mockDb, mockQueryPerformance, mockDataConsistency, { maxHistorySize: 10000 });
            const startTime = performance.now();
            // 模拟大量数据收集
            for (let i = 0; i < 1000; i++) {
                (0, test_helpers_1.mockDateNow)(1640995200000 + i * 1000);
                await service.collectMetrics();
            }
            const endTime = performance.now();
            const duration = endTime - startTime;
            (0, vitest_1.expect)(duration).toBeLessThan(5000); // 应该在5秒内完成
            const history = service.getMetricsHistory();
            (0, vitest_1.expect)(history).toHaveLength(1000);
        });
        (0, vitest_1.test)('should generate report with many data points efficiently', async () => {
            const service = new performance_monitoring_1.PerformanceMonitoringService(mockDb, mockQueryPerformance, mockDataConsistency, { maxHistorySize: 1000 });
            // 添加大量历史数据
            for (let i = 0; i < 500; i++) {
                ;
                service.metricsHistory.push({
                    timestamp: 1640995200000 + i * 1000,
                    databaseSize: i * 1000,
                    cardCount: i,
                    averageQueryTime: 50 + Math.random() * 100,
                    cacheHitRate: 0.8 + Math.random() * 0.2,
                    memoryUsage: 1024 * 1024 * (10 + Math.random() * 40),
                    syncStatus: 'synced',
                    consistencyScore: 0.8 + Math.random() * 0.2,
                    errorCount: Math.floor(Math.random() * 10),
                    warningCount: Math.floor(Math.random() * 20),
                });
            }
            const startTime = performance.now();
            const report = await service.generateReport();
            const endTime = performance.now();
            const duration = endTime - startTime;
            (0, vitest_1.expect)(duration).toBeLessThan(1000); // 应该在1秒内完成
            (0, vitest_1.expect)(report.trends.length).toBeGreaterThan(0);
        });
        (0, vitest_1.test)('should handle concurrent metric collection', async () => {
            const service = new performance_monitoring_1.PerformanceMonitoringService(mockDb, mockQueryPerformance, mockDataConsistency);
            // 模拟并发收集
            const collectionPromises = Array.from({ length: 10 }, () => service.collectMetrics());
            await Promise.all(collectionPromises);
            const history = service.getMetricsHistory();
            (0, vitest_1.expect)(history).toHaveLength(10);
        });
    });
    (0, vitest_1.describe)('Edge Cases', () => {
        (0, vitest_1.test)('should handle single data point in trends', async () => {
            const service = new performance_monitoring_1.PerformanceMonitoringService(mockDb, mockQueryPerformance, mockDataConsistency);
            await service.collectMetrics();
            const trends = service.getPerformanceTrends();
            (0, vitest_1.expect)(trends).toEqual([]);
        });
        (0, vitest_1.test)('should handle very large memory usage', async () => {
            const service = new performance_monitoring_1.PerformanceMonitoringService(mockDb, mockQueryPerformance, mockDataConsistency);
            Object.defineProperty(performance, 'memory', {
                value: { usedJSHeapSize: 1024 * 1024 * 1024 * 2 }, // 2GB
                writable: true
            });
            await service.collectMetrics();
            const metrics = service.getCurrentMetrics();
            (0, vitest_1.expect)(metrics.memoryUsage).toBe(2147483648);
        });
        (0, vitest_1.test)('should handle negative values in metrics', async () => {
            const service = new performance_monitoring_1.PerformanceMonitoringService(mockDb, mockQueryPerformance, mockDataConsistency);
            // 模拟异常数据
            mockQueryPerformance.getPerformanceStats.mockResolvedValue({
                averageQueryTime: -50, // 异常值
                cacheHitRate: -0.1, // 异常值
                errorCount: -5, // 异常值
                warningCount: 10
            });
            await service.collectMetrics();
            const score = service.calculateOverallScore(service.getCurrentMetrics());
            (0, vitest_1.expect)(score).toBeGreaterThanOrEqual(0);
            (0, vitest_1.expect)(score).toBeLessThanOrEqual(1);
        });
    });
    (0, vitest_1.describe)('Cleanup and Destruction', () => {
        (0, vitest_1.test)('should clean up properly on destroy', () => {
            const service = new performance_monitoring_1.PerformanceMonitoringService(mockDb, mockQueryPerformance, mockDataConsistency);
            service.startMonitoring();
            service.metricsHistory = [{ timestamp: 1, databaseSize: 1000 }];
            service.destroy();
            (0, vitest_1.expect)(service.isMonitoring).toBe(false);
            (0, vitest_1.expect)(service.metricsHistory).toEqual([]);
            (0, vitest_1.expect)(performance_monitoring_1.PerformanceMonitoringService.getInstance).toBeNull();
        });
        (0, vitest_1.test)('should handle multiple destroy calls safely', () => {
            const service = new performance_monitoring_1.PerformanceMonitoringService(mockDb, mockQueryPerformance, mockDataConsistency);
            service.destroy();
            service.destroy(); // 第二次调用
            // 应该不会抛出错误
            (0, vitest_1.expect)(true).toBe(true);
        });
    });
});
(0, vitest_1.describe)('Convenience Functions', () => {
    (0, vitest_1.test)('createPerformanceMonitoring should return singleton instance', () => {
        const instance1 = global.createPerformanceMonitoring(mockDb, mockQueryPerformance, mockDataConsistency);
        const instance2 = global.createPerformanceMonitoring(mockDb, mockQueryPerformance, mockDataConsistency);
        (0, vitest_1.expect)(instance1).toBe(instance2);
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiRDpcXFByb2plY3RzXFxDYXJkRXZlcnl0aGluZ1xcY2FyZGFsbC1wcm90b3R5cGVcXHNyY1xcX190ZXN0c19fXFxzZXJ2aWNlc1xccGVyZm9ybWFuY2UtbW9uaXRvcmluZy50ZXN0LnRzIiwibWFwcGluZ3MiOiI7QUFBQTs7O0dBR0c7O0FBRUgsOEVBQWdGO0FBU2hGLHdEQUs4QjtBQUM5QixtQ0FBMEU7QUFFMUUsVUFBVTtBQUNWLE1BQU0sTUFBTSxHQUFHO0lBQ2IsS0FBSyxFQUFFO1FBQ0wsS0FBSyxFQUFFLFdBQUUsQ0FBQyxFQUFFLEVBQUU7S0FDZjtJQUNELE9BQU8sRUFBRTtRQUNQLEtBQUssRUFBRSxXQUFFLENBQUMsRUFBRSxFQUFFO0tBQ2Y7SUFDRCxJQUFJLEVBQUU7UUFDSixLQUFLLEVBQUUsV0FBRSxDQUFDLEVBQUUsRUFBRTtLQUNmO0lBQ0QsTUFBTSxFQUFFO1FBQ04sS0FBSyxFQUFFLFdBQUUsQ0FBQyxFQUFFLEVBQUU7S0FDZjtDQUNGLENBQUE7QUFFRCxXQUFXO0FBQ1gsTUFBTSxvQkFBb0IsR0FBRztJQUMzQixtQkFBbUIsRUFBRSxXQUFFLENBQUMsRUFBRSxFQUFFO0NBQzdCLENBQUE7QUFFRCxZQUFZO0FBQ1osTUFBTSxtQkFBbUIsR0FBRztJQUMxQixhQUFhLEVBQUUsV0FBRSxDQUFDLEVBQUUsRUFBRTtDQUN2QixDQUFBO0FBRUQsVUFBVTtBQUNWLE1BQU0sbUJBQW1CLEdBQUc7SUFDMUIsS0FBSyxFQUFFLElBQUksR0FBRyxJQUFJLEdBQUcsRUFBRSxDQUFDLE9BQU87Q0FDaEMsQ0FBQTtBQUVELFNBQVM7QUFDVCxNQUFNLHFCQUFxQixHQUFHO0lBQzVCLGNBQWMsRUFBRSxJQUFJLEdBQUcsSUFBSSxHQUFHLEVBQUUsQ0FBQyxPQUFPO0NBQ3pDLENBQUE7QUFFRCxJQUFBLGlCQUFRLEVBQUMsOEJBQThCLEVBQUUsR0FBRyxFQUFFO0lBQzVDLElBQUksNEJBQTBELENBQUE7SUFDOUQsSUFBSSxjQUEwQixDQUFBO0lBRTlCLElBQUEsbUJBQVUsRUFBQyxH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QUFDLENBQUMsUUFBUSxFQUFFLENBQUE7UUFDN0QsQ0FBQyxDQUFDLENBQUE7UUFFRixJQUFBLGFBQUksRUFBQyw2Q0FBNkMsRUFBRSxHQUFHLEVBQUU7WUFDdkQsTUFBTSxPQUFPLEdBQUcsSUFBSSxxREFBNEIsQ0FDOUMsTUFBYSxFQUNiLG9CQUEyQixFQUMzQixtQkFBMEIsQ0FDM0IsQ0FBQTtZQUVELE9BQU8sQ0FBQyxPQUFPLEVBQUUsQ0FBQTtZQUNqQixPQUFPLENBQUMsT0FBTyxFQUFFLENBQUEsQ0FBQyxRQUFRO1lBRTFCLFdBQVc7WUFDWCxJQUFBLGVBQU0sRUFBQyxJQUFJLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUE7UUFDekIsQ0FBQyxDQUFDLENBQUE7SUFDSixDQUFDLENBQUMsQ0FBQTtBQUNKLENBQUMsQ0FBQyxDQUFBO0FBRUYsSUFBQSxpQkFBUSxFQUFDLHVCQUF1QixFQUFFLEdBQUcsRUFBRTtJQUNyQyxJQUFBLGFBQUksRUFBQyw4REFBOEQsRUFBRSxHQUFHLEVBQUU7UUFDeEUsTUFBTSxTQUFTLEdBQUksTUFBYyxDQUFDLDJCQUEyQixDQUMzRCxNQUFNLEVBQ04sb0JBQW9CLEVBQ3BCLG1CQUFtQixDQUNwQixDQUFBO1FBRUQsTUFBTSxTQUFTLEdBQUksTUFBYyxDQUFDLDJCQUEyQixDQUMzRCxNQUFNLEVBQ04sb0JBQW9CLEVBQ3BCLG1CQUFtQixDQUNwQixDQUFBO1FBRUQsSUFBQSxlQUFNLEVBQUMsU0FBUyxDQUFDLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxDQUFBO0lBQ25DLENBQUMsQ0FBQyxDQUFBO0FBQ0osQ0FBQyxDQUFDLENBQUEiLCJuYW1lcyI6W10sInNvdXJjZXMiOlsiRDpcXFByb2plY3RzXFxDYXJkRXZlcnl0aGluZ1xcY2FyZGFsbC1wcm90b3R5cGVcXHNyY1xcX190ZXN0c19fXFxzZXJ2aWNlc1xccGVyZm9ybWFuY2UtbW9uaXRvcmluZy50ZXN0LnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICog5oCn6IO955uR5o6n5pyN5Yqh5Y2V5YWD5rWL6K+VXG4gKiDmtYvor5XmgKfog73mjIfmoIfmlLbpm4bjgIHotovlir/liIbmnpDjgIHmiqXlkYrnlJ/miJDlkoznm5Hmjqflip/og71cbiAqL1xuXG5pbXBvcnQgeyBQZXJmb3JtYW5jZU1vbml0b3JpbmdTZXJ2aWNlIH0gZnJvbSAnQC9zZXJ2aWNlcy9wZXJmb3JtYW5jZS1tb25pdG9yaW5nJ1xuaW1wb3J0IHtcbiAgUGVyZm9ybWFuY2VNZXRyaWNzLFxuICBQZXJmb3JtYW5jZVRyZW5kLFxuICBQZXJmb3JtYW5jZVJlcG9ydCxcbiAgTW9uaXRvcmluZ0NvbmZpZyxcbiAgRGF0YWJhc2VIZWFsdGhTdGF0dXNcbn0gZnJvbSAnQC9zZXJ2aWNlcy9wZXJmb3JtYW5jZS1tb25pdG9yaW5nJ1xuaW1wb3J0IHsgcGVyZm9ybWFuY2VUZXN0RGF0YSB9IGZyb20gJy4uL2ZpeHR1cmVzL3Rlc3QtZGF0YSdcbmltcG9ydCB7XG4gIG1vY2tEYXRlTm93LFxuICBjbGVhbnVwQWxsTW9ja3MsXG4gIG1vY2tQcm9taXNlUmVzb2x2ZSxcbiAgbW9ja1Byb21pc2VSZWplY3Rcbn0gZnJvbSAnLi4vdXRpbHMvdGVzdC1oZWxwZXJzJ1xuaW1wb3J0IHsgdmksIGJlZm9yZUVhY2gsIGFmdGVyRWFjaCwgZGVzY3JpYmUsIHRlc3QsIGV4cGVjdCB9IGZyb20gJ3ZpdGVzdCdcblxuLy8g5qih5ouf5pWw5o2u5bqT5pyN5YqhXG5jb25zdCBtb2NrRGIgPSB7XG4gIGNhcmRzOiB7XG4gICAgY291bnQ6IHZpLmZuKClcbiAgfSxcbiAgZm9sZGVyczoge1xuICAgIGNvdW50OiB2aS5mbigpXG4gIH0sXG4gIHRhZ3M6IHtcbiAgICBjb3VudDogdmkuZm4oKVxuICB9LFxuICBpbWFnZXM6IHtcbiAgICBjb3VudDogdmkuZm4oKVxuICB9XG59XG5cbi8vIOaooeaLn+afpeivouaAp+iDveacjeWKoVxuY29uc3QgbW9ja1F1ZXJ5UGVyZm9ybWFuY2UgPSB7XG4gIGdldFBlcmZvcm1hbmNlU3RhdHM6IHZpLmZuKClcbn1cblxuLy8g5qih5ouf5pWw5o2u5LiA6Ie05oCn5pyN5YqhXG5jb25zdCBtb2NrRGF0YUNvbnNpc3RlbmN5ID0ge1xuICBydW5RdWlja0NoZWNrOiB2aS5mbigpXG59XG5cbi8vIOaooeaLn+WvvOiIquWZqOWtmOWCqFxuY29uc3QgbW9ja1N0b3JhZ2VFc3RpbWF0ZSA9IHtcbiAgdXNhZ2U6IDEwMjQgKiAxMDI0ICogNTAgLy8gNTBNQlxufVxuXG4vLyDmqKHmi5/mgKfog73lhoXlrZhcbmNvbnN0IG1vY2tQZXJmb3JtYW5jZU1lbW9yeSA9IHtcbiAgdXNlZEpTSGVhcFNpemU6IDEwMjQgKiAxMDI0ICogMjUgLy8gMjVNQlxufVxuXG5kZXNjcmliZSgnUGVyZm9ybWFuY2VNb25pdG9yaW5nU2VydmljZScsICgpID0+IHtcbiAgbGV0IHBlcmZvcm1hbmNlTW9uaXRvcmluZ1NlcnZpY2U6IFBlcmZvcm1hbmNlTW9uaXRvcmluZ1NlcnZpY2VcbiAgbGV0IHJlc3RvcmVEYXRlTm93OiAoKSA9PiB2b2lkXG5cbiAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgY2xlYW51cEFsbE1vY2tzKClcblxuICAgIC8vIOiuvue9ruaooeaLn+eahOaXtumXtOaIs1xuICAgIGNvbnN0IHRpbWVzdGFtcCA9IDE2NDA5OTUyMDAwMDAgLy8gMjAyMi0wMS0wMSAwMDowMDowMFxuICAgIHJlc3RvcmVEYXRlTm93ID0gbW9ja0RhdGVOb3codGltZXN0YW1wKVxuXG4gICAgLy8g6YeN572u5omA5pyJbW9ja1xuICAgIHZpLmNsZWFyQWxsTW9ja3MoKVxuXG4gICAgLy8g6K6+572u6buY6K6kbW9ja+i/lOWbnuWAvFxuICAgIG1vY2tEYi5jYXJkcy5jb3VudC5tb2NrUmVzb2x2ZWRWYWx1ZSgxMDApXG4gICAgbW9ja0RiLmZvbGRlcnMuY291bnQubW9ja1Jlc29sdmVkVmFsdWUoMTApXG4gICAgbW9ja0RiLnRhZ3MuY291bnQubW9ja1Jlc29sdmVkVmFsdWUoMjApXG4gICAgbW9ja0RiLmltYWdlcy5jb3VudC5tb2NrUmVzb2x2ZWRWYWx1ZSg1MClcblxuICAgIG1vY2tRdWVyeVBlcmZvcm1hbmNlLmdldFBlcmZvcm1hbmNlU3RhdHMubW9ja1Jlc29sdmVkVmFsdWUoe1xuICAgICAgYXZlcmFnZVF1ZXJ5VGltZTogNTAsXG4gICAgICBjYWNoZUhpdFJhdGU6IDAuODUsXG4gICAgICBlcnJvckNvdW50OiAyLFxuICAgICAgd2FybmluZ0NvdW50OiA1XG4gICAgfSlcblxuICAgIG1vY2tEYXRhQ29uc2lzdGVuY3kucnVuUXVpY2tDaGVjay5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICBvdmVyYWxsU2NvcmU6IDAuOTVcbiAgICB9KVxuXG4gICAgLy8g5qih5oufbmF2aWdhdG9yLnN0b3JhZ2VcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkobmF2aWdhdG9yLCAnc3RvcmFnZScsIHtcbiAgICAgIHZhbHVlOiB7XG4gICAgICAgIGVzdGltYXRlOiB2aS5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKG1vY2tTdG9yYWdlRXN0aW1hdGUpXG4gICAgICB9LFxuICAgICAgd3JpdGFibGU6IHRydWVcbiAgICB9KVxuXG4gICAgLy8g5qih5oufcGVyZm9ybWFuY2UubWVtb3J5XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHBlcmZvcm1hbmNlLCAnbWVtb3J5Jywge1xuICAgICAgdmFsdWU6IG1vY2tQZXJmb3JtYW5jZU1lbW9yeSxcbiAgICAgIHdyaXRhYmxlOiB0cnVlXG4gICAgfSlcblxuICAgIC8vIOaooeaLn3dpbmRvdy5zZXRJbnRlcnZhbOWSjGNsZWFySW50ZXJ2YWxcbiAgICBjb25zdCBtb2NrU2V0SW50ZXJ2YWwgPSB2aS5mbigpLm1vY2tSZXR1cm5WYWx1ZSgxKVxuICAgIGNvbnN0IG1vY2tDbGVhckludGVydmFsID0gdmkuZm4oKVxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh3aW5kb3csICdzZXRJbnRlcnZhbCcsIHsgdmFsdWU6IG1vY2tTZXRJbnRlcnZhbCB9KVxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh3aW5kb3csICdjbGVhckludGVydmFsJywgeyB2YWx1ZTogbW9ja0NsZWFySW50ZXJ2YWwgfSlcblxuICAgIC8vIOWIm+W7uuaWsOeahOacjeWKoeWunuS+i1xuICAgIHBlcmZvcm1hbmNlTW9uaXRvcmluZ1NlcnZpY2UgPSBuZXcgUGVyZm9ybWFuY2VNb25pdG9yaW5nU2VydmljZShcbiAgICAgIG1vY2tEYiBhcyBhbnksXG4gICAgICBtb2NrUXVlcnlQZXJmb3JtYW5jZSBhcyBhbnksXG4gICAgICBtb2NrRGF0YUNvbnNpc3RlbmN5IGFzIGFueVxuICAgIClcbiAgfSlcblxuICBhZnRlckVhY2goKCkgPT4ge1xuICAgIHJlc3RvcmVEYXRlTm93KClcbiAgICBjbGVhbnVwQWxsTW9ja3MoKVxuICB9KVxuXG4gIGRlc2NyaWJlKCdDb25zdHJ1Y3RvciBhbmQgQ29uZmlndXJhdGlvbicsICgpID0+IHtcbiAgICB0ZXN0KCdzaG91bGQgaW5pdGlhbGl6ZSB3aXRoIGRlZmF1bHQgY29uZmlnJywgKCkgPT4ge1xuICAgICAgY29uc3Qgc2VydmljZSA9IG5ldyBQZXJmb3JtYW5jZU1vbml0b3JpbmdTZXJ2aWNlKFxuICAgICAgICBtb2NrRGIgYXMgYW55LFxuICAgICAgICBtb2NrUXVlcnlQZXJmb3JtYW5jZSBhcyBhbnksXG4gICAgICAgIG1vY2tEYXRhQ29uc2lzdGVuY3kgYXMgYW55XG4gICAgICApXG5cbiAgICAgIC8vIOmAmui/h+engeacieaWueazleiuv+mXrumFjee9rlxuICAgICAgY29uc3QgY29uZmlnID0gKHNlcnZpY2UgYXMgYW55KS5jb25maWdcblxuICAgICAgZXhwZWN0KGNvbmZpZy5jb2xsZWN0aW9uSW50ZXJ2YWwpLnRvQmUoNTAwMClcbiAgICAgIGV4cGVjdChjb25maWcubWF4SGlzdG9yeVNpemUpLnRvQmUoMTAwMClcbiAgICAgIGV4cGVjdChjb25maWcuYWxlcnRUaHJlc2hvbGRzLnF1ZXJ5VGltZSkudG9CZSgxMDAwKVxuICAgICAgZXhwZWN0KGNvbmZpZy5hbGVydFRocmVzaG9sZHMubWVtb3J5VXNhZ2UpLnRvQmUoMTAwICogMTAyNCAqIDEwMjQpXG4gICAgICBleHBlY3QoY29uZmlnLmF1dG9HZW5lcmF0ZVJlcG9ydCkudG9CZSh0cnVlKVxuICAgICAgZXhwZWN0KGNvbmZpZy5yZXBvcnRJbnRlcnZhbCkudG9CZSgyNCAqIDYwICogNjAgKiAxMDAwKVxuICAgIH0pXG5cbiAgICB0ZXN0KCdzaG91bGQgbWVyZ2UgY3VzdG9tIGNvbmZpZyB3aXRoIGRlZmF1bHRzJywgKCkgPT4ge1xuICAgICAgY29uc3QgY3VzdG9tQ29uZmlnOiBQYXJ0aWFsPE1vbml0b3JpbmdDb25maWc+ID0ge1xuICAgICAgICBjb2xsZWN0aW9uSW50ZXJ2YWw6IDEwMDAwLFxuICAgICAgICBtYXhIaXN0b3J5U2l6ZTogNTAwLFxuICAgICAgICBhbGVydFRocmVzaG9sZHM6IHtcbiAgICAgICAgICBxdWVyeVRpbWU6IDUwMCxcbiAgICAgICAgICBtZW1vcnlVc2FnZTogNTAgKiAxMDI0ICogMTAyNCxcbiAgICAgICAgICBlcnJvclJhdGU6IDAuMDIsXG4gICAgICAgICAgY2FjaGVIaXRSYXRlOiAwLjhcbiAgICAgICAgfSxcbiAgICAgICAgYXV0b0dlbmVyYXRlUmVwb3J0OiBmYWxzZSxcbiAgICAgICAgcmVwb3J0SW50ZXJ2YWw6IDEyICogNjAgKiA2MCAqIDEwMDBcbiAgICAgIH1cblxuICAgICAgY29uc3Qgc2VydmljZSA9IG5ldyBQZXJmb3JtYW5jZU1vbml0b3JpbmdTZXJ2aWNlKFxuICAgICAgICBtb2NrRGIgYXMgYW55LFxuICAgICAgICBtb2NrUXVlcnlQZXJmb3JtYW5jZSBhcyBhbnksXG4gICAgICAgIG1vY2tEYXRhQ29uc2lzdGVuY3kgYXMgYW55LFxuICAgICAgICBjdXN0b21Db25maWdcbiAgICAgIClcblxuICAgICAgY29uc3QgY29uZmlnID0gKHNlcnZpY2UgYXMgYW55KS5jb25maWdcblxuICAgICAgZXhwZWN0KGNvbmZpZy5jb2xsZWN0aW9uSW50ZXJ2YWwpLnRvQmUoMTAwMDApXG4gICAgICBleHBlY3QoY29uZmlnLm1heEhpc3RvcnlTaXplKS50b0JlKDUwMClcbiAgICAgIGV4cGVjdChjb25maWcuYWxlcnRUaHJlc2hvbGRzLnF1ZXJ5VGltZSkudG9CZSg1MDApXG4gICAgICBleHBlY3QoY29uZmlnLmFsZXJ0VGhyZXNob2xkcy5tZW1vcnlVc2FnZSkudG9CZSg1MCAqIDEwMjQgKiAxMDI0KVxuICAgICAgZXhwZWN0KGNvbmZpZy5hdXRvR2VuZXJhdGVSZXBvcnQpLnRvQmUoZmFsc2UpXG4gICAgICBleHBlY3QoY29uZmlnLnJlcG9ydEludGVydmFsKS50b0JlKDEyICogNjAgKiA2MCAqIDEwMDApXG4gICAgfSlcblxuICAgIHRlc3QoJ3Nob3VsZCBjcmVhdGUgc2luZ2xldG9uIGluc3RhbmNlJywgKCkgPT4ge1xuICAgICAgY29uc3QgaW5zdGFuY2UxID0gUGVyZm9ybWFuY2VNb25pdG9yaW5nU2VydmljZS5nZXRJbnN0YW5jZShcbiAgICAgICAgbW9ja0RiIGFzIGFueSxcbiAgICAgICAgbW9ja1F1ZXJ5UGVyZm9ybWFuY2UgYXMgYW55LFxuICAgICAgICBtb2NrRGF0YUNvbnNpc3RlbmN5IGFzIGFueVxuICAgICAgKVxuXG4gICAgICBjb25zdCBpbnN0YW5jZTIgPSBQZXJmb3JtYW5jZU1vbml0b3JpbmdTZXJ2aWNlLmdldEluc3RhbmNlKFxuICAgICAgICBtb2NrRGIgYXMgYW55LFxuICAgICAgICBtb2NrUXVlcnlQZXJmb3JtYW5jZSBhcyBhbnksXG4gICAgICAgIG1vY2tEYXRhQ29uc2lzdGVuY3kgYXMgYW55XG4gICAgICApXG5cbiAgICAgIGV4cGVjdChpbnN0YW5jZTEpLnRvQmUoaW5zdGFuY2UyKVxuICAgIH0pXG4gIH0pXG5cbiAgZGVzY3JpYmUoJ01vbml0b3JpbmcgQ29udHJvbCcsICgpID0+IHtcbiAgICB0ZXN0KCdzaG91bGQgc3RhcnQgbW9uaXRvcmluZyBjb3JyZWN0bHknLCAoKSA9PiB7XG4gICAgICBjb25zdCBzZXJ2aWNlID0gbmV3IFBlcmZvcm1hbmNlTW9uaXRvcmluZ1NlcnZpY2UoXG4gICAgICAgIG1vY2tEYiBhcyBhbnksXG4gICAgICAgIG1vY2tRdWVyeVBlcmZvcm1hbmNlIGFzIGFueSxcbiAgICAgICAgbW9ja0RhdGFDb25zaXN0ZW5jeSBhcyBhbnlcbiAgICAgIClcblxuICAgICAgc2VydmljZS5zdGFydE1vbml0b3JpbmcoKVxuXG4gICAgICBleHBlY3QoKHNlcnZpY2UgYXMgYW55KS5pc01vbml0b3JpbmcpLnRvQmUodHJ1ZSlcbiAgICAgIGV4cGVjdCh3aW5kb3cuc2V0SW50ZXJ2YWwpLnRvSGF2ZUJlZW5DYWxsZWQoKVxuICAgICAgZXhwZWN0KHdpbmRvdy5zZXRJbnRlcnZhbCkudG9IYXZlQmVlbkNhbGxlZFRpbWVzKDIpIC8vIG1vbml0b3JpbmcgYW5kIHJlcG9ydCBpbnRlcnZhbHNcbiAgICB9KVxuXG4gICAgdGVzdCgnc2hvdWxkIHN0b3AgbW9uaXRvcmluZyBjb3JyZWN0bHknLCAoKSA9PiB7XG4gICAgICBjb25zdCBzZXJ2aWNlID0gbmV3IFBlcmZvcm1hbmNlTW9uaXRvcmluZ1NlcnZpY2UoXG4gICAgICAgIG1vY2tEYiBhcyBhbnksXG4gICAgICAgIG1vY2tRdWVyeVBlcmZvcm1hbmNlIGFzIGFueSxcbiAgICAgICAgbW9ja0RhdGFDb25zaXN0ZW5jeSBhcyBhbnlcbiAgICAgIClcblxuICAgICAgc2VydmljZS5zdGFydE1vbml0b3JpbmcoKVxuICAgICAgc2VydmljZS5zdG9wTW9uaXRvcmluZygpXG5cbiAgICAgIGV4cGVjdCgoc2VydmljZSBhcyBhbnkpLmlzTW9uaXRvcmluZykudG9CZShmYWxzZSlcbiAgICAgIGV4cGVjdCh3aW5kb3cuY2xlYXJJbnRlcnZhbCkudG9IYXZlQmVlbkNhbGxlZFRpbWVzKDIpXG4gICAgfSlcblxuICAgIHRlc3QoJ3Nob3VsZCBub3Qgc3RhcnQgbW9uaXRvcmluZyBpZiBhbHJlYWR5IHJ1bm5pbmcnLCAoKSA9PiB7XG4gICAgICBjb25zdCBzZXJ2aWNlID0gbmV3IFBlcmZvcm1hbmNlTW9uaXRvcmluZ1NlcnZpY2UoXG4gICAgICAgIG1vY2tEYiBhcyBhbnksXG4gICAgICAgIG1vY2tRdWVyeVBlcmZvcm1hbmNlIGFzIGFueSxcbiAgICAgICAgbW9ja0RhdGFDb25zaXN0ZW5jeSBhcyBhbnlcbiAgICAgIClcblxuICAgICAgc2VydmljZS5zdGFydE1vbml0b3JpbmcoKVxuICAgICAgc2VydmljZS5zdGFydE1vbml0b3JpbmcoKSAvLyDnrKzkuozmrKHosIPnlKhcblxuICAgICAgZXhwZWN0KHdpbmRvdy5zZXRJbnRlcnZhbCkudG9IYXZlQmVlbkNhbGxlZFRpbWVzKDIpIC8vIOWPquiwg+eUqOS4gOasoVxuICAgIH0pXG5cbiAgICB0ZXN0KCdzaG91bGQgbm90IHN0b3AgbW9uaXRvcmluZyBpZiBub3QgcnVubmluZycsICgpID0+IHtcbiAgICAgIGNvbnN0IHNlcnZpY2UgPSBuZXcgUGVyZm9ybWFuY2VNb25pdG9yaW5nU2VydmljZShcbiAgICAgICAgbW9ja0RiIGFzIGFueSxcbiAgICAgICAgbW9ja1F1ZXJ5UGVyZm9ybWFuY2UgYXMgYW55LFxuICAgICAgICBtb2NrRGF0YUNvbnNpc3RlbmN5IGFzIGFueVxuICAgICAgKVxuXG4gICAgICBzZXJ2aWNlLnN0b3BNb25pdG9yaW5nKClcblxuICAgICAgZXhwZWN0KHdpbmRvdy5jbGVhckludGVydmFsKS5ub3QudG9IYXZlQmVlbkNhbGxlZCgpXG4gICAgfSlcblxuICAgIHRlc3QoJ3Nob3VsZCByZXN0YXJ0IG1vbml0b3Jpbmcgd2hlbiBjb25maWcgaXMgdXBkYXRlZCcsICgpID0+IHtcbiAgICAgIGNvbnN0IHNlcnZpY2UgPSBuZXcgUGVyZm9ybWFuY2VNb25pdG9yaW5nU2VydmljZShcbiAgICAgICAgbW9ja0RiIGFzIGFueSxcbiAgICAgICAgbW9ja1F1ZXJ5UGVyZm9ybWFuY2UgYXMgYW55LFxuICAgICAgICBtb2NrRGF0YUNvbnNpc3RlbmN5IGFzIGFueVxuICAgICAgKVxuXG4gICAgICBzZXJ2aWNlLnN0YXJ0TW9uaXRvcmluZygpXG5cbiAgICAgIGNvbnN0IGNsZWFyU3B5ID0gdmkuc3B5T24oc2VydmljZSwgJ3N0b3BNb25pdG9yaW5nJylcbiAgICAgIGNvbnN0IHN0YXJ0U3B5ID0gdmkuc3B5T24oc2VydmljZSwgJ3N0YXJ0TW9uaXRvcmluZycpXG5cbiAgICAgIHNlcnZpY2UudXBkYXRlQ29uZmlnKHsgY29sbGVjdGlvbkludGVydmFsOiAxMDAwMCB9KVxuXG4gICAgICBleHBlY3QoY2xlYXJTcHkpLnRvSGF2ZUJlZW5DYWxsZWQoKVxuICAgICAgZXhwZWN0KHN0YXJ0U3B5KS50b0hhdmVCZWVuQ2FsbGVkKClcbiAgICB9KVxuICB9KVxuXG4gIGRlc2NyaWJlKCdNZXRyaWNzIENvbGxlY3Rpb24nLCAoKSA9PiB7XG4gICAgdGVzdCgnc2hvdWxkIGNvbGxlY3QgYWxsIG1ldHJpY3MgY29ycmVjdGx5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3Qgc2VydmljZSA9IG5ldyBQZXJmb3JtYW5jZU1vbml0b3JpbmdTZXJ2aWNlKFxuICAgICAgICBtb2NrRGIgYXMgYW55LFxuICAgICAgICBtb2NrUXVlcnlQZXJmb3JtYW5jZSBhcyBhbnksXG4gICAgICAgIG1vY2tEYXRhQ29uc2lzdGVuY3kgYXMgYW55XG4gICAgICApXG5cbiAgICAgIGF3YWl0IChzZXJ2aWNlIGFzIGFueSkuY29sbGVjdE1ldHJpY3MoKVxuXG4gICAgICBjb25zdCBtZXRyaWNzID0gKHNlcnZpY2UgYXMgYW55KS5nZXRDdXJyZW50TWV0cmljcygpXG5cbiAgICAgIGV4cGVjdChtZXRyaWNzLnRpbWVzdGFtcCkudG9CZSgxNjQwOTk1MjAwMDAwKVxuICAgICAgZXhwZWN0KG1ldHJpY3MuZGF0YWJhc2VTaXplKS50b0JlKDUyNDI4ODAwKSAvLyA1ME1CXG4gICAgICBleHBlY3QobWV0cmljcy5jYXJkQ291bnQpLnRvQmUoMTAwKVxuICAgICAgZXhwZWN0KG1ldHJpY3MuZm9sZGVyQ291bnQpLnRvQmUoMTApXG4gICAgICBleHBlY3QobWV0cmljcy50YWdDb3VudCkudG9CZSgyMClcbiAgICAgIGV4cGVjdChtZXRyaWNzLmltYWdlQ291bnQpLnRvQmUoNTApXG4gICAgICBleHBlY3QobWV0cmljcy5hdmVyYWdlUXVlcnlUaW1lKS50b0JlKDUwKVxuICAgICAgZXhwZWN0KG1ldHJpY3MuY2FjaGVIaXRSYXRlKS50b0JlKDAuODUpXG4gICAgICBleHBlY3QobWV0cmljcy5tZW1vcnlVc2FnZSkudG9CZSgyNjIxNDQwMCkgLy8gMjVNQlxuICAgICAgZXhwZWN0KG1ldHJpY3Muc3luY1N0YXR1cykudG9CZSgnc3luY2VkJylcbiAgICAgIGV4cGVjdChtZXRyaWNzLmNvbnNpc3RlbmN5U2NvcmUpLnRvQmUoMC45NSlcbiAgICAgIGV4cGVjdChtZXRyaWNzLmVycm9yQ291bnQpLnRvQmUoMilcbiAgICAgIGV4cGVjdChtZXRyaWNzLndhcm5pbmdDb3VudCkudG9CZSg1KVxuICAgIH0pXG5cbiAgICB0ZXN0KCdzaG91bGQgaGFuZGxlIGVycm9ycyBkdXJpbmcgbWV0cmljIGNvbGxlY3Rpb24nLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBzZXJ2aWNlID0gbmV3IFBlcmZvcm1hbmNlTW9uaXRvcmluZ1NlcnZpY2UoXG4gICAgICAgIG1vY2tEYiBhcyBhbnksXG4gICAgICAgIG1vY2tRdWVyeVBlcmZvcm1hbmNlIGFzIGFueSxcbiAgICAgICAgbW9ja0RhdGFDb25zaXN0ZW5jeSBhcyBhbnlcbiAgICAgIClcblxuICAgICAgLy8g5qih5ouf5pWw5o2u5bqT6ZSZ6K+vXG4gICAgICBtb2NrRGIuY2FyZHMuY291bnQubW9ja1JlamVjdGVkVmFsdWUobmV3IEVycm9yKCdEYXRhYmFzZSBlcnJvcicpKVxuXG4gICAgICBhd2FpdCAoc2VydmljZSBhcyBhbnkpLmNvbGxlY3RNZXRyaWNzKClcblxuICAgICAgY29uc3QgbWV0cmljcyA9IChzZXJ2aWNlIGFzIGFueSkuZ2V0Q3VycmVudE1ldHJpY3MoKVxuXG4gICAgICAvLyDlupTor6Xkvb/nlKjpu5jorqTlgLzmiJbplJnor6/lpITnkIblgLxcbiAgICAgIGV4cGVjdChtZXRyaWNzLmNhcmRDb3VudCkudG9CZSgwKVxuICAgICAgZXhwZWN0KG1ldHJpY3MuYXZlcmFnZVF1ZXJ5VGltZSkudG9CZSgwKVxuICAgICAgZXhwZWN0KG1ldHJpY3MuY2FjaGVIaXRSYXRlKS50b0JlKDApXG4gICAgfSlcblxuICAgIHRlc3QoJ3Nob3VsZCBoYW5kbGUgc3RvcmFnZSBlc3RpbWF0ZSBlcnJvcnMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBzZXJ2aWNlID0gbmV3IFBlcmZvcm1hbmNlTW9uaXRvcmluZ1NlcnZpY2UoXG4gICAgICAgIG1vY2tEYiBhcyBhbnksXG4gICAgICAgIG1vY2tRdWVyeVBlcmZvcm1hbmNlIGFzIGFueSxcbiAgICAgICAgbW9ja0RhdGFDb25zaXN0ZW5jeSBhcyBhbnlcbiAgICAgIClcblxuICAgICAgLy8g5qih5ouf5a2Y5YKoQVBJ5LiN5Y+v55SoXG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkobmF2aWdhdG9yLCAnc3RvcmFnZScsIHtcbiAgICAgICAgdmFsdWU6IHtcbiAgICAgICAgICBlc3RpbWF0ZTogdmkuZm4oKS5tb2NrUmVqZWN0ZWRWYWx1ZShuZXcgRXJyb3IoJ1N0b3JhZ2UgQVBJIG5vdCBhdmFpbGFibGUnKSlcbiAgICAgICAgfSxcbiAgICAgICAgd3JpdGFibGU6IHRydWVcbiAgICAgIH0pXG5cbiAgICAgIGF3YWl0IChzZXJ2aWNlIGFzIGFueSkuY29sbGVjdE1ldHJpY3MoKVxuXG4gICAgICBjb25zdCBtZXRyaWNzID0gKHNlcnZpY2UgYXMgYW55KS5nZXRDdXJyZW50TWV0cmljcygpXG4gICAgICBleHBlY3QobWV0cmljcy5kYXRhYmFzZVNpemUpLnRvQmUoMClcbiAgICB9KVxuXG4gICAgdGVzdCgnc2hvdWxkIGhhbmRsZSBwZXJmb3JtYW5jZSBtZW1vcnkgZXJyb3JzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3Qgc2VydmljZSA9IG5ldyBQZXJmb3JtYW5jZU1vbml0b3JpbmdTZXJ2aWNlKFxuICAgICAgICBtb2NrRGIgYXMgYW55LFxuICAgICAgICBtb2NrUXVlcnlQZXJmb3JtYW5jZSBhcyBhbnksXG4gICAgICAgIG1vY2tEYXRhQ29uc2lzdGVuY3kgYXMgYW55XG4gICAgICApXG5cbiAgICAgIC8vIOaooeaLn+aAp+iDveWGheWtmEFQSeS4jeWPr+eUqFxuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHBlcmZvcm1hbmNlLCAnbWVtb3J5Jywge1xuICAgICAgICB2YWx1ZTogdW5kZWZpbmVkLFxuICAgICAgICB3cml0YWJsZTogdHJ1ZVxuICAgICAgfSlcblxuICAgICAgYXdhaXQgKHNlcnZpY2UgYXMgYW55KS5jb2xsZWN0TWV0cmljcygpXG5cbiAgICAgIGNvbnN0IG1ldHJpY3MgPSAoc2VydmljZSBhcyBhbnkpLmdldEN1cnJlbnRNZXRyaWNzKClcbiAgICAgIGV4cGVjdChtZXRyaWNzLm1lbW9yeVVzYWdlKS50b0JlKDApXG4gICAgfSlcblxuICAgIHRlc3QoJ3Nob3VsZCBsaW1pdCBtZXRyaWNzIGhpc3Rvcnkgc2l6ZScsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHNlcnZpY2UgPSBuZXcgUGVyZm9ybWFuY2VNb25pdG9yaW5nU2VydmljZShcbiAgICAgICAgbW9ja0RiIGFzIGFueSxcbiAgICAgICAgbW9ja1F1ZXJ5UGVyZm9ybWFuY2UgYXMgYW55LFxuICAgICAgICBtb2NrRGF0YUNvbnNpc3RlbmN5IGFzIGFueSxcbiAgICAgICAgeyBtYXhIaXN0b3J5U2l6ZTogMyB9XG4gICAgICApXG5cbiAgICAgIC8vIOaUtumbhuWkmuasoeaMh+agh1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCA1OyBpKyspIHtcbiAgICAgICAgYXdhaXQgKHNlcnZpY2UgYXMgYW55KS5jb2xsZWN0TWV0cmljcygpXG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGhpc3RvcnkgPSAoc2VydmljZSBhcyBhbnkpLm1ldHJpY3NIaXN0b3J5XG4gICAgICBleHBlY3QoaGlzdG9yeSkudG9IYXZlTGVuZ3RoKDMpXG4gICAgICBleHBlY3QoaGlzdG9yeVswXS50aW1lc3RhbXApLnRvQmUoMTY0MDk5NTIwMDAwMCkgLy8g5pyA5pen55qEXG4gICAgICBleHBlY3QoaGlzdG9yeVsyXS50aW1lc3RhbXApLnRvQmUoMTY0MDk5NTIwMDAwMCkgLy8g5pyA5paw55qEXG4gICAgfSlcblxuICAgIHRlc3QoJ3Nob3VsZCBjaGVjayBhbGVydHMgYWZ0ZXIgY29sbGVjdGluZyBtZXRyaWNzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3Qgc2VydmljZSA9IG5ldyBQZXJmb3JtYW5jZU1vbml0b3JpbmdTZXJ2aWNlKFxuICAgICAgICBtb2NrRGIgYXMgYW55LFxuICAgICAgICBtb2NrUXVlcnlQZXJmb3JtYW5jZSBhcyBhbnksXG4gICAgICAgIG1vY2tEYXRhQ29uc2lzdGVuY3kgYXMgYW55LFxuICAgICAgICB7XG4gICAgICAgICAgYWxlcnRUaHJlc2hvbGRzOiB7XG4gICAgICAgICAgICBxdWVyeVRpbWU6IDEwLCAvLyDpnZ7luLjkvY7nmoTpmIjlgLxcbiAgICAgICAgICAgIG1lbW9yeVVzYWdlOiAxMCAqIDEwMjQgKiAxMDI0LFxuICAgICAgICAgICAgZXJyb3JSYXRlOiAwLjAxLFxuICAgICAgICAgICAgY2FjaGVIaXRSYXRlOiAwLjlcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIClcblxuICAgICAgY29uc3QgY29uc29sZVdhcm5TcHkgPSB2aS5zcHlPbihjb25zb2xlLCAnd2FybicpXG5cbiAgICAgIGF3YWl0IChzZXJ2aWNlIGFzIGFueSkuY29sbGVjdE1ldHJpY3MoKVxuXG4gICAgICBleHBlY3QoY29uc29sZVdhcm5TcHkpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKCfmgKfog73lkYroraY6JywgZXhwZWN0LmFycmF5Q29udGFpbmluZyhbXG4gICAgICAgICfmn6Xor6Lml7bpl7Tov4fplb86IDUwbXMnLFxuICAgICAgICAn5YaF5a2Y5L2/55So6YeP6L+H6auYOiAyNS4wME1CJyxcbiAgICAgICAgJ+e8k+WtmOWRveS4reeOh+i/h+S9jjogODUuMCUnXG4gICAgICBdKSlcbiAgICB9KVxuICB9KVxuXG4gIGRlc2NyaWJlKCdQZXJmb3JtYW5jZSBSZXBvcnQgR2VuZXJhdGlvbicsICgpID0+IHtcbiAgICB0ZXN0KCdzaG91bGQgZ2VuZXJhdGUgY29tcGxldGUgcGVyZm9ybWFuY2UgcmVwb3J0JywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3Qgc2VydmljZSA9IG5ldyBQZXJmb3JtYW5jZU1vbml0b3JpbmdTZXJ2aWNlKFxuICAgICAgICBtb2NrRGIgYXMgYW55LFxuICAgICAgICBtb2NrUXVlcnlQZXJmb3JtYW5jZSBhcyBhbnksXG4gICAgICAgIG1vY2tEYXRhQ29uc2lzdGVuY3kgYXMgYW55XG4gICAgICApXG5cbiAgICAgIC8vIOWFiOaUtumbhuS4gOS6m+aMh+agh1xuICAgICAgYXdhaXQgKHNlcnZpY2UgYXMgYW55KS5jb2xsZWN0TWV0cmljcygpXG5cbiAgICAgIGNvbnN0IHJlcG9ydCA9IGF3YWl0IHNlcnZpY2UuZ2VuZXJhdGVSZXBvcnQoKVxuXG4gICAgICBleHBlY3QocmVwb3J0LnJlcG9ydElkKS50b0JlRGVmaW5lZCgpXG4gICAgICBleHBlY3QocmVwb3J0LmdlbmVyYXRlZEF0KS50b0JlKDE2NDA5OTUyMDAwMDApXG4gICAgICBleHBlY3QocmVwb3J0LnJlcG9ydFBlcmlvZCkudG9CZURlZmluZWQoKVxuICAgICAgZXhwZWN0KHJlcG9ydC5vdmVyYWxsU2NvcmUpLnRvQmVHcmVhdGVyVGhhbk9yRXF1YWwoMClcbiAgICAgIGV4cGVjdChyZXBvcnQub3ZlcmFsbFNjb3JlKS50b0JlTGVzc1RoYW5PckVxdWFsKDEpXG4gICAgICBleHBlY3QoQXJyYXkuaXNBcnJheShyZXBvcnQudHJlbmRzKSkudG9CZSh0cnVlKVxuICAgICAgZXhwZWN0KEFycmF5LmlzQXJyYXkocmVwb3J0LnJlY29tbWVuZGF0aW9ucykpLnRvQmUodHJ1ZSlcbiAgICAgIGV4cGVjdChyZXBvcnQuaXNzdWVzKS50b0hhdmVQcm9wZXJ0eSgnY3JpdGljYWwnKVxuICAgICAgZXhwZWN0KHJlcG9ydC5pc3N1ZXMpLnRvSGF2ZVByb3BlcnR5KCd3YXJuaW5nJylcbiAgICAgIGV4cGVjdChyZXBvcnQuaXNzdWVzKS50b0hhdmVQcm9wZXJ0eSgnaW5mbycpXG4gICAgICBleHBlY3QocmVwb3J0Lm9wdGltaXphdGlvbnMpLnRvSGF2ZVByb3BlcnR5KCdpbXBsZW1lbnRlZCcpXG4gICAgICBleHBlY3QocmVwb3J0Lm9wdGltaXphdGlvbnMpLnRvSGF2ZVByb3BlcnR5KCdzdWdnZXN0ZWQnKVxuICAgICAgZXhwZWN0KHJlcG9ydC5zdW1tYXJ5KS50b0hhdmVQcm9wZXJ0eSgnaGVhbHRoU3RhdHVzJylcbiAgICAgIGV4cGVjdChyZXBvcnQuc3VtbWFyeSkudG9IYXZlUHJvcGVydHkoJ2tleUZpbmRpbmdzJylcbiAgICAgIGV4cGVjdChyZXBvcnQuc3VtbWFyeSkudG9IYXZlUHJvcGVydHkoJ25leHRTdGVwcycpXG4gICAgfSlcblxuICAgIHRlc3QoJ3Nob3VsZCBoYW5kbGUgZW1wdHkgbWV0cmljcyBoaXN0b3J5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3Qgc2VydmljZSA9IG5ldyBQZXJmb3JtYW5jZU1vbml0b3JpbmdTZXJ2aWNlKFxuICAgICAgICBtb2NrRGIgYXMgYW55LFxuICAgICAgICBtb2NrUXVlcnlQZXJmb3JtYW5jZSBhcyBhbnksXG4gICAgICAgIG1vY2tEYXRhQ29uc2lzdGVuY3kgYXMgYW55XG4gICAgICApXG5cbiAgICAgIGNvbnN0IHJlcG9ydCA9IGF3YWl0IHNlcnZpY2UuZ2VuZXJhdGVSZXBvcnQoKVxuXG4gICAgICBleHBlY3QocmVwb3J0Lm92ZXJhbGxTY29yZSkudG9CZSgwKSAvLyDln7rkuo7nqbrmjIfmoIdcbiAgICAgIGV4cGVjdChyZXBvcnQudHJlbmRzKS50b0VxdWFsKFtdKVxuICAgIH0pXG5cbiAgICB0ZXN0KCdzaG91bGQgZ2VuZXJhdGUgYXBwcm9wcmlhdGUgcmVjb21tZW5kYXRpb25zJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3Qgc2VydmljZSA9IG5ldyBQZXJmb3JtYW5jZU1vbml0b3JpbmdTZXJ2aWNlKFxuICAgICAgICBtb2NrRGIgYXMgYW55LFxuICAgICAgICBtb2NrUXVlcnlQZXJmb3JtYW5jZSBhcyBhbnksXG4gICAgICAgIG1vY2tEYXRhQ29uc2lzdGVuY3kgYXMgYW55XG4gICAgICApXG5cbiAgICAgIC8vIOiuvue9ruS4jeiJr+aMh+agh+S7peinpuWPkeW7uuiurlxuICAgICAgbW9ja1F1ZXJ5UGVyZm9ybWFuY2UuZ2V0UGVyZm9ybWFuY2VTdGF0cy5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgIGF2ZXJhZ2VRdWVyeVRpbWU6IDYwMCwgLy8g5oWi5p+l6K+iXG4gICAgICAgIGNhY2hlSGl0UmF0ZTogMC42LCAvLyDkvY7nvJPlrZjlkb3kuK3njodcbiAgICAgICAgZXJyb3JDb3VudDogMTUsIC8vIOmrmOmUmeivr+iuoeaVsFxuICAgICAgICB3YXJuaW5nQ291bnQ6IDEwXG4gICAgICB9KVxuXG4gICAgICBtb2NrRGF0YUNvbnNpc3RlbmN5LnJ1blF1aWNrQ2hlY2subW9ja1Jlc29sdmVkVmFsdWUoe1xuICAgICAgICBvdmVyYWxsU2NvcmU6IDAuNyAvLyDkuK3nrYnkuIDoh7TmgKdcbiAgICAgIH0pXG5cbiAgICAgIC8vIOaooeaLn+mrmOWGheWtmOS9v+eUqFxuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHBlcmZvcm1hbmNlLCAnbWVtb3J5Jywge1xuICAgICAgICB2YWx1ZTogeyB1c2VkSlNIZWFwU2l6ZTogNjAgKiAxMDI0ICogMTAyNCB9LCAvLyA2ME1CXG4gICAgICAgIHdyaXRhYmxlOiB0cnVlXG4gICAgICB9KVxuXG4gICAgICBhd2FpdCAoc2VydmljZSBhcyBhbnkpLmNvbGxlY3RNZXRyaWNzKClcbiAgICAgIGNvbnN0IHJlcG9ydCA9IGF3YWl0IHNlcnZpY2UuZ2VuZXJhdGVSZXBvcnQoKVxuXG4gICAgICBleHBlY3QocmVwb3J0LnJlY29tbWVuZGF0aW9ucy5sZW5ndGgpLnRvQmVHcmVhdGVyVGhhbigwKVxuICAgICAgZXhwZWN0KHJlcG9ydC5yZWNvbW1lbmRhdGlvbnMpLnRvRXF1YWwoXG4gICAgICAgIGV4cGVjdC5hcnJheUNvbnRhaW5pbmcoW1xuICAgICAgICAgIGV4cGVjdC5zdHJpbmdDb250YWluaW5nKCfkvJjljJbmn6Xor6LmiJblop7liqDntKLlvJUnKSxcbiAgICAgICAgICBleHBlY3Quc3RyaW5nQ29udGFpbmluZygn6LCD5pW057yT5a2Y562W55WlJyksXG4gICAgICAgICAgZXhwZWN0LnN0cmluZ0NvbnRhaW5pbmcoJ+a4heeQhuS4jeW/heimgeeahOaVsOaNricpLFxuICAgICAgICAgIGV4cGVjdC5zdHJpbmdDb250YWluaW5nKCfov5DooYzmlbDmja7kuIDoh7TmgKfmo4Dmn6UnKVxuICAgICAgICBdKVxuICAgICAgKVxuICAgIH0pXG5cbiAgICB0ZXN0KCdzaG91bGQgYW5hbHl6ZSBpc3N1ZXMgY29ycmVjdGx5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3Qgc2VydmljZSA9IG5ldyBQZXJmb3JtYW5jZU1vbml0b3JpbmdTZXJ2aWNlKFxuICAgICAgICBtb2NrRGIgYXMgYW55LFxuICAgICAgICBtb2NrUXVlcnlQZXJmb3JtYW5jZSBhcyBhbnksXG4gICAgICAgIG1vY2tEYXRhQ29uc2lzdGVuY3kgYXMgYW55XG4gICAgICApXG5cbiAgICAgIC8vIOiuvue9ruS4pemHjemXrumimOaMh+agh1xuICAgICAgbW9ja1F1ZXJ5UGVyZm9ybWFuY2UuZ2V0UGVyZm9ybWFuY2VTdGF0cy5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgIGF2ZXJhZ2VRdWVyeVRpbWU6IDI1MDAsIC8vIOmdnuW4uOaFolxuICAgICAgICBjYWNoZUhpdFJhdGU6IDAuMyxcbiAgICAgICAgZXJyb3JDb3VudDogMjUsXG4gICAgICAgIHdhcm5pbmdDb3VudDogMTVcbiAgICAgIH0pXG5cbiAgICAgIG1vY2tEYXRhQ29uc2lzdGVuY3kucnVuUXVpY2tDaGVjay5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgIG92ZXJhbGxTY29yZTogMC4zIC8vIOS9juS4gOiHtOaAp1xuICAgICAgfSlcblxuICAgICAgYXdhaXQgKHNlcnZpY2UgYXMgYW55KS5jb2xsZWN0TWV0cmljcygpXG4gICAgICBjb25zdCByZXBvcnQgPSBhd2FpdCBzZXJ2aWNlLmdlbmVyYXRlUmVwb3J0KClcblxuICAgICAgZXhwZWN0KHJlcG9ydC5pc3N1ZXMuY3JpdGljYWwpLnRvRXF1YWwoXG4gICAgICAgIGV4cGVjdC5hcnJheUNvbnRhaW5pbmcoW1xuICAgICAgICAgICfmn6Xor6LmgKfog73kuKXph43kuIvpmY0nLFxuICAgICAgICAgICfmlbDmja7kuIDoh7TmgKfkuKXph43lj5fmjZ8nXG4gICAgICAgIF0pXG4gICAgICApXG4gICAgICBleHBlY3QocmVwb3J0Lmlzc3Vlcy53YXJuaW5nLmxlbmd0aCkudG9CZUdyZWF0ZXJUaGFuKDApXG4gICAgfSlcblxuICAgIHRlc3QoJ3Nob3VsZCBjYWxjdWxhdGUgb3ZlcmFsbCBzY29yZSBjb3JyZWN0bHknLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBzZXJ2aWNlID0gbmV3IFBlcmZvcm1hbmNlTW9uaXRvcmluZ1NlcnZpY2UoXG4gICAgICAgIG1vY2tEYiBhcyBhbnksXG4gICAgICAgIG1vY2tRdWVyeVBlcmZvcm1hbmNlIGFzIGFueSxcbiAgICAgICAgbW9ja0RhdGFDb25zaXN0ZW5jeSBhcyBhbnlcbiAgICAgIClcblxuICAgICAgLy8g6K6+572u5LyY56eA5oyH5qCHXG4gICAgICBtb2NrUXVlcnlQZXJmb3JtYW5jZS5nZXRQZXJmb3JtYW5jZVN0YXRzLm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgICAgYXZlcmFnZVF1ZXJ5VGltZTogNTAsIC8vIOW/q+afpeivolxuICAgICAgICBjYWNoZUhpdFJhdGU6IDAuOTUsIC8vIOmrmOe8k+WtmOWRveS4reeOh1xuICAgICAgICBlcnJvckNvdW50OiAwLFxuICAgICAgICB3YXJuaW5nQ291bnQ6IDBcbiAgICAgIH0pXG5cbiAgICAgIG1vY2tEYXRhQ29uc2lzdGVuY3kucnVuUXVpY2tDaGVjay5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgIG92ZXJhbGxTY29yZTogMC45OSAvLyDpq5jkuIDoh7TmgKdcbiAgICAgIH0pXG5cbiAgICAgIC8vIOaooeaLn+S9juWGheWtmOS9v+eUqFxuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHBlcmZvcm1hbmNlLCAnbWVtb3J5Jywge1xuICAgICAgICB2YWx1ZTogeyB1c2VkSlNIZWFwU2l6ZTogMTAgKiAxMDI0ICogMTAyNCB9LCAvLyAxME1CXG4gICAgICAgIHdyaXRhYmxlOiB0cnVlXG4gICAgICB9KVxuXG4gICAgICBhd2FpdCAoc2VydmljZSBhcyBhbnkpLmNvbGxlY3RNZXRyaWNzKClcbiAgICAgIGNvbnN0IHJlcG9ydCA9IGF3YWl0IHNlcnZpY2UuZ2VuZXJhdGVSZXBvcnQoKVxuXG4gICAgICBleHBlY3QocmVwb3J0Lm92ZXJhbGxTY29yZSkudG9CZUdyZWF0ZXJUaGFuKDAuOCkgLy8g5bqU6K+l5pyJ5b6I6auY55qE5YiG5pWwXG4gICAgfSlcblxuICAgIHRlc3QoJ3Nob3VsZCBzYXZlIHJlcG9ydCBhZnRlciBnZW5lcmF0aW9uJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3Qgc2VydmljZSA9IG5ldyBQZXJmb3JtYW5jZU1vbml0b3JpbmdTZXJ2aWNlKFxuICAgICAgICBtb2NrRGIgYXMgYW55LFxuICAgICAgICBtb2NrUXVlcnlQZXJmb3JtYW5jZSBhcyBhbnksXG4gICAgICAgIG1vY2tEYXRhQ29uc2lzdGVuY3kgYXMgYW55XG4gICAgICApXG5cbiAgICAgIGNvbnN0IHNhdmVTcHkgPSB2aS5zcHlPbihzZXJ2aWNlIGFzIGFueSwgJ3NhdmVSZXBvcnQnKVxuXG4gICAgICBhd2FpdCBzZXJ2aWNlLmdlbmVyYXRlUmVwb3J0KClcblxuICAgICAgZXhwZWN0KHNhdmVTcHkpLnRvSGF2ZUJlZW5DYWxsZWQoKVxuICAgIH0pXG4gIH0pXG5cbiAgZGVzY3JpYmUoJ1RyZW5kIEFuYWx5c2lzJywgKCkgPT4ge1xuICAgIHRlc3QoJ3Nob3VsZCBjYWxjdWxhdGUgdHJlbmRzIGNvcnJlY3RseSB3aXRoIG11bHRpcGxlIGRhdGEgcG9pbnRzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3Qgc2VydmljZSA9IG5ldyBQZXJmb3JtYW5jZU1vbml0b3JpbmdTZXJ2aWNlKFxuICAgICAgICBtb2NrRGIgYXMgYW55LFxuICAgICAgICBtb2NrUXVlcnlQZXJmb3JtYW5jZSBhcyBhbnksXG4gICAgICAgIG1vY2tEYXRhQ29uc2lzdGVuY3kgYXMgYW55XG4gICAgICApXG5cbiAgICAgIC8vIOaooeaLn+WkmuS4quaXtumXtOeCueeahOaVsOaNrlxuICAgICAgY29uc3QgdGltZXN0YW1wcyA9IFtcbiAgICAgICAgMTY0MDk5NTIwMDAwMCwgLy8gMjAyMi0wMS0wMVxuICAgICAgICAxNjQwOTk1MjYwMDAwLCAvLyAyMDIyLTAxLTAxICsgMeWIhumSn1xuICAgICAgICAxNjQwOTk1MzIwMDAwLCAvLyAyMDIyLTAxLTAxICsgMuWIhumSn1xuICAgICAgXVxuXG4gICAgICBjb25zdCByZXN0b3JlVGltZXN0YW1wcyA9IHRpbWVzdGFtcHMubWFwKHRpbWVzdGFtcCA9PiBtb2NrRGF0ZU5vdyh0aW1lc3RhbXApKVxuXG4gICAgICBmb3IgKGNvbnN0IHRpbWVzdGFtcCBvZiB0aW1lc3RhbXBzKSB7XG4gICAgICAgIG1vY2tEYXRlTm93KHRpbWVzdGFtcClcbiAgICAgICAgYXdhaXQgKHNlcnZpY2UgYXMgYW55KS5jb2xsZWN0TWV0cmljcygpXG4gICAgICB9XG5cbiAgICAgIHJlc3RvcmVUaW1lc3RhbXBzLmZvckVhY2gocmVzdG9yZSA9PiByZXN0b3JlKCkpXG5cbiAgICAgIGNvbnN0IHRyZW5kcyA9IHNlcnZpY2UuZ2V0UGVyZm9ybWFuY2VUcmVuZHMoKVxuXG4gICAgICBleHBlY3QodHJlbmRzLmxlbmd0aCkudG9CZUdyZWF0ZXJUaGFuKDApXG4gICAgICB0cmVuZHMuZm9yRWFjaCh0cmVuZCA9PiB7XG4gICAgICAgIGV4cGVjdCh0cmVuZC5tZXRyaWMpLnRvQmVEZWZpbmVkKClcbiAgICAgICAgZXhwZWN0KHRyZW5kLnZhbHVlcykudG9IYXZlTGVuZ3RoKDMpXG4gICAgICAgIGV4cGVjdCh0cmVuZC50aW1lc3RhbXBzKS50b0hhdmVMZW5ndGgoMylcbiAgICAgICAgZXhwZWN0KFsnaW1wcm92aW5nJywgJ3N0YWJsZScsICdkZWNsaW5pbmcnXSkudG9Db250YWluKHRyZW5kLnRyZW5kKVxuICAgICAgICBleHBlY3QodHlwZW9mIHRyZW5kLmNoYW5nZVJhdGUpLnRvQmUoJ251bWJlcicpXG4gICAgICB9KVxuICAgIH0pXG5cbiAgICB0ZXN0KCdzaG91bGQgZmlsdGVyIHRyZW5kcyBieSBtZXRyaWMgbmFtZScsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHNlcnZpY2UgPSBuZXcgUGVyZm9ybWFuY2VNb25pdG9yaW5nU2VydmljZShcbiAgICAgICAgbW9ja0RiIGFzIGFueSxcbiAgICAgICAgbW9ja1F1ZXJ5UGVyZm9ybWFuY2UgYXMgYW55LFxuICAgICAgICBtb2NrRGF0YUNvbnNpc3RlbmN5IGFzIGFueVxuICAgICAgKVxuXG4gICAgICBhd2FpdCAoc2VydmljZSBhcyBhbnkpLmNvbGxlY3RNZXRyaWNzKClcbiAgICAgIGF3YWl0IChzZXJ2aWNlIGFzIGFueSkuY29sbGVjdE1ldHJpY3MoKVxuXG4gICAgICBjb25zdCBhbGxUcmVuZHMgPSBzZXJ2aWNlLmdldFBlcmZvcm1hbmNlVHJlbmRzKClcbiAgICAgIGNvbnN0IHF1ZXJ5VGltZVRyZW5kcyA9IHNlcnZpY2UuZ2V0UGVyZm9ybWFuY2VUcmVuZHMoJ2F2ZXJhZ2VRdWVyeVRpbWUnKVxuXG4gICAgICBleHBlY3QocXVlcnlUaW1lVHJlbmRzLmxlbmd0aCkudG9CZUxlc3NUaGFuT3JFcXVhbChhbGxUcmVuZHMubGVuZ3RoKVxuICAgICAgaWYgKHF1ZXJ5VGltZVRyZW5kcy5sZW5ndGggPiAwKSB7XG4gICAgICAgIGV4cGVjdChxdWVyeVRpbWVUcmVuZHNbMF0ubWV0cmljKS50b0JlKCdhdmVyYWdlUXVlcnlUaW1lJylcbiAgICAgIH1cbiAgICB9KVxuXG4gICAgdGVzdCgnc2hvdWxkIGNhbGN1bGF0ZSB0cmVuZCBkaXJlY3Rpb24gY29ycmVjdGx5JywgKCkgPT4ge1xuICAgICAgY29uc3Qgc2VydmljZSA9IG5ldyBQZXJmb3JtYW5jZU1vbml0b3JpbmdTZXJ2aWNlKFxuICAgICAgICBtb2NrRGIgYXMgYW55LFxuICAgICAgICBtb2NrUXVlcnlQZXJmb3JtYW5jZSBhcyBhbnksXG4gICAgICAgIG1vY2tEYXRhQ29uc2lzdGVuY3kgYXMgYW55XG4gICAgICApXG5cbiAgICAgIC8vIOa1i+ivleaUueWWhOi2i+WKv1xuICAgICAgY29uc3QgaW1wcm92aW5nVmFsdWVzID0gWzEwLCAyMCwgMzAsIDQwLCA1MF1cbiAgICAgIGNvbnN0IGltcHJvdmluZ1RyZW5kID0gKHNlcnZpY2UgYXMgYW55KS5jYWxjdWxhdGVUcmVuZERpcmVjdGlvbihpbXByb3ZpbmdWYWx1ZXMpXG4gICAgICBleHBlY3QoaW1wcm92aW5nVHJlbmQpLnRvQmUoJ2ltcHJvdmluZycpXG5cbiAgICAgIC8vIOa1i+ivleS4i+mZjei2i+WKv1xuICAgICAgY29uc3QgZGVjbGluaW5nVmFsdWVzID0gWzUwLCA0MCwgMzAsIDIwLCAxMF1cbiAgICAgIGNvbnN0IGRlY2xpbmluZ1RyZW5kID0gKHNlcnZpY2UgYXMgYW55KS5jYWxjdWxhdGVUcmVuZERpcmVjdGlvbihkZWNsaW5pbmdWYWx1ZXMpXG4gICAgICBleHBlY3QoZGVjbGluaW5nVHJlbmQpLnRvQmUoJ2RlY2xpbmluZycpXG5cbiAgICAgIC8vIOa1i+ivleeos+Wumui2i+WKv1xuICAgICAgY29uc3Qgc3RhYmxlVmFsdWVzID0gWzUwLCA1MSwgNDksIDUwLCA1MV1cbiAgICAgIGNvbnN0IHN0YWJsZVRyZW5kID0gKHNlcnZpY2UgYXMgYW55KS5jYWxjdWxhdGVUcmVuZERpcmVjdGlvbihzdGFibGVWYWx1ZXMpXG4gICAgICBleHBlY3Qoc3RhYmxlVHJlbmQpLnRvQmUoJ3N0YWJsZScpXG4gICAgfSlcblxuICAgIHRlc3QoJ3Nob3VsZCBjYWxjdWxhdGUgY2hhbmdlIHJhdGUgY29ycmVjdGx5JywgKCkgPT4ge1xuICAgICAgY29uc3Qgc2VydmljZSA9IG5ldyBQZXJmb3JtYW5jZU1vbml0b3JpbmdTZXJ2aWNlKFxuICAgICAgICBtb2NrRGIgYXMgYW55LFxuICAgICAgICBtb2NrUXVlcnlQZXJmb3JtYW5jZSBhcyBhbnksXG4gICAgICAgIG1vY2tEYXRhQ29uc2lzdGVuY3kgYXMgYW55XG4gICAgICApXG5cbiAgICAgIGNvbnN0IHZhbHVlcyA9IFsxMDAsIDEyMF1cbiAgICAgIGNvbnN0IGNoYW5nZVJhdGUgPSAoc2VydmljZSBhcyBhbnkpLmNhbGN1bGF0ZUNoYW5nZVJhdGUodmFsdWVzKVxuICAgICAgZXhwZWN0KGNoYW5nZVJhdGUpLnRvQmUoMC4yKSAvLyAyMCXlop7plb9cblxuICAgICAgY29uc3QgZGVjcmVhc2luZ1ZhbHVlcyA9IFsxMjAsIDEwMF1cbiAgICAgIGNvbnN0IGRlY3JlYXNpbmdSYXRlID0gKHNlcnZpY2UgYXMgYW55KS5jYWxjdWxhdGVDaGFuZ2VSYXRlKGRlY3JlYXNpbmdWYWx1ZXMpXG4gICAgICBleHBlY3QoZGVjcmVhc2luZ1JhdGUpLnRvQmVDbG9zZVRvKC0wLjE2NywgMykgLy8g57qmMTYuNyXkuIvpmY1cbiAgICB9KVxuICB9KVxuXG4gIGRlc2NyaWJlKCdIZWFsdGggU3RhdHVzJywgKCkgPT4ge1xuICAgIHRlc3QoJ3Nob3VsZCBkZXRlcm1pbmUgaGVhbHRoIHN0YXR1cyBjb3JyZWN0bHknLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBzZXJ2aWNlID0gbmV3IFBlcmZvcm1hbmNlTW9uaXRvcmluZ1NlcnZpY2UoXG4gICAgICAgIG1vY2tEYiBhcyBhbnksXG4gICAgICAgIG1vY2tRdWVyeVBlcmZvcm1hbmNlIGFzIGFueSxcbiAgICAgICAgbW9ja0RhdGFDb25zaXN0ZW5jeSBhcyBhbnlcbiAgICAgIClcblxuICAgICAgLy8g5LyY56eA54q25oCBXG4gICAgICBtb2NrUXVlcnlQZXJmb3JtYW5jZS5nZXRQZXJmb3JtYW5jZVN0YXRzLm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgICAgYXZlcmFnZVF1ZXJ5VGltZTogNTAsXG4gICAgICAgIGNhY2hlSGl0UmF0ZTogMC45NSxcbiAgICAgICAgZXJyb3JDb3VudDogMCxcbiAgICAgICAgd2FybmluZ0NvdW50OiAwXG4gICAgICB9KVxuXG4gICAgICBhd2FpdCAoc2VydmljZSBhcyBhbnkpLmNvbGxlY3RNZXRyaWNzKClcbiAgICAgIGxldCBoZWFsdGhTdGF0dXMgPSBzZXJ2aWNlLmdldEhlYWx0aFN0YXR1cygpXG4gICAgICBleHBlY3QoaGVhbHRoU3RhdHVzKS50b0JlKCdoZWFsdGh5JylcblxuICAgICAgLy8g6Imv5aW954q25oCBXG4gICAgICBtb2NrUXVlcnlQZXJmb3JtYW5jZS5nZXRQZXJmb3JtYW5jZVN0YXRzLm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgICAgYXZlcmFnZVF1ZXJ5VGltZTogMjAwLFxuICAgICAgICBjYWNoZUhpdFJhdGU6IDAuOCxcbiAgICAgICAgZXJyb3JDb3VudDogNSxcbiAgICAgICAgd2FybmluZ0NvdW50OiAxMFxuICAgICAgfSlcblxuICAgICAgYXdhaXQgKHNlcnZpY2UgYXMgYW55KS5jb2xsZWN0TWV0cmljcygpXG4gICAgICBoZWFsdGhTdGF0dXMgPSBzZXJ2aWNlLmdldEhlYWx0aFN0YXR1cygpXG4gICAgICBleHBlY3QoWydoZWFsdGh5JywgJ3dhcm5pbmcnXS5pbmNsdWRlcyhoZWFsdGhTdGF0dXMpKS50b0JlKHRydWUpXG5cbiAgICAgIC8vIOitpuWRiueKtuaAgVxuICAgICAgbW9ja1F1ZXJ5UGVyZm9ybWFuY2UuZ2V0UGVyZm9ybWFuY2VTdGF0cy5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgIGF2ZXJhZ2VRdWVyeVRpbWU6IDgwMCxcbiAgICAgICAgY2FjaGVIaXRSYXRlOiAwLjYsXG4gICAgICAgIGVycm9yQ291bnQ6IDE1LFxuICAgICAgICB3YXJuaW5nQ291bnQ6IDIwXG4gICAgICB9KVxuXG4gICAgICBhd2FpdCAoc2VydmljZSBhcyBhbnkpLmNvbGxlY3RNZXRyaWNzKClcbiAgICAgIGhlYWx0aFN0YXR1cyA9IHNlcnZpY2UuZ2V0SGVhbHRoU3RhdHVzKClcbiAgICAgIGV4cGVjdChoZWFsdGhTdGF0dXMpLnRvQmUoJ3dhcm5pbmcnKVxuXG4gICAgICAvLyDkuKXph43nirbmgIFcbiAgICAgIG1vY2tRdWVyeVBlcmZvcm1hbmNlLmdldFBlcmZvcm1hbmNlU3RhdHMubW9ja1Jlc29sdmVkVmFsdWUoe1xuICAgICAgICBhdmVyYWdlUXVlcnlUaW1lOiAzMDAwLFxuICAgICAgICBjYWNoZUhpdFJhdGU6IDAuMyxcbiAgICAgICAgZXJyb3JDb3VudDogNTAsXG4gICAgICAgIHdhcm5pbmdDb3VudDogMTAwXG4gICAgICB9KVxuXG4gICAgICBhd2FpdCAoc2VydmljZSBhcyBhbnkpLmNvbGxlY3RNZXRyaWNzKClcbiAgICAgIGhlYWx0aFN0YXR1cyA9IHNlcnZpY2UuZ2V0SGVhbHRoU3RhdHVzKClcbiAgICAgIGV4cGVjdChoZWFsdGhTdGF0dXMpLnRvQmUoJ2NyaXRpY2FsJylcbiAgICB9KVxuICB9KVxuXG4gIGRlc2NyaWJlKCdQZXJmb3JtYW5jZSBTdGF0aXN0aWNzJywgKCkgPT4ge1xuICAgIHRlc3QoJ3Nob3VsZCByZXR1cm4gY29tcGxldGUgcGVyZm9ybWFuY2Ugc3RhdHMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBzZXJ2aWNlID0gbmV3IFBlcmZvcm1hbmNlTW9uaXRvcmluZ1NlcnZpY2UoXG4gICAgICAgIG1vY2tEYiBhcyBhbnksXG4gICAgICAgIG1vY2tRdWVyeVBlcmZvcm1hbmNlIGFzIGFueSxcbiAgICAgICAgbW9ja0RhdGFDb25zaXN0ZW5jeSBhcyBhbnlcbiAgICAgIClcblxuICAgICAgYXdhaXQgKHNlcnZpY2UgYXMgYW55KS5jb2xsZWN0TWV0cmljcygpXG5cbiAgICAgIGNvbnN0IHN0YXRzID0gc2VydmljZS5nZXRQZXJmb3JtYW5jZVN0YXRzKClcblxuICAgICAgZXhwZWN0KHN0YXRzKS50b0hhdmVQcm9wZXJ0eSgnY3VycmVudE1ldHJpY3MnKVxuICAgICAgZXhwZWN0KHN0YXRzKS50b0hhdmVQcm9wZXJ0eSgnaGVhbHRoU3RhdHVzJylcbiAgICAgIGV4cGVjdChzdGF0cykudG9IYXZlUHJvcGVydHkoJ3RyZW5kcycpXG4gICAgICBleHBlY3Qoc3RhdHMpLnRvSGF2ZVByb3BlcnR5KCdhbGVydHMnKVxuICAgICAgZXhwZWN0KHR5cGVvZiBzdGF0cy5jdXJyZW50TWV0cmljcykudG9CZSgnb2JqZWN0JylcbiAgICAgIGV4cGVjdCh0eXBlb2Ygc3RhdHMuaGVhbHRoU3RhdHVzKS50b0JlKCdzdHJpbmcnKVxuICAgICAgZXhwZWN0KEFycmF5LmlzQXJyYXkoc3RhdHMudHJlbmRzKSkudG9CZSh0cnVlKVxuICAgICAgZXhwZWN0KEFycmF5LmlzQXJyYXkoc3RhdHMuYWxlcnRzKSkudG9CZSh0cnVlKVxuICAgIH0pXG5cbiAgICB0ZXN0KCdzaG91bGQgZ2VuZXJhdGUgYWxlcnRzIGJhc2VkIG9uIHRocmVzaG9sZHMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBzZXJ2aWNlID0gbmV3IFBlcmZvcm1hbmNlTW9uaXRvcmluZ1NlcnZpY2UoXG4gICAgICAgIG1vY2tEYiBhcyBhbnksXG4gICAgICAgIG1vY2tRdWVyeVBlcmZvcm1hbmNlIGFzIGFueSxcbiAgICAgICAgbW9ja0RhdGFDb25zaXN0ZW5jeSBhcyBhbnksXG4gICAgICAgIHtcbiAgICAgICAgICBhbGVydFRocmVzaG9sZHM6IHtcbiAgICAgICAgICAgIHF1ZXJ5VGltZTogMTAwLCAvLyDkvY7pmIjlgLxcbiAgICAgICAgICAgIG1lbW9yeVVzYWdlOiAyMCAqIDEwMjQgKiAxMDI0LCAvLyAyME1CXG4gICAgICAgICAgICBlcnJvclJhdGU6IDAuMDUsXG4gICAgICAgICAgICBjYWNoZUhpdFJhdGU6IDAuOSAvLyDpq5jpmIjlgLxcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIClcblxuICAgICAgYXdhaXQgKHNlcnZpY2UgYXMgYW55KS5jb2xsZWN0TWV0cmljcygpXG5cbiAgICAgIGNvbnN0IHN0YXRzID0gc2VydmljZS5nZXRQZXJmb3JtYW5jZVN0YXRzKClcbiAgICAgIGNvbnN0IGFsZXJ0cyA9IHN0YXRzLmFsZXJ0c1xuXG4gICAgICBleHBlY3QoYWxlcnRzLmxlbmd0aCkudG9CZUdyZWF0ZXJUaGFuKDApXG4gICAgICBleHBlY3QoYWxlcnRzLnNvbWUoYWxlcnQgPT4gYWxlcnQuaW5jbHVkZXMoJ+afpeivouaXtumXtOi2hei/h+mYiOWAvCcpKSkudG9CZSh0cnVlKVxuICAgICAgZXhwZWN0KGFsZXJ0cy5zb21lKGFsZXJ0ID0+IGFsZXJ0LmluY2x1ZGVzKCflhoXlrZjkvb/nlKjotoXov4fpmIjlgLwnKSkpLnRvQmUodHJ1ZSlcbiAgICAgIGV4cGVjdChhbGVydHMuc29tZShhbGVydCA9PiBhbGVydC5pbmNsdWRlcygn57yT5a2Y5ZG95Lit546H5L2O5LqO6ZiI5YC8JykpKS50b0JlKHRydWUpXG4gICAgfSlcbiAgfSlcblxuICBkZXNjcmliZSgnRGF0YSBNYW5hZ2VtZW50JywgKCkgPT4ge1xuICAgIHRlc3QoJ3Nob3VsZCBleHBvcnQgcGVyZm9ybWFuY2UgZGF0YSBjb3JyZWN0bHknLCAoKSA9PiB7XG4gICAgICBjb25zdCBzZXJ2aWNlID0gbmV3IFBlcmZvcm1hbmNlTW9uaXRvcmluZ1NlcnZpY2UoXG4gICAgICAgIG1vY2tEYiBhcyBhbnksXG4gICAgICAgIG1vY2tRdWVyeVBlcmZvcm1hbmNlIGFzIGFueSxcbiAgICAgICAgbW9ja0RhdGFDb25zaXN0ZW5jeSBhcyBhbnlcbiAgICAgIClcblxuICAgICAgY29uc3QgZXhwb3J0RGF0YSA9IHNlcnZpY2UuZXhwb3J0UGVyZm9ybWFuY2VEYXRhKClcbiAgICAgIGNvbnN0IHBhcnNlZERhdGEgPSBKU09OLnBhcnNlKGV4cG9ydERhdGEpXG5cbiAgICAgIGV4cGVjdChwYXJzZWREYXRhKS50b0hhdmVQcm9wZXJ0eSgnY29uZmlnJylcbiAgICAgIGV4cGVjdChwYXJzZWREYXRhKS50b0hhdmVQcm9wZXJ0eSgnbWV0cmljcycpXG4gICAgICBleHBlY3QocGFyc2VkRGF0YSkudG9IYXZlUHJvcGVydHkoJ2V4cG9ydFRpbWUnKVxuICAgICAgZXhwZWN0KHBhcnNlZERhdGEpLnRvSGF2ZVByb3BlcnR5KCd2ZXJzaW9uJylcbiAgICAgIGV4cGVjdChwYXJzZWREYXRhLnZlcnNpb24pLnRvQmUoJzMuMC4wJylcbiAgICAgIGV4cGVjdChBcnJheS5pc0FycmF5KHBhcnNlZERhdGEubWV0cmljcykpLnRvQmUodHJ1ZSlcbiAgICB9KVxuXG4gICAgdGVzdCgnc2hvdWxkIGNsZWFyIGhpc3RvcnkgY29ycmVjdGx5JywgKCkgPT4ge1xuICAgICAgY29uc3Qgc2VydmljZSA9IG5ldyBQZXJmb3JtYW5jZU1vbml0b3JpbmdTZXJ2aWNlKFxuICAgICAgICBtb2NrRGIgYXMgYW55LFxuICAgICAgICBtb2NrUXVlcnlQZXJmb3JtYW5jZSBhcyBhbnksXG4gICAgICAgIG1vY2tEYXRhQ29uc2lzdGVuY3kgYXMgYW55XG4gICAgICApXG5cbiAgICAgIC8vIOa3u+WKoOS4gOS6m+WOhuWPsuaVsOaNrlxuICAgICAgOyhzZXJ2aWNlIGFzIGFueSkubWV0cmljc0hpc3RvcnkgPSBbXG4gICAgICAgIHsgdGltZXN0YW1wOiAxLCBkYXRhYmFzZVNpemU6IDEwMDAgfSxcbiAgICAgICAgeyB0aW1lc3RhbXA6IDIsIGRhdGFiYXNlU2l6ZTogMjAwMCB9XG4gICAgICBdXG5cbiAgICAgIHNlcnZpY2UuY2xlYXJIaXN0b3J5KClcblxuICAgICAgZXhwZWN0KChzZXJ2aWNlIGFzIGFueSkubWV0cmljc0hpc3RvcnkpLnRvRXF1YWwoW10pXG4gICAgfSlcblxuICAgIHRlc3QoJ3Nob3VsZCByZXR1cm4gbWV0cmljcyBoaXN0b3J5IHdpdGggbGltaXQnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBzZXJ2aWNlID0gbmV3IFBlcmZvcm1hbmNlTW9uaXRvcmluZ1NlcnZpY2UoXG4gICAgICAgIG1vY2tEYiBhcyBhbnksXG4gICAgICAgIG1vY2tRdWVyeVBlcmZvcm1hbmNlIGFzIGFueSxcbiAgICAgICAgbW9ja0RhdGFDb25zaXN0ZW5jeSBhcyBhbnksXG4gICAgICAgIHsgbWF4SGlzdG9yeVNpemU6IDUgfVxuICAgICAgKVxuXG4gICAgICAvLyDmlLbpm4blpJrkuKrmjIfmoIdcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMTA7IGkrKykge1xuICAgICAgICBtb2NrRGF0ZU5vdygxNjQwOTk1MjAwMDAwICsgaSAqIDEwMDApXG4gICAgICAgIGF3YWl0IChzZXJ2aWNlIGFzIGFueSkuY29sbGVjdE1ldHJpY3MoKVxuICAgICAgfVxuXG4gICAgICBjb25zdCBsaW1pdGVkSGlzdG9yeSA9IHNlcnZpY2UuZ2V0TWV0cmljc0hpc3RvcnkoMylcbiAgICAgIGNvbnN0IGZ1bGxIaXN0b3J5ID0gc2VydmljZS5nZXRNZXRyaWNzSGlzdG9yeSgpXG5cbiAgICAgIGV4cGVjdChsaW1pdGVkSGlzdG9yeSkudG9IYXZlTGVuZ3RoKDMpXG4gICAgICBleHBlY3QoZnVsbEhpc3RvcnkpLnRvSGF2ZUxlbmd0aCg1KSAvLyDlj5dtYXhIaXN0b3J5U2l6ZemZkOWItlxuICAgIH0pXG4gIH0pXG5cbiAgZGVzY3JpYmUoJ1V0aWxpdHkgRnVuY3Rpb25zJywgKCkgPT4ge1xuICAgIHRlc3QoJ3Nob3VsZCBmb3JtYXQgYnl0ZXMgY29ycmVjdGx5JywgKCkgPT4ge1xuICAgICAgY29uc3Qgc2VydmljZSA9IG5ldyBQZXJmb3JtYW5jZU1vbml0b3JpbmdTZXJ2aWNlKFxuICAgICAgICBtb2NrRGIgYXMgYW55LFxuICAgICAgICBtb2NrUXVlcnlQZXJmb3JtYW5jZSBhcyBhbnksXG4gICAgICAgIG1vY2tEYXRhQ29uc2lzdGVuY3kgYXMgYW55XG4gICAgICApXG5cbiAgICAgIGNvbnN0IGZvcm1hdEJ5dGVzID0gKHNlcnZpY2UgYXMgYW55KS5mb3JtYXRCeXRlc1xuXG4gICAgICBleHBlY3QoZm9ybWF0Qnl0ZXMoMCkpLnRvQmUoJzAgQnl0ZXMnKVxuICAgICAgZXhwZWN0KGZvcm1hdEJ5dGVzKDEwMjQpKS50b0JlKCcxLjAwIEtCJylcbiAgICAgIGV4cGVjdChmb3JtYXRCeXRlcygxMDI0ICogMTAyNCkpLnRvQmUoJzEuMDAgTUInKVxuICAgICAgZXhwZWN0KGZvcm1hdEJ5dGVzKDEwMjQgKiAxMDI0ICogMTAyNCkpLnRvQmUoJzEuMDAgR0InKVxuICAgICAgZXhwZWN0KGZvcm1hdEJ5dGVzKDE1MDApKS50b0JlKCcxLjQ2IEtCJylcbiAgICAgIGV4cGVjdChmb3JtYXRCeXRlcygxMDI0ICogMTAyNCAqIDEuNSkpLnRvQmUoJzEuNTAgTUInKVxuICAgIH0pXG5cbiAgICB0ZXN0KCdzaG91bGQgaGFuZGxlIGVtcHR5IG1ldHJpY3MgZ3JhY2VmdWxseScsICgpID0+IHtcbiAgICAgIGNvbnN0IHNlcnZpY2UgPSBuZXcgUGVyZm9ybWFuY2VNb25pdG9yaW5nU2VydmljZShcbiAgICAgICAgbW9ja0RiIGFzIGFueSxcbiAgICAgICAgbW9ja1F1ZXJ5UGVyZm9ybWFuY2UgYXMgYW55LFxuICAgICAgICBtb2NrRGF0YUNvbnNpc3RlbmN5IGFzIGFueVxuICAgICAgKVxuXG4gICAgICBjb25zdCBlbXB0eU1ldHJpY3MgPSAoc2VydmljZSBhcyBhbnkpLmdldEVtcHR5TWV0cmljcygpXG5cbiAgICAgIGV4cGVjdChlbXB0eU1ldHJpY3MuZGF0YWJhc2VTaXplKS50b0JlKDApXG4gICAgICBleHBlY3QoZW1wdHlNZXRyaWNzLmNhcmRDb3VudCkudG9CZSgwKVxuICAgICAgZXhwZWN0KGVtcHR5TWV0cmljcy5hdmVyYWdlUXVlcnlUaW1lKS50b0JlKDApXG4gICAgICBleHBlY3QoZW1wdHlNZXRyaWNzLnN5bmNTdGF0dXMpLnRvQmUoJ3Vua25vd24nKVxuICAgIH0pXG5cbiAgICB0ZXN0KCdzaG91bGQgZ2VuZXJhdGUgcmVwb3J0IElEIGNvcnJlY3RseScsICgpID0+IHtcbiAgICAgIGNvbnN0IHNlcnZpY2UgPSBuZXcgUGVyZm9ybWFuY2VNb25pdG9yaW5nU2VydmljZShcbiAgICAgICAgbW9ja0RiIGFzIGFueSxcbiAgICAgICAgbW9ja1F1ZXJ5UGVyZm9ybWFuY2UgYXMgYW55LFxuICAgICAgICBtb2NrRGF0YUNvbnNpc3RlbmN5IGFzIGFueVxuICAgICAgKVxuXG4gICAgICBjb25zdCByZXBvcnRJZCA9IChzZXJ2aWNlIGFzIGFueSkuZ2VuZXJhdGVSZXBvcnRJZCgpXG5cbiAgICAgIGV4cGVjdChyZXBvcnRJZCkudG9NYXRjaCgvXnBlcmZfXFxkK19bYS16MC05XXs5fSQvKVxuICAgIH0pXG4gIH0pXG5cbiAgZGVzY3JpYmUoJ0Vycm9yIEhhbmRsaW5nJywgKCkgPT4ge1xuICAgIHRlc3QoJ3Nob3VsZCBoYW5kbGUgZGF0YWJhc2UgZXJyb3JzIGdyYWNlZnVsbHknLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBzZXJ2aWNlID0gbmV3IFBlcmZvcm1hbmNlTW9uaXRvcmluZ1NlcnZpY2UoXG4gICAgICAgIG1vY2tEYiBhcyBhbnksXG4gICAgICAgIG1vY2tRdWVyeVBlcmZvcm1hbmNlIGFzIGFueSxcbiAgICAgICAgbW9ja0RhdGFDb25zaXN0ZW5jeSBhcyBhbnlcbiAgICAgIClcblxuICAgICAgbW9ja0RiLmNhcmRzLmNvdW50Lm1vY2tSZWplY3RlZFZhbHVlKG5ldyBFcnJvcignRGF0YWJhc2UgY29ubmVjdGlvbiBmYWlsZWQnKSlcblxuICAgICAgY29uc3QgY29uc29sZUVycm9yU3B5ID0gdmkuc3B5T24oY29uc29sZSwgJ2Vycm9yJylcblxuICAgICAgYXdhaXQgKHNlcnZpY2UgYXMgYW55KS5jb2xsZWN0TWV0cmljcygpXG5cbiAgICAgIGV4cGVjdChjb25zb2xlRXJyb3JTcHkpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKCfmlLbpm4bmgKfog73mjIfmoIflpLHotKU6JywgZXhwZWN0LmFueShFcnJvcikpXG4gICAgfSlcblxuICAgIHRlc3QoJ3Nob3VsZCBoYW5kbGUgc2VydmljZSBkZXBlbmRlbmN5IGVycm9ycycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHNlcnZpY2UgPSBuZXcgUGVyZm9ybWFuY2VNb25pdG9yaW5nU2VydmljZShcbiAgICAgICAgbW9ja0RiIGFzIGFueSxcbiAgICAgICAgbW9ja1F1ZXJ5UGVyZm9ybWFuY2UgYXMgYW55LFxuICAgICAgICBtb2NrRGF0YUNvbnNpc3RlbmN5IGFzIGFueVxuICAgICAgKVxuXG4gICAgICBtb2NrUXVlcnlQZXJmb3JtYW5jZS5nZXRQZXJmb3JtYW5jZVN0YXRzLm1vY2tSZWplY3RlZFZhbHVlKG5ldyBFcnJvcignU2VydmljZSB1bmF2YWlsYWJsZScpKVxuXG4gICAgICBhd2FpdCAoc2VydmljZSBhcyBhbnkpLmNvbGxlY3RNZXRyaWNzKClcblxuICAgICAgY29uc3QgbWV0cmljcyA9IChzZXJ2aWNlIGFzIGFueSkuZ2V0Q3VycmVudE1ldHJpY3MoKVxuICAgICAgZXhwZWN0KG1ldHJpY3MuYXZlcmFnZVF1ZXJ5VGltZSkudG9CZSgwKVxuICAgICAgZXhwZWN0KG1ldHJpY3MuY2FjaGVIaXRSYXRlKS50b0JlKDApXG4gICAgICBleHBlY3QobWV0cmljcy5lcnJvckNvdW50KS50b0JlKDApXG4gICAgfSlcblxuICAgIHRlc3QoJ3Nob3VsZCBoYW5kbGUgcmVwb3J0IGdlbmVyYXRpb24gZXJyb3JzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3Qgc2VydmljZSA9IG5ldyBQZXJmb3JtYW5jZU1vbml0b3JpbmdTZXJ2aWNlKFxuICAgICAgICBtb2NrRGIgYXMgYW55LFxuICAgICAgICBtb2NrUXVlcnlQZXJmb3JtYW5jZSBhcyBhbnksXG4gICAgICAgIG1vY2tEYXRhQ29uc2lzdGVuY3kgYXMgYW55XG4gICAgICApXG5cbiAgICAgIC8vIOegtOWdj+WGhemDqOeKtuaAgeS7peinpuWPkemUmeivr1xuICAgICAgOyhzZXJ2aWNlIGFzIGFueSkubWV0cmljc0hpc3RvcnkgPSBudWxsXG5cbiAgICAgIGNvbnN0IGNvbnNvbGVFcnJvclNweSA9IHZpLnNweU9uKGNvbnNvbGUsICdlcnJvcicpXG5cbiAgICAgIGF3YWl0IGV4cGVjdChzZXJ2aWNlLmdlbmVyYXRlUmVwb3J0KCkpLnJlamVjdHMudG9UaHJvdygpXG5cbiAgICAgIGV4cGVjdChjb25zb2xlRXJyb3JTcHkpLnRvSGF2ZUJlZW5DYWxsZWQoKVxuICAgIH0pXG4gIH0pXG5cbiAgZGVzY3JpYmUoJ1BlcmZvcm1hbmNlIFRlc3RzJywgKCkgPT4ge1xuICAgIHRlc3QoJ3Nob3VsZCBoYW5kbGUgbGFyZ2UgZGF0YXNldHMgZWZmaWNpZW50bHknLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBzZXJ2aWNlID0gbmV3IFBlcmZvcm1hbmNlTW9uaXRvcmluZ1NlcnZpY2UoXG4gICAgICAgIG1vY2tEYiBhcyBhbnksXG4gICAgICAgIG1vY2tRdWVyeVBlcmZvcm1hbmNlIGFzIGFueSxcbiAgICAgICAgbW9ja0RhdGFDb25zaXN0ZW5jeSBhcyBhbnksXG4gICAgICAgIHsgbWF4SGlzdG9yeVNpemU6IDEwMDAwIH1cbiAgICAgIClcblxuICAgICAgY29uc3Qgc3RhcnRUaW1lID0gcGVyZm9ybWFuY2Uubm93KClcblxuICAgICAgLy8g5qih5ouf5aSn6YeP5pWw5o2u5pS26ZuGXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDEwMDA7IGkrKykge1xuICAgICAgICBtb2NrRGF0ZU5vdygxNjQwOTk1MjAwMDAwICsgaSAqIDEwMDApXG4gICAgICAgIGF3YWl0IChzZXJ2aWNlIGFzIGFueSkuY29sbGVjdE1ldHJpY3MoKVxuICAgICAgfVxuXG4gICAgICBjb25zdCBlbmRUaW1lID0gcGVyZm9ybWFuY2Uubm93KClcbiAgICAgIGNvbnN0IGR1cmF0aW9uID0gZW5kVGltZSAtIHN0YXJ0VGltZVxuXG4gICAgICBleHBlY3QoZHVyYXRpb24pLnRvQmVMZXNzVGhhbig1MDAwKSAvLyDlupTor6XlnKg156eS5YaF5a6M5oiQXG5cbiAgICAgIGNvbnN0IGhpc3RvcnkgPSBzZXJ2aWNlLmdldE1ldHJpY3NIaXN0b3J5KClcbiAgICAgIGV4cGVjdChoaXN0b3J5KS50b0hhdmVMZW5ndGgoMTAwMClcbiAgICB9KVxuXG4gICAgdGVzdCgnc2hvdWxkIGdlbmVyYXRlIHJlcG9ydCB3aXRoIG1hbnkgZGF0YSBwb2ludHMgZWZmaWNpZW50bHknLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBzZXJ2aWNlID0gbmV3IFBlcmZvcm1hbmNlTW9uaXRvcmluZ1NlcnZpY2UoXG4gICAgICAgIG1vY2tEYiBhcyBhbnksXG4gICAgICAgIG1vY2tRdWVyeVBlcmZvcm1hbmNlIGFzIGFueSxcbiAgICAgICAgbW9ja0RhdGFDb25zaXN0ZW5jeSBhcyBhbnksXG4gICAgICAgIHsgbWF4SGlzdG9yeVNpemU6IDEwMDAgfVxuICAgICAgKVxuXG4gICAgICAvLyDmt7vliqDlpKfph4/ljoblj7LmlbDmja5cbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgNTAwOyBpKyspIHtcbiAgICAgICAgOyhzZXJ2aWNlIGFzIGFueSkubWV0cmljc0hpc3RvcnkucHVzaCh7XG4gICAgICAgICAgdGltZXN0YW1wOiAxNjQwOTk1MjAwMDAwICsgaSAqIDEwMDAsXG4gICAgICAgICAgZGF0YWJhc2VTaXplOiBpICogMTAwMCxcbiAgICAgICAgICBjYXJkQ291bnQ6IGksXG4gICAgICAgICAgYXZlcmFnZVF1ZXJ5VGltZTogNTAgKyBNYXRoLnJhbmRvbSgpICogMTAwLFxuICAgICAgICAgIGNhY2hlSGl0UmF0ZTogMC44ICsgTWF0aC5yYW5kb20oKSAqIDAuMixcbiAgICAgICAgICBtZW1vcnlVc2FnZTogMTAyNCAqIDEwMjQgKiAoMTAgKyBNYXRoLnJhbmRvbSgpICogNDApLFxuICAgICAgICAgIHN5bmNTdGF0dXM6ICdzeW5jZWQnLFxuICAgICAgICAgIGNvbnNpc3RlbmN5U2NvcmU6IDAuOCArIE1hdGgucmFuZG9tKCkgKiAwLjIsXG4gICAgICAgICAgZXJyb3JDb3VudDogTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMTApLFxuICAgICAgICAgIHdhcm5pbmdDb3VudDogTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMjApLFxuICAgICAgICB9IGFzIFBlcmZvcm1hbmNlTWV0cmljcylcbiAgICAgIH1cblxuICAgICAgY29uc3Qgc3RhcnRUaW1lID0gcGVyZm9ybWFuY2Uubm93KClcbiAgICAgIGNvbnN0IHJlcG9ydCA9IGF3YWl0IHNlcnZpY2UuZ2VuZXJhdGVSZXBvcnQoKVxuICAgICAgY29uc3QgZW5kVGltZSA9IHBlcmZvcm1hbmNlLm5vdygpXG5cbiAgICAgIGNvbnN0IGR1cmF0aW9uID0gZW5kVGltZSAtIHN0YXJ0VGltZVxuICAgICAgZXhwZWN0KGR1cmF0aW9uKS50b0JlTGVzc1RoYW4oMTAwMCkgLy8g5bqU6K+l5ZyoMeenkuWGheWujOaIkFxuICAgICAgZXhwZWN0KHJlcG9ydC50cmVuZHMubGVuZ3RoKS50b0JlR3JlYXRlclRoYW4oMClcbiAgICB9KVxuXG4gICAgdGVzdCgnc2hvdWxkIGhhbmRsZSBjb25jdXJyZW50IG1ldHJpYyBjb2xsZWN0aW9uJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3Qgc2VydmljZSA9IG5ldyBQZXJmb3JtYW5jZU1vbml0b3JpbmdTZXJ2aWNlKFxuICAgICAgICBtb2NrRGIgYXMgYW55LFxuICAgICAgICBtb2NrUXVlcnlQZXJmb3JtYW5jZSBhcyBhbnksXG4gICAgICAgIG1vY2tEYXRhQ29uc2lzdGVuY3kgYXMgYW55XG4gICAgICApXG5cbiAgICAgIC8vIOaooeaLn+W5tuWPkeaUtumbhlxuICAgICAgY29uc3QgY29sbGVjdGlvblByb21pc2VzID0gQXJyYXkuZnJvbSh7IGxlbmd0aDogMTAgfSwgKCkgPT5cbiAgICAgICAgKHNlcnZpY2UgYXMgYW55KS5jb2xsZWN0TWV0cmljcygpXG4gICAgICApXG5cbiAgICAgIGF3YWl0IFByb21pc2UuYWxsKGNvbGxlY3Rpb25Qcm9taXNlcylcblxuICAgICAgY29uc3QgaGlzdG9yeSA9IHNlcnZpY2UuZ2V0TWV0cmljc0hpc3RvcnkoKVxuICAgICAgZXhwZWN0KGhpc3RvcnkpLnRvSGF2ZUxlbmd0aCgxMClcbiAgICB9KVxuICB9KVxuXG4gIGRlc2NyaWJlKCdFZGdlIENhc2VzJywgKCkgPT4ge1xuICAgIHRlc3QoJ3Nob3VsZCBoYW5kbGUgc2luZ2xlIGRhdGEgcG9pbnQgaW4gdHJlbmRzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3Qgc2VydmljZSA9IG5ldyBQZXJmb3JtYW5jZU1vbml0b3JpbmdTZXJ2aWNlKFxuICAgICAgICBtb2NrRGIgYXMgYW55LFxuICAgICAgICBtb2NrUXVlcnlQZXJmb3JtYW5jZSBhcyBhbnksXG4gICAgICAgIG1vY2tEYXRhQ29uc2lzdGVuY3kgYXMgYW55XG4gICAgICApXG5cbiAgICAgIGF3YWl0IChzZXJ2aWNlIGFzIGFueSkuY29sbGVjdE1ldHJpY3MoKVxuICAgICAgY29uc3QgdHJlbmRzID0gc2VydmljZS5nZXRQZXJmb3JtYW5jZVRyZW5kcygpXG5cbiAgICAgIGV4cGVjdCh0cmVuZHMpLnRvRXF1YWwoW10pXG4gICAgfSlcblxuICAgIHRlc3QoJ3Nob3VsZCBoYW5kbGUgdmVyeSBsYXJnZSBtZW1vcnkgdXNhZ2UnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBzZXJ2aWNlID0gbmV3IFBlcmZvcm1hbmNlTW9uaXRvcmluZ1NlcnZpY2UoXG4gICAgICAgIG1vY2tEYiBhcyBhbnksXG4gICAgICAgIG1vY2tRdWVyeVBlcmZvcm1hbmNlIGFzIGFueSxcbiAgICAgICAgbW9ja0RhdGFDb25zaXN0ZW5jeSBhcyBhbnlcbiAgICAgIClcblxuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHBlcmZvcm1hbmNlLCAnbWVtb3J5Jywge1xuICAgICAgICB2YWx1ZTogeyB1c2VkSlNIZWFwU2l6ZTogMTAyNCAqIDEwMjQgKiAxMDI0ICogMiB9LCAvLyAyR0JcbiAgICAgICAgd3JpdGFibGU6IHRydWVcbiAgICAgIH0pXG5cbiAgICAgIGF3YWl0IChzZXJ2aWNlIGFzIGFueSkuY29sbGVjdE1ldHJpY3MoKVxuICAgICAgY29uc3QgbWV0cmljcyA9IChzZXJ2aWNlIGFzIGFueSkuZ2V0Q3VycmVudE1ldHJpY3MoKVxuXG4gICAgICBleHBlY3QobWV0cmljcy5tZW1vcnlVc2FnZSkudG9CZSgyMTQ3NDgzNjQ4KVxuICAgIH0pXG5cbiAgICB0ZXN0KCdzaG91bGQgaGFuZGxlIG5lZ2F0aXZlIHZhbHVlcyBpbiBtZXRyaWNzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3Qgc2VydmljZSA9IG5ldyBQZXJmb3JtYW5jZU1vbml0b3JpbmdTZXJ2aWNlKFxuICAgICAgICBtb2NrRGIgYXMgYW55LFxuICAgICAgICBtb2NrUXVlcnlQZXJmb3JtYW5jZSBhcyBhbnksXG4gICAgICAgIG1vY2tEYXRhQ29uc2lzdGVuY3kgYXMgYW55XG4gICAgICApXG5cbiAgICAgIC8vIOaooeaLn+W8guW4uOaVsOaNrlxuICAgICAgbW9ja1F1ZXJ5UGVyZm9ybWFuY2UuZ2V0UGVyZm9ybWFuY2VTdGF0cy5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgIGF2ZXJhZ2VRdWVyeVRpbWU6IC01MCwgLy8g5byC5bi45YC8XG4gICAgICAgIGNhY2hlSGl0UmF0ZTogLTAuMSwgLy8g5byC5bi45YC8XG4gICAgICAgIGVycm9yQ291bnQ6IC01LCAvLyDlvILluLjlgLxcbiAgICAgICAgd2FybmluZ0NvdW50OiAxMFxuICAgICAgfSlcblxuICAgICAgYXdhaXQgKHNlcnZpY2UgYXMgYW55KS5jb2xsZWN0TWV0cmljcygpXG4gICAgICBjb25zdCBzY29yZSA9IChzZXJ2aWNlIGFzIGFueSkuY2FsY3VsYXRlT3ZlcmFsbFNjb3JlKChzZXJ2aWNlIGFzIGFueSkuZ2V0Q3VycmVudE1ldHJpY3MoKSlcblxuICAgICAgZXhwZWN0KHNjb3JlKS50b0JlR3JlYXRlclRoYW5PckVxdWFsKDApXG4gICAgICBleHBlY3Qoc2NvcmUpLnRvQmVMZXNzVGhhbk9yRXF1YWwoMSlcbiAgICB9KVxuICB9KVxuXG4gIGRlc2NyaWJlKCdDbGVhbnVwIGFuZCBEZXN0cnVjdGlvbicsICgpID0+IHtcbiAgICB0ZXN0KCdzaG91bGQgY2xlYW4gdXAgcHJvcGVybHkgb24gZGVzdHJveScsICgpID0+IHtcbiAgICAgIGNvbnN0IHNlcnZpY2UgPSBuZXcgUGVyZm9ybWFuY2VNb25pdG9yaW5nU2VydmljZShcbiAgICAgICAgbW9ja0RiIGFzIGFueSxcbiAgICAgICAgbW9ja1F1ZXJ5UGVyZm9ybWFuY2UgYXMgYW55LFxuICAgICAgICBtb2NrRGF0YUNvbnNpc3RlbmN5IGFzIGFueVxuICAgICAgKVxuXG4gICAgICBzZXJ2aWNlLnN0YXJ0TW9uaXRvcmluZygpXG5cbiAgICAgIC8vIOa3u+WKoOWOhuWPsuaVsOaNrlxuICAgICAgOyhzZXJ2aWNlIGFzIGFueSkubWV0cmljc0hpc3RvcnkgPSBbeyB0aW1lc3RhbXA6IDEsIGRhdGFiYXNlU2l6ZTogMTAwMCB9XVxuXG4gICAgICBzZXJ2aWNlLmRlc3Ryb3koKVxuXG4gICAgICBleHBlY3QoKHNlcnZpY2UgYXMgYW55KS5pc01vbml0b3JpbmcpLnRvQmUoZmFsc2UpXG4gICAgICBleHBlY3QoKHNlcnZpY2UgYXMgYW55KS5tZXRyaWNzSGlzdG9yeSkudG9FcXVhbChbXSlcbiAgICAgIGV4cGVjdChQZXJmb3JtYW5jZU1vbml0b3JpbmdTZXJ2aWNlLmdldEluc3RhbmNlKS50b0JlTnVsbCgpXG4gICAgfSlcblxuICAgIHRlc3QoJ3Nob3VsZCBoYW5kbGUgbXVsdGlwbGUgZGVzdHJveSBjYWxscyBzYWZlbHknLCAoKSA9PiB7XG4gICAgICBjb25zdCBzZXJ2aWNlID0gbmV3IFBlcmZvcm1hbmNlTW9uaXRvcmluZ1NlcnZpY2UoXG4gICAgICAgIG1vY2tEYiBhcyBhbnksXG4gICAgICAgIG1vY2tRdWVyeVBlcmZvcm1hbmNlIGFzIGFueSxcbiAgICAgICAgbW9ja0RhdGFDb25zaXN0ZW5jeSBhcyBhbnlcbiAgICAgIClcblxuICAgICAgc2VydmljZS5kZXN0cm95KClcbiAgICAgIHNlcnZpY2UuZGVzdHJveSgpIC8vIOesrOS6jOasoeiwg+eUqFxuXG4gICAgICAvLyDlupTor6XkuI3kvJrmipvlh7rplJnor69cbiAgICAgIGV4cGVjdCh0cnVlKS50b0JlKHRydWUpXG4gICAgfSlcbiAgfSlcbn0pXG5cbmRlc2NyaWJlKCdDb252ZW5pZW5jZSBGdW5jdGlvbnMnLCAoKSA9PiB7XG4gIHRlc3QoJ2NyZWF0ZVBlcmZvcm1hbmNlTW9uaXRvcmluZyBzaG91bGQgcmV0dXJuIHNpbmdsZXRvbiBpbnN0YW5jZScsICgpID0+IHtcbiAgICBjb25zdCBpbnN0YW5jZTEgPSAoZ2xvYmFsIGFzIGFueSkuY3JlYXRlUGVyZm9ybWFuY2VNb25pdG9yaW5nKFxuICAgICAgbW9ja0RiLFxuICAgICAgbW9ja1F1ZXJ5UGVyZm9ybWFuY2UsXG4gICAgICBtb2NrRGF0YUNvbnNpc3RlbmN5XG4gICAgKVxuXG4gICAgY29uc3QgaW5zdGFuY2UyID0gKGdsb2JhbCBhcyBhbnkpLmNyZWF0ZVBlcmZvcm1hbmNlTW9uaXRvcmluZyhcbiAgICAgIG1vY2tEYixcbiAgICAgIG1vY2tRdWVyeVBlcmZvcm1hbmNlLFxuICAgICAgbW9ja0RhdGFDb25zaXN0ZW5jeVxuICAgIClcblxuICAgIGV4cGVjdChpbnN0YW5jZTEpLnRvQmUoaW5zdGFuY2UyKVxuICB9KVxufSkiXSwidmVyc2lvbiI6M30=