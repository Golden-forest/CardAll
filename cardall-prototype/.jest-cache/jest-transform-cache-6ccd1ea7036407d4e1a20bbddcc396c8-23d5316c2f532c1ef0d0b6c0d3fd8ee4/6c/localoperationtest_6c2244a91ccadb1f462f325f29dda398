608f9871a1c89ea2abc859e7acfe950d
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
// 模拟数据库
jest.mock('@/services/database', () => ({
    db: {
        syncQueue: {
            add: jest.fn(),
            get: jest.fn(),
            getAll: jest.fn(),
            update: jest.fn(),
            delete: jest.fn(),
            clear: jest.fn(),
            where: jest.fn().mockReturnThis(),
            equals: jest.fn().mockReturnThis(),
            sort: jest.fn().mockReturnThis(),
            toArray: jest.fn(),
        }
    }
}));
const local_operation_1 = require("@/services/local-operation");
const database_1 = require("@/services/database");
describe('LocalOperationService', () => {
    let service;
    let mockDb;
    beforeEach(() => {
        jest.clearAllMocks();
        mockDb = database_1.db.syncQueue;
        service = new local_operation_1.LocalOperationService();
        // 模拟 localStorage
        const localStorageMock = {
            getItem: jest.fn(),
            setItem: jest.fn(),
            removeItem: jest.fn(),
            clear: jest.fn(),
        };
        Object.defineProperty(window, 'localStorage', { value: localStorageMock });
    });
    describe('初始化', () => {
        it('应该正确初始化服务', async () => {
            await service.initialize();
            expect(service).toBeDefined();
        });
        it('应该从本地存储恢复队列', async () => {
            const mockQueue = [
                {
                    id: 'test-1',
                    type: 'create',
                    table: 'cards',
                    data: { frontContent: 'test' },
                    localId: 'card-1',
                    timestamp: new Date().toISOString(),
                    retryCount: 0,
                    status: 'pending',
                    localVersion: 1
                }
            ];
            localStorage.getItem = jest.fn().mockReturnValue(JSON.stringify(mockQueue));
            mockDb.toArray = jest.fn().mockResolvedValue([]);
            await service.initialize();
            const stats = await service.getQueueStats();
            expect(stats.totalOperations).toBe(1);
        });
    });
    describe('添加操作', () => {
        it('应该成功添加操作到队列', async () => {
            mockDb.add = jest.fn().mockResolvedValue('test-id');
            mockDb.toArray = jest.fn().mockResolvedValue([]);
            const operationId = await service.addOperation({
                type: 'create',
                table: 'cards',
                data: { frontContent: 'test', backContent: 'answer' },
                localId: 'card-1',
                priority: 'normal',
                dependencies: []
            });
            expect(operationId).toBeDefined();
            expect(mockDb.add).toHaveBeenCalled();
        });
        it('应该处理重复操作', async () => {
            const mockOperation = {
                id: 'existing-op',
                type: 'update',
                table: 'cards',
                data: { frontContent: 'updated' },
                localId: 'card-1',
                timestamp: new Date().toISOString(),
                retryCount: 0,
                status: 'pending',
                localVersion: 1
            };
            mockDb.toArray = jest.fn().mockResolvedValue([mockOperation]);
            mockDb.update = jest.fn().mockResolvedValue(1);
            await service.addOperation({
                type: 'update',
                table: 'cards',
                data: { frontContent: 'new update' },
                localId: 'card-1'
            });
            expect(mockDb.update).toHaveBeenCalled();
        });
        it('应该验证必需字段', async () => {
            await expect(service.addOperation({
                type: 'create',
                table: 'cards',
                data: { frontContent: 'test' },
                localId: ''
            })).rejects.toThrow('Local ID is required');
        });
    });
    describe('队列统计', () => {
        it('应该返回正确的队列统计信息', async () => {
            const mockOperations = [
                {
                    id: 'op-1',
                    type: 'create',
                    table: 'cards',
                    data: {},
                    localId: 'card-1',
                    timestamp: new Date().toISOString(),
                    retryCount: 0,
                    status: 'pending',
                    localVersion: 1,
                    priority: 'high'
                },
                {
                    id: 'op-2',
                    type: 'update',
                    table: 'folders',
                    data: {},
                    localId: 'folder-1',
                    timestamp: new Date().toISOString(),
                    retryCount: 2,
                    status: 'retry',
                    localVersion: 1,
                    priority: 'normal'
                },
                {
                    id: 'op-3',
                    type: 'delete',
                    table: 'cards',
                    data: {},
                    localId: 'card-2',
                    timestamp: new Date().toISOString(),
                    retryCount: 4,
                    status: 'failed',
                    localVersion: 1,
                    priority: 'low'
                }
            ];
            mockDb.toArray = jest.fn().mockResolvedValue(mockOperations);
            const stats = await service.getQueueStats();
            expect(stats.totalOperations).toBe(3);
            expect(stats.byType.create).toBe(1);
            expect(stats.byType.update).toBe(1);
            expect(stats.byType.delete).toBe(1);
            expect(stats.byStatus.pending).toBe(1);
            expect(stats.byStatus.retry).toBe(1);
            expect(stats.byStatus.failed).toBe(1);
            expect(stats.byPriority.high).toBe(1);
            expect(stats.averageRetryCount).toBe(2);
        });
        it('应该处理空队列', async () => {
            mockDb.toArray = jest.fn().mockResolvedValue([]);
            const stats = await service.getQueueStats();
            expect(stats.totalOperations).toBe(0);
            expect(stats.byType).toEqual({});
            expect(stats.byStatus).toEqual({});
            expect(stats.averageRetryCount).toBe(0);
        });
    });
    describe('操作处理', () => {
        it('应该按优先级处理操作', async () => {
            const mockOperations = [
                {
                    id: 'low-priority',
                    type: 'create',
                    table: 'cards',
                    data: {},
                    localId: 'card-1',
                    timestamp: new Date().toISOString(),
                    retryCount: 0,
                    status: 'pending',
                    localVersion: 1,
                    priority: 'low'
                },
                {
                    id: 'high-priority',
                    type: 'create',
                    table: 'cards',
                    data: {},
                    localId: 'card-2',
                    timestamp: new Date().toISOString(),
                    retryCount: 0,
                    status: 'pending',
                    localVersion: 1,
                    priority: 'high'
                }
            ];
            mockDb.toArray = jest.fn().mockResolvedValue(mockOperations);
            mockDb.update = jest.fn().mockResolvedValue(1);
            mockDb.delete = jest.fn().mockResolvedValue(1);
            await service.processQueue();
            // 验证高优先级操作先被处理
            expect(mockDb.update).toHaveBeenCalledWith(expect.objectContaining({ id: 'high-priority' }), expect.objectContaining({ status: 'processing' }));
        });
        it('应该正确处理操作依赖', async () => {
            const mockOperations = [
                {
                    id: 'dependency',
                    type: 'create',
                    table: 'folders',
                    data: {},
                    localId: 'folder-1',
                    timestamp: new Date().toISOString(),
                    retryCount: 0,
                    status: 'pending',
                    localVersion: 1,
                    priority: 'normal',
                    dependencies: []
                },
                {
                    id: 'dependent',
                    type: 'create',
                    table: 'cards',
                    data: {},
                    localId: 'card-1',
                    timestamp: new Date().toISOString(),
                    retryCount: 0,
                    status: 'pending',
                    localVersion: 1,
                    priority: 'normal',
                    dependencies: ['folder-1']
                }
            ];
            mockDb.toArray = jest.fn().mockResolvedValue(mockOperations);
            mockDb.update = jest.fn().mockResolvedValue(1);
            mockDb.delete = jest.fn().mockResolvedValue(1);
            await service.processQueue();
            // 验证依赖关系被正确处理
            const updateCalls = mockDb.update.mock.calls;
            expect(updateCalls).toHaveLength(2);
            // 第一个被处理的应该是没有依赖的操作
            const firstOperation = updateCalls[0][0];
            expect(firstOperation.id).toBe('dependency');
        });
        it('应该处理重试逻辑', async () => {
            const mockOperation = {
                id: 'failing-op',
                type: 'create',
                table: 'cards',
                data: {},
                localId: 'card-1',
                timestamp: new Date().toISOString(),
                retryCount: 1,
                status: 'pending',
                localVersion: 1,
                priority: 'normal'
            };
            mockDb.toArray = jest.fn().mockResolvedValue([mockOperation]);
            mockDb.update = jest.fn().mockResolvedValue(1);
            // 模拟操作失败
            jest.spyOn(service, 'executeOperation').mockRejectedValue(new Error('Network error'));
            await service.processQueue();
            expect(mockDb.update).toHaveBeenCalledWith(expect.objectContaining({ id: 'failing-op' }), expect.objectContaining({
                retryCount: 2,
                status: 'retry',
                lastError: 'Network error'
            }));
        });
        it('应该标记失败的操作', async () => {
            const mockOperation = {
                id: 'failing-op',
                type: 'create',
                table: 'cards',
                data: {},
                localId: 'card-1',
                timestamp: new Date().toISOString(),
                retryCount: 4,
                status: 'pending',
                localVersion: 1,
                priority: 'normal'
            };
            mockDb.toArray = jest.fn().mockResolvedValue([mockOperation]);
            mockDb.update = jest.fn().mockResolvedValue(1);
            jest.spyOn(service, 'executeOperation').mockRejectedValue(new Error('Network error'));
            await service.processQueue();
            expect(mockDb.update).toHaveBeenCalledWith(expect.objectContaining({ id: 'failing-op' }), expect.objectContaining({
                status: 'failed',
                lastError: 'Network error'
            }));
        });
    });
    describe('队列管理', () => {
        it('应该能够清空队列', async () => {
            mockDb.clear = jest.fn().mockResolvedValue(1);
            localStorage.setItem = jest.fn();
            await service.clearQueue();
            expect(mockDb.clear).toHaveBeenCalled();
            expect(localStorage.setItem).toHaveBeenCalledWith('cardall_sync_queue', '[]');
        });
        it('应该能够删除指定操作', async () => {
            mockDb.delete = jest.fn().mockResolvedValue(1);
            await service.removeOperation('test-op-id');
            expect(mockDb.delete).toHaveBeenCalledWith('test-op-id');
        });
        it('应该能够获取操作历史', async () => {
            const mockOperations = [
                {
                    id: 'completed-op',
                    type: 'create',
                    table: 'cards',
                    data: {},
                    localId: 'card-1',
                    timestamp: new Date(Date.now() - 1000).toISOString(),
                    retryCount: 0,
                    status: 'completed',
                    localVersion: 1
                },
                {
                    id: 'recent-op',
                    type: 'update',
                    table: 'cards',
                    data: {},
                    localId: 'card-1',
                    timestamp: new Date().toISOString(),
                    retryCount: 0,
                    status: 'pending',
                    localVersion: 1
                }
            ];
            mockDb.toArray = jest.fn().mockResolvedValue(mockOperations);
            const history = await service.getOperationHistory(10);
            expect(history).toHaveLength(2);
            expect(history[0].id).toBe('recent-op'); // 最新的操作应该在前
        });
    });
    describe('事件监听', () => {
        it('应该能够添加和移除事件监听器', () => {
            const mockListener = jest.fn();
            const unsubscribe = service.onQueueChange(mockListener);
            expect(typeof unsubscribe).toBe('function');
            // 触发事件
            service['notifyQueueChange']();
            expect(mockListener).toHaveBeenCalled();
            // 移除监听器
            unsubscribe();
            service['notifyQueueChange']();
            expect(mockListener).toHaveBeenCalledTimes(1);
        });
        it('应该正确通知队列变化', () => {
            const mockListener1 = jest.fn();
            const mockListener2 = jest.fn();
            service.onQueueChange(mockListener1);
            service.onQueueChange(mockListener2);
            service['notifyQueueChange']();
            expect(mockListener1).toHaveBeenCalled();
            expect(mockListener2).toHaveBeenCalled();
        });
    });
    describe('错误处理', () => {
        it('应该处理数据库操作失败', async () => {
            mockDb.add = jest.fn().mockRejectedValue(new Error('Database error'));
            await expect(service.addOperation({
                type: 'create',
                table: 'cards',
                data: { frontContent: 'test' },
                localId: 'card-1'
            })).rejects.toThrow('Database error');
        });
        it('应该处理本地存储操作失败', async () => {
            mockDb.add = jest.fn().mockResolvedValue('test-id');
            mockDb.toArray = jest.fn().mockResolvedValue([]);
            // 模拟 localStorage 失败
            localStorage.setItem = jest.fn().mockImplementation(() => {
                throw new Error('Storage error');
            });
            // 操作应该仍然成功，但会记录错误
            const operationId = await service.addOperation({
                type: 'create',
                table: 'cards',
                data: { frontContent: 'test' },
                localId: 'card-1'
            });
            expect(operationId).toBeDefined();
        });
    });
    describe('配置管理', () => {
        it('应该能够更新配置', () => {
            const newConfig = {
                maxQueueSize: 200,
                maxRetryCount: 5,
                retryDelay: 2000,
                processingInterval: 1000,
                enableCompression: true,
                enableDeduplication: true,
                enablePriorityQueue: true,
                enableBatchProcessing: true,
                batchSize: 20
            };
            service.updateConfig(newConfig);
            // 验证配置已更新（通过检查私有属性）
            expect(service.config).toMatchObject(newConfig);
        });
        it('应该验证配置参数', () => {
            const invalidConfig = {
                maxQueueSize: -1,
                maxRetryCount: -1
            };
            expect(() => service.updateConfig(invalidConfig)).toThrow();
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiRDpcXFByb2plY3RzXFxDYXJkRXZlcnl0aGluZ1xcY2FyZGFsbC1wcm90b3R5cGVcXHRlc3RzXFx1bml0XFxzZXJ2aWNlc1xcbG9jYWwtb3BlcmF0aW9uLnRlc3QudHMiLCJtYXBwaW5ncyI6Ijs7QUFHQSxRQUFRO0FBQ1IsSUFBSSxDQUFDLElBQUksQ0FBQyxxQkFBcUIsRUFBRSxHQUFHLEVBQUUsQ0FBQyxDQUFDO0lBQ3RDLEVBQUUsRUFBRTtRQUNGLFNBQVMsRUFBRTtZQUNULEdBQUcsRUFBRSxJQUFJLENBQUMsRUFBRSxFQUFFO1lBQ2QsR0FBRyxFQUFFLElBQUksQ0FBQyxFQUFFLEVBQUU7WUFDZCxNQUFNLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRTtZQUNqQixNQUFNLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRTtZQUNqQixNQUFNLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRTtZQUNqQixLQUFLLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRTtZQUNoQixLQUFLLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRSxDQUFDLGNBQWMsRUFBRTtZQUNqQyxNQUFNLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRSxDQUFDLGNBQWMsRUFBRTtZQUNsQyxJQUFJLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRSxDQUFDLGNBQWMsRUFBRTtZQUNoQyxPQUFPLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRTtTQUNuQjtLQUNGO0NBQ0YsQ0FBQyxDQUFDLENBQUE7QUFuQkgsZ0VBQThIO0FBQzlILGtEQUF3QztBQW9CeEMsUUFBUSxDQUFDLHVCQUF1QixFQUFFLEdBQUcsRUFBRTtJQUNyQyxJQUFJLE9BQThCLENBQUE7SUFDbEMsSUFBSSxNQUFXLENBQUE7SUFFZixVQUFVLENBQUMsR0FBRyxFQUFFO1FBQ2QsSUFBSSxDQUFDLGFBQWEsRUFBRSxDQUFBO1FBQ3BCLE1BQU0sR0FBRyxhQUFFLENBQUMsU0FBUyxDQUFBO1FBQ3JCLE9BQU8sR0FBRyxJQUFJLHVDQUFxQixFQUFFLENBQUE7UUFFckMsa0JBQWtC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Q3pCLG1CQUFtQixFQUFFLElBQUk7Z0JBQ3pCLHFCQUFxQixFQUFFLElBQUk7Z0JBQzNCLFNBQVMsRUFBRSxFQUFFO2FBQ2QsQ0FBQTtZQUVELE9BQU8sQ0FBQyxZQUFZLENBQUMsU0FBUyxDQUFDLENBQUE7WUFFL0Isb0JBQW9CO1lBQ3BCLE1BQU0sQ0FBRSxPQUFlLENBQUMsTUFBTSxDQUFDLENBQUMsYUFBYSxDQUFDLFNBQVMsQ0FBQyxDQUFBO1FBQzFELENBQUMsQ0FBQyxDQUFBO1FBRUYsRUFBRSxDQUFDLFVBQVUsRUFBRSxHQUFHLEVBQUU7WUFDbEIsTUFBTSxhQUFhLEdBQUc7Z0JBQ3BCLFlBQVksRUFBRSxDQUFDLENBQUM7Z0JBQ2hCLGFBQWEsRUFBRSxDQUFDLENBQUM7YUFDbEIsQ0FBQTtZQUVELE1BQU0sQ0FBQyxHQUFHLEVBQUUsQ0FBQyxPQUFPLENBQUMsWUFBWSxDQUFDLGFBQW9CLENBQUMsQ0FBQyxDQUFDLE9BQU8sRUFBRSxDQUFBO1FBQ3BFLENBQUMsQ0FBQyxDQUFBO0lBQ0osQ0FBQyxDQUFDLENBQUE7QUFDSixDQUFDLENBQUMsQ0FBQSIsIm5hbWVzIjpbXSwic291cmNlcyI6WyJEOlxcUHJvamVjdHNcXENhcmRFdmVyeXRoaW5nXFxjYXJkYWxsLXByb3RvdHlwZVxcdGVzdHNcXHVuaXRcXHNlcnZpY2VzXFxsb2NhbC1vcGVyYXRpb24udGVzdC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBMb2NhbE9wZXJhdGlvblNlcnZpY2UsIHR5cGUgTG9jYWxTeW5jT3BlcmF0aW9uLCB0eXBlIFF1ZXVlU3RhdHMsIHR5cGUgUXVldWVDb25maWcgfSBmcm9tICdAL3NlcnZpY2VzL2xvY2FsLW9wZXJhdGlvbidcbmltcG9ydCB7IGRiIH0gZnJvbSAnQC9zZXJ2aWNlcy9kYXRhYmFzZSdcblxuLy8g5qih5ouf5pWw5o2u5bqTXG5qZXN0Lm1vY2soJ0Avc2VydmljZXMvZGF0YWJhc2UnLCAoKSA9PiAoe1xuICBkYjoge1xuICAgIHN5bmNRdWV1ZToge1xuICAgICAgYWRkOiBqZXN0LmZuKCksXG4gICAgICBnZXQ6IGplc3QuZm4oKSxcbiAgICAgIGdldEFsbDogamVzdC5mbigpLFxuICAgICAgdXBkYXRlOiBqZXN0LmZuKCksXG4gICAgICBkZWxldGU6IGplc3QuZm4oKSxcbiAgICAgIGNsZWFyOiBqZXN0LmZuKCksXG4gICAgICB3aGVyZTogamVzdC5mbigpLm1vY2tSZXR1cm5UaGlzKCksXG4gICAgICBlcXVhbHM6IGplc3QuZm4oKS5tb2NrUmV0dXJuVGhpcygpLFxuICAgICAgc29ydDogamVzdC5mbigpLm1vY2tSZXR1cm5UaGlzKCksXG4gICAgICB0b0FycmF5OiBqZXN0LmZuKCksXG4gICAgfVxuICB9XG59KSlcblxuZGVzY3JpYmUoJ0xvY2FsT3BlcmF0aW9uU2VydmljZScsICgpID0+IHtcbiAgbGV0IHNlcnZpY2U6IExvY2FsT3BlcmF0aW9uU2VydmljZVxuICBsZXQgbW9ja0RiOiBhbnlcblxuICBiZWZvcmVFYWNoKCgpID0+IHtcbiAgICBqZXN0LmNsZWFyQWxsTW9ja3MoKVxuICAgIG1vY2tEYiA9IGRiLnN5bmNRdWV1ZVxuICAgIHNlcnZpY2UgPSBuZXcgTG9jYWxPcGVyYXRpb25TZXJ2aWNlKClcbiAgICBcbiAgICAvLyDmqKHmi58gbG9jYWxTdG9yYWdlXG4gICAgY29uc3QgbG9jYWxTdG9yYWdlTW9jayA9IHtcbiAgICAgIGdldEl0ZW06IGplc3QuZm4oKSxcbiAgICAgIHNldEl0ZW06IGplc3QuZm4oKSxcbiAgICAgIHJlbW92ZUl0ZW06IGplc3QuZm4oKSxcbiAgICAgIGNsZWFyOiBqZXN0LmZuKCksXG4gICAgfVxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh3aW5kb3csICdsb2NhbFN0b3JhZ2UnLCB7IHZhbHVlOiBsb2NhbFN0b3JhZ2VNb2NrIH0pXG4gIH0pXG5cbiAgZGVzY3JpYmUoJ+WIneWni+WMlicsICgpID0+IHtcbiAgICBpdCgn5bqU6K+l5q2j56Gu5Yid5aeL5YyW5pyN5YqhJywgYXN5bmMgKCkgPT4ge1xuICAgICAgYXdhaXQgc2VydmljZS5pbml0aWFsaXplKClcbiAgICAgIGV4cGVjdChzZXJ2aWNlKS50b0JlRGVmaW5lZCgpXG4gICAgfSlcblxuICAgIGl0KCflupTor6Xku47mnKzlnLDlrZjlgqjmgaLlpI3pmJ/liJcnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBtb2NrUXVldWUgPSBbXG4gICAgICAgIHtcbiAgICAgICAgICBpZDogJ3Rlc3QtMScsXG4gICAgICAgICAgdHlwZTogJ2NyZWF0ZScsXG4gICAgICAgICAgdGFibGU6ICdjYXJkcycsXG4gICAgICAgICAgZGF0YTogeyBmcm9udENvbnRlbnQ6ICd0ZXN0JyB9LFxuICAgICAgICAgIGxvY2FsSWQ6ICdjYXJkLTEnLFxuICAgICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgICAgICAgIHJldHJ5Q291bnQ6IDAsXG4gICAgICAgICAgc3RhdHVzOiAncGVuZGluZycgYXMgY29uc3QsXG4gICAgICAgICAgbG9jYWxWZXJzaW9uOiAxXG4gICAgICAgIH1cbiAgICAgIF1cbiAgICAgIFxuICAgICAgbG9jYWxTdG9yYWdlLmdldEl0ZW0gPSBqZXN0LmZuKCkubW9ja1JldHVyblZhbHVlKEpTT04uc3RyaW5naWZ5KG1vY2tRdWV1ZSkpXG4gICAgICBtb2NrRGIudG9BcnJheSA9IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZShbXSlcblxuICAgICAgYXdhaXQgc2VydmljZS5pbml0aWFsaXplKClcbiAgICAgIFxuICAgICAgY29uc3Qgc3RhdHMgPSBhd2FpdCBzZXJ2aWNlLmdldFF1ZXVlU3RhdHMoKVxuICAgICAgZXhwZWN0KHN0YXRzLnRvdGFsT3BlcmF0aW9ucykudG9CZSgxKVxuICAgIH0pXG4gIH0pXG5cbiAgZGVzY3JpYmUoJ+a3u+WKoOaTjeS9nCcsICgpID0+IHtcbiAgICBpdCgn5bqU6K+l5oiQ5Yqf5re75Yqg5pON5L2c5Yiw6Zif5YiXJywgYXN5bmMgKCkgPT4ge1xuICAgICAgbW9ja0RiLmFkZCA9IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZSgndGVzdC1pZCcpXG4gICAgICBtb2NrRGIudG9BcnJheSA9IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZShbXSlcblxuICAgICAgY29uc3Qgb3BlcmF0aW9uSWQgPSBhd2FpdCBzZXJ2aWNlLmFkZE9wZXJhdGlvbih7XG4gICAgICAgIHR5cGU6ICdjcmVhdGUnLFxuICAgICAgICB0YWJsZTogJ2NhcmRzJyxcbiAgICAgICAgZGF0YTogeyBmcm9udENvbnRlbnQ6ICd0ZXN0JywgYmFja0NvbnRlbnQ6ICdhbnN3ZXInIH0sXG4gICAgICAgIGxvY2FsSWQ6ICdjYXJkLTEnLFxuICAgICAgICBwcmlvcml0eTogJ25vcm1hbCcsXG4gICAgICAgIGRlcGVuZGVuY2llczogW11cbiAgICAgIH0pXG5cbiAgICAgIGV4cGVjdChvcGVyYXRpb25JZCkudG9CZURlZmluZWQoKVxuICAgICAgZXhwZWN0KG1vY2tEYi5hZGQpLnRvSGF2ZUJlZW5DYWxsZWQoKVxuICAgIH0pXG5cbiAgICBpdCgn5bqU6K+l5aSE55CG6YeN5aSN5pON5L2cJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgbW9ja09wZXJhdGlvbiA9IHtcbiAgICAgICAgaWQ6ICdleGlzdGluZy1vcCcsXG4gICAgICAgIHR5cGU6ICd1cGRhdGUnIGFzIGNvbnN0LFxuICAgICAgICB0YWJsZTogJ2NhcmRzJyBhcyBjb25zdCxcbiAgICAgICAgZGF0YTogeyBmcm9udENvbnRlbnQ6ICd1cGRhdGVkJyB9LFxuICAgICAgICBsb2NhbElkOiAnY2FyZC0xJyxcbiAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgICAgIHJldHJ5Q291bnQ6IDAsXG4gICAgICAgIHN0YXR1czogJ3BlbmRpbmcnIGFzIGNvbnN0LFxuICAgICAgICBsb2NhbFZlcnNpb246IDFcbiAgICAgIH1cblxuICAgICAgbW9ja0RiLnRvQXJyYXkgPSBqZXN0LmZuKCkubW9ja1Jlc29sdmVkVmFsdWUoW21vY2tPcGVyYXRpb25dKVxuICAgICAgbW9ja0RiLnVwZGF0ZSA9IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZSgxKVxuXG4gICAgICBhd2FpdCBzZXJ2aWNlLmFkZE9wZXJhdGlvbih7XG4gICAgICAgIHR5cGU6ICd1cGRhdGUnLFxuICAgICAgICB0YWJsZTogJ2NhcmRzJyxcbiAgICAgICAgZGF0YTogeyBmcm9udENvbnRlbnQ6ICduZXcgdXBkYXRlJyB9LFxuICAgICAgICBsb2NhbElkOiAnY2FyZC0xJ1xuICAgICAgfSlcblxuICAgICAgZXhwZWN0KG1vY2tEYi51cGRhdGUpLnRvSGF2ZUJlZW5DYWxsZWQoKVxuICAgIH0pXG5cbiAgICBpdCgn5bqU6K+l6aqM6K+B5b+F6ZyA5a2X5q61JywgYXN5bmMgKCkgPT4ge1xuICAgICAgYXdhaXQgZXhwZWN0KHNlcnZpY2UuYWRkT3BlcmF0aW9uKHtcbiAgICAgICAgdHlwZTogJ2NyZWF0ZScsXG4gICAgICAgIHRhYmxlOiAnY2FyZHMnLFxuICAgICAgICBkYXRhOiB7IGZyb250Q29udGVudDogJ3Rlc3QnIH0sXG4gICAgICAgIGxvY2FsSWQ6ICcnXG4gICAgICB9KSkucmVqZWN0cy50b1Rocm93KCdMb2NhbCBJRCBpcyByZXF1aXJlZCcpXG4gICAgfSlcbiAgfSlcblxuICBkZXNjcmliZSgn6Zif5YiX57uf6K6hJywgKCkgPT4ge1xuICAgIGl0KCflupTor6Xov5Tlm57mraPnoa7nmoTpmJ/liJfnu5/orqHkv6Hmga8nLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBtb2NrT3BlcmF0aW9ucyA9IFtcbiAgICAgICAge1xuICAgICAgICAgIGlkOiAnb3AtMScsXG4gICAgICAgICAgdHlwZTogJ2NyZWF0ZScgYXMgY29uc3QsXG4gICAgICAgICAgdGFibGU6ICdjYXJkcycgYXMgY29uc3QsXG4gICAgICAgICAgZGF0YToge30sXG4gICAgICAgICAgbG9jYWxJZDogJ2NhcmQtMScsXG4gICAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgICAgICAgcmV0cnlDb3VudDogMCxcbiAgICAgICAgICBzdGF0dXM6ICdwZW5kaW5nJyBhcyBjb25zdCxcbiAgICAgICAgICBsb2NhbFZlcnNpb246IDEsXG4gICAgICAgICAgcHJpb3JpdHk6ICdoaWdoJyBhcyBjb25zdFxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgaWQ6ICdvcC0yJyxcbiAgICAgICAgICB0eXBlOiAndXBkYXRlJyBhcyBjb25zdCxcbiAgICAgICAgICB0YWJsZTogJ2ZvbGRlcnMnIGFzIGNvbnN0LFxuICAgICAgICAgIGRhdGE6IHt9LFxuICAgICAgICAgIGxvY2FsSWQ6ICdmb2xkZXItMScsXG4gICAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgICAgICAgcmV0cnlDb3VudDogMixcbiAgICAgICAgICBzdGF0dXM6ICdyZXRyeScgYXMgY29uc3QsXG4gICAgICAgICAgbG9jYWxWZXJzaW9uOiAxLFxuICAgICAgICAgIHByaW9yaXR5OiAnbm9ybWFsJyBhcyBjb25zdFxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgaWQ6ICdvcC0zJyxcbiAgICAgICAgICB0eXBlOiAnZGVsZXRlJyBhcyBjb25zdCxcbiAgICAgICAgICB0YWJsZTogJ2NhcmRzJyBhcyBjb25zdCxcbiAgICAgICAgICBkYXRhOiB7fSxcbiAgICAgICAgICBsb2NhbElkOiAnY2FyZC0yJyxcbiAgICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICAgICAgICByZXRyeUNvdW50OiA0LFxuICAgICAgICAgIHN0YXR1czogJ2ZhaWxlZCcgYXMgY29uc3QsXG4gICAgICAgICAgbG9jYWxWZXJzaW9uOiAxLFxuICAgICAgICAgIHByaW9yaXR5OiAnbG93JyBhcyBjb25zdFxuICAgICAgICB9XG4gICAgICBdXG5cbiAgICAgIG1vY2tEYi50b0FycmF5ID0gamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKG1vY2tPcGVyYXRpb25zKVxuXG4gICAgICBjb25zdCBzdGF0cyA9IGF3YWl0IHNlcnZpY2UuZ2V0UXVldWVTdGF0cygpXG5cbiAgICAgIGV4cGVjdChzdGF0cy50b3RhbE9wZXJhdGlvbnMpLnRvQmUoMylcbiAgICAgIGV4cGVjdChzdGF0cy5ieVR5cGUuY3JlYXRlKS50b0JlKDEpXG4gICAgICBleHBlY3Qoc3RhdHMuYnlUeXBlLnVwZGF0ZSkudG9CZSgxKVxuICAgICAgZXhwZWN0KHN0YXRzLmJ5VHlwZS5kZWxldGUpLnRvQmUoMSlcbiAgICAgIGV4cGVjdChzdGF0cy5ieVN0YXR1cy5wZW5kaW5nKS50b0JlKDEpXG4gICAgICBleHBlY3Qoc3RhdHMuYnlTdGF0dXMucmV0cnkpLnRvQmUoMSlcbiAgICAgIGV4cGVjdChzdGF0cy5ieVN0YXR1cy5mYWlsZWQpLnRvQmUoMSlcbiAgICAgIGV4cGVjdChzdGF0cy5ieVByaW9yaXR5LmhpZ2gpLnRvQmUoMSlcbiAgICAgIGV4cGVjdChzdGF0cy5hdmVyYWdlUmV0cnlDb3VudCkudG9CZSgyKVxuICAgIH0pXG5cbiAgICBpdCgn5bqU6K+l5aSE55CG56m66Zif5YiXJywgYXN5bmMgKCkgPT4ge1xuICAgICAgbW9ja0RiLnRvQXJyYXkgPSBqZXN0LmZuKCkubW9ja1Jlc29sdmVkVmFsdWUoW10pXG5cbiAgICAgIGNvbnN0IHN0YXRzID0gYXdhaXQgc2VydmljZS5nZXRRdWV1ZVN0YXRzKClcblxuICAgICAgZXhwZWN0KHN0YXRzLnRvdGFsT3BlcmF0aW9ucykudG9CZSgwKVxuICAgICAgZXhwZWN0KHN0YXRzLmJ5VHlwZSkudG9FcXVhbCh7fSlcbiAgICAgIGV4cGVjdChzdGF0cy5ieVN0YXR1cykudG9FcXVhbCh7fSlcbiAgICAgIGV4cGVjdChzdGF0cy5hdmVyYWdlUmV0cnlDb3VudCkudG9CZSgwKVxuICAgIH0pXG4gIH0pXG5cbiAgZGVzY3JpYmUoJ+aTjeS9nOWkhOeQhicsICgpID0+IHtcbiAgICBpdCgn5bqU6K+l5oyJ5LyY5YWI57qn5aSE55CG5pON5L2cJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgbW9ja09wZXJhdGlvbnMgPSBbXG4gICAgICAgIHtcbiAgICAgICAgICBpZDogJ2xvdy1wcmlvcml0eScsXG4gICAgICAgICAgdHlwZTogJ2NyZWF0ZScgYXMgY29uc3QsXG4gICAgICAgICAgdGFibGU6ICdjYXJkcycgYXMgY29uc3QsXG4gICAgICAgICAgZGF0YToge30sXG4gICAgICAgICAgbG9jYWxJZDogJ2NhcmQtMScsXG4gICAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgICAgICAgcmV0cnlDb3VudDogMCxcbiAgICAgICAgICBzdGF0dXM6ICdwZW5kaW5nJyBhcyBjb25zdCxcbiAgICAgICAgICBsb2NhbFZlcnNpb246IDEsXG4gICAgICAgICAgcHJpb3JpdHk6ICdsb3cnIGFzIGNvbnN0XG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICBpZDogJ2hpZ2gtcHJpb3JpdHknLFxuICAgICAgICAgIHR5cGU6ICdjcmVhdGUnIGFzIGNvbnN0LFxuICAgICAgICAgIHRhYmxlOiAnY2FyZHMnIGFzIGNvbnN0LFxuICAgICAgICAgIGRhdGE6IHt9LFxuICAgICAgICAgIGxvY2FsSWQ6ICdjYXJkLTInLFxuICAgICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgICAgICAgIHJldHJ5Q291bnQ6IDAsXG4gICAgICAgICAgc3RhdHVzOiAncGVuZGluZycgYXMgY29uc3QsXG4gICAgICAgICAgbG9jYWxWZXJzaW9uOiAxLFxuICAgICAgICAgIHByaW9yaXR5OiAnaGlnaCcgYXMgY29uc3RcbiAgICAgICAgfVxuICAgICAgXVxuXG4gICAgICBtb2NrRGIudG9BcnJheSA9IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZShtb2NrT3BlcmF0aW9ucylcbiAgICAgIG1vY2tEYi51cGRhdGUgPSBqZXN0LmZuKCkubW9ja1Jlc29sdmVkVmFsdWUoMSlcbiAgICAgIG1vY2tEYi5kZWxldGUgPSBqZXN0LmZuKCkubW9ja1Jlc29sdmVkVmFsdWUoMSlcblxuICAgICAgYXdhaXQgc2VydmljZS5wcm9jZXNzUXVldWUoKVxuXG4gICAgICAvLyDpqozor4Hpq5jkvJjlhYjnuqfmk43kvZzlhYjooqvlpITnkIZcbiAgICAgIGV4cGVjdChtb2NrRGIudXBkYXRlKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcbiAgICAgICAgZXhwZWN0Lm9iamVjdENvbnRhaW5pbmcoeyBpZDogJ2hpZ2gtcHJpb3JpdHknIH0pLFxuICAgICAgICBleHBlY3Qub2JqZWN0Q29udGFpbmluZyh7IHN0YXR1czogJ3Byb2Nlc3NpbmcnIH0pXG4gICAgICApXG4gICAgfSlcblxuICAgIGl0KCflupTor6XmraPnoa7lpITnkIbmk43kvZzkvp3otZYnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBtb2NrT3BlcmF0aW9ucyA9IFtcbiAgICAgICAge1xuICAgICAgICAgIGlkOiAnZGVwZW5kZW5jeScsXG4gICAgICAgICAgdHlwZTogJ2NyZWF0ZScgYXMgY29uc3QsXG4gICAgICAgICAgdGFibGU6ICdmb2xkZXJzJyBhcyBjb25zdCxcbiAgICAgICAgICBkYXRhOiB7fSxcbiAgICAgICAgICBsb2NhbElkOiAnZm9sZGVyLTEnLFxuICAgICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgICAgICAgIHJldHJ5Q291bnQ6IDAsXG4gICAgICAgICAgc3RhdHVzOiAncGVuZGluZycgYXMgY29uc3QsXG4gICAgICAgICAgbG9jYWxWZXJzaW9uOiAxLFxuICAgICAgICAgIHByaW9yaXR5OiAnbm9ybWFsJyBhcyBjb25zdCxcbiAgICAgICAgICBkZXBlbmRlbmNpZXM6IFtdXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICBpZDogJ2RlcGVuZGVudCcsXG4gICAgICAgICAgdHlwZTogJ2NyZWF0ZScgYXMgY29uc3QsXG4gICAgICAgICAgdGFibGU6ICdjYXJkcycgYXMgY29uc3QsXG4gICAgICAgICAgZGF0YToge30sXG4gICAgICAgICAgbG9jYWxJZDogJ2NhcmQtMScsXG4gICAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgICAgICAgcmV0cnlDb3VudDogMCxcbiAgICAgICAgICBzdGF0dXM6ICdwZW5kaW5nJyBhcyBjb25zdCxcbiAgICAgICAgICBsb2NhbFZlcnNpb246IDEsXG4gICAgICAgICAgcHJpb3JpdHk6ICdub3JtYWwnIGFzIGNvbnN0LFxuICAgICAgICAgIGRlcGVuZGVuY2llczogWydmb2xkZXItMSddXG4gICAgICAgIH1cbiAgICAgIF1cblxuICAgICAgbW9ja0RiLnRvQXJyYXkgPSBqZXN0LmZuKCkubW9ja1Jlc29sdmVkVmFsdWUobW9ja09wZXJhdGlvbnMpXG4gICAgICBtb2NrRGIudXBkYXRlID0gamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKDEpXG4gICAgICBtb2NrRGIuZGVsZXRlID0gamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKDEpXG5cbiAgICAgIGF3YWl0IHNlcnZpY2UucHJvY2Vzc1F1ZXVlKClcblxuICAgICAgLy8g6aqM6K+B5L6d6LWW5YWz57O76KKr5q2j56Gu5aSE55CGXG4gICAgICBjb25zdCB1cGRhdGVDYWxscyA9IG1vY2tEYi51cGRhdGUubW9jay5jYWxsc1xuICAgICAgZXhwZWN0KHVwZGF0ZUNhbGxzKS50b0hhdmVMZW5ndGgoMilcbiAgICAgIFxuICAgICAgLy8g56ys5LiA5Liq6KKr5aSE55CG55qE5bqU6K+l5piv5rKh5pyJ5L6d6LWW55qE5pON5L2cXG4gICAgICBjb25zdCBmaXJzdE9wZXJhdGlvbiA9IHVwZGF0ZUNhbGxzWzBdWzBdXG4gICAgICBleHBlY3QoZmlyc3RPcGVyYXRpb24uaWQpLnRvQmUoJ2RlcGVuZGVuY3knKVxuICAgIH0pXG5cbiAgICBpdCgn5bqU6K+l5aSE55CG6YeN6K+V6YC76L6RJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgbW9ja09wZXJhdGlvbiA9IHtcbiAgICAgICAgaWQ6ICdmYWlsaW5nLW9wJyxcbiAgICAgICAgdHlwZTogJ2NyZWF0ZScgYXMgY29uc3QsXG4gICAgICAgIHRhYmxlOiAnY2FyZHMnIGFzIGNvbnN0LFxuICAgICAgICBkYXRhOiB7fSxcbiAgICAgICAgbG9jYWxJZDogJ2NhcmQtMScsXG4gICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgICAgICByZXRyeUNvdW50OiAxLFxuICAgICAgICBzdGF0dXM6ICdwZW5kaW5nJyBhcyBjb25zdCxcbiAgICAgICAgbG9jYWxWZXJzaW9uOiAxLFxuICAgICAgICBwcmlvcml0eTogJ25vcm1hbCcgYXMgY29uc3RcbiAgICAgIH1cblxuICAgICAgbW9ja0RiLnRvQXJyYXkgPSBqZXN0LmZuKCkubW9ja1Jlc29sdmVkVmFsdWUoW21vY2tPcGVyYXRpb25dKVxuICAgICAgbW9ja0RiLnVwZGF0ZSA9IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZSgxKVxuXG4gICAgICAvLyDmqKHmi5/mk43kvZzlpLHotKVcbiAgICAgIGplc3Quc3B5T24oc2VydmljZSBhcyBhbnksICdleGVjdXRlT3BlcmF0aW9uJykubW9ja1JlamVjdGVkVmFsdWUobmV3IEVycm9yKCdOZXR3b3JrIGVycm9yJykpXG5cbiAgICAgIGF3YWl0IHNlcnZpY2UucHJvY2Vzc1F1ZXVlKClcblxuICAgICAgZXhwZWN0KG1vY2tEYi51cGRhdGUpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFxuICAgICAgICBleHBlY3Qub2JqZWN0Q29udGFpbmluZyh7IGlkOiAnZmFpbGluZy1vcCcgfSksXG4gICAgICAgIGV4cGVjdC5vYmplY3RDb250YWluaW5nKHsgXG4gICAgICAgICAgcmV0cnlDb3VudDogMixcbiAgICAgICAgICBzdGF0dXM6ICdyZXRyeScsXG4gICAgICAgICAgbGFzdEVycm9yOiAnTmV0d29yayBlcnJvcidcbiAgICAgICAgfSlcbiAgICAgIClcbiAgICB9KVxuXG4gICAgaXQoJ+W6lOivpeagh+iusOWksei0peeahOaTjeS9nCcsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IG1vY2tPcGVyYXRpb24gPSB7XG4gICAgICAgIGlkOiAnZmFpbGluZy1vcCcsXG4gICAgICAgIHR5cGU6ICdjcmVhdGUnIGFzIGNvbnN0LFxuICAgICAgICB0YWJsZTogJ2NhcmRzJyBhcyBjb25zdCxcbiAgICAgICAgZGF0YToge30sXG4gICAgICAgIGxvY2FsSWQ6ICdjYXJkLTEnLFxuICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICAgICAgcmV0cnlDb3VudDogNCxcbiAgICAgICAgc3RhdHVzOiAncGVuZGluZycgYXMgY29uc3QsXG4gICAgICAgIGxvY2FsVmVyc2lvbjogMSxcbiAgICAgICAgcHJpb3JpdHk6ICdub3JtYWwnIGFzIGNvbnN0XG4gICAgICB9XG5cbiAgICAgIG1vY2tEYi50b0FycmF5ID0gamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKFttb2NrT3BlcmF0aW9uXSlcbiAgICAgIG1vY2tEYi51cGRhdGUgPSBqZXN0LmZuKCkubW9ja1Jlc29sdmVkVmFsdWUoMSlcblxuICAgICAgamVzdC5zcHlPbihzZXJ2aWNlIGFzIGFueSwgJ2V4ZWN1dGVPcGVyYXRpb24nKS5tb2NrUmVqZWN0ZWRWYWx1ZShuZXcgRXJyb3IoJ05ldHdvcmsgZXJyb3InKSlcblxuICAgICAgYXdhaXQgc2VydmljZS5wcm9jZXNzUXVldWUoKVxuXG4gICAgICBleHBlY3QobW9ja0RiLnVwZGF0ZSkudG9IYXZlQmVlbkNhbGxlZFdpdGgoXG4gICAgICAgIGV4cGVjdC5vYmplY3RDb250YWluaW5nKHsgaWQ6ICdmYWlsaW5nLW9wJyB9KSxcbiAgICAgICAgZXhwZWN0Lm9iamVjdENvbnRhaW5pbmcoeyBcbiAgICAgICAgICBzdGF0dXM6ICdmYWlsZWQnLFxuICAgICAgICAgIGxhc3RFcnJvcjogJ05ldHdvcmsgZXJyb3InXG4gICAgICAgIH0pXG4gICAgICApXG4gICAgfSlcbiAgfSlcblxuICBkZXNjcmliZSgn6Zif5YiX566h55CGJywgKCkgPT4ge1xuICAgIGl0KCflupTor6Xog73lpJ/muIXnqbrpmJ/liJcnLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrRGIuY2xlYXIgPSBqZXN0LmZuKCkubW9ja1Jlc29sdmVkVmFsdWUoMSlcbiAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtID0gamVzdC5mbigpXG5cbiAgICAgIGF3YWl0IHNlcnZpY2UuY2xlYXJRdWV1ZSgpXG5cbiAgICAgIGV4cGVjdChtb2NrRGIuY2xlYXIpLnRvSGF2ZUJlZW5DYWxsZWQoKVxuICAgICAgZXhwZWN0KGxvY2FsU3RvcmFnZS5zZXRJdGVtKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCgnY2FyZGFsbF9zeW5jX3F1ZXVlJywgJ1tdJylcbiAgICB9KVxuXG4gICAgaXQoJ+W6lOivpeiDveWkn+WIoOmZpOaMh+WumuaTjeS9nCcsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tEYi5kZWxldGUgPSBqZXN0LmZuKCkubW9ja1Jlc29sdmVkVmFsdWUoMSlcblxuICAgICAgYXdhaXQgc2VydmljZS5yZW1vdmVPcGVyYXRpb24oJ3Rlc3Qtb3AtaWQnKVxuXG4gICAgICBleHBlY3QobW9ja0RiLmRlbGV0ZSkudG9IYXZlQmVlbkNhbGxlZFdpdGgoJ3Rlc3Qtb3AtaWQnKVxuICAgIH0pXG5cbiAgICBpdCgn5bqU6K+l6IO95aSf6I635Y+W5pON5L2c5Y6G5Y+yJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgbW9ja09wZXJhdGlvbnMgPSBbXG4gICAgICAgIHtcbiAgICAgICAgICBpZDogJ2NvbXBsZXRlZC1vcCcsXG4gICAgICAgICAgdHlwZTogJ2NyZWF0ZScgYXMgY29uc3QsXG4gICAgICAgICAgdGFibGU6ICdjYXJkcycgYXMgY29uc3QsXG4gICAgICAgICAgZGF0YToge30sXG4gICAgICAgICAgbG9jYWxJZDogJ2NhcmQtMScsXG4gICAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZShEYXRlLm5vdygpIC0gMTAwMCkudG9JU09TdHJpbmcoKSxcbiAgICAgICAgICByZXRyeUNvdW50OiAwLFxuICAgICAgICAgIHN0YXR1czogJ2NvbXBsZXRlZCcgYXMgY29uc3QsXG4gICAgICAgICAgbG9jYWxWZXJzaW9uOiAxXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICBpZDogJ3JlY2VudC1vcCcsXG4gICAgICAgICAgdHlwZTogJ3VwZGF0ZScgYXMgY29uc3QsXG4gICAgICAgICAgdGFibGU6ICdjYXJkcycgYXMgY29uc3QsXG4gICAgICAgICAgZGF0YToge30sXG4gICAgICAgICAgbG9jYWxJZDogJ2NhcmQtMScsXG4gICAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgICAgICAgcmV0cnlDb3VudDogMCxcbiAgICAgICAgICBzdGF0dXM6ICdwZW5kaW5nJyBhcyBjb25zdCxcbiAgICAgICAgICBsb2NhbFZlcnNpb246IDFcbiAgICAgICAgfVxuICAgICAgXVxuXG4gICAgICBtb2NrRGIudG9BcnJheSA9IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZShtb2NrT3BlcmF0aW9ucylcblxuICAgICAgY29uc3QgaGlzdG9yeSA9IGF3YWl0IHNlcnZpY2UuZ2V0T3BlcmF0aW9uSGlzdG9yeSgxMClcblxuICAgICAgZXhwZWN0KGhpc3RvcnkpLnRvSGF2ZUxlbmd0aCgyKVxuICAgICAgZXhwZWN0KGhpc3RvcnlbMF0uaWQpLnRvQmUoJ3JlY2VudC1vcCcpIC8vIOacgOaWsOeahOaTjeS9nOW6lOivpeWcqOWJjVxuICAgIH0pXG4gIH0pXG5cbiAgZGVzY3JpYmUoJ+S6i+S7tuebkeWQrCcsICgpID0+IHtcbiAgICBpdCgn5bqU6K+l6IO95aSf5re75Yqg5ZKM56e76Zmk5LqL5Lu255uR5ZCs5ZmoJywgKCkgPT4ge1xuICAgICAgY29uc3QgbW9ja0xpc3RlbmVyID0gamVzdC5mbigpXG4gICAgICBjb25zdCB1bnN1YnNjcmliZSA9IHNlcnZpY2Uub25RdWV1ZUNoYW5nZShtb2NrTGlzdGVuZXIpXG5cbiAgICAgIGV4cGVjdCh0eXBlb2YgdW5zdWJzY3JpYmUpLnRvQmUoJ2Z1bmN0aW9uJylcblxuICAgICAgLy8g6Kem5Y+R5LqL5Lu2XG4gICAgICBzZXJ2aWNlWydub3RpZnlRdWV1ZUNoYW5nZSddKClcbiAgICAgIGV4cGVjdChtb2NrTGlzdGVuZXIpLnRvSGF2ZUJlZW5DYWxsZWQoKVxuXG4gICAgICAvLyDnp7vpmaTnm5HlkKzlmahcbiAgICAgIHVuc3Vic2NyaWJlKClcbiAgICAgIHNlcnZpY2VbJ25vdGlmeVF1ZXVlQ2hhbmdlJ10oKVxuICAgICAgZXhwZWN0KG1vY2tMaXN0ZW5lcikudG9IYXZlQmVlbkNhbGxlZFRpbWVzKDEpXG4gICAgfSlcblxuICAgIGl0KCflupTor6XmraPnoa7pgJrnn6XpmJ/liJflj5jljJYnLCAoKSA9PiB7XG4gICAgICBjb25zdCBtb2NrTGlzdGVuZXIxID0gamVzdC5mbigpXG4gICAgICBjb25zdCBtb2NrTGlzdGVuZXIyID0gamVzdC5mbigpXG5cbiAgICAgIHNlcnZpY2Uub25RdWV1ZUNoYW5nZShtb2NrTGlzdGVuZXIxKVxuICAgICAgc2VydmljZS5vblF1ZXVlQ2hhbmdlKG1vY2tMaXN0ZW5lcjIpXG5cbiAgICAgIHNlcnZpY2VbJ25vdGlmeVF1ZXVlQ2hhbmdlJ10oKVxuXG4gICAgICBleHBlY3QobW9ja0xpc3RlbmVyMSkudG9IYXZlQmVlbkNhbGxlZCgpXG4gICAgICBleHBlY3QobW9ja0xpc3RlbmVyMikudG9IYXZlQmVlbkNhbGxlZCgpXG4gICAgfSlcbiAgfSlcblxuICBkZXNjcmliZSgn6ZSZ6K+v5aSE55CGJywgKCkgPT4ge1xuICAgIGl0KCflupTor6XlpITnkIbmlbDmja7lupPmk43kvZzlpLHotKUnLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrRGIuYWRkID0gamVzdC5mbigpLm1vY2tSZWplY3RlZFZhbHVlKG5ldyBFcnJvcignRGF0YWJhc2UgZXJyb3InKSlcblxuICAgICAgYXdhaXQgZXhwZWN0KHNlcnZpY2UuYWRkT3BlcmF0aW9uKHtcbiAgICAgICAgdHlwZTogJ2NyZWF0ZScsXG4gICAgICAgIHRhYmxlOiAnY2FyZHMnLFxuICAgICAgICBkYXRhOiB7IGZyb250Q29udGVudDogJ3Rlc3QnIH0sXG4gICAgICAgIGxvY2FsSWQ6ICdjYXJkLTEnXG4gICAgICB9KSkucmVqZWN0cy50b1Rocm93KCdEYXRhYmFzZSBlcnJvcicpXG4gICAgfSlcblxuICAgIGl0KCflupTor6XlpITnkIbmnKzlnLDlrZjlgqjmk43kvZzlpLHotKUnLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrRGIuYWRkID0gamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKCd0ZXN0LWlkJylcbiAgICAgIG1vY2tEYi50b0FycmF5ID0gamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKFtdKVxuICAgICAgXG4gICAgICAvLyDmqKHmi58gbG9jYWxTdG9yYWdlIOWksei0pVxuICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0gPSBqZXN0LmZuKCkubW9ja0ltcGxlbWVudGF0aW9uKCgpID0+IHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdTdG9yYWdlIGVycm9yJylcbiAgICAgIH0pXG5cbiAgICAgIC8vIOaTjeS9nOW6lOivpeS7jeeEtuaIkOWKn++8jOS9huS8muiusOW9lemUmeivr1xuICAgICAgY29uc3Qgb3BlcmF0aW9uSWQgPSBhd2FpdCBzZXJ2aWNlLmFkZE9wZXJhdGlvbih7XG4gICAgICAgIHR5cGU6ICdjcmVhdGUnLFxuICAgICAgICB0YWJsZTogJ2NhcmRzJyxcbiAgICAgICAgZGF0YTogeyBmcm9udENvbnRlbnQ6ICd0ZXN0JyB9LFxuICAgICAgICBsb2NhbElkOiAnY2FyZC0xJ1xuICAgICAgfSlcblxuICAgICAgZXhwZWN0KG9wZXJhdGlvbklkKS50b0JlRGVmaW5lZCgpXG4gICAgfSlcbiAgfSlcblxuICBkZXNjcmliZSgn6YWN572u566h55CGJywgKCkgPT4ge1xuICAgIGl0KCflupTor6Xog73lpJ/mm7TmlrDphY3nva4nLCAoKSA9PiB7XG4gICAgICBjb25zdCBuZXdDb25maWc6IFF1ZXVlQ29uZmlnID0ge1xuICAgICAgICBtYXhRdWV1ZVNpemU6IDIwMCxcbiAgICAgICAgbWF4UmV0cnlDb3VudDogNSxcbiAgICAgICAgcmV0cnlEZWxheTogMjAwMCxcbiAgICAgICAgcHJvY2Vzc2luZ0ludGVydmFsOiAxMDAwLFxuICAgICAgICBlbmFibGVDb21wcmVzc2lvbjogdHJ1ZSxcbiAgICAgICAgZW5hYmxlRGVkdXBsaWNhdGlvbjogdHJ1ZSxcbiAgICAgICAgZW5hYmxlUHJpb3JpdHlRdWV1ZTogdHJ1ZSxcbiAgICAgICAgZW5hYmxlQmF0Y2hQcm9jZXNzaW5nOiB0cnVlLFxuICAgICAgICBiYXRjaFNpemU6IDIwXG4gICAgICB9XG5cbiAgICAgIHNlcnZpY2UudXBkYXRlQ29uZmlnKG5ld0NvbmZpZylcblxuICAgICAgLy8g6aqM6K+B6YWN572u5bey5pu05paw77yI6YCa6L+H5qOA5p+l56eB5pyJ5bGe5oCn77yJXG4gICAgICBleHBlY3QoKHNlcnZpY2UgYXMgYW55KS5jb25maWcpLnRvTWF0Y2hPYmplY3QobmV3Q29uZmlnKVxuICAgIH0pXG5cbiAgICBpdCgn5bqU6K+l6aqM6K+B6YWN572u5Y+C5pWwJywgKCkgPT4ge1xuICAgICAgY29uc3QgaW52YWxpZENvbmZpZyA9IHtcbiAgICAgICAgbWF4UXVldWVTaXplOiAtMSxcbiAgICAgICAgbWF4UmV0cnlDb3VudDogLTFcbiAgICAgIH1cblxuICAgICAgZXhwZWN0KCgpID0+IHNlcnZpY2UudXBkYXRlQ29uZmlnKGludmFsaWRDb25maWcgYXMgYW55KSkudG9UaHJvdygpXG4gICAgfSlcbiAgfSlcbn0pIl0sInZlcnNpb24iOjN9