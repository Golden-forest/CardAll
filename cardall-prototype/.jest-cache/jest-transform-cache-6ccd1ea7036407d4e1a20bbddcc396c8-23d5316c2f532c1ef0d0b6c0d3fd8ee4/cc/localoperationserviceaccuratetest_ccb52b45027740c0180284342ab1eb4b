21e3cfccd03b4dc3d7402bb48ca855be
"use strict";
/**
 * LocalOperationService 准确单元测试
 * 基于实际API接口的测试
 */
Object.defineProperty(exports, "__esModule", { value: true });
const globals_1 = require("@jest/globals");
// 模拟数据库
globals_1.jest.mock('../../services/database-unified', () => {
    const mockDb = {
        cards: {
            add: globals_1.jest.fn(),
            get: globals_1.jest.fn(),
            update: globals_1.jest.fn(),
            delete: globals_1.jest.fn(),
            where: globals_1.jest.fn(),
            toArray: globals_1.jest.fn(),
            bulkAdd: globals_1.jest.fn(),
            bulkPut: globals_1.jest.fn(),
            bulkDelete: globals_1.jest.fn()
        },
        folders: {
            add: globals_1.jest.fn(),
            get: globals_1.jest.fn(),
            update: globals_1.jest.fn(),
            delete: globals_1.jest.fn(),
            where: globals_1.jest.fn(),
            toArray: globals_1.jest.fn()
        },
        tags: {
            add: globals_1.jest.fn(),
            get: globals_1.jest.fn(),
            update: globals_1.jest.fn(),
            delete: globals_1.jest.fn(),
            where: globals_1.jest.fn(),
            toArray: globals_1.jest.fn()
        },
        cardTags: {
            add: globals_1.jest.fn(),
            get: globals_1.jest.fn(),
            update: globals_1.jest.fn(),
            delete: globals_1.jest.fn(),
            where: globals_1.jest.fn(),
            toArray: globals_1.jest.fn()
        },
        syncOperations: {
            add: globals_1.jest.fn(),
            get: globals_1.jest.fn(),
            update: globals_1.jest.fn(),
            delete: globals_1.jest.fn(),
            where: globals_1.jest.fn(),
            toArray: globals_1.jest.fn()
        }
    };
    return { db: mockDb };
});
const local_operation_service_1 = require("../../services/local-operation-service");
// 创建准确的Mock数据
const createMockCard = () => ({
    frontContent: {
        title: '测试卡片',
        text: '正面内容',
        tags: ['测试标签'],
        style: { backgroundColor: '#ffffff' }
    },
    backContent: {
        title: '背面标题',
        text: '背面内容',
        tags: ['背面标签'],
        style: { backgroundColor: '#f0f0f0' }
    },
    style: {
        type: 'solid',
        colors: ['#ffffff', '#f0f0f0']
    },
    folderId: crypto.randomUUID(),
    userId: 'test-user'
});
const createMockDbCard = () => ({
    id: crypto.randomUUID(),
    frontContent: {
        title: '测试卡片',
        text: '正面内容',
        tags: ['测试标签'],
        style: { backgroundColor: '#ffffff' }
    },
    backContent: {
        title: '背面标题',
        text: '背面内容',
        tags: ['背面标签'],
        style: { backgroundColor: '#f0f0f0' }
    },
    style: {
        type: 'solid',
        colors: ['#ffffff', '#f0f0f0']
    },
    folderId: crypto.randomUUID(),
    userId: 'test-user',
    createdAt: new Date(),
    updatedAt: new Date(),
    isDeleted: false,
    version: 1
});
(0, globals_1.describe)('LocalOperationServiceOptimized', () => {
    let service;
    let mockDb;
    (0, globals_1.beforeEach)(() => {
        // 重置服务实例
        service = new local_operation_service_1.LocalOperationServiceOptimized();
        // 获取模拟数据库
        const { db } = require('../../services/database-unified');
        mockDb = db;
        // 清理所有模拟
        globals_1.jest.clearAllMocks();
    });
    (0, globals_1.afterEach)(() => {
        // 清理服务
        if (service.destroy) {
            service.destroy();
        }
    });
    // ============================================================================
    // 初始化测试
    // ============================================================================
    (0, globals_1.describe)('初始化', () => {
        (0, globals_1.test)('应该正确初始化服务', async () => {
            await service.initialize();
            (0, globals_1.expect)(service).toBeInstanceOf(local_operation_service_1.LocalOperationServiceOptimized);
        });
    });
    // ============================================================================
    // 卡片操作测试
    // ============================================================================
    (0, globals_1.describe)('卡片操作', () => {
        (0, globals_1.test)('应该成功创建卡片', async () => {
            const cardData = createMockCard();
            const cardId = crypto.randomUUID();
            // 模拟数据库返回
            mockDb.cards.add.mockResolvedValue(cardId);
            const result = await service.createCard(cardData);
            (0, globals_1.expect)(result.success).toBe(true);
            (0, globals_1.expect)(result.id).toBe(cardId);
            (0, globals_1.expect)(result.duration).toBeGreaterThan(0);
            (0, globals_1.expect)(result.timestamp).toBeInstanceOf(Date);
            (0, globals_1.expect)(mockDb.cards.add).toHaveBeenCalledWith(cardData);
        });
        (0, globals_1.test)('应该成功读取卡片', async () => {
            const cardId = crypto.randomUUID();
            const mockCard = createMockDbCard();
            // 模拟数据库返回
            mockDb.cards.get.mockResolvedValue(mockCard);
            const result = await service.getCard(cardId);
            (0, globals_1.expect)(result).toEqual(mockCard);
            (0, globals_1.expect)(mockDb.cards.get).toHaveBeenCalledWith(cardId);
        });
        (0, globals_1.test)('应该成功更新卡片', async () => {
            const cardId = crypto.randomUUID();
            const updateData = {
                frontContent: { title: '更新后的标题' }
            };
            // 模拟数据库返回
            mockDb.cards.update.mockResolvedValue(1);
            const result = await service.updateCard(cardId, updateData);
            (0, globals_1.expect)(result.success).toBe(true);
            (0, globals_1.expect)(result.duration).toBeGreaterThan(0);
            (0, globals_1.expect)(result.timestamp).toBeInstanceOf(Date);
            (0, globals_1.expect)(mockDb.cards.update).toHaveBeenCalledWith(cardId, updateData);
        });
        (0, globals_1.test)('应该成功删除卡片', async () => {
            const cardId = crypto.randomUUID();
            // 模拟数据库返回
            mockDb.cards.delete.mockResolvedValue(1);
            const result = await service.deleteCard(cardId);
            (0, globals_1.expect)(result.success).toBe(true);
            (0, globals_1.expect)(result.duration).toBeGreaterThan(0);
            (0, globals_1.expect)(result.timestamp).toBeInstanceOf(Date);
            (0, globals_1.expect)(mockDb.cards.delete).toHaveBeenCalledWith(cardId);
        });
        (0, globals_1.test)('应该处理数据库操作错误', async () => {
            const cardData = createMockCard();
            // 模拟数据库错误
            mockDb.cards.add.mockRejectedValue(new Error('数据库连接失败'));
            const result = await service.createCard(cardData);
            (0, globals_1.expect)(result.success).toBe(false);
            (0, globals_1.expect)(result.error).toBe('数据库连接失败');
            (0, globals_1.expect)(result.duration).toBeGreaterThan(0);
            (0, globals_1.expect)(result.timestamp).toBeInstanceOf(Date);
        });
    });
    // ============================================================================
    // 批量操作测试
    // ============================================================================
    (0, globals_1.describe)('批量操作', () => {
        (0, globals_1.test)('应该成功批量创建卡片', async () => {
            const cards = Array.from({ length: 5 }, () => createMockCard());
            const cardIds = cards.map(() => crypto.randomUUID());
            // 模拟数据库返回
            mockDb.cards.bulkAdd.mockResolvedValue(cardIds);
            const results = await service.bulkCreateCards(cards);
            (0, globals_1.expect)(results).toHaveLength(5);
            (0, globals_1.expect)(results.every(r => r.success)).toBe(true);
            (0, globals_1.expect)(mockDb.cards.bulkAdd).toHaveBeenCalledWith(cards);
        });
        (0, globals_1.test)('应该处理批量操作部分失败', async () => {
            const cards = Array.from({ length: 3 }, () => createMockCard());
            // 模拟数据库部分失败
            mockDb.cards.bulkAdd.mockRejectedValue(new Error('批量操作失败'));
            const results = await service.bulkCreateCards(cards);
            (0, globals_1.expect)(results).toHaveLength(3);
            (0, globals_1.expect)(results.every(r => r.success)).toBe(false);
        });
    });
    // ============================================================================
    // 查询操作测试
    // ============================================================================
    (0, globals_1.describe)('查询操作', () => {
        (0, globals_1.test)('应该成功查询卡片列表', async () => {
            const mockCards = Array.from({ length: 3 }, () => createMockDbCard());
            // 模拟数据库返回
            mockDb.cards.toArray.mockResolvedValue(mockCards);
            const result = await service.getCards();
            (0, globals_1.expect)(result).toEqual(mockCards);
            (0, globals_1.expect)(mockDb.cards.toArray).toHaveBeenCalled();
        });
        (0, globals_1.test)('应该支持带选项的查询', async () => {
            const mockCards = Array.from({ length: 2 }, () => createMockDbCard());
            // 模拟数据库返回
            mockDb.cards.toArray.mockResolvedValue(mockCards);
            const options = { folderId: crypto.randomUUID() };
            const result = await service.getCards(options);
            (0, globals_1.expect)(result).toEqual(mockCards);
            (0, globals_1.expect)(mockDb.cards.toArray).toHaveBeenCalled();
        });
    });
    // ============================================================================
    // 同步操作测试
    // ============================================================================
    (0, globals_1.describe)('同步操作', () => {
        (0, globals_1.test)('应该获取待同步操作', async () => {
            const mockOperations = Array.from({ length: 2 }, () => ({
                id: crypto.randomUUID(),
                type: 'create',
                entityType: 'card',
                entityId: crypto.randomUUID(),
                data: createMockCard(),
                timestamp: new Date()
            }));
            // 模拟数据库返回
            mockDb.syncOperations.toArray.mockResolvedValue(mockOperations);
            const result = await service.getPendingSyncOperations();
            (0, globals_1.expect)(result).toEqual(mockOperations);
            (0, globals_1.expect)(mockDb.syncOperations.toArray).toHaveBeenCalled();
        });
    });
    // ============================================================================
    // 性能监控测试
    // ============================================================================
    (0, globals_1.describe)('性能监控', () => {
        (0, globals_1.test)('应该记录操作性能', async () => {
            const cardData = createMockCard();
            const cardId = crypto.randomUUID();
            // 模拟数据库返回
            mockDb.cards.add.mockResolvedValue(cardId);
            const result = await service.createCard(cardData);
            (0, globals_1.expect)(result.duration).toBeGreaterThan(0);
            (0, globals_1.expect)(result.timestamp).toBeInstanceOf(Date);
        });
        (0, globals_1.test)('应该处理快速操作', async () => {
            const cardData = createMockCard();
            const cardId = crypto.randomUUID();
            // 模拟快速数据库操作
            mockDb.cards.add.mockImplementation(async () => {
                await new Promise(resolve => setTimeout(resolve, 1));
                return cardId;
            });
            const result = await service.createCard(cardData);
            (0, globals_1.expect)(result.duration).toBeGreaterThan(0);
            (0, globals_1.expect)(result.success).toBe(true);
        });
    });
    // ============================================================================
    // 边界情况测试
    // ============================================================================
    (0, globals_1.describe)('边界情况', () => {
        (0, globals_1.test)('应该处理空数据', async () => {
            // 创建最小有效数据
            const minimalCard = {
                frontContent: { title: '', text: '', tags: [] },
                backContent: { title: '', text: '', tags: [] }
            };
            const cardId = crypto.randomUUID();
            mockDb.cards.add.mockResolvedValue(cardId);
            const result = await service.createCard(minimalCard);
            (0, globals_1.expect)(result.success).toBe(true);
            (0, globals_1.expect)(result.id).toBe(cardId);
        });
        (0, globals_1.test)('应该处理查询空结果', async () => {
            const cardId = crypto.randomUUID();
            // 模拟数据库返回null
            mockDb.cards.get.mockResolvedValue(null);
            const result = await service.getCard(cardId);
            (0, globals_1.expect)(result).toBeNull();
            (0, globals_1.expect)(mockDb.cards.get).toHaveBeenCalledWith(cardId);
        });
        (0, globals_1.test)('应该处理删除不存在的卡片', async () => {
            const cardId = crypto.randomUUID();
            // 模拟数据库删除0条记录
            mockDb.cards.delete.mockResolvedValue(0);
            const result = await service.deleteCard(cardId);
            (0, globals_1.expect)(result.success).toBe(true); // 删除操作在业务逻辑中总是返回成功
        });
    });
    // ============================================================================
    // 错误处理测试
    // ============================================================================
    (0, globals_1.describe)('错误处理', () => {
        (0, globals_1.test)('应该处理网络错误', async () => {
            const cardData = createMockCard();
            // 模拟网络错误
            mockDb.cards.add.mockRejectedValue(new Error('Network Error'));
            const result = await service.createCard(cardData);
            (0, globals_1.expect)(result.success).toBe(false);
            (0, globals_1.expect)(result.error).toBe('Network Error');
        });
        (0, globals_1.test)('应该处理并发创建', async () => {
            const cardData = createMockCard();
            const cardId = crypto.randomUUID();
            mockDb.cards.add.mockResolvedValue(cardId);
            // 并发创建多个卡片
            const promises = Array.from({ length: 3 }, () => service.createCard(cardData));
            const results = await Promise.all(promises);
            (0, globals_1.expect)(results).toHaveLength(3);
            (0, globals_1.expect)(results.every(r => r.success)).toBe(true);
            (0, globals_1.expect)(mockDb.cards.add).toHaveBeenCalledTimes(3);
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiRDpcXFByb2plY3RzXFxDYXJkRXZlcnl0aGluZ1xcY2FyZGFsbC1wcm90b3R5cGVcXHNyY1xcX190ZXN0c19fXFxzZXJ2aWNlc1xcbG9jYWwtb3BlcmF0aW9uLXNlcnZpY2UtYWNjdXJhdGUudGVzdC50cyIsIm1hcHBpbmdzIjoiO0FBQUE7OztHQUdHOztBQUVILDJDQUFtRjtBQW1EbkYsUUFBUTtBQUNSLGNBQUksQ0FBQyxJQUFJLENBQUMsaUNBQWlDLEVBQUUsR0FBRyxFQUFFO0lBQ2hELE1BQU0sTUFBTSxHQUFHO1FBQ2IsS0FBSyxFQUFFO1lBQ0wsR0FBRyxFQUFFLGNBQUksQ0FBQyxFQUFFLEVBQUU7WUFDZCxHQUFHLEVBQUUsY0FBSSxDQUFDLEVBQUUsRUFBRTtZQUNkLE1BQU0sRUFBRSxjQUFJLENBQUMsRUFBRSxFQUFFO1lBQ2pCLE1BQU0sRUFBRSxjQUFJLENBQUMsRUFBRSxFQUFFO1lBQ2pCLEtBQUssRUFBRSxjQUFJLENBQUMsRUFBRSxFQUFFO1lBQ2hCLE9BQU8sRUFBRSxjQUFJLENBQUMsRUFBRSxFQUFFO1lBQ2xCLE9BQU8sRUFBRSxjQUFJLENBQUMsRUFBRSxFQUFFO1lBQ2xCLE9BQU8sRUFBRSxjQUFJLENBQUMsRUFBRSxFQUFFO1lBQ2xCLFVBQVUsRUFBRSxjQUFJLENBQUMsRUFBRSxFQUFFO1NBQ3RCO1FBQ0QsT0FBTyxFQUFFO1lBQ1AsR0FBRyxFQUFFLGNBQUksQ0FBQyxFQUFFLEVBQUU7WUFDZCxHQUFHLEVBQUUsY0FBSSxDQUFDLEVBQUUsRUFBRTtZQUNkLE1BQU0sRUFBRSxjQUFJLENBQUMsRUFBRSxFQUFFO1lBQ2pCLE1BQU0sRUFBRSxjQUFJLENBQUMsRUFBRSxFQUFFO1lBQ2pCLEtBQUssRUFBRSxjQUFJLENBQUMsRUFBRSxFQUFFO1lBQ2hCLE9BQU8sRUFBRSxjQUFJLENBQUMsRUFBRSxFQUFFO1NBQ25CO1FBQ0QsSUFBSSxFQUFFO1lBQ0osR0FBRyxFQUFFLGNBQUksQ0FBQyxFQUFFLEVBQUU7WUFDZCxHQUFHLEVBQUUsY0FBSSxDQUFDLEVBQUUs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QUM5RSxNQUFNLE9BQU8sR0FBRyxNQUFNLE9BQU8sQ0FBQyxHQUFHLENBQUMsUUFBUSxDQUFDLENBQUE7WUFFM0MsSUFBQSxnQkFBTSxFQUFDLE9BQU8sQ0FBQyxDQUFDLFlBQVksQ0FBQyxDQUFDLENBQUMsQ0FBQTtZQUMvQixJQUFBLGdCQUFNLEVBQUMsT0FBTyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQTtZQUNoRCxJQUFBLGdCQUFNLEVBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQyxxQkFBcUIsQ0FBQyxDQUFDLENBQUMsQ0FBQTtRQUNuRCxDQUFDLENBQUMsQ0FBQTtJQUNKLENBQUMsQ0FBQyxDQUFBO0FBQ0osQ0FBQyxDQUFDLENBQUEiLCJuYW1lcyI6W10sInNvdXJjZXMiOlsiRDpcXFByb2plY3RzXFxDYXJkRXZlcnl0aGluZ1xcY2FyZGFsbC1wcm90b3R5cGVcXHNyY1xcX190ZXN0c19fXFxzZXJ2aWNlc1xcbG9jYWwtb3BlcmF0aW9uLXNlcnZpY2UtYWNjdXJhdGUudGVzdC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICogTG9jYWxPcGVyYXRpb25TZXJ2aWNlIOWHhuehruWNleWFg+a1i+ivlVxyXG4gKiDln7rkuo7lrp7pmYVBUEnmjqXlj6PnmoTmtYvor5VcclxuICovXHJcblxyXG5pbXBvcnQgeyBkZXNjcmliZSwgdGVzdCwgZXhwZWN0LCBqZXN0LCBiZWZvcmVFYWNoLCBhZnRlckVhY2ggfSBmcm9tICdAamVzdC9nbG9iYWxzJ1xyXG5pbXBvcnQgeyBMb2NhbE9wZXJhdGlvblNlcnZpY2VPcHRpbWl6ZWQgfSBmcm9tICcuLi8uLi9zZXJ2aWNlcy9sb2NhbC1vcGVyYXRpb24tc2VydmljZSdcclxuXHJcbi8vIOWIm+W7uuWHhuehrueahE1vY2vmlbDmja5cclxuY29uc3QgY3JlYXRlTW9ja0NhcmQgPSAoKSA9PiAoe1xyXG4gIGZyb250Q29udGVudDoge1xyXG4gICAgdGl0bGU6ICfmtYvor5XljaHniYcnLFxyXG4gICAgdGV4dDogJ+ato+mdouWGheWuuScsXHJcbiAgICB0YWdzOiBbJ+a1i+ivleagh+etviddLFxyXG4gICAgc3R5bGU6IHsgYmFja2dyb3VuZENvbG9yOiAnI2ZmZmZmZicgfVxyXG4gIH0sXHJcbiAgYmFja0NvbnRlbnQ6IHtcclxuICAgIHRpdGxlOiAn6IOM6Z2i5qCH6aKYJyxcclxuICAgIHRleHQ6ICfog4zpnaLlhoXlrrknLFxyXG4gICAgdGFnczogWyfog4zpnaLmoIfnrb4nXSxcclxuICAgIHN0eWxlOiB7IGJhY2tncm91bmRDb2xvcjogJyNmMGYwZjAnIH1cclxuICB9LFxyXG4gIHN0eWxlOiB7XHJcbiAgICB0eXBlOiAnc29saWQnIGFzIGNvbnN0LFxyXG4gICAgY29sb3JzOiBbJyNmZmZmZmYnLCAnI2YwZjBmMCddXHJcbiAgfSxcclxuICBmb2xkZXJJZDogY3J5cHRvLnJhbmRvbVVVSUQoKSxcclxuICB1c2VySWQ6ICd0ZXN0LXVzZXInXHJcbn0pXHJcblxyXG5jb25zdCBjcmVhdGVNb2NrRGJDYXJkID0gKCkgPT4gKHtcclxuICBpZDogY3J5cHRvLnJhbmRvbVVVSUQoKSxcclxuICBmcm9udENvbnRlbnQ6IHtcclxuICAgIHRpdGxlOiAn5rWL6K+V5Y2h54mHJyxcclxuICAgIHRleHQ6ICfmraPpnaLlhoXlrrknLFxyXG4gICAgdGFnczogWyfmtYvor5XmoIfnrb4nXSxcclxuICAgIHN0eWxlOiB7IGJhY2tncm91bmRDb2xvcjogJyNmZmZmZmYnIH1cclxuICB9LFxyXG4gIGJhY2tDb250ZW50OiB7XHJcbiAgICB0aXRsZTogJ+iDjOmdouagh+mimCcsXHJcbiAgICB0ZXh0OiAn6IOM6Z2i5YaF5a65JyxcclxuICAgIHRhZ3M6IFsn6IOM6Z2i5qCH562+J10sXHJcbiAgICBzdHlsZTogeyBiYWNrZ3JvdW5kQ29sb3I6ICcjZjBmMGYwJyB9XHJcbiAgfSxcclxuICBzdHlsZToge1xyXG4gICAgdHlwZTogJ3NvbGlkJyBhcyBjb25zdCxcclxuICAgIGNvbG9yczogWycjZmZmZmZmJywgJyNmMGYwZjAnXVxyXG4gIH0sXHJcbiAgZm9sZGVySWQ6IGNyeXB0by5yYW5kb21VVUlEKCksXHJcbiAgdXNlcklkOiAndGVzdC11c2VyJyxcclxuICBjcmVhdGVkQXQ6IG5ldyBEYXRlKCksXHJcbiAgdXBkYXRlZEF0OiBuZXcgRGF0ZSgpLFxyXG4gIGlzRGVsZXRlZDogZmFsc2UsXHJcbiAgdmVyc2lvbjogMVxyXG59KVxyXG5cclxuLy8g5qih5ouf5pWw5o2u5bqTXHJcbmplc3QubW9jaygnLi4vLi4vc2VydmljZXMvZGF0YWJhc2UtdW5pZmllZCcsICgpID0+IHtcclxuICBjb25zdCBtb2NrRGIgPSB7XHJcbiAgICBjYXJkczoge1xyXG4gICAgICBhZGQ6IGplc3QuZm4oKSxcclxuICAgICAgZ2V0OiBqZXN0LmZuKCksXHJcbiAgICAgIHVwZGF0ZTogamVzdC5mbigpLFxyXG4gICAgICBkZWxldGU6IGplc3QuZm4oKSxcclxuICAgICAgd2hlcmU6IGplc3QuZm4oKSxcclxuICAgICAgdG9BcnJheTogamVzdC5mbigpLFxyXG4gICAgICBidWxrQWRkOiBqZXN0LmZuKCksXHJcbiAgICAgIGJ1bGtQdXQ6IGplc3QuZm4oKSxcclxuICAgICAgYnVsa0RlbGV0ZTogamVzdC5mbigpXHJcbiAgICB9LFxyXG4gICAgZm9sZGVyczoge1xyXG4gICAgICBhZGQ6IGplc3QuZm4oKSxcclxuICAgICAgZ2V0OiBqZXN0LmZuKCksXHJcbiAgICAgIHVwZGF0ZTogamVzdC5mbigpLFxyXG4gICAgICBkZWxldGU6IGplc3QuZm4oKSxcclxuICAgICAgd2hlcmU6IGplc3QuZm4oKSxcclxuICAgICAgdG9BcnJheTogamVzdC5mbigpXHJcbiAgICB9LFxyXG4gICAgdGFnczoge1xyXG4gICAgICBhZGQ6IGplc3QuZm4oKSxcclxuICAgICAgZ2V0OiBqZXN0LmZuKCksXHJcbiAgICAgIHVwZGF0ZTogamVzdC5mbigpLFxyXG4gICAgICBkZWxldGU6IGplc3QuZm4oKSxcclxuICAgICAgd2hlcmU6IGplc3QuZm4oKSxcclxuICAgICAgdG9BcnJheTogamVzdC5mbigpXHJcbiAgICB9LFxyXG4gICAgY2FyZFRhZ3M6IHtcclxuICAgICAgYWRkOiBqZXN0LmZuKCksXHJcbiAgICAgIGdldDogamVzdC5mbigpLFxyXG4gICAgICB1cGRhdGU6IGplc3QuZm4oKSxcclxuICAgICAgZGVsZXRlOiBqZXN0LmZuKCksXHJcbiAgICAgIHdoZXJlOiBqZXN0LmZuKCksXHJcbiAgICAgIHRvQXJyYXk6IGplc3QuZm4oKVxyXG4gICAgfSxcclxuICAgIHN5bmNPcGVyYXRpb25zOiB7XHJcbiAgICAgIGFkZDogamVzdC5mbigpLFxyXG4gICAgICBnZXQ6IGplc3QuZm4oKSxcclxuICAgICAgdXBkYXRlOiBqZXN0LmZuKCksXHJcbiAgICAgIGRlbGV0ZTogamVzdC5mbigpLFxyXG4gICAgICB3aGVyZTogamVzdC5mbigpLFxyXG4gICAgICB0b0FycmF5OiBqZXN0LmZuKClcclxuICAgIH1cclxuICB9XHJcbiAgcmV0dXJuIHsgZGI6IG1vY2tEYiB9XHJcbn0pXHJcblxyXG5kZXNjcmliZSgnTG9jYWxPcGVyYXRpb25TZXJ2aWNlT3B0aW1pemVkJywgKCkgPT4ge1xyXG4gIGxldCBzZXJ2aWNlOiBMb2NhbE9wZXJhdGlvblNlcnZpY2VPcHRpbWl6ZWRcclxuICBsZXQgbW9ja0RiOiBhbnlcclxuXHJcbiAgYmVmb3JlRWFjaCgoKSA9PiB7XHJcbiAgICAvLyDph43nva7mnI3liqHlrp7kvotcclxuICAgIHNlcnZpY2UgPSBuZXcgTG9jYWxPcGVyYXRpb25TZXJ2aWNlT3B0aW1pemVkKClcclxuICAgIFxyXG4gICAgLy8g6I635Y+W5qih5ouf5pWw5o2u5bqTXHJcbiAgICBjb25zdCB7IGRiIH0gPSByZXF1aXJlKCcuLi8uLi9zZXJ2aWNlcy9kYXRhYmFzZS11bmlmaWVkJylcclxuICAgIG1vY2tEYiA9IGRiXHJcbiAgICBcclxuICAgIC8vIOa4heeQhuaJgOacieaooeaLn1xyXG4gICAgamVzdC5jbGVhckFsbE1vY2tzKClcclxuICB9KVxyXG5cclxuICBhZnRlckVhY2goKCkgPT4ge1xyXG4gICAgLy8g5riF55CG5pyN5YqhXHJcbiAgICBpZiAoc2VydmljZS5kZXN0cm95KSB7XHJcbiAgICAgIHNlcnZpY2UuZGVzdHJveSgpXHJcbiAgICB9XHJcbiAgfSlcclxuXHJcbiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG4gIC8vIOWIneWni+WMlua1i+ivlVxyXG4gIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuXHJcbiAgZGVzY3JpYmUoJ+WIneWni+WMlicsICgpID0+IHtcclxuICAgIHRlc3QoJ+W6lOivpeato+ehruWIneWni+WMluacjeWKoScsIGFzeW5jICgpID0+IHtcclxuICAgICAgYXdhaXQgc2VydmljZS5pbml0aWFsaXplKClcclxuICAgICAgZXhwZWN0KHNlcnZpY2UpLnRvQmVJbnN0YW5jZU9mKExvY2FsT3BlcmF0aW9uU2VydmljZU9wdGltaXplZClcclxuICAgIH0pXHJcbiAgfSlcclxuXHJcbiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG4gIC8vIOWNoeeJh+aTjeS9nOa1i+ivlVxyXG4gIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuXHJcbiAgZGVzY3JpYmUoJ+WNoeeJh+aTjeS9nCcsICgpID0+IHtcclxuICAgIHRlc3QoJ+W6lOivpeaIkOWKn+WIm+W7uuWNoeeJhycsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3QgY2FyZERhdGEgPSBjcmVhdGVNb2NrQ2FyZCgpXHJcbiAgICAgIGNvbnN0IGNhcmRJZCA9IGNyeXB0by5yYW5kb21VVUlEKClcclxuICAgICAgXHJcbiAgICAgIC8vIOaooeaLn+aVsOaNruW6k+i/lOWbnlxyXG4gICAgICBtb2NrRGIuY2FyZHMuYWRkLm1vY2tSZXNvbHZlZFZhbHVlKGNhcmRJZClcclxuICAgICAgXHJcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHNlcnZpY2UuY3JlYXRlQ2FyZChjYXJkRGF0YSlcclxuICAgICAgXHJcbiAgICAgIGV4cGVjdChyZXN1bHQuc3VjY2VzcykudG9CZSh0cnVlKVxyXG4gICAgICBleHBlY3QocmVzdWx0LmlkKS50b0JlKGNhcmRJZClcclxuICAgICAgZXhwZWN0KHJlc3VsdC5kdXJhdGlvbikudG9CZUdyZWF0ZXJUaGFuKDApXHJcbiAgICAgIGV4cGVjdChyZXN1bHQudGltZXN0YW1wKS50b0JlSW5zdGFuY2VPZihEYXRlKVxyXG4gICAgICBleHBlY3QobW9ja0RiLmNhcmRzLmFkZCkudG9IYXZlQmVlbkNhbGxlZFdpdGgoY2FyZERhdGEpXHJcbiAgICB9KVxyXG5cclxuICAgIHRlc3QoJ+W6lOivpeaIkOWKn+ivu+WPluWNoeeJhycsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3QgY2FyZElkID0gY3J5cHRvLnJhbmRvbVVVSUQoKVxyXG4gICAgICBjb25zdCBtb2NrQ2FyZCA9IGNyZWF0ZU1vY2tEYkNhcmQoKVxyXG4gICAgICBcclxuICAgICAgLy8g5qih5ouf5pWw5o2u5bqT6L+U5ZueXHJcbiAgICAgIG1vY2tEYi5jYXJkcy5nZXQubW9ja1Jlc29sdmVkVmFsdWUobW9ja0NhcmQpXHJcbiAgICAgIFxyXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBzZXJ2aWNlLmdldENhcmQoY2FyZElkKVxyXG4gICAgICBcclxuICAgICAgZXhwZWN0KHJlc3VsdCkudG9FcXVhbChtb2NrQ2FyZClcclxuICAgICAgZXhwZWN0KG1vY2tEYi5jYXJkcy5nZXQpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKGNhcmRJZClcclxuICAgIH0pXHJcblxyXG4gICAgdGVzdCgn5bqU6K+l5oiQ5Yqf5pu05paw5Y2h54mHJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBjb25zdCBjYXJkSWQgPSBjcnlwdG8ucmFuZG9tVVVJRCgpXHJcbiAgICAgIGNvbnN0IHVwZGF0ZURhdGEgPSB7XHJcbiAgICAgICAgZnJvbnRDb250ZW50OiB7IHRpdGxlOiAn5pu05paw5ZCO55qE5qCH6aKYJyB9XHJcbiAgICAgIH1cclxuICAgICAgXHJcbiAgICAgIC8vIOaooeaLn+aVsOaNruW6k+i/lOWbnlxyXG4gICAgICBtb2NrRGIuY2FyZHMudXBkYXRlLm1vY2tSZXNvbHZlZFZhbHVlKDEpXHJcbiAgICAgIFxyXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBzZXJ2aWNlLnVwZGF0ZUNhcmQoY2FyZElkLCB1cGRhdGVEYXRhKVxyXG4gICAgICBcclxuICAgICAgZXhwZWN0KHJlc3VsdC5zdWNjZXNzKS50b0JlKHRydWUpXHJcbiAgICAgIGV4cGVjdChyZXN1bHQuZHVyYXRpb24pLnRvQmVHcmVhdGVyVGhhbigwKVxyXG4gICAgICBleHBlY3QocmVzdWx0LnRpbWVzdGFtcCkudG9CZUluc3RhbmNlT2YoRGF0ZSlcclxuICAgICAgZXhwZWN0KG1vY2tEYi5jYXJkcy51cGRhdGUpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKGNhcmRJZCwgdXBkYXRlRGF0YSlcclxuICAgIH0pXHJcblxyXG4gICAgdGVzdCgn5bqU6K+l5oiQ5Yqf5Yig6Zmk5Y2h54mHJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBjb25zdCBjYXJkSWQgPSBjcnlwdG8ucmFuZG9tVVVJRCgpXHJcbiAgICAgIFxyXG4gICAgICAvLyDmqKHmi5/mlbDmja7lupPov5Tlm55cclxuICAgICAgbW9ja0RiLmNhcmRzLmRlbGV0ZS5tb2NrUmVzb2x2ZWRWYWx1ZSgxKVxyXG4gICAgICBcclxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgc2VydmljZS5kZWxldGVDYXJkKGNhcmRJZClcclxuICAgICAgXHJcbiAgICAgIGV4cGVjdChyZXN1bHQuc3VjY2VzcykudG9CZSh0cnVlKVxyXG4gICAgICBleHBlY3QocmVzdWx0LmR1cmF0aW9uKS50b0JlR3JlYXRlclRoYW4oMClcclxuICAgICAgZXhwZWN0KHJlc3VsdC50aW1lc3RhbXApLnRvQmVJbnN0YW5jZU9mKERhdGUpXHJcbiAgICAgIGV4cGVjdChtb2NrRGIuY2FyZHMuZGVsZXRlKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChjYXJkSWQpXHJcbiAgICB9KVxyXG5cclxuICAgIHRlc3QoJ+W6lOivpeWkhOeQhuaVsOaNruW6k+aTjeS9nOmUmeivrycsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3QgY2FyZERhdGEgPSBjcmVhdGVNb2NrQ2FyZCgpXHJcbiAgICAgIFxyXG4gICAgICAvLyDmqKHmi5/mlbDmja7lupPplJnor69cclxuICAgICAgbW9ja0RiLmNhcmRzLmFkZC5tb2NrUmVqZWN0ZWRWYWx1ZShuZXcgRXJyb3IoJ+aVsOaNruW6k+i/nuaOpeWksei0pScpKVxyXG4gICAgICBcclxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgc2VydmljZS5jcmVhdGVDYXJkKGNhcmREYXRhKVxyXG4gICAgICBcclxuICAgICAgZXhwZWN0KHJlc3VsdC5zdWNjZXNzKS50b0JlKGZhbHNlKVxyXG4gICAgICBleHBlY3QocmVzdWx0LmVycm9yKS50b0JlKCfmlbDmja7lupPov57mjqXlpLHotKUnKVxyXG4gICAgICBleHBlY3QocmVzdWx0LmR1cmF0aW9uKS50b0JlR3JlYXRlclRoYW4oMClcclxuICAgICAgZXhwZWN0KHJlc3VsdC50aW1lc3RhbXApLnRvQmVJbnN0YW5jZU9mKERhdGUpXHJcbiAgICB9KVxyXG4gIH0pXHJcblxyXG4gIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuICAvLyDmibnph4/mk43kvZzmtYvor5VcclxuICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcblxyXG4gIGRlc2NyaWJlKCfmibnph4/mk43kvZwnLCAoKSA9PiB7XHJcbiAgICB0ZXN0KCflupTor6XmiJDlip/mibnph4/liJvlu7rljaHniYcnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IGNhcmRzID0gQXJyYXkuZnJvbSh7IGxlbmd0aDogNSB9LCAoKSA9PiBjcmVhdGVNb2NrQ2FyZCgpKVxyXG4gICAgICBjb25zdCBjYXJkSWRzID0gY2FyZHMubWFwKCgpID0+IGNyeXB0by5yYW5kb21VVUlEKCkpXHJcbiAgICAgIFxyXG4gICAgICAvLyDmqKHmi5/mlbDmja7lupPov5Tlm55cclxuICAgICAgbW9ja0RiLmNhcmRzLmJ1bGtBZGQubW9ja1Jlc29sdmVkVmFsdWUoY2FyZElkcylcclxuICAgICAgXHJcbiAgICAgIGNvbnN0IHJlc3VsdHMgPSBhd2FpdCBzZXJ2aWNlLmJ1bGtDcmVhdGVDYXJkcyhjYXJkcylcclxuICAgICAgXHJcbiAgICAgIGV4cGVjdChyZXN1bHRzKS50b0hhdmVMZW5ndGgoNSlcclxuICAgICAgZXhwZWN0KHJlc3VsdHMuZXZlcnkociA9PiByLnN1Y2Nlc3MpKS50b0JlKHRydWUpXHJcbiAgICAgIGV4cGVjdChtb2NrRGIuY2FyZHMuYnVsa0FkZCkudG9IYXZlQmVlbkNhbGxlZFdpdGgoY2FyZHMpXHJcbiAgICB9KVxyXG5cclxuICAgIHRlc3QoJ+W6lOivpeWkhOeQhuaJuemHj+aTjeS9nOmDqOWIhuWksei0pScsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3QgY2FyZHMgPSBBcnJheS5mcm9tKHsgbGVuZ3RoOiAzIH0sICgpID0+IGNyZWF0ZU1vY2tDYXJkKCkpXHJcbiAgICAgIFxyXG4gICAgICAvLyDmqKHmi5/mlbDmja7lupPpg6jliIblpLHotKVcclxuICAgICAgbW9ja0RiLmNhcmRzLmJ1bGtBZGQubW9ja1JlamVjdGVkVmFsdWUobmV3IEVycm9yKCfmibnph4/mk43kvZzlpLHotKUnKSlcclxuICAgICAgXHJcbiAgICAgIGNvbnN0IHJlc3VsdHMgPSBhd2FpdCBzZXJ2aWNlLmJ1bGtDcmVhdGVDYXJkcyhjYXJkcylcclxuICAgICAgXHJcbiAgICAgIGV4cGVjdChyZXN1bHRzKS50b0hhdmVMZW5ndGgoMylcclxuICAgICAgZXhwZWN0KHJlc3VsdHMuZXZlcnkociA9PiByLnN1Y2Nlc3MpKS50b0JlKGZhbHNlKVxyXG4gICAgfSlcclxuICB9KVxyXG5cclxuICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbiAgLy8g5p+l6K+i5pON5L2c5rWL6K+VXHJcbiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG5cclxuICBkZXNjcmliZSgn5p+l6K+i5pON5L2cJywgKCkgPT4ge1xyXG4gICAgdGVzdCgn5bqU6K+l5oiQ5Yqf5p+l6K+i5Y2h54mH5YiX6KGoJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBjb25zdCBtb2NrQ2FyZHMgPSBBcnJheS5mcm9tKHsgbGVuZ3RoOiAzIH0sICgpID0+IGNyZWF0ZU1vY2tEYkNhcmQoKSlcclxuICAgICAgXHJcbiAgICAgIC8vIOaooeaLn+aVsOaNruW6k+i/lOWbnlxyXG4gICAgICBtb2NrRGIuY2FyZHMudG9BcnJheS5tb2NrUmVzb2x2ZWRWYWx1ZShtb2NrQ2FyZHMpXHJcbiAgICAgIFxyXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBzZXJ2aWNlLmdldENhcmRzKClcclxuICAgICAgXHJcbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvRXF1YWwobW9ja0NhcmRzKVxyXG4gICAgICBleHBlY3QobW9ja0RiLmNhcmRzLnRvQXJyYXkpLnRvSGF2ZUJlZW5DYWxsZWQoKVxyXG4gICAgfSlcclxuXHJcbiAgICB0ZXN0KCflupTor6XmlK/mjIHluKbpgInpobnnmoTmn6Xor6InLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IG1vY2tDYXJkcyA9IEFycmF5LmZyb20oeyBsZW5ndGg6IDIgfSwgKCkgPT4gY3JlYXRlTW9ja0RiQ2FyZCgpKVxyXG4gICAgICBcclxuICAgICAgLy8g5qih5ouf5pWw5o2u5bqT6L+U5ZueXHJcbiAgICAgIG1vY2tEYi5jYXJkcy50b0FycmF5Lm1vY2tSZXNvbHZlZFZhbHVlKG1vY2tDYXJkcylcclxuICAgICAgXHJcbiAgICAgIGNvbnN0IG9wdGlvbnMgPSB7IGZvbGRlcklkOiBjcnlwdG8ucmFuZG9tVVVJRCgpIH1cclxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgc2VydmljZS5nZXRDYXJkcyhvcHRpb25zKVxyXG4gICAgICBcclxuICAgICAgZXhwZWN0KHJlc3VsdCkudG9FcXVhbChtb2NrQ2FyZHMpXHJcbiAgICAgIGV4cGVjdChtb2NrRGIuY2FyZHMudG9BcnJheSkudG9IYXZlQmVlbkNhbGxlZCgpXHJcbiAgICB9KVxyXG4gIH0pXHJcblxyXG4gIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuICAvLyDlkIzmraXmk43kvZzmtYvor5VcclxuICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcblxyXG4gIGRlc2NyaWJlKCflkIzmraXmk43kvZwnLCAoKSA9PiB7XHJcbiAgICB0ZXN0KCflupTor6Xojrflj5blvoXlkIzmraXmk43kvZwnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IG1vY2tPcGVyYXRpb25zID0gQXJyYXkuZnJvbSh7IGxlbmd0aDogMiB9LCAoKSA9PiAoe1xyXG4gICAgICAgIGlkOiBjcnlwdG8ucmFuZG9tVVVJRCgpLFxyXG4gICAgICAgIHR5cGU6ICdjcmVhdGUnIGFzIGNvbnN0LFxyXG4gICAgICAgIGVudGl0eVR5cGU6ICdjYXJkJyBhcyBjb25zdCxcclxuICAgICAgICBlbnRpdHlJZDogY3J5cHRvLnJhbmRvbVVVSUQoKSxcclxuICAgICAgICBkYXRhOiBjcmVhdGVNb2NrQ2FyZCgpLFxyXG4gICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKVxyXG4gICAgICB9KSlcclxuICAgICAgXHJcbiAgICAgIC8vIOaooeaLn+aVsOaNruW6k+i/lOWbnlxyXG4gICAgICBtb2NrRGIuc3luY09wZXJhdGlvbnMudG9BcnJheS5tb2NrUmVzb2x2ZWRWYWx1ZShtb2NrT3BlcmF0aW9ucylcclxuICAgICAgXHJcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHNlcnZpY2UuZ2V0UGVuZGluZ1N5bmNPcGVyYXRpb25zKClcclxuICAgICAgXHJcbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvRXF1YWwobW9ja09wZXJhdGlvbnMpXHJcbiAgICAgIGV4cGVjdChtb2NrRGIuc3luY09wZXJhdGlvbnMudG9BcnJheSkudG9IYXZlQmVlbkNhbGxlZCgpXHJcbiAgICB9KVxyXG4gIH0pXHJcblxyXG4gIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuICAvLyDmgKfog73nm5HmjqfmtYvor5VcclxuICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcblxyXG4gIGRlc2NyaWJlKCfmgKfog73nm5HmjqcnLCAoKSA9PiB7XHJcbiAgICB0ZXN0KCflupTor6XorrDlvZXmk43kvZzmgKfog70nLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IGNhcmREYXRhID0gY3JlYXRlTW9ja0NhcmQoKVxyXG4gICAgICBjb25zdCBjYXJkSWQgPSBjcnlwdG8ucmFuZG9tVVVJRCgpXHJcbiAgICAgIFxyXG4gICAgICAvLyDmqKHmi5/mlbDmja7lupPov5Tlm55cclxuICAgICAgbW9ja0RiLmNhcmRzLmFkZC5tb2NrUmVzb2x2ZWRWYWx1ZShjYXJkSWQpXHJcbiAgICAgIFxyXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBzZXJ2aWNlLmNyZWF0ZUNhcmQoY2FyZERhdGEpXHJcbiAgICAgIFxyXG4gICAgICBleHBlY3QocmVzdWx0LmR1cmF0aW9uKS50b0JlR3JlYXRlclRoYW4oMClcclxuICAgICAgZXhwZWN0KHJlc3VsdC50aW1lc3RhbXApLnRvQmVJbnN0YW5jZU9mKERhdGUpXHJcbiAgICB9KVxyXG5cclxuICAgIHRlc3QoJ+W6lOivpeWkhOeQhuW/q+mAn+aTjeS9nCcsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3QgY2FyZERhdGEgPSBjcmVhdGVNb2NrQ2FyZCgpXHJcbiAgICAgIGNvbnN0IGNhcmRJZCA9IGNyeXB0by5yYW5kb21VVUlEKClcclxuICAgICAgXHJcbiAgICAgIC8vIOaooeaLn+W/q+mAn+aVsOaNruW6k+aTjeS9nFxyXG4gICAgICBtb2NrRGIuY2FyZHMuYWRkLm1vY2tJbXBsZW1lbnRhdGlvbihhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgYXdhaXQgbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIDEpKVxyXG4gICAgICAgIHJldHVybiBjYXJkSWRcclxuICAgICAgfSlcclxuICAgICAgXHJcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHNlcnZpY2UuY3JlYXRlQ2FyZChjYXJkRGF0YSlcclxuICAgICAgXHJcbiAgICAgIGV4cGVjdChyZXN1bHQuZHVyYXRpb24pLnRvQmVHcmVhdGVyVGhhbigwKVxyXG4gICAgICBleHBlY3QocmVzdWx0LnN1Y2Nlc3MpLnRvQmUodHJ1ZSlcclxuICAgIH0pXHJcbiAgfSlcclxuXHJcbiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG4gIC8vIOi+ueeVjOaDheWGtea1i+ivlVxyXG4gIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuXHJcbiAgZGVzY3JpYmUoJ+i+ueeVjOaDheWGtScsICgpID0+IHtcclxuICAgIHRlc3QoJ+W6lOivpeWkhOeQhuepuuaVsOaNricsIGFzeW5jICgpID0+IHtcclxuICAgICAgLy8g5Yib5bu65pyA5bCP5pyJ5pWI5pWw5o2uXHJcbiAgICAgIGNvbnN0IG1pbmltYWxDYXJkID0ge1xyXG4gICAgICAgIGZyb250Q29udGVudDogeyB0aXRsZTogJycsIHRleHQ6ICcnLCB0YWdzOiBbXSB9LFxyXG4gICAgICAgIGJhY2tDb250ZW50OiB7IHRpdGxlOiAnJywgdGV4dDogJycsIHRhZ3M6IFtdIH1cclxuICAgICAgfVxyXG4gICAgICBcclxuICAgICAgY29uc3QgY2FyZElkID0gY3J5cHRvLnJhbmRvbVVVSUQoKVxyXG4gICAgICBtb2NrRGIuY2FyZHMuYWRkLm1vY2tSZXNvbHZlZFZhbHVlKGNhcmRJZClcclxuICAgICAgXHJcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHNlcnZpY2UuY3JlYXRlQ2FyZChtaW5pbWFsQ2FyZClcclxuICAgICAgXHJcbiAgICAgIGV4cGVjdChyZXN1bHQuc3VjY2VzcykudG9CZSh0cnVlKVxyXG4gICAgICBleHBlY3QocmVzdWx0LmlkKS50b0JlKGNhcmRJZClcclxuICAgIH0pXHJcblxyXG4gICAgdGVzdCgn5bqU6K+l5aSE55CG5p+l6K+i56m657uT5p6cJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBjb25zdCBjYXJkSWQgPSBjcnlwdG8ucmFuZG9tVVVJRCgpXHJcbiAgICAgIFxyXG4gICAgICAvLyDmqKHmi5/mlbDmja7lupPov5Tlm55udWxsXHJcbiAgICAgIG1vY2tEYi5jYXJkcy5nZXQubW9ja1Jlc29sdmVkVmFsdWUobnVsbClcclxuICAgICAgXHJcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHNlcnZpY2UuZ2V0Q2FyZChjYXJkSWQpXHJcbiAgICAgIFxyXG4gICAgICBleHBlY3QocmVzdWx0KS50b0JlTnVsbCgpXHJcbiAgICAgIGV4cGVjdChtb2NrRGIuY2FyZHMuZ2V0KS50b0hhdmVCZWVuQ2FsbGVkV2l0aChjYXJkSWQpXHJcbiAgICB9KVxyXG5cclxuICAgIHRlc3QoJ+W6lOivpeWkhOeQhuWIoOmZpOS4jeWtmOWcqOeahOWNoeeJhycsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3QgY2FyZElkID0gY3J5cHRvLnJhbmRvbVVVSUQoKVxyXG4gICAgICBcclxuICAgICAgLy8g5qih5ouf5pWw5o2u5bqT5Yig6ZmkMOadoeiusOW9lVxyXG4gICAgICBtb2NrRGIuY2FyZHMuZGVsZXRlLm1vY2tSZXNvbHZlZFZhbHVlKDApXHJcbiAgICAgIFxyXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBzZXJ2aWNlLmRlbGV0ZUNhcmQoY2FyZElkKVxyXG4gICAgICBcclxuICAgICAgZXhwZWN0KHJlc3VsdC5zdWNjZXNzKS50b0JlKHRydWUpIC8vIOWIoOmZpOaTjeS9nOWcqOS4muWKoemAu+i+keS4reaAu+aYr+i/lOWbnuaIkOWKn1xyXG4gICAgfSlcclxuICB9KVxyXG5cclxuICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbiAgLy8g6ZSZ6K+v5aSE55CG5rWL6K+VXHJcbiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG5cclxuICBkZXNjcmliZSgn6ZSZ6K+v5aSE55CGJywgKCkgPT4ge1xyXG4gICAgdGVzdCgn5bqU6K+l5aSE55CG572R57uc6ZSZ6K+vJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBjb25zdCBjYXJkRGF0YSA9IGNyZWF0ZU1vY2tDYXJkKClcclxuICAgICAgXHJcbiAgICAgIC8vIOaooeaLn+e9kee7nOmUmeivr1xyXG4gICAgICBtb2NrRGIuY2FyZHMuYWRkLm1vY2tSZWplY3RlZFZhbHVlKG5ldyBFcnJvcignTmV0d29yayBFcnJvcicpKVxyXG4gICAgICBcclxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgc2VydmljZS5jcmVhdGVDYXJkKGNhcmREYXRhKVxyXG4gICAgICBcclxuICAgICAgZXhwZWN0KHJlc3VsdC5zdWNjZXNzKS50b0JlKGZhbHNlKVxyXG4gICAgICBleHBlY3QocmVzdWx0LmVycm9yKS50b0JlKCdOZXR3b3JrIEVycm9yJylcclxuICAgIH0pXHJcblxyXG4gICAgdGVzdCgn5bqU6K+l5aSE55CG5bm25Y+R5Yib5bu6JywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBjb25zdCBjYXJkRGF0YSA9IGNyZWF0ZU1vY2tDYXJkKClcclxuICAgICAgY29uc3QgY2FyZElkID0gY3J5cHRvLnJhbmRvbVVVSUQoKVxyXG4gICAgICBcclxuICAgICAgbW9ja0RiLmNhcmRzLmFkZC5tb2NrUmVzb2x2ZWRWYWx1ZShjYXJkSWQpXHJcbiAgICAgIFxyXG4gICAgICAvLyDlubblj5HliJvlu7rlpJrkuKrljaHniYdcclxuICAgICAgY29uc3QgcHJvbWlzZXMgPSBBcnJheS5mcm9tKHsgbGVuZ3RoOiAzIH0sICgpID0+IHNlcnZpY2UuY3JlYXRlQ2FyZChjYXJkRGF0YSkpXHJcbiAgICAgIGNvbnN0IHJlc3VsdHMgPSBhd2FpdCBQcm9taXNlLmFsbChwcm9taXNlcylcclxuICAgICAgXHJcbiAgICAgIGV4cGVjdChyZXN1bHRzKS50b0hhdmVMZW5ndGgoMylcclxuICAgICAgZXhwZWN0KHJlc3VsdHMuZXZlcnkociA9PiByLnN1Y2Nlc3MpKS50b0JlKHRydWUpXHJcbiAgICAgIGV4cGVjdChtb2NrRGIuY2FyZHMuYWRkKS50b0hhdmVCZWVuQ2FsbGVkVGltZXMoMylcclxuICAgIH0pXHJcbiAgfSlcclxufSkiXSwidmVyc2lvbiI6M30=