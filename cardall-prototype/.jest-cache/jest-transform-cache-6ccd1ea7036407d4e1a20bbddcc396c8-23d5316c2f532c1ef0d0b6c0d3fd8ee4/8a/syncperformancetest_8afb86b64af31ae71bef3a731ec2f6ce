1a8c7d670508ba6723ca758a8eca2127
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
// 同步系统性能测试
const globals_1 = require("@jest/globals");
const mock_services_1 = require("../mock-services");
const advanced_test_utils_1 = require("../advanced-test-utils");
const data_fixtures_1 = require("../data-fixtures");
(0, globals_1.describe)('SyncPerformance', () => {
    let supabaseService;
    let databaseService;
    let syncService;
    let performanceTester;
    (0, globals_1.beforeEach)(() => {
        supabaseService = new mock_services_1.MockSupabaseService();
        databaseService = new mock_services_1.MockDatabaseService();
        syncService = new mock_services_1.MockSyncService(supabaseService, databaseService);
        performanceTester = new advanced_test_utils_1.PerformanceTester();
    });
    (0, globals_1.afterEach)(() => {
        performanceTester.clear();
    });
    (0, globals_1.describe)('基准测试', () => {
        (0, globals_1.it)('应该能够在合理时间内同步少量卡片', async () => {
            const cardCount = 10;
            const cards = data_fixtures_1.CardFixture.list(cardCount);
            // 添加卡片到本地数据库
            await databaseService.cards.bulkAdd(cards);
            // 创建同步操作
            const syncOperations = cards.map(card => data_fixtures_1.SyncOperationFixture.createCard(card.id, { data: card }));
            await Promise.all(syncOperations.map(op => databaseService.syncQueue.add(op)));
            // 测量同步时间
            const syncTime = await performanceTester.measure('sync-small-batch', async () => {
                const result = await syncService.syncNow();
                return result;
            });
            // 验证结果
            (0, globals_1.expect)(syncTime).toBeLessThan(1000); // 应该在1秒内完成
            const syncStats = await databaseService.syncQueue.getStats();
            (0, globals_1.expect)(syncStats.completed).toBe(cardCount);
        });
        (0, globals_1.it)('应该能够在合理时间内同步中等数量的卡片', async () => {
            const cardCount = 50;
            const cards = data_fixtures_1.CardFixture.list(cardCount);
            await databaseService.cards.bulkAdd(cards);
            const syncOperations = cards.map(card => data_fixtures_1.SyncOperationFixture.createCard(card.id, { data: card }));
            await Promise.all(syncOperations.map(op => databaseService.syncQueue.add(op)));
            const syncTime = await performanceTester.measure('sync-medium-batch', async () => {
                const result = await syncService.syncNow();
                return result;
            });
            (0, globals_1.expect)(syncTime).toBeLessThan(3000); // 应该在3秒内完成
            const syncStats = await databaseService.syncQueue.getStats();
            (0, globals_1.expect)(syncStats.completed).toBe(cardCount);
        });
        (0, globals_1.it)('应该能够在合理时间内同步大量卡片', async () => {
            const cardCount = 200;
            const cards = data_fixtures_1.CardFixture.list(cardCount);
            await databaseService.cards.bulkAdd(cards);
            const syncOperations = cards.map(card => data_fixtures_1.SyncOperationFixture.createCard(card.id, { data: card }));
            await Promise.all(syncOperations.map(op => databaseService.syncQueue.add(op)));
            const syncTime = await performanceTester.measure('sync-large-batch', async () => {
                const result = await syncService.syncNow();
                return result;
            });
            (0, globals_1.expect)(syncTime).toBeLessThan(10000); // 应该在10秒内完成
            const syncStats = await databaseService.syncQueue.getStats();
            (0, globals_1.expect)(syncStats.completed).toBe(cardCount);
        });
    });
    (0, globals_1.describe)('内存使用测试', () => {
        (0, globals_1.it)('应该在大量操作后保持内存使用合理', async () => {
            const initialMemory = performanceTester.measureSync(() => {
                // 模拟内存使用测量
                return { used: 1000000, total: 2000000, percentage: 50 };
            });
            // 执行大量操作
            const operations = [];
            for (let i = 0; i < 1000; i++) {
                operations.push(databaseService.cards.add(data_fixtures_1.CardFixture.basic()));
            }
            await Promise.all(operations);
            // 执行同步
            await syncService.syncNow();
            // 测量最终内存使用
            const finalMemory = performanceTester.measureSync(() => {
                return { used: 1200000, total: 2000000, percentage: 60 };
            });
            // 内存增长应该合理
            const memoryGrowth = finalMemory.used - initialMemory.used;
            (0, globals_1.expect)(memoryGrowth).toBeLessThan(500000); // 内存增长应该少于500KB
            // 内存使用百分比应该合理
            (0, globals_1.expect)(finalMemory.percentage).toBeLessThan(80); // 使用率应该低于80%
        });
    });
    (0, globals_1.describe)('并发性能测试', () => {
        (0, globals_1.it)('应该能够处理并发同步操作', async () => {
            const concurrentOperations = 10;
            const cardsPerOperation = 10;
            // 创建多个并发的同步任务
            const syncPromises = [];
            for (let i = 0; i < concurrentOperations; i++) {
                const cards = data_fixtures_1.CardFixture.list(cardsPerOperation, {
                    frontContent: {
                        title: `并发卡片 ${i}`,
                        text: `这是第${i}个并发操作的卡片`,
                        images: [],
                        tags: [`并发-${i}`],
                        lastModified: new Date(),
                    },
                });
                await databaseService.cards.bulkAdd(cards);
                const syncOperations = cards.map(card => data_fixtures_1.SyncOperationFixture.createCard(card.id, { data: card }));
                await Promise.all(syncOperations.map(op => databaseService.syncQueue.add(op)));
                syncPromises.push(performanceTester.measure(`concurrent-sync-${i}`, async () => {
                    return await syncService.syncNow();
                }));
            }
            // 并发执行所有同步任务
            const results = await Promise.all(syncPromises);
            // 验证所有操作都成功
            results.forEach((result, index) => {
                (0, globals_1.expect)(result.success).toBe(true);
                (0, globals_1.expect)(result.syncedCount).toBe(cardsPerOperation);
            });
            // 验证总同步时间合理
            const totalTime = Math.max(...results.map((_, index) => performanceTester.getStats(`concurrent-sync-${index}`)?.avg || 0));
            (0, globals_1.expect)(totalTime).toBeLessThan(5000); // 应该在5秒内完成
        });
    });
    (0, globals_1.describe)('网络条件测试', () => {
        (0, globals_1.it)('应该在网络延迟情况下仍能正常工作', async () => {
            // 模拟网络延迟
            const originalExecuteSync = syncService.executeSyncOperation;
            syncService.executeSyncOperation = async (operation) => {
                // 模拟网络延迟
                await new Promise(resolve => setTimeout(resolve, 200));
                return await originalExecuteSync.call(syncService, operation);
            };
            const cardCount = 20;
            const cards = data_fixtures_1.CardFixture.list(cardCount);
            await databaseService.cards.bulkAdd(cards);
            const syncOperations = cards.map(card => data_fixtures_1.SyncOperationFixture.createCard(card.id, { data: card }));
            await Promise.all(syncOperations.map(op => databaseService.syncQueue.add(op)));
            const syncTime = await performanceTester.measure('sync-with-latency', async () => {
                const result = await syncService.syncNow();
                return result;
            });
            // 考虑网络延迟，时间应该合理
            (0, globals_1.expect)(syncTime).toBeLessThan(cardCount * 250 + 1000); // 每个卡片250ms延迟 + 1秒基础时间
            const syncStats = await databaseService.syncQueue.getStats();
            (0, globals_1.expect)(syncStats.completed).toBe(cardCount);
            syncService.executeSyncOperation = originalExecuteSync;
        });
        (0, globals_1.it)('应该在网络不稳定情况下处理重试', async () => {
            let callCount = 0;
            const originalExecuteSync = syncService.executeSyncOperation;
            syncService.executeSyncOperation = async (operation) => {
                callCount++;
                if (callCount <= 2) {
                    throw new Error('Network unstable');
                }
                return await originalExecuteSync.call(syncService, operation);
            };
            const card = data_fixtures_1.CardFixture.basic();
            await databaseService.cards.add(card);
            const syncOperation = data_fixtures_1.SyncOperationFixture.createCard(card.id, {
                data: card,
                maxRetries: 3,
            });
            await databaseService.syncQueue.add(syncOperation);
            const syncTime = await performanceTester.measure('sync-with-retries', async () => {
                const result = await syncService.syncNow();
                return result;
            });
            // 应该成功完成（经过重试）
            const syncStats = await databaseService.syncQueue.getStats();
            (0, globals_1.expect)(syncStats.completed).toBe(1);
            (0, globals_1.expect)(syncStats.failed).toBe(0);
            syncService.executeSyncOperation = originalExecuteSync;
        });
    });
    (0, globals_1.describe)('数据处理性能测试', () => {
        (0, globals_1.it)('应该能够高效处理大型卡片数据', async () => {
            // 创建包含大量数据的卡片
            const largeCards = data_fixtures_1.CardFixture.list(10).map(card => ({
                ...card,
                frontContent: {
                    ...card.frontContent,
                    text: 'A'.repeat(10000), // 10KB文本
                    images: Array.from({ length: 10 }, (_, i) => ({
                        id: `img-${i}`,
                        url: `https://example.com/image-${i}.jpg`,
                        alt: `Large image ${i}`,
                        width: 1920,
                        height: 1080,
                    })),
                },
            }));
            await databaseService.cards.bulkAdd(largeCards);
            const syncOperations = largeCards.map(card => data_fixtures_1.SyncOperationFixture.createCard(card.id, { data: card }));
            await Promise.all(syncOperations.map(op => databaseService.syncQueue.add(op)));
            const syncTime = await performanceTester.measure('sync-large-data', async () => {
                const result = await syncService.syncNow();
                return result;
            });
            (0, globals_1.expect)(syncTime).toBeLessThan(5000); // 应该在5秒内完成
            const syncStats = await databaseService.syncQueue.getStats();
            (0, globals_1.expect)(syncStats.completed).toBe(10);
        });
        (0, globals_1.it)('应该能够高效处理混合数据类型', async () => {
            // 创建包含卡片、文件夹、标签的混合数据
            const cards = data_fixtures_1.CardFixture.list(10);
            const folders = data_fixtures_1.CardFixture.list(5);
            const tags = data_fixtures_1.CardFixture.list(8);
            await Promise.all([
                databaseService.cards.bulkAdd(cards),
                databaseService.folders.bulkAdd(folders),
                databaseService.tags.bulkAdd(tags),
            ]);
            // 创建各种类型的同步操作
            const syncOperations = [
                ...cards.map(card => data_fixtures_1.SyncOperationFixture.createCard(card.id, { data: card })),
                ...folders.map(folder => data_fixtures_1.SyncOperationFixture.createFolder(folder.id, { data: folder })),
                ...tags.map(tag => data_fixtures_1.SyncOperationFixture.createTag(tag.id, { data: tag })),
            ];
            await Promise.all(syncOperations.map(op => databaseService.syncQueue.add(op)));
            const syncTime = await performanceTester.measure('sync-mixed-data', async () => {
                const result = await syncService.syncNow();
                return result;
            });
            (0, globals_1.expect)(syncTime).toBeLessThan(3000); // 应该在3秒内完成
            const syncStats = await databaseService.syncQueue.getStats();
            (0, globals_1.expect)(syncStats.completed).toBe(syncOperations.length);
        });
    });
    (0, globals_1.describe)('队列性能测试', () => {
        (0, globals_1.it)('应该能够高效管理大量队列操作', async () => {
            const queueSize = 1000;
            // 创建大量队列操作
            const syncOperations = [];
            for (let i = 0; i < queueSize; i++) {
                const operation = data_fixtures_1.SyncOperationFixture.createCard(`card-${i}`, {
                    priority: i % 10 === 0 ? 'high' : 'normal', // 10%高优先级
                });
                syncOperations.push(operation);
            }
            const queueAddTime = await performanceTester.measure('queue-add-operations', async () => {
                await Promise.all(syncOperations.map(op => databaseService.syncQueue.add(op)));
            });
            (0, globals_1.expect)(queueAddTime).toBeLessThan(1000); // 应该在1秒内完成
            // 测量队列统计性能
            const statsTime = await performanceTester.measure('queue-get-stats', async () => {
                return await databaseService.syncQueue.getStats();
            });
            (0, globals_1.expect)(statsTime).toBeLessThan(100); // 应该在100ms内完成
            const stats = await databaseService.syncQueue.getStats();
            (0, globals_1.expect)(stats.total).toBe(queueSize);
        });
        (0, globals_1.it)('应该能够高效处理队列清理', async () => {
            // 添加各种状态的队列操作
            const operations = [
                ...Array.from({ length: 100 }, () => data_fixtures_1.SyncOperationFixture.createCard('test')),
                ...Array.from({ length: 50 }, () => data_fixtures_1.SyncOperationFixture.completed()),
                ...Array.from({ length: 25 }, () => data_fixtures_1.SyncOperationFixture.failed()),
            ];
            await Promise.all(operations.map(op => databaseService.syncQueue.add(op)));
            const cleanupTime = await performanceTester.measure('queue-cleanup', async () => {
                await databaseService.syncQueue.clear();
            });
            (0, globals_1.expect)(cleanupTime).toBeLessThan(500); // 应该在500ms内完成
            const stats = await databaseService.syncQueue.getStats();
            (0, globals_1.expect)(stats.total).toBe(0);
        });
    });
    (0, globals_1.describe)('系统稳定性测试', () => {
        (0, globals_1.it)('应该能够持续处理长时间运行的同步操作', async () => {
            const totalOperations = 500;
            const batchSize = 10;
            const batches = Math.ceil(totalOperations / batchSize);
            let totalSyncTime = 0;
            let successfulBatches = 0;
            for (let batch = 0; batch < batches; batch++) {
                const cards = data_fixtures_1.CardFixture.list(batchSize);
                await databaseService.cards.bulkAdd(cards);
                const syncOperations = cards.map(card => data_fixtures_1.SyncOperationFixture.createCard(card.id, { data: card }));
                await Promise.all(syncOperations.map(op => databaseService.syncQueue.add(op)));
                const batchTime = await performanceTester.measure(`batch-${batch}`, async () => {
                    const result = await syncService.syncNow();
                    return result;
                });
                totalSyncTime += batchTime;
                if (batchTime.success) {
                    successfulBatches++;
                }
                // 短暂休息以模拟真实使用场景
                await new Promise(resolve => setTimeout(resolve, 10));
            }
            // 验证系统稳定性
            (0, globals_1.expect)(successfulBatches).toBe(batches);
            (0, globals_1.expect)(totalSyncTime).toBeLessThan(30000); // 总时间应该少于30秒
            (0, globals_1.expect)(totalSyncTime / batches).toBeLessThan(1000); // 平均每批次应该少于1秒
        });
        (0, globals_1.it)('应该能够在内存压力下保持稳定', async () => {
            // 模拟内存压力场景
            const memoryPressureTest = async () => {
                const operations = [];
                // 创建大量数据
                for (let i = 0; i < 100; i++) {
                    const cards = data_fixtures_1.CardFixture.list(20);
                    await databaseService.cards.bulkAdd(cards);
                    const syncOperations = cards.map(card => data_fixtures_1.SyncOperationFixture.createCard(card.id, { data: card }));
                    await Promise.all(syncOperations.map(op => databaseService.syncQueue.add(op)));
                    operations.push(syncService.syncNow());
                }
                // 并发执行所有同步操作
                const results = await Promise.all(operations);
                return {
                    successful: results.filter(r => r.success).length,
                    failed: results.filter(r => !r.success).length,
                    averageTime: results.reduce((sum, r) => sum + (r.syncedCount || 0), 0) / results.length,
                };
            };
            const pressureResult = await performanceTester.measure('memory-pressure-test', memoryPressureTest);
            (0, globals_1.expect)(pressureResult.successful).toBe(100);
            (0, globals_1.expect)(pressureResult.failed).toBe(0);
            (0, globals_1.expect)(pressureResult.averageTime).toBeGreaterThan(0);
        });
    });
    (0, globals_1.describe)('性能基准', () => {
        (0, globals_1.it)('应该满足性能基准要求', async () => {
            // 定义性能基准
            const benchmarks = {
                singleCardSync: 100, // 单个卡片同步应该在100ms内完成
                smallBatchSync: 1000, // 小批量(10个)同步应该在1秒内完成
                mediumBatchSync: 3000, // 中批量(50个)同步应该在3秒内完成
                largeBatchSync: 10000, // 大批量(200个)同步应该在10秒内完成
                memoryUsageLimit: 80, // 内存使用率应该低于80%
                queueOperationLimit: 100, // 队列操作应该在100ms内完成
            };
            // 测试单个卡片同步
            const singleCard = data_fixtures_1.CardFixture.basic();
            await databaseService.cards.add(singleCard);
            await databaseService.syncQueue.add(data_fixtures_1.SyncOperationFixture.createCard(singleCard.id, { data: singleCard }));
            const singleCardTime = await performanceTester.measure('single-card-sync', async () => {
                return await syncService.syncNow();
            });
            (0, globals_1.expect)(singleCardTime).toBeLessThan(benchmarks.singleCardSync);
            // 测试小批量同步
            const smallBatch = data_fixtures_1.CardFixture.list(10);
            await databaseService.cards.bulkAdd(smallBatch);
            await Promise.all(smallBatch.map(card => databaseService.syncQueue.add(data_fixtures_1.SyncOperationFixture.createCard(card.id, { data: card }))));
            const smallBatchTime = await performanceTester.measure('small-batch-sync', async () => {
                return await syncService.syncNow();
            });
            (0, globals_1.expect)(smallBatchTime).toBeLessThan(benchmarks.smallBatchSync);
            // 测试队列操作性能
            const queueOperationTime = await performanceTester.measure('queue-operation', async () => {
                const operation = data_fixtures_1.SyncOperationFixture.createCard('test-card');
                return await databaseService.syncQueue.add(operation);
            });
            (0, globals_1.expect)(queueOperationTime).toBeLessThan(benchmarks.queueOperationLimit);
            // 生成性能报告
            const performanceReport = {
                benchmarks,
                results: {
                    singleCardSync: singleCardTime,
                    smallBatchSync: smallBatchTime,
                    queueOperation: queueOperationTime,
                },
                passed: {
                    singleCardSync: singleCardTime < benchmarks.singleCardSync,
                    smallBatchSync: smallBatchTime < benchmarks.smallBatchSync,
                    queueOperation: queueOperationTime < benchmarks.queueOperationLimit,
                },
                timestamp: new Date().toISOString(),
            };
            // 性能报告应该通过所有基准测试
            (0, globals_1.expect)(Object.values(performanceReport.passed).every(Boolean)).toBe(true);
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiRDpcXFByb2plY3RzXFxDYXJkRXZlcnl0aGluZ1xcY2FyZGFsbC1wcm90b3R5cGVcXHRlc3RzXFxwZXJmb3JtYW5jZVxcc3luYy1wZXJmb3JtYW5jZS50ZXN0LnRzIiwibWFwcGluZ3MiOiI7O0FBQUEsV0FBVztBQUNYLDJDQUEyRTtBQUMzRSxvREFBNEY7QUFDNUYsZ0VBQTBEO0FBQzFELG9EQUFvRTtBQUdwRSxJQUFBLGtCQUFRLEVBQUMsaUJBQWlCLEVBQUUsR0FBRyxFQUFFO0lBQy9CLElBQUksZUFBb0MsQ0FBQTtJQUN4QyxJQUFJLGVBQW9DLENBQUE7SUFDeEMsSUFBSSxXQUE0QixDQUFBO0lBQ2hDLElBQUksaUJBQW9DLENBQUE7SUFFeEMsSUFBQSxvQkFBVSxFQUFDLEdBQUcsRUFBRTtRQUNkLGVBQWUsR0FBRyxJQUFJLG1DQUFtQixFQUFFLENBQUE7UUFDM0MsZUFBZSxHQUFHLElBQUksbUNBQW1CLEVBQUUsQ0FBQTtRQUMzQyxXQUFXLEdBQUcsSUFBSSwrQkFBZSxDQUFDLGVBQWUsRUFBRSxlQUFlLENBQUMsQ0FBQTtRQUNuRSxpQkFBaUIsR0FBRyxJQUFJLHVDQUFpQixFQUFFLENBQUE7SUFDN0MsQ0FBQyxDQUFDLENBQUE7SUFFRixJQUFBLG1CQUFTLEVBQUMsR0FBRyxFQUFFO1FBQ2IsaUJBQWlCLENBQUMsS0FBSyxFQUFFLENBQUE7SUFDM0IsQ0FBQyxDQUFDLENBQUE7SUFFRixJQUFBLGtCQUFRLEVBQUMsTUFBTSxFQUFFLEdBQUcsRUFBRTtRQUNwQixJQUFBLFlBQUUsRUFBQyxrQkFBa0IsRUFBRSxLQUFLLElBQUksRUFBRTtZQUNoQyxNQUFNLFNBQVMsR0FBRyxFQUFFLENBQUE7WUFDcEIsTUFBTSxLQUFLLEdBQUcsMkJBQVcsQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLENBQUE7WUFFekMsYUFBYTtZQUNiLE1BQU0sZUFBZSxDQUFDLEtBQUssQ0FBQyxPQUFPLENBQUMsS0FBSyxDQUFDLENBQUE7WUFFMUMsU0FBUztZQUNULE1BQU0sY0FBYyxHQUFHLEtBQUss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QUE7SUFDSixDQUFDLENBQUMsQ0FBQTtBQUNKLENBQUMsQ0FBQyxDQUFBIiwibmFtZXMiOltdLCJzb3VyY2VzIjpbIkQ6XFxQcm9qZWN0c1xcQ2FyZEV2ZXJ5dGhpbmdcXGNhcmRhbGwtcHJvdG90eXBlXFx0ZXN0c1xccGVyZm9ybWFuY2VcXHN5bmMtcGVyZm9ybWFuY2UudGVzdC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyDlkIzmraXns7vnu5/mgKfog73mtYvor5VcbmltcG9ydCB7IGRlc2NyaWJlLCBpdCwgZXhwZWN0LCBiZWZvcmVFYWNoLCBhZnRlckVhY2ggfSBmcm9tICdAamVzdC9nbG9iYWxzJ1xuaW1wb3J0IHsgTW9ja1N5bmNTZXJ2aWNlLCBNb2NrU3VwYWJhc2VTZXJ2aWNlLCBNb2NrRGF0YWJhc2VTZXJ2aWNlIH0gZnJvbSAnLi4vbW9jay1zZXJ2aWNlcydcbmltcG9ydCB7IFBlcmZvcm1hbmNlVGVzdGVyIH0gZnJvbSAnLi4vYWR2YW5jZWQtdGVzdC11dGlscydcbmltcG9ydCB7IENhcmRGaXh0dXJlLCBTeW5jT3BlcmF0aW9uRml4dHVyZSB9IGZyb20gJy4uL2RhdGEtZml4dHVyZXMnXG5pbXBvcnQgeyBUZXN0RGF0YUdlbmVyYXRvciB9IGZyb20gJy4uL2RhdGEtZml4dHVyZXMnXG5cbmRlc2NyaWJlKCdTeW5jUGVyZm9ybWFuY2UnLCAoKSA9PiB7XG4gIGxldCBzdXBhYmFzZVNlcnZpY2U6IE1vY2tTdXBhYmFzZVNlcnZpY2VcbiAgbGV0IGRhdGFiYXNlU2VydmljZTogTW9ja0RhdGFiYXNlU2VydmljZVxuICBsZXQgc3luY1NlcnZpY2U6IE1vY2tTeW5jU2VydmljZVxuICBsZXQgcGVyZm9ybWFuY2VUZXN0ZXI6IFBlcmZvcm1hbmNlVGVzdGVyXG5cbiAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgc3VwYWJhc2VTZXJ2aWNlID0gbmV3IE1vY2tTdXBhYmFzZVNlcnZpY2UoKVxuICAgIGRhdGFiYXNlU2VydmljZSA9IG5ldyBNb2NrRGF0YWJhc2VTZXJ2aWNlKClcbiAgICBzeW5jU2VydmljZSA9IG5ldyBNb2NrU3luY1NlcnZpY2Uoc3VwYWJhc2VTZXJ2aWNlLCBkYXRhYmFzZVNlcnZpY2UpXG4gICAgcGVyZm9ybWFuY2VUZXN0ZXIgPSBuZXcgUGVyZm9ybWFuY2VUZXN0ZXIoKVxuICB9KVxuXG4gIGFmdGVyRWFjaCgoKSA9PiB7XG4gICAgcGVyZm9ybWFuY2VUZXN0ZXIuY2xlYXIoKVxuICB9KVxuXG4gIGRlc2NyaWJlKCfln7rlh4bmtYvor5UnLCAoKSA9PiB7XG4gICAgaXQoJ+W6lOivpeiDveWkn+WcqOWQiOeQhuaXtumXtOWGheWQjOatpeWwkemHj+WNoeeJhycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGNhcmRDb3VudCA9IDEwXG4gICAgICBjb25zdCBjYXJkcyA9IENhcmRGaXh0dXJlLmxpc3QoY2FyZENvdW50KVxuICAgICAgXG4gICAgICAvLyDmt7vliqDljaHniYfliLDmnKzlnLDmlbDmja7lupNcbiAgICAgIGF3YWl0IGRhdGFiYXNlU2VydmljZS5jYXJkcy5idWxrQWRkKGNhcmRzKVxuICAgICAgXG4gICAgICAvLyDliJvlu7rlkIzmraXmk43kvZxcbiAgICAgIGNvbnN0IHN5bmNPcGVyYXRpb25zID0gY2FyZHMubWFwKGNhcmQgPT4gXG4gICAgICAgIFN5bmNPcGVyYXRpb25GaXh0dXJlLmNyZWF0ZUNhcmQoY2FyZC5pZCwgeyBkYXRhOiBjYXJkIH0pXG4gICAgICApXG4gICAgICBhd2FpdCBQcm9taXNlLmFsbChzeW5jT3BlcmF0aW9ucy5tYXAob3AgPT4gZGF0YWJhc2VTZXJ2aWNlLnN5bmNRdWV1ZS5hZGQob3ApKSlcblxuICAgICAgLy8g5rWL6YeP5ZCM5q2l5pe26Ze0XG4gICAgICBjb25zdCBzeW5jVGltZSA9IGF3YWl0IHBlcmZvcm1hbmNlVGVzdGVyLm1lYXN1cmUoJ3N5bmMtc21hbGwtYmF0Y2gnLCBhc3luYyAoKSA9PiB7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHN5bmNTZXJ2aWNlLnN5bmNOb3coKVxuICAgICAgICByZXR1cm4gcmVzdWx0XG4gICAgICB9KVxuXG4gICAgICAvLyDpqozor4Hnu5PmnpxcbiAgICAgIGV4cGVjdChzeW5jVGltZSkudG9CZUxlc3NUaGFuKDEwMDApIC8vIOW6lOivpeWcqDHnp5LlhoXlrozmiJBcbiAgICAgIFxuICAgICAgY29uc3Qgc3luY1N0YXRzID0gYXdhaXQgZGF0YWJhc2VTZXJ2aWNlLnN5bmNRdWV1ZS5nZXRTdGF0cygpXG4gICAgICBleHBlY3Qoc3luY1N0YXRzLmNvbXBsZXRlZCkudG9CZShjYXJkQ291bnQpXG4gICAgfSlcblxuICAgIGl0KCflupTor6Xog73lpJ/lnKjlkIjnkIbml7bpl7TlhoXlkIzmraXkuK3nrYnmlbDph4/nmoTljaHniYcnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBjYXJkQ291bnQgPSA1MFxuICAgICAgY29uc3QgY2FyZHMgPSBDYXJkRml4dHVyZS5saXN0KGNhcmRDb3VudClcbiAgICAgIFxuICAgICAgYXdhaXQgZGF0YWJhc2VTZXJ2aWNlLmNhcmRzLmJ1bGtBZGQoY2FyZHMpXG4gICAgICBcbiAgICAgIGNvbnN0IHN5bmNPcGVyYXRpb25zID0gY2FyZHMubWFwKGNhcmQgPT4gXG4gICAgICAgIFN5bmNPcGVyYXRpb25GaXh0dXJlLmNyZWF0ZUNhcmQoY2FyZC5pZCwgeyBkYXRhOiBjYXJkIH0pXG4gICAgICApXG4gICAgICBhd2FpdCBQcm9taXNlLmFsbChzeW5jT3BlcmF0aW9ucy5tYXAob3AgPT4gZGF0YWJhc2VTZXJ2aWNlLnN5bmNRdWV1ZS5hZGQob3ApKSlcblxuICAgICAgY29uc3Qgc3luY1RpbWUgPSBhd2FpdCBwZXJmb3JtYW5jZVRlc3Rlci5tZWFzdXJlKCdzeW5jLW1lZGl1bS1iYXRjaCcsIGFzeW5jICgpID0+IHtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgc3luY1NlcnZpY2Uuc3luY05vdygpXG4gICAgICAgIHJldHVybiByZXN1bHRcbiAgICAgIH0pXG5cbiAgICAgIGV4cGVjdChzeW5jVGltZSkudG9CZUxlc3NUaGFuKDMwMDApIC8vIOW6lOivpeWcqDPnp5LlhoXlrozmiJBcbiAgICAgIFxuICAgICAgY29uc3Qgc3luY1N0YXRzID0gYXdhaXQgZGF0YWJhc2VTZXJ2aWNlLnN5bmNRdWV1ZS5nZXRTdGF0cygpXG4gICAgICBleHBlY3Qoc3luY1N0YXRzLmNvbXBsZXRlZCkudG9CZShjYXJkQ291bnQpXG4gICAgfSlcblxuICAgIGl0KCflupTor6Xog73lpJ/lnKjlkIjnkIbml7bpl7TlhoXlkIzmraXlpKfph4/ljaHniYcnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBjYXJkQ291bnQgPSAyMDBcbiAgICAgIGNvbnN0IGNhcmRzID0gQ2FyZEZpeHR1cmUubGlzdChjYXJkQ291bnQpXG4gICAgICBcbiAgICAgIGF3YWl0IGRhdGFiYXNlU2VydmljZS5jYXJkcy5idWxrQWRkKGNhcmRzKVxuICAgICAgXG4gICAgICBjb25zdCBzeW5jT3BlcmF0aW9ucyA9IGNhcmRzLm1hcChjYXJkID0+IFxuICAgICAgICBTeW5jT3BlcmF0aW9uRml4dHVyZS5jcmVhdGVDYXJkKGNhcmQuaWQsIHsgZGF0YTogY2FyZCB9KVxuICAgICAgKVxuICAgICAgYXdhaXQgUHJvbWlzZS5hbGwoc3luY09wZXJhdGlvbnMubWFwKG9wID0+IGRhdGFiYXNlU2VydmljZS5zeW5jUXVldWUuYWRkKG9wKSkpXG5cbiAgICAgIGNvbnN0IHN5bmNUaW1lID0gYXdhaXQgcGVyZm9ybWFuY2VUZXN0ZXIubWVhc3VyZSgnc3luYy1sYXJnZS1iYXRjaCcsIGFzeW5jICgpID0+IHtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgc3luY1NlcnZpY2Uuc3luY05vdygpXG4gICAgICAgIHJldHVybiByZXN1bHRcbiAgICAgIH0pXG5cbiAgICAgIGV4cGVjdChzeW5jVGltZSkudG9CZUxlc3NUaGFuKDEwMDAwKSAvLyDlupTor6XlnKgxMOenkuWGheWujOaIkFxuICAgICAgXG4gICAgICBjb25zdCBzeW5jU3RhdHMgPSBhd2FpdCBkYXRhYmFzZVNlcnZpY2Uuc3luY1F1ZXVlLmdldFN0YXRzKClcbiAgICAgIGV4cGVjdChzeW5jU3RhdHMuY29tcGxldGVkKS50b0JlKGNhcmRDb3VudClcbiAgICB9KVxuICB9KVxuXG4gIGRlc2NyaWJlKCflhoXlrZjkvb/nlKjmtYvor5UnLCAoKSA9PiB7XG4gICAgaXQoJ+W6lOivpeWcqOWkp+mHj+aTjeS9nOWQjuS/neaMgeWGheWtmOS9v+eUqOWQiOeQhicsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGluaXRpYWxNZW1vcnkgPSBwZXJmb3JtYW5jZVRlc3Rlci5tZWFzdXJlU3luYygoKSA9PiB7XG4gICAgICAgIC8vIOaooeaLn+WGheWtmOS9v+eUqOa1i+mHj1xuICAgICAgICByZXR1cm4geyB1c2VkOiAxMDAwMDAwLCB0b3RhbDogMjAwMDAwMCwgcGVyY2VudGFnZTogNTAgfVxuICAgICAgfSlcblxuICAgICAgLy8g5omn6KGM5aSn6YeP5pON5L2cXG4gICAgICBjb25zdCBvcGVyYXRpb25zID0gW11cbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMTAwMDsgaSsrKSB7XG4gICAgICAgIG9wZXJhdGlvbnMucHVzaChcbiAgICAgICAgICBkYXRhYmFzZVNlcnZpY2UuY2FyZHMuYWRkKENhcmRGaXh0dXJlLmJhc2ljKCkpXG4gICAgICAgIClcbiAgICAgIH1cbiAgICAgIGF3YWl0IFByb21pc2UuYWxsKG9wZXJhdGlvbnMpXG5cbiAgICAgIC8vIOaJp+ihjOWQjOatpVxuICAgICAgYXdhaXQgc3luY1NlcnZpY2Uuc3luY05vdygpXG5cbiAgICAgIC8vIOa1i+mHj+acgOe7iOWGheWtmOS9v+eUqFxuICAgICAgY29uc3QgZmluYWxNZW1vcnkgPSBwZXJmb3JtYW5jZVRlc3Rlci5tZWFzdXJlU3luYygoKSA9PiB7XG4gICAgICAgIHJldHVybiB7IHVzZWQ6IDEyMDAwMDAsIHRvdGFsOiAyMDAwMDAwLCBwZXJjZW50YWdlOiA2MCB9XG4gICAgICB9KVxuXG4gICAgICAvLyDlhoXlrZjlop7plb/lupTor6XlkIjnkIZcbiAgICAgIGNvbnN0IG1lbW9yeUdyb3d0aCA9IGZpbmFsTWVtb3J5LnVzZWQgLSBpbml0aWFsTWVtb3J5LnVzZWRcbiAgICAgIGV4cGVjdChtZW1vcnlHcm93dGgpLnRvQmVMZXNzVGhhbig1MDAwMDApIC8vIOWGheWtmOWinumVv+W6lOivpeWwkeS6jjUwMEtCXG4gICAgICBcbiAgICAgIC8vIOWGheWtmOS9v+eUqOeZvuWIhuavlOW6lOivpeWQiOeQhlxuICAgICAgZXhwZWN0KGZpbmFsTWVtb3J5LnBlcmNlbnRhZ2UpLnRvQmVMZXNzVGhhbig4MCkgLy8g5L2/55So546H5bqU6K+l5L2O5LqOODAlXG4gICAgfSlcbiAgfSlcblxuICBkZXNjcmliZSgn5bm25Y+R5oCn6IO95rWL6K+VJywgKCkgPT4ge1xuICAgIGl0KCflupTor6Xog73lpJ/lpITnkIblubblj5HlkIzmraXmk43kvZwnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBjb25jdXJyZW50T3BlcmF0aW9ucyA9IDEwXG4gICAgICBjb25zdCBjYXJkc1Blck9wZXJhdGlvbiA9IDEwXG5cbiAgICAgIC8vIOWIm+W7uuWkmuS4quW5tuWPkeeahOWQjOatpeS7u+WKoVxuICAgICAgY29uc3Qgc3luY1Byb21pc2VzID0gW11cbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY29uY3VycmVudE9wZXJhdGlvbnM7IGkrKykge1xuICAgICAgICBjb25zdCBjYXJkcyA9IENhcmRGaXh0dXJlLmxpc3QoY2FyZHNQZXJPcGVyYXRpb24sIHtcbiAgICAgICAgICBmcm9udENvbnRlbnQ6IHtcbiAgICAgICAgICAgIHRpdGxlOiBg5bm25Y+R5Y2h54mHICR7aX1gLFxuICAgICAgICAgICAgdGV4dDogYOi/meaYr+esrCR7aX3kuKrlubblj5Hmk43kvZznmoTljaHniYdgLFxuICAgICAgICAgICAgaW1hZ2VzOiBbXSxcbiAgICAgICAgICAgIHRhZ3M6IFtg5bm25Y+RLSR7aX1gXSxcbiAgICAgICAgICAgIGxhc3RNb2RpZmllZDogbmV3IERhdGUoKSxcbiAgICAgICAgICB9LFxuICAgICAgICB9KVxuXG4gICAgICAgIGF3YWl0IGRhdGFiYXNlU2VydmljZS5jYXJkcy5idWxrQWRkKGNhcmRzKVxuICAgICAgICBcbiAgICAgICAgY29uc3Qgc3luY09wZXJhdGlvbnMgPSBjYXJkcy5tYXAoY2FyZCA9PiBcbiAgICAgICAgICBTeW5jT3BlcmF0aW9uRml4dHVyZS5jcmVhdGVDYXJkKGNhcmQuaWQsIHsgZGF0YTogY2FyZCB9KVxuICAgICAgICApXG4gICAgICAgIGF3YWl0IFByb21pc2UuYWxsKHN5bmNPcGVyYXRpb25zLm1hcChvcCA9PiBkYXRhYmFzZVNlcnZpY2Uuc3luY1F1ZXVlLmFkZChvcCkpKVxuXG4gICAgICAgIHN5bmNQcm9taXNlcy5wdXNoKFxuICAgICAgICAgIHBlcmZvcm1hbmNlVGVzdGVyLm1lYXN1cmUoYGNvbmN1cnJlbnQtc3luYy0ke2l9YCwgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIGF3YWl0IHN5bmNTZXJ2aWNlLnN5bmNOb3coKVxuICAgICAgICAgIH0pXG4gICAgICAgIClcbiAgICAgIH1cblxuICAgICAgLy8g5bm25Y+R5omn6KGM5omA5pyJ5ZCM5q2l5Lu75YqhXG4gICAgICBjb25zdCByZXN1bHRzID0gYXdhaXQgUHJvbWlzZS5hbGwoc3luY1Byb21pc2VzKVxuXG4gICAgICAvLyDpqozor4HmiYDmnInmk43kvZzpg73miJDlip9cbiAgICAgIHJlc3VsdHMuZm9yRWFjaCgocmVzdWx0LCBpbmRleCkgPT4ge1xuICAgICAgICBleHBlY3QocmVzdWx0LnN1Y2Nlc3MpLnRvQmUodHJ1ZSlcbiAgICAgICAgZXhwZWN0KHJlc3VsdC5zeW5jZWRDb3VudCkudG9CZShjYXJkc1Blck9wZXJhdGlvbilcbiAgICAgIH0pXG5cbiAgICAgIC8vIOmqjOivgeaAu+WQjOatpeaXtumXtOWQiOeQhlxuICAgICAgY29uc3QgdG90YWxUaW1lID0gTWF0aC5tYXgoLi4ucmVzdWx0cy5tYXAoKF8sIGluZGV4KSA9PiBcbiAgICAgICAgcGVyZm9ybWFuY2VUZXN0ZXIuZ2V0U3RhdHMoYGNvbmN1cnJlbnQtc3luYy0ke2luZGV4fWApPy5hdmcgfHwgMFxuICAgICAgKSlcbiAgICAgIGV4cGVjdCh0b3RhbFRpbWUpLnRvQmVMZXNzVGhhbig1MDAwKSAvLyDlupTor6XlnKg156eS5YaF5a6M5oiQXG4gICAgfSlcbiAgfSlcblxuICBkZXNjcmliZSgn572R57uc5p2h5Lu25rWL6K+VJywgKCkgPT4ge1xuICAgIGl0KCflupTor6XlnKjnvZHnu5zlu7bov5/mg4XlhrXkuIvku43og73mraPluLjlt6XkvZwnLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyDmqKHmi5/nvZHnu5zlu7bov59cbiAgICAgIGNvbnN0IG9yaWdpbmFsRXhlY3V0ZVN5bmMgPSAoc3luY1NlcnZpY2UgYXMgYW55KS5leGVjdXRlU3luY09wZXJhdGlvblxuICAgICAgOyhzeW5jU2VydmljZSBhcyBhbnkpLmV4ZWN1dGVTeW5jT3BlcmF0aW9uID0gYXN5bmMgKG9wZXJhdGlvbjogYW55KSA9PiB7XG4gICAgICAgIC8vIOaooeaLn+e9kee7nOW7tui/n1xuICAgICAgICBhd2FpdCBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgMjAwKSlcbiAgICAgICAgcmV0dXJuIGF3YWl0IG9yaWdpbmFsRXhlY3V0ZVN5bmMuY2FsbChzeW5jU2VydmljZSwgb3BlcmF0aW9uKVxuICAgICAgfVxuXG4gICAgICBjb25zdCBjYXJkQ291bnQgPSAyMFxuICAgICAgY29uc3QgY2FyZHMgPSBDYXJkRml4dHVyZS5saXN0KGNhcmRDb3VudClcbiAgICAgIFxuICAgICAgYXdhaXQgZGF0YWJhc2VTZXJ2aWNlLmNhcmRzLmJ1bGtBZGQoY2FyZHMpXG4gICAgICBcbiAgICAgIGNvbnN0IHN5bmNPcGVyYXRpb25zID0gY2FyZHMubWFwKGNhcmQgPT4gXG4gICAgICAgIFN5bmNPcGVyYXRpb25GaXh0dXJlLmNyZWF0ZUNhcmQoY2FyZC5pZCwgeyBkYXRhOiBjYXJkIH0pXG4gICAgICApXG4gICAgICBhd2FpdCBQcm9taXNlLmFsbChzeW5jT3BlcmF0aW9ucy5tYXAob3AgPT4gZGF0YWJhc2VTZXJ2aWNlLnN5bmNRdWV1ZS5hZGQob3ApKSlcblxuICAgICAgY29uc3Qgc3luY1RpbWUgPSBhd2FpdCBwZXJmb3JtYW5jZVRlc3Rlci5tZWFzdXJlKCdzeW5jLXdpdGgtbGF0ZW5jeScsIGFzeW5jICgpID0+IHtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgc3luY1NlcnZpY2Uuc3luY05vdygpXG4gICAgICAgIHJldHVybiByZXN1bHRcbiAgICAgIH0pXG5cbiAgICAgIC8vIOiAg+iZkee9kee7nOW7tui/n++8jOaXtumXtOW6lOivpeWQiOeQhlxuICAgICAgZXhwZWN0KHN5bmNUaW1lKS50b0JlTGVzc1RoYW4oY2FyZENvdW50ICogMjUwICsgMTAwMCkgLy8g5q+P5Liq5Y2h54mHMjUwbXPlu7bov58gKyAx56eS5Z+656GA5pe26Ze0XG4gICAgICBcbiAgICAgIGNvbnN0IHN5bmNTdGF0cyA9IGF3YWl0IGRhdGFiYXNlU2VydmljZS5zeW5jUXVldWUuZ2V0U3RhdHMoKVxuICAgICAgZXhwZWN0KHN5bmNTdGF0cy5jb21wbGV0ZWQpLnRvQmUoY2FyZENvdW50KVxuXG4gICAgICAvLyDmgaLlpI3ljp/lp4vmlrnms5VcbiAgICAgIDsoc3luY1NlcnZpY2UgYXMgYW55KS5leGVjdXRlU3luY09wZXJhdGlvbiA9IG9yaWdpbmFsRXhlY3V0ZVN5bmNcbiAgICB9KVxuXG4gICAgaXQoJ+W6lOivpeWcqOe9kee7nOS4jeeos+WumuaDheWGteS4i+WkhOeQhumHjeivlScsIGFzeW5jICgpID0+IHtcbiAgICAgIGxldCBjYWxsQ291bnQgPSAwXG4gICAgICBjb25zdCBvcmlnaW5hbEV4ZWN1dGVTeW5jID0gKHN5bmNTZXJ2aWNlIGFzIGFueSkuZXhlY3V0ZVN5bmNPcGVyYXRpb25cbiAgICAgIDsoc3luY1NlcnZpY2UgYXMgYW55KS5leGVjdXRlU3luY09wZXJhdGlvbiA9IGFzeW5jIChvcGVyYXRpb246IGFueSkgPT4ge1xuICAgICAgICBjYWxsQ291bnQrK1xuICAgICAgICBpZiAoY2FsbENvdW50IDw9IDIpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ05ldHdvcmsgdW5zdGFibGUnKVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBhd2FpdCBvcmlnaW5hbEV4ZWN1dGVTeW5jLmNhbGwoc3luY1NlcnZpY2UsIG9wZXJhdGlvbilcbiAgICAgIH1cblxuICAgICAgY29uc3QgY2FyZCA9IENhcmRGaXh0dXJlLmJhc2ljKClcbiAgICAgIGF3YWl0IGRhdGFiYXNlU2VydmljZS5jYXJkcy5hZGQoY2FyZClcbiAgICAgIFxuICAgICAgY29uc3Qgc3luY09wZXJhdGlvbiA9IFN5bmNPcGVyYXRpb25GaXh0dXJlLmNyZWF0ZUNhcmQoY2FyZC5pZCwgeyBcbiAgICAgICAgZGF0YTogY2FyZCxcbiAgICAgICAgbWF4UmV0cmllczogMyxcbiAgICAgIH0pXG4gICAgICBhd2FpdCBkYXRhYmFzZVNlcnZpY2Uuc3luY1F1ZXVlLmFkZChzeW5jT3BlcmF0aW9uKVxuXG4gICAgICBjb25zdCBzeW5jVGltZSA9IGF3YWl0IHBlcmZvcm1hbmNlVGVzdGVyLm1lYXN1cmUoJ3N5bmMtd2l0aC1yZXRyaWVzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBzeW5jU2VydmljZS5zeW5jTm93KClcbiAgICAgICAgcmV0dXJuIHJlc3VsdFxuICAgICAgfSlcblxuICAgICAgLy8g5bqU6K+l5oiQ5Yqf5a6M5oiQ77yI57uP6L+H6YeN6K+V77yJXG4gICAgICBjb25zdCBzeW5jU3RhdHMgPSBhd2FpdCBkYXRhYmFzZVNlcnZpY2Uuc3luY1F1ZXVlLmdldFN0YXRzKClcbiAgICAgIGV4cGVjdChzeW5jU3RhdHMuY29tcGxldGVkKS50b0JlKDEpXG4gICAgICBleHBlY3Qoc3luY1N0YXRzLmZhaWxlZCkudG9CZSgwKVxuXG4gICAgICAvLyDmgaLlpI3ljp/lp4vmlrnms5VcbiAgICAgIDsoc3luY1NlcnZpY2UgYXMgYW55KS5leGVjdXRlU3luY09wZXJhdGlvbiA9IG9yaWdpbmFsRXhlY3V0ZVN5bmNcbiAgICB9KVxuICB9KVxuXG4gIGRlc2NyaWJlKCfmlbDmja7lpITnkIbmgKfog73mtYvor5UnLCAoKSA9PiB7XG4gICAgaXQoJ+W6lOivpeiDveWkn+mrmOaViOWkhOeQhuWkp+Wei+WNoeeJh+aVsOaNricsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIOWIm+W7uuWMheWQq+Wkp+mHj+aVsOaNrueahOWNoeeJh1xuICAgICAgY29uc3QgbGFyZ2VDYXJkcyA9IENhcmRGaXh0dXJlLmxpc3QoMTApLm1hcChjYXJkID0+ICh7XG4gICAgICAgIC4uLmNhcmQsXG4gICAgICAgIGZyb250Q29udGVudDoge1xuICAgICAgICAgIC4uLmNhcmQuZnJvbnRDb250ZW50LFxuICAgICAgICAgIHRleHQ6ICdBJy5yZXBlYXQoMTAwMDApLCAvLyAxMEtC5paH5pysXG4gICAgICAgICAgaW1hZ2VzOiBBcnJheS5mcm9tKHsgbGVuZ3RoOiAxMCB9LCAoXywgaSkgPT4gKHtcbiAgICAgICAgICAgIGlkOiBgaW1nLSR7aX1gLFxuICAgICAgICAgICAgdXJsOiBgaHR0cHM6Ly9leGFtcGxlLmNvbS9pbWFnZS0ke2l9LmpwZ2AsXG4gICAgICAgICAgICBhbHQ6IGBMYXJnZSBpbWFnZSAke2l9YCxcbiAgICAgICAgICAgIHdpZHRoOiAxOTIwLFxuICAgICAgICAgICAgaGVpZ2h0OiAxMDgwLFxuICAgICAgICAgIH0pKSxcbiAgICAgICAgfSxcbiAgICAgIH0pKVxuXG4gICAgICBhd2FpdCBkYXRhYmFzZVNlcnZpY2UuY2FyZHMuYnVsa0FkZChsYXJnZUNhcmRzKVxuICAgICAgXG4gICAgICBjb25zdCBzeW5jT3BlcmF0aW9ucyA9IGxhcmdlQ2FyZHMubWFwKGNhcmQgPT4gXG4gICAgICAgIFN5bmNPcGVyYXRpb25GaXh0dXJlLmNyZWF0ZUNhcmQoY2FyZC5pZCwgeyBkYXRhOiBjYXJkIH0pXG4gICAgICApXG4gICAgICBhd2FpdCBQcm9taXNlLmFsbChzeW5jT3BlcmF0aW9ucy5tYXAob3AgPT4gZGF0YWJhc2VTZXJ2aWNlLnN5bmNRdWV1ZS5hZGQob3ApKSlcblxuICAgICAgY29uc3Qgc3luY1RpbWUgPSBhd2FpdCBwZXJmb3JtYW5jZVRlc3Rlci5tZWFzdXJlKCdzeW5jLWxhcmdlLWRhdGEnLCBhc3luYyAoKSA9PiB7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHN5bmNTZXJ2aWNlLnN5bmNOb3coKVxuICAgICAgICByZXR1cm4gcmVzdWx0XG4gICAgICB9KVxuXG4gICAgICBleHBlY3Qoc3luY1RpbWUpLnRvQmVMZXNzVGhhbig1MDAwKSAvLyDlupTor6XlnKg156eS5YaF5a6M5oiQXG4gICAgICBcbiAgICAgIGNvbnN0IHN5bmNTdGF0cyA9IGF3YWl0IGRhdGFiYXNlU2VydmljZS5zeW5jUXVldWUuZ2V0U3RhdHMoKVxuICAgICAgZXhwZWN0KHN5bmNTdGF0cy5jb21wbGV0ZWQpLnRvQmUoMTApXG4gICAgfSlcblxuICAgIGl0KCflupTor6Xog73lpJ/pq5jmlYjlpITnkIbmt7flkIjmlbDmja7nsbvlnosnLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyDliJvlu7rljIXlkKvljaHniYfjgIHmlofku7blpLnjgIHmoIfnrb7nmoTmt7flkIjmlbDmja5cbiAgICAgIGNvbnN0IGNhcmRzID0gQ2FyZEZpeHR1cmUubGlzdCgxMClcbiAgICAgIGNvbnN0IGZvbGRlcnMgPSBDYXJkRml4dHVyZS5saXN0KDUpXG4gICAgICBjb25zdCB0YWdzID0gQ2FyZEZpeHR1cmUubGlzdCg4KVxuXG4gICAgICBhd2FpdCBQcm9taXNlLmFsbChbXG4gICAgICAgIGRhdGFiYXNlU2VydmljZS5jYXJkcy5idWxrQWRkKGNhcmRzKSxcbiAgICAgICAgZGF0YWJhc2VTZXJ2aWNlLmZvbGRlcnMuYnVsa0FkZChmb2xkZXJzKSxcbiAgICAgICAgZGF0YWJhc2VTZXJ2aWNlLnRhZ3MuYnVsa0FkZCh0YWdzKSxcbiAgICAgIF0pXG5cbiAgICAgIC8vIOWIm+W7uuWQhOenjeexu+Wei+eahOWQjOatpeaTjeS9nFxuICAgICAgY29uc3Qgc3luY09wZXJhdGlvbnMgPSBbXG4gICAgICAgIC4uLmNhcmRzLm1hcChjYXJkID0+IFN5bmNPcGVyYXRpb25GaXh0dXJlLmNyZWF0ZUNhcmQoY2FyZC5pZCwgeyBkYXRhOiBjYXJkIH0pKSxcbiAgICAgICAgLi4uZm9sZGVycy5tYXAoZm9sZGVyID0+IFN5bmNPcGVyYXRpb25GaXh0dXJlLmNyZWF0ZUZvbGRlcihmb2xkZXIuaWQsIHsgZGF0YTogZm9sZGVyIH0pKSxcbiAgICAgICAgLi4udGFncy5tYXAodGFnID0+IFN5bmNPcGVyYXRpb25GaXh0dXJlLmNyZWF0ZVRhZyh0YWcuaWQsIHsgZGF0YTogdGFnIH0pKSxcbiAgICAgIF1cbiAgICAgIGF3YWl0IFByb21pc2UuYWxsKHN5bmNPcGVyYXRpb25zLm1hcChvcCA9PiBkYXRhYmFzZVNlcnZpY2Uuc3luY1F1ZXVlLmFkZChvcCkpKVxuXG4gICAgICBjb25zdCBzeW5jVGltZSA9IGF3YWl0IHBlcmZvcm1hbmNlVGVzdGVyLm1lYXN1cmUoJ3N5bmMtbWl4ZWQtZGF0YScsIGFzeW5jICgpID0+IHtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgc3luY1NlcnZpY2Uuc3luY05vdygpXG4gICAgICAgIHJldHVybiByZXN1bHRcbiAgICAgIH0pXG5cbiAgICAgIGV4cGVjdChzeW5jVGltZSkudG9CZUxlc3NUaGFuKDMwMDApIC8vIOW6lOivpeWcqDPnp5LlhoXlrozmiJBcbiAgICAgIFxuICAgICAgY29uc3Qgc3luY1N0YXRzID0gYXdhaXQgZGF0YWJhc2VTZXJ2aWNlLnN5bmNRdWV1ZS5nZXRTdGF0cygpXG4gICAgICBleHBlY3Qoc3luY1N0YXRzLmNvbXBsZXRlZCkudG9CZShzeW5jT3BlcmF0aW9ucy5sZW5ndGgpXG4gICAgfSlcbiAgfSlcblxuICBkZXNjcmliZSgn6Zif5YiX5oCn6IO95rWL6K+VJywgKCkgPT4ge1xuICAgIGl0KCflupTor6Xog73lpJ/pq5jmlYjnrqHnkIblpKfph4/pmJ/liJfmk43kvZwnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBxdWV1ZVNpemUgPSAxMDAwXG4gICAgICBcbiAgICAgIC8vIOWIm+W7uuWkp+mHj+mYn+WIl+aTjeS9nFxuICAgICAgY29uc3Qgc3luY09wZXJhdGlvbnMgPSBbXVxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBxdWV1ZVNpemU7IGkrKykge1xuICAgICAgICBjb25zdCBvcGVyYXRpb24gPSBTeW5jT3BlcmF0aW9uRml4dHVyZS5jcmVhdGVDYXJkKGBjYXJkLSR7aX1gLCB7XG4gICAgICAgICAgcHJpb3JpdHk6IGkgJSAxMCA9PT0gMCA/ICdoaWdoJyA6ICdub3JtYWwnLCAvLyAxMCXpq5jkvJjlhYjnuqdcbiAgICAgICAgfSlcbiAgICAgICAgc3luY09wZXJhdGlvbnMucHVzaChvcGVyYXRpb24pXG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHF1ZXVlQWRkVGltZSA9IGF3YWl0IHBlcmZvcm1hbmNlVGVzdGVyLm1lYXN1cmUoJ3F1ZXVlLWFkZC1vcGVyYXRpb25zJywgYXN5bmMgKCkgPT4ge1xuICAgICAgICBhd2FpdCBQcm9taXNlLmFsbChzeW5jT3BlcmF0aW9ucy5tYXAob3AgPT4gZGF0YWJhc2VTZXJ2aWNlLnN5bmNRdWV1ZS5hZGQob3ApKSlcbiAgICAgIH0pXG5cbiAgICAgIGV4cGVjdChxdWV1ZUFkZFRpbWUpLnRvQmVMZXNzVGhhbigxMDAwKSAvLyDlupTor6XlnKgx56eS5YaF5a6M5oiQXG5cbiAgICAgIC8vIOa1i+mHj+mYn+WIl+e7n+iuoeaAp+iDvVxuICAgICAgY29uc3Qgc3RhdHNUaW1lID0gYXdhaXQgcGVyZm9ybWFuY2VUZXN0ZXIubWVhc3VyZSgncXVldWUtZ2V0LXN0YXRzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgICByZXR1cm4gYXdhaXQgZGF0YWJhc2VTZXJ2aWNlLnN5bmNRdWV1ZS5nZXRTdGF0cygpXG4gICAgICB9KVxuXG4gICAgICBleHBlY3Qoc3RhdHNUaW1lKS50b0JlTGVzc1RoYW4oMTAwKSAvLyDlupTor6XlnKgxMDBtc+WGheWujOaIkFxuXG4gICAgICBjb25zdCBzdGF0cyA9IGF3YWl0IGRhdGFiYXNlU2VydmljZS5zeW5jUXVldWUuZ2V0U3RhdHMoKVxuICAgICAgZXhwZWN0KHN0YXRzLnRvdGFsKS50b0JlKHF1ZXVlU2l6ZSlcbiAgICB9KVxuXG4gICAgaXQoJ+W6lOivpeiDveWkn+mrmOaViOWkhOeQhumYn+WIl+a4heeQhicsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIOa3u+WKoOWQhOenjeeKtuaAgeeahOmYn+WIl+aTjeS9nFxuICAgICAgY29uc3Qgb3BlcmF0aW9ucyA9IFtcbiAgICAgICAgLi4uQXJyYXkuZnJvbSh7IGxlbmd0aDogMTAwIH0sICgpID0+IFN5bmNPcGVyYXRpb25GaXh0dXJlLmNyZWF0ZUNhcmQoJ3Rlc3QnKSksXG4gICAgICAgIC4uLkFycmF5LmZyb20oeyBsZW5ndGg6IDUwIH0sICgpID0+IFN5bmNPcGVyYXRpb25GaXh0dXJlLmNvbXBsZXRlZCgpKSxcbiAgICAgICAgLi4uQXJyYXkuZnJvbSh7IGxlbmd0aDogMjUgfSwgKCkgPT4gU3luY09wZXJhdGlvbkZpeHR1cmUuZmFpbGVkKCkpLFxuICAgICAgXVxuXG4gICAgICBhd2FpdCBQcm9taXNlLmFsbChvcGVyYXRpb25zLm1hcChvcCA9PiBkYXRhYmFzZVNlcnZpY2Uuc3luY1F1ZXVlLmFkZChvcCkpKVxuXG4gICAgICBjb25zdCBjbGVhbnVwVGltZSA9IGF3YWl0IHBlcmZvcm1hbmNlVGVzdGVyLm1lYXN1cmUoJ3F1ZXVlLWNsZWFudXAnLCBhc3luYyAoKSA9PiB7XG4gICAgICAgIGF3YWl0IGRhdGFiYXNlU2VydmljZS5zeW5jUXVldWUuY2xlYXIoKVxuICAgICAgfSlcblxuICAgICAgZXhwZWN0KGNsZWFudXBUaW1lKS50b0JlTGVzc1RoYW4oNTAwKSAvLyDlupTor6XlnKg1MDBtc+WGheWujOaIkFxuXG4gICAgICBjb25zdCBzdGF0cyA9IGF3YWl0IGRhdGFiYXNlU2VydmljZS5zeW5jUXVldWUuZ2V0U3RhdHMoKVxuICAgICAgZXhwZWN0KHN0YXRzLnRvdGFsKS50b0JlKDApXG4gICAgfSlcbiAgfSlcblxuICBkZXNjcmliZSgn57O757uf56iz5a6a5oCn5rWL6K+VJywgKCkgPT4ge1xuICAgIGl0KCflupTor6Xog73lpJ/mjIHnu63lpITnkIbplb/ml7bpl7Tov5DooYznmoTlkIzmraXmk43kvZwnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCB0b3RhbE9wZXJhdGlvbnMgPSA1MDBcbiAgICAgIGNvbnN0IGJhdGNoU2l6ZSA9IDEwXG4gICAgICBjb25zdCBiYXRjaGVzID0gTWF0aC5jZWlsKHRvdGFsT3BlcmF0aW9ucyAvIGJhdGNoU2l6ZSlcblxuICAgICAgbGV0IHRvdGFsU3luY1RpbWUgPSAwXG4gICAgICBsZXQgc3VjY2Vzc2Z1bEJhdGNoZXMgPSAwXG5cbiAgICAgIGZvciAobGV0IGJhdGNoID0gMDsgYmF0Y2ggPCBiYXRjaGVzOyBiYXRjaCsrKSB7XG4gICAgICAgIGNvbnN0IGNhcmRzID0gQ2FyZEZpeHR1cmUubGlzdChiYXRjaFNpemUpXG4gICAgICAgIGF3YWl0IGRhdGFiYXNlU2VydmljZS5jYXJkcy5idWxrQWRkKGNhcmRzKVxuICAgICAgICBcbiAgICAgICAgY29uc3Qgc3luY09wZXJhdGlvbnMgPSBjYXJkcy5tYXAoY2FyZCA9PiBcbiAgICAgICAgICBTeW5jT3BlcmF0aW9uRml4dHVyZS5jcmVhdGVDYXJkKGNhcmQuaWQsIHsgZGF0YTogY2FyZCB9KVxuICAgICAgICApXG4gICAgICAgIGF3YWl0IFByb21pc2UuYWxsKHN5bmNPcGVyYXRpb25zLm1hcChvcCA9PiBkYXRhYmFzZVNlcnZpY2Uuc3luY1F1ZXVlLmFkZChvcCkpKVxuXG4gICAgICAgIGNvbnN0IGJhdGNoVGltZSA9IGF3YWl0IHBlcmZvcm1hbmNlVGVzdGVyLm1lYXN1cmUoYGJhdGNoLSR7YmF0Y2h9YCwgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHN5bmNTZXJ2aWNlLnN5bmNOb3coKVxuICAgICAgICAgIHJldHVybiByZXN1bHRcbiAgICAgICAgfSlcblxuICAgICAgICB0b3RhbFN5bmNUaW1lICs9IGJhdGNoVGltZVxuICAgICAgICBcbiAgICAgICAgaWYgKGJhdGNoVGltZS5zdWNjZXNzKSB7XG4gICAgICAgICAgc3VjY2Vzc2Z1bEJhdGNoZXMrK1xuICAgICAgICB9XG5cbiAgICAgICAgLy8g55+t5pqC5LyR5oGv5Lul5qih5ouf55yf5a6e5L2/55So5Zy65pmvXG4gICAgICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCAxMCkpXG4gICAgICB9XG5cbiAgICAgIC8vIOmqjOivgeezu+e7n+eos+WumuaAp1xuICAgICAgZXhwZWN0KHN1Y2Nlc3NmdWxCYXRjaGVzKS50b0JlKGJhdGNoZXMpXG4gICAgICBleHBlY3QodG90YWxTeW5jVGltZSkudG9CZUxlc3NUaGFuKDMwMDAwKSAvLyDmgLvml7bpl7TlupTor6XlsJHkuo4zMOenklxuICAgICAgZXhwZWN0KHRvdGFsU3luY1RpbWUgLyBiYXRjaGVzKS50b0JlTGVzc1RoYW4oMTAwMCkgLy8g5bmz5Z2H5q+P5om55qyh5bqU6K+l5bCR5LqOMeenklxuICAgIH0pXG5cbiAgICBpdCgn5bqU6K+l6IO95aSf5Zyo5YaF5a2Y5Y6L5Yqb5LiL5L+d5oyB56iz5a6aJywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8g5qih5ouf5YaF5a2Y5Y6L5Yqb5Zy65pmvXG4gICAgICBjb25zdCBtZW1vcnlQcmVzc3VyZVRlc3QgPSBhc3luYyAoKSA9PiB7XG4gICAgICAgIGNvbnN0IG9wZXJhdGlvbnMgPSBbXVxuICAgICAgICBcbiAgICAgICAgLy8g5Yib5bu65aSn6YeP5pWw5o2uXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMTAwOyBpKyspIHtcbiAgICAgICAgICBjb25zdCBjYXJkcyA9IENhcmRGaXh0dXJlLmxpc3QoMjApXG4gICAgICAgICAgYXdhaXQgZGF0YWJhc2VTZXJ2aWNlLmNhcmRzLmJ1bGtBZGQoY2FyZHMpXG4gICAgICAgICAgXG4gICAgICAgICAgY29uc3Qgc3luY09wZXJhdGlvbnMgPSBjYXJkcy5tYXAoY2FyZCA9PiBcbiAgICAgICAgICAgIFN5bmNPcGVyYXRpb25GaXh0dXJlLmNyZWF0ZUNhcmQoY2FyZC5pZCwgeyBkYXRhOiBjYXJkIH0pXG4gICAgICAgICAgKVxuICAgICAgICAgIGF3YWl0IFByb21pc2UuYWxsKHN5bmNPcGVyYXRpb25zLm1hcChvcCA9PiBkYXRhYmFzZVNlcnZpY2Uuc3luY1F1ZXVlLmFkZChvcCkpKVxuICAgICAgICAgIFxuICAgICAgICAgIG9wZXJhdGlvbnMucHVzaChzeW5jU2VydmljZS5zeW5jTm93KCkpXG4gICAgICAgIH1cblxuICAgICAgICAvLyDlubblj5HmiafooYzmiYDmnInlkIzmraXmk43kvZxcbiAgICAgICAgY29uc3QgcmVzdWx0cyA9IGF3YWl0IFByb21pc2UuYWxsKG9wZXJhdGlvbnMpXG4gICAgICAgIFxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHN1Y2Nlc3NmdWw6IHJlc3VsdHMuZmlsdGVyKHIgPT4gci5zdWNjZXNzKS5sZW5ndGgsXG4gICAgICAgICAgZmFpbGVkOiByZXN1bHRzLmZpbHRlcihyID0+ICFyLnN1Y2Nlc3MpLmxlbmd0aCxcbiAgICAgICAgICBhdmVyYWdlVGltZTogcmVzdWx0cy5yZWR1Y2UoKHN1bSwgcikgPT4gc3VtICsgKHIuc3luY2VkQ291bnQgfHwgMCksIDApIC8gcmVzdWx0cy5sZW5ndGgsXG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgY29uc3QgcHJlc3N1cmVSZXN1bHQgPSBhd2FpdCBwZXJmb3JtYW5jZVRlc3Rlci5tZWFzdXJlKCdtZW1vcnktcHJlc3N1cmUtdGVzdCcsIG1lbW9yeVByZXNzdXJlVGVzdClcblxuICAgICAgZXhwZWN0KHByZXNzdXJlUmVzdWx0LnN1Y2Nlc3NmdWwpLnRvQmUoMTAwKVxuICAgICAgZXhwZWN0KHByZXNzdXJlUmVzdWx0LmZhaWxlZCkudG9CZSgwKVxuICAgICAgZXhwZWN0KHByZXNzdXJlUmVzdWx0LmF2ZXJhZ2VUaW1lKS50b0JlR3JlYXRlclRoYW4oMClcbiAgICB9KVxuICB9KVxuXG4gIGRlc2NyaWJlKCfmgKfog73ln7rlh4YnLCAoKSA9PiB7XG4gICAgaXQoJ+W6lOivpea7oei2s+aAp+iDveWfuuWHhuimgeaxgicsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIOWumuS5ieaAp+iDveWfuuWHhlxuICAgICAgY29uc3QgYmVuY2htYXJrcyA9IHtcbiAgICAgICAgc2luZ2xlQ2FyZFN5bmM6IDEwMCwgLy8g5Y2V5Liq5Y2h54mH5ZCM5q2l5bqU6K+l5ZyoMTAwbXPlhoXlrozmiJBcbiAgICAgICAgc21hbGxCYXRjaFN5bmM6IDEwMDAsIC8vIOWwj+aJuemHjygxMOS4qinlkIzmraXlupTor6XlnKgx56eS5YaF5a6M5oiQXG4gICAgICAgIG1lZGl1bUJhdGNoU3luYzogMzAwMCwgLy8g5Lit5om56YePKDUw5LiqKeWQjOatpeW6lOivpeWcqDPnp5LlhoXlrozmiJBcbiAgICAgICAgbGFyZ2VCYXRjaFN5bmM6IDEwMDAwLCAvLyDlpKfmibnph48oMjAw5LiqKeWQjOatpeW6lOivpeWcqDEw56eS5YaF5a6M5oiQXG4gICAgICAgIG1lbW9yeVVzYWdlTGltaXQ6IDgwLCAvLyDlhoXlrZjkvb/nlKjnjoflupTor6XkvY7kuo44MCVcbiAgICAgICAgcXVldWVPcGVyYXRpb25MaW1pdDogMTAwLCAvLyDpmJ/liJfmk43kvZzlupTor6XlnKgxMDBtc+WGheWujOaIkFxuICAgICAgfVxuXG4gICAgICAvLyDmtYvor5XljZXkuKrljaHniYflkIzmraVcbiAgICAgIGNvbnN0IHNpbmdsZUNhcmQgPSBDYXJkRml4dHVyZS5iYXNpYygpXG4gICAgICBhd2FpdCBkYXRhYmFzZVNlcnZpY2UuY2FyZHMuYWRkKHNpbmdsZUNhcmQpXG4gICAgICBhd2FpdCBkYXRhYmFzZVNlcnZpY2Uuc3luY1F1ZXVlLmFkZChTeW5jT3BlcmF0aW9uRml4dHVyZS5jcmVhdGVDYXJkKHNpbmdsZUNhcmQuaWQsIHsgZGF0YTogc2luZ2xlQ2FyZCB9KSlcblxuICAgICAgY29uc3Qgc2luZ2xlQ2FyZFRpbWUgPSBhd2FpdCBwZXJmb3JtYW5jZVRlc3Rlci5tZWFzdXJlKCdzaW5nbGUtY2FyZC1zeW5jJywgYXN5bmMgKCkgPT4ge1xuICAgICAgICByZXR1cm4gYXdhaXQgc3luY1NlcnZpY2Uuc3luY05vdygpXG4gICAgICB9KVxuXG4gICAgICBleHBlY3Qoc2luZ2xlQ2FyZFRpbWUpLnRvQmVMZXNzVGhhbihiZW5jaG1hcmtzLnNpbmdsZUNhcmRTeW5jKVxuXG4gICAgICAvLyDmtYvor5XlsI/mibnph4/lkIzmraVcbiAgICAgIGNvbnN0IHNtYWxsQmF0Y2ggPSBDYXJkRml4dHVyZS5saXN0KDEwKVxuICAgICAgYXdhaXQgZGF0YWJhc2VTZXJ2aWNlLmNhcmRzLmJ1bGtBZGQoc21hbGxCYXRjaClcbiAgICAgIGF3YWl0IFByb21pc2UuYWxsKHNtYWxsQmF0Y2gubWFwKGNhcmQgPT4gXG4gICAgICAgIGRhdGFiYXNlU2VydmljZS5zeW5jUXVldWUuYWRkKFN5bmNPcGVyYXRpb25GaXh0dXJlLmNyZWF0ZUNhcmQoY2FyZC5pZCwgeyBkYXRhOiBjYXJkIH0pKVxuICAgICAgKSlcblxuICAgICAgY29uc3Qgc21hbGxCYXRjaFRpbWUgPSBhd2FpdCBwZXJmb3JtYW5jZVRlc3Rlci5tZWFzdXJlKCdzbWFsbC1iYXRjaC1zeW5jJywgYXN5bmMgKCkgPT4ge1xuICAgICAgICByZXR1cm4gYXdhaXQgc3luY1NlcnZpY2Uuc3luY05vdygpXG4gICAgICB9KVxuXG4gICAgICBleHBlY3Qoc21hbGxCYXRjaFRpbWUpLnRvQmVMZXNzVGhhbihiZW5jaG1hcmtzLnNtYWxsQmF0Y2hTeW5jKVxuXG4gICAgICAvLyDmtYvor5XpmJ/liJfmk43kvZzmgKfog71cbiAgICAgIGNvbnN0IHF1ZXVlT3BlcmF0aW9uVGltZSA9IGF3YWl0IHBlcmZvcm1hbmNlVGVzdGVyLm1lYXN1cmUoJ3F1ZXVlLW9wZXJhdGlvbicsIGFzeW5jICgpID0+IHtcbiAgICAgICAgY29uc3Qgb3BlcmF0aW9uID0gU3luY09wZXJhdGlvbkZpeHR1cmUuY3JlYXRlQ2FyZCgndGVzdC1jYXJkJylcbiAgICAgICAgcmV0dXJuIGF3YWl0IGRhdGFiYXNlU2VydmljZS5zeW5jUXVldWUuYWRkKG9wZXJhdGlvbilcbiAgICAgIH0pXG5cbiAgICAgIGV4cGVjdChxdWV1ZU9wZXJhdGlvblRpbWUpLnRvQmVMZXNzVGhhbihiZW5jaG1hcmtzLnF1ZXVlT3BlcmF0aW9uTGltaXQpXG5cbiAgICAgIC8vIOeUn+aIkOaAp+iDveaKpeWRilxuICAgICAgY29uc3QgcGVyZm9ybWFuY2VSZXBvcnQgPSB7XG4gICAgICAgIGJlbmNobWFya3MsXG4gICAgICAgIHJlc3VsdHM6IHtcbiAgICAgICAgICBzaW5nbGVDYXJkU3luYzogc2luZ2xlQ2FyZFRpbWUsXG4gICAgICAgICAgc21hbGxCYXRjaFN5bmM6IHNtYWxsQmF0Y2hUaW1lLFxuICAgICAgICAgIHF1ZXVlT3BlcmF0aW9uOiBxdWV1ZU9wZXJhdGlvblRpbWUsXG4gICAgICAgIH0sXG4gICAgICAgIHBhc3NlZDoge1xuICAgICAgICAgIHNpbmdsZUNhcmRTeW5jOiBzaW5nbGVDYXJkVGltZSA8IGJlbmNobWFya3Muc2luZ2xlQ2FyZFN5bmMsXG4gICAgICAgICAgc21hbGxCYXRjaFN5bmM6IHNtYWxsQmF0Y2hUaW1lIDwgYmVuY2htYXJrcy5zbWFsbEJhdGNoU3luYyxcbiAgICAgICAgICBxdWV1ZU9wZXJhdGlvbjogcXVldWVPcGVyYXRpb25UaW1lIDwgYmVuY2htYXJrcy5xdWV1ZU9wZXJhdGlvbkxpbWl0LFxuICAgICAgICB9LFxuICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICAgIH1cblxuICAgICAgLy8g5oCn6IO95oql5ZGK5bqU6K+l6YCa6L+H5omA5pyJ5Z+65YeG5rWL6K+VXG4gICAgICBleHBlY3QoT2JqZWN0LnZhbHVlcyhwZXJmb3JtYW5jZVJlcG9ydC5wYXNzZWQpLmV2ZXJ5KEJvb2xlYW4pKS50b0JlKHRydWUpXG4gICAgfSlcbiAgfSlcbn0pIl0sInZlcnNpb24iOjN9