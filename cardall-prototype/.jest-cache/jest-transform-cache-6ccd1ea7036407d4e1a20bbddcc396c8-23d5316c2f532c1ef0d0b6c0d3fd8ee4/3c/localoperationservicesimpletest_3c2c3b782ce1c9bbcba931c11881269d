5d86fec157b66280905140cf9d79a60c
"use strict";
/**
 * LocalOperationService 简化单元测试
 * 测试高性能本地操作服务的核心功能
 */
Object.defineProperty(exports, "__esModule", { value: true });
const globals_1 = require("@jest/globals");
// 模拟数据库
globals_1.jest.mock('../../services/database-unified', () => ({
    db: {
        cards: {
            add: globals_1.jest.fn(),
            get: globals_1.jest.fn(),
            update: globals_1.jest.fn(),
            delete: globals_1.jest.fn(),
            where: globals_1.jest.fn(),
            toArray: globals_1.jest.fn(),
            bulkAdd: globals_1.jest.fn(),
            bulkPut: globals_1.jest.fn(),
            bulkDelete: globals_1.jest.fn()
        },
        folders: {
            add: globals_1.jest.fn(),
            get: globals_1.jest.fn(),
            update: globals_1.jest.fn(),
            delete: globals_1.jest.fn(),
            where: globals_1.jest.fn(),
            toArray: globals_1.jest.fn()
        },
        tags: {
            add: globals_1.jest.fn(),
            get: globals_1.jest.fn(),
            update: globals_1.jest.fn(),
            delete: globals_1.jest.fn(),
            where: globals_1.jest.fn(),
            toArray: globals_1.jest.fn()
        },
        cardTags: {
            add: globals_1.jest.fn(),
            get: globals_1.jest.fn(),
            update: globals_1.jest.fn(),
            delete: globals_1.jest.fn(),
            where: globals_1.jest.fn(),
            toArray: globals_1.jest.fn()
        },
        syncOperations: {
            add: globals_1.jest.fn(),
            get: globals_1.jest.fn(),
            update: globals_1.jest.fn(),
            delete: globals_1.jest.fn(),
            where: globals_1.jest.fn(),
            toArray: globals_1.jest.fn()
        }
    }
}));
const local_operation_service_1 = require("../../services/local-operation-service");
// 创建简单的Mock工具
const createMockCard = () => ({
    id: crypto.randomUUID(),
    title: '测试卡片',
    content: '测试内容',
    frontContent: '正面内容',
    backContent: '背面内容',
    folderId: crypto.randomUUID(),
    tags: [],
    createdAt: new Date(),
    updatedAt: new Date(),
    isFlipped: false,
    isBookmarked: false,
    cardType: 'normal',
    priority: 'medium',
    status: 'active'
});
const createMockFolder = () => ({
    id: crypto.randomUUID(),
    name: '测试文件夹',
    parentId: null,
    createdAt: new Date(),
    updatedAt: new Date()
});
(0, globals_1.describe)('LocalOperationServiceOptimized', () => {
    let service;
    (0, globals_1.beforeEach)(() => {
        // 重置服务实例
        service = new local_operation_service_1.LocalOperationServiceOptimized();
        // 清理所有模拟
        globals_1.jest.clearAllMocks();
    });
    (0, globals_1.afterEach)(() => {
        // 清理服务
        if (service.destroy) {
            service.destroy();
        }
    });
    // ============================================================================
    // 初始化测试
    // ============================================================================
    (0, globals_1.describe)('初始化', () => {
        (0, globals_1.test)('应该正确初始化服务', async () => {
            await service.initialize();
            (0, globals_1.expect)(service).toBeInstanceOf(local_operation_service_1.LocalOperationServiceOptimized);
        });
        (0, globals_1.test)('应该处理初始化错误', async () => {
            // 模拟初始化错误
            globals_1.jest.spyOn(service, 'initialize').mockRejectedValue(new Error('初始化失败'));
            await (0, globals_1.expect)(service.initialize()).rejects.toThrow('初始化失败');
        });
    });
    // ============================================================================
    // 卡片操作测试
    // ============================================================================
    (0, globals_1.describe)('卡片操作', () => {
        (0, globals_1.test)('应该成功创建卡片', async () => {
            const cardData = createMockCard();
            const mockResult = { ...cardData, id: crypto.randomUUID() };
            // 模拟数据库返回
            const { db } = require('../../services/database-unified');
            db.cards.add.mockResolvedValue(mockResult.id);
            const result = await service.createCard(cardData);
            (0, globals_1.expect)(result.success).toBe(true);
            (0, globals_1.expect)(result.id).toBeDefined();
            (0, globals_1.expect)(db.cards.add).toHaveBeenCalledWith(cardData);
        });
        (0, globals_1.test)('应该成功读取卡片', async () => {
            const cardId = crypto.randomUUID();
            const mockCard = createMockCard();
            // 模拟数据库返回
            const { db } = require('../../services/database-unified');
            db.cards.get.mockResolvedValue(mockCard);
            const result = await service.getCard(cardId);
            (0, globals_1.expect)(result).toEqual(mockCard);
            (0, globals_1.expect)(db.cards.get).toHaveBeenCalledWith(cardId);
        });
        (0, globals_1.test)('应该成功更新卡片', async () => {
            const cardId = crypto.randomUUID();
            const updateData = { title: '更新后的标题' };
            // 模拟数据库返回
            const { db } = require('../../services/database-unified');
            db.cards.update.mockResolvedValue(1);
            const result = await service.updateCard(cardId, updateData);
            (0, globals_1.expect)(result.success).toBe(true);
            (0, globals_1.expect)(db.cards.update).toHaveBeenCalledWith(cardId, updateData);
        });
        (0, globals_1.test)('应该成功删除卡片', async () => {
            const cardId = crypto.randomUUID();
            // 模拟数据库返回
            const { db } = require('../../services/database-unified');
            db.cards.delete.mockResolvedValue(1);
            const result = await service.deleteCard(cardId);
            (0, globals_1.expect)(result.success).toBe(true);
            (0, globals_1.expect)(db.cards.delete).toHaveBeenCalledWith(cardId);
        });
        (0, globals_1.test)('应该处理数据库操作错误', async () => {
            const cardData = createMockCard();
            // 模拟数据库错误
            const { db } = require('../../services/database-unified');
            db.cards.add.mockRejectedValue(new Error('数据库错误'));
            const result = await service.createCard(cardData);
            (0, globals_1.expect)(result.success).toBe(false);
            (0, globals_1.expect)(result.error).toBe('数据库错误');
        });
    });
    // ============================================================================
    // 文件夹操作测试
    // ============================================================================
    (0, globals_1.describe)('文件夹操作', () => {
        (0, globals_1.test)('应该成功创建文件夹', async () => {
            const folderData = createMockFolder();
            const mockResult = { ...folderData, id: crypto.randomUUID() };
            // 模拟数据库返回
            const { db } = require('../../services/database-unified');
            db.folders.add.mockResolvedValue(mockResult.id);
            const result = await service.createFolder(folderData);
            (0, globals_1.expect)(result.success).toBe(true);
            (0, globals_1.expect)(result.id).toBeDefined();
            (0, globals_1.expect)(db.folders.add).toHaveBeenCalledWith(folderData);
        });
        (0, globals_1.test)('应该成功获取文件夹', async () => {
            const folderId = crypto.randomUUID();
            const mockFolder = createMockFolder();
            // 模拟数据库返回
            const { db } = require('../../services/database-unified');
            db.folders.get.mockResolvedValue(mockFolder);
            const result = await service.getFolder(folderId);
            (0, globals_1.expect)(result).toEqual(mockFolder);
            (0, globals_1.expect)(db.folders.get).toHaveBeenCalledWith(folderId);
        });
    });
    // ============================================================================
    // 批量操作测试
    // ============================================================================
    (0, globals_1.describe)('批量操作', () => {
        (0, globals_1.test)('应该成功批量插入卡片', async () => {
            const cards = Array.from({ length: 10 }, () => createMockCard());
            // 模拟数据库返回
            const { db } = require('../../services/database-unified');
            db.cards.bulkAdd.mockResolvedValue(cards.map(c => c.id));
            const result = await service.bulkCreateCards(cards);
            (0, globals_1.expect)(result.success).toBe(true);
            (0, globals_1.expect)(result.count).toBe(10);
            (0, globals_1.expect)(db.cards.bulkAdd).toHaveBeenCalledWith(cards);
        });
        (0, globals_1.test)('应该成功批量更新卡片', async () => {
            const updates = Array.from({ length: 5 }, (_, i) => ({
                id: crypto.randomUUID(),
                changes: { title: `更新标题 ${i}` }
            }));
            // 模拟数据库返回
            const { db } = require('../../services/database-unified');
            db.cards.bulkPut.mockResolvedValue(updates.length);
            const result = await service.bulkUpdateCards(updates);
            (0, globals_1.expect)(result.success).toBe(true);
            (0, globals_1.expect)(result.count).toBe(5);
            (0, globals_1.expect)(db.cards.bulkPut).toHaveBeenCalledWith(updates.map(u => ({ ...createMockCard(), ...u.changes, id: u.id })));
        });
    });
    // ============================================================================
    // 查询操作测试
    // ============================================================================
    (0, globals_1.describe)('查询操作', () => {
        (0, globals_1.test)('应该成功查询卡片列表', async () => {
            const mockCards = Array.from({ length: 5 }, () => createMockCard());
            // 模拟数据库返回
            const { db } = require('../../services/database-unified');
            db.cards.toArray.mockResolvedValue(mockCards);
            const result = await service.getAllCards();
            (0, globals_1.expect)(result).toEqual(mockCards);
            (0, globals_1.expect)(db.cards.toArray).toHaveBeenCalled();
        });
        (0, globals_1.test)('应该支持条件查询', async () => {
            const folderId = crypto.randomUUID();
            const mockCards = Array.from({ length: 3 }, () => ({
                ...createMockCard(),
                folderId
            }));
            // 模拟数据库返回
            const { db } = require('../../services/database-unified');
            const whereMock = {
                equals: globals_1.jest.fn().mockResolvedValue(mockCards)
            };
            db.cards.where.mockReturnValue(whereMock);
            const result = await service.getCardsByFolder(folderId);
            (0, globals_1.expect)(result).toEqual(mockCards);
            (0, globals_1.expect)(db.cards.where).toHaveBeenCalledWith('folderId');
            (0, globals_1.expect)(whereMock.equals).toHaveBeenCalledWith(folderId);
        });
    });
    // ============================================================================
    // 同步操作测试
    // ============================================================================
    (0, globals_1.describe)('同步操作', () => {
        (0, globals_1.test)('应该正确记录同步操作', async () => {
            const operation = {
                type: 'create',
                entityType: 'card',
                entityId: crypto.randomUUID(),
                data: createMockCard(),
                timestamp: new Date()
            };
            // 模拟数据库返回
            const { db } = require('../../services/database-unified');
            db.syncOperations.add.mockResolvedValue(crypto.randomUUID());
            const result = await service.recordSyncOperation(operation);
            (0, globals_1.expect)(result.success).toBe(true);
            (0, globals_1.expect)(db.syncOperations.add).toHaveBeenCalledWith(operation);
        });
        (0, globals_1.test)('应该获取待同步操作', async () => {
            const mockOperations = Array.from({ length: 3 }, () => ({
                id: crypto.randomUUID(),
                type: 'create',
                entityType: 'card',
                entityId: crypto.randomUUID(),
                data: createMockCard(),
                timestamp: new Date()
            }));
            // 模拟数据库返回
            const { db } = require('../../services/database-unified');
            db.syncOperations.toArray.mockResolvedValue(mockOperations);
            const result = await service.getPendingSyncOperations();
            (0, globals_1.expect)(result).toEqual(mockOperations);
            (0, globals_1.expect)(db.syncOperations.toArray).toHaveBeenCalled();
        });
    });
    // ============================================================================
    // 性能监控测试
    // ============================================================================
    (0, globals_1.describe)('性能监控', () => {
        (0, globals_1.test)('应该记录操作耗时', async () => {
            const cardData = createMockCard();
            const mockResult = { ...cardData, id: crypto.randomUUID() };
            // 模拟数据库返回
            const { db } = require('../../services/database-unified');
            db.cards.add.mockResolvedValue(mockResult.id);
            // 监控性能
            const startTime = performance.now();
            await service.createCard(cardData);
            const endTime = performance.now();
            (0, globals_1.expect)(endTime - startTime).toBeGreaterThan(0);
        });
        (0, globals_1.test)('应该处理大量数据操作', async () => {
            const largeDataset = Array.from({ length: 100 }, () => createMockCard());
            // 模拟数据库返回
            const { db } = require('../../services/database-unified');
            db.cards.bulkAdd.mockResolvedValue(largeDataset.map(c => c.id));
            const result = await service.bulkCreateCards(largeDataset);
            (0, globals_1.expect)(result.success).toBe(true);
            (0, globals_1.expect)(result.count).toBe(100);
        });
    });
    // ============================================================================
    // 错误处理测试
    // ============================================================================
    (0, globals_1.describe)('错误处理', () => {
        (0, globals_1.test)('应该正确处理无效输入', async () => {
            // 测试空数据
            const result1 = await service.createCard({});
            (0, globals_1.expect)(result1.success).toBe(false);
            // 测试无效ID
            const result2 = await service.getCard('');
            (0, globals_1.expect)(result2).toBeNull();
            // 测试无效更新
            const result3 = await service.updateCard('', {});
            (0, globals_1.expect)(result3.success).toBe(false);
        });
        (0, globals_1.test)('应该处理并发操作', async () => {
            const cardData = createMockCard();
            const mockResult = { ...cardData, id: crypto.randomUUID() };
            // 模拟数据库返回
            const { db } = require('../../services/database-unified');
            db.cards.add.mockResolvedValue(mockResult.id);
            // 并发创建多个卡片
            const promises = Array.from({ length: 5 }, () => service.createCard(cardData));
            const results = await Promise.all(promises);
            (0, globals_1.expect)(results).toHaveLength(5);
            (0, globals_1.expect)(results.every(r => r.success)).toBe(true);
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiRDpcXFByb2plY3RzXFxDYXJkRXZlcnl0aGluZ1xcY2FyZGFsbC1wcm90b3R5cGVcXHNyY1xcX190ZXN0c19fXFxzZXJ2aWNlc1xcbG9jYWwtb3BlcmF0aW9uLXNlcnZpY2Utc2ltcGxlLnRlc3QudHMiLCJtYXBwaW5ncyI6IjtBQUFBOzs7R0FHRzs7QUFFSCwyQ0FBbUY7QUE2Qm5GLFFBQVE7QUFDUixjQUFJLENBQUMsSUFBSSxDQUFDLGlDQUFpQyxFQUFFLEdBQUcsRUFBRSxDQUFDLENBQUM7SUFDbEQsRUFBRSxFQUFFO1FBQ0YsS0FBSyxFQUFFO1lBQ0wsR0FBRyxFQUFFLGNBQUksQ0FBQyxFQUFFLEVBQUU7WUFDZCxHQUFHLEVBQUUsY0FBSSxDQUFDLEVBQUUsRUFBRTtZQUNkLE1BQU0sRUFBRSxjQUFJLENBQUMsRUFBRSxFQUFFO1lBQ2pCLE1BQU0sRUFBRSxjQUFJLENBQUMsRUFBRSxFQUFFO1lBQ2pCLEtBQUssRUFBRSxjQUFJLENBQUMsRUFBRSxFQUFFO1lBQ2hCLE9BQU8sRUFBRSxjQUFJLENBQUMsRUFBRSxFQUFFO1lBQ2xCLE9BQU8sRUFBRSxjQUFJLENBQUMsRUFBRSxFQUFFO1lBQ2xCLE9BQU8sRUFBRSxjQUFJLENBQUMsRUFBRSxFQUFFO1lBQ2xCLFVBQVUsRUFBRSxjQUFJLENBQUMsRUFBRSxFQUFFO1NBQ3RCO1FBQ0QsT0FBTyxFQUFFO1lBQ1AsR0FBRyxFQUFFLGNBQUksQ0FBQyxFQUFFLEVBQUU7WUFDZCxHQUFHLEVBQUUsY0FBSSxDQUFDLEVBQUUsRUFBRTtZQUNkLE1BQU0sRUFBRSxjQUFJLENBQUMsRUFBRSxFQUFFO1lBQ2pCLE1BQU0sRUFBRSxjQUFJLENBQUMsRUFBRSxFQUFFO1lBQ2pCLEtBQUssRUFBRSxjQUFJLENBQUMsRUFBRSxFQUFFO1lBQ2hCLE9BQU8sRUFBRSxjQUFJLENBQUMsRUFBRSxFQUFFO1NBQ25CO1FBQ0QsSUFBSSxFQUFFO1lBQ0osR0FBRyxFQUFFLGNBQUksQ0FBQyxFQUFFLEVBQUU7WUFDZCxHQUFHLEVBQUUsY0FBSSxDQUFDLEVB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QyxDQUFDLENBQUMsQ0FBQTtZQUMvQixJQUFBLGdCQUFNLEVBQUMsT0FBTyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQTtRQUNsRCxDQUFDLENBQUMsQ0FBQTtJQUNKLENBQUMsQ0FBQyxDQUFBO0FBQ0osQ0FBQyxDQUFDLENBQUEiLCJuYW1lcyI6W10sInNvdXJjZXMiOlsiRDpcXFByb2plY3RzXFxDYXJkRXZlcnl0aGluZ1xcY2FyZGFsbC1wcm90b3R5cGVcXHNyY1xcX190ZXN0c19fXFxzZXJ2aWNlc1xcbG9jYWwtb3BlcmF0aW9uLXNlcnZpY2Utc2ltcGxlLnRlc3QudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXHJcbiAqIExvY2FsT3BlcmF0aW9uU2VydmljZSDnroDljJbljZXlhYPmtYvor5VcclxuICog5rWL6K+V6auY5oCn6IO95pys5Zyw5pON5L2c5pyN5Yqh55qE5qC45b+D5Yqf6IO9XHJcbiAqL1xyXG5cclxuaW1wb3J0IHsgZGVzY3JpYmUsIHRlc3QsIGV4cGVjdCwgamVzdCwgYmVmb3JlRWFjaCwgYWZ0ZXJFYWNoIH0gZnJvbSAnQGplc3QvZ2xvYmFscydcclxuaW1wb3J0IHsgTG9jYWxPcGVyYXRpb25TZXJ2aWNlT3B0aW1pemVkIH0gZnJvbSAnLi4vLi4vc2VydmljZXMvbG9jYWwtb3BlcmF0aW9uLXNlcnZpY2UnXHJcblxyXG4vLyDliJvlu7rnroDljZXnmoRNb2Nr5bel5YW3XHJcbmNvbnN0IGNyZWF0ZU1vY2tDYXJkID0gKCkgPT4gKHtcclxuICBpZDogY3J5cHRvLnJhbmRvbVVVSUQoKSxcclxuICB0aXRsZTogJ+a1i+ivleWNoeeJhycsXHJcbiAgY29udGVudDogJ+a1i+ivleWGheWuuScsXHJcbiAgZnJvbnRDb250ZW50OiAn5q2j6Z2i5YaF5a65JyxcclxuICBiYWNrQ29udGVudDogJ+iDjOmdouWGheWuuScsXHJcbiAgZm9sZGVySWQ6IGNyeXB0by5yYW5kb21VVUlEKCksXHJcbiAgdGFnczogW10sXHJcbiAgY3JlYXRlZEF0OiBuZXcgRGF0ZSgpLFxyXG4gIHVwZGF0ZWRBdDogbmV3IERhdGUoKSxcclxuICBpc0ZsaXBwZWQ6IGZhbHNlLFxyXG4gIGlzQm9va21hcmtlZDogZmFsc2UsXHJcbiAgY2FyZFR5cGU6ICdub3JtYWwnLFxyXG4gIHByaW9yaXR5OiAnbWVkaXVtJyxcclxuICBzdGF0dXM6ICdhY3RpdmUnXHJcbn0pXHJcblxyXG5jb25zdCBjcmVhdGVNb2NrRm9sZGVyID0gKCkgPT4gKHtcclxuICBpZDogY3J5cHRvLnJhbmRvbVVVSUQoKSxcclxuICBuYW1lOiAn5rWL6K+V5paH5Lu25aS5JyxcclxuICBwYXJlbnRJZDogbnVsbCxcclxuICBjcmVhdGVkQXQ6IG5ldyBEYXRlKCksXHJcbiAgdXBkYXRlZEF0OiBuZXcgRGF0ZSgpXHJcbn0pXHJcblxyXG4vLyDmqKHmi5/mlbDmja7lupNcclxuamVzdC5tb2NrKCcuLi8uLi9zZXJ2aWNlcy9kYXRhYmFzZS11bmlmaWVkJywgKCkgPT4gKHtcclxuICBkYjoge1xyXG4gICAgY2FyZHM6IHtcclxuICAgICAgYWRkOiBqZXN0LmZuKCksXHJcbiAgICAgIGdldDogamVzdC5mbigpLFxyXG4gICAgICB1cGRhdGU6IGplc3QuZm4oKSxcclxuICAgICAgZGVsZXRlOiBqZXN0LmZuKCksXHJcbiAgICAgIHdoZXJlOiBqZXN0LmZuKCksXHJcbiAgICAgIHRvQXJyYXk6IGplc3QuZm4oKSxcclxuICAgICAgYnVsa0FkZDogamVzdC5mbigpLFxyXG4gICAgICBidWxrUHV0OiBqZXN0LmZuKCksXHJcbiAgICAgIGJ1bGtEZWxldGU6IGplc3QuZm4oKVxyXG4gICAgfSxcclxuICAgIGZvbGRlcnM6IHtcclxuICAgICAgYWRkOiBqZXN0LmZuKCksXHJcbiAgICAgIGdldDogamVzdC5mbigpLFxyXG4gICAgICB1cGRhdGU6IGplc3QuZm4oKSxcclxuICAgICAgZGVsZXRlOiBqZXN0LmZuKCksXHJcbiAgICAgIHdoZXJlOiBqZXN0LmZuKCksXHJcbiAgICAgIHRvQXJyYXk6IGplc3QuZm4oKVxyXG4gICAgfSxcclxuICAgIHRhZ3M6IHtcclxuICAgICAgYWRkOiBqZXN0LmZuKCksXHJcbiAgICAgIGdldDogamVzdC5mbigpLFxyXG4gICAgICB1cGRhdGU6IGplc3QuZm4oKSxcclxuICAgICAgZGVsZXRlOiBqZXN0LmZuKCksXHJcbiAgICAgIHdoZXJlOiBqZXN0LmZuKCksXHJcbiAgICAgIHRvQXJyYXk6IGplc3QuZm4oKVxyXG4gICAgfSxcclxuICAgIGNhcmRUYWdzOiB7XHJcbiAgICAgIGFkZDogamVzdC5mbigpLFxyXG4gICAgICBnZXQ6IGplc3QuZm4oKSxcclxuICAgICAgdXBkYXRlOiBqZXN0LmZuKCksXHJcbiAgICAgIGRlbGV0ZTogamVzdC5mbigpLFxyXG4gICAgICB3aGVyZTogamVzdC5mbigpLFxyXG4gICAgICB0b0FycmF5OiBqZXN0LmZuKClcclxuICAgIH0sXHJcbiAgICBzeW5jT3BlcmF0aW9uczoge1xyXG4gICAgICBhZGQ6IGplc3QuZm4oKSxcclxuICAgICAgZ2V0OiBqZXN0LmZuKCksXHJcbiAgICAgIHVwZGF0ZTogamVzdC5mbigpLFxyXG4gICAgICBkZWxldGU6IGplc3QuZm4oKSxcclxuICAgICAgd2hlcmU6IGplc3QuZm4oKSxcclxuICAgICAgdG9BcnJheTogamVzdC5mbigpXHJcbiAgICB9XHJcbiAgfVxyXG59KSlcclxuXHJcbmRlc2NyaWJlKCdMb2NhbE9wZXJhdGlvblNlcnZpY2VPcHRpbWl6ZWQnLCAoKSA9PiB7XHJcbiAgbGV0IHNlcnZpY2U6IExvY2FsT3BlcmF0aW9uU2VydmljZU9wdGltaXplZFxyXG5cclxuICBiZWZvcmVFYWNoKCgpID0+IHtcclxuICAgIC8vIOmHjee9ruacjeWKoeWunuS+i1xyXG4gICAgc2VydmljZSA9IG5ldyBMb2NhbE9wZXJhdGlvblNlcnZpY2VPcHRpbWl6ZWQoKVxyXG4gICAgXHJcbiAgICAvLyDmuIXnkIbmiYDmnInmqKHmi59cclxuICAgIGplc3QuY2xlYXJBbGxNb2NrcygpXHJcbiAgfSlcclxuXHJcbiAgYWZ0ZXJFYWNoKCgpID0+IHtcclxuICAgIC8vIOa4heeQhuacjeWKoVxyXG4gICAgaWYgKHNlcnZpY2UuZGVzdHJveSkge1xyXG4gICAgICBzZXJ2aWNlLmRlc3Ryb3koKVxyXG4gICAgfVxyXG4gIH0pXHJcblxyXG4gIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuICAvLyDliJ3lp4vljJbmtYvor5VcclxuICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcblxyXG4gIGRlc2NyaWJlKCfliJ3lp4vljJYnLCAoKSA9PiB7XHJcbiAgICB0ZXN0KCflupTor6XmraPnoa7liJ3lp4vljJbmnI3liqEnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGF3YWl0IHNlcnZpY2UuaW5pdGlhbGl6ZSgpXHJcbiAgICAgIGV4cGVjdChzZXJ2aWNlKS50b0JlSW5zdGFuY2VPZihMb2NhbE9wZXJhdGlvblNlcnZpY2VPcHRpbWl6ZWQpXHJcbiAgICB9KVxyXG5cclxuICAgIHRlc3QoJ+W6lOivpeWkhOeQhuWIneWni+WMlumUmeivrycsIGFzeW5jICgpID0+IHtcclxuICAgICAgLy8g5qih5ouf5Yid5aeL5YyW6ZSZ6K+vXHJcbiAgICAgIGplc3Quc3B5T24oc2VydmljZSwgJ2luaXRpYWxpemUnIGFzIGFueSkubW9ja1JlamVjdGVkVmFsdWUobmV3IEVycm9yKCfliJ3lp4vljJblpLHotKUnKSlcclxuICAgICAgXHJcbiAgICAgIGF3YWl0IGV4cGVjdChzZXJ2aWNlLmluaXRpYWxpemUoKSkucmVqZWN0cy50b1Rocm93KCfliJ3lp4vljJblpLHotKUnKVxyXG4gICAgfSlcclxuICB9KVxyXG5cclxuICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbiAgLy8g5Y2h54mH5pON5L2c5rWL6K+VXHJcbiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG5cclxuICBkZXNjcmliZSgn5Y2h54mH5pON5L2cJywgKCkgPT4ge1xyXG4gICAgdGVzdCgn5bqU6K+l5oiQ5Yqf5Yib5bu65Y2h54mHJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBjb25zdCBjYXJkRGF0YSA9IGNyZWF0ZU1vY2tDYXJkKClcclxuICAgICAgY29uc3QgbW9ja1Jlc3VsdCA9IHsgLi4uY2FyZERhdGEsIGlkOiBjcnlwdG8ucmFuZG9tVVVJRCgpIH1cclxuICAgICAgXHJcbiAgICAgIC8vIOaooeaLn+aVsOaNruW6k+i/lOWbnlxyXG4gICAgICBjb25zdCB7IGRiIH0gPSByZXF1aXJlKCcuLi8uLi9zZXJ2aWNlcy9kYXRhYmFzZS11bmlmaWVkJylcclxuICAgICAgZGIuY2FyZHMuYWRkLm1vY2tSZXNvbHZlZFZhbHVlKG1vY2tSZXN1bHQuaWQpXHJcbiAgICAgIFxyXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBzZXJ2aWNlLmNyZWF0ZUNhcmQoY2FyZERhdGEpXHJcbiAgICAgIFxyXG4gICAgICBleHBlY3QocmVzdWx0LnN1Y2Nlc3MpLnRvQmUodHJ1ZSlcclxuICAgICAgZXhwZWN0KHJlc3VsdC5pZCkudG9CZURlZmluZWQoKVxyXG4gICAgICBleHBlY3QoZGIuY2FyZHMuYWRkKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChjYXJkRGF0YSlcclxuICAgIH0pXHJcblxyXG4gICAgdGVzdCgn5bqU6K+l5oiQ5Yqf6K+75Y+W5Y2h54mHJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBjb25zdCBjYXJkSWQgPSBjcnlwdG8ucmFuZG9tVVVJRCgpXHJcbiAgICAgIGNvbnN0IG1vY2tDYXJkID0gY3JlYXRlTW9ja0NhcmQoKVxyXG4gICAgICBcclxuICAgICAgLy8g5qih5ouf5pWw5o2u5bqT6L+U5ZueXHJcbiAgICAgIGNvbnN0IHsgZGIgfSA9IHJlcXVpcmUoJy4uLy4uL3NlcnZpY2VzL2RhdGFiYXNlLXVuaWZpZWQnKVxyXG4gICAgICBkYi5jYXJkcy5nZXQubW9ja1Jlc29sdmVkVmFsdWUobW9ja0NhcmQpXHJcbiAgICAgIFxyXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBzZXJ2aWNlLmdldENhcmQoY2FyZElkKVxyXG4gICAgICBcclxuICAgICAgZXhwZWN0KHJlc3VsdCkudG9FcXVhbChtb2NrQ2FyZClcclxuICAgICAgZXhwZWN0KGRiLmNhcmRzLmdldCkudG9IYXZlQmVlbkNhbGxlZFdpdGgoY2FyZElkKVxyXG4gICAgfSlcclxuXHJcbiAgICB0ZXN0KCflupTor6XmiJDlip/mm7TmlrDljaHniYcnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IGNhcmRJZCA9IGNyeXB0by5yYW5kb21VVUlEKClcclxuICAgICAgY29uc3QgdXBkYXRlRGF0YSA9IHsgdGl0bGU6ICfmm7TmlrDlkI7nmoTmoIfpopgnIH1cclxuICAgICAgXHJcbiAgICAgIC8vIOaooeaLn+aVsOaNruW6k+i/lOWbnlxyXG4gICAgICBjb25zdCB7IGRiIH0gPSByZXF1aXJlKCcuLi8uLi9zZXJ2aWNlcy9kYXRhYmFzZS11bmlmaWVkJylcclxuICAgICAgZGIuY2FyZHMudXBkYXRlLm1vY2tSZXNvbHZlZFZhbHVlKDEpXHJcbiAgICAgIFxyXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBzZXJ2aWNlLnVwZGF0ZUNhcmQoY2FyZElkLCB1cGRhdGVEYXRhKVxyXG4gICAgICBcclxuICAgICAgZXhwZWN0KHJlc3VsdC5zdWNjZXNzKS50b0JlKHRydWUpXHJcbiAgICAgIGV4cGVjdChkYi5jYXJkcy51cGRhdGUpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKGNhcmRJZCwgdXBkYXRlRGF0YSlcclxuICAgIH0pXHJcblxyXG4gICAgdGVzdCgn5bqU6K+l5oiQ5Yqf5Yig6Zmk5Y2h54mHJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBjb25zdCBjYXJkSWQgPSBjcnlwdG8ucmFuZG9tVVVJRCgpXHJcbiAgICAgIFxyXG4gICAgICAvLyDmqKHmi5/mlbDmja7lupPov5Tlm55cclxuICAgICAgY29uc3QgeyBkYiB9ID0gcmVxdWlyZSgnLi4vLi4vc2VydmljZXMvZGF0YWJhc2UtdW5pZmllZCcpXHJcbiAgICAgIGRiLmNhcmRzLmRlbGV0ZS5tb2NrUmVzb2x2ZWRWYWx1ZSgxKVxyXG4gICAgICBcclxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgc2VydmljZS5kZWxldGVDYXJkKGNhcmRJZClcclxuICAgICAgXHJcbiAgICAgIGV4cGVjdChyZXN1bHQuc3VjY2VzcykudG9CZSh0cnVlKVxyXG4gICAgICBleHBlY3QoZGIuY2FyZHMuZGVsZXRlKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChjYXJkSWQpXHJcbiAgICB9KVxyXG5cclxuICAgIHRlc3QoJ+W6lOivpeWkhOeQhuaVsOaNruW6k+aTjeS9nOmUmeivrycsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3QgY2FyZERhdGEgPSBjcmVhdGVNb2NrQ2FyZCgpXHJcbiAgICAgIFxyXG4gICAgICAvLyDmqKHmi5/mlbDmja7lupPplJnor69cclxuICAgICAgY29uc3QgeyBkYiB9ID0gcmVxdWlyZSgnLi4vLi4vc2VydmljZXMvZGF0YWJhc2UtdW5pZmllZCcpXHJcbiAgICAgIGRiLmNhcmRzLmFkZC5tb2NrUmVqZWN0ZWRWYWx1ZShuZXcgRXJyb3IoJ+aVsOaNruW6k+mUmeivrycpKVxyXG4gICAgICBcclxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgc2VydmljZS5jcmVhdGVDYXJkKGNhcmREYXRhKVxyXG4gICAgICBcclxuICAgICAgZXhwZWN0KHJlc3VsdC5zdWNjZXNzKS50b0JlKGZhbHNlKVxyXG4gICAgICBleHBlY3QocmVzdWx0LmVycm9yKS50b0JlKCfmlbDmja7lupPplJnor68nKVxyXG4gICAgfSlcclxuICB9KVxyXG5cclxuICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbiAgLy8g5paH5Lu25aS55pON5L2c5rWL6K+VXHJcbiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG5cclxuICBkZXNjcmliZSgn5paH5Lu25aS55pON5L2cJywgKCkgPT4ge1xyXG4gICAgdGVzdCgn5bqU6K+l5oiQ5Yqf5Yib5bu65paH5Lu25aS5JywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBjb25zdCBmb2xkZXJEYXRhID0gY3JlYXRlTW9ja0ZvbGRlcigpXHJcbiAgICAgIGNvbnN0IG1vY2tSZXN1bHQgPSB7IC4uLmZvbGRlckRhdGEsIGlkOiBjcnlwdG8ucmFuZG9tVVVJRCgpIH1cclxuICAgICAgXHJcbiAgICAgIC8vIOaooeaLn+aVsOaNruW6k+i/lOWbnlxyXG4gICAgICBjb25zdCB7IGRiIH0gPSByZXF1aXJlKCcuLi8uLi9zZXJ2aWNlcy9kYXRhYmFzZS11bmlmaWVkJylcclxuICAgICAgZGIuZm9sZGVycy5hZGQubW9ja1Jlc29sdmVkVmFsdWUobW9ja1Jlc3VsdC5pZClcclxuICAgICAgXHJcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHNlcnZpY2UuY3JlYXRlRm9sZGVyKGZvbGRlckRhdGEpXHJcbiAgICAgIFxyXG4gICAgICBleHBlY3QocmVzdWx0LnN1Y2Nlc3MpLnRvQmUodHJ1ZSlcclxuICAgICAgZXhwZWN0KHJlc3VsdC5pZCkudG9CZURlZmluZWQoKVxyXG4gICAgICBleHBlY3QoZGIuZm9sZGVycy5hZGQpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKGZvbGRlckRhdGEpXHJcbiAgICB9KVxyXG5cclxuICAgIHRlc3QoJ+W6lOivpeaIkOWKn+iOt+WPluaWh+S7tuWkuScsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3QgZm9sZGVySWQgPSBjcnlwdG8ucmFuZG9tVVVJRCgpXHJcbiAgICAgIGNvbnN0IG1vY2tGb2xkZXIgPSBjcmVhdGVNb2NrRm9sZGVyKClcclxuICAgICAgXHJcbiAgICAgIC8vIOaooeaLn+aVsOaNruW6k+i/lOWbnlxyXG4gICAgICBjb25zdCB7IGRiIH0gPSByZXF1aXJlKCcuLi8uLi9zZXJ2aWNlcy9kYXRhYmFzZS11bmlmaWVkJylcclxuICAgICAgZGIuZm9sZGVycy5nZXQubW9ja1Jlc29sdmVkVmFsdWUobW9ja0ZvbGRlcilcclxuICAgICAgXHJcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHNlcnZpY2UuZ2V0Rm9sZGVyKGZvbGRlcklkKVxyXG4gICAgICBcclxuICAgICAgZXhwZWN0KHJlc3VsdCkudG9FcXVhbChtb2NrRm9sZGVyKVxyXG4gICAgICBleHBlY3QoZGIuZm9sZGVycy5nZXQpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKGZvbGRlcklkKVxyXG4gICAgfSlcclxuICB9KVxyXG5cclxuICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbiAgLy8g5om56YeP5pON5L2c5rWL6K+VXHJcbiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG5cclxuICBkZXNjcmliZSgn5om56YeP5pON5L2cJywgKCkgPT4ge1xyXG4gICAgdGVzdCgn5bqU6K+l5oiQ5Yqf5om56YeP5o+S5YWl5Y2h54mHJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBjb25zdCBjYXJkcyA9IEFycmF5LmZyb20oeyBsZW5ndGg6IDEwIH0sICgpID0+IGNyZWF0ZU1vY2tDYXJkKCkpXHJcbiAgICAgIFxyXG4gICAgICAvLyDmqKHmi5/mlbDmja7lupPov5Tlm55cclxuICAgICAgY29uc3QgeyBkYiB9ID0gcmVxdWlyZSgnLi4vLi4vc2VydmljZXMvZGF0YWJhc2UtdW5pZmllZCcpXHJcbiAgICAgIGRiLmNhcmRzLmJ1bGtBZGQubW9ja1Jlc29sdmVkVmFsdWUoY2FyZHMubWFwKGMgPT4gYy5pZCkpXHJcbiAgICAgIFxyXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBzZXJ2aWNlLmJ1bGtDcmVhdGVDYXJkcyhjYXJkcylcclxuICAgICAgXHJcbiAgICAgIGV4cGVjdChyZXN1bHQuc3VjY2VzcykudG9CZSh0cnVlKVxyXG4gICAgICBleHBlY3QocmVzdWx0LmNvdW50KS50b0JlKDEwKVxyXG4gICAgICBleHBlY3QoZGIuY2FyZHMuYnVsa0FkZCkudG9IYXZlQmVlbkNhbGxlZFdpdGgoY2FyZHMpXHJcbiAgICB9KVxyXG5cclxuICAgIHRlc3QoJ+W6lOivpeaIkOWKn+aJuemHj+abtOaWsOWNoeeJhycsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3QgdXBkYXRlcyA9IEFycmF5LmZyb20oeyBsZW5ndGg6IDUgfSwgKF8sIGkpID0+ICh7XHJcbiAgICAgICAgaWQ6IGNyeXB0by5yYW5kb21VVUlEKCksXHJcbiAgICAgICAgY2hhbmdlczogeyB0aXRsZTogYOabtOaWsOagh+mimCAke2l9YCB9XHJcbiAgICAgIH0pKVxyXG4gICAgICBcclxuICAgICAgLy8g5qih5ouf5pWw5o2u5bqT6L+U5ZueXHJcbiAgICAgIGNvbnN0IHsgZGIgfSA9IHJlcXVpcmUoJy4uLy4uL3NlcnZpY2VzL2RhdGFiYXNlLXVuaWZpZWQnKVxyXG4gICAgICBkYi5jYXJkcy5idWxrUHV0Lm1vY2tSZXNvbHZlZFZhbHVlKHVwZGF0ZXMubGVuZ3RoKVxyXG4gICAgICBcclxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgc2VydmljZS5idWxrVXBkYXRlQ2FyZHModXBkYXRlcylcclxuICAgICAgXHJcbiAgICAgIGV4cGVjdChyZXN1bHQuc3VjY2VzcykudG9CZSh0cnVlKVxyXG4gICAgICBleHBlY3QocmVzdWx0LmNvdW50KS50b0JlKDUpXHJcbiAgICAgIGV4cGVjdChkYi5jYXJkcy5idWxrUHV0KS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcclxuICAgICAgICB1cGRhdGVzLm1hcCh1ID0+ICh7IC4uLmNyZWF0ZU1vY2tDYXJkKCksIC4uLnUuY2hhbmdlcywgaWQ6IHUuaWQgfSkpXHJcbiAgICAgIClcclxuICAgIH0pXHJcbiAgfSlcclxuXHJcbiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG4gIC8vIOafpeivouaTjeS9nOa1i+ivlVxyXG4gIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuXHJcbiAgZGVzY3JpYmUoJ+afpeivouaTjeS9nCcsICgpID0+IHtcclxuICAgIHRlc3QoJ+W6lOivpeaIkOWKn+afpeivouWNoeeJh+WIl+ihqCcsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3QgbW9ja0NhcmRzID0gQXJyYXkuZnJvbSh7IGxlbmd0aDogNSB9LCAoKSA9PiBjcmVhdGVNb2NrQ2FyZCgpKVxyXG4gICAgICBcclxuICAgICAgLy8g5qih5ouf5pWw5o2u5bqT6L+U5ZueXHJcbiAgICAgIGNvbnN0IHsgZGIgfSA9IHJlcXVpcmUoJy4uLy4uL3NlcnZpY2VzL2RhdGFiYXNlLXVuaWZpZWQnKVxyXG4gICAgICBkYi5jYXJkcy50b0FycmF5Lm1vY2tSZXNvbHZlZFZhbHVlKG1vY2tDYXJkcylcclxuICAgICAgXHJcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHNlcnZpY2UuZ2V0QWxsQ2FyZHMoKVxyXG4gICAgICBcclxuICAgICAgZXhwZWN0KHJlc3VsdCkudG9FcXVhbChtb2NrQ2FyZHMpXHJcbiAgICAgIGV4cGVjdChkYi5jYXJkcy50b0FycmF5KS50b0hhdmVCZWVuQ2FsbGVkKClcclxuICAgIH0pXHJcblxyXG4gICAgdGVzdCgn5bqU6K+l5pSv5oyB5p2h5Lu25p+l6K+iJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBjb25zdCBmb2xkZXJJZCA9IGNyeXB0by5yYW5kb21VVUlEKClcclxuICAgICAgY29uc3QgbW9ja0NhcmRzID0gQXJyYXkuZnJvbSh7IGxlbmd0aDogMyB9LCAoKSA9PiAoe1xyXG4gICAgICAgIC4uLmNyZWF0ZU1vY2tDYXJkKCksXHJcbiAgICAgICAgZm9sZGVySWRcclxuICAgICAgfSkpXHJcbiAgICAgIFxyXG4gICAgICAvLyDmqKHmi5/mlbDmja7lupPov5Tlm55cclxuICAgICAgY29uc3QgeyBkYiB9ID0gcmVxdWlyZSgnLi4vLi4vc2VydmljZXMvZGF0YWJhc2UtdW5pZmllZCcpXHJcbiAgICAgIGNvbnN0IHdoZXJlTW9jayA9IHtcclxuICAgICAgICBlcXVhbHM6IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZShtb2NrQ2FyZHMpXHJcbiAgICAgIH1cclxuICAgICAgZGIuY2FyZHMud2hlcmUubW9ja1JldHVyblZhbHVlKHdoZXJlTW9jaylcclxuICAgICAgXHJcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHNlcnZpY2UuZ2V0Q2FyZHNCeUZvbGRlcihmb2xkZXJJZClcclxuICAgICAgXHJcbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvRXF1YWwobW9ja0NhcmRzKVxyXG4gICAgICBleHBlY3QoZGIuY2FyZHMud2hlcmUpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKCdmb2xkZXJJZCcpXHJcbiAgICAgIGV4cGVjdCh3aGVyZU1vY2suZXF1YWxzKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChmb2xkZXJJZClcclxuICAgIH0pXHJcbiAgfSlcclxuXHJcbiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG4gIC8vIOWQjOatpeaTjeS9nOa1i+ivlVxyXG4gIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuXHJcbiAgZGVzY3JpYmUoJ+WQjOatpeaTjeS9nCcsICgpID0+IHtcclxuICAgIHRlc3QoJ+W6lOivpeato+ehruiusOW9leWQjOatpeaTjeS9nCcsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3Qgb3BlcmF0aW9uID0ge1xyXG4gICAgICAgIHR5cGU6ICdjcmVhdGUnIGFzIGNvbnN0LFxyXG4gICAgICAgIGVudGl0eVR5cGU6ICdjYXJkJyBhcyBjb25zdCxcclxuICAgICAgICBlbnRpdHlJZDogY3J5cHRvLnJhbmRvbVVVSUQoKSxcclxuICAgICAgICBkYXRhOiBjcmVhdGVNb2NrQ2FyZCgpLFxyXG4gICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKVxyXG4gICAgICB9XHJcbiAgICAgIFxyXG4gICAgICAvLyDmqKHmi5/mlbDmja7lupPov5Tlm55cclxuICAgICAgY29uc3QgeyBkYiB9ID0gcmVxdWlyZSgnLi4vLi4vc2VydmljZXMvZGF0YWJhc2UtdW5pZmllZCcpXHJcbiAgICAgIGRiLnN5bmNPcGVyYXRpb25zLmFkZC5tb2NrUmVzb2x2ZWRWYWx1ZShjcnlwdG8ucmFuZG9tVVVJRCgpKVxyXG4gICAgICBcclxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgc2VydmljZS5yZWNvcmRTeW5jT3BlcmF0aW9uKG9wZXJhdGlvbilcclxuICAgICAgXHJcbiAgICAgIGV4cGVjdChyZXN1bHQuc3VjY2VzcykudG9CZSh0cnVlKVxyXG4gICAgICBleHBlY3QoZGIuc3luY09wZXJhdGlvbnMuYWRkKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChvcGVyYXRpb24pXHJcbiAgICB9KVxyXG5cclxuICAgIHRlc3QoJ+W6lOivpeiOt+WPluW+heWQjOatpeaTjeS9nCcsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3QgbW9ja09wZXJhdGlvbnMgPSBBcnJheS5mcm9tKHsgbGVuZ3RoOiAzIH0sICgpID0+ICh7XHJcbiAgICAgICAgaWQ6IGNyeXB0by5yYW5kb21VVUlEKCksXHJcbiAgICAgICAgdHlwZTogJ2NyZWF0ZScsXHJcbiAgICAgICAgZW50aXR5VHlwZTogJ2NhcmQnLFxyXG4gICAgICAgIGVudGl0eUlkOiBjcnlwdG8ucmFuZG9tVVVJRCgpLFxyXG4gICAgICAgIGRhdGE6IGNyZWF0ZU1vY2tDYXJkKCksXHJcbiAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpXHJcbiAgICAgIH0pKVxyXG4gICAgICBcclxuICAgICAgLy8g5qih5ouf5pWw5o2u5bqT6L+U5ZueXHJcbiAgICAgIGNvbnN0IHsgZGIgfSA9IHJlcXVpcmUoJy4uLy4uL3NlcnZpY2VzL2RhdGFiYXNlLXVuaWZpZWQnKVxyXG4gICAgICBkYi5zeW5jT3BlcmF0aW9ucy50b0FycmF5Lm1vY2tSZXNvbHZlZFZhbHVlKG1vY2tPcGVyYXRpb25zKVxyXG4gICAgICBcclxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgc2VydmljZS5nZXRQZW5kaW5nU3luY09wZXJhdGlvbnMoKVxyXG4gICAgICBcclxuICAgICAgZXhwZWN0KHJlc3VsdCkudG9FcXVhbChtb2NrT3BlcmF0aW9ucylcclxuICAgICAgZXhwZWN0KGRiLnN5bmNPcGVyYXRpb25zLnRvQXJyYXkpLnRvSGF2ZUJlZW5DYWxsZWQoKVxyXG4gICAgfSlcclxuICB9KVxyXG5cclxuICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbiAgLy8g5oCn6IO955uR5o6n5rWL6K+VXHJcbiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG5cclxuICBkZXNjcmliZSgn5oCn6IO955uR5o6nJywgKCkgPT4ge1xyXG4gICAgdGVzdCgn5bqU6K+l6K6w5b2V5pON5L2c6ICX5pe2JywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBjb25zdCBjYXJkRGF0YSA9IGNyZWF0ZU1vY2tDYXJkKClcclxuICAgICAgY29uc3QgbW9ja1Jlc3VsdCA9IHsgLi4uY2FyZERhdGEsIGlkOiBjcnlwdG8ucmFuZG9tVVVJRCgpIH1cclxuICAgICAgXHJcbiAgICAgIC8vIOaooeaLn+aVsOaNruW6k+i/lOWbnlxyXG4gICAgICBjb25zdCB7IGRiIH0gPSByZXF1aXJlKCcuLi8uLi9zZXJ2aWNlcy9kYXRhYmFzZS11bmlmaWVkJylcclxuICAgICAgZGIuY2FyZHMuYWRkLm1vY2tSZXNvbHZlZFZhbHVlKG1vY2tSZXN1bHQuaWQpXHJcbiAgICAgIFxyXG4gICAgICAvLyDnm5HmjqfmgKfog71cclxuICAgICAgY29uc3Qgc3RhcnRUaW1lID0gcGVyZm9ybWFuY2Uubm93KClcclxuICAgICAgYXdhaXQgc2VydmljZS5jcmVhdGVDYXJkKGNhcmREYXRhKVxyXG4gICAgICBjb25zdCBlbmRUaW1lID0gcGVyZm9ybWFuY2Uubm93KClcclxuICAgICAgXHJcbiAgICAgIGV4cGVjdChlbmRUaW1lIC0gc3RhcnRUaW1lKS50b0JlR3JlYXRlclRoYW4oMClcclxuICAgIH0pXHJcblxyXG4gICAgdGVzdCgn5bqU6K+l5aSE55CG5aSn6YeP5pWw5o2u5pON5L2cJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBjb25zdCBsYXJnZURhdGFzZXQgPSBBcnJheS5mcm9tKHsgbGVuZ3RoOiAxMDAgfSwgKCkgPT4gY3JlYXRlTW9ja0NhcmQoKSlcclxuICAgICAgXHJcbiAgICAgIC8vIOaooeaLn+aVsOaNruW6k+i/lOWbnlxyXG4gICAgICBjb25zdCB7IGRiIH0gPSByZXF1aXJlKCcuLi8uLi9zZXJ2aWNlcy9kYXRhYmFzZS11bmlmaWVkJylcclxuICAgICAgZGIuY2FyZHMuYnVsa0FkZC5tb2NrUmVzb2x2ZWRWYWx1ZShsYXJnZURhdGFzZXQubWFwKGMgPT4gYy5pZCkpXHJcbiAgICAgIFxyXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBzZXJ2aWNlLmJ1bGtDcmVhdGVDYXJkcyhsYXJnZURhdGFzZXQpXHJcbiAgICAgIFxyXG4gICAgICBleHBlY3QocmVzdWx0LnN1Y2Nlc3MpLnRvQmUodHJ1ZSlcclxuICAgICAgZXhwZWN0KHJlc3VsdC5jb3VudCkudG9CZSgxMDApXHJcbiAgICB9KVxyXG4gIH0pXHJcblxyXG4gIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuICAvLyDplJnor6/lpITnkIbmtYvor5VcclxuICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcblxyXG4gIGRlc2NyaWJlKCfplJnor6/lpITnkIYnLCAoKSA9PiB7XHJcbiAgICB0ZXN0KCflupTor6XmraPnoa7lpITnkIbml6DmlYjovpPlhaUnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIC8vIOa1i+ivleepuuaVsOaNrlxyXG4gICAgICBjb25zdCByZXN1bHQxID0gYXdhaXQgc2VydmljZS5jcmVhdGVDYXJkKHt9IGFzIGFueSlcclxuICAgICAgZXhwZWN0KHJlc3VsdDEuc3VjY2VzcykudG9CZShmYWxzZSlcclxuICAgICAgXHJcbiAgICAgIC8vIOa1i+ivleaXoOaViElEXHJcbiAgICAgIGNvbnN0IHJlc3VsdDIgPSBhd2FpdCBzZXJ2aWNlLmdldENhcmQoJycpXHJcbiAgICAgIGV4cGVjdChyZXN1bHQyKS50b0JlTnVsbCgpXHJcbiAgICAgIFxyXG4gICAgICAvLyDmtYvor5Xml6DmlYjmm7TmlrBcclxuICAgICAgY29uc3QgcmVzdWx0MyA9IGF3YWl0IHNlcnZpY2UudXBkYXRlQ2FyZCgnJywge30pXHJcbiAgICAgIGV4cGVjdChyZXN1bHQzLnN1Y2Nlc3MpLnRvQmUoZmFsc2UpXHJcbiAgICB9KVxyXG5cclxuICAgIHRlc3QoJ+W6lOivpeWkhOeQhuW5tuWPkeaTjeS9nCcsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3QgY2FyZERhdGEgPSBjcmVhdGVNb2NrQ2FyZCgpXHJcbiAgICAgIGNvbnN0IG1vY2tSZXN1bHQgPSB7IC4uLmNhcmREYXRhLCBpZDogY3J5cHRvLnJhbmRvbVVVSUQoKSB9XHJcbiAgICAgIFxyXG4gICAgICAvLyDmqKHmi5/mlbDmja7lupPov5Tlm55cclxuICAgICAgY29uc3QgeyBkYiB9ID0gcmVxdWlyZSgnLi4vLi4vc2VydmljZXMvZGF0YWJhc2UtdW5pZmllZCcpXHJcbiAgICAgIGRiLmNhcmRzLmFkZC5tb2NrUmVzb2x2ZWRWYWx1ZShtb2NrUmVzdWx0LmlkKVxyXG4gICAgICBcclxuICAgICAgLy8g5bm25Y+R5Yib5bu65aSa5Liq5Y2h54mHXHJcbiAgICAgIGNvbnN0IHByb21pc2VzID0gQXJyYXkuZnJvbSh7IGxlbmd0aDogNSB9LCAoKSA9PiBzZXJ2aWNlLmNyZWF0ZUNhcmQoY2FyZERhdGEpKVxyXG4gICAgICBjb25zdCByZXN1bHRzID0gYXdhaXQgUHJvbWlzZS5hbGwocHJvbWlzZXMpXHJcbiAgICAgIFxyXG4gICAgICBleHBlY3QocmVzdWx0cykudG9IYXZlTGVuZ3RoKDUpXHJcbiAgICAgIGV4cGVjdChyZXN1bHRzLmV2ZXJ5KHIgPT4gci5zdWNjZXNzKSkudG9CZSh0cnVlKVxyXG4gICAgfSlcclxuICB9KVxyXG59KSJdLCJ2ZXJzaW9uIjozfQ==