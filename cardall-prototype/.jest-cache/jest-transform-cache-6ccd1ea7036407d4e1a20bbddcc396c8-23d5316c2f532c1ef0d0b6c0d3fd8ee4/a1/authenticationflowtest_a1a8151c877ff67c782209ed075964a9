a218551578b63ed534ecee7190696da8
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
// 认证流程端到端测试
const test_1 = require("@playwright/test");
test_1.test.describe('Authentication Flow', () => {
    test_1.test.beforeEach(async ({ page }) => {
        // 清空本地存储
        await page.goto('/');
        await page.evaluate(() => {
            localStorage.clear();
            sessionStorage.clear();
        });
    });
    (0, test_1.test)('应该能够完成完整的注册流程', async ({ page }) => {
        // 导航到注册页面
        await page.goto('/signup');
        // 填写注册表单
        await page.fill('[data-testid="email-input"]', 'test@example.com');
        await page.fill('[data-testid="password-input"]', 'password123');
        await page.fill('[data-testid="confirm-password-input"]', 'password123');
        // 点击注册按钮
        await page.click('[data-testid="signup-button"]');
        // 等待注册成功
        await page.waitForURL('/dashboard');
        // 验证用户已登录
        const userEmail = await page.locator('[data-testid="user-email"]').textContent();
        (0, test_1.expect)(userEmail).toBe('test@example.com');
        // 验证本地存储中有认证信息
        const accessToken = await page.evaluate(() => localStorage.getItem('access_token'));
        (0, test_1.expect)(accessToken).toBeDefined();
    });
    (0, test_1.test)('应该能够完成完整的登录流程', async ({ page }) => {
        // 导航到登录页面
        await page.goto('/login');
        // 填写登录表单
        await page.fill('[data-testid="email-input"]', 'test@example.com');
        await page.fill('[data-testid="password-input"]', 'password123');
        // 点击登录按钮
        await page.click('[data-testid="login-button"]');
        // 等待登录成功
        await page.waitForURL('/dashboard');
        // 验证用户已登录
        const welcomeMessage = await page.locator('[data-testid="welcome-message"]').textContent();
        (0, test_1.expect)(welcomeMessage).toContain('Welcome back');
        // 验证用户信息显示正确
        const userEmail = await page.locator('[data-testid="user-email"]').textContent();
        (0, test_1.expect)(userEmail).toBe('test@example.com');
    });
    (0, test_1.test)('应该能够处理注册验证错误', async ({ page }) => {
        await page.goto('/signup');
        // 尝试使用无效邮箱注册
        await page.fill('[data-testid="email-input"]', 'invalid-email');
        await page.fill('[data-testid="password-input"]', 'password123');
        await page.fill('[data-testid="confirm-password-input"]', 'password123');
        await page.click('[data-testid="signup-button"]');
        // 验证错误消息显示
        const errorMessage = await page.locator('[data-testid="error-message"]').textContent();
        (0, test_1.expect)(errorMessage).toContain('Invalid email format');
    });
    (0, test_1.test)('应该能够处理密码不匹配错误', async ({ page }) => {
        await page.goto('/signup');
        // 填写不匹配的密码
        await page.fill('[data-testid="email-input"]', 'test@example.com');
        await page.fill('[data-testid="password-input"]', 'password123');
        await page.fill('[data-testid="confirm-password-input"]', 'differentpassword');
        await page.click('[data-testid="signup-button"]');
        // 验证错误消息显示
        const errorMessage = await page.locator('[data-testid="error-message"]').textContent();
        (0, test_1.expect)(errorMessage).toContain('Passwords do not match');
    });
    (0, test_1.test)('应该能够处理登录认证错误', async ({ page }) => {
        await page.goto('/login');
        // 使用错误的凭据登录
        await page.fill('[data-testid="email-input"]', 'test@example.com');
        await page.fill('[data-testid="password-input"]', 'wrongpassword');
        await page.click('[data-testid="login-button"]');
        // 验证错误消息显示
        const errorMessage = await page.locator('[data-testid="error-message"]').textContent();
        (0, test_1.expect)(errorMessage).toContain('Invalid credentials');
    });
    (0, test_1.test)('应该能够处理会话过期', async ({ page }) => {
        // 首先登录
        await page.goto('/login');
        await page.fill('[data-testid="email-input"]', 'test@example.com');
        await page.fill('[data-testid="password-input"]', 'password123');
        await page.click('[data-testid="login-button"]');
        await page.waitForURL('/dashboard');
        // 模拟会话过期
        await page.evaluate(() => {
            localStorage.removeItem('access_token');
        });
        // 尝试访问受保护的页面
        await page.goto('/dashboard');
        // 验证被重定向到登录页面
        await page.waitForURL('/login');
        // 验证会话过期消息
        const sessionMessage = await page.locator('[data-testid="session-message"]').textContent();
        (0, test_1.expect)(sessionMessage).toContain('Session expired');
    });
    (0, test_1.test)('应该能够记住登录状态', async ({ page }) => {
        // 登录并勾选"记住我"
        await page.goto('/login');
        await page.fill('[data-testid="email-input"]', 'test@example.com');
        await page.fill('[data-testid="password-input"]', 'password123');
        await page.check('[data-testid="remember-me"]');
        await page.click('[data-testid="login-button"]');
        await page.waitForURL('/dashboard');
        // 刷新页面
        await page.reload();
        // 验证用户仍然登录
        const welcomeMessage = await page.locator('[data-testid="welcome-message"]').textContent();
        (0, test_1.expect)(welcomeMessage).toContain('Welcome back');
    });
    (0, test_1.test)('应该能够安全登出', async ({ page }) => {
        // 先登录
        await page.goto('/login');
        await page.fill('[data-testid="email-input"]', 'test@example.com');
        await page.fill('[data-testid="password-input"]', 'password123');
        await page.click('[data-testid="login-button"]');
        await page.waitForURL('/dashboard');
        // 点击登出按钮
        await page.click('[data-testid="logout-button"]');
        // 等待登出完成
        await page.waitForURL('/login');
        // 验证认证信息已清除
        const accessToken = await page.evaluate(() => localStorage.getItem('access_token'));
        (0, test_1.expect)(accessToken).toBeNull();
        // 验证无法访问受保护页面
        await page.goto('/dashboard');
        await page.waitForURL('/login');
    });
    (0, test_1.test)('应该能够处理社交登录', async ({ page }) => {
        await page.goto('/login');
        // 点击Google登录按钮
        await page.click('[data-testid="google-login"]');
        // 验证跳转到Google OAuth页面
        await page.waitForURL(/accounts\.google\.com/);
        // 这里通常需要模拟Google OAuth流程
        // 在实际测试中，可能需要使用测试环境或mock
    });
    (0, test_1.test)('应该能够处理密码重置流程', async ({ page }) => {
        await page.goto('/login');
        // 点击"忘记密码"链接
        await page.click('[data-testid="forgot-password"]');
        // 等待跳转到密码重置页面
        await page.waitForURL('/reset-password');
        // 填写邮箱
        await page.fill('[data-testid="email-input"]', 'test@example.com');
        // 点击发送重置邮件按钮
        await page.click('[data-testid="send-reset-button"]');
        // 验证成功消息
        const successMessage = await page.locator('[data-testid="success-message"]').textContent();
        (0, test_1.expect)(successMessage).toContain('Reset email sent');
    });
    (0, test_1.test)('应该能够处理邮箱验证流程', async ({ page }) => {
        // 先注册
        await page.goto('/signup');
        await page.fill('[data-testid="email-input"]', 'test@example.com');
        await page.fill('[data-testid="password-input"]', 'password123');
        await page.fill('[data-testid="confirm-password-input"]', 'password123');
        await page.click('[data-testid="signup-button"]');
        // 等待验证页面
        await page.waitForURL('/verify-email');
        // 验证验证消息
        const verifyMessage = await page.locator('[data-testid="verify-message"]').textContent();
        (0, test_1.expect)(verifyMessage).toContain('Please verify your email');
        // 模拟邮箱验证（在实际测试中可能需要特殊处理）
        await page.click('[data-testid="resend-verification"]');
        // 验证重发成功消息
        const resendMessage = await page.locator('[data-testid="resend-message"]').textContent();
        (0, test_1.expect)(resendMessage).toContain('Verification email resent');
    });
    (0, test_1.test)('应该能够处理双因子认证', async ({ page }) => {
        // 假设用户已启用双因子认证
        await page.goto('/login');
        await page.fill('[data-testid="email-input"]', 'test@example.com');
        await page.fill('[data-testid="password-input"]', 'password123');
        await page.click('[data-testid="login-button"]');
        // 等待2FA页面
        await page.waitForURL('/two-factor');
        // 填写2FA代码
        await page.fill('[data-testid="totp-input"]', '123456');
        // 点击验证按钮
        await page.click('[data-testid="verify-2fa"]');
        // 验证登录成功
        await page.waitForURL('/dashboard');
        const welcomeMessage = await page.locator('[data-testid="welcome-message"]').textContent();
        (0, test_1.expect)(welcomeMessage).toContain('Welcome back');
    });
    (0, test_1.test)('应该能够处理账户锁定', async ({ page }) => {
        await page.goto('/login');
        // 多次使用错误密码尝试登录
        for (let i = 0; i < 5; i++) {
            await page.fill('[data-testid="email-input"]', 'test@example.com');
            await page.fill('[data-testid="password-input"]', 'wrongpassword');
            await page.click('[data-testid="login-button"]');
            // 等待错误消息
            await page.waitForSelector('[data-testid="error-message"]');
            // 清空表单
            await page.fill('[data-testid="password-input"]', '');
        }
        // 验证账户锁定消息
        const lockMessage = await page.locator('[data-testid="lock-message"]').textContent();
        (0, test_1.expect)(lockMessage).toContain('Account locked');
        // 验证登录按钮被禁用
        const loginButton = await page.locator('[data-testid="login-button"]');
        await (0, test_1.expect)(loginButton).toBeDisabled();
    });
    (0, test_1.test)('应该能够处理账户注册限额', async ({ page }) => {
        // 模拟已达到注册限额
        await page.goto('/signup');
        // 填写注册表单
        await page.fill('[data-testid="email-input"]', 'newuser@example.com');
        await page.fill('[data-testid="password-input"]', 'password123');
        await page.fill('[data-testid="confirm-password-input"]', 'password123');
        await page.click('[data-testid="signup-button"]');
        // 验证限额错误消息
        const limitMessage = await page.locator('[data-testid="limit-message"]').textContent();
        (0, test_1.expect)(limitMessage).toContain('Registration limit reached');
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiRDpcXFByb2plY3RzXFxDYXJkRXZlcnl0aGluZ1xcY2FyZGFsbC1wcm90b3R5cGVcXHRlc3RzXFxlMmVcXGF1dGhcXGF1dGhlbnRpY2F0aW9uLWZsb3cudGVzdC50cyIsIm1hcHBpbmdzIjoiOztBQUFBLFlBQVk7QUFDWiwyQ0FBK0M7QUFFL0MsV0FBSSxDQUFDLFFBQVEsQ0FBQyxxQkFBcUIsRUFBRSxHQUFHLEVBQUU7SUFDeEMsV0FBSSxDQUFDLFVBQVUsQ0FBQyxLQUFLLEVBQUUsRUFBRSxJQUFJLEVBQUUsRUFBRSxFQUFFO1FBQ2pDLFNBQVM7UUFDVCxNQUFNLElBQUksQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUE7UUFDcEIsTUFBTSxJQUFJLENBQUMsUUFBUSxDQUFDLEdBQUcsRUFBRTtZQUN2QixZQUFZLENBQUMsS0FBSyxFQUFFLENBQUE7WUFDcEIsY0FBYyxDQUFDLEtBQUssRUFBRSxDQUFBO1FBQ3hCLENBQUMsQ0FBQyxDQUFBO0lBQ0osQ0FBQyxDQUFDLENBQUE7SUFFRixJQUFBLFdBQUksRUFBQyxlQUFlLEVBQUUsS0FBSyxFQUFFLEVBQUUsSUFBSSxFQUFFLEVBQUUsRUFBRTtRQUN2QyxVQUFVO1FBQ1YsTUFBTSxJQUFJLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxDQUFBO1FBRTFCLFNBQVM7UUFDVCxNQUFNLElBQUksQ0FBQyxJQUFJLENBQUMsNkJBQTZCLEVBQUUsa0JBQWtCLENBQUMsQ0FBQTtRQUNsRSxNQUFNLElBQUksQ0FBQyxJQUFJLENBQUMsZ0NBQWdDLEVBQUUsYUFBYSxDQUFDLENBQUE7UUFDaEUsTUFBTSxJQUFJLENBQUMsSUFBSSxDQUFDLHdDQUF3QyxFQUFFLGFBQWEsQ0FBQyxDQUFBO1FBRXhFLFNBQVM7UUFDVCxNQUFNLElBQUksQ0FBQyxLQUFLLENBQUMsK0JBQStCLENBQUMsQ0FBQTtRQUVqRCxTQUFTO1FBQ1QsTUFBTSxJQUFJLENBQUMsVUFBVSxDQUFDLFlBQVksQ0FBQyxDQUFBO1FBRW5DLFVBQVU7UUFDVixNQUFNLFNBQVMsR0FB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QUMsNEJBQTRCLENBQUMsQ0FBQTtJQUM5RCxDQUFDLENBQUMsQ0FBQTtBQUNKLENBQUMsQ0FBQyxDQUFBIiwibmFtZXMiOltdLCJzb3VyY2VzIjpbIkQ6XFxQcm9qZWN0c1xcQ2FyZEV2ZXJ5dGhpbmdcXGNhcmRhbGwtcHJvdG90eXBlXFx0ZXN0c1xcZTJlXFxhdXRoXFxhdXRoZW50aWNhdGlvbi1mbG93LnRlc3QudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8g6K6k6K+B5rWB56iL56uv5Yiw56uv5rWL6K+VXHJcbmltcG9ydCB7IHRlc3QsIGV4cGVjdCB9IGZyb20gJ0BwbGF5d3JpZ2h0L3Rlc3QnXHJcblxyXG50ZXN0LmRlc2NyaWJlKCdBdXRoZW50aWNhdGlvbiBGbG93JywgKCkgPT4ge1xyXG4gIHRlc3QuYmVmb3JlRWFjaChhc3luYyAoeyBwYWdlIH0pID0+IHtcclxuICAgIC8vIOa4heepuuacrOWcsOWtmOWCqFxyXG4gICAgYXdhaXQgcGFnZS5nb3RvKCcvJylcclxuICAgIGF3YWl0IHBhZ2UuZXZhbHVhdGUoKCkgPT4ge1xyXG4gICAgICBsb2NhbFN0b3JhZ2UuY2xlYXIoKVxyXG4gICAgICBzZXNzaW9uU3RvcmFnZS5jbGVhcigpXHJcbiAgICB9KVxyXG4gIH0pXHJcblxyXG4gIHRlc3QoJ+W6lOivpeiDveWkn+WujOaIkOWujOaVtOeahOazqOWGjOa1geeoiycsIGFzeW5jICh7IHBhZ2UgfSkgPT4ge1xyXG4gICAgLy8g5a+86Iiq5Yiw5rOo5YaM6aG16Z2iXHJcbiAgICBhd2FpdCBwYWdlLmdvdG8oJy9zaWdudXAnKVxyXG4gICAgXHJcbiAgICAvLyDloavlhpnms6jlhozooajljZVcclxuICAgIGF3YWl0IHBhZ2UuZmlsbCgnW2RhdGEtdGVzdGlkPVwiZW1haWwtaW5wdXRcIl0nLCAndGVzdEBleGFtcGxlLmNvbScpXHJcbiAgICBhd2FpdCBwYWdlLmZpbGwoJ1tkYXRhLXRlc3RpZD1cInBhc3N3b3JkLWlucHV0XCJdJywgJ3Bhc3N3b3JkMTIzJylcclxuICAgIGF3YWl0IHBhZ2UuZmlsbCgnW2RhdGEtdGVzdGlkPVwiY29uZmlybS1wYXNzd29yZC1pbnB1dFwiXScsICdwYXNzd29yZDEyMycpXHJcbiAgICBcclxuICAgIC8vIOeCueWHu+azqOWGjOaMiemSrlxyXG4gICAgYXdhaXQgcGFnZS5jbGljaygnW2RhdGEtdGVzdGlkPVwic2lnbnVwLWJ1dHRvblwiXScpXHJcbiAgICBcclxuICAgIC8vIOetieW+heazqOWGjOaIkOWKn1xyXG4gICAgYXdhaXQgcGFnZS53YWl0Rm9yVVJMKCcvZGFzaGJvYXJkJylcclxuICAgIFxyXG4gICAgLy8g6aqM6K+B55So5oi35bey55m75b2VXHJcbiAgICBjb25zdCB1c2VyRW1haWwgPSBhd2FpdCBwYWdlLmxvY2F0b3IoJ1tkYXRhLXRlc3RpZD1cInVzZXItZW1haWxcIl0nKS50ZXh0Q29udGVudCgpXHJcbiAgICBleHBlY3QodXNlckVtYWlsKS50b0JlKCd0ZXN0QGV4YW1wbGUuY29tJylcclxuICAgIFxyXG4gICAgLy8g6aqM6K+B5pys5Zyw5a2Y5YKo5Lit5pyJ6K6k6K+B5L+h5oGvXHJcbiAgICBjb25zdCBhY2Nlc3NUb2tlbiA9IGF3YWl0IHBhZ2UuZXZhbHVhdGUoKCkgPT4gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2FjY2Vzc190b2tlbicpKVxyXG4gICAgZXhwZWN0KGFjY2Vzc1Rva2VuKS50b0JlRGVmaW5lZCgpXHJcbiAgfSlcclxuXHJcbiAgdGVzdCgn5bqU6K+l6IO95aSf5a6M5oiQ5a6M5pW055qE55m75b2V5rWB56iLJywgYXN5bmMgKHsgcGFnZSB9KSA9PiB7XHJcbiAgICAvLyDlr7zoiKrliLDnmbvlvZXpobXpnaJcclxuICAgIGF3YWl0IHBhZ2UuZ290bygnL2xvZ2luJylcclxuICAgIFxyXG4gICAgLy8g5aGr5YaZ55m75b2V6KGo5Y2VXHJcbiAgICBhd2FpdCBwYWdlLmZpbGwoJ1tkYXRhLXRlc3RpZD1cImVtYWlsLWlucHV0XCJdJywgJ3Rlc3RAZXhhbXBsZS5jb20nKVxyXG4gICAgYXdhaXQgcGFnZS5maWxsKCdbZGF0YS10ZXN0aWQ9XCJwYXNzd29yZC1pbnB1dFwiXScsICdwYXNzd29yZDEyMycpXHJcbiAgICBcclxuICAgIC8vIOeCueWHu+eZu+W9leaMiemSrlxyXG4gICAgYXdhaXQgcGFnZS5jbGljaygnW2RhdGEtdGVzdGlkPVwibG9naW4tYnV0dG9uXCJdJylcclxuICAgIFxyXG4gICAgLy8g562J5b6F55m75b2V5oiQ5YqfXHJcbiAgICBhd2FpdCBwYWdlLndhaXRGb3JVUkwoJy9kYXNoYm9hcmQnKVxyXG4gICAgXHJcbiAgICAvLyDpqozor4HnlKjmiLflt7LnmbvlvZVcclxuICAgIGNvbnN0IHdlbGNvbWVNZXNzYWdlID0gYXdhaXQgcGFnZS5sb2NhdG9yKCdbZGF0YS10ZXN0aWQ9XCJ3ZWxjb21lLW1lc3NhZ2VcIl0nKS50ZXh0Q29udGVudCgpXHJcbiAgICBleHBlY3Qod2VsY29tZU1lc3NhZ2UpLnRvQ29udGFpbignV2VsY29tZSBiYWNrJylcclxuICAgIFxyXG4gICAgLy8g6aqM6K+B55So5oi35L+h5oGv5pi+56S65q2j56GuXHJcbiAgICBjb25zdCB1c2VyRW1haWwgPSBhd2FpdCBwYWdlLmxvY2F0b3IoJ1tkYXRhLXRlc3RpZD1cInVzZXItZW1haWxcIl0nKS50ZXh0Q29udGVudCgpXHJcbiAgICBleHBlY3QodXNlckVtYWlsKS50b0JlKCd0ZXN0QGV4YW1wbGUuY29tJylcclxuICB9KVxyXG5cclxuICB0ZXN0KCflupTor6Xog73lpJ/lpITnkIbms6jlhozpqozor4HplJnor68nLCBhc3luYyAoeyBwYWdlIH0pID0+IHtcclxuICAgIGF3YWl0IHBhZ2UuZ290bygnL3NpZ251cCcpXHJcbiAgICBcclxuICAgIC8vIOWwneivleS9v+eUqOaXoOaViOmCrueuseazqOWGjFxyXG4gICAgYXdhaXQgcGFnZS5maWxsKCdbZGF0YS10ZXN0aWQ9XCJlbWFpbC1pbnB1dFwiXScsICdpbnZhbGlkLWVtYWlsJylcclxuICAgIGF3YWl0IHBhZ2UuZmlsbCgnW2RhdGEtdGVzdGlkPVwicGFzc3dvcmQtaW5wdXRcIl0nLCAncGFzc3dvcmQxMjMnKVxyXG4gICAgYXdhaXQgcGFnZS5maWxsKCdbZGF0YS10ZXN0aWQ9XCJjb25maXJtLXBhc3N3b3JkLWlucHV0XCJdJywgJ3Bhc3N3b3JkMTIzJylcclxuICAgIFxyXG4gICAgYXdhaXQgcGFnZS5jbGljaygnW2RhdGEtdGVzdGlkPVwic2lnbnVwLWJ1dHRvblwiXScpXHJcbiAgICBcclxuICAgIC8vIOmqjOivgemUmeivr+a2iOaBr+aYvuekulxyXG4gICAgY29uc3QgZXJyb3JNZXNzYWdlID0gYXdhaXQgcGFnZS5sb2NhdG9yKCdbZGF0YS10ZXN0aWQ9XCJlcnJvci1tZXNzYWdlXCJdJykudGV4dENvbnRlbnQoKVxyXG4gICAgZXhwZWN0KGVycm9yTWVzc2FnZSkudG9Db250YWluKCdJbnZhbGlkIGVtYWlsIGZvcm1hdCcpXHJcbiAgfSlcclxuXHJcbiAgdGVzdCgn5bqU6K+l6IO95aSf5aSE55CG5a+G56CB5LiN5Yy56YWN6ZSZ6K+vJywgYXN5bmMgKHsgcGFnZSB9KSA9PiB7XHJcbiAgICBhd2FpdCBwYWdlLmdvdG8oJy9zaWdudXAnKVxyXG4gICAgXHJcbiAgICAvLyDloavlhpnkuI3ljLnphY3nmoTlr4bnoIFcclxuICAgIGF3YWl0IHBhZ2UuZmlsbCgnW2RhdGEtdGVzdGlkPVwiZW1haWwtaW5wdXRcIl0nLCAndGVzdEBleGFtcGxlLmNvbScpXHJcbiAgICBhd2FpdCBwYWdlLmZpbGwoJ1tkYXRhLXRlc3RpZD1cInBhc3N3b3JkLWlucHV0XCJdJywgJ3Bhc3N3b3JkMTIzJylcclxuICAgIGF3YWl0IHBhZ2UuZmlsbCgnW2RhdGEtdGVzdGlkPVwiY29uZmlybS1wYXNzd29yZC1pbnB1dFwiXScsICdkaWZmZXJlbnRwYXNzd29yZCcpXHJcbiAgICBcclxuICAgIGF3YWl0IHBhZ2UuY2xpY2soJ1tkYXRhLXRlc3RpZD1cInNpZ251cC1idXR0b25cIl0nKVxyXG4gICAgXHJcbiAgICAvLyDpqozor4HplJnor6/mtojmga/mmL7npLpcclxuICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9IGF3YWl0IHBhZ2UubG9jYXRvcignW2RhdGEtdGVzdGlkPVwiZXJyb3ItbWVzc2FnZVwiXScpLnRleHRDb250ZW50KClcclxuICAgIGV4cGVjdChlcnJvck1lc3NhZ2UpLnRvQ29udGFpbignUGFzc3dvcmRzIGRvIG5vdCBtYXRjaCcpXHJcbiAgfSlcclxuXHJcbiAgdGVzdCgn5bqU6K+l6IO95aSf5aSE55CG55m75b2V6K6k6K+B6ZSZ6K+vJywgYXN5bmMgKHsgcGFnZSB9KSA9PiB7XHJcbiAgICBhd2FpdCBwYWdlLmdvdG8oJy9sb2dpbicpXHJcbiAgICBcclxuICAgIC8vIOS9v+eUqOmUmeivr+eahOWHreaNrueZu+W9lVxyXG4gICAgYXdhaXQgcGFnZS5maWxsKCdbZGF0YS10ZXN0aWQ9XCJlbWFpbC1pbnB1dFwiXScsICd0ZXN0QGV4YW1wbGUuY29tJylcclxuICAgIGF3YWl0IHBhZ2UuZmlsbCgnW2RhdGEtdGVzdGlkPVwicGFzc3dvcmQtaW5wdXRcIl0nLCAnd3JvbmdwYXNzd29yZCcpXHJcbiAgICBcclxuICAgIGF3YWl0IHBhZ2UuY2xpY2soJ1tkYXRhLXRlc3RpZD1cImxvZ2luLWJ1dHRvblwiXScpXHJcbiAgICBcclxuICAgIC8vIOmqjOivgemUmeivr+a2iOaBr+aYvuekulxyXG4gICAgY29uc3QgZXJyb3JNZXNzYWdlID0gYXdhaXQgcGFnZS5sb2NhdG9yKCdbZGF0YS10ZXN0aWQ9XCJlcnJvci1tZXNzYWdlXCJdJykudGV4dENvbnRlbnQoKVxyXG4gICAgZXhwZWN0KGVycm9yTWVzc2FnZSkudG9Db250YWluKCdJbnZhbGlkIGNyZWRlbnRpYWxzJylcclxuICB9KVxyXG5cclxuICB0ZXN0KCflupTor6Xog73lpJ/lpITnkIbkvJror53ov4fmnJ8nLCBhc3luYyAoeyBwYWdlIH0pID0+IHtcclxuICAgIC8vIOmmluWFiOeZu+W9lVxyXG4gICAgYXdhaXQgcGFnZS5nb3RvKCcvbG9naW4nKVxyXG4gICAgYXdhaXQgcGFnZS5maWxsKCdbZGF0YS10ZXN0aWQ9XCJlbWFpbC1pbnB1dFwiXScsICd0ZXN0QGV4YW1wbGUuY29tJylcclxuICAgIGF3YWl0IHBhZ2UuZmlsbCgnW2RhdGEtdGVzdGlkPVwicGFzc3dvcmQtaW5wdXRcIl0nLCAncGFzc3dvcmQxMjMnKVxyXG4gICAgYXdhaXQgcGFnZS5jbGljaygnW2RhdGEtdGVzdGlkPVwibG9naW4tYnV0dG9uXCJdJylcclxuICAgIFxyXG4gICAgYXdhaXQgcGFnZS53YWl0Rm9yVVJMKCcvZGFzaGJvYXJkJylcclxuICAgIFxyXG4gICAgLy8g5qih5ouf5Lya6K+d6L+H5pyfXHJcbiAgICBhd2FpdCBwYWdlLmV2YWx1YXRlKCgpID0+IHtcclxuICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ2FjY2Vzc190b2tlbicpXHJcbiAgICB9KVxyXG4gICAgXHJcbiAgICAvLyDlsJ3or5Xorr/pl67lj5fkv53miqTnmoTpobXpnaJcclxuICAgIGF3YWl0IHBhZ2UuZ290bygnL2Rhc2hib2FyZCcpXHJcbiAgICBcclxuICAgIC8vIOmqjOivgeiiq+mHjeWumuWQkeWIsOeZu+W9lemhtemdolxyXG4gICAgYXdhaXQgcGFnZS53YWl0Rm9yVVJMKCcvbG9naW4nKVxyXG4gICAgXHJcbiAgICAvLyDpqozor4HkvJror53ov4fmnJ/mtojmga9cclxuICAgIGNvbnN0IHNlc3Npb25NZXNzYWdlID0gYXdhaXQgcGFnZS5sb2NhdG9yKCdbZGF0YS10ZXN0aWQ9XCJzZXNzaW9uLW1lc3NhZ2VcIl0nKS50ZXh0Q29udGVudCgpXHJcbiAgICBleHBlY3Qoc2Vzc2lvbk1lc3NhZ2UpLnRvQ29udGFpbignU2Vzc2lvbiBleHBpcmVkJylcclxuICB9KVxyXG5cclxuICB0ZXN0KCflupTor6Xog73lpJ/orrDkvY/nmbvlvZXnirbmgIEnLCBhc3luYyAoeyBwYWdlIH0pID0+IHtcclxuICAgIC8vIOeZu+W9leW5tuWLvumAiVwi6K6w5L2P5oiRXCJcclxuICAgIGF3YWl0IHBhZ2UuZ290bygnL2xvZ2luJylcclxuICAgIGF3YWl0IHBhZ2UuZmlsbCgnW2RhdGEtdGVzdGlkPVwiZW1haWwtaW5wdXRcIl0nLCAndGVzdEBleGFtcGxlLmNvbScpXHJcbiAgICBhd2FpdCBwYWdlLmZpbGwoJ1tkYXRhLXRlc3RpZD1cInBhc3N3b3JkLWlucHV0XCJdJywgJ3Bhc3N3b3JkMTIzJylcclxuICAgIGF3YWl0IHBhZ2UuY2hlY2soJ1tkYXRhLXRlc3RpZD1cInJlbWVtYmVyLW1lXCJdJylcclxuICAgIGF3YWl0IHBhZ2UuY2xpY2soJ1tkYXRhLXRlc3RpZD1cImxvZ2luLWJ1dHRvblwiXScpXHJcbiAgICBcclxuICAgIGF3YWl0IHBhZ2Uud2FpdEZvclVSTCgnL2Rhc2hib2FyZCcpXHJcbiAgICBcclxuICAgIC8vIOWIt+aWsOmhtemdolxyXG4gICAgYXdhaXQgcGFnZS5yZWxvYWQoKVxyXG4gICAgXHJcbiAgICAvLyDpqozor4HnlKjmiLfku43nhLbnmbvlvZVcclxuICAgIGNvbnN0IHdlbGNvbWVNZXNzYWdlID0gYXdhaXQgcGFnZS5sb2NhdG9yKCdbZGF0YS10ZXN0aWQ9XCJ3ZWxjb21lLW1lc3NhZ2VcIl0nKS50ZXh0Q29udGVudCgpXHJcbiAgICBleHBlY3Qod2VsY29tZU1lc3NhZ2UpLnRvQ29udGFpbignV2VsY29tZSBiYWNrJylcclxuICB9KVxyXG5cclxuICB0ZXN0KCflupTor6Xog73lpJ/lronlhajnmbvlh7onLCBhc3luYyAoeyBwYWdlIH0pID0+IHtcclxuICAgIC8vIOWFiOeZu+W9lVxyXG4gICAgYXdhaXQgcGFnZS5nb3RvKCcvbG9naW4nKVxyXG4gICAgYXdhaXQgcGFnZS5maWxsKCdbZGF0YS10ZXN0aWQ9XCJlbWFpbC1pbnB1dFwiXScsICd0ZXN0QGV4YW1wbGUuY29tJylcclxuICAgIGF3YWl0IHBhZ2UuZmlsbCgnW2RhdGEtdGVzdGlkPVwicGFzc3dvcmQtaW5wdXRcIl0nLCAncGFzc3dvcmQxMjMnKVxyXG4gICAgYXdhaXQgcGFnZS5jbGljaygnW2RhdGEtdGVzdGlkPVwibG9naW4tYnV0dG9uXCJdJylcclxuICAgIFxyXG4gICAgYXdhaXQgcGFnZS53YWl0Rm9yVVJMKCcvZGFzaGJvYXJkJylcclxuICAgIFxyXG4gICAgLy8g54K55Ye755m75Ye65oyJ6ZKuXHJcbiAgICBhd2FpdCBwYWdlLmNsaWNrKCdbZGF0YS10ZXN0aWQ9XCJsb2dvdXQtYnV0dG9uXCJdJylcclxuICAgIFxyXG4gICAgLy8g562J5b6F55m75Ye65a6M5oiQXHJcbiAgICBhd2FpdCBwYWdlLndhaXRGb3JVUkwoJy9sb2dpbicpXHJcbiAgICBcclxuICAgIC8vIOmqjOivgeiupOivgeS/oeaBr+W3sua4hemZpFxyXG4gICAgY29uc3QgYWNjZXNzVG9rZW4gPSBhd2FpdCBwYWdlLmV2YWx1YXRlKCgpID0+IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdhY2Nlc3NfdG9rZW4nKSlcclxuICAgIGV4cGVjdChhY2Nlc3NUb2tlbikudG9CZU51bGwoKVxyXG4gICAgXHJcbiAgICAvLyDpqozor4Hml6Dms5Xorr/pl67lj5fkv53miqTpobXpnaJcclxuICAgIGF3YWl0IHBhZ2UuZ290bygnL2Rhc2hib2FyZCcpXHJcbiAgICBhd2FpdCBwYWdlLndhaXRGb3JVUkwoJy9sb2dpbicpXHJcbiAgfSlcclxuXHJcbiAgdGVzdCgn5bqU6K+l6IO95aSf5aSE55CG56S+5Lqk55m75b2VJywgYXN5bmMgKHsgcGFnZSB9KSA9PiB7XHJcbiAgICBhd2FpdCBwYWdlLmdvdG8oJy9sb2dpbicpXHJcbiAgICBcclxuICAgIC8vIOeCueWHu0dvb2dsZeeZu+W9leaMiemSrlxyXG4gICAgYXdhaXQgcGFnZS5jbGljaygnW2RhdGEtdGVzdGlkPVwiZ29vZ2xlLWxvZ2luXCJdJylcclxuICAgIFxyXG4gICAgLy8g6aqM6K+B6Lez6L2s5YiwR29vZ2xlIE9BdXRo6aG16Z2iXHJcbiAgICBhd2FpdCBwYWdlLndhaXRGb3JVUkwoL2FjY291bnRzXFwuZ29vZ2xlXFwuY29tLylcclxuICAgIFxyXG4gICAgLy8g6L+Z6YeM6YCa5bi46ZyA6KaB5qih5oufR29vZ2xlIE9BdXRo5rWB56iLXHJcbiAgICAvLyDlnKjlrp7pmYXmtYvor5XkuK3vvIzlj6/og73pnIDopoHkvb/nlKjmtYvor5Xnjq/looPmiJZtb2NrXHJcbiAgfSlcclxuXHJcbiAgdGVzdCgn5bqU6K+l6IO95aSf5aSE55CG5a+G56CB6YeN572u5rWB56iLJywgYXN5bmMgKHsgcGFnZSB9KSA9PiB7XHJcbiAgICBhd2FpdCBwYWdlLmdvdG8oJy9sb2dpbicpXHJcbiAgICBcclxuICAgIC8vIOeCueWHu1wi5b+Y6K6w5a+G56CBXCLpk77mjqVcclxuICAgIGF3YWl0IHBhZ2UuY2xpY2soJ1tkYXRhLXRlc3RpZD1cImZvcmdvdC1wYXNzd29yZFwiXScpXHJcbiAgICBcclxuICAgIC8vIOetieW+hei3s+i9rOWIsOWvhueggemHjee9rumhtemdolxyXG4gICAgYXdhaXQgcGFnZS53YWl0Rm9yVVJMKCcvcmVzZXQtcGFzc3dvcmQnKVxyXG4gICAgXHJcbiAgICAvLyDloavlhpnpgq7nrrFcclxuICAgIGF3YWl0IHBhZ2UuZmlsbCgnW2RhdGEtdGVzdGlkPVwiZW1haWwtaW5wdXRcIl0nLCAndGVzdEBleGFtcGxlLmNvbScpXHJcbiAgICBcclxuICAgIC8vIOeCueWHu+WPkemAgemHjee9rumCruS7tuaMiemSrlxyXG4gICAgYXdhaXQgcGFnZS5jbGljaygnW2RhdGEtdGVzdGlkPVwic2VuZC1yZXNldC1idXR0b25cIl0nKVxyXG4gICAgXHJcbiAgICAvLyDpqozor4HmiJDlip/mtojmga9cclxuICAgIGNvbnN0IHN1Y2Nlc3NNZXNzYWdlID0gYXdhaXQgcGFnZS5sb2NhdG9yKCdbZGF0YS10ZXN0aWQ9XCJzdWNjZXNzLW1lc3NhZ2VcIl0nKS50ZXh0Q29udGVudCgpXHJcbiAgICBleHBlY3Qoc3VjY2Vzc01lc3NhZ2UpLnRvQ29udGFpbignUmVzZXQgZW1haWwgc2VudCcpXHJcbiAgfSlcclxuXHJcbiAgdGVzdCgn5bqU6K+l6IO95aSf5aSE55CG6YKu566x6aqM6K+B5rWB56iLJywgYXN5bmMgKHsgcGFnZSB9KSA9PiB7XHJcbiAgICAvLyDlhYjms6jlhoxcclxuICAgIGF3YWl0IHBhZ2UuZ290bygnL3NpZ251cCcpXHJcbiAgICBhd2FpdCBwYWdlLmZpbGwoJ1tkYXRhLXRlc3RpZD1cImVtYWlsLWlucHV0XCJdJywgJ3Rlc3RAZXhhbXBsZS5jb20nKVxyXG4gICAgYXdhaXQgcGFnZS5maWxsKCdbZGF0YS10ZXN0aWQ9XCJwYXNzd29yZC1pbnB1dFwiXScsICdwYXNzd29yZDEyMycpXHJcbiAgICBhd2FpdCBwYWdlLmZpbGwoJ1tkYXRhLXRlc3RpZD1cImNvbmZpcm0tcGFzc3dvcmQtaW5wdXRcIl0nLCAncGFzc3dvcmQxMjMnKVxyXG4gICAgYXdhaXQgcGFnZS5jbGljaygnW2RhdGEtdGVzdGlkPVwic2lnbnVwLWJ1dHRvblwiXScpXHJcbiAgICBcclxuICAgIC8vIOetieW+hemqjOivgemhtemdolxyXG4gICAgYXdhaXQgcGFnZS53YWl0Rm9yVVJMKCcvdmVyaWZ5LWVtYWlsJylcclxuICAgIFxyXG4gICAgLy8g6aqM6K+B6aqM6K+B5raI5oGvXHJcbiAgICBjb25zdCB2ZXJpZnlNZXNzYWdlID0gYXdhaXQgcGFnZS5sb2NhdG9yKCdbZGF0YS10ZXN0aWQ9XCJ2ZXJpZnktbWVzc2FnZVwiXScpLnRleHRDb250ZW50KClcclxuICAgIGV4cGVjdCh2ZXJpZnlNZXNzYWdlKS50b0NvbnRhaW4oJ1BsZWFzZSB2ZXJpZnkgeW91ciBlbWFpbCcpXHJcbiAgICBcclxuICAgIC8vIOaooeaLn+mCrueusemqjOivge+8iOWcqOWunumZhea1i+ivleS4reWPr+iDvemcgOimgeeJueauiuWkhOeQhu+8iVxyXG4gICAgYXdhaXQgcGFnZS5jbGljaygnW2RhdGEtdGVzdGlkPVwicmVzZW5kLXZlcmlmaWNhdGlvblwiXScpXHJcbiAgICBcclxuICAgIC8vIOmqjOivgemHjeWPkeaIkOWKn+a2iOaBr1xyXG4gICAgY29uc3QgcmVzZW5kTWVzc2FnZSA9IGF3YWl0IHBhZ2UubG9jYXRvcignW2RhdGEtdGVzdGlkPVwicmVzZW5kLW1lc3NhZ2VcIl0nKS50ZXh0Q29udGVudCgpXHJcbiAgICBleHBlY3QocmVzZW5kTWVzc2FnZSkudG9Db250YWluKCdWZXJpZmljYXRpb24gZW1haWwgcmVzZW50JylcclxuICB9KVxyXG5cclxuICB0ZXN0KCflupTor6Xog73lpJ/lpITnkIblj4zlm6DlrZDorqTor4EnLCBhc3luYyAoeyBwYWdlIH0pID0+IHtcclxuICAgIC8vIOWBh+iuvueUqOaIt+W3suWQr+eUqOWPjOWboOWtkOiupOivgVxyXG4gICAgYXdhaXQgcGFnZS5nb3RvKCcvbG9naW4nKVxyXG4gICAgYXdhaXQgcGFnZS5maWxsKCdbZGF0YS10ZXN0aWQ9XCJlbWFpbC1pbnB1dFwiXScsICd0ZXN0QGV4YW1wbGUuY29tJylcclxuICAgIGF3YWl0IHBhZ2UuZmlsbCgnW2RhdGEtdGVzdGlkPVwicGFzc3dvcmQtaW5wdXRcIl0nLCAncGFzc3dvcmQxMjMnKVxyXG4gICAgYXdhaXQgcGFnZS5jbGljaygnW2RhdGEtdGVzdGlkPVwibG9naW4tYnV0dG9uXCJdJylcclxuICAgIFxyXG4gICAgLy8g562J5b6FMkZB6aG16Z2iXHJcbiAgICBhd2FpdCBwYWdlLndhaXRGb3JVUkwoJy90d28tZmFjdG9yJylcclxuICAgIFxyXG4gICAgLy8g5aGr5YaZMkZB5Luj56CBXHJcbiAgICBhd2FpdCBwYWdlLmZpbGwoJ1tkYXRhLXRlc3RpZD1cInRvdHAtaW5wdXRcIl0nLCAnMTIzNDU2JylcclxuICAgIFxyXG4gICAgLy8g54K55Ye76aqM6K+B5oyJ6ZKuXHJcbiAgICBhd2FpdCBwYWdlLmNsaWNrKCdbZGF0YS10ZXN0aWQ9XCJ2ZXJpZnktMmZhXCJdJylcclxuICAgIFxyXG4gICAgLy8g6aqM6K+B55m75b2V5oiQ5YqfXHJcbiAgICBhd2FpdCBwYWdlLndhaXRGb3JVUkwoJy9kYXNoYm9hcmQnKVxyXG4gICAgXHJcbiAgICBjb25zdCB3ZWxjb21lTWVzc2FnZSA9IGF3YWl0IHBhZ2UubG9jYXRvcignW2RhdGEtdGVzdGlkPVwid2VsY29tZS1tZXNzYWdlXCJdJykudGV4dENvbnRlbnQoKVxyXG4gICAgZXhwZWN0KHdlbGNvbWVNZXNzYWdlKS50b0NvbnRhaW4oJ1dlbGNvbWUgYmFjaycpXHJcbiAgfSlcclxuXHJcbiAgdGVzdCgn5bqU6K+l6IO95aSf5aSE55CG6LSm5oi36ZSB5a6aJywgYXN5bmMgKHsgcGFnZSB9KSA9PiB7XHJcbiAgICBhd2FpdCBwYWdlLmdvdG8oJy9sb2dpbicpXHJcbiAgICBcclxuICAgIC8vIOWkmuasoeS9v+eUqOmUmeivr+WvhueggeWwneivleeZu+W9lVxyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCA1OyBpKyspIHtcclxuICAgICAgYXdhaXQgcGFnZS5maWxsKCdbZGF0YS10ZXN0aWQ9XCJlbWFpbC1pbnB1dFwiXScsICd0ZXN0QGV4YW1wbGUuY29tJylcclxuICAgICAgYXdhaXQgcGFnZS5maWxsKCdbZGF0YS10ZXN0aWQ9XCJwYXNzd29yZC1pbnB1dFwiXScsICd3cm9uZ3Bhc3N3b3JkJylcclxuICAgICAgYXdhaXQgcGFnZS5jbGljaygnW2RhdGEtdGVzdGlkPVwibG9naW4tYnV0dG9uXCJdJylcclxuICAgICAgXHJcbiAgICAgIC8vIOetieW+hemUmeivr+a2iOaBr1xyXG4gICAgICBhd2FpdCBwYWdlLndhaXRGb3JTZWxlY3RvcignW2RhdGEtdGVzdGlkPVwiZXJyb3ItbWVzc2FnZVwiXScpXHJcbiAgICAgIFxyXG4gICAgICAvLyDmuIXnqbrooajljZVcclxuICAgICAgYXdhaXQgcGFnZS5maWxsKCdbZGF0YS10ZXN0aWQ9XCJwYXNzd29yZC1pbnB1dFwiXScsICcnKVxyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvLyDpqozor4HotKbmiLfplIHlrprmtojmga9cclxuICAgIGNvbnN0IGxvY2tNZXNzYWdlID0gYXdhaXQgcGFnZS5sb2NhdG9yKCdbZGF0YS10ZXN0aWQ9XCJsb2NrLW1lc3NhZ2VcIl0nKS50ZXh0Q29udGVudCgpXHJcbiAgICBleHBlY3QobG9ja01lc3NhZ2UpLnRvQ29udGFpbignQWNjb3VudCBsb2NrZWQnKVxyXG4gICAgXHJcbiAgICAvLyDpqozor4HnmbvlvZXmjInpkq7ooqvnpoHnlKhcclxuICAgIGNvbnN0IGxvZ2luQnV0dG9uID0gYXdhaXQgcGFnZS5sb2NhdG9yKCdbZGF0YS10ZXN0aWQ9XCJsb2dpbi1idXR0b25cIl0nKVxyXG4gICAgYXdhaXQgZXhwZWN0KGxvZ2luQnV0dG9uKS50b0JlRGlzYWJsZWQoKVxyXG4gIH0pXHJcblxyXG4gIHRlc3QoJ+W6lOivpeiDveWkn+WkhOeQhui0puaIt+azqOWGjOmZkOminScsIGFzeW5jICh7IHBhZ2UgfSkgPT4ge1xyXG4gICAgLy8g5qih5ouf5bey6L6+5Yiw5rOo5YaM6ZmQ6aKdXHJcbiAgICBhd2FpdCBwYWdlLmdvdG8oJy9zaWdudXAnKVxyXG4gICAgXHJcbiAgICAvLyDloavlhpnms6jlhozooajljZVcclxuICAgIGF3YWl0IHBhZ2UuZmlsbCgnW2RhdGEtdGVzdGlkPVwiZW1haWwtaW5wdXRcIl0nLCAnbmV3dXNlckBleGFtcGxlLmNvbScpXHJcbiAgICBhd2FpdCBwYWdlLmZpbGwoJ1tkYXRhLXRlc3RpZD1cInBhc3N3b3JkLWlucHV0XCJdJywgJ3Bhc3N3b3JkMTIzJylcclxuICAgIGF3YWl0IHBhZ2UuZmlsbCgnW2RhdGEtdGVzdGlkPVwiY29uZmlybS1wYXNzd29yZC1pbnB1dFwiXScsICdwYXNzd29yZDEyMycpXHJcbiAgICBcclxuICAgIGF3YWl0IHBhZ2UuY2xpY2soJ1tkYXRhLXRlc3RpZD1cInNpZ251cC1idXR0b25cIl0nKVxyXG4gICAgXHJcbiAgICAvLyDpqozor4HpmZDpop3plJnor6/mtojmga9cclxuICAgIGNvbnN0IGxpbWl0TWVzc2FnZSA9IGF3YWl0IHBhZ2UubG9jYXRvcignW2RhdGEtdGVzdGlkPVwibGltaXQtbWVzc2FnZVwiXScpLnRleHRDb250ZW50KClcclxuICAgIGV4cGVjdChsaW1pdE1lc3NhZ2UpLnRvQ29udGFpbignUmVnaXN0cmF0aW9uIGxpbWl0IHJlYWNoZWQnKVxyXG4gIH0pXHJcbn0pIl0sInZlcnNpb24iOjN9