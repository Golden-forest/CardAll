bed5eb7eb1004681b14499c1185d6622
"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.clearQueryCache = exports.cachedQuery = exports.validateCardData = exports.batchOperation = exports.generateSearchVector = exports.convertFromDbCard = exports.convertToDbCard = exports.initializeDatabase = exports.db = void 0;
const dexie_1 = __importDefault(require("dexie"));
// ============================================================================
// 统一数据库类
// ============================================================================
class CardAllUnifiedDatabase extends dexie_1.default {
    constructor() {
        super('CardAllUnifiedDatabase');
        // 数据表定义
        Object.defineProperty(this, "cards", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: void 0
        });
        Object.defineProperty(this, "folders", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: void 0
        });
        Object.defineProperty(this, "tags", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: void 0
        });
        Object.defineProperty(this, "images", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: void 0
        });
        Object.defineProperty(this, "syncQueue", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: void 0
        });
        Object.defineProperty(this, "settings", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: void 0
        });
        Object.defineProperty(this, "sessions", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: void 0
        });
        // 版本 3: 完整的统一数据库架构
        this.version(3).stores({
            // 核心实体表 - 优化的索引设计
            cards: '++id, userId, folderId, createdAt, updatedAt, syncVersion, pendingSync, [userId+folderId], searchVector',
            folders: '++id, userId, parentId, createdAt, updatedAt, syncVersion, pendingSync, [userId+parentId], fullPath, depth',
            tags: '++id, userId, name, createdAt, syncVersion, pendingSync, [userId+name]',
            images: '++id, cardId, userId, createdAt, updatedAt, syncVersion, pendingSync, storageMode, [cardId+userId]',
            // 同步和设置表
            syncQueue: '++id, type, entity, entityId, userId, timestamp, retryCount, priority, [userId+priority]',
            settings: '++id, key, updatedAt, scope, [key+scope]',
            sessions: '++id, userId, deviceId, lastActivity, isActive, [userId+deviceId]'
        });
        // 数据库升级逻辑 - 支持从旧版本迁移
        this.upgradeDatabase();
    }
    async upgradeDatabase() {
        // 版本 1 -> 2: 添加用户支持
        this.version(2).upgrade(async (tx) => {
            console.log('Upgrading to version 2: Adding user support...');
            // 检查是否需要从旧数据库迁移
            const oldDb = new CardAllDatabase_v1();
            try {
                await oldDb.open();
                console.log('Found old database, migrating data...');
                // 迁移卡片
                const oldCards = await oldDb.cards.toArray();
                const newCards = oldCards.map(card => ({
                    ...card,
                    userId: 'default', // 设置默认用户
                    updatedAt: new Date()
                }));
                await this.cards.bulkAdd(newCards);
                // 迁移文件夹
                const oldFolders = await oldDb.folders.toArray();
                const newFolders = oldFolders.map(folder => ({
                    ...folder,
                    userId: 'default',
                    updatedAt: new Date()
                }));
                await this.folders.bulkAdd(newFolders);
                // 迁移标签
                const oldTags = await oldDb.tags.toArray();
                const newTags = oldTags.map(tag => ({
                    ...tag,
                    userId: 'default',
                    updatedAt: new Date()
                }));
                await this.tags.bulkAdd(newTags);
                console.log('Migration completed successfully');
            }
            catch (error) {
                console.log('No old database found or migration failed:', error);
            }
        });
        // 版本 2 -> 3: 优化索引和添加新功能
        this.version(3).upgrade(async (tx) => {
            console.log('Upgrading to version 3: Optimizing indexes and adding new features...');
            // 添加默认设置
            await this.initializeDefaultSettings();
            // 重建搜索索引
            await this.rebuildSearchIndexes();
        });
    }
    async initializeDefaultSettings() {
        const defaultSettings = [
            {
                key: 'storageMode',
                value: 'hybrid',
                scope: 'global',
                updatedAt: new Date()
            },
            {
                key: 'syncEnabled',
                value: true,
                scope: 'global',
                updatedAt: new Date()
            },
            {
                key: 'imageCompression',
                value: {
                    enabled: true,
                    quality: 0.8,
                    maxWidth: 1920,
                    maxHeight: 1080,
                    format: 'webp'
                },
                scope: 'global',
                updatedAt: new Date()
            },
            {
                key: 'databaseVersion',
                value: '3.0.0',
                scope: 'global',
                updatedAt: new Date()
            }
        ];
        for (const setting of defaultSettings) {
            const exists = await this.settings.where('key').equals(setting.key).first();
            if (!exists) {
                await this.settings.add(setting);
            }
        }
    }
    async rebuildSearchIndexes() {
        console.log('Rebuilding search indexes...');
        // 这里可以实现搜索索引的重建逻辑
    }
    // ============================================================================
    // 统一的CRUD操作方法
    // ============================================================================
    // 获取设置 - 支持用户级和全局设置
    async getSetting(key, userId) {
        // 优先返回用户级设置
        if (userId) {
            const userSetting = await this.settings
                .where('[key+scope]')
                .equals([key, 'user'])
                .and(setting => !setting.userId || setting.userId === userId)
                .first();
            if (userSetting)
                return userSetting.value;
        }
        // 返回全局设置
        const globalSetting = await this.settings
            .where('[key+scope]')
            .equals([key, 'global'])
            .first();
        return globalSetting?.value;
    }
    // 更新设置
    async updateSetting(key, value, scope = 'global', userId) {
        await this.settings.where('[key+scope]').equals([key, scope]).modify({
            value,
            userId,
            updatedAt: new Date()
        });
    }
    // 获取数据库统计信息
    async getStats() {
        const [cards, folders, tags, images, pendingSync] = await Promise.all([
            this.cards.count(),
            this.folders.count(),
            this.tags.count(),
            this.images.count(),
            this.syncQueue.count()
        ]);
        // 计算总大小（简化版本）
        const totalSize = await this.calculateTotalSize();
        return {
            cards,
            folders,
            tags,
            images,
            pendingSync,
            totalSize,
            version: '3.0.0'
        };
    }
    async calculateTotalSize() {
        // 计算所有图片的总大小
        const images = await this.images.toArray();
        return images.reduce((total, image) => total + image.metadata.size, 0);
    }
    // 统一的卡片操作
    async createCard(cardData, userId) {
        const id = crypto.randomUUID();
        const now = new Date();
        await this.cards.add({
            ...cardData,
            id,
            userId,
            syncVersion: 1,
            pendingSync: true,
            updatedAt: now
        });
        return id;
    }
    async updateCard(id, updates) {
        const result = await this.cards.update(id, {
            ...updates,
            syncVersion: updates.syncVersion ? updates.syncVersion + 1 : undefined,
            pendingSync: true,
            updatedAt: new Date()
        });
        return result;
    }
    async deleteCard(id) {
        await this.transaction('rw', [this.cards, this.images], async () => {
            // 删除相关图片
            await this.images.where('cardId').equals(id).delete();
            // 删除卡片
            await this.cards.delete(id);
        });
    }
    // 批量操作支持
    async bulkCreateCards(cardsData, userId) {
        const now = new Date();
        const cards = cardsData.map(cardData => ({
            ...cardData,
            id: crypto.randomUUID(),
            userId,
            syncVersion: 1,
            pendingSync: true,
            updatedAt: now
        }));
        await this.cards.bulkAdd(cards);
        return cards.map(card => card.id);
    }
    // 性能优化的查询方法
    async getCardsByFolder(folderId, userId) {
        return await this.cards
            .where('[userId+folderId]')
            .equals([userId || 'default', folderId])
            .toArray();
    }
    async searchCards(searchTerm, userId) {
        const searchLower = searchTerm.toLowerCase();
        return await this.cards
            .filter(card => card.searchVector?.includes(searchLower) ||
            card.frontContent.title.toLowerCase().includes(searchLower) ||
            card.frontContent.text.toLowerCase().includes(searchLower) ||
            card.backContent.title.toLowerCase().includes(searchLower) ||
            card.backContent.text.toLowerCase().includes(searchLower))
            .toArray();
    }
    // 数据库清理和优化
    async cleanup() {
        await this.transaction('rw', [this.cards, this.folders, this.tags, this.images, this.syncQueue], async () => {
            // 清理过期的同步操作
            const expiredDate = new Date(Date.now() - 7 * 24 * 60 * 60 * 1000); // 7天前
            await this.syncQueue.where('timestamp').below(expiredDate).delete();
            // 清理孤立图片（没有对应卡片的图片）
            const cardIds = await this.cards.toCollection().primaryKeys();
            await this.images.where('cardId').noneOf(cardIds).delete();
            console.log('Database cleanup completed');
        });
    }
    // 数据库健康检查
    async healthCheck() {
        const issues = [];
        try {
            // 检查数据库连接
            await this.tables.toArray();
            // 检查数据一致性
            const stats = await this.getStats();
            // 检查是否有大量待同步项目
            if (stats.pendingSync > 1000) {
                issues.push(`High number of pending sync operations: ${stats.pendingSync}`);
            }
            // 检查数据库大小
            if (stats.totalSize > 500 * 1024 * 1024) { // 500MB
                issues.push(`Database size is large: ${(stats.totalSize / 1024 / 1024).toFixed(2)} MB`);
            }
            return {
                isHealthy: issues.length === 0,
                issues,
                stats
            };
        }
        catch (error) {
            return {
                isHealthy: false,
                issues: [`Database connection failed: ${error}`],
                stats: { cards: 0, folders: 0, tags: 0, images: 0, pendingSync: 0, totalSize: 0, version: '3.0.0' }
            };
        }
    }
    // 完全清理数据库（谨慎使用）
    async clearAll() {
        await this.transaction('rw', [this.cards, this.folders, this.tags, this.images, this.syncQueue, this.settings, this.sessions], async () => {
            await this.cards.clear();
            await this.folders.clear();
            await this.tags.clear();
            await this.images.clear();
            await this.syncQueue.clear();
            // 保留设置，只清除用户数据
            await this.sessions.clear();
        });
    }
    // ============================================================================
    // 向后兼容的方法 - 保持现有代码不中断
    // ============================================================================
    // 旧版getSetting方法（保持兼容）
    async getSettingLegacy(key) {
        return await this.getSetting(key);
    }
    // 旧版updateSetting方法（保持兼容）
    async updateSettingLegacy(key, value) {
        await this.updateSetting(key, value);
    }
    // 旧版clearAll方法（保持兼容）
    async clearAllLegacy() {
        await this.transaction('rw', this.cards, this.folders, this.tags, this.images, this.syncQueue, async () => {
            await this.cards.clear();
            await this.folders.clear();
            await this.tags.clear();
            await this.images.clear();
            await this.syncQueue.clear();
        });
    }
    // 旧版getStats方法（保持兼容）
    async getStatsLegacy() {
        const stats = await this.getStats();
        return {
            cards: stats.cards,
            folders: stats.folders,
            tags: stats.tags,
            images: stats.images,
            pendingSync: stats.pendingSync
        };
    }
}
// ============================================================================
// 向后兼容支持
// ============================================================================
// 旧版本数据库类（用于迁移）
class CardAllDatabase_v1 extends dexie_1.default {
    constructor() {
        super('CardAllDatabase');
        Object.defineProperty(this, "cards", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: void 0
        });
        Object.defineProperty(this, "folders", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: void 0
        });
        Object.defineProperty(this, "tags", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: void 0
        });
        Object.defineProperty(this, "images", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: void 0
        });
        Object.defineProperty(this, "syncQueue", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: void 0
        });
        Object.defineProperty(this, "settings", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: void 0
        });
        this.version(1).stores({
            cards: '++id, folderId, createdAt, updatedAt, syncVersion, pendingSync',
            folders: '++id, parentId, createdAt, updatedAt, syncVersion, pendingSync',
            tags: '++id, name, createdAt, syncVersion, pendingSync',
            images: '++id, cardId, filePath, createdAt, syncVersion, pendingSync',
            syncQueue: '++id, type, entity, entityId, timestamp, retryCount',
            settings: '++id, key, updatedAt'
        });
    }
}
// 创建数据库实例
exports.db = new CardAllUnifiedDatabase();
// 数据库初始化
const initializeDatabase = async () => {
    try {
        await exports.db.open();
        console.log('CardAll unified database initialized successfully');
        // 执行健康检查
        const health = await exports.db.healthCheck();
        if (!health.isHealthy) {
            console.warn('Database health issues detected:', health.issues);
        }
        // 定期清理
        setInterval(() => {
            exports.db.cleanup().catch(console.error);
        }, 24 * 60 * 60 * 1000); // 每天清理一次
    }
    catch (error) {
        console.error('Failed to initialize database:', error);
        throw error;
    }
};
exports.initializeDatabase = initializeDatabase;
// 数据库错误处理
exports.db.on('error', (error) => {
    console.error('Database error:', error);
});
exports.db.on('blocked', () => {
    console.warn('Database operation blocked');
});
exports.db.on('versionchange', () => {
    console.warn('Database version changed, reloading page...');
    window.location.reload();
});
exports.db.on('ready', () => {
    console.log('Database is ready');
});
// ============================================================================
// 导出工具函数
// ============================================================================
// 数据转换工具
const convertToDbCard = (card, userId) => {
    return {
        ...card,
        userId,
        syncVersion: 1,
        pendingSync: true,
        updatedAt: new Date()
    };
};
exports.convertToDbCard = convertToDbCard;
const convertFromDbCard = (dbCard) => {
    const { userId, syncVersion, lastSyncAt, pendingSync, ...card } = dbCard;
    return {
        ...card,
        id: card.id || '',
        createdAt: new Date(card.createdAt),
        updatedAt: new Date(card.updatedAt)
    };
};
exports.convertFromDbCard = convertFromDbCard;
// 搜索优化工具
const generateSearchVector = (card) => {
    const searchableText = [
        card.frontContent.title,
        card.frontContent.text,
        card.backContent.title,
        card.backContent.text,
        ...card.frontContent.tags,
        ...card.backContent.tags
    ].join(' ').toLowerCase();
    return searchableText;
};
exports.generateSearchVector = generateSearchVector;
// 批量操作工具
const batchOperation = async (items, batchSize = 100, operation) => {
    for (let i = 0; i < items.length; i += batchSize) {
        const batch = items.slice(i, i + batchSize);
        await operation(batch);
    }
};
exports.batchOperation = batchOperation;
// 数据验证工具
const validateCardData = (card) => {
    const errors = [];
    if (!card.frontContent?.title) {
        errors.push('Front content title is required');
    }
    if (!card.backContent?.title) {
        errors.push('Back content title is required');
    }
    if (card.style && !['solid', 'gradient', 'glass'].includes(card.style.type)) {
        errors.push('Invalid card style type');
    }
    return errors;
};
exports.validateCardData = validateCardData;
// ============================================================================
// 性能优化和缓存
// ============================================================================
// 简单的查询缓存
const queryCache = new Map();
const CACHE_TTL = 5 * 60 * 1000; // 5分钟缓存
const cachedQuery = async (key, query) => {
    const cached = queryCache.get(key);
    if (cached && Date.now() - cached.timestamp < CACHE_TTL) {
        return cached.data;
    }
    const data = await query();
    queryCache.set(key, { data, timestamp: Date.now() });
    return data;
};
exports.cachedQuery = cachedQuery;
// 清理缓存
const clearQueryCache = () => {
    queryCache.clear();
};
exports.clearQueryCache = clearQueryCache;
// 定期清理过期缓存
setInterval(() => {
    const now = Date.now();
    for (const [key, value] of queryCache.entries()) {
        if (now - value.timestamp > CACHE_TTL) {
            queryCache.delete(key);
        }
    }
}, CACHE_TTL);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiRDpcXFByb2plY3RzXFxDYXJkRXZlcnl0aGluZ1xcY2FyZGFsbC1wcm90b3R5cGVcXHNyY1xcc2VydmljZXNcXGRhdGFiYXNlLnRzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUFBLGtEQUFvQztBQWdJcEMsK0VBQStFO0FBQy9FLFNBQVM7QUFDVCwrRUFBK0U7QUFFL0UsTUFBTSxzQkFBdUIsU0FBUSxlQUFLO0lBVXhDO1FBQ0UsS0FBSyxDQUFDLHdCQUF3QixDQUFDLENBQUE7UUFWakMsUUFBUTtRQUNSOzs7OztXQUFxQjtRQUNyQjs7Ozs7V0FBeUI7UUFDekI7Ozs7O1dBQW1CO1FBQ25COzs7OztXQUF1QjtRQUN2Qjs7Ozs7V0FBZ0M7UUFDaEM7Ozs7O1dBQTZCO1FBQzdCOzs7OztXQUE2QjtRQUszQixtQkFBbUI7UUFDbkIsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUM7WUFDckIsa0JBQWtCO1lBQ2xCLEtBQUssRUFBRSx5R0FBeUc7WUFDaEgsT0FBTyxFQUFFLDRHQUE0RztZQUNySCxJQUFJLEVBQUUsd0VBQXdFO1lBQzlFLE1BQU0sRUFBRSxvR0FBb0c7WUFFNUcsU0FBUztZQUNULFNBQVMsRUFBRSwwRkFBMEY7WUFDckcsUUFBUSxFQUFFLDBDQUEwQztZQUNwRCxRQUFRLEVBQUUsbUVBQW1FO1NBQzlFLENBQUMsQ0FBQTtRQUVGLHFCQUFxQjtRQUNyQixJQUFJLENBQUMsZUFBZSxFQUFFLENBQUE7SUFDeEIsQ0FBQztJQUVPLEtBQUssQ0FBQyxlQUFlO1FBQzNCLG9CQUFvQjtRQUNwQixJQUFJLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxLQUFLLEVBQUUsRUFBRSxFQUFFLEVBQUU7WUFDbkMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxnREFBZ0QsQ0FBQyxDQUFBO1lBRTdELGdCQUFnQjtZQUNoQixNQUFNLEtBQUssR0FBRyxJQUFJLGtCQUFrQixFQUFFLENBQUE7WUFDdEMsSUFBSSxDQUFDO2dCQUNILE1BQU0sS0FBSyxDQUFDLElBQUksRUFBRSxDQUFBO2dCQUNsQixPQUFPLENBQUMsR0FBRyxDQUFDLHVDQUF1QyxDQUFDLENBQUE7Z0JBRXBELE9BQU87Z0JBQ1AsTUFBTSxRQUFRLEdBQUcsTUFBTSxLQUFLLENBQUMsS0FBSyxDQUFDLE9BQU8sRUFBRSxDQUFBO2dCQUM1QyxNQUFNLFFBQVEsR0FBRyxRQUFRLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQztvQkFDckMsR0FBRyxJQUFJO29CQUNQLE1BQU0sRUFBRSxTQUFTLEVBQUUsU0FBUztvQkFDNUIsU0FBUyxFQUFFLElBQUksSUFBSSxFQUFFO2lCQUN0QixDQUFDLENBQUMsQ0FBQTtnQkFDSCxNQUFNLElBQUksQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFDLFFBQVEsQ0FBQyxDQUFBO2dCQUVsQyxRQUFRO2dCQUNSLE1BQU0sVUFBVSxHQUFHLE1BQU0sS0FBSyxDQUFDLE9BQU8sQ0FBQyxPQUFPLEVBQUUsQ0FBQTtnQkFDaEQsTUFBTSxVQUFVLEdBQUcsVUFBVSxDQUFDLEdBQUcsQ0FBQyxNQUFNLENBQUMsRUFBRSxDQUFDLENBQUM7b0JBQzNDLEdBQUcsTUFBTTtvQkFDVCxNQUFNLEVBQUUsU0FBUztvQkFDakIsU0FBUyxFQUFFLElBQUksSUFBSSxFQUFFO2lCQUN0QixDQUFDLENBQUMsQ0FBQTtnQkFDSCxNQUFNLElBQUksQ0FBQyxPQUFPLENBQUMsT0FBTyxDQUFDLFVBQVUsQ0FBQyxDQUFBO2dCQUV0QyxPQUFPO2dCQUNQLE1BQU0sT0FBTyxHQUFHLE1BQU0sS0FBSyxDQUFDLElBQUksQ0FBQyxPQUFPLEVBQUUsQ0FBQTtnQkFDMUMsTUFBTSxPQUFPLEdBQUcsT0FBTyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLENBQUM7b0JBQ2xDLEdBQUcsR0FBRztvQkFDTixNQUFNLEVBQUUsU0FBUztvQkFDakIsU0FBUyxFQUFFLElBQUksSUFBSSxFQUFFO2lCQUN0QixDQUFDLENBQUMsQ0FBQTtnQkFDSCxNQUFNLElBQUksQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQyxDQUFBO2dCQUVoQyxPQUFPLENBQUMsR0FBRyxDQUFDLGtDQUFrQyxDQUFDLENBQUE7WUFDakQsQ0FBQztZQUFDLE9BQU8sS0FBSyxFQUFFLENBQUM7Z0JBQ2YsT0FBTyxDQUFDLEdBQUcsQ0FBQyw0Q0FBNEMsRUFBRSxLQUFLLENBQUMsQ0FBQTtZQUNsRSxDQUFDO1FBQ0gsQ0FBQyxDQUFDLENBQUE7UUFFRix3QkFBd0I7UUFDeEIsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUMsS0FBSyxFQUFFLEVBQUUsRUFBRSxFQUFFO1lBQ25DLE9BQU8sQ0FBQyxHQUFHLENBQUMsdUVBQXVFLENBQUMsQ0FBQTtZQUVwRixTQUFTO1lBQ1QsTUFBTSxJQUFJLENBQUMseUJBQXlCLEVBQUUsQ0FBQTtZQUV0QyxTQUFTO1lBQ1QsTUFBTSxJQUFJLENBQUMsb0JBQW9CLEVBQUUsQ0FBQTtRQUNuQyxDQUFDLENBQUMsQ0FBQTtJQUNKLENBQUM7SUFFTyxLQUFLLENBQUMseUJBQXlCO1FBQ3JDLE1BQU0sZUFBZSxHQUFHO1lBQ3RCO2dCQUNFLEdBQUcsRUFBRSxhQUFhO2dCQUNsQixLQUFLLEVBQUUsUUFBUTtnQkFDZixLQUFLLEVBQUUsUUFBaUI7Z0JBQ3hCLFNBQVMsRUFBRSxJQUFJLElBQUksRUFBRTthQUN0QjtZQUNEO2dCQUNFLEdBQUcsRUFBRSxhQUFhO2dCQUNsQixLQUFLLEVBQUUsSUFBSTtnQkFDWCxLQUFLLEVBQUUsUUFBaUI7Z0JBQ3hCLFNBQVMsRUFBRSxJQUFJLElBQUksRUFBRTthQUN0QjtZQUNEO2dCQUNFLEdBQUcsRUFBRSxrQkFBa0I7Z0JBQ3ZCLEtBQUssRUFBRTtvQkFDTCxPQUFPLEVBQUUsSUFBSTtvQkFDYixPQUFPLEVBQUUsR0FBRztvQkFDWixRQUFRLEVBQUUsSUFBSTtvQkFDZCxTQUFTLEVBQUUsSUFBSTtvQkFDZixNQUFNLEVBQUUsTUFBTTtpQkFDZjtnQkFDRCxLQUFLLEVBQUUsUUFBaUI7Z0JBQ3hCLFNBQVMsRUFBRSxJQUFJLElBQUksRUFBRTthQUN0QjtZQUNEO2dCQUNFLEdBQUcsRUFBRSxpQkFBaUI7Z0JBQ3RCLEtBQUssRUFBRSxPQUFPO2dCQUNkLEtBQUssRUFBRSxRQUFpQjtnQkFDeEIsU0FBUyxFQUFFLElBQUksSUFBSSxFQUFFO2FBQ3RCO1NBQ0YsQ0FBQTtRQUVELEtBQUssTUFBTSxPQUFPLElBQUksZUFBZSxFQUFFLENBQUM7WUFDdEMsTUFBTSxNQUFNLEdBQUcsTUFBTSxJQUFJLENBQUMsUUFBUSxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUMsQ0FBQyxNQUFNLENBQUMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEtBQUssRUFBRSxDQUFBO1lBQzNFLElBQUksQ0FBQyxNQUFNLEVBQUUsQ0FBQztnQkFDWixNQUFNLElBQUksQ0FBQyxRQUFRLENBQUMsR0FBRyxDQUFDLE9BQU8sQ0FBQyxDQUFBO1lBQ2xDLENBQUM7UUFDSCxDQUFDO0lBQ0gsQ0FBQztJQUVPLEtBQUssQ0FBQyxvQkFBb0I7UUFDaEMsT0FBTyxDQUFDLEdBQUcsQ0FBQyw4QkFBOEIsQ0FBQyxDQUFBO1FBQzNDLGtCQUFrQjtJQUNwQixDQUFDO0lBRUQsK0VBQStFO0lBQy9FLGNBQWM7SUFDZCwrRUFBK0U7SUFFL0Usb0JBQW9CO0lBQ3BCLEtBQUssQ0FBQyxVQUFVLENBQUMsR0FBVyxFQUFFLE1BQWU7UUFDM0MsWUFBWTtRQUNaLElBQUksTUFBTSxFQUFFLENBQUM7WUFDWCxNQUFNLFdBQVcsR0FBRyxNQUFNLElBQUksQ0FBQyxRQUFRO2lCQUNwQyxLQUFLLENBQUMsYUFBYSxDQUFDO2lCQUNwQixNQUFNLENBQUMsQ0FBQyxHQUFHLEVBQUUsTUFBTSxDQUFDLENBQUM7aUJBQ3JCLEdBQUcsQ0FBQyxPQUFPLENBQUMsRUFBRSxDQUFDLENBQUMsT0FBTyxDQUFDLE1BQU0sSUFBSSxPQUFPLENBQUMsTUFBTSxLQUFLLE1BQU0sQ0FBQztpQkFDNUQsS0FBSyxFQUFFLENBQUE7WUFDVixJQUFJLFdBQVc7Z0JBQUUsT0FBTyxXQUFXLENBQUMsS0FBSyxDQUFBO1FBQzNDLENBQUM7UUFFRCxTQUFTO1FBQ1QsTUFBTSxhQUFhLEdBQUcsTUFBTSxJQUFJLENBQUMsUUFBUTthQUN0QyxLQUFLLENBQUMsYUFBYSxDQUFDO2FBQ3BCLE1BQU0sQ0FBQyxDQUFDLEdBQUcsRUFBRSxRQUFRLENBQUMsQ0FBQzthQUN2QixLQUFLLEVBQUUsQ0FBQTtRQUNWLE9BQU8sYUFBYSxFQUFFLEtBQUssQ0FBQTtJQUM3QixDQUFDO0lBRUQsT0FBTztJQUNQLEtBQUssQ0FBQyxhQUFhLENBQUMsR0FBVyxFQUFFLEtBQVUsRUFBRSxRQUEyQixRQUFRLEVBQUUsTUFBZTtRQUMvRixNQUFNLElBQUksQ0FBQyxRQUFRLENBQUMsS0FBSyxDQUFDLGFBQWEsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLEdBQUcsRUFBRSxLQUFLLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQztZQUNuRSxLQUFLO1lBQ0wsTUFBTTtZQUNOLFNBQVMsRUFBRSxJQUFJLElBQUksRUFBRTtTQUN0QixDQUFDLENBQUE7SUFDSixDQUFDO0lBRUQsWUFBWTtJQUNaLEtBQUssQ0FBQyxRQUFRO1FBQ1osTUFBTSxDQUFDLEtBQUssRUFBRSxPQUFPLEVBQUUsSUFBSSxFQUFFLE1BQU0sRUFBRSxXQUFXLENBQUMsR0FBRyxNQUFNLE9BQU8sQ0FBQyxHQUFHLENBQUM7WUFDcEUsSUFBSSxDQUFDLEtBQUssQ0FBQyxLQUFLLEVBQUU7WUFDbEIsSUFBSSxDQUFDLE9BQU8sQ0FBQyxLQUFLLEVBQUU7WUFDcEIsSUFBSSxDQUFDLElBQUksQ0FBQyxLQUFLLEVBQUU7WUFDakIsSUFBSSxDQUFDLE1BQU0sQ0FBQyxLQUFLLEVBQUU7WUFDbkIsSUFBSSxDQUFDLFNBQVMsQ0FBQyxLQUFLLEVBQUU7U0FDdkIsQ0FBQyxDQUFBO1FBRUYsY0FBYztRQUNkLE1BQU0sU0FBUyxHQUFHLE1BQU0sSUFBSSxDQUFDLGtCQUFrQixFQUFFLENBQUE7UUFFakQsT0FBTztZQUNMLEtBQUs7WUFDTCxPQUFPO1lBQ1AsSUFBSTtZQUNKLE1BQU07WUFDTixXQUFXO1lBQ1gsU0FBUztZQUNULE9BQU8sRUFBRSxPQUFPO1NBQ2pCLENBQUE7SUFDSCxDQUFDO0lBRU8sS0FBSyxDQUFDLGtCQUFrQjtRQUM5QixhQUFhO1FBQ2IsTUFBTSxNQUFNLEdBQUcsTUFBTSxJQUFJLENBQUMsTUFBTSxDQUFDLE9BQU8sRUFBRSxDQUFBO1FBQzFDLE9BQU8sTUFBTSxDQUFDLE1BQU0sQ0FBQyxDQUFDLEtBQUssRUFBRSxLQUFLLEVBQUUsRUFBRSxDQUFDLEtBQUssR0FBRyxLQUFLLENBQUMsUUFBUSxDQUFDLElBQUksRUFBRSxDQUFDLENBQUMsQ0FBQTtJQUN4RSxDQUFDO0lBRUQsVUFBVTtJQUNWLEtBQUssQ0FBQyxVQUFVLENBQUMsUUFBMEUsRUFBRSxNQUFlO1FBQzFHLE1BQU0sRUFBRSxHQUFHLE1BQU0sQ0FBQyxVQUFVLEVBQUUsQ0FBQTtRQUM5QixNQUFNLEdBQUcsR0FBRyxJQUFJLElBQUksRUFBRSxDQUFBO1FBRXRCLE1BQU0sSUFBSSxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUM7WUFDbkIsR0FBRyxRQUFRO1lBQ1gsRUFBRTtZQUNGLE1BQU07WUFDTixXQUFXLEVBQUUsQ0FBQztZQUNkLFdBQVcsRUFBRSxJQUFJO1lBQ2pCLFNBQVMsRUFBRSxHQUFHO1NBQ2YsQ0FBQyxDQUFBO1FBRUYsT0FBTyxFQUFFLENBQUE7SUFDWCxDQUFDO0lBRUQsS0FBSyxDQUFDLFVBQVUsQ0FBQyxFQUFVLEVBQUUsT0FBd0I7UUFDbkQsTUFBTSxNQUFNLEdBQUcsTUFBTSxJQUFJLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQyxFQUFFLEVBQUU7WUFDekMsR0FBRyxPQUFPO1lBQ1YsV0FBVyxFQUFFLE9BQU8sQ0FBQyxXQUFXLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxXQUFXLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxTQUFTO1lBQ3RFLFdBQVcsRUFBRSxJQUFJO1lBQ2pCLFNBQVMsRUFBRSxJQUFJLElBQUksRUFBRTtTQUN0QixDQUFDLENBQUE7UUFFRixPQUFPLE1BQU0sQ0FBQTtJQUNmLENBQUM7SUFFRCxLQUFLLENBQUMsVUFBVSxDQUFDLEVBQVU7UUFDekIsTUFBTSxJQUFJLENBQUMsV0FBVyxDQUFDLElBQUksRUFBRSxDQUFDLElBQUksQ0FBQyxLQUFLLEVBQUUsSUFBSSxDQUFDLE1BQU0sQ0FBQyxFQUFFLEtBQUssSUFBSSxFQUFFO1lBQ2pFLFNBQVM7WUFDVCxNQUFNLElBQUksQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLFFBQVEsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxFQUFFLENBQUMsQ0FBQyxNQUFNLEVBQUUsQ0FBQTtZQUNyRCxPQUFPO1lBQ1AsTUFBTSxJQUFJLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQyxFQUFFLENBQUMsQ0FBQTtRQUM3QixDQUFDLENBQUMsQ0FBQTtJQUNKLENBQUM7SUFFRCxTQUFTO0lBQ1QsS0FBSyxDQUFDLGVBQWUsQ0FBQyxTQUE2RSxFQUFFLE1BQWU7UUFDbEgsTUFBTSxHQUFHLEdBQUcsSUFBSSxJQUFJLEVBQUUsQ0FBQTtRQUN0QixNQUFNLEtBQUssR0FBRyxTQUFTLENBQUMsR0FBRyxDQUFDLFFBQVEsQ0FBQyxFQUFFLENBQUMsQ0FBQztZQUN2QyxHQUFHLFFBQVE7WUFDWCxFQUFFLEVBQUUsTUFBTSxDQUFDLFVBQVUsRUFBRTtZQUN2QixNQUFNO1lBQ04sV0FBVyxFQUFFLENBQUM7WUFDZCxXQUFXLEVBQUUsSUFBSTtZQUNqQixTQUFTLEVBQUUsR0FBRztTQUNmLENBQUMsQ0FBQyxDQUFBO1FBRUgsTUFBTSxJQUFJLENBQUMsS0FBSyxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUMsQ0FBQTtRQUMvQixPQUFPLEtBQUssQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxJQUFJLENBQUMsRUFBRyxDQUFDLENBQUE7SUFDcEMsQ0FBQztJQUVELFlBQVk7SUFDWixLQUFLLENBQUMsZ0JBQWdCLENBQUMsUUFBZ0IsRUFBRSxNQUFlO1FBQ3RELE9BQU8sTUFBTSxJQUFJLENBQUMsS0FBSzthQUNwQixLQUFLLENBQUMsbUJBQW1CLENBQUM7YUFDMUIsTUFBTSxDQUFDLENBQUMsTUFBTSxJQUFJLFNBQVMsRUFBRSxRQUFRLENBQUMsQ0FBQzthQUN2QyxPQUFPLEVBQUUsQ0FBQTtJQUNkLENBQUM7SUFFRCxLQUFLLENBQUMsV0FBVyxDQUFDLFVBQWtCLEVBQUUsTUFBZTtRQUNuRCxNQUFNLFdBQVcsR0FBRyxVQUFVLENBQUMsV0FBVyxFQUFFLENBQUE7UUFDNUMsT0FBTyxNQUFNLElBQUksQ0FBQyxLQUFLO2FBQ3BCLE1BQU0sQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUNiLElBQUksQ0FBQyxZQUFZLEVBQUUsUUFBUSxDQUFDLFdBQVcsQ0FBQztZQUN4QyxJQUFJLENBQUMsWUFBWSxDQUFDLEtBQUssQ0FBQyxXQUFXLEVBQUUsQ0FBQyxRQUFRLENBQUMsV0FBVyxDQUFDO1lBQzNELElBQUksQ0FBQyxZQUFZLENBQUMsSUFBSSxDQUFDLFdBQVcsRUFBRSxDQUFDLFFBQVEsQ0FBQyxXQUFXLENBQUM7WUFDMUQsSUFBSSxDQUFDLFdBQVcsQ0FBQyxLQUFLLENBQUMsV0FBVyxFQUFFLENBQUMsUUFBUSxDQUFDLFdBQVcsQ0FBQztZQUMxRCxJQUFJLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQyxXQUFXLEVBQUUsQ0FBQyxRQUFRLENBQUMsV0FBVyxDQUFDLENBQzFEO2FBQ0EsT0FBTyxFQUFFLENBQUE7SUFDZCxDQUFDO0lBRUQsV0FBVztJQUNYLEtBQUssQ0FBQyxPQUFPO1FBQ1gsTUFBTSxJQUFJLENBQUMsV0FBVyxDQUFDLElBQUksRUFBRSxDQUFDLElBQUksQ0FBQyxLQUFLLEVBQUUsSUFBSSxDQUFDLE9BQU8sRUFBRSxJQUFJLENBQUMsSUFBSSxFQUFFLElBQUksQ0FBQyxNQUFNLEVBQUUsSUFBSSxDQUFDLFNBQVMsQ0FBQyxFQUFFLEtBQUssSUFBSSxFQUFFO1lBQzFHLFlBQVk7WUFDWixNQUFNLFdBQVcsR0FBRyxJQUFJLElBQUksQ0FBQyxJQUFJLENBQUMsR0FBRyxFQUFFLEdBQUcsQ0FBQyxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLElBQUksQ0FBQyxDQUFBLENBQUMsTUFBTTtZQUN6RSxNQUFNLElBQUksQ0FBQyxTQUFTLENBQUMsS0FBSyxDQUFDLFdBQVcsQ0FBQyxDQUFDLEtBQUssQ0FBQyxXQUFXLENBQUMsQ0FBQyxNQUFNLEVBQUUsQ0FBQTtZQUVuRSxvQkFBb0I7WUFDcEIsTUFBTSxPQUFPLEdBQUcsTUFBTSxJQUFJLENBQUMsS0FBSyxDQUFDLFlBQVksRUFBRSxDQUFDLFdBQVcsRUFBRSxDQUFBO1lBQzdELE1BQU0sSUFBSSxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsUUFBUSxDQUFDLENBQUMsTUFBTSxDQUFDLE9BQW1CLENBQUMsQ0FBQyxNQUFNLEVBQUUsQ0FBQTtZQUV0RSxPQUFPLENBQUMsR0FBRyxDQUFDLDRCQUE0QixDQUFDLENBQUE7UUFDM0MsQ0FBQyxDQUFDLENBQUE7SUFDSixDQUFDO0lBRUQsVUFBVTtJQUNWLEtBQUssQ0FBQyxXQUFXO1FBS2YsTUFBTSxNQUFNLEdBQWEsRUFBRSxDQUFBO1FBRTNCLElBQUksQ0FBQztZQUNILFVBQVU7WUFDVixNQUFNLElBQUksQ0FBQyxNQUFNLENBQUMsT0FBTyxFQUFFLENBQUE7WUFFM0IsVUFBVTtZQUNWLE1BQU0sS0FBSyxHQUFHLE1BQU0sSUFBSSxDQUFDLFFBQVEsRUFBRSxDQUFBO1lBRW5DLGVBQWU7WUFDZixJQUFJLEtBQUssQ0FBQyxXQUFXLEdBQUcsSUFBSSxFQUFFLENBQUM7Z0JBQzdCLE1BQU0sQ0FBQyxJQUFJLENBQUMsMkNBQTJDLEtBQUssQ0FBQyxXQUFXLEVBQUUsQ0FBQyxDQUFBO1lBQzdFLENBQUM7WUFFRCxVQUFVO1lBQ1YsSUFBSSxLQUFLLENBQUMsU0FBUyxHQUFHLEdBQUcsR0FBRyxJQUFJLEdBQUcsSUFBSSxFQUFFLENBQUMsQ0FBQyxRQUFRO2dCQUNqRCxNQUFNLENBQUMsSUFBSSxDQUFDLDJCQUEyQixDQUFDLEtBQUssQ0FBQyxTQUFTLEdBQUcsSUFBSSxHQUFHLElBQUksQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUE7WUFDekYsQ0FBQztZQUVELE9BQU87Z0JBQ0wsU0FBUyxFQUFFLE1BQU0sQ0FBQyxNQUFNLEtBQUssQ0FBQztnQkFDOUIsTUFBTTtnQkFDTixLQUFLO2FBQ04sQ0FBQTtRQUNILENBQUM7UUFBQyxPQUFPLEtBQUssRUFBRSxDQUFDO1lBQ2YsT0FBTztnQkFDTCxTQUFTLEVBQUUsS0FBSztnQkFDaEIsTUFBTSxFQUFFLENBQUMsK0JBQStCLEtBQUssRUFBRSxDQUFDO2dCQUNoRCxLQUFLLEVBQUUsRUFBRSxLQUFLLEVBQUUsQ0FBQyxFQUFFLE9BQU8sRUFBRSxDQUFDLEVBQUUsSUFBSSxFQUFFLENBQUMsRUFBRSxNQUFNLEVBQUUsQ0FBQyxFQUFFLFdBQVcsRUFBRSxDQUFDLEVBQUUsU0FBUyxFQUFFLENBQUMsRUFBRSxPQUFPLEVBQUUsT0FBTyxFQUFFO2FBQ3BHLENBQUE7UUFDSCxDQUFDO0lBQ0gsQ0FBQztJQUVELGdCQUFnQjtJQUNoQixLQUFLLENBQUMsUUFBUTtRQUNaLE1BQU0sSUFBSSxDQUFDLFdBQVcsQ0FBQyxJQUFJLEVBQUUsQ0FBQyxJQUFJLENBQUMsS0FBSyxFQUFFLElBQUksQ0FBQyxPQUFPLEVBQUUsSUFBSSxDQUFDLElBQUksRUFBRSxJQUFJLENBQUMsTUFBTSxFQUFFLElBQUksQ0FBQyxTQUFTLEVBQUUsSUFBSSxDQUFDLFFBQVEsRUFBRSxJQUFJLENBQUMsUUFBUSxDQUFDLEVBQUUsS0FBSyxJQUFJLEVBQUU7WUFDeEksTUFBTSxJQUFJLENBQUMsS0FBSyxDQUFDLEtBQUssRUFBRSxDQUFBO1lBQ3hCLE1BQU0sSUFBSSxDQUFDLE9BQU8sQ0FBQyxLQUFLLEVBQUUsQ0FBQTtZQUMxQixNQUFNLElBQUksQ0FBQyxJQUFJLENBQUMsS0FBSyxFQUFFLENBQUE7WUFDdkIsTUFBTSxJQUFJLENBQUMsTUFBTSxDQUFDLEtBQUssRUFBRSxDQUFBO1lBQ3pCLE1BQU0sSUFBSSxDQUFDLFNBQVMsQ0FBQyxLQUFLLEVBQUUsQ0FBQTtZQUM1QixlQUFlO1lBQ2YsTUFBTSxJQUFJLENBQUMsUUFBUSxDQUFDLEtBQUssRUFBRSxDQUFBO1FBQzdCLENBQUMsQ0FBQyxDQUFBO0lBQ0osQ0FBQztJQUVELCtFQUErRTtJQUMvRSxzQkFBc0I7SUFDdEIsK0VBQStFO0lBRS9FLHVCQUF1QjtJQUN2QixLQUFLLENBQUMsZ0JBQWdCLENBQUMsR0FBVztRQUNoQyxPQUFPLE1BQU0sSUFBSSxDQUFDLFVBQVUsQ0FBQyxHQUFHLENBQUMsQ0FBQTtJQUNuQyxDQUFDO0lBRUQsMEJBQTBCO0lBQzFCLEtBQUssQ0FBQyxtQkFBbUIsQ0FBQyxHQUFXLEVBQUUsS0FBVTtRQUMvQyxNQUFNLElBQUksQ0FBQyxhQUFhLENBQUMsR0FBRyxFQUFFLEtBQUssQ0FBQyxDQUFBO0lBQ3RDLENBQUM7SUFFRCxxQkFBcUI7SUFDckIsS0FBSyxDQUFDLGNBQWM7UUFDbEIsTUFBTSxJQUFJLENBQUMsV0FBVyxDQUFDLElBQUksRUFBRSxJQUFJLENBQUMsS0FBSyxFQUFFLElBQUksQ0FBQyxPQUFPLEVBQUUsSUFBSSxDQUFDLElBQUksRUFBRSxJQUFJLENBQUMsTUFBTSxFQUFFLElBQUksQ0FBQyxTQUFTLEVBQUUsS0FBSyxJQUFJLEVBQUU7WUFDeEcsTUFBTSxJQUFJLENBQUMsS0FBSyxDQUFDLEtBQUssRUFBRSxDQUFBO1lBQ3hCLE1BQU0sSUFBSSxDQUFDLE9BQU8sQ0FBQyxLQUFLLEVBQUUsQ0FBQTtZQUMxQixNQUFNLElBQUksQ0FBQyxJQUFJLENBQUMsS0FBSyxFQUFFLENBQUE7WUFDdkIsTUFBTSxJQUFJLENBQUMsTUFBTSxDQUFDLEtBQUssRUFBRSxDQUFBO1lBQ3pCLE1BQU0sSUFBSSxDQUFDLFNBQVMsQ0FBQyxLQUFLLEVBQUUsQ0FBQTtRQUM5QixDQUFDLENBQUMsQ0FBQTtJQUNKLENBQUM7SUFFRCxxQkFBcUI7SUFDckIsS0FBSyxDQUFDLGNBQWM7UUFPbEIsTUFBTSxLQUFLLEdBQUcsTUFBTSxJQUFJLENBQUMsUUFBUSxFQUFFLENBQUE7UUFDbkMsT0FBTztZQUNMLEtBQUssRUFBRSxLQUFLLENBQUMsS0FBSztZQUNsQixPQUFPLEVBQUUsS0FBSyxDQUFDLE9BQU87WUFDdEIsSUFBSSxFQUFFLEtBQUssQ0FBQyxJQUFJO1lBQ2hCLE1BQU0sRUFBRSxLQUFLLENBQUMsTUFBTTtZQUNwQixXQUFXLEVBQUUsS0FBSyxDQUFDLFdBQVc7U0FDL0IsQ0FBQTtJQUNILENBQUM7Q0FDRjtBQUVELCtFQUErRTtBQUMvRSxTQUFTO0FBQ1QsK0VBQStFO0FBRS9FLGdCQUFnQjtBQUNoQixNQUFNLGtCQUFtQixTQUFRLGVBQUs7SUFRcEM7UUFDRSxLQUFLLENBQUMsaUJBQWlCLENBQUMsQ0FBQTtRQVIxQjs7Ozs7V0FBa0I7UUFDbEI7Ozs7O1dBQW9CO1FBQ3BCOzs7OztXQUFpQjtRQUNqQjs7Ozs7V0FBbUI7UUFDbkI7Ozs7O1dBQXNCO1FBQ3RCOzs7OztXQUFxQjtRQUluQixJQUFJLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQztZQUNyQixLQUFLLEVBQUUsZ0VBQWdFO1lBQ3ZFLE9BQU8sRUFBRSxnRUFBZ0U7WUFDekUsSUFBSSxFQUFFLGlEQUFpRDtZQUN2RCxNQUFNLEVBQUUsNkRBQTZEO1lBQ3JFLFNBQVMsRUFBRSxxREFBcUQ7WUFDaEUsUUFBUSxFQUFFLHNCQUFzQjtTQUNqQyxDQUFDLENBQUE7SUFDSixDQUFDO0NBQ0Y7QUFFRCxVQUFVO0FBQ0csUUFBQSxFQUFFLEdBQUcsSUFBSSxzQkFBc0IsRUFBRSxDQUFBO0FBRTlDLFNBQVM7QUFDRixNQUFNLGtCQUFrQixHQUFHLEtBQUssSUFBbUIsRUFBRTtJQUMxRCxJQUFJLENBQUM7UUFDSCxNQUFNLFVBQUUsQ0FBQyxJQUFJLEVBQUUsQ0FBQTtRQUNmLE9BQU8sQ0FBQyxHQUFHLENBQUMsbURBQW1ELENBQUMsQ0FBQTtRQUVoRSxTQUFTO1FBQ1QsTUFBTSxNQUFNLEdBQUcsTUFBTSxVQUFFLENBQUMsV0FBVyxFQUFFLENBQUE7UUFDckMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxTQUFTLEVBQUUsQ0FBQztZQUN0QixPQUFPLENBQUMsSUFBSSxDQUFDLGtDQUFrQyxFQUFFLE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQTtRQUNqRSxDQUFDO1FBRUQsT0FBTztRQUNQLFdBQVcsQ0FBQyxHQUFHLEVBQUU7WUFDZixVQUFFLENBQUMsT0FBTyxFQUFFLENBQUMsS0FBSyxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUMsQ0FBQTtRQUNuQyxDQUFDLEVBQUUsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsSUFBSSxDQUFDLENBQUEsQ0FBQyxTQUFTO0lBRW5DLENBQUM7SUFBQyxPQUFPLEtBQUssRUFBRSxDQUFDO1FBQ2YsT0FBTyxDQUFDLEtBQUssQ0FBQyxnQ0FBZ0MsRUFBRSxLQUFLLENBQUMsQ0FBQTtRQUN0RCxNQUFNLEtBQUssQ0FBQTtJQUNiLENBQUM7QUFDSCxDQUFDLENBQUE7QUFwQlksUUFBQSxrQkFBa0Isc0JBb0I5QjtBQUVELFVBQVU7QUFDVixVQUFFLENBQUMsRUFBRSxDQUFDLE9BQU8sRUFBRSxDQUFDLEtBQUssRUFBRSxFQUFFO0lBQ3ZCLE9BQU8sQ0FBQyxLQUFLLENBQUMsaUJBQWlCLEVBQUUsS0FBSyxDQUFDLENBQUE7QUFDekMsQ0FBQyxDQUFDLENBQUE7QUFFRixVQUFFLENBQUMsRUFBRSxDQUFDLFNBQVMsRUFBRSxHQUFHLEVBQUU7SUFDcEIsT0FBTyxDQUFDLElBQUksQ0FBQyw0QkFBNEIsQ0FBQyxDQUFBO0FBQzVDLENBQUMsQ0FBQyxDQUFBO0FBRUYsVUFBRSxDQUFDLEVBQUUsQ0FBQyxlQUFlLEVBQUUsR0FBRyxFQUFFO0lBQzFCLE9BQU8sQ0FBQyxJQUFJLENBQUMsNkNBQTZDLENBQUMsQ0FBQTtJQUMzRCxNQUFNLENBQUMsUUFBUSxDQUFDLE1BQU0sRUFBRSxDQUFBO0FBQzFCLENBQUMsQ0FBQyxDQUFBO0FBRUYsVUFBRSxDQUFDLEVBQUUsQ0FBQyxPQUFPLEVBQUUsR0FBRyxFQUFFO0lBQ2xCLE9BQU8sQ0FBQyxHQUFHLENBQUMsbUJBQW1CLENBQUMsQ0FBQTtBQUNsQyxDQUFDLENBQUMsQ0FBQTtBQUVGLCtFQUErRTtBQUMvRSxTQUFTO0FBQ1QsK0VBQStFO0FBRS9FLFNBQVM7QUFDRixNQUFNLGVBQWUsR0FBRyxDQUFDLElBQVUsRUFBRSxNQUFlLEVBQVUsRUFBRTtJQUNyRSxPQUFPO1FBQ0wsR0FBRyxJQUFJO1FBQ1AsTUFBTTtRQUNOLFdBQVcsRUFBRSxDQUFDO1FBQ2QsV0FBVyxFQUFFLElBQUk7UUFDakIsU0FBUyxFQUFFLElBQUksSUFBSSxFQUFFO0tBQ3RCLENBQUE7QUFDSCxDQUFDLENBQUE7QUFSWSxRQUFBLGVBQWUsbUJBUTNCO0FBRU0sTUFBTSxpQkFBaUIsR0FBRyxDQUFDLE1BQWMsRUFBUSxFQUFFO0lBQ3hELE1BQU0sRUFBRSxNQUFNLEVBQUUsV0FBVyxFQUFFLFVBQVUsRUFBRSxXQUFXLEVBQUUsR0FBRyxJQUFJLEVBQUUsR0FBRyxNQUFNLENBQUE7SUFDeEUsT0FBTztRQUNMLEdBQUcsSUFBSTtRQUNQLEVBQUUsRUFBRSxJQUFJLENBQUMsRUFBRSxJQUFJLEVBQUU7UUFDakIsU0FBUyxFQUFFLElBQUksSUFBSSxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUM7UUFDbkMsU0FBUyxFQUFFLElBQUksSUFBSSxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUM7S0FDcEMsQ0FBQTtBQUNILENBQUMsQ0FBQTtBQVJZLFFBQUEsaUJBQWlCLHFCQVE3QjtBQUVELFNBQVM7QUFDRixNQUFNLG9CQUFvQixHQUFHLENBQUMsSUFBVSxFQUFVLEVBQUU7SUFDekQsTUFBTSxjQUFjLEdBQUc7UUFDckIsSUFBSSxDQUFDLFlBQVksQ0FBQyxLQUFLO1FBQ3ZCLElBQUksQ0FBQyxZQUFZLENBQUMsSUFBSTtRQUN0QixJQUFJLENBQUMsV0FBVyxDQUFDLEtBQUs7UUFDdEIsSUFBSSxDQUFDLFdBQVcsQ0FBQyxJQUFJO1FBQ3JCLEdBQUcsSUFBSSxDQUFDLFlBQVksQ0FBQyxJQUFJO1FBQ3pCLEdBQUcsSUFBSSxDQUFDLFdBQVcsQ0FBQyxJQUFJO0tBQ3pCLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLFdBQVcsRUFBRSxDQUFBO0lBRXpCLE9BQU8sY0FBYyxDQUFBO0FBQ3ZCLENBQUMsQ0FBQTtBQVhZLFFBQUEsb0JBQW9CLHdCQVdoQztBQUVELFNBQVM7QUFDRixNQUFNLGNBQWMsR0FBRyxLQUFLLEVBQ2pDLEtBQVUsRUFDVixZQUFvQixHQUFHLEVBQ3ZCLFNBQXdDLEVBQ3pCLEVBQUU7SUFDakIsS0FBSyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLEtBQUssQ0FBQyxNQUFNLEVBQUUsQ0FBQyxJQUFJLFNBQVMsRUFBRSxDQUFDO1FBQ2pELE1BQU0sS0FBSyxHQUFHLEtBQUssQ0FBQyxLQUFLLENBQUMsQ0FBQyxFQUFFLENBQUMsR0FBRyxTQUFTLENBQUMsQ0FBQTtRQUMzQyxNQUFNLFNBQVMsQ0FBQyxLQUFLLENBQUMsQ0FBQTtJQUN4QixDQUFDO0FBQ0gsQ0FBQyxDQUFBO0FBVFksUUFBQSxjQUFjLGtCQVMxQjtBQUVELFNBQVM7QUFDRixNQUFNLGdCQUFnQixHQUFHLENBQUMsSUFBbUIsRUFBWSxFQUFFO0lBQ2hFLE1BQU0sTUFBTSxHQUFhLEVBQUUsQ0FBQTtJQUUzQixJQUFJLENBQUMsSUFBSSxDQUFDLFlBQVksRUFBRSxLQUFLLEVBQUUsQ0FBQztRQUM5QixNQUFNLENBQUMsSUFBSSxDQUFDLGlDQUFpQyxDQUFDLENBQUE7SUFDaEQsQ0FBQztJQUVELElBQUksQ0FBQyxJQUFJLENBQUMsV0FBVyxFQUFFLEtBQUssRUFBRSxDQUFDO1FBQzdCLE1BQU0sQ0FBQyxJQUFJLENBQUMsZ0NBQWdDLENBQUMsQ0FBQTtJQUMvQyxDQUFDO0lBRUQsSUFBSSxJQUFJLENBQUMsS0FBSyxJQUFJLENBQUMsQ0FBQyxPQUFPLEVBQUUsVUFBVSxFQUFFLE9BQU8sQ0FBQyxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUM7UUFDNUUsTUFBTSxDQUFDLElBQUksQ0FBQyx5QkFBeUIsQ0FBQyxDQUFBO0lBQ3hDLENBQUM7SUFFRCxPQUFPLE1BQU0sQ0FBQTtBQUNmLENBQUMsQ0FBQTtBQWhCWSxRQUFBLGdCQUFnQixvQkFnQjVCO0FBRUQsK0VBQStFO0FBQy9FLFVBQVU7QUFDViwrRUFBK0U7QUFFL0UsVUFBVTtBQUNWLE1BQU0sVUFBVSxHQUFHLElBQUksR0FBRyxFQUE0QyxDQUFBO0FBQ3RFLE1BQU0sU0FBUyxHQUFHLENBQUMsR0FBRyxFQUFFLEdBQUcsSUFBSSxDQUFBLENBQUMsUUFBUTtBQUVqQyxNQUFNLFdBQVcsR0FBRyxLQUFLLEVBQzlCLEdBQVcsRUFDWCxLQUF1QixFQUNYLEVBQUU7SUFDZCxNQUFNLE1BQU0sR0FBRyxVQUFVLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFBO0lBQ2xDLElBQUksTUFBTSxJQUFJLElBQUksQ0FBQyxHQUFHLEVBQUUsR0FBRyxNQUFNLENBQUMsU0FBUyxHQUFHLFNBQVMsRUFBRSxDQUFDO1FBQ3hELE9BQU8sTUFBTSxDQUFDLElBQUksQ0FBQTtJQUNwQixDQUFDO0lBRUQsTUFBTSxJQUFJLEdBQUcsTUFBTSxLQUFLLEVBQUUsQ0FBQTtJQUMxQixVQUFVLENBQUMsR0FBRyxDQUFDLEdBQUcsRUFBRSxFQUFFLElBQUksRUFBRSxTQUFTLEVBQUUsSUFBSSxDQUFDLEdBQUcsRUFBRSxFQUFFLENBQUMsQ0FBQTtJQUNwRCxPQUFPLElBQUksQ0FBQTtBQUNiLENBQUMsQ0FBQTtBQVpZLFFBQUEsV0FBVyxlQVl2QjtBQUVELE9BQU87QUFDQSxNQUFNLGVBQWUsR0FBRyxHQUFTLEVBQUU7SUFDeEMsVUFBVSxDQUFDLEtBQUssRUFBRSxDQUFBO0FBQ3BCLENBQUMsQ0FBQTtBQUZZLFFBQUEsZUFBZSxtQkFFM0I7QUFFRCxXQUFXO0FBQ1gsV0FBVyxDQUFDLEdBQUcsRUFBRTtJQUNmLE1BQU0sR0FBRyxHQUFHLElBQUksQ0FBQyxHQUFHLEVBQUUsQ0FBQTtJQUN0QixLQUFLLE1BQU0sQ0FBQyxHQUFHLEVBQUUsS0FBSyxDQUFDLElBQUksVUFBVSxDQUFDLE9BQU8sRUFBRSxFQUFFLENBQUM7UUFDaEQsSUFBSSxHQUFHLEdBQUcsS0FBSyxDQUFDLFNBQVMsR0FBRyxTQUFTLEVBQUUsQ0FBQztZQUN0QyxVQUFVLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFBO1FBQ3hCLENBQUM7SUFDSCxDQUFDO0FBQ0gsQ0FBQyxFQUFFLFNBQVMsQ0FBQyxDQUFBIiwibmFtZXMiOltdLCJzb3VyY2VzIjpbIkQ6XFxQcm9qZWN0c1xcQ2FyZEV2ZXJ5dGhpbmdcXGNhcmRhbGwtcHJvdG90eXBlXFxzcmNcXHNlcnZpY2VzXFxkYXRhYmFzZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgRGV4aWUsIHsgVGFibGUgfSBmcm9tICdkZXhpZSdcclxuaW1wb3J0IHsgQ2FyZCwgRm9sZGVyLCBUYWcsIEltYWdlRGF0YSB9IGZyb20gJ0AvdHlwZXMvY2FyZCdcclxuXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuLy8g57uf5LiA5pWw5o2u5bqT57G75Z6L5a6a5LmJIC0g6Kej5Yaz5pWw5o2u5bqT5p625p6E57uf5LiAXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuXHJcbi8vIOWfuuehgOWQjOatpeaOpeWPo1xyXG5leHBvcnQgaW50ZXJmYWNlIFN5bmNhYmxlRW50aXR5IHtcclxuICBpZD86IHN0cmluZ1xyXG4gIHVzZXJJZD86IHN0cmluZ1xyXG4gIHN5bmNWZXJzaW9uOiBudW1iZXJcclxuICBsYXN0U3luY0F0PzogRGF0ZVxyXG4gIHBlbmRpbmdTeW5jOiBib29sZWFuXHJcbiAgdXBkYXRlZEF0OiBEYXRlXHJcbn1cclxuXHJcbi8vIOaJqeWxleeahOaVsOaNruW6k+WNoeeJh+WunuS9k1xyXG5leHBvcnQgaW50ZXJmYWNlIERiQ2FyZCBleHRlbmRzIE9taXQ8Q2FyZCwgJ2lkJz4sIFN5bmNhYmxlRW50aXR5IHtcclxuICBpZD86IHN0cmluZ1xyXG4gIC8vIOS/neaMgeWQkeWQjuWFvOWuueeahOWtl+autVxyXG4gIGZvbGRlcklkPzogc3RyaW5nXHJcbiAgLy8g5paw5aKe5a2X5q6155So5LqO5LyY5YyW5p+l6K+iXHJcbiAgc2VhcmNoVmVjdG9yPzogc3RyaW5nIC8vIOWFqOaWh+aQnOe0ouS8mOWMllxyXG4gIHRodW1ibmFpbFVybD86IHN0cmluZyAvLyDljaHniYfnvKnnlaXlm75cclxufVxyXG5cclxuLy8g5omp5bGV55qE5pWw5o2u5bqT5paH5Lu25aS55a6e5L2TXHJcbmV4cG9ydCBpbnRlcmZhY2UgRGJGb2xkZXIgZXh0ZW5kcyBPbWl0PEZvbGRlciwgJ2lkJz4sIFN5bmNhYmxlRW50aXR5IHtcclxuICBpZD86IHN0cmluZ1xyXG4gIC8vIOaWsOWinuWtl+auteeUqOS6juS8mOWMluafpeivolxyXG4gIGZ1bGxQYXRoPzogc3RyaW5nIC8vIOWujOaVtOi3r+W+hOeUqOS6juW/q+mAn+afpeaJvlxyXG4gIGRlcHRoPzogbnVtYmVyIC8vIOaWh+S7tuWkuea3seW6plxyXG59XHJcblxyXG4vLyDmianlsZXnmoTmlbDmja7lupPmoIfnrb7lrp7kvZNcclxuZXhwb3J0IGludGVyZmFjZSBEYlRhZyBleHRlbmRzIE9taXQ8VGFnLCAnaWQnPiwgU3luY2FibGVFbnRpdHkge1xyXG4gIGlkPzogc3RyaW5nXHJcbiAgLy8g5L+d5oyB5ZCR5ZCO5YW85a65XHJcbiAgY291bnQ6IG51bWJlclxyXG59XHJcblxyXG4vLyDlm77niYflrZjlgqjlrp7kvZMgLSDnu5/kuIDlm77niYfnrqHnkIZcclxuZXhwb3J0IGludGVyZmFjZSBEYkltYWdlIHtcclxuICBpZD86IHN0cmluZ1xyXG4gIGNhcmRJZDogc3RyaW5nXHJcbiAgdXNlcklkPzogc3RyaW5nXHJcbiAgZmlsZU5hbWU6IHN0cmluZ1xyXG4gIGZpbGVQYXRoOiBzdHJpbmdcclxuICBjbG91ZFVybD86IHN0cmluZ1xyXG4gIHRodW1ibmFpbFBhdGg/OiBzdHJpbmdcclxuICBtZXRhZGF0YToge1xyXG4gICAgb3JpZ2luYWxOYW1lOiBzdHJpbmdcclxuICAgIHNpemU6IG51bWJlclxyXG4gICAgd2lkdGg6IG51bWJlclxyXG4gICAgaGVpZ2h0OiBudW1iZXJcclxuICAgIGZvcm1hdDogc3RyaW5nXHJcbiAgICBjb21wcmVzc2VkOiBib29sZWFuXHJcbiAgICBxdWFsaXR5PzogbnVtYmVyXHJcbiAgfVxyXG4gIHN0b3JhZ2VNb2RlOiAnaW5kZXhlZGRiJyB8ICdmaWxlc3lzdGVtJyB8ICdjbG91ZCdcclxuICBjcmVhdGVkQXQ6IERhdGVcclxuICB1cGRhdGVkQXQ6IERhdGVcclxuICBzeW5jVmVyc2lvbjogbnVtYmVyXHJcbiAgbGFzdFN5bmNBdD86IERhdGVcclxuICBwZW5kaW5nU3luYzogYm9vbGVhblxyXG59XHJcblxyXG4vLyDlkIzmraXmk43kvZzpmJ/liJcgLSDnu5/kuIDlkIzmraXpgLvovpFcclxuZXhwb3J0IGludGVyZmFjZSBTeW5jT3BlcmF0aW9uIHtcclxuICBpZD86IHN0cmluZ1xyXG4gIHR5cGU6ICdjcmVhdGUnIHwgJ3VwZGF0ZScgfCAnZGVsZXRlJ1xyXG4gIGVudGl0eTogJ2NhcmQnIHwgJ2ZvbGRlcicgfCAndGFnJyB8ICdpbWFnZSdcclxuICBlbnRpdHlJZDogc3RyaW5nXHJcbiAgdXNlcklkPzogc3RyaW5nXHJcbiAgZGF0YT86IGFueVxyXG4gIHRpbWVzdGFtcDogRGF0ZVxyXG4gIHJldHJ5Q291bnQ6IG51bWJlclxyXG4gIG1heFJldHJpZXM6IG51bWJlclxyXG4gIGVycm9yPzogc3RyaW5nXHJcbiAgcHJpb3JpdHk6ICdoaWdoJyB8ICdub3JtYWwnIHwgJ2xvdydcclxufVxyXG5cclxuLy8g5bqU55So6K6+572uIC0g57uf5LiA6YWN572u566h55CGXHJcbmV4cG9ydCBpbnRlcmZhY2UgQXBwU2V0dGluZ3Mge1xyXG4gIGlkPzogc3RyaW5nXHJcbiAga2V5OiBzdHJpbmdcclxuICB2YWx1ZTogYW55XHJcbiAgdXBkYXRlZEF0OiBEYXRlXHJcbiAgc2NvcGU6ICd1c2VyJyB8ICdnbG9iYWwnIC8vIOiuvue9ruS9nOeUqOWfn1xyXG59XHJcblxyXG4vLyDnlKjmiLfkvJror53kv6Hmga9cclxuZXhwb3J0IGludGVyZmFjZSBVc2VyU2Vzc2lvbiB7XHJcbiAgaWQ/OiBzdHJpbmdcclxuICB1c2VySWQ6IHN0cmluZ1xyXG4gIGRldmljZUlkOiBzdHJpbmdcclxuICB0b2tlbj86IHN0cmluZ1xyXG4gIGV4cGlyZXNBdD86IERhdGVcclxuICBsYXN0QWN0aXZpdHk6IERhdGVcclxuICBpc0FjdGl2ZTogYm9vbGVhblxyXG59XHJcblxyXG4vLyDmlbDmja7lupPnu5/orqHkv6Hmga9cclxuZXhwb3J0IGludGVyZmFjZSBEYXRhYmFzZVN0YXRzIHtcclxuICBjYXJkczogbnVtYmVyXHJcbiAgZm9sZGVyczogbnVtYmVyXHJcbiAgdGFnczogbnVtYmVyXHJcbiAgaW1hZ2VzOiBudW1iZXJcclxuICBwZW5kaW5nU3luYzogbnVtYmVyXHJcbiAgdG90YWxTaXplOiBudW1iZXJcclxuICBsYXN0QmFja3VwPzogRGF0ZVxyXG4gIHZlcnNpb246IHN0cmluZ1xyXG59XHJcblxyXG4vLyDlkJHlkI7lhbzlrrnnmoTml6fmjqXlj6PvvIjkv53mjIHnjrDmnInku6PnoIHkuI3kuK3mlq3vvIlcclxuZXhwb3J0IGludGVyZmFjZSBMZWdhY3lTeW5jT3BlcmF0aW9uIHtcclxuICBpZD86IHN0cmluZ1xyXG4gIHR5cGU6ICdjcmVhdGUnIHwgJ3VwZGF0ZScgfCAnZGVsZXRlJ1xyXG4gIHRhYmxlOiAnY2FyZHMnIHwgJ2ZvbGRlcnMnIHwgJ3RhZ3MnIHwgJ2ltYWdlcydcclxuICBkYXRhPzogYW55XHJcbiAgbG9jYWxJZDogc3RyaW5nXHJcbiAgdGltZXN0YW1wOiBEYXRlXHJcbiAgcmV0cnlDb3VudDogbnVtYmVyXHJcbiAgbWF4UmV0cmllczogbnVtYmVyXHJcbiAgZXJyb3I/OiBzdHJpbmdcclxufVxyXG5cclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG4vLyDnu5/kuIDmlbDmja7lupPnsbtcclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG5cclxuY2xhc3MgQ2FyZEFsbFVuaWZpZWREYXRhYmFzZSBleHRlbmRzIERleGllIHtcclxuICAvLyDmlbDmja7ooajlrprkuYlcclxuICBjYXJkcyE6IFRhYmxlPERiQ2FyZD5cclxuICBmb2xkZXJzITogVGFibGU8RGJGb2xkZXI+XHJcbiAgdGFncyE6IFRhYmxlPERiVGFnPlxyXG4gIGltYWdlcyE6IFRhYmxlPERiSW1hZ2U+XHJcbiAgc3luY1F1ZXVlITogVGFibGU8U3luY09wZXJhdGlvbj5cclxuICBzZXR0aW5ncyE6IFRhYmxlPEFwcFNldHRpbmdzPlxyXG4gIHNlc3Npb25zITogVGFibGU8VXNlclNlc3Npb24+XHJcblxyXG4gIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgc3VwZXIoJ0NhcmRBbGxVbmlmaWVkRGF0YWJhc2UnKVxyXG4gICAgXHJcbiAgICAvLyDniYjmnKwgMzog5a6M5pW055qE57uf5LiA5pWw5o2u5bqT5p625p6EXHJcbiAgICB0aGlzLnZlcnNpb24oMykuc3RvcmVzKHtcclxuICAgICAgLy8g5qC45b+D5a6e5L2T6KGoIC0g5LyY5YyW55qE57Si5byV6K6+6K6hXHJcbiAgICAgIGNhcmRzOiAnKytpZCwgdXNlcklkLCBmb2xkZXJJZCwgY3JlYXRlZEF0LCB1cGRhdGVkQXQsIHN5bmNWZXJzaW9uLCBwZW5kaW5nU3luYywgW3VzZXJJZCtmb2xkZXJJZF0sIHNlYXJjaFZlY3RvcicsXHJcbiAgICAgIGZvbGRlcnM6ICcrK2lkLCB1c2VySWQsIHBhcmVudElkLCBjcmVhdGVkQXQsIHVwZGF0ZWRBdCwgc3luY1ZlcnNpb24sIHBlbmRpbmdTeW5jLCBbdXNlcklkK3BhcmVudElkXSwgZnVsbFBhdGgsIGRlcHRoJyxcclxuICAgICAgdGFnczogJysraWQsIHVzZXJJZCwgbmFtZSwgY3JlYXRlZEF0LCBzeW5jVmVyc2lvbiwgcGVuZGluZ1N5bmMsIFt1c2VySWQrbmFtZV0nLFxyXG4gICAgICBpbWFnZXM6ICcrK2lkLCBjYXJkSWQsIHVzZXJJZCwgY3JlYXRlZEF0LCB1cGRhdGVkQXQsIHN5bmNWZXJzaW9uLCBwZW5kaW5nU3luYywgc3RvcmFnZU1vZGUsIFtjYXJkSWQrdXNlcklkXScsXHJcbiAgICAgIFxyXG4gICAgICAvLyDlkIzmraXlkozorr7nva7ooahcclxuICAgICAgc3luY1F1ZXVlOiAnKytpZCwgdHlwZSwgZW50aXR5LCBlbnRpdHlJZCwgdXNlcklkLCB0aW1lc3RhbXAsIHJldHJ5Q291bnQsIHByaW9yaXR5LCBbdXNlcklkK3ByaW9yaXR5XScsXHJcbiAgICAgIHNldHRpbmdzOiAnKytpZCwga2V5LCB1cGRhdGVkQXQsIHNjb3BlLCBba2V5K3Njb3BlXScsXHJcbiAgICAgIHNlc3Npb25zOiAnKytpZCwgdXNlcklkLCBkZXZpY2VJZCwgbGFzdEFjdGl2aXR5LCBpc0FjdGl2ZSwgW3VzZXJJZCtkZXZpY2VJZF0nXHJcbiAgICB9KVxyXG5cclxuICAgIC8vIOaVsOaNruW6k+WNh+e6p+mAu+i+kSAtIOaUr+aMgeS7juaXp+eJiOacrOi/geenu1xyXG4gICAgdGhpcy51cGdyYWRlRGF0YWJhc2UoKVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBhc3luYyB1cGdyYWRlRGF0YWJhc2UoKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICAvLyDniYjmnKwgMSAtPiAyOiDmt7vliqDnlKjmiLfmlK/mjIFcclxuICAgIHRoaXMudmVyc2lvbigyKS51cGdyYWRlKGFzeW5jICh0eCkgPT4ge1xyXG4gICAgICBjb25zb2xlLmxvZygnVXBncmFkaW5nIHRvIHZlcnNpb24gMjogQWRkaW5nIHVzZXIgc3VwcG9ydC4uLicpXHJcbiAgICAgIFxyXG4gICAgICAvLyDmo4Dmn6XmmK/lkKbpnIDopoHku47ml6fmlbDmja7lupPov4Hnp7tcclxuICAgICAgY29uc3Qgb2xkRGIgPSBuZXcgQ2FyZEFsbERhdGFiYXNlX3YxKClcclxuICAgICAgdHJ5IHtcclxuICAgICAgICBhd2FpdCBvbGREYi5vcGVuKClcclxuICAgICAgICBjb25zb2xlLmxvZygnRm91bmQgb2xkIGRhdGFiYXNlLCBtaWdyYXRpbmcgZGF0YS4uLicpXHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8g6L+B56e75Y2h54mHXHJcbiAgICAgICAgY29uc3Qgb2xkQ2FyZHMgPSBhd2FpdCBvbGREYi5jYXJkcy50b0FycmF5KClcclxuICAgICAgICBjb25zdCBuZXdDYXJkcyA9IG9sZENhcmRzLm1hcChjYXJkID0+ICh7XHJcbiAgICAgICAgICAuLi5jYXJkLFxyXG4gICAgICAgICAgdXNlcklkOiAnZGVmYXVsdCcsIC8vIOiuvue9rum7mOiupOeUqOaIt1xyXG4gICAgICAgICAgdXBkYXRlZEF0OiBuZXcgRGF0ZSgpXHJcbiAgICAgICAgfSkpXHJcbiAgICAgICAgYXdhaXQgdGhpcy5jYXJkcy5idWxrQWRkKG5ld0NhcmRzKVxyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIOi/geenu+aWh+S7tuWkuVxyXG4gICAgICAgIGNvbnN0IG9sZEZvbGRlcnMgPSBhd2FpdCBvbGREYi5mb2xkZXJzLnRvQXJyYXkoKVxyXG4gICAgICAgIGNvbnN0IG5ld0ZvbGRlcnMgPSBvbGRGb2xkZXJzLm1hcChmb2xkZXIgPT4gKHtcclxuICAgICAgICAgIC4uLmZvbGRlcixcclxuICAgICAgICAgIHVzZXJJZDogJ2RlZmF1bHQnLFxyXG4gICAgICAgICAgdXBkYXRlZEF0OiBuZXcgRGF0ZSgpXHJcbiAgICAgICAgfSkpXHJcbiAgICAgICAgYXdhaXQgdGhpcy5mb2xkZXJzLmJ1bGtBZGQobmV3Rm9sZGVycylcclxuICAgICAgICBcclxuICAgICAgICAvLyDov4Hnp7vmoIfnrb5cclxuICAgICAgICBjb25zdCBvbGRUYWdzID0gYXdhaXQgb2xkRGIudGFncy50b0FycmF5KClcclxuICAgICAgICBjb25zdCBuZXdUYWdzID0gb2xkVGFncy5tYXAodGFnID0+ICh7XHJcbiAgICAgICAgICAuLi50YWcsXHJcbiAgICAgICAgICB1c2VySWQ6ICdkZWZhdWx0JyxcclxuICAgICAgICAgIHVwZGF0ZWRBdDogbmV3IERhdGUoKVxyXG4gICAgICAgIH0pKVxyXG4gICAgICAgIGF3YWl0IHRoaXMudGFncy5idWxrQWRkKG5ld1RhZ3MpXHJcbiAgICAgICAgXHJcbiAgICAgICAgY29uc29sZS5sb2coJ01pZ3JhdGlvbiBjb21wbGV0ZWQgc3VjY2Vzc2Z1bGx5JylcclxuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICBjb25zb2xlLmxvZygnTm8gb2xkIGRhdGFiYXNlIGZvdW5kIG9yIG1pZ3JhdGlvbiBmYWlsZWQ6JywgZXJyb3IpXHJcbiAgICAgIH1cclxuICAgIH0pXHJcblxyXG4gICAgLy8g54mI5pysIDIgLT4gMzog5LyY5YyW57Si5byV5ZKM5re75Yqg5paw5Yqf6IO9XHJcbiAgICB0aGlzLnZlcnNpb24oMykudXBncmFkZShhc3luYyAodHgpID0+IHtcclxuICAgICAgY29uc29sZS5sb2coJ1VwZ3JhZGluZyB0byB2ZXJzaW9uIDM6IE9wdGltaXppbmcgaW5kZXhlcyBhbmQgYWRkaW5nIG5ldyBmZWF0dXJlcy4uLicpXHJcbiAgICAgIFxyXG4gICAgICAvLyDmt7vliqDpu5jorqTorr7nva5cclxuICAgICAgYXdhaXQgdGhpcy5pbml0aWFsaXplRGVmYXVsdFNldHRpbmdzKClcclxuICAgICAgXHJcbiAgICAgIC8vIOmHjeW7uuaQnOe0oue0ouW8lVxyXG4gICAgICBhd2FpdCB0aGlzLnJlYnVpbGRTZWFyY2hJbmRleGVzKClcclxuICAgIH0pXHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGFzeW5jIGluaXRpYWxpemVEZWZhdWx0U2V0dGluZ3MoKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICBjb25zdCBkZWZhdWx0U2V0dGluZ3MgPSBbXHJcbiAgICAgIHtcclxuICAgICAgICBrZXk6ICdzdG9yYWdlTW9kZScsXHJcbiAgICAgICAgdmFsdWU6ICdoeWJyaWQnLFxyXG4gICAgICAgIHNjb3BlOiAnZ2xvYmFsJyBhcyBjb25zdCxcclxuICAgICAgICB1cGRhdGVkQXQ6IG5ldyBEYXRlKClcclxuICAgICAgfSxcclxuICAgICAge1xyXG4gICAgICAgIGtleTogJ3N5bmNFbmFibGVkJyxcclxuICAgICAgICB2YWx1ZTogdHJ1ZSxcclxuICAgICAgICBzY29wZTogJ2dsb2JhbCcgYXMgY29uc3QsXHJcbiAgICAgICAgdXBkYXRlZEF0OiBuZXcgRGF0ZSgpXHJcbiAgICAgIH0sXHJcbiAgICAgIHtcclxuICAgICAgICBrZXk6ICdpbWFnZUNvbXByZXNzaW9uJyxcclxuICAgICAgICB2YWx1ZToge1xyXG4gICAgICAgICAgZW5hYmxlZDogdHJ1ZSxcclxuICAgICAgICAgIHF1YWxpdHk6IDAuOCxcclxuICAgICAgICAgIG1heFdpZHRoOiAxOTIwLFxyXG4gICAgICAgICAgbWF4SGVpZ2h0OiAxMDgwLFxyXG4gICAgICAgICAgZm9ybWF0OiAnd2VicCdcclxuICAgICAgICB9LFxyXG4gICAgICAgIHNjb3BlOiAnZ2xvYmFsJyBhcyBjb25zdCxcclxuICAgICAgICB1cGRhdGVkQXQ6IG5ldyBEYXRlKClcclxuICAgICAgfSxcclxuICAgICAge1xyXG4gICAgICAgIGtleTogJ2RhdGFiYXNlVmVyc2lvbicsXHJcbiAgICAgICAgdmFsdWU6ICczLjAuMCcsXHJcbiAgICAgICAgc2NvcGU6ICdnbG9iYWwnIGFzIGNvbnN0LFxyXG4gICAgICAgIHVwZGF0ZWRBdDogbmV3IERhdGUoKVxyXG4gICAgICB9XHJcbiAgICBdXHJcblxyXG4gICAgZm9yIChjb25zdCBzZXR0aW5nIG9mIGRlZmF1bHRTZXR0aW5ncykge1xyXG4gICAgICBjb25zdCBleGlzdHMgPSBhd2FpdCB0aGlzLnNldHRpbmdzLndoZXJlKCdrZXknKS5lcXVhbHMoc2V0dGluZy5rZXkpLmZpcnN0KClcclxuICAgICAgaWYgKCFleGlzdHMpIHtcclxuICAgICAgICBhd2FpdCB0aGlzLnNldHRpbmdzLmFkZChzZXR0aW5nKVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGFzeW5jIHJlYnVpbGRTZWFyY2hJbmRleGVzKCk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgY29uc29sZS5sb2coJ1JlYnVpbGRpbmcgc2VhcmNoIGluZGV4ZXMuLi4nKVxyXG4gICAgLy8g6L+Z6YeM5Y+v5Lul5a6e546w5pCc57Si57Si5byV55qE6YeN5bu66YC76L6RXHJcbiAgfVxyXG5cclxuICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbiAgLy8g57uf5LiA55qEQ1JVROaTjeS9nOaWueazlVxyXG4gIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuXHJcbiAgLy8g6I635Y+W6K6+572uIC0g5pSv5oyB55So5oi357qn5ZKM5YWo5bGA6K6+572uXHJcbiAgYXN5bmMgZ2V0U2V0dGluZyhrZXk6IHN0cmluZywgdXNlcklkPzogc3RyaW5nKTogUHJvbWlzZTxhbnk+IHtcclxuICAgIC8vIOS8mOWFiOi/lOWbnueUqOaIt+e6p+iuvue9rlxyXG4gICAgaWYgKHVzZXJJZCkge1xyXG4gICAgICBjb25zdCB1c2VyU2V0dGluZyA9IGF3YWl0IHRoaXMuc2V0dGluZ3NcclxuICAgICAgICAud2hlcmUoJ1trZXkrc2NvcGVdJylcclxuICAgICAgICAuZXF1YWxzKFtrZXksICd1c2VyJ10pXHJcbiAgICAgICAgLmFuZChzZXR0aW5nID0+ICFzZXR0aW5nLnVzZXJJZCB8fCBzZXR0aW5nLnVzZXJJZCA9PT0gdXNlcklkKVxyXG4gICAgICAgIC5maXJzdCgpXHJcbiAgICAgIGlmICh1c2VyU2V0dGluZykgcmV0dXJuIHVzZXJTZXR0aW5nLnZhbHVlXHJcbiAgICB9XHJcbiAgICBcclxuICAgIC8vIOi/lOWbnuWFqOWxgOiuvue9rlxyXG4gICAgY29uc3QgZ2xvYmFsU2V0dGluZyA9IGF3YWl0IHRoaXMuc2V0dGluZ3NcclxuICAgICAgLndoZXJlKCdba2V5K3Njb3BlXScpXHJcbiAgICAgIC5lcXVhbHMoW2tleSwgJ2dsb2JhbCddKVxyXG4gICAgICAuZmlyc3QoKVxyXG4gICAgcmV0dXJuIGdsb2JhbFNldHRpbmc/LnZhbHVlXHJcbiAgfVxyXG5cclxuICAvLyDmm7TmlrDorr7nva5cclxuICBhc3luYyB1cGRhdGVTZXR0aW5nKGtleTogc3RyaW5nLCB2YWx1ZTogYW55LCBzY29wZTogJ3VzZXInIHwgJ2dsb2JhbCcgPSAnZ2xvYmFsJywgdXNlcklkPzogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICBhd2FpdCB0aGlzLnNldHRpbmdzLndoZXJlKCdba2V5K3Njb3BlXScpLmVxdWFscyhba2V5LCBzY29wZV0pLm1vZGlmeSh7XHJcbiAgICAgIHZhbHVlLFxyXG4gICAgICB1c2VySWQsXHJcbiAgICAgIHVwZGF0ZWRBdDogbmV3IERhdGUoKVxyXG4gICAgfSlcclxuICB9XHJcblxyXG4gIC8vIOiOt+WPluaVsOaNruW6k+e7n+iuoeS/oeaBr1xyXG4gIGFzeW5jIGdldFN0YXRzKCk6IFByb21pc2U8RGF0YWJhc2VTdGF0cz4ge1xyXG4gICAgY29uc3QgW2NhcmRzLCBmb2xkZXJzLCB0YWdzLCBpbWFnZXMsIHBlbmRpbmdTeW5jXSA9IGF3YWl0IFByb21pc2UuYWxsKFtcclxuICAgICAgdGhpcy5jYXJkcy5jb3VudCgpLFxyXG4gICAgICB0aGlzLmZvbGRlcnMuY291bnQoKSxcclxuICAgICAgdGhpcy50YWdzLmNvdW50KCksXHJcbiAgICAgIHRoaXMuaW1hZ2VzLmNvdW50KCksXHJcbiAgICAgIHRoaXMuc3luY1F1ZXVlLmNvdW50KClcclxuICAgIF0pXHJcblxyXG4gICAgLy8g6K6h566X5oC75aSn5bCP77yI566A5YyW54mI5pys77yJXHJcbiAgICBjb25zdCB0b3RhbFNpemUgPSBhd2FpdCB0aGlzLmNhbGN1bGF0ZVRvdGFsU2l6ZSgpXHJcblxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgY2FyZHMsXHJcbiAgICAgIGZvbGRlcnMsXHJcbiAgICAgIHRhZ3MsXHJcbiAgICAgIGltYWdlcyxcclxuICAgICAgcGVuZGluZ1N5bmMsXHJcbiAgICAgIHRvdGFsU2l6ZSxcclxuICAgICAgdmVyc2lvbjogJzMuMC4wJ1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBhc3luYyBjYWxjdWxhdGVUb3RhbFNpemUoKTogUHJvbWlzZTxudW1iZXI+IHtcclxuICAgIC8vIOiuoeeul+aJgOacieWbvueJh+eahOaAu+Wkp+Wwj1xyXG4gICAgY29uc3QgaW1hZ2VzID0gYXdhaXQgdGhpcy5pbWFnZXMudG9BcnJheSgpXHJcbiAgICByZXR1cm4gaW1hZ2VzLnJlZHVjZSgodG90YWwsIGltYWdlKSA9PiB0b3RhbCArIGltYWdlLm1ldGFkYXRhLnNpemUsIDApXHJcbiAgfVxyXG5cclxuICAvLyDnu5/kuIDnmoTljaHniYfmk43kvZxcclxuICBhc3luYyBjcmVhdGVDYXJkKGNhcmREYXRhOiBPbWl0PERiQ2FyZCwgJ2lkJyB8ICdzeW5jVmVyc2lvbicgfCAncGVuZGluZ1N5bmMnIHwgJ3VwZGF0ZWRBdCc+LCB1c2VySWQ/OiBzdHJpbmcpOiBQcm9taXNlPHN0cmluZz4ge1xyXG4gICAgY29uc3QgaWQgPSBjcnlwdG8ucmFuZG9tVVVJRCgpXHJcbiAgICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpXHJcbiAgICBcclxuICAgIGF3YWl0IHRoaXMuY2FyZHMuYWRkKHtcclxuICAgICAgLi4uY2FyZERhdGEsXHJcbiAgICAgIGlkLFxyXG4gICAgICB1c2VySWQsXHJcbiAgICAgIHN5bmNWZXJzaW9uOiAxLFxyXG4gICAgICBwZW5kaW5nU3luYzogdHJ1ZSxcclxuICAgICAgdXBkYXRlZEF0OiBub3dcclxuICAgIH0pXHJcbiAgICBcclxuICAgIHJldHVybiBpZFxyXG4gIH1cclxuXHJcbiAgYXN5bmMgdXBkYXRlQ2FyZChpZDogc3RyaW5nLCB1cGRhdGVzOiBQYXJ0aWFsPERiQ2FyZD4pOiBQcm9taXNlPG51bWJlcj4ge1xyXG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdGhpcy5jYXJkcy51cGRhdGUoaWQsIHtcclxuICAgICAgLi4udXBkYXRlcyxcclxuICAgICAgc3luY1ZlcnNpb246IHVwZGF0ZXMuc3luY1ZlcnNpb24gPyB1cGRhdGVzLnN5bmNWZXJzaW9uICsgMSA6IHVuZGVmaW5lZCxcclxuICAgICAgcGVuZGluZ1N5bmM6IHRydWUsXHJcbiAgICAgIHVwZGF0ZWRBdDogbmV3IERhdGUoKVxyXG4gICAgfSlcclxuICAgIFxyXG4gICAgcmV0dXJuIHJlc3VsdFxyXG4gIH1cclxuXHJcbiAgYXN5bmMgZGVsZXRlQ2FyZChpZDogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICBhd2FpdCB0aGlzLnRyYW5zYWN0aW9uKCdydycsIFt0aGlzLmNhcmRzLCB0aGlzLmltYWdlc10sIGFzeW5jICgpID0+IHtcclxuICAgICAgLy8g5Yig6Zmk55u45YWz5Zu+54mHXHJcbiAgICAgIGF3YWl0IHRoaXMuaW1hZ2VzLndoZXJlKCdjYXJkSWQnKS5lcXVhbHMoaWQpLmRlbGV0ZSgpXHJcbiAgICAgIC8vIOWIoOmZpOWNoeeJh1xyXG4gICAgICBhd2FpdCB0aGlzLmNhcmRzLmRlbGV0ZShpZClcclxuICAgIH0pXHJcbiAgfVxyXG5cclxuICAvLyDmibnph4/mk43kvZzmlK/mjIFcclxuICBhc3luYyBidWxrQ3JlYXRlQ2FyZHMoY2FyZHNEYXRhOiBPbWl0PERiQ2FyZCwgJ2lkJyB8ICdzeW5jVmVyc2lvbicgfCAncGVuZGluZ1N5bmMnIHwgJ3VwZGF0ZWRBdCc+W10sIHVzZXJJZD86IHN0cmluZyk6IFByb21pc2U8c3RyaW5nW10+IHtcclxuICAgIGNvbnN0IG5vdyA9IG5ldyBEYXRlKClcclxuICAgIGNvbnN0IGNhcmRzID0gY2FyZHNEYXRhLm1hcChjYXJkRGF0YSA9PiAoe1xyXG4gICAgICAuLi5jYXJkRGF0YSxcclxuICAgICAgaWQ6IGNyeXB0by5yYW5kb21VVUlEKCksXHJcbiAgICAgIHVzZXJJZCxcclxuICAgICAgc3luY1ZlcnNpb246IDEsXHJcbiAgICAgIHBlbmRpbmdTeW5jOiB0cnVlLFxyXG4gICAgICB1cGRhdGVkQXQ6IG5vd1xyXG4gICAgfSkpXHJcbiAgICBcclxuICAgIGF3YWl0IHRoaXMuY2FyZHMuYnVsa0FkZChjYXJkcylcclxuICAgIHJldHVybiBjYXJkcy5tYXAoY2FyZCA9PiBjYXJkLmlkISlcclxuICB9XHJcblxyXG4gIC8vIOaAp+iDveS8mOWMlueahOafpeivouaWueazlVxyXG4gIGFzeW5jIGdldENhcmRzQnlGb2xkZXIoZm9sZGVySWQ6IHN0cmluZywgdXNlcklkPzogc3RyaW5nKTogUHJvbWlzZTxEYkNhcmRbXT4ge1xyXG4gICAgcmV0dXJuIGF3YWl0IHRoaXMuY2FyZHNcclxuICAgICAgLndoZXJlKCdbdXNlcklkK2ZvbGRlcklkXScpXHJcbiAgICAgIC5lcXVhbHMoW3VzZXJJZCB8fCAnZGVmYXVsdCcsIGZvbGRlcklkXSlcclxuICAgICAgLnRvQXJyYXkoKVxyXG4gIH1cclxuXHJcbiAgYXN5bmMgc2VhcmNoQ2FyZHMoc2VhcmNoVGVybTogc3RyaW5nLCB1c2VySWQ/OiBzdHJpbmcpOiBQcm9taXNlPERiQ2FyZFtdPiB7XHJcbiAgICBjb25zdCBzZWFyY2hMb3dlciA9IHNlYXJjaFRlcm0udG9Mb3dlckNhc2UoKVxyXG4gICAgcmV0dXJuIGF3YWl0IHRoaXMuY2FyZHNcclxuICAgICAgLmZpbHRlcihjYXJkID0+IFxyXG4gICAgICAgIGNhcmQuc2VhcmNoVmVjdG9yPy5pbmNsdWRlcyhzZWFyY2hMb3dlcikgfHxcclxuICAgICAgICBjYXJkLmZyb250Q29udGVudC50aXRsZS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHNlYXJjaExvd2VyKSB8fFxyXG4gICAgICAgIGNhcmQuZnJvbnRDb250ZW50LnRleHQudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhzZWFyY2hMb3dlcikgfHxcclxuICAgICAgICBjYXJkLmJhY2tDb250ZW50LnRpdGxlLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoc2VhcmNoTG93ZXIpIHx8XHJcbiAgICAgICAgY2FyZC5iYWNrQ29udGVudC50ZXh0LnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoc2VhcmNoTG93ZXIpXHJcbiAgICAgIClcclxuICAgICAgLnRvQXJyYXkoKVxyXG4gIH1cclxuXHJcbiAgLy8g5pWw5o2u5bqT5riF55CG5ZKM5LyY5YyWXHJcbiAgYXN5bmMgY2xlYW51cCgpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgIGF3YWl0IHRoaXMudHJhbnNhY3Rpb24oJ3J3JywgW3RoaXMuY2FyZHMsIHRoaXMuZm9sZGVycywgdGhpcy50YWdzLCB0aGlzLmltYWdlcywgdGhpcy5zeW5jUXVldWVdLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIC8vIOa4heeQhui/h+acn+eahOWQjOatpeaTjeS9nFxyXG4gICAgICBjb25zdCBleHBpcmVkRGF0ZSA9IG5ldyBEYXRlKERhdGUubm93KCkgLSA3ICogMjQgKiA2MCAqIDYwICogMTAwMCkgLy8gN+WkqeWJjVxyXG4gICAgICBhd2FpdCB0aGlzLnN5bmNRdWV1ZS53aGVyZSgndGltZXN0YW1wJykuYmVsb3coZXhwaXJlZERhdGUpLmRlbGV0ZSgpXHJcbiAgICAgIFxyXG4gICAgICAvLyDmuIXnkIblraTnq4vlm77niYfvvIjmsqHmnInlr7nlupTljaHniYfnmoTlm77niYfvvIlcclxuICAgICAgY29uc3QgY2FyZElkcyA9IGF3YWl0IHRoaXMuY2FyZHMudG9Db2xsZWN0aW9uKCkucHJpbWFyeUtleXMoKVxyXG4gICAgICBhd2FpdCB0aGlzLmltYWdlcy53aGVyZSgnY2FyZElkJykubm9uZU9mKGNhcmRJZHMgYXMgc3RyaW5nW10pLmRlbGV0ZSgpXHJcbiAgICAgIFxyXG4gICAgICBjb25zb2xlLmxvZygnRGF0YWJhc2UgY2xlYW51cCBjb21wbGV0ZWQnKVxyXG4gICAgfSlcclxuICB9XHJcblxyXG4gIC8vIOaVsOaNruW6k+WBpeW6t+ajgOafpVxyXG4gIGFzeW5jIGhlYWx0aENoZWNrKCk6IFByb21pc2U8e1xyXG4gICAgaXNIZWFsdGh5OiBib29sZWFuXHJcbiAgICBpc3N1ZXM6IHN0cmluZ1tdXHJcbiAgICBzdGF0czogRGF0YWJhc2VTdGF0c1xyXG4gIH0+IHtcclxuICAgIGNvbnN0IGlzc3Vlczogc3RyaW5nW10gPSBbXVxyXG4gICAgXHJcbiAgICB0cnkge1xyXG4gICAgICAvLyDmo4Dmn6XmlbDmja7lupPov57mjqVcclxuICAgICAgYXdhaXQgdGhpcy50YWJsZXMudG9BcnJheSgpXHJcbiAgICAgIFxyXG4gICAgICAvLyDmo4Dmn6XmlbDmja7kuIDoh7TmgKdcclxuICAgICAgY29uc3Qgc3RhdHMgPSBhd2FpdCB0aGlzLmdldFN0YXRzKClcclxuICAgICAgXHJcbiAgICAgIC8vIOajgOafpeaYr+WQpuacieWkp+mHj+W+heWQjOatpemhueebrlxyXG4gICAgICBpZiAoc3RhdHMucGVuZGluZ1N5bmMgPiAxMDAwKSB7XHJcbiAgICAgICAgaXNzdWVzLnB1c2goYEhpZ2ggbnVtYmVyIG9mIHBlbmRpbmcgc3luYyBvcGVyYXRpb25zOiAke3N0YXRzLnBlbmRpbmdTeW5jfWApXHJcbiAgICAgIH1cclxuICAgICAgXHJcbiAgICAgIC8vIOajgOafpeaVsOaNruW6k+Wkp+Wwj1xyXG4gICAgICBpZiAoc3RhdHMudG90YWxTaXplID4gNTAwICogMTAyNCAqIDEwMjQpIHsgLy8gNTAwTUJcclxuICAgICAgICBpc3N1ZXMucHVzaChgRGF0YWJhc2Ugc2l6ZSBpcyBsYXJnZTogJHsoc3RhdHMudG90YWxTaXplIC8gMTAyNCAvIDEwMjQpLnRvRml4ZWQoMil9IE1CYClcclxuICAgICAgfVxyXG4gICAgICBcclxuICAgICAgcmV0dXJuIHtcclxuICAgICAgICBpc0hlYWx0aHk6IGlzc3Vlcy5sZW5ndGggPT09IDAsXHJcbiAgICAgICAgaXNzdWVzLFxyXG4gICAgICAgIHN0YXRzXHJcbiAgICAgIH1cclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIHJldHVybiB7XHJcbiAgICAgICAgaXNIZWFsdGh5OiBmYWxzZSxcclxuICAgICAgICBpc3N1ZXM6IFtgRGF0YWJhc2UgY29ubmVjdGlvbiBmYWlsZWQ6ICR7ZXJyb3J9YF0sXHJcbiAgICAgICAgc3RhdHM6IHsgY2FyZHM6IDAsIGZvbGRlcnM6IDAsIHRhZ3M6IDAsIGltYWdlczogMCwgcGVuZGluZ1N5bmM6IDAsIHRvdGFsU2l6ZTogMCwgdmVyc2lvbjogJzMuMC4wJyB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8vIOWujOWFqOa4heeQhuaVsOaNruW6k++8iOiwqOaFjuS9v+eUqO+8iVxyXG4gIGFzeW5jIGNsZWFyQWxsKCk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgYXdhaXQgdGhpcy50cmFuc2FjdGlvbigncncnLCBbdGhpcy5jYXJkcywgdGhpcy5mb2xkZXJzLCB0aGlzLnRhZ3MsIHRoaXMuaW1hZ2VzLCB0aGlzLnN5bmNRdWV1ZSwgdGhpcy5zZXR0aW5ncywgdGhpcy5zZXNzaW9uc10sIGFzeW5jICgpID0+IHtcclxuICAgICAgYXdhaXQgdGhpcy5jYXJkcy5jbGVhcigpXHJcbiAgICAgIGF3YWl0IHRoaXMuZm9sZGVycy5jbGVhcigpXHJcbiAgICAgIGF3YWl0IHRoaXMudGFncy5jbGVhcigpXHJcbiAgICAgIGF3YWl0IHRoaXMuaW1hZ2VzLmNsZWFyKClcclxuICAgICAgYXdhaXQgdGhpcy5zeW5jUXVldWUuY2xlYXIoKVxyXG4gICAgICAvLyDkv53nlZnorr7nva7vvIzlj6rmuIXpmaTnlKjmiLfmlbDmja5cclxuICAgICAgYXdhaXQgdGhpcy5zZXNzaW9ucy5jbGVhcigpXHJcbiAgICB9KVxyXG4gIH1cclxuXHJcbiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG4gIC8vIOWQkeWQjuWFvOWuueeahOaWueazlSAtIOS/neaMgeeOsOacieS7o+eggeS4jeS4reaWrVxyXG4gIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuXHJcbiAgLy8g5pen54mIZ2V0U2V0dGluZ+aWueazle+8iOS/neaMgeWFvOWuue+8iVxyXG4gIGFzeW5jIGdldFNldHRpbmdMZWdhY3koa2V5OiBzdHJpbmcpOiBQcm9taXNlPGFueT4ge1xyXG4gICAgcmV0dXJuIGF3YWl0IHRoaXMuZ2V0U2V0dGluZyhrZXkpXHJcbiAgfVxyXG5cclxuICAvLyDml6fniYh1cGRhdGVTZXR0aW5n5pa55rOV77yI5L+d5oyB5YW85a6577yJXHJcbiAgYXN5bmMgdXBkYXRlU2V0dGluZ0xlZ2FjeShrZXk6IHN0cmluZywgdmFsdWU6IGFueSk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgYXdhaXQgdGhpcy51cGRhdGVTZXR0aW5nKGtleSwgdmFsdWUpXHJcbiAgfVxyXG5cclxuICAvLyDml6fniYhjbGVhckFsbOaWueazle+8iOS/neaMgeWFvOWuue+8iVxyXG4gIGFzeW5jIGNsZWFyQWxsTGVnYWN5KCk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgYXdhaXQgdGhpcy50cmFuc2FjdGlvbigncncnLCB0aGlzLmNhcmRzLCB0aGlzLmZvbGRlcnMsIHRoaXMudGFncywgdGhpcy5pbWFnZXMsIHRoaXMuc3luY1F1ZXVlLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGF3YWl0IHRoaXMuY2FyZHMuY2xlYXIoKVxyXG4gICAgICBhd2FpdCB0aGlzLmZvbGRlcnMuY2xlYXIoKVxyXG4gICAgICBhd2FpdCB0aGlzLnRhZ3MuY2xlYXIoKVxyXG4gICAgICBhd2FpdCB0aGlzLmltYWdlcy5jbGVhcigpXHJcbiAgICAgIGF3YWl0IHRoaXMuc3luY1F1ZXVlLmNsZWFyKClcclxuICAgIH0pXHJcbiAgfVxyXG5cclxuICAvLyDml6fniYhnZXRTdGF0c+aWueazle+8iOS/neaMgeWFvOWuue+8iVxyXG4gIGFzeW5jIGdldFN0YXRzTGVnYWN5KCk6IFByb21pc2U8e1xyXG4gICAgY2FyZHM6IG51bWJlclxyXG4gICAgZm9sZGVyczogbnVtYmVyXHJcbiAgICB0YWdzOiBudW1iZXJcclxuICAgIGltYWdlczogbnVtYmVyXHJcbiAgICBwZW5kaW5nU3luYzogbnVtYmVyXHJcbiAgfT4ge1xyXG4gICAgY29uc3Qgc3RhdHMgPSBhd2FpdCB0aGlzLmdldFN0YXRzKClcclxuICAgIHJldHVybiB7XHJcbiAgICAgIGNhcmRzOiBzdGF0cy5jYXJkcyxcclxuICAgICAgZm9sZGVyczogc3RhdHMuZm9sZGVycyxcclxuICAgICAgdGFnczogc3RhdHMudGFncyxcclxuICAgICAgaW1hZ2VzOiBzdGF0cy5pbWFnZXMsXHJcbiAgICAgIHBlbmRpbmdTeW5jOiBzdGF0cy5wZW5kaW5nU3luY1xyXG4gICAgfVxyXG4gIH1cclxufVxyXG5cclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG4vLyDlkJHlkI7lhbzlrrnmlK/mjIFcclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG5cclxuLy8g5pen54mI5pys5pWw5o2u5bqT57G777yI55So5LqO6L+B56e777yJXHJcbmNsYXNzIENhcmRBbGxEYXRhYmFzZV92MSBleHRlbmRzIERleGllIHtcclxuICBjYXJkcyE6IFRhYmxlPGFueT5cclxuICBmb2xkZXJzITogVGFibGU8YW55PlxyXG4gIHRhZ3MhOiBUYWJsZTxhbnk+XHJcbiAgaW1hZ2VzITogVGFibGU8YW55PlxyXG4gIHN5bmNRdWV1ZSE6IFRhYmxlPGFueT5cclxuICBzZXR0aW5ncyE6IFRhYmxlPGFueT5cclxuICBcclxuICBjb25zdHJ1Y3RvcigpIHtcclxuICAgIHN1cGVyKCdDYXJkQWxsRGF0YWJhc2UnKVxyXG4gICAgdGhpcy52ZXJzaW9uKDEpLnN0b3Jlcyh7XHJcbiAgICAgIGNhcmRzOiAnKytpZCwgZm9sZGVySWQsIGNyZWF0ZWRBdCwgdXBkYXRlZEF0LCBzeW5jVmVyc2lvbiwgcGVuZGluZ1N5bmMnLFxyXG4gICAgICBmb2xkZXJzOiAnKytpZCwgcGFyZW50SWQsIGNyZWF0ZWRBdCwgdXBkYXRlZEF0LCBzeW5jVmVyc2lvbiwgcGVuZGluZ1N5bmMnLFxyXG4gICAgICB0YWdzOiAnKytpZCwgbmFtZSwgY3JlYXRlZEF0LCBzeW5jVmVyc2lvbiwgcGVuZGluZ1N5bmMnLFxyXG4gICAgICBpbWFnZXM6ICcrK2lkLCBjYXJkSWQsIGZpbGVQYXRoLCBjcmVhdGVkQXQsIHN5bmNWZXJzaW9uLCBwZW5kaW5nU3luYycsXHJcbiAgICAgIHN5bmNRdWV1ZTogJysraWQsIHR5cGUsIGVudGl0eSwgZW50aXR5SWQsIHRpbWVzdGFtcCwgcmV0cnlDb3VudCcsXHJcbiAgICAgIHNldHRpbmdzOiAnKytpZCwga2V5LCB1cGRhdGVkQXQnXHJcbiAgICB9KVxyXG4gIH1cclxufVxyXG5cclxuLy8g5Yib5bu65pWw5o2u5bqT5a6e5L6LXHJcbmV4cG9ydCBjb25zdCBkYiA9IG5ldyBDYXJkQWxsVW5pZmllZERhdGFiYXNlKClcclxuXHJcbi8vIOaVsOaNruW6k+WIneWni+WMllxyXG5leHBvcnQgY29uc3QgaW5pdGlhbGl6ZURhdGFiYXNlID0gYXN5bmMgKCk6IFByb21pc2U8dm9pZD4gPT4ge1xyXG4gIHRyeSB7XHJcbiAgICBhd2FpdCBkYi5vcGVuKClcclxuICAgIGNvbnNvbGUubG9nKCdDYXJkQWxsIHVuaWZpZWQgZGF0YWJhc2UgaW5pdGlhbGl6ZWQgc3VjY2Vzc2Z1bGx5JylcclxuICAgIFxyXG4gICAgLy8g5omn6KGM5YGl5bq35qOA5p+lXHJcbiAgICBjb25zdCBoZWFsdGggPSBhd2FpdCBkYi5oZWFsdGhDaGVjaygpXHJcbiAgICBpZiAoIWhlYWx0aC5pc0hlYWx0aHkpIHtcclxuICAgICAgY29uc29sZS53YXJuKCdEYXRhYmFzZSBoZWFsdGggaXNzdWVzIGRldGVjdGVkOicsIGhlYWx0aC5pc3N1ZXMpXHJcbiAgICB9XHJcbiAgICBcclxuICAgIC8vIOWumuacn+a4heeQhlxyXG4gICAgc2V0SW50ZXJ2YWwoKCkgPT4ge1xyXG4gICAgICBkYi5jbGVhbnVwKCkuY2F0Y2goY29uc29sZS5lcnJvcilcclxuICAgIH0sIDI0ICogNjAgKiA2MCAqIDEwMDApIC8vIOavj+Wkqea4heeQhuS4gOasoVxyXG4gICAgXHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byBpbml0aWFsaXplIGRhdGFiYXNlOicsIGVycm9yKVxyXG4gICAgdGhyb3cgZXJyb3JcclxuICB9XHJcbn1cclxuXHJcbi8vIOaVsOaNruW6k+mUmeivr+WkhOeQhlxyXG5kYi5vbignZXJyb3InLCAoZXJyb3IpID0+IHtcclxuICBjb25zb2xlLmVycm9yKCdEYXRhYmFzZSBlcnJvcjonLCBlcnJvcilcclxufSlcclxuXHJcbmRiLm9uKCdibG9ja2VkJywgKCkgPT4ge1xyXG4gIGNvbnNvbGUud2FybignRGF0YWJhc2Ugb3BlcmF0aW9uIGJsb2NrZWQnKVxyXG59KVxyXG5cclxuZGIub24oJ3ZlcnNpb25jaGFuZ2UnLCAoKSA9PiB7XHJcbiAgY29uc29sZS53YXJuKCdEYXRhYmFzZSB2ZXJzaW9uIGNoYW5nZWQsIHJlbG9hZGluZyBwYWdlLi4uJylcclxuICB3aW5kb3cubG9jYXRpb24ucmVsb2FkKClcclxufSlcclxuXHJcbmRiLm9uKCdyZWFkeScsICgpID0+IHtcclxuICBjb25zb2xlLmxvZygnRGF0YWJhc2UgaXMgcmVhZHknKVxyXG59KVxyXG5cclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG4vLyDlr7zlh7rlt6Xlhbflh73mlbBcclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG5cclxuLy8g5pWw5o2u6L2s5o2i5bel5YW3XHJcbmV4cG9ydCBjb25zdCBjb252ZXJ0VG9EYkNhcmQgPSAoY2FyZDogQ2FyZCwgdXNlcklkPzogc3RyaW5nKTogRGJDYXJkID0+IHtcclxuICByZXR1cm4ge1xyXG4gICAgLi4uY2FyZCxcclxuICAgIHVzZXJJZCxcclxuICAgIHN5bmNWZXJzaW9uOiAxLFxyXG4gICAgcGVuZGluZ1N5bmM6IHRydWUsXHJcbiAgICB1cGRhdGVkQXQ6IG5ldyBEYXRlKClcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBjb252ZXJ0RnJvbURiQ2FyZCA9IChkYkNhcmQ6IERiQ2FyZCk6IENhcmQgPT4ge1xyXG4gIGNvbnN0IHsgdXNlcklkLCBzeW5jVmVyc2lvbiwgbGFzdFN5bmNBdCwgcGVuZGluZ1N5bmMsIC4uLmNhcmQgfSA9IGRiQ2FyZFxyXG4gIHJldHVybiB7XHJcbiAgICAuLi5jYXJkLFxyXG4gICAgaWQ6IGNhcmQuaWQgfHwgJycsXHJcbiAgICBjcmVhdGVkQXQ6IG5ldyBEYXRlKGNhcmQuY3JlYXRlZEF0KSxcclxuICAgIHVwZGF0ZWRBdDogbmV3IERhdGUoY2FyZC51cGRhdGVkQXQpXHJcbiAgfVxyXG59XHJcblxyXG4vLyDmkJzntKLkvJjljJblt6XlhbdcclxuZXhwb3J0IGNvbnN0IGdlbmVyYXRlU2VhcmNoVmVjdG9yID0gKGNhcmQ6IENhcmQpOiBzdHJpbmcgPT4ge1xyXG4gIGNvbnN0IHNlYXJjaGFibGVUZXh0ID0gW1xyXG4gICAgY2FyZC5mcm9udENvbnRlbnQudGl0bGUsXHJcbiAgICBjYXJkLmZyb250Q29udGVudC50ZXh0LFxyXG4gICAgY2FyZC5iYWNrQ29udGVudC50aXRsZSxcclxuICAgIGNhcmQuYmFja0NvbnRlbnQudGV4dCxcclxuICAgIC4uLmNhcmQuZnJvbnRDb250ZW50LnRhZ3MsXHJcbiAgICAuLi5jYXJkLmJhY2tDb250ZW50LnRhZ3NcclxuICBdLmpvaW4oJyAnKS50b0xvd2VyQ2FzZSgpXHJcbiAgXHJcbiAgcmV0dXJuIHNlYXJjaGFibGVUZXh0XHJcbn1cclxuXHJcbi8vIOaJuemHj+aTjeS9nOW3peWFt1xyXG5leHBvcnQgY29uc3QgYmF0Y2hPcGVyYXRpb24gPSBhc3luYyA8VD4oXHJcbiAgaXRlbXM6IFRbXSxcclxuICBiYXRjaFNpemU6IG51bWJlciA9IDEwMCxcclxuICBvcGVyYXRpb246IChiYXRjaDogVFtdKSA9PiBQcm9taXNlPHZvaWQ+XHJcbik6IFByb21pc2U8dm9pZD4gPT4ge1xyXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgaXRlbXMubGVuZ3RoOyBpICs9IGJhdGNoU2l6ZSkge1xyXG4gICAgY29uc3QgYmF0Y2ggPSBpdGVtcy5zbGljZShpLCBpICsgYmF0Y2hTaXplKVxyXG4gICAgYXdhaXQgb3BlcmF0aW9uKGJhdGNoKVxyXG4gIH1cclxufVxyXG5cclxuLy8g5pWw5o2u6aqM6K+B5bel5YW3XHJcbmV4cG9ydCBjb25zdCB2YWxpZGF0ZUNhcmREYXRhID0gKGNhcmQ6IFBhcnRpYWw8Q2FyZD4pOiBzdHJpbmdbXSA9PiB7XHJcbiAgY29uc3QgZXJyb3JzOiBzdHJpbmdbXSA9IFtdXHJcbiAgXHJcbiAgaWYgKCFjYXJkLmZyb250Q29udGVudD8udGl0bGUpIHtcclxuICAgIGVycm9ycy5wdXNoKCdGcm9udCBjb250ZW50IHRpdGxlIGlzIHJlcXVpcmVkJylcclxuICB9XHJcbiAgXHJcbiAgaWYgKCFjYXJkLmJhY2tDb250ZW50Py50aXRsZSkge1xyXG4gICAgZXJyb3JzLnB1c2goJ0JhY2sgY29udGVudCB0aXRsZSBpcyByZXF1aXJlZCcpXHJcbiAgfVxyXG4gIFxyXG4gIGlmIChjYXJkLnN0eWxlICYmICFbJ3NvbGlkJywgJ2dyYWRpZW50JywgJ2dsYXNzJ10uaW5jbHVkZXMoY2FyZC5zdHlsZS50eXBlKSkge1xyXG4gICAgZXJyb3JzLnB1c2goJ0ludmFsaWQgY2FyZCBzdHlsZSB0eXBlJylcclxuICB9XHJcbiAgXHJcbiAgcmV0dXJuIGVycm9yc1xyXG59XHJcblxyXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbi8vIOaAp+iDveS8mOWMluWSjOe8k+WtmFxyXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcblxyXG4vLyDnroDljZXnmoTmn6Xor6LnvJPlrZhcclxuY29uc3QgcXVlcnlDYWNoZSA9IG5ldyBNYXA8c3RyaW5nLCB7IGRhdGE6IGFueTsgdGltZXN0YW1wOiBudW1iZXIgfT4oKVxyXG5jb25zdCBDQUNIRV9UVEwgPSA1ICogNjAgKiAxMDAwIC8vIDXliIbpkp/nvJPlrZhcclxuXHJcbmV4cG9ydCBjb25zdCBjYWNoZWRRdWVyeSA9IGFzeW5jIDxUPihcclxuICBrZXk6IHN0cmluZyxcclxuICBxdWVyeTogKCkgPT4gUHJvbWlzZTxUPlxyXG4pOiBQcm9taXNlPFQ+ID0+IHtcclxuICBjb25zdCBjYWNoZWQgPSBxdWVyeUNhY2hlLmdldChrZXkpXHJcbiAgaWYgKGNhY2hlZCAmJiBEYXRlLm5vdygpIC0gY2FjaGVkLnRpbWVzdGFtcCA8IENBQ0hFX1RUTCkge1xyXG4gICAgcmV0dXJuIGNhY2hlZC5kYXRhXHJcbiAgfVxyXG4gIFxyXG4gIGNvbnN0IGRhdGEgPSBhd2FpdCBxdWVyeSgpXHJcbiAgcXVlcnlDYWNoZS5zZXQoa2V5LCB7IGRhdGEsIHRpbWVzdGFtcDogRGF0ZS5ub3coKSB9KVxyXG4gIHJldHVybiBkYXRhXHJcbn1cclxuXHJcbi8vIOa4heeQhue8k+WtmFxyXG5leHBvcnQgY29uc3QgY2xlYXJRdWVyeUNhY2hlID0gKCk6IHZvaWQgPT4ge1xyXG4gIHF1ZXJ5Q2FjaGUuY2xlYXIoKVxyXG59XHJcblxyXG4vLyDlrprmnJ/muIXnkIbov4fmnJ/nvJPlrZhcclxuc2V0SW50ZXJ2YWwoKCkgPT4ge1xyXG4gIGNvbnN0IG5vdyA9IERhdGUubm93KClcclxuICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBxdWVyeUNhY2hlLmVudHJpZXMoKSkge1xyXG4gICAgaWYgKG5vdyAtIHZhbHVlLnRpbWVzdGFtcCA+IENBQ0hFX1RUTCkge1xyXG4gICAgICBxdWVyeUNhY2hlLmRlbGV0ZShrZXkpXHJcbiAgICB9XHJcbiAgfVxyXG59LCBDQUNIRV9UVEwpIl0sInZlcnNpb24iOjN9