ed875f2a3574026f06cb450ee6914e79
"use strict";
// ÁÆÄÂåñÁâàÁ¶ªÁ∫øÂäüËÉΩÊµãËØïÊâßË°åËÑöÊú¨
// Áî®‰∫éÂø´ÈÄüÈ™åËØÅ Week 2 Day 8-9 ÁöÑÁ¶ªÁ∫øÂäüËÉΩÂÆûÁé∞
Object.defineProperty(exports, "__esModule", { value: true });
exports.mockDataUtils = exports.networkMonitor = exports.offlineManager = exports.networkUtils = void 0;
exports.runQuickOfflineTests = runQuickOfflineTests;
// ============================================================================
// ÊµãËØïÊ®°ÊãüÂ∑•ÂÖ∑
// ============================================================================
// Ê®°ÊãüÁΩëÁªúÂ∑•ÂÖ∑
class MockNetworkUtils {
    constructor() {
        Object.defineProperty(this, "isOnline", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: true
        });
        Object.defineProperty(this, "listeners", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: new Map()
        });
    }
    simulateOffline() {
        this.isOnline = false;
        this.emit('offline');
    }
    simulateOnline() {
        this.isOnline = true;
        this.emit('online');
    }
    isCurrentlyOnline() {
        return this.isOnline;
    }
    addListener(event, callback) {
        if (!this.listeners.has(event)) {
            this.listeners.set(event, []);
        }
        this.listeners.get(event).push(callback);
    }
    emit(event) {
        const callbacks = this.listeners.get(event) || [];
        callbacks.forEach(callback => callback());
    }
}
// Ê®°ÊãüÁ¶ªÁ∫øÁÆ°ÁêÜÂô®
class MockOfflineManager {
    constructor() {
        Object.defineProperty(this, "operations", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: []
        });
        Object.defineProperty(this, "stats", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: {
                pendingOperations: 0,
                syncedOperations: 0,
                failedOperations: 0
            }
        });
    }
    async initialize() {
        console.log('MockOfflineManager initialized');
    }
    async queueOfflineOperation(operation) {
        this.operations.push(operation);
        this.stats.pendingOperations++;
        console.log(`Queued offline operation: ${operation.type} ${operation.entity}`);
        return { success: true };
    }
    async getOfflineStats() {
        return this.stats;
    }
    async getPendingOfflineOperations() {
        return this.operations.filter(op => op.status === 'pending');
    }
    async getMemoryUsage() {
        return Math.random() * 100; // Ê®°ÊãüÂÜÖÂ≠ò‰ΩøÁî®
    }
    async createBackupSnapshot() {
        const snapshot = {
            id: `snapshot-${Date.now()}`,
            timestamp: new Date(),
            operations: [...this.operations]
        };
        console.log(`Created backup snapshot: ${snapshot.id}`);
        return snapshot;
    }
    async restoreFromSnapshot(snapshotId) {
        console.log(`Restored from snapshot: ${snapshotId}`);
        return { success: true };
    }
    async verifyDataIntegrity() {
        return {
            valid: true,
            errors: [],
            score: 1.0
        };
    }
    async getDetectedConflicts() {
        return [];
    }
    async resolveConflict(conflict, strategy) {
        return { success: true };
    }
}
// Ê®°ÊãüÁΩëÁªúÁõëÊéßÂô®
class MockNetworkMonitor {
    constructor() {
        Object.defineProperty(this, "history", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: []
        });
        Object.defineProperty(this, "listeners", {
            enumerable: true,
            configurable: true,
            writable: true,
            value: new Map()
        });
    }
    async initialize() {
        console.log('MockNetworkMonitor initialized');
    }
    addListener(event, callback) {
        if (!this.listeners.has(event)) {
            this.listeners.set(event, []);
        }
        this.listeners.get(event).push(callback);
    }
    async getNetworkHistory() {
        return this.history;
    }
    async assessNetworkQuality() {
        return {
            isStable: true,
            bandwidth: 'good',
            latency: 'low',
            reliability: 0.95,
            recommendedStrategy: 'immediate'
        };
    }
}
// ============================================================================
// ÊµãËØïÊï∞ÊçÆÁîüÊàêÂô®
// ============================================================================
class MockDataUtils {
    generateTestCard(overrides = {}) {
        return {
            id: `card-${Date.now()}-${Math.random()}`,
            title: 'Test Card',
            content: 'Test content',
            tags: ['test'],
            createdAt: new Date(),
            updatedAt: new Date(),
            ...overrides
        };
    }
    generateTestFolder(overrides = {}) {
        return {
            id: `folder-${Date.now()}-${Math.random()}`,
            name: 'Test Folder',
            parentId: null,
            createdAt: new Date(),
            updatedAt: new Date(),
            ...overrides
        };
    }
    generateTestTag(overrides = {}) {
        return {
            id: `tag-${Date.now()}-${Math.random()}`,
            name: 'Test Tag',
            color: '#000000',
            createdAt: new Date(),
            ...overrides
        };
    }
}
// ============================================================================
// ÂÖ®Â±ÄÊµãËØïÂ∑•ÂÖ∑
// ============================================================================
const networkUtils = new MockNetworkUtils();
exports.networkUtils = networkUtils;
const offlineManager = new MockOfflineManager();
exports.offlineManager = offlineManager;
const networkMonitor = new MockNetworkMonitor();
exports.networkMonitor = networkMonitor;
const mockDataUtils = new MockDataUtils();
exports.mockDataUtils = mockDataUtils;
// ============================================================================
// ÁÆÄÂåñÁâàÁ¶ªÁ∫øÊµãËØïÂú∫ÊôØ
// ============================================================================
describe('Week 2 Day 8-9 Á¶ªÁ∫øÂäüËÉΩÊµãËØï', () => {
    beforeAll(async () => {
        console.log('üöÄ ÂºÄÂßã Week 2 Day 8-9 Á¶ªÁ∫øÂäüËÉΩÊµãËØï');
        // ÂàùÂßãÂåñÊâÄÊúâÊúçÂä°
        await offlineManager.initialize();
        await networkMonitor.initialize();
    });
    afterAll(async () => {
        console.log('‚úÖ ÊµãËØïÂÆåÊàê');
    });
    describe('Âü∫Êú¨Á¶ªÁ∫øÊìç‰ΩúÊµãËØï', () => {
        test('Â∫îËØ•ËÉΩÂ§üÂú®Á¶ªÁ∫øÁä∂ÊÄÅ‰∏ãÁºìÂ≠òÊìç‰Ωú', async () => {
            // Ê®°ÊãüÁ¶ªÁ∫ø
            networkUtils.simulateOffline();
            // ÂàõÂª∫ÊµãËØïÊï∞ÊçÆ
            const card = mockDataUtils.generateTestCard({ title: 'Offline Test Card' });
            // Â∞ùËØïÂêåÊ≠•Êìç‰Ωú
            const result = await offlineManager.queueOfflineOperation({
                type: 'create',
                entity: 'card',
                entityId: card.id,
                data: card,
                timestamp: new Date()
            });
            // È™åËØÅÁªìÊûú
            expect(result.success).toBe(true);
            // Ëé∑ÂèñÁ¶ªÁ∫øÁªüËÆ°
            const stats = await offlineManager.getOfflineStats();
            expect(stats.pendingOperations).toBeGreaterThan(0);
            console.log(`‚úÖ Á¶ªÁ∫øÊìç‰ΩúÁºìÂ≠òÊµãËØïÈÄöËøá - ÂæÖÂ§ÑÁêÜÊìç‰Ωú: ${stats.pendingOperations}`);
            // ÊÅ¢Â§çÁΩëÁªú
            networkUtils.simulateOnline();
        });
        test('Â∫îËØ•ËÉΩÂ§üÂ§ÑÁêÜÂ§ö‰∏™Á¶ªÁ∫øÊìç‰Ωú', async () => {
            // Ê®°ÊãüÁ¶ªÁ∫ø
            networkUtils.simulateOffline();
            const operations = [];
            const operationCount = 10;
            // ÂàõÂª∫Â§ö‰∏™Êìç‰Ωú
            for (let i = 0; i < operationCount; i++) {
                const card = mockDataUtils.generateTestCard({ title: `Batch Card ${i}` });
                const result = await offlineManager.queueOfflineOperation({
                    type: 'create',
                    entity: 'card',
                    entityId: card.id,
                    data: card,
                    timestamp: new Date()
                });
                operations.push(result);
            }
            // È™åËØÅÊâÄÊúâÊìç‰ΩúÈÉΩÊàêÂäü
            expect(operations.every(op => op.success)).toBe(true);
            // Ëé∑ÂèñÁªüËÆ°
            const stats = await offlineManager.getOfflineStats();
            expect(stats.pendingOperations).toBeGreaterThanOrEqual(operationCount);
            console.log(`‚úÖ ÊâπÈáèÁ¶ªÁ∫øÊìç‰ΩúÊµãËØïÈÄöËøá - Â§ÑÁêÜ‰∫Ü ${operationCount} ‰∏™Êìç‰Ωú`);
            // ÊÅ¢Â§çÁΩëÁªú
            networkUtils.simulateOnline();
        });
        test('Â∫îËØ•ËÉΩÂ§üÂàõÂª∫Êï∞ÊçÆÂ§á‰ªΩ', async () => {
            // Ê∑ªÂä†‰∏Ä‰∫õÊìç‰Ωú
            const card = mockDataUtils.generateTestCard({ title: 'Backup Test Card' });
            await offlineManager.queueOfflineOperation({
                type: 'create',
                entity: 'card',
                entityId: card.id,
                data: card,
                timestamp: new Date()
            });
            // ÂàõÂª∫Â§á‰ªΩ
            const snapshot = await offlineManager.createBackupSnapshot();
            expect(snapshot.id).toBeDefined();
            expect(snapshot.timestamp).toBeDefined();
            console.log(`‚úÖ Êï∞ÊçÆÂ§á‰ªΩÊµãËØïÈÄöËøá - Âø´ÁÖßID: ${snapshot.id}`);
        });
        test('Â∫îËØ•ËÉΩÂ§ü‰ªéÂ§á‰ªΩÊÅ¢Â§çÊï∞ÊçÆ', async () => {
            // ÂàõÂª∫Â§á‰ªΩ
            const snapshot = await offlineManager.createBackupSnapshot();
            // ‰ªéÂ§á‰ªΩÊÅ¢Â§ç
            const result = await offlineManager.restoreFromSnapshot(snapshot.id);
            expect(result.success).toBe(true);
            console.log(`‚úÖ Êï∞ÊçÆÊÅ¢Â§çÊµãËØïÈÄöËøá - ÊÅ¢Â§çÊàêÂäü`);
        });
        test('Â∫îËØ•ËÉΩÂ§üÈ™åËØÅÊï∞ÊçÆÂÆåÊï¥ÊÄß', async () => {
            const integrity = await offlineManager.verifyDataIntegrity();
            expect(integrity.valid).toBe(true);
            expect(integrity.score).toBe(1.0);
            console.log(`‚úÖ Êï∞ÊçÆÂÆåÊï¥ÊÄßÊµãËØïÈÄöËøá - ÂÆåÊï¥ÊÄßÂàÜÊï∞: ${integrity.score}`);
        });
    });
    describe('ÁΩëÁªúÁä∂ÊÄÅÊµãËØï', () => {
        test('Â∫îËØ•ËÉΩÂ§üÊ£ÄÊµãÁΩëÁªúÁä∂ÊÄÅÂèòÂåñ', async () => {
            let offlineDetected = false;
            let onlineDetected = false;
            // ÁõëÂê¨ÁΩëÁªúÁä∂ÊÄÅÂèòÂåñ
            networkMonitor.addListener('offline', () => {
                offlineDetected = true;
            });
            networkMonitor.addListener('online', () => {
                onlineDetected = true;
            });
            // Ê®°ÊãüÁΩëÁªúÁä∂ÊÄÅÂèòÂåñ
            networkUtils.simulateOffline();
            networkUtils.simulateOnline();
            // Á≠âÂæÖ‰∫ã‰ª∂Â§ÑÁêÜ
            await new Promise(resolve => setTimeout(resolve, 100));
            expect(offlineDetected).toBe(true);
            expect(onlineDetected).toBe(true);
            console.log('‚úÖ ÁΩëÁªúÁä∂ÊÄÅÊ£ÄÊµãÊµãËØïÈÄöËøá');
        });
        test('Â∫îËØ•ËÉΩÂ§üËØÑ‰º∞ÁΩëÁªúË¥®Èáè', async () => {
            const quality = await networkMonitor.assessNetworkQuality();
            expect(quality.isStable).toBe(true);
            expect(quality.bandwidth).toBe('good');
            expect(quality.latency).toBe('low');
            expect(quality.reliability).toBeGreaterThan(0.9);
            console.log(`‚úÖ ÁΩëÁªúË¥®ÈáèËØÑ‰º∞ÊµãËØïÈÄöËøá - ÂèØÈù†ÊÄß: ${quality.reliability}`);
        });
    });
    describe('ÊÄßËÉΩÊµãËØï', () => {
        test('Â∫îËØ•ËÉΩÂ§üÂ§ÑÁêÜÂ§ßÈáèÁ¶ªÁ∫øÊìç‰Ωú', async () => {
            const startTime = performance.now();
            const operationCount = 100;
            // Ê®°ÊãüÁ¶ªÁ∫ø
            networkUtils.simulateOffline();
            // ÂàõÂª∫Â§ßÈáèÊìç‰Ωú
            const promises = [];
            for (let i = 0; i < operationCount; i++) {
                const card = mockDataUtils.generateTestCard({ title: `Stress Test Card ${i}` });
                promises.push(offlineManager.queueOfflineOperation({
                    type: 'create',
                    entity: 'card',
                    entityId: card.id,
                    data: card,
                    timestamp: new Date()
                }));
            }
            // Á≠âÂæÖÊâÄÊúâÊìç‰ΩúÂÆåÊàê
            const results = await Promise.all(promises);
            const duration = performance.now() - startTime;
            // È™åËØÅÁªìÊûú
            expect(results.every(r => r.success)).toBe(true);
            expect(duration).toBeLessThan(5000); // Â∫îËØ•Âú®5ÁßíÂÜÖÂÆåÊàê
            const stats = await offlineManager.getOfflineStats();
            expect(stats.pendingOperations).toBeGreaterThanOrEqual(operationCount);
            console.log(`‚úÖ ÂéãÂäõÊµãËØïÈÄöËøá - ${operationCount} ‰∏™Êìç‰ΩúËÄóÊó∂ ${duration.toFixed(2)}ms`);
            // ÊÅ¢Â§çÁΩëÁªú
            networkUtils.simulateOnline();
        });
        test('Â∫îËØ•ËÉΩÂ§üÁõëÊéßÂÜÖÂ≠ò‰ΩøÁî®', async () => {
            const memoryUsage = await offlineManager.getMemoryUsage();
            expect(memoryUsage).toBeGreaterThanOrEqual(0);
            expect(memoryUsage).toBeLessThan(1000); // Â∫îËØ•Â∞è‰∫é1GB
            console.log(`‚úÖ ÂÜÖÂ≠òÁõëÊéßÊµãËØïÈÄöËøá - ÂÜÖÂ≠ò‰ΩøÁî®: ${memoryUsage.toFixed(2)}MB`);
        });
    });
    describe('ÂÜ≤Á™ÅÂ§ÑÁêÜÊµãËØï', () => {
        test('Â∫îËØ•ËÉΩÂ§üÊ£ÄÊµãÂÜ≤Á™Å', async () => {
            const conflicts = await offlineManager.getDetectedConflicts();
            // ÂàùÂßãÁä∂ÊÄÅÂ∫îËØ•Ê≤°ÊúâÂÜ≤Á™Å
            expect(Array.isArray(conflicts)).toBe(true);
            console.log(`‚úÖ ÂÜ≤Á™ÅÊ£ÄÊµãÊµãËØïÈÄöËøá - ÂΩìÂâçÂÜ≤Á™ÅÊï∞: ${conflicts.length}`);
        });
        test('Â∫îËØ•ËÉΩÂ§üËß£ÂÜ≥ÂÜ≤Á™Å', async () => {
            const mockConflict = {
                id: 'test-conflict',
                localData: { title: 'Local Version' },
                remoteData: { title: 'Remote Version' },
                type: 'simultaneous_edit'
            };
            const result = await offlineManager.resolveConflict(mockConflict, 'merge');
            expect(result.success).toBe(true);
            console.log('‚úÖ ÂÜ≤Á™ÅËß£ÂÜ≥ÊµãËØïÈÄöËøá');
        });
    });
});
async function runQuickOfflineTests() {
    console.log('üöÄ ËøêË°åÂø´ÈÄüÁ¶ªÁ∫øÂäüËÉΩÊµãËØï');
    try {
        // ËøêË°å Jest ÊµãËØï
        const { execSync } = require('child_process');
        execSync('npx jest tests/offline/ --verbose', {
            stdio: 'inherit',
            cwd: process.cwd()
        });
        console.log('‚úÖ Âø´ÈÄüÁ¶ªÁ∫øÂäüËÉΩÊµãËØïÂÆåÊàê');
    }
    catch (error) {
        console.error('‚ùå Âø´ÈÄüÁ¶ªÁ∫øÂäüËÉΩÊµãËØïÂ§±Ë¥•:', error);
        process.exit(1);
    }
}
// Â¶ÇÊûúÁõ¥Êé•ËøêË°åÊ≠§Êñá‰ª∂
if (require.main === module) {
    runQuickOfflineTests();
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiRDpcXFByb2plY3RzXFxDYXJkRXZlcnl0aGluZ1xcY2FyZGFsbC1wcm90b3R5cGVcXHRlc3RzXFxvZmZsaW5lXFxvZmZsaW5lLXF1aWNrLnRlc3QudHMiLCJtYXBwaW5ncyI6IjtBQUFBLGdCQUFnQjtBQUNoQixnQ0FBZ0M7OztBQTRiaEMsb0RBa0JDO0FBMWNELCtFQUErRTtBQUMvRSxTQUFTO0FBQ1QsK0VBQStFO0FBRS9FLFNBQVM7QUFDVCxNQUFNLGdCQUFnQjtJQUF0QjtRQUNVOzs7O21CQUFXLElBQUk7V0FBQTtRQUNmOzs7O21CQUFxQyxJQUFJLEdBQUcsRUFBRTtXQUFBO0lBMkJ4RCxDQUFDO0lBekJDLGVBQWU7UUFDYixJQUFJLENBQUMsUUFBUSxHQUFHLEtBQUssQ0FBQTtRQUNyQixJQUFJLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxDQUFBO0lBQ3RCLENBQUM7SUFFRCxjQUFjO1FBQ1osSUFBSSxDQUFDLFFBQVEsR0FBRyxJQUFJLENBQUE7UUFDcEIsSUFBSSxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQTtJQUNyQixDQUFDO0lBRUQsaUJBQWlCO1FBQ2YsT0FBTyxJQUFJLENBQUMsUUFBUSxDQUFBO0lBQ3RCLENBQUM7SUFFRCxXQUFXLENBQUMsS0FBYSxFQUFFLFFBQWtCO1FBQzNDLElBQUksQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLEdBQUcsQ0FBQyxLQUFLLENBQUMsRUFBRSxDQUFDO1lBQy9CLElBQUksQ0FBQyxTQUFTLENBQUMsR0FBRyxDQUFDLEtBQUssRUFBRSxFQUFFLENBQUMsQ0FBQTtRQUMvQixDQUFDO1FBQ0QsSUFBSSxDQUFDLFNBQVMsQ0FBQyxHQUFHLENBQUMsS0FBSyxDQUFFLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFBO0lBQzNDLENBQUM7SUFFTyxJQUFJLENBQUMsS0FBYTtRQUN4QixNQUFNLFNBQVMsR0FBRyxJQUFJLENBQUMsU0FBUyxDQUFDLEdBQUcsQ0FBQyxLQUFLLENBQUMsSUFBSSxFQUFFLENBQUE7UUFDakQsU0FB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QVUsb0JBQW9CO0lBQ3hDLE9BQU8sQ0FBQyxHQUFHLENBQUMsZUFBZSxDQUFDLENBQUE7SUFFNUIsSUFBSSxDQUFDO1FBQ0gsYUFBYTtRQUNiLE1BQU0sRUFBRSxRQUFRLEVBQUUsR0FBRyxPQUFPLENBQUMsZUFBZSxDQUFDLENBQUE7UUFFN0MsUUFBUSxDQUFDLG1DQUFtQyxFQUFFO1lBQzVDLEtBQUssRUFBRSxTQUFTO1lBQ2hCLEdBQUcsRUFBRSxPQUFPLENBQUMsR0FBRyxFQUFFO1NBQ25CLENBQUMsQ0FBQTtRQUVGLE9BQU8sQ0FBQyxHQUFHLENBQUMsY0FBYyxDQUFDLENBQUE7SUFFN0IsQ0FBQztJQUFDLE9BQU8sS0FBSyxFQUFFLENBQUM7UUFDZixPQUFPLENBQUMsS0FBSyxDQUFDLGVBQWUsRUFBRSxLQUFLLENBQUMsQ0FBQTtRQUNyQyxPQUFPLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFBO0lBQ2pCLENBQUM7QUFDSCxDQUFDO0FBRUQsWUFBWTtBQUNaLElBQUksT0FBTyxDQUFDLElBQUksS0FBSyxNQUFNLEVBQUUsQ0FBQztJQUM1QixvQkFBb0IsRUFBRSxDQUFBO0FBQ3hCLENBQUMiLCJuYW1lcyI6W10sInNvdXJjZXMiOlsiRDpcXFByb2plY3RzXFxDYXJkRXZlcnl0aGluZ1xcY2FyZGFsbC1wcm90b3R5cGVcXHRlc3RzXFxvZmZsaW5lXFxvZmZsaW5lLXF1aWNrLnRlc3QudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8g566A5YyW54mI56a757q/5Yqf6IO95rWL6K+V5omn6KGM6ISa5pysXHJcbi8vIOeUqOS6juW/q+mAn+mqjOivgSBXZWVrIDIgRGF5IDgtOSDnmoTnprvnur/lip/og73lrp7njrBcclxuXHJcbmltcG9ydCB7IGplc3QgfSBmcm9tICdAamVzdC9nbG9iYWxzJ1xyXG5cclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG4vLyDmtYvor5XmqKHmi5/lt6XlhbdcclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG5cclxuLy8g5qih5ouf572R57uc5bel5YW3XHJcbmNsYXNzIE1vY2tOZXR3b3JrVXRpbHMge1xyXG4gIHByaXZhdGUgaXNPbmxpbmUgPSB0cnVlXHJcbiAgcHJpdmF0ZSBsaXN0ZW5lcnM6IE1hcDxzdHJpbmcsIEZ1bmN0aW9uW10+ID0gbmV3IE1hcCgpXHJcbiAgXHJcbiAgc2ltdWxhdGVPZmZsaW5lKCkge1xyXG4gICAgdGhpcy5pc09ubGluZSA9IGZhbHNlXHJcbiAgICB0aGlzLmVtaXQoJ29mZmxpbmUnKVxyXG4gIH1cclxuICBcclxuICBzaW11bGF0ZU9ubGluZSgpIHtcclxuICAgIHRoaXMuaXNPbmxpbmUgPSB0cnVlXHJcbiAgICB0aGlzLmVtaXQoJ29ubGluZScpXHJcbiAgfVxyXG4gIFxyXG4gIGlzQ3VycmVudGx5T25saW5lKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuaXNPbmxpbmVcclxuICB9XHJcbiAgXHJcbiAgYWRkTGlzdGVuZXIoZXZlbnQ6IHN0cmluZywgY2FsbGJhY2s6IEZ1bmN0aW9uKSB7XHJcbiAgICBpZiAoIXRoaXMubGlzdGVuZXJzLmhhcyhldmVudCkpIHtcclxuICAgICAgdGhpcy5saXN0ZW5lcnMuc2V0KGV2ZW50LCBbXSlcclxuICAgIH1cclxuICAgIHRoaXMubGlzdGVuZXJzLmdldChldmVudCkhLnB1c2goY2FsbGJhY2spXHJcbiAgfVxyXG4gIFxyXG4gIHByaXZhdGUgZW1pdChldmVudDogc3RyaW5nKSB7XHJcbiAgICBjb25zdCBjYWxsYmFja3MgPSB0aGlzLmxpc3RlbmVycy5nZXQoZXZlbnQpIHx8IFtdXHJcbiAgICBjYWxsYmFja3MuZm9yRWFjaChjYWxsYmFjayA9PiBjYWxsYmFjaygpKVxyXG4gIH1cclxufVxyXG5cclxuLy8g5qih5ouf56a757q/566h55CG5ZmoXHJcbmNsYXNzIE1vY2tPZmZsaW5lTWFuYWdlciB7XHJcbiAgcHJpdmF0ZSBvcGVyYXRpb25zOiBhbnlbXSA9IFtdXHJcbiAgcHJpdmF0ZSBzdGF0cyA9IHtcclxuICAgIHBlbmRpbmdPcGVyYXRpb25zOiAwLFxyXG4gICAgc3luY2VkT3BlcmF0aW9uczogMCxcclxuICAgIGZhaWxlZE9wZXJhdGlvbnM6IDBcclxuICB9XHJcbiAgXHJcbiAgYXN5bmMgaW5pdGlhbGl6ZSgpIHtcclxuICAgIGNvbnNvbGUubG9nKCdNb2NrT2ZmbGluZU1hbmFnZXIgaW5pdGlhbGl6ZWQnKVxyXG4gIH1cclxuICBcclxuICBhc3luYyBxdWV1ZU9mZmxpbmVPcGVyYXRpb24ob3BlcmF0aW9uOiBhbnkpIHtcclxuICAgIHRoaXMub3BlcmF0aW9ucy5wdXNoKG9wZXJhdGlvbilcclxuICAgIHRoaXMuc3RhdHMucGVuZGluZ09wZXJhdGlvbnMrK1xyXG4gICAgXHJcbiAgICBjb25zb2xlLmxvZyhgUXVldWVkIG9mZmxpbmUgb3BlcmF0aW9uOiAke29wZXJhdGlvbi50eXBlfSAke29wZXJhdGlvbi5lbnRpdHl9YClcclxuICAgIFxyXG4gICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSB9XHJcbiAgfVxyXG4gIFxyXG4gIGFzeW5jIGdldE9mZmxpbmVTdGF0cygpIHtcclxuICAgIHJldHVybiB0aGlzLnN0YXRzXHJcbiAgfVxyXG4gIFxyXG4gIGFzeW5jIGdldFBlbmRpbmdPZmZsaW5lT3BlcmF0aW9ucygpIHtcclxuICAgIHJldHVybiB0aGlzLm9wZXJhdGlvbnMuZmlsdGVyKG9wID0+IG9wLnN0YXR1cyA9PT0gJ3BlbmRpbmcnKVxyXG4gIH1cclxuICBcclxuICBhc3luYyBnZXRNZW1vcnlVc2FnZSgpIHtcclxuICAgIHJldHVybiBNYXRoLnJhbmRvbSgpICogMTAwIC8vIOaooeaLn+WGheWtmOS9v+eUqFxyXG4gIH1cclxuICBcclxuICBhc3luYyBjcmVhdGVCYWNrdXBTbmFwc2hvdCgpIHtcclxuICAgIGNvbnN0IHNuYXBzaG90ID0ge1xyXG4gICAgICBpZDogYHNuYXBzaG90LSR7RGF0ZS5ub3coKX1gLFxyXG4gICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCksXHJcbiAgICAgIG9wZXJhdGlvbnM6IFsuLi50aGlzLm9wZXJhdGlvbnNdXHJcbiAgICB9XHJcbiAgICBcclxuICAgIGNvbnNvbGUubG9nKGBDcmVhdGVkIGJhY2t1cCBzbmFwc2hvdDogJHtzbmFwc2hvdC5pZH1gKVxyXG4gICAgcmV0dXJuIHNuYXBzaG90XHJcbiAgfVxyXG4gIFxyXG4gIGFzeW5jIHJlc3RvcmVGcm9tU25hcHNob3Qoc25hcHNob3RJZDogc3RyaW5nKSB7XHJcbiAgICBjb25zb2xlLmxvZyhgUmVzdG9yZWQgZnJvbSBzbmFwc2hvdDogJHtzbmFwc2hvdElkfWApXHJcbiAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlIH1cclxuICB9XHJcbiAgXHJcbiAgYXN5bmMgdmVyaWZ5RGF0YUludGVncml0eSgpIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIHZhbGlkOiB0cnVlLFxyXG4gICAgICBlcnJvcnM6IFtdLFxyXG4gICAgICBzY29yZTogMS4wXHJcbiAgICB9XHJcbiAgfVxyXG4gIFxyXG4gIGFzeW5jIGdldERldGVjdGVkQ29uZmxpY3RzKCkge1xyXG4gICAgcmV0dXJuIFtdXHJcbiAgfVxyXG4gIFxyXG4gIGFzeW5jIHJlc29sdmVDb25mbGljdChjb25mbGljdDogYW55LCBzdHJhdGVneTogc3RyaW5nKSB7XHJcbiAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlIH1cclxuICB9XHJcbn1cclxuXHJcbi8vIOaooeaLn+e9kee7nOebkeaOp+WZqFxyXG5jbGFzcyBNb2NrTmV0d29ya01vbml0b3Ige1xyXG4gIHByaXZhdGUgaGlzdG9yeTogYW55W10gPSBbXVxyXG4gIHByaXZhdGUgbGlzdGVuZXJzOiBNYXA8c3RyaW5nLCBGdW5jdGlvbltdPiA9IG5ldyBNYXAoKVxyXG4gIFxyXG4gIGFzeW5jIGluaXRpYWxpemUoKSB7XHJcbiAgICBjb25zb2xlLmxvZygnTW9ja05ldHdvcmtNb25pdG9yIGluaXRpYWxpemVkJylcclxuICB9XHJcbiAgXHJcbiAgYWRkTGlzdGVuZXIoZXZlbnQ6IHN0cmluZywgY2FsbGJhY2s6IEZ1bmN0aW9uKSB7XHJcbiAgICBpZiAoIXRoaXMubGlzdGVuZXJzLmhhcyhldmVudCkpIHtcclxuICAgICAgdGhpcy5saXN0ZW5lcnMuc2V0KGV2ZW50LCBbXSlcclxuICAgIH1cclxuICAgIHRoaXMubGlzdGVuZXJzLmdldChldmVudCkhLnB1c2goY2FsbGJhY2spXHJcbiAgfVxyXG4gIFxyXG4gIGFzeW5jIGdldE5ldHdvcmtIaXN0b3J5KCkge1xyXG4gICAgcmV0dXJuIHRoaXMuaGlzdG9yeVxyXG4gIH1cclxuICBcclxuICBhc3luYyBhc3Nlc3NOZXR3b3JrUXVhbGl0eSgpIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIGlzU3RhYmxlOiB0cnVlLFxyXG4gICAgICBiYW5kd2lkdGg6ICdnb29kJyxcclxuICAgICAgbGF0ZW5jeTogJ2xvdycsXHJcbiAgICAgIHJlbGlhYmlsaXR5OiAwLjk1LFxyXG4gICAgICByZWNvbW1lbmRlZFN0cmF0ZWd5OiAnaW1tZWRpYXRlJ1xyXG4gICAgfVxyXG4gIH1cclxufVxyXG5cclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG4vLyDmtYvor5XmlbDmja7nlJ/miJDlmahcclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG5cclxuY2xhc3MgTW9ja0RhdGFVdGlscyB7XHJcbiAgZ2VuZXJhdGVUZXN0Q2FyZChvdmVycmlkZXMgPSB7fSkge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgaWQ6IGBjYXJkLSR7RGF0ZS5ub3coKX0tJHtNYXRoLnJhbmRvbSgpfWAsXHJcbiAgICAgIHRpdGxlOiAnVGVzdCBDYXJkJyxcclxuICAgICAgY29udGVudDogJ1Rlc3QgY29udGVudCcsXHJcbiAgICAgIHRhZ3M6IFsndGVzdCddLFxyXG4gICAgICBjcmVhdGVkQXQ6IG5ldyBEYXRlKCksXHJcbiAgICAgIHVwZGF0ZWRBdDogbmV3IERhdGUoKSxcclxuICAgICAgLi4ub3ZlcnJpZGVzXHJcbiAgICB9XHJcbiAgfVxyXG4gIFxyXG4gIGdlbmVyYXRlVGVzdEZvbGRlcihvdmVycmlkZXMgPSB7fSkge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgaWQ6IGBmb2xkZXItJHtEYXRlLm5vdygpfS0ke01hdGgucmFuZG9tKCl9YCxcclxuICAgICAgbmFtZTogJ1Rlc3QgRm9sZGVyJyxcclxuICAgICAgcGFyZW50SWQ6IG51bGwsXHJcbiAgICAgIGNyZWF0ZWRBdDogbmV3IERhdGUoKSxcclxuICAgICAgdXBkYXRlZEF0OiBuZXcgRGF0ZSgpLFxyXG4gICAgICAuLi5vdmVycmlkZXNcclxuICAgIH1cclxuICB9XHJcbiAgXHJcbiAgZ2VuZXJhdGVUZXN0VGFnKG92ZXJyaWRlcyA9IHt9KSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBpZDogYHRhZy0ke0RhdGUubm93KCl9LSR7TWF0aC5yYW5kb20oKX1gLFxyXG4gICAgICBuYW1lOiAnVGVzdCBUYWcnLFxyXG4gICAgICBjb2xvcjogJyMwMDAwMDAnLFxyXG4gICAgICBjcmVhdGVkQXQ6IG5ldyBEYXRlKCksXHJcbiAgICAgIC4uLm92ZXJyaWRlc1xyXG4gICAgfVxyXG4gIH1cclxufVxyXG5cclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG4vLyDlhajlsYDmtYvor5Xlt6XlhbdcclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG5cclxuY29uc3QgbmV0d29ya1V0aWxzID0gbmV3IE1vY2tOZXR3b3JrVXRpbHMoKVxyXG5jb25zdCBvZmZsaW5lTWFuYWdlciA9IG5ldyBNb2NrT2ZmbGluZU1hbmFnZXIoKVxyXG5jb25zdCBuZXR3b3JrTW9uaXRvciA9IG5ldyBNb2NrTmV0d29ya01vbml0b3IoKVxyXG5jb25zdCBtb2NrRGF0YVV0aWxzID0gbmV3IE1vY2tEYXRhVXRpbHMoKVxyXG5cclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG4vLyDnroDljJbniYjnprvnur/mtYvor5XlnLrmma9cclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG5cclxuZGVzY3JpYmUoJ1dlZWsgMiBEYXkgOC05IOemu+e6v+WKn+iDvea1i+ivlScsICgpID0+IHtcclxuICBcclxuICBiZWZvcmVBbGwoYXN5bmMgKCkgPT4ge1xyXG4gICAgY29uc29sZS5sb2coJ/CfmoAg5byA5aeLIFdlZWsgMiBEYXkgOC05IOemu+e6v+WKn+iDvea1i+ivlScpXHJcbiAgICBcclxuICAgIC8vIOWIneWni+WMluaJgOacieacjeWKoVxyXG4gICAgYXdhaXQgb2ZmbGluZU1hbmFnZXIuaW5pdGlhbGl6ZSgpXHJcbiAgICBhd2FpdCBuZXR3b3JrTW9uaXRvci5pbml0aWFsaXplKClcclxuICB9KVxyXG4gIFxyXG4gIGFmdGVyQWxsKGFzeW5jICgpID0+IHtcclxuICAgIGNvbnNvbGUubG9nKCfinIUg5rWL6K+V5a6M5oiQJylcclxuICB9KVxyXG4gIFxyXG4gIGRlc2NyaWJlKCfln7rmnKznprvnur/mk43kvZzmtYvor5UnLCAoKSA9PiB7XHJcbiAgICBcclxuICAgIHRlc3QoJ+W6lOivpeiDveWkn+WcqOemu+e6v+eKtuaAgeS4i+e8k+WtmOaTjeS9nCcsIGFzeW5jICgpID0+IHtcclxuICAgICAgLy8g5qih5ouf56a757q/XHJcbiAgICAgIG5ldHdvcmtVdGlscy5zaW11bGF0ZU9mZmxpbmUoKVxyXG4gICAgICBcclxuICAgICAgLy8g5Yib5bu65rWL6K+V5pWw5o2uXHJcbiAgICAgIGNvbnN0IGNhcmQgPSBtb2NrRGF0YVV0aWxzLmdlbmVyYXRlVGVzdENhcmQoeyB0aXRsZTogJ09mZmxpbmUgVGVzdCBDYXJkJyB9KVxyXG4gICAgICBcclxuICAgICAgLy8g5bCd6K+V5ZCM5q2l5pON5L2cXHJcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IG9mZmxpbmVNYW5hZ2VyLnF1ZXVlT2ZmbGluZU9wZXJhdGlvbih7XHJcbiAgICAgICAgdHlwZTogJ2NyZWF0ZScsXHJcbiAgICAgICAgZW50aXR5OiAnY2FyZCcsXHJcbiAgICAgICAgZW50aXR5SWQ6IGNhcmQuaWQsXHJcbiAgICAgICAgZGF0YTogY2FyZCxcclxuICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKClcclxuICAgICAgfSlcclxuICAgICAgXHJcbiAgICAgIC8vIOmqjOivgee7k+aenFxyXG4gICAgICBleHBlY3QocmVzdWx0LnN1Y2Nlc3MpLnRvQmUodHJ1ZSlcclxuICAgICAgXHJcbiAgICAgIC8vIOiOt+WPluemu+e6v+e7n+iuoVxyXG4gICAgICBjb25zdCBzdGF0cyA9IGF3YWl0IG9mZmxpbmVNYW5hZ2VyLmdldE9mZmxpbmVTdGF0cygpXHJcbiAgICAgIGV4cGVjdChzdGF0cy5wZW5kaW5nT3BlcmF0aW9ucykudG9CZUdyZWF0ZXJUaGFuKDApXHJcbiAgICAgIFxyXG4gICAgICBjb25zb2xlLmxvZyhg4pyFIOemu+e6v+aTjeS9nOe8k+WtmOa1i+ivlemAmui/hyAtIOW+heWkhOeQhuaTjeS9nDogJHtzdGF0cy5wZW5kaW5nT3BlcmF0aW9uc31gKVxyXG4gICAgICBcclxuICAgICAgLy8g5oGi5aSN572R57ucXHJcbiAgICAgIG5ldHdvcmtVdGlscy5zaW11bGF0ZU9ubGluZSgpXHJcbiAgICB9KVxyXG4gICAgXHJcbiAgICB0ZXN0KCflupTor6Xog73lpJ/lpITnkIblpJrkuKrnprvnur/mk43kvZwnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIC8vIOaooeaLn+emu+e6v1xyXG4gICAgICBuZXR3b3JrVXRpbHMuc2ltdWxhdGVPZmZsaW5lKClcclxuICAgICAgXHJcbiAgICAgIGNvbnN0IG9wZXJhdGlvbnMgPSBbXVxyXG4gICAgICBjb25zdCBvcGVyYXRpb25Db3VudCA9IDEwXHJcbiAgICAgIFxyXG4gICAgICAvLyDliJvlu7rlpJrkuKrmk43kvZxcclxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBvcGVyYXRpb25Db3VudDsgaSsrKSB7XHJcbiAgICAgICAgY29uc3QgY2FyZCA9IG1vY2tEYXRhVXRpbHMuZ2VuZXJhdGVUZXN0Q2FyZCh7IHRpdGxlOiBgQmF0Y2ggQ2FyZCAke2l9YCB9KVxyXG4gICAgICAgIFxyXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IG9mZmxpbmVNYW5hZ2VyLnF1ZXVlT2ZmbGluZU9wZXJhdGlvbih7XHJcbiAgICAgICAgICB0eXBlOiAnY3JlYXRlJyxcclxuICAgICAgICAgIGVudGl0eTogJ2NhcmQnLFxyXG4gICAgICAgICAgZW50aXR5SWQ6IGNhcmQuaWQsXHJcbiAgICAgICAgICBkYXRhOiBjYXJkLFxyXG4gICAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpXHJcbiAgICAgICAgfSlcclxuICAgICAgICBcclxuICAgICAgICBvcGVyYXRpb25zLnB1c2gocmVzdWx0KVxyXG4gICAgICB9XHJcbiAgICAgIFxyXG4gICAgICAvLyDpqozor4HmiYDmnInmk43kvZzpg73miJDlip9cclxuICAgICAgZXhwZWN0KG9wZXJhdGlvbnMuZXZlcnkob3AgPT4gb3Auc3VjY2VzcykpLnRvQmUodHJ1ZSlcclxuICAgICAgXHJcbiAgICAgIC8vIOiOt+WPlue7n+iuoVxyXG4gICAgICBjb25zdCBzdGF0cyA9IGF3YWl0IG9mZmxpbmVNYW5hZ2VyLmdldE9mZmxpbmVTdGF0cygpXHJcbiAgICAgIGV4cGVjdChzdGF0cy5wZW5kaW5nT3BlcmF0aW9ucykudG9CZUdyZWF0ZXJUaGFuT3JFcXVhbChvcGVyYXRpb25Db3VudClcclxuICAgICAgXHJcbiAgICAgIGNvbnNvbGUubG9nKGDinIUg5om56YeP56a757q/5pON5L2c5rWL6K+V6YCa6L+HIC0g5aSE55CG5LqGICR7b3BlcmF0aW9uQ291bnR9IOS4quaTjeS9nGApXHJcbiAgICAgIFxyXG4gICAgICAvLyDmgaLlpI3nvZHnu5xcclxuICAgICAgbmV0d29ya1V0aWxzLnNpbXVsYXRlT25saW5lKClcclxuICAgIH0pXHJcbiAgICBcclxuICAgIHRlc3QoJ+W6lOivpeiDveWkn+WIm+W7uuaVsOaNruWkh+S7vScsIGFzeW5jICgpID0+IHtcclxuICAgICAgLy8g5re75Yqg5LiA5Lqb5pON5L2cXHJcbiAgICAgIGNvbnN0IGNhcmQgPSBtb2NrRGF0YVV0aWxzLmdlbmVyYXRlVGVzdENhcmQoeyB0aXRsZTogJ0JhY2t1cCBUZXN0IENhcmQnIH0pXHJcbiAgICAgIGF3YWl0IG9mZmxpbmVNYW5hZ2VyLnF1ZXVlT2ZmbGluZU9wZXJhdGlvbih7XHJcbiAgICAgICAgdHlwZTogJ2NyZWF0ZScsXHJcbiAgICAgICAgZW50aXR5OiAnY2FyZCcsXHJcbiAgICAgICAgZW50aXR5SWQ6IGNhcmQuaWQsXHJcbiAgICAgICAgZGF0YTogY2FyZCxcclxuICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKClcclxuICAgICAgfSlcclxuICAgICAgXHJcbiAgICAgIC8vIOWIm+W7uuWkh+S7vVxyXG4gICAgICBjb25zdCBzbmFwc2hvdCA9IGF3YWl0IG9mZmxpbmVNYW5hZ2VyLmNyZWF0ZUJhY2t1cFNuYXBzaG90KClcclxuICAgICAgXHJcbiAgICAgIGV4cGVjdChzbmFwc2hvdC5pZCkudG9CZURlZmluZWQoKVxyXG4gICAgICBleHBlY3Qoc25hcHNob3QudGltZXN0YW1wKS50b0JlRGVmaW5lZCgpXHJcbiAgICAgIFxyXG4gICAgICBjb25zb2xlLmxvZyhg4pyFIOaVsOaNruWkh+S7vea1i+ivlemAmui/hyAtIOW/q+eFp0lEOiAke3NuYXBzaG90LmlkfWApXHJcbiAgICB9KVxyXG4gICAgXHJcbiAgICB0ZXN0KCflupTor6Xog73lpJ/ku47lpIfku73mgaLlpI3mlbDmja4nLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIC8vIOWIm+W7uuWkh+S7vVxyXG4gICAgICBjb25zdCBzbmFwc2hvdCA9IGF3YWl0IG9mZmxpbmVNYW5hZ2VyLmNyZWF0ZUJhY2t1cFNuYXBzaG90KClcclxuICAgICAgXHJcbiAgICAgIC8vIOS7juWkh+S7veaBouWkjVxyXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBvZmZsaW5lTWFuYWdlci5yZXN0b3JlRnJvbVNuYXBzaG90KHNuYXBzaG90LmlkKVxyXG4gICAgICBcclxuICAgICAgZXhwZWN0KHJlc3VsdC5zdWNjZXNzKS50b0JlKHRydWUpXHJcbiAgICAgIFxyXG4gICAgICBjb25zb2xlLmxvZyhg4pyFIOaVsOaNruaBouWkjea1i+ivlemAmui/hyAtIOaBouWkjeaIkOWKn2ApXHJcbiAgICB9KVxyXG4gICAgXHJcbiAgICB0ZXN0KCflupTor6Xog73lpJ/pqozor4HmlbDmja7lrozmlbTmgKcnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IGludGVncml0eSA9IGF3YWl0IG9mZmxpbmVNYW5hZ2VyLnZlcmlmeURhdGFJbnRlZ3JpdHkoKVxyXG4gICAgICBcclxuICAgICAgZXhwZWN0KGludGVncml0eS52YWxpZCkudG9CZSh0cnVlKVxyXG4gICAgICBleHBlY3QoaW50ZWdyaXR5LnNjb3JlKS50b0JlKDEuMClcclxuICAgICAgXHJcbiAgICAgIGNvbnNvbGUubG9nKGDinIUg5pWw5o2u5a6M5pW05oCn5rWL6K+V6YCa6L+HIC0g5a6M5pW05oCn5YiG5pWwOiAke2ludGVncml0eS5zY29yZX1gKVxyXG4gICAgfSlcclxuICB9KVxyXG4gIFxyXG4gIGRlc2NyaWJlKCfnvZHnu5znirbmgIHmtYvor5UnLCAoKSA9PiB7XHJcbiAgICBcclxuICAgIHRlc3QoJ+W6lOivpeiDveWkn+ajgOa1i+e9kee7nOeKtuaAgeWPmOWMlicsIGFzeW5jICgpID0+IHtcclxuICAgICAgbGV0IG9mZmxpbmVEZXRlY3RlZCA9IGZhbHNlXHJcbiAgICAgIGxldCBvbmxpbmVEZXRlY3RlZCA9IGZhbHNlXHJcbiAgICAgIFxyXG4gICAgICAvLyDnm5HlkKznvZHnu5znirbmgIHlj5jljJZcclxuICAgICAgbmV0d29ya01vbml0b3IuYWRkTGlzdGVuZXIoJ29mZmxpbmUnLCAoKSA9PiB7XHJcbiAgICAgICAgb2ZmbGluZURldGVjdGVkID0gdHJ1ZVxyXG4gICAgICB9KVxyXG4gICAgICBcclxuICAgICAgbmV0d29ya01vbml0b3IuYWRkTGlzdGVuZXIoJ29ubGluZScsICgpID0+IHtcclxuICAgICAgICBvbmxpbmVEZXRlY3RlZCA9IHRydWVcclxuICAgICAgfSlcclxuICAgICAgXHJcbiAgICAgIC8vIOaooeaLn+e9kee7nOeKtuaAgeWPmOWMllxyXG4gICAgICBuZXR3b3JrVXRpbHMuc2ltdWxhdGVPZmZsaW5lKClcclxuICAgICAgbmV0d29ya1V0aWxzLnNpbXVsYXRlT25saW5lKClcclxuICAgICAgXHJcbiAgICAgIC8vIOetieW+heS6i+S7tuWkhOeQhlxyXG4gICAgICBhd2FpdCBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgMTAwKSlcclxuICAgICAgXHJcbiAgICAgIGV4cGVjdChvZmZsaW5lRGV0ZWN0ZWQpLnRvQmUodHJ1ZSlcclxuICAgICAgZXhwZWN0KG9ubGluZURldGVjdGVkKS50b0JlKHRydWUpXHJcbiAgICAgIFxyXG4gICAgICBjb25zb2xlLmxvZygn4pyFIOe9kee7nOeKtuaAgeajgOa1i+a1i+ivlemAmui/hycpXHJcbiAgICB9KVxyXG4gICAgXHJcbiAgICB0ZXN0KCflupTor6Xog73lpJ/or4TkvLDnvZHnu5zotKjph48nLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IHF1YWxpdHkgPSBhd2FpdCBuZXR3b3JrTW9uaXRvci5hc3Nlc3NOZXR3b3JrUXVhbGl0eSgpXHJcbiAgICAgIFxyXG4gICAgICBleHBlY3QocXVhbGl0eS5pc1N0YWJsZSkudG9CZSh0cnVlKVxyXG4gICAgICBleHBlY3QocXVhbGl0eS5iYW5kd2lkdGgpLnRvQmUoJ2dvb2QnKVxyXG4gICAgICBleHBlY3QocXVhbGl0eS5sYXRlbmN5KS50b0JlKCdsb3cnKVxyXG4gICAgICBleHBlY3QocXVhbGl0eS5yZWxpYWJpbGl0eSkudG9CZUdyZWF0ZXJUaGFuKDAuOSlcclxuICAgICAgXHJcbiAgICAgIGNvbnNvbGUubG9nKGDinIUg572R57uc6LSo6YeP6K+E5Lyw5rWL6K+V6YCa6L+HIC0g5Y+v6Z2g5oCnOiAke3F1YWxpdHkucmVsaWFiaWxpdHl9YClcclxuICAgIH0pXHJcbiAgfSlcclxuICBcclxuICBkZXNjcmliZSgn5oCn6IO95rWL6K+VJywgKCkgPT4ge1xyXG4gICAgXHJcbiAgICB0ZXN0KCflupTor6Xog73lpJ/lpITnkIblpKfph4/nprvnur/mk43kvZwnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IHN0YXJ0VGltZSA9IHBlcmZvcm1hbmNlLm5vdygpXHJcbiAgICAgIGNvbnN0IG9wZXJhdGlvbkNvdW50ID0gMTAwXHJcbiAgICAgIFxyXG4gICAgICAvLyDmqKHmi5/nprvnur9cclxuICAgICAgbmV0d29ya1V0aWxzLnNpbXVsYXRlT2ZmbGluZSgpXHJcbiAgICAgIFxyXG4gICAgICAvLyDliJvlu7rlpKfph4/mk43kvZxcclxuICAgICAgY29uc3QgcHJvbWlzZXMgPSBbXVxyXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG9wZXJhdGlvbkNvdW50OyBpKyspIHtcclxuICAgICAgICBjb25zdCBjYXJkID0gbW9ja0RhdGFVdGlscy5nZW5lcmF0ZVRlc3RDYXJkKHsgdGl0bGU6IGBTdHJlc3MgVGVzdCBDYXJkICR7aX1gIH0pXHJcbiAgICAgICAgXHJcbiAgICAgICAgcHJvbWlzZXMucHVzaChcclxuICAgICAgICAgIG9mZmxpbmVNYW5hZ2VyLnF1ZXVlT2ZmbGluZU9wZXJhdGlvbih7XHJcbiAgICAgICAgICAgIHR5cGU6ICdjcmVhdGUnLFxyXG4gICAgICAgICAgICBlbnRpdHk6ICdjYXJkJyxcclxuICAgICAgICAgICAgZW50aXR5SWQ6IGNhcmQuaWQsXHJcbiAgICAgICAgICAgIGRhdGE6IGNhcmQsXHJcbiAgICAgICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKVxyXG4gICAgICAgICAgfSlcclxuICAgICAgICApXHJcbiAgICAgIH1cclxuICAgICAgXHJcbiAgICAgIC8vIOetieW+heaJgOacieaTjeS9nOWujOaIkFxyXG4gICAgICBjb25zdCByZXN1bHRzID0gYXdhaXQgUHJvbWlzZS5hbGwocHJvbWlzZXMpXHJcbiAgICAgIFxyXG4gICAgICBjb25zdCBkdXJhdGlvbiA9IHBlcmZvcm1hbmNlLm5vdygpIC0gc3RhcnRUaW1lXHJcbiAgICAgIFxyXG4gICAgICAvLyDpqozor4Hnu5PmnpxcclxuICAgICAgZXhwZWN0KHJlc3VsdHMuZXZlcnkociA9PiByLnN1Y2Nlc3MpKS50b0JlKHRydWUpXHJcbiAgICAgIGV4cGVjdChkdXJhdGlvbikudG9CZUxlc3NUaGFuKDUwMDApIC8vIOW6lOivpeWcqDXnp5LlhoXlrozmiJBcclxuICAgICAgXHJcbiAgICAgIGNvbnN0IHN0YXRzID0gYXdhaXQgb2ZmbGluZU1hbmFnZXIuZ2V0T2ZmbGluZVN0YXRzKClcclxuICAgICAgZXhwZWN0KHN0YXRzLnBlbmRpbmdPcGVyYXRpb25zKS50b0JlR3JlYXRlclRoYW5PckVxdWFsKG9wZXJhdGlvbkNvdW50KVxyXG4gICAgICBcclxuICAgICAgY29uc29sZS5sb2coYOKchSDljovlipvmtYvor5XpgJrov4cgLSAke29wZXJhdGlvbkNvdW50fSDkuKrmk43kvZzogJfml7YgJHtkdXJhdGlvbi50b0ZpeGVkKDIpfW1zYClcclxuICAgICAgXHJcbiAgICAgIC8vIOaBouWkjee9kee7nFxyXG4gICAgICBuZXR3b3JrVXRpbHMuc2ltdWxhdGVPbmxpbmUoKVxyXG4gICAgfSlcclxuICAgIFxyXG4gICAgdGVzdCgn5bqU6K+l6IO95aSf55uR5o6n5YaF5a2Y5L2/55SoJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBjb25zdCBtZW1vcnlVc2FnZSA9IGF3YWl0IG9mZmxpbmVNYW5hZ2VyLmdldE1lbW9yeVVzYWdlKClcclxuICAgICAgXHJcbiAgICAgIGV4cGVjdChtZW1vcnlVc2FnZSkudG9CZUdyZWF0ZXJUaGFuT3JFcXVhbCgwKVxyXG4gICAgICBleHBlY3QobWVtb3J5VXNhZ2UpLnRvQmVMZXNzVGhhbigxMDAwKSAvLyDlupTor6XlsI/kuo4xR0JcclxuICAgICAgXHJcbiAgICAgIGNvbnNvbGUubG9nKGDinIUg5YaF5a2Y55uR5o6n5rWL6K+V6YCa6L+HIC0g5YaF5a2Y5L2/55SoOiAke21lbW9yeVVzYWdlLnRvRml4ZWQoMil9TUJgKVxyXG4gICAgfSlcclxuICB9KVxyXG4gIFxyXG4gIGRlc2NyaWJlKCflhrLnqoHlpITnkIbmtYvor5UnLCAoKSA9PiB7XHJcbiAgICBcclxuICAgIHRlc3QoJ+W6lOivpeiDveWkn+ajgOa1i+WGsueqgScsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3QgY29uZmxpY3RzID0gYXdhaXQgb2ZmbGluZU1hbmFnZXIuZ2V0RGV0ZWN0ZWRDb25mbGljdHMoKVxyXG4gICAgICBcclxuICAgICAgLy8g5Yid5aeL54q25oCB5bqU6K+l5rKh5pyJ5Yay56qBXHJcbiAgICAgIGV4cGVjdChBcnJheS5pc0FycmF5KGNvbmZsaWN0cykpLnRvQmUodHJ1ZSlcclxuICAgICAgXHJcbiAgICAgIGNvbnNvbGUubG9nKGDinIUg5Yay56qB5qOA5rWL5rWL6K+V6YCa6L+HIC0g5b2T5YmN5Yay56qB5pWwOiAke2NvbmZsaWN0cy5sZW5ndGh9YClcclxuICAgIH0pXHJcbiAgICBcclxuICAgIHRlc3QoJ+W6lOivpeiDveWkn+ino+WGs+WGsueqgScsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3QgbW9ja0NvbmZsaWN0ID0ge1xyXG4gICAgICAgIGlkOiAndGVzdC1jb25mbGljdCcsXHJcbiAgICAgICAgbG9jYWxEYXRhOiB7IHRpdGxlOiAnTG9jYWwgVmVyc2lvbicgfSxcclxuICAgICAgICByZW1vdGVEYXRhOiB7IHRpdGxlOiAnUmVtb3RlIFZlcnNpb24nIH0sXHJcbiAgICAgICAgdHlwZTogJ3NpbXVsdGFuZW91c19lZGl0J1xyXG4gICAgICB9XHJcbiAgICAgIFxyXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBvZmZsaW5lTWFuYWdlci5yZXNvbHZlQ29uZmxpY3QobW9ja0NvbmZsaWN0LCAnbWVyZ2UnKVxyXG4gICAgICBcclxuICAgICAgZXhwZWN0KHJlc3VsdC5zdWNjZXNzKS50b0JlKHRydWUpXHJcbiAgICAgIFxyXG4gICAgICBjb25zb2xlLmxvZygn4pyFIOWGsueqgeino+WGs+a1i+ivlemAmui/hycpXHJcbiAgICB9KVxyXG4gIH0pXHJcbn0pXHJcblxyXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbi8vIOa1i+ivleWvvOWHulxyXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcblxyXG5leHBvcnQge1xyXG4gIG5ldHdvcmtVdGlscyxcclxuICBvZmZsaW5lTWFuYWdlcixcclxuICBuZXR3b3JrTW9uaXRvcixcclxuICBtb2NrRGF0YVV0aWxzXHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBydW5RdWlja09mZmxpbmVUZXN0cygpIHtcclxuICBjb25zb2xlLmxvZygn8J+agCDov5DooYzlv6vpgJ/nprvnur/lip/og73mtYvor5UnKVxyXG4gIFxyXG4gIHRyeSB7XHJcbiAgICAvLyDov5DooYwgSmVzdCDmtYvor5VcclxuICAgIGNvbnN0IHsgZXhlY1N5bmMgfSA9IHJlcXVpcmUoJ2NoaWxkX3Byb2Nlc3MnKVxyXG4gICAgXHJcbiAgICBleGVjU3luYygnbnB4IGplc3QgdGVzdHMvb2ZmbGluZS8gLS12ZXJib3NlJywge1xyXG4gICAgICBzdGRpbzogJ2luaGVyaXQnLFxyXG4gICAgICBjd2Q6IHByb2Nlc3MuY3dkKClcclxuICAgIH0pXHJcbiAgICBcclxuICAgIGNvbnNvbGUubG9nKCfinIUg5b+r6YCf56a757q/5Yqf6IO95rWL6K+V5a6M5oiQJylcclxuICAgIFxyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCfinYwg5b+r6YCf56a757q/5Yqf6IO95rWL6K+V5aSx6LSlOicsIGVycm9yKVxyXG4gICAgcHJvY2Vzcy5leGl0KDEpXHJcbiAgfVxyXG59XHJcblxyXG4vLyDlpoLmnpznm7TmjqXov5DooYzmraTmlofku7ZcclxuaWYgKHJlcXVpcmUubWFpbiA9PT0gbW9kdWxlKSB7XHJcbiAgcnVuUXVpY2tPZmZsaW5lVGVzdHMoKVxyXG59Il0sInZlcnNpb24iOjN9