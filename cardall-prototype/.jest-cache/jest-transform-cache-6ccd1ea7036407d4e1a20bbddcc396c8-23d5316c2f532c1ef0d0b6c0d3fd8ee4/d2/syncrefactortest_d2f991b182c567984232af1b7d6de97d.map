{"file":"D:\\Projects\\CardEverything\\cardall-prototype\\tests\\sync\\sync-refactor.test.ts","mappings":"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","names":[],"sources":["D:\\Projects\\CardEverything\\cardall-prototype\\tests\\sync\\sync-refactor.test.ts"],"sourcesContent":["// åŒæ­¥æœºåˆ¶é‡æ„æµ‹è¯•\r\n// Week 3 Day 11-13 åŒæ­¥æœºåˆ¶é‡æ„ - Project-Brainstormer\r\n\r\nimport { jest } from '@jest/globals'\r\nimport { optimizedCloudSyncService } from '../../src/services/sync/optimized-cloud-sync'\r\nimport { incrementalSyncAlgorithm } from '../../src/services/sync/algorithms/incremental-sync-algorithm'\r\nimport { intelligentConflictResolver } from '../../src/services/sync/conflict/intelligent-conflict-resolver'\r\nimport { networkStateDetector } from '../../src/services/network-state-detector'\r\n\r\ndescribe('Week 3 Day 11-13 åŒæ­¥æœºåˆ¶é‡æ„æµ‹è¯•', () => {\r\n  \r\n  let mockAuthService: any\r\n  let mockNetworkState: any\r\n  \r\n  beforeAll(() => {\r\n    console.log('ğŸš€ å¼€å§‹ Week 3 Day 11-13 åŒæ­¥æœºåˆ¶é‡æ„æµ‹è¯•')\r\n    \r\n    // æ¨¡æ‹Ÿè®¤è¯æœåŠ¡\r\n    mockAuthService = {\r\n      isAuthenticated: () => true,\r\n      getCurrentUser: () => ({ id: 'test-user-id' }),\r\n      onAuthStateChange: jest.fn()\r\n    }\r\n    \r\n    // è®¾ç½®è®¤è¯æœåŠ¡\r\n    optimizedCloudSyncService.setAuthService(mockAuthService)\r\n    \r\n    // æ¨¡æ‹Ÿç½‘ç»œçŠ¶æ€\r\n    mockNetworkState = {\r\n      isOnline: true,\r\n      quality: 'good',\r\n      isReliable: true,\r\n      canSync: true,\r\n      bandwidth: 10,\r\n      latency: 50,\r\n      reliability: 0.9,\r\n      connectionType: 'wifi'\r\n    }\r\n  })\r\n  \r\n  afterAll(() => {\r\n    console.log('âœ… åŒæ­¥æœºåˆ¶é‡æ„æµ‹è¯•å®Œæˆ')\r\n  })\r\n  \r\n  describe('å¢é‡åŒæ­¥ç®—æ³•æµ‹è¯•', () => {\r\n    \r\n    test('åº”è¯¥èƒ½å¤Ÿæ‰§è¡Œå¢é‡åŒæ­¥', async () => {\r\n      const result = await incrementalSyncAlgorithm.performIncrementalSync('test-user-id')\r\n      \r\n      expect(result).toBeDefined()\r\n      expect(typeof result.success).toBe('boolean')\r\n      expect(typeof result.processedCount).toBe('number')\r\n      expect(typeof result.failedCount).toBe('number')\r\n      expect(Array.isArray(result.conflicts)).toBe(true)\r\n      expect(Array.isArray(result.errors)).toBe(true)\r\n      \r\n      console.log(`âœ… å¢é‡åŒæ­¥æµ‹è¯•å®Œæˆ - æˆåŠŸ: ${result.success}, å¤„ç†: ${result.processedCount}, å¤±è´¥: ${result.failedCount}`)\r\n    })\r\n    \r\n    test('åº”è¯¥èƒ½å¤Ÿè·å–åŒæ­¥æŒ‡æ ‡', () => {\r\n      const metrics = incrementalSyncAlgorithm.getSyncMetrics()\r\n      \r\n      expect(metrics).toBeDefined()\r\n      expect(typeof metrics.totalOperations).toBe('number')\r\n      expect(typeof metrics.successRate).toBe('number')\r\n      expect(typeof metrics.averageResponseTime).toBe('number')\r\n      expect(typeof metrics.bandwidthUsage).toBe('number')\r\n      expect(typeof metrics.conflictRate).toBe('number')\r\n      expect(typeof metrics.retryCount).toBe('number')\r\n      \r\n      console.log(`âœ… åŒæ­¥æŒ‡æ ‡è·å–æµ‹è¯•å®Œæˆ`)\r\n    })\r\n    \r\n    test('åº”è¯¥èƒ½å¤Ÿæ¸…ç†åŒæ­¥å†å²', async () => {\r\n      await expect(incrementalSyncAlgorithm.cleanupSyncHistory(7)).resolves.not.toThrow()\r\n      console.log(`âœ… åŒæ­¥å†å²æ¸…ç†æµ‹è¯•å®Œæˆ`)\r\n    })\r\n  })\r\n  \r\n  describe('æ™ºèƒ½å†²çªè§£å†³æµ‹è¯•', () => {\r\n    \r\n    test('åº”è¯¥èƒ½å¤Ÿè§£å†³æ—¶é—´æˆ³å†²çª', async () => {\r\n      const conflict = {\r\n        id: 'test-conflict-1',\r\n        entityId: 'card-1',\r\n        entityType: 'card',\r\n        localData: {\r\n          frontContent: 'æœ¬åœ°å†…å®¹',\r\n          backContent: 'æœ¬åœ°èƒŒé¢',\r\n          updatedAt: new Date(Date.now() - 1000).toISOString()\r\n        },\r\n        cloudData: {\r\n          frontContent: 'äº‘ç«¯å†…å®¹',\r\n          backContent: 'äº‘ç«¯èƒŒé¢',\r\n          updatedAt: new Date().toISOString()\r\n        },\r\n        conflictType: 'concurrent_modification' as const,\r\n        severity: 'medium' as const,\r\n        timestamp: new Date(),\r\n        autoResolved: false\r\n      }\r\n      \r\n      const context = intelligentConflictResolver['createConflictResolutionContext']?.(conflict) || {\r\n        localOperation: {\r\n          type: 'update',\r\n          entity: 'card',\r\n          entityId: 'card-1',\r\n          data: conflict.localData,\r\n          timestamp: new Date(conflict.localData.updatedAt)\r\n        },\r\n        cloudOperation: {\r\n          type: 'update', \r\n          entity: 'card',\r\n          entityId: 'card-1',\r\n          data: conflict.cloudData,\r\n          timestamp: new Date(conflict.cloudData.updatedAt)\r\n        },\r\n        userPreferences: intelligentConflictResolver['userPreferences'],\r\n        networkQuality: mockNetworkState,\r\n        timeConstraints: { urgency: 'medium' as const },\r\n        historyData: intelligentConflictResolver['conflictHistory']\r\n      }\r\n      \r\n      const resolution = await intelligentConflictResolver.resolveConflict(conflict, context)\r\n      \r\n      expect(resolution).toBeDefined()\r\n      expect(['local_wins', 'cloud_wins', 'merge', 'manual'].includes(resolution.resolution)).toBe(true)\r\n      expect(typeof resolution.confidence).toBe('number')\r\n      expect(typeof resolution.reasoning).toBe('string')\r\n      expect(typeof resolution.requiresUserConfirmation).toBe('boolean')\r\n      expect(typeof resolution.estimatedTime).toBe('number')\r\n      \r\n      console.log(`âœ… æ—¶é—´æˆ³å†²çªè§£å†³æµ‹è¯•å®Œæˆ - æ–¹æ¡ˆ: ${resolution.resolution}, ç½®ä¿¡åº¦: ${resolution.confidence}`)\r\n    })\r\n    \r\n    test('åº”è¯¥èƒ½å¤Ÿè·å–å†²çªç»Ÿè®¡', () => {\r\n      const stats = intelligentConflictResolver.getConflictStatistics()\r\n      \r\n      expect(stats).toBeDefined()\r\n      expect(typeof stats.totalConflicts).toBe('number')\r\n      expect(typeof stats.autoResolutionRate).toBe('number')\r\n      expect(typeof stats.averageResolutionTime).toBe('number')\r\n      expect(typeof stats.mostCommonConflictType).toBe('string')\r\n      expect(stats.userPreferences).toBeDefined()\r\n      \r\n      console.log(`âœ… å†²çªç»Ÿè®¡è·å–æµ‹è¯•å®Œæˆ`)\r\n    })\r\n  })\r\n  \r\n  describe('ä¼˜åŒ–åŒæ­¥æœåŠ¡æµ‹è¯•', () => {\r\n    \r\n    test('åº”è¯¥èƒ½å¤Ÿè·å–å½“å‰çŠ¶æ€', () => {\r\n      const status = optimizedCloudSyncService.getCurrentStatus()\r\n      \r\n      expect(status).toBeDefined()\r\n      expect(typeof status.isOnline).toBe('boolean')\r\n      expect(typeof status.syncInProgress).toBe('boolean')\r\n      expect(typeof status.hasConflicts).toBe('boolean')\r\n      \r\n      console.log(`âœ… åŒæ­¥çŠ¶æ€è·å–æµ‹è¯•å®Œæˆ`)\r\n    })\r\n    \r\n    test('åº”è¯¥èƒ½å¤Ÿè·å–åŒæ­¥ç»Ÿè®¡', () => {\r\n      const stats = optimizedCloudSyncService.getSyncStatistics()\r\n      \r\n      expect(stats).toBeDefined()\r\n      expect(typeof stats.totalSyncs).toBe('number')\r\n      expect(typeof stats.successfulSyncs).toBe('number')\r\n      expect(typeof stats.failedSyncs).toBe('number')\r\n      expect(typeof stats.averageSyncTime).toBe('number')\r\n      expect(typeof stats.successRate).toBe('number')\r\n      expect(stats.conflictResolutionRate).toBeDefined()\r\n      expect(stats.networkQuality).toBeDefined()\r\n      \r\n      console.log(`âœ… åŒæ­¥ç»Ÿè®¡è·å–æµ‹è¯•å®Œæˆ`)\r\n    })\r\n    \r\n    test('åº”è¯¥èƒ½å¤Ÿæ›´æ–°é…ç½®', () => {\r\n      const newConfig = {\r\n        enableIncrementalSync: false,\r\n        syncIntervals: {\r\n          excellent: 30 * 1000,\r\n          good: 60 * 1000,\r\n          fair: 120 * 1000,\r\n          poor: 300 * 1000\r\n        }\r\n      }\r\n      \r\n      expect(() => {\r\n        optimizedCloudSyncService.updateConfig(newConfig)\r\n      }).not.toThrow()\r\n      \r\n      console.log(`âœ… åŒæ­¥é…ç½®æ›´æ–°æµ‹è¯•å®Œæˆ`)\r\n    })\r\n    \r\n    test('åº”è¯¥èƒ½å¤Ÿæ·»åŠ çŠ¶æ€ç›‘å¬å™¨', () => {\r\n      const mockCallback = jest.fn()\r\n      const unsubscribe = optimizedCloudSyncService.onStatusChange(mockCallback)\r\n      \r\n      expect(typeof unsubscribe).toBe('function')\r\n      expect(mockCallback).toHaveBeenCalled()\r\n      \r\n      // æµ‹è¯•å–æ¶ˆè®¢é˜…\r\n      unsubscribe()\r\n      \r\n      console.log(`âœ… çŠ¶æ€ç›‘å¬å™¨æµ‹è¯•å®Œæˆ`)\r\n    })\r\n  })\r\n  \r\n  describe('é›†æˆæµ‹è¯•', () => {\r\n    \r\n    test('åº”è¯¥èƒ½å¤Ÿå¤„ç†å®Œæ•´çš„åŒæ­¥æµç¨‹', async () => {\r\n      // æ¨¡æ‹Ÿç½‘ç»œçŠ¶æ€è‰¯å¥½\r\n      jest.spyOn(networkStateDetector, 'getCurrentState').mockReturnValue(mockNetworkState)\r\n      \r\n      // æ‰§è¡ŒåŒæ­¥\r\n      const result = await optimizedCloudSyncService.performOptimizedSync()\r\n      \r\n      expect(result).toBeDefined()\r\n      expect(typeof result.success).toBe('boolean')\r\n      expect(typeof result.processedCount).toBe('number')\r\n      expect(typeof result.failedCount).toBe('number')\r\n      expect(Array.isArray(result.conflicts)).toBe(true)\r\n      expect(Array.isArray(result.errors)).toBe(true)\r\n      \r\n      console.log(`âœ… å®Œæ•´åŒæ­¥æµç¨‹æµ‹è¯•å®Œæˆ - æˆåŠŸ: ${result.success}`)\r\n    })\r\n    \r\n    test('åº”è¯¥èƒ½å¤Ÿåœ¨ç½‘ç»œä¸ä½³æ—¶è·³è¿‡åŒæ­¥', async () => {\r\n      // æ¨¡æ‹Ÿç½‘ç»œçŠ¶æ€ä¸ä½³\r\n      const poorNetworkState = {\r\n        ...mockNetworkState,\r\n        quality: 'poor',\r\n        canSync: false\r\n      }\r\n      \r\n      jest.spyOn(networkStateDetector, 'getCurrentState').mockReturnValue(poorNetworkState)\r\n      \r\n      const result = await optimizedCloudSyncService.performOptimizedSync()\r\n      \r\n      expect(result).toBeDefined()\r\n      expect(result.success).toBe(false)\r\n      expect(result.processedCount).toBe(0)\r\n      \r\n      console.log(`âœ… ç½‘ç»œä¸ä½³è·³è¿‡åŒæ­¥æµ‹è¯•å®Œæˆ`)\r\n    })\r\n    \r\n    test('åº”è¯¥èƒ½å¤Ÿåœ¨è®¤è¯å¤±è´¥æ—¶è·³è¿‡åŒæ­¥', async () => {\r\n      // æ¨¡æ‹Ÿè®¤è¯å¤±è´¥\r\n      jest.spyOn(mockAuthService, 'isAuthenticated').mockReturnValue(false)\r\n      \r\n      const result = await optimizedCloudSyncService.performOptimizedSync()\r\n      \r\n      expect(result).toBeDefined()\r\n      expect(result.success).toBe(false)\r\n      \r\n      // æ¢å¤è®¤è¯çŠ¶æ€\r\n      jest.spyOn(mockAuthService, 'isAuthenticated').mockReturnValue(true)\r\n      \r\n      console.log(`âœ… è®¤è¯å¤±è´¥è·³è¿‡åŒæ­¥æµ‹è¯•å®Œæˆ`)\r\n    })\r\n  })\r\n  \r\n  describe('æ€§èƒ½æµ‹è¯•', () => {\r\n    \r\n    test('åº”è¯¥èƒ½å¤Ÿåœ¨åˆç†æ—¶é—´å†…å®ŒæˆçŠ¶æ€è·å–', async () => {\r\n      const startTime = performance.now()\r\n      \r\n      // æ‰§è¡Œå¤šæ¬¡çŠ¶æ€è·å–\r\n      for (let i = 0; i < 100; i++) {\r\n        optimizedCloudSyncService.getCurrentStatus()\r\n      }\r\n      \r\n      const duration = performance.now() - startTime\r\n      \r\n      expect(duration).toBeLessThan(100) // åº”è¯¥åœ¨100mså†…å®Œæˆ100æ¬¡è°ƒç”¨\r\n      \r\n      console.log(`âœ… çŠ¶æ€è·å–æ€§èƒ½æµ‹è¯•å®Œæˆ - 100æ¬¡è°ƒç”¨è€—æ—¶ ${duration.toFixed(2)}ms`)\r\n    })\r\n    \r\n    test('åº”è¯¥èƒ½å¤Ÿæ­£ç¡®å¤„ç†å¹¶å‘åŒæ­¥è¯·æ±‚', async () => {\r\n      // æ¨¡æ‹Ÿç½‘ç»œçŠ¶æ€è‰¯å¥½\r\n      jest.spyOn(networkStateDetector, 'getCurrentState').mockReturnValue(mockNetworkState)\r\n      \r\n      // å¹¶å‘è§¦å‘å¤šä¸ªåŒæ­¥è¯·æ±‚\r\n      const promises = []\r\n      for (let i = 0; i < 5; i++) {\r\n        promises.push(optimizedCloudSyncService.performOptimizedSync())\r\n      }\r\n      \r\n      const results = await Promise.all(promises)\r\n      \r\n      // æ‰€æœ‰è¯·æ±‚éƒ½åº”è¯¥å®Œæˆ\r\n      expect(results.length).toBe(5)\r\n      results.forEach(result => {\r\n        expect(result).toBeDefined()\r\n      })\r\n      \r\n      console.log(`âœ… å¹¶å‘åŒæ­¥è¯·æ±‚æµ‹è¯•å®Œæˆ - å¤„ç†äº† ${results.length} ä¸ªå¹¶å‘è¯·æ±‚`)\r\n    })\r\n  })\r\n  \r\n  describe('é”™è¯¯å¤„ç†æµ‹è¯•', () => {\r\n    \r\n    test('åº”è¯¥èƒ½å¤Ÿå¤„ç†ç½‘ç»œé”™è¯¯', async () => {\r\n      // æ¨¡æ‹Ÿç½‘ç»œé”™è¯¯\r\n      const errorNetworkState = {\r\n        ...mockNetworkState,\r\n        isOnline: false,\r\n        canSync: false\r\n      }\r\n      \r\n      jest.spyOn(networkStateDetector, 'getCurrentState').mockReturnValue(errorNetworkState)\r\n      \r\n      const result = await optimizedCloudSyncService.performOptimizedSync()\r\n      \r\n      expect(result).toBeDefined()\r\n      expect(result.success).toBe(false)\r\n      \r\n      console.log(`âœ… ç½‘ç»œé”™è¯¯å¤„ç†æµ‹è¯•å®Œæˆ`)\r\n    })\r\n    \r\n    test('åº”è¯¥èƒ½å¤Ÿå¤„ç†æœåŠ¡é”™è¯¯', async () => {\r\n      // æ¨¡æ‹Ÿå¢é‡åŒæ­¥ç®—æ³•é”™è¯¯\r\n      jest.spyOn(incrementalSyncAlgorithm, 'performIncrementalSync')\r\n        .mockRejectedValue(new Error('Sync service error'))\r\n      \r\n      const result = await optimizedCloudSyncService.performOptimizedSync()\r\n      \r\n      expect(result).toBeDefined()\r\n      expect(result.success).toBe(false)\r\n      expect(result.errors.length).toBeGreaterThan(0)\r\n      \r\n      // æ¢å¤åŸå§‹å®ç°\r\n      jest.restoreAllMocks()\r\n      \r\n      console.log(`âœ… æœåŠ¡é”™è¯¯å¤„ç†æµ‹è¯•å®Œæˆ`)\r\n    })\r\n  })\r\n})\r\n\r\n// ============================================================================\r\n// æµ‹è¯•å¯¼å‡ºå‡½æ•°\r\n// ============================================================================\r\n\r\nexport async function runSyncRefactorTests() {\r\n  console.log('ğŸš€ è¿è¡ŒåŒæ­¥æœºåˆ¶é‡æ„æµ‹è¯•')\r\n  \r\n  try {\r\n    // è¿è¡Œ Jest æµ‹è¯•\r\n    const { execSync } = require('child_process')\r\n    \r\n    execSync('npx jest tests/sync/sync-refactor.test.ts --verbose', {\r\n      stdio: 'inherit',\r\n      cwd: process.cwd()\r\n    })\r\n    \r\n    console.log('âœ… åŒæ­¥æœºåˆ¶é‡æ„æµ‹è¯•å®Œæˆ')\r\n    \r\n  } catch (error) {\r\n    console.error('âŒ åŒæ­¥æœºåˆ¶é‡æ„æµ‹è¯•å¤±è´¥:', error)\r\n    process.exit(1)\r\n  }\r\n}\r\n\r\n// å¦‚æœç›´æ¥è¿è¡Œæ­¤æ–‡ä»¶\r\nif (require.main === module) {\r\n  runSyncRefactorTests()\r\n}"],"version":3}