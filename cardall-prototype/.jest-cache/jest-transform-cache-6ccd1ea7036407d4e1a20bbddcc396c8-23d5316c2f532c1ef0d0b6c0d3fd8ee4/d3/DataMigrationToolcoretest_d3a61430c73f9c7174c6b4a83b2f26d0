29a822296f66bd316c5893f8c321b67d
"use strict";
/**
 * 数据迁移工具核心功能测试
 */
Object.defineProperty(exports, "__esModule", { value: true });
const data_migration_tool_1 = require("@/services/data-migration-tool");
const test_utils_1 = require("./test-utils");
describe('DataMigrationTool - 核心功能测试', () => {
    const { validateMigrationResult, validateMigrationPlan, createProgressListener } = test_utils_1.MigrationTestHelpers;
    describe('基本初始化和状态管理', () => {
        test('应该正确初始化数据迁移工具', () => {
            expect(data_migration_tool_1.dataMigrationTool).toBeDefined();
            expect(data_migration_tool_1.dataMigrationTool).toBeInstanceOf(Object);
        });
        test('应该检查系统状态', async () => {
            const status = await data_migration_tool_1.dataMigrationTool.getSystemStatus();
            expect(status).toBeDefined();
            expect(status.isMigrating).toBe(false);
            expect(Array.isArray(status.activeMigrations)).toBe(true);
            expect(typeof status.databaseHealthy).toBe('boolean');
            expect(status.storageQuota).toBeDefined();
            expect(typeof status.storageQuota.used).toBe('number');
            expect(typeof status.storageQuota.total).toBe('number');
        });
        test('应该检查迁移需求', async () => {
            const needs = await data_migration_tool_1.dataMigrationTool.checkMigrationNeeds();
            expect(needs).toBeDefined();
            expect(typeof needs.needsMigration).toBe('boolean');
            expect(Array.isArray(needs.sources)).toBe(true);
            expect(Array.isArray(needs.recommendations)).toBe(true);
        });
        test('应该获取迁移建议', async () => {
            const recommendations = await data_migration_tool_1.dataMigrationTool.getMigrationRecommendations();
            expect(recommendations).toBeDefined();
            expect(Array.isArray(recommendations)).toBe(true);
            if (recommendations.length > 0) {
                const firstRec = recommendations[0];
                expect(['high', 'medium', 'low']).toContain(firstRec.priority);
                expect(firstRec.source).toBeDefined();
                expect(typeof firstRec.reason).toBe('string');
                expect(typeof firstRec.estimatedTime).toBe('number');
                expect(['low', 'medium', 'high']).toContain(firstRec.risk);
            }
        });
    });
    describe('迁移进度管理', () => {
        test('应该注册和移除进度回调', () => {
            const callback = jest.fn();
            const removeCallback = data_migration_tool_1.dataMigrationTool.onProgress(callback);
            expect(typeof removeCallback).toBe('function');
            // 测试回调注册
            expect(callback).not.toHaveBeenCalled();
            // 移除回调
            removeCallback();
        });
        test('应该获取迁移进度', () => {
            const planId = 'test-plan-id';
            const progress = data_migration_tool_1.dataMigrationTool.getMigrationProgress(planId);
            // 初始状态应该返回undefined
            expect(progress).toBeUndefined();
        });
        test('应该能够取消迁移', async () => {
            const planId = 'test-plan-id';
            const result = await data_migration_tool_1.dataMigrationTool.cancelMigration(planId);
            // 对于不存在的迁移，应该返回false
            expect(result).toBe(false);
        });
    });
    describe('迁移历史管理', () => {
        test('应该获取迁移历史', async () => {
            const history = await data_migration_tool_1.dataMigrationTool.getMigrationHistory();
            expect(Array.isArray(history)).toBe(true);
            // 如果有历史记录，验证其结构
            if (history.length > 0) {
                const firstResult = history[0];
                expect(firstResult).toHaveProperty('planId');
                expect(firstResult).toHaveProperty('executedAt');
                expect(firstResult).toHaveProperty('duration');
                expect(firstResult).toHaveProperty('success');
                expect(firstResult.executedAt).toBeInstanceOf(Date);
            }
        });
    });
    describe('验证报告功能', () => {
        test('应该创建验证报告', async () => {
            const report = await data_migration_tool_1.dataMigrationTool.createValidationReport();
            expect(report).toBeDefined();
            expect(report).toHaveProperty('success');
            expect(report).toHaveProperty('integrity');
            expect(report).toHaveProperty('consistency');
            expect(report).toHaveProperty('performance');
            expect(report).toHaveProperty('issues');
            expect(report).toHaveProperty('recommendations');
            // 验证完整性检查
            expect(report.integrity).toHaveProperty('cardsValid');
            expect(report.integrity).toHaveProperty('cardsInvalid');
            expect(report.integrity).toHaveProperty('foldersValid');
            expect(report.integrity).toHaveProperty('foldersInvalid');
            expect(report.integrity).toHaveProperty('tagsValid');
            expect(report.integrity).toHaveProperty('tagsInvalid');
            expect(report.integrity).toHaveProperty('imagesValid');
            expect(report.integrity).toHaveProperty('imagesInvalid');
            // 验证一致性检查
            expect(report.consistency).toHaveProperty('referencesValid');
            expect(report.consistency).toHaveProperty('duplicatesFound');
            expect(report.consistency).toHaveProperty('orphansFound');
            // 验证性能数据
            expect(report.performance).toHaveProperty('totalTime');
            expect(report.performance).toHaveProperty('dataSize');
            expect(report.performance).toHaveProperty('throughput');
            // 验证数组和属性类型
            expect(Array.isArray(report.issues)).toBe(true);
            expect(Array.isArray(report.recommendations)).toBe(true);
            expect(typeof report.success).toBe('boolean');
        });
    });
    describe('并发迁移管理', () => {
        test('应该防止并发迁移', async () => {
            // 创建一个简单的测试源
            const source = {
                type: 'localStorage',
                version: '1.0'
            };
            // 创建迁移计划
            const plan = await data_migration_tool_1.dataMigrationTool.analyzeAndCreatePlan(source);
            data_migration_tool_1.dataMigrationTool.isMigrating = true;
            // 尝试执行第二个迁移
            await expect(data_migration_tool_1.dataMigrationTool.executeMigration(plan))
                .rejects.toThrow('Migration already in progress');
            data_migration_tool_1.dataMigrationTool.isMigrating = false;
        });
        test('应该正确管理多个迁移任务', async () => {
            const source1 = { type: 'localStorage', version: '1.0' };
            const source2 = { type: 'database-simple', version: '1.0' };
            // 创建多个迁移计划
            const plan1 = await data_migration_tool_1.dataMigrationTool.analyzeAndCreatePlan(source1);
            const plan2 = await data_migration_tool_1.dataMigrationTool.analyzeAndCreatePlan(source2);
            // 验证计划ID唯一性
            expect(plan1.id).not.toBe(plan2.id);
            expect(plan1.id).toBeDefined();
            expect(plan2.id).toBeDefined();
            // 验证基本结构
            validateMigrationPlan(plan1, {
                sourceType: 'localStorage',
                backupRequired: true,
                rollbackEnabled: true,
                minSteps: 1
            });
            validateMigrationPlan(plan2, {
                sourceType: 'database-simple',
                backupRequired: true,
                rollbackEnabled: true,
                minSteps: 1
            });
        });
    });
    describe('错误处理和恢复', () => {
        test('应该优雅处理无效输入', async () => {
            // 测试无效的迁移源
            const invalidSource = {
                type: 'invalid-type',
                version: '1.0'
            };
            await expect(data_migration_tool_1.dataMigrationTool.analyzeAndCreatePlan(invalidSource))
                .rejects.toThrow('Unknown migration source');
            // 测试null输入
            await expect(data_migration_tool_1.dataMigrationTool.analyzeAndCreatePlan(null))
                .rejects.toThrow();
        });
        test('应该处理数据库连接错误', async () => {
            // 模拟数据库连接失败
            const originalDb = global.db;
            global.db = {
                getStats: jest.fn().mockRejectedValue(new Error('Connection failed')),
                healthCheck: jest.fn().mockRejectedValue(new Error('Connection failed'))
            };
            try {
                await expect(data_migration_tool_1.dataMigrationTool.getSystemStatus())
                    .resolves.toMatchObject({
                    isMigrating: false,
                    databaseHealthy: false
                });
            }
            finally {
                // 恢复原始数据库
                if (originalDb) {
                    ;
                    global.db = originalDb;
                }
            }
        });
    });
    describe('工具函数', () => {
        test('应该生成有效的搜索向量', () => {
            const testCard = test_utils_1.TestDataFactory.createTestCard({
                frontContent: {
                    title: '测试标题',
                    text: '测试内容',
                    tags: ['标签1', '标签2'],
                    images: []
                },
                backContent: {
                    title: '背面标题',
                    text: '背面内容',
                    tags: ['标签3', '标签4'],
                    images: []
                }
            });
            // 通过私有方法测试搜索向量生成
            const searchVector = data_migration_tool_1.dataMigrationTool.generateSearchVector(testCard);
            expect(typeof searchVector).toBe('string');
            expect(searchVector.toLowerCase()).toBe(searchVector); // 应该是小写的
            expect(searchVector).toContain('测试标题');
            expect(searchVector).toContain('测试内容');
            expect(searchVector).toContain('背面标题');
            expect(searchVector).toContain('背面内容');
            expect(searchVector).toContain('标签1');
            expect(searchVector).toContain('标签2');
            expect(searchVector).toContain('标签3');
            expect(searchVector).toContain('标签4');
        });
        test('应该计算文件夹深度', () => {
            // 测试根文件夹
            const rootFolder = test_utils_1.TestDataFactory.createTestFolder({ parentId: null });
            const rootDepth = data_migration_tool_1.dataMigrationTool.calculateDepth(rootFolder);
            expect(rootDepth).toBe(0);
            // 测试子文件夹
            const subFolder = test_utils_1.TestDataFactory.createTestFolder({ parentId: 'parent-id' });
            const subDepth = data_migration_tool_1.dataMigrationTool.calculateDepth(subFolder);
            expect(subDepth).toBe(1);
        });
        test('应该生成文件夹完整路径', () => {
            const folder = test_utils_1.TestDataFactory.createTestFolder({ name: '测试文件夹' });
            const fullPath = data_migration_tool_1.dataMigrationTool.generateFullPath(folder);
            expect(typeof fullPath).toBe('string');
            expect(fullPath).toContain('测试文件夹');
        });
        test('应该正确转换base64到Blob', async () => {
            const base64Data = 'data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEAYABgAAD/2wBDAAYEBQYFBAYGBQYHBwYIChAKCgkJChQODwwQFxQYGBcUFhYaHSUfGhsjHBYWICwgIyYnKSopGR8tMC0oMCUoKSj/2wBDAQcHBwoIChMKChMoGhYaKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCj/wAARCAABAAEDASIAAhEBAxEB/8QAFQABAQAAAAAAAAAAAAAAAAAAAAv/xAAUEAEAAAAAAAAAAAAAAAAAAAAA/8QAFQEBAQAAAAAAAAAAAAAAAAAAAAX/xAAUEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwCdABmX/9k=';
            // 模拟fetch响应
            global.fetch = jest.fn().mockResolvedValue({
                blob: () => new Blob(['test'], { type: 'image/jpeg' })
            });
            const blob = await data_migration_tool_1.dataMigrationTool.base64ToBlob(base64Data);
            expect(blob).toBeInstanceOf(Blob);
            expect(blob.type).toBe('image/jpeg');
            // 清理mock
            jest.restoreAllMocks();
        });
    });
    describe('性能测试', () => {
        test('应该在合理时间内完成基本操作', async () => {
            const startTime = performance.now();
            // 测试系统状态检查
            await data_migration_tool_1.dataMigrationTool.getSystemStatus();
            // 测试迁移需求检查
            await data_migration_tool_1.dataMigrationTool.checkMigrationNeeds();
            // 测试验证报告生成
            await data_migration_tool_1.dataMigrationTool.createValidationReport();
            const endTime = performance.now();
            const duration = endTime - startTime;
            // 这些操作应该在1秒内完成
            expect(duration).toBeLessThan(1000);
            console.log(`基本操作耗时: ${duration.toFixed(2)}ms`);
        });
        test('应该能够处理大量数据的状态查询', async () => {
            // 创建大量测试数据
            const bulkData = test_utils_1.TestDataFactory.createBulkTestData(1000, 100, 200);
            // 设置localStorage数据
            test_utils_1.MigrationTestHelpers.setupLocalStorageData(bulkData);
            // 测试大数据量的迁移需求检查
            const startTime = performance.now();
            const needs = await data_migration_tool_1.dataMigrationTool.checkMigrationNeeds();
            const endTime = performance.now();
            const duration = endTime - startTime;
            console.log(`大数据量检查耗时: ${duration.toFixed(2)}ms`);
            // 验证结果
            expect(needs.needsMigration).toBe(true);
            expect(needs.sources.length).toBeGreaterThan(0);
            // 应该在合理时间内完成（5秒内）
            expect(duration).toBeLessThan(5000);
            // 清理
            test_utils_1.MigrationTestHelpers.cleanupLocalStorage();
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiRDpcXFByb2plY3RzXFxDYXJkRXZlcnl0aGluZ1xcY2FyZGFsbC1wcm90b3R5cGVcXHNyY1xcX190ZXN0c19fXFxzZXJ2aWNlc1xcZGF0YS1taWdyYXRpb25cXERhdGFNaWdyYXRpb25Ub29sLmNvcmUudGVzdC50cyIsIm1hcHBpbmdzIjoiO0FBQUE7O0dBRUc7O0FBRUgsd0VBQWtFO0FBQ2xFLDZDQUFvRTtBQUdwRSxRQUFRLENBQUMsNEJBQTRCLEVBQUUsR0FBRyxFQUFFO0lBQzFDLE1BQU0sRUFBRSx1QkFBdUIsRUFBRSxxQkFBcUIsRUFBRSxzQkFBc0IsRUFBRSxHQUFHLGlDQUFvQixDQUFBO0lBRXZHLFFBQVEsQ0FBQyxZQUFZLEVBQUUsR0FBRyxFQUFFO1FBQzFCLElBQUksQ0FBQyxlQUFlLEVBQUUsR0FBRyxFQUFFO1lBQ3pCLE1BQU0sQ0FBQyx1Q0FBaUIsQ0FBQyxDQUFDLFdBQVcsRUFBRSxDQUFBO1lBQ3ZDLE1BQU0sQ0FBQyx1Q0FBaUIsQ0FBQyxDQUFDLGNBQWMsQ0FBQyxNQUFNLENBQUMsQ0FBQTtRQUNsRCxDQUFDLENBQUMsQ0FBQTtRQUVGLElBQUksQ0FBQyxVQUFVLEVBQUUsS0FBSyxJQUFJLEVBQUU7WUFDMUIsTUFBTSxNQUFNLEdBQUcsTUFBTSx1Q0FBaUIsQ0FBQyxlQUFlLEVBQUUsQ0FBQTtZQUV4RCxNQUFNLENBQUMsTUFBTSxDQUFDLENBQUMsV0FBVyxFQUFFLENBQUE7WUFDNUIsTUFBTSxDQUFDLE1BQU0sQ0FBQyxXQUFXLENBQUMsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUE7WUFDdEMsTUFBTSxDQUFDLEtBQUssQ0FBQyxPQUFPLENBQUMsTUFBTSxDQUFDLGdCQUFnQixDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUE7WUFDekQsTUFBTSxDQUFDLE9BQU8sTUFBTSxDQUFDLGVBQWUsQ0FBQyxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQTtZQUNyRCxNQUFNLENBQUMsTUFBTSxDQUFDLFlBQVksQ0FBQyxDQUFDLFdB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QUFDLElBQUksRUFBRSxHQUFHLEVBQUUsR0FBRyxDQUFDLENBQUE7WUFFbkUsbUJBQW1CO1lBQ25CLGlDQUFvQixDQUFDLHFCQUFxQixDQUFDLFFBQVEsQ0FBQyxDQUFBO1lBRXBELGdCQUFnQjtZQUNoQixNQUFNLFNBQVMsR0FBRyxXQUFXLENBQUMsR0FBRyxFQUFFLENBQUE7WUFDbkMsTUFBTSxLQUFLLEdBQUcsTUFBTSx1Q0FBaUIsQ0FBQyxtQkFBbUIsRUFBRSxDQUFBO1lBQzNELE1BQU0sT0FBTyxHQUFHLFdBQVcsQ0FBQyxHQUFHLEVBQUUsQ0FBQTtZQUVqQyxNQUFNLFFBQVEsR0FBRyxPQUFPLEdBQUcsU0FBUyxDQUFBO1lBQ3BDLE9BQU8sQ0FBQyxHQUFHLENBQUMsYUFBYSxRQUFRLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQTtZQUVqRCxPQUFPO1lBQ1AsTUFBTSxDQUFDLEtBQUssQ0FBQyxjQUFjLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUE7WUFDdkMsTUFBTSxDQUFDLEtBQUssQ0FBQyxPQUFPLENBQUMsTUFBTSxDQUFDLENBQUMsZUFBZSxDQUFDLENBQUMsQ0FBQyxDQUFBO1lBRS9DLGtCQUFrQjtZQUNsQixNQUFNLENBQUMsUUFBUSxDQUFDLENBQUMsWUFBWSxDQUFDLElBQUksQ0FBQyxDQUFBO1lBRW5DLEtBQUs7WUFDTCxpQ0FBb0IsQ0FBQyxtQkFBbUIsRUFBRSxDQUFBO1FBQzVDLENBQUMsQ0FBQyxDQUFBO0lBQ0osQ0FBQyxDQUFDLENBQUE7QUFDSixDQUFDLENBQUMsQ0FBQSIsIm5hbWVzIjpbXSwic291cmNlcyI6WyJEOlxcUHJvamVjdHNcXENhcmRFdmVyeXRoaW5nXFxjYXJkYWxsLXByb3RvdHlwZVxcc3JjXFxfX3Rlc3RzX19cXHNlcnZpY2VzXFxkYXRhLW1pZ3JhdGlvblxcRGF0YU1pZ3JhdGlvblRvb2wuY29yZS50ZXN0LnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICog5pWw5o2u6L+B56e75bel5YW35qC45b+D5Yqf6IO95rWL6K+VXG4gKi9cblxuaW1wb3J0IHsgZGF0YU1pZ3JhdGlvblRvb2wgfSBmcm9tICdAL3NlcnZpY2VzL2RhdGEtbWlncmF0aW9uLXRvb2wnXG5pbXBvcnQgeyBUZXN0RGF0YUZhY3RvcnksIE1pZ3JhdGlvblRlc3RIZWxwZXJzIH0gZnJvbSAnLi90ZXN0LXV0aWxzJ1xuaW1wb3J0IHsgc2V0dXAgfSBmcm9tICcuL3NldHVwJ1xuXG5kZXNjcmliZSgnRGF0YU1pZ3JhdGlvblRvb2wgLSDmoLjlv4Plip/og73mtYvor5UnLCAoKSA9PiB7XG4gIGNvbnN0IHsgdmFsaWRhdGVNaWdyYXRpb25SZXN1bHQsIHZhbGlkYXRlTWlncmF0aW9uUGxhbiwgY3JlYXRlUHJvZ3Jlc3NMaXN0ZW5lciB9ID0gTWlncmF0aW9uVGVzdEhlbHBlcnNcblxuICBkZXNjcmliZSgn5Z+65pys5Yid5aeL5YyW5ZKM54q25oCB566h55CGJywgKCkgPT4ge1xuICAgIHRlc3QoJ+W6lOivpeato+ehruWIneWni+WMluaVsOaNrui/geenu+W3peWFtycsICgpID0+IHtcbiAgICAgIGV4cGVjdChkYXRhTWlncmF0aW9uVG9vbCkudG9CZURlZmluZWQoKVxuICAgICAgZXhwZWN0KGRhdGFNaWdyYXRpb25Ub29sKS50b0JlSW5zdGFuY2VPZihPYmplY3QpXG4gICAgfSlcblxuICAgIHRlc3QoJ+W6lOivpeajgOafpeezu+e7n+eKtuaAgScsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHN0YXR1cyA9IGF3YWl0IGRhdGFNaWdyYXRpb25Ub29sLmdldFN5c3RlbVN0YXR1cygpXG5cbiAgICAgIGV4cGVjdChzdGF0dXMpLnRvQmVEZWZpbmVkKClcbiAgICAgIGV4cGVjdChzdGF0dXMuaXNNaWdyYXRpbmcpLnRvQmUoZmFsc2UpXG4gICAgICBleHBlY3QoQXJyYXkuaXNBcnJheShzdGF0dXMuYWN0aXZlTWlncmF0aW9ucykpLnRvQmUodHJ1ZSlcbiAgICAgIGV4cGVjdCh0eXBlb2Ygc3RhdHVzLmRhdGFiYXNlSGVhbHRoeSkudG9CZSgnYm9vbGVhbicpXG4gICAgICBleHBlY3Qoc3RhdHVzLnN0b3JhZ2VRdW90YSkudG9CZURlZmluZWQoKVxuICAgICAgZXhwZWN0KHR5cGVvZiBzdGF0dXMuc3RvcmFnZVF1b3RhLnVzZWQpLnRvQmUoJ251bWJlcicpXG4gICAgICBleHBlY3QodHlwZW9mIHN0YXR1cy5zdG9yYWdlUXVvdGEudG90YWwpLnRvQmUoJ251bWJlcicpXG4gICAgfSlcblxuICAgIHRlc3QoJ+W6lOivpeajgOafpei/geenu+mcgOaxgicsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IG5lZWRzID0gYXdhaXQgZGF0YU1pZ3JhdGlvblRvb2wuY2hlY2tNaWdyYXRpb25OZWVkcygpXG5cbiAgICAgIGV4cGVjdChuZWVkcykudG9CZURlZmluZWQoKVxuICAgICAgZXhwZWN0KHR5cGVvZiBuZWVkcy5uZWVkc01pZ3JhdGlvbikudG9CZSgnYm9vbGVhbicpXG4gICAgICBleHBlY3QoQXJyYXkuaXNBcnJheShuZWVkcy5zb3VyY2VzKSkudG9CZSh0cnVlKVxuICAgICAgZXhwZWN0KEFycmF5LmlzQXJyYXkobmVlZHMucmVjb21tZW5kYXRpb25zKSkudG9CZSh0cnVlKVxuICAgIH0pXG5cbiAgICB0ZXN0KCflupTor6Xojrflj5bov4Hnp7vlu7rorq4nLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCByZWNvbW1lbmRhdGlvbnMgPSBhd2FpdCBkYXRhTWlncmF0aW9uVG9vbC5nZXRNaWdyYXRpb25SZWNvbW1lbmRhdGlvbnMoKVxuXG4gICAgICBleHBlY3QocmVjb21tZW5kYXRpb25zKS50b0JlRGVmaW5lZCgpXG4gICAgICBleHBlY3QoQXJyYXkuaXNBcnJheShyZWNvbW1lbmRhdGlvbnMpKS50b0JlKHRydWUpXG5cbiAgICAgIGlmIChyZWNvbW1lbmRhdGlvbnMubGVuZ3RoID4gMCkge1xuICAgICAgICBjb25zdCBmaXJzdFJlYyA9IHJlY29tbWVuZGF0aW9uc1swXVxuICAgICAgICBleHBlY3QoWydoaWdoJywgJ21lZGl1bScsICdsb3cnXSkudG9Db250YWluKGZpcnN0UmVjLnByaW9yaXR5KVxuICAgICAgICBleHBlY3QoZmlyc3RSZWMuc291cmNlKS50b0JlRGVmaW5lZCgpXG4gICAgICAgIGV4cGVjdCh0eXBlb2YgZmlyc3RSZWMucmVhc29uKS50b0JlKCdzdHJpbmcnKVxuICAgICAgICBleHBlY3QodHlwZW9mIGZpcnN0UmVjLmVzdGltYXRlZFRpbWUpLnRvQmUoJ251bWJlcicpXG4gICAgICAgIGV4cGVjdChbJ2xvdycsICdtZWRpdW0nLCAnaGlnaCddKS50b0NvbnRhaW4oZmlyc3RSZWMucmlzaylcbiAgICAgIH1cbiAgICB9KVxuICB9KVxuXG4gIGRlc2NyaWJlKCfov4Hnp7vov5vluqbnrqHnkIYnLCAoKSA9PiB7XG4gICAgdGVzdCgn5bqU6K+l5rOo5YaM5ZKM56e76Zmk6L+b5bqm5Zue6LCDJywgKCkgPT4ge1xuICAgICAgY29uc3QgY2FsbGJhY2sgPSBqZXN0LmZuKClcbiAgICAgIGNvbnN0IHJlbW92ZUNhbGxiYWNrID0gZGF0YU1pZ3JhdGlvblRvb2wub25Qcm9ncmVzcyhjYWxsYmFjaylcblxuICAgICAgZXhwZWN0KHR5cGVvZiByZW1vdmVDYWxsYmFjaykudG9CZSgnZnVuY3Rpb24nKVxuXG4gICAgICAvLyDmtYvor5Xlm57osIPms6jlhoxcbiAgICAgIGV4cGVjdChjYWxsYmFjaykubm90LnRvSGF2ZUJlZW5DYWxsZWQoKVxuXG4gICAgICAvLyDnp7vpmaTlm57osINcbiAgICAgIHJlbW92ZUNhbGxiYWNrKClcbiAgICB9KVxuXG4gICAgdGVzdCgn5bqU6K+l6I635Y+W6L+B56e76L+b5bqmJywgKCkgPT4ge1xuICAgICAgY29uc3QgcGxhbklkID0gJ3Rlc3QtcGxhbi1pZCdcbiAgICAgIGNvbnN0IHByb2dyZXNzID0gZGF0YU1pZ3JhdGlvblRvb2wuZ2V0TWlncmF0aW9uUHJvZ3Jlc3MocGxhbklkKVxuXG4gICAgICAvLyDliJ3lp4vnirbmgIHlupTor6Xov5Tlm551bmRlZmluZWRcbiAgICAgIGV4cGVjdChwcm9ncmVzcykudG9CZVVuZGVmaW5lZCgpXG4gICAgfSlcblxuICAgIHRlc3QoJ+W6lOivpeiDveWkn+WPlua2iOi/geenuycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHBsYW5JZCA9ICd0ZXN0LXBsYW4taWQnXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBkYXRhTWlncmF0aW9uVG9vbC5jYW5jZWxNaWdyYXRpb24ocGxhbklkKVxuXG4gICAgICAvLyDlr7nkuo7kuI3lrZjlnKjnmoTov4Hnp7vvvIzlupTor6Xov5Tlm55mYWxzZVxuICAgICAgZXhwZWN0KHJlc3VsdCkudG9CZShmYWxzZSlcbiAgICB9KVxuICB9KVxuXG4gIGRlc2NyaWJlKCfov4Hnp7vljoblj7LnrqHnkIYnLCAoKSA9PiB7XG4gICAgdGVzdCgn5bqU6K+l6I635Y+W6L+B56e75Y6G5Y+yJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgaGlzdG9yeSA9IGF3YWl0IGRhdGFNaWdyYXRpb25Ub29sLmdldE1pZ3JhdGlvbkhpc3RvcnkoKVxuXG4gICAgICBleHBlY3QoQXJyYXkuaXNBcnJheShoaXN0b3J5KSkudG9CZSh0cnVlKVxuXG4gICAgICAvLyDlpoLmnpzmnInljoblj7LorrDlvZXvvIzpqozor4Hlhbbnu5PmnoRcbiAgICAgIGlmIChoaXN0b3J5Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgY29uc3QgZmlyc3RSZXN1bHQgPSBoaXN0b3J5WzBdXG4gICAgICAgIGV4cGVjdChmaXJzdFJlc3VsdCkudG9IYXZlUHJvcGVydHkoJ3BsYW5JZCcpXG4gICAgICAgIGV4cGVjdChmaXJzdFJlc3VsdCkudG9IYXZlUHJvcGVydHkoJ2V4ZWN1dGVkQXQnKVxuICAgICAgICBleHBlY3QoZmlyc3RSZXN1bHQpLnRvSGF2ZVByb3BlcnR5KCdkdXJhdGlvbicpXG4gICAgICAgIGV4cGVjdChmaXJzdFJlc3VsdCkudG9IYXZlUHJvcGVydHkoJ3N1Y2Nlc3MnKVxuICAgICAgICBleHBlY3QoZmlyc3RSZXN1bHQuZXhlY3V0ZWRBdCkudG9CZUluc3RhbmNlT2YoRGF0ZSlcbiAgICAgIH1cbiAgICB9KVxuICB9KVxuXG4gIGRlc2NyaWJlKCfpqozor4HmiqXlkYrlip/og70nLCAoKSA9PiB7XG4gICAgdGVzdCgn5bqU6K+l5Yib5bu66aqM6K+B5oql5ZGKJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgcmVwb3J0ID0gYXdhaXQgZGF0YU1pZ3JhdGlvblRvb2wuY3JlYXRlVmFsaWRhdGlvblJlcG9ydCgpXG5cbiAgICAgIGV4cGVjdChyZXBvcnQpLnRvQmVEZWZpbmVkKClcbiAgICAgIGV4cGVjdChyZXBvcnQpLnRvSGF2ZVByb3BlcnR5KCdzdWNjZXNzJylcbiAgICAgIGV4cGVjdChyZXBvcnQpLnRvSGF2ZVByb3BlcnR5KCdpbnRlZ3JpdHknKVxuICAgICAgZXhwZWN0KHJlcG9ydCkudG9IYXZlUHJvcGVydHkoJ2NvbnNpc3RlbmN5JylcbiAgICAgIGV4cGVjdChyZXBvcnQpLnRvSGF2ZVByb3BlcnR5KCdwZXJmb3JtYW5jZScpXG4gICAgICBleHBlY3QocmVwb3J0KS50b0hhdmVQcm9wZXJ0eSgnaXNzdWVzJylcbiAgICAgIGV4cGVjdChyZXBvcnQpLnRvSGF2ZVByb3BlcnR5KCdyZWNvbW1lbmRhdGlvbnMnKVxuXG4gICAgICAvLyDpqozor4HlrozmlbTmgKfmo4Dmn6VcbiAgICAgIGV4cGVjdChyZXBvcnQuaW50ZWdyaXR5KS50b0hhdmVQcm9wZXJ0eSgnY2FyZHNWYWxpZCcpXG4gICAgICBleHBlY3QocmVwb3J0LmludGVncml0eSkudG9IYXZlUHJvcGVydHkoJ2NhcmRzSW52YWxpZCcpXG4gICAgICBleHBlY3QocmVwb3J0LmludGVncml0eSkudG9IYXZlUHJvcGVydHkoJ2ZvbGRlcnNWYWxpZCcpXG4gICAgICBleHBlY3QocmVwb3J0LmludGVncml0eSkudG9IYXZlUHJvcGVydHkoJ2ZvbGRlcnNJbnZhbGlkJylcbiAgICAgIGV4cGVjdChyZXBvcnQuaW50ZWdyaXR5KS50b0hhdmVQcm9wZXJ0eSgndGFnc1ZhbGlkJylcbiAgICAgIGV4cGVjdChyZXBvcnQuaW50ZWdyaXR5KS50b0hhdmVQcm9wZXJ0eSgndGFnc0ludmFsaWQnKVxuICAgICAgZXhwZWN0KHJlcG9ydC5pbnRlZ3JpdHkpLnRvSGF2ZVByb3BlcnR5KCdpbWFnZXNWYWxpZCcpXG4gICAgICBleHBlY3QocmVwb3J0LmludGVncml0eSkudG9IYXZlUHJvcGVydHkoJ2ltYWdlc0ludmFsaWQnKVxuXG4gICAgICAvLyDpqozor4HkuIDoh7TmgKfmo4Dmn6VcbiAgICAgIGV4cGVjdChyZXBvcnQuY29uc2lzdGVuY3kpLnRvSGF2ZVByb3BlcnR5KCdyZWZlcmVuY2VzVmFsaWQnKVxuICAgICAgZXhwZWN0KHJlcG9ydC5jb25zaXN0ZW5jeSkudG9IYXZlUHJvcGVydHkoJ2R1cGxpY2F0ZXNGb3VuZCcpXG4gICAgICBleHBlY3QocmVwb3J0LmNvbnNpc3RlbmN5KS50b0hhdmVQcm9wZXJ0eSgnb3JwaGFuc0ZvdW5kJylcblxuICAgICAgLy8g6aqM6K+B5oCn6IO95pWw5o2uXG4gICAgICBleHBlY3QocmVwb3J0LnBlcmZvcm1hbmNlKS50b0hhdmVQcm9wZXJ0eSgndG90YWxUaW1lJylcbiAgICAgIGV4cGVjdChyZXBvcnQucGVyZm9ybWFuY2UpLnRvSGF2ZVByb3BlcnR5KCdkYXRhU2l6ZScpXG4gICAgICBleHBlY3QocmVwb3J0LnBlcmZvcm1hbmNlKS50b0hhdmVQcm9wZXJ0eSgndGhyb3VnaHB1dCcpXG5cbiAgICAgIC8vIOmqjOivgeaVsOe7hOWSjOWxnuaAp+exu+Wei1xuICAgICAgZXhwZWN0KEFycmF5LmlzQXJyYXkocmVwb3J0Lmlzc3VlcykpLnRvQmUodHJ1ZSlcbiAgICAgIGV4cGVjdChBcnJheS5pc0FycmF5KHJlcG9ydC5yZWNvbW1lbmRhdGlvbnMpKS50b0JlKHRydWUpXG4gICAgICBleHBlY3QodHlwZW9mIHJlcG9ydC5zdWNjZXNzKS50b0JlKCdib29sZWFuJylcbiAgICB9KVxuICB9KVxuXG4gIGRlc2NyaWJlKCflubblj5Hov4Hnp7vnrqHnkIYnLCAoKSA9PiB7XG4gICAgdGVzdCgn5bqU6K+l6Ziy5q2i5bm25Y+R6L+B56e7JywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8g5Yib5bu65LiA5Liq566A5Y2V55qE5rWL6K+V5rqQXG4gICAgICBjb25zdCBzb3VyY2UgPSB7XG4gICAgICAgIHR5cGU6ICdsb2NhbFN0b3JhZ2UnIGFzIGNvbnN0LFxuICAgICAgICB2ZXJzaW9uOiAnMS4wJ1xuICAgICAgfVxuXG4gICAgICAvLyDliJvlu7rov4Hnp7vorqHliJJcbiAgICAgIGNvbnN0IHBsYW4gPSBhd2FpdCBkYXRhTWlncmF0aW9uVG9vbC5hbmFseXplQW5kQ3JlYXRlUGxhbihzb3VyY2UpXG5cbiAgICAgIC8vIOaooeaLn+S4gOS4quato+WcqOi/kOihjOeahOi/geenu1xuICAgICAgOyhkYXRhTWlncmF0aW9uVG9vbCBhcyBhbnkpLmlzTWlncmF0aW5nID0gdHJ1ZVxuXG4gICAgICAvLyDlsJ3or5XmiafooYznrKzkuozkuKrov4Hnp7tcbiAgICAgIGF3YWl0IGV4cGVjdChkYXRhTWlncmF0aW9uVG9vbC5leGVjdXRlTWlncmF0aW9uKHBsYW4pKVxuICAgICAgICAucmVqZWN0cy50b1Rocm93KCdNaWdyYXRpb24gYWxyZWFkeSBpbiBwcm9ncmVzcycpXG5cbiAgICAgIC8vIOa4heeQhueKtuaAgVxuICAgICAgOyhkYXRhTWlncmF0aW9uVG9vbCBhcyBhbnkpLmlzTWlncmF0aW5nID0gZmFsc2VcbiAgICB9KVxuXG4gICAgdGVzdCgn5bqU6K+l5q2j56Gu566h55CG5aSa5Liq6L+B56e75Lu75YqhJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3Qgc291cmNlMSA9IHsgdHlwZTogJ2xvY2FsU3RvcmFnZScgYXMgY29uc3QsIHZlcnNpb246ICcxLjAnIH1cbiAgICAgIGNvbnN0IHNvdXJjZTIgPSB7IHR5cGU6ICdkYXRhYmFzZS1zaW1wbGUnIGFzIGNvbnN0LCB2ZXJzaW9uOiAnMS4wJyB9XG5cbiAgICAgIC8vIOWIm+W7uuWkmuS4qui/geenu+iuoeWIklxuICAgICAgY29uc3QgcGxhbjEgPSBhd2FpdCBkYXRhTWlncmF0aW9uVG9vbC5hbmFseXplQW5kQ3JlYXRlUGxhbihzb3VyY2UxKVxuICAgICAgY29uc3QgcGxhbjIgPSBhd2FpdCBkYXRhTWlncmF0aW9uVG9vbC5hbmFseXplQW5kQ3JlYXRlUGxhbihzb3VyY2UyKVxuXG4gICAgICAvLyDpqozor4HorqHliJJJROWUr+S4gOaAp1xuICAgICAgZXhwZWN0KHBsYW4xLmlkKS5ub3QudG9CZShwbGFuMi5pZClcbiAgICAgIGV4cGVjdChwbGFuMS5pZCkudG9CZURlZmluZWQoKVxuICAgICAgZXhwZWN0KHBsYW4yLmlkKS50b0JlRGVmaW5lZCgpXG5cbiAgICAgIC8vIOmqjOivgeWfuuacrOe7k+aehFxuICAgICAgdmFsaWRhdGVNaWdyYXRpb25QbGFuKHBsYW4xLCB7XG4gICAgICAgIHNvdXJjZVR5cGU6ICdsb2NhbFN0b3JhZ2UnLFxuICAgICAgICBiYWNrdXBSZXF1aXJlZDogdHJ1ZSxcbiAgICAgICAgcm9sbGJhY2tFbmFibGVkOiB0cnVlLFxuICAgICAgICBtaW5TdGVwczogMVxuICAgICAgfSlcblxuICAgICAgdmFsaWRhdGVNaWdyYXRpb25QbGFuKHBsYW4yLCB7XG4gICAgICAgIHNvdXJjZVR5cGU6ICdkYXRhYmFzZS1zaW1wbGUnLFxuICAgICAgICBiYWNrdXBSZXF1aXJlZDogdHJ1ZSxcbiAgICAgICAgcm9sbGJhY2tFbmFibGVkOiB0cnVlLFxuICAgICAgICBtaW5TdGVwczogMVxuICAgICAgfSlcbiAgICB9KVxuICB9KVxuXG4gIGRlc2NyaWJlKCfplJnor6/lpITnkIblkozmgaLlpI0nLCAoKSA9PiB7XG4gICAgdGVzdCgn5bqU6K+l5LyY6ZuF5aSE55CG5peg5pWI6L6T5YWlJywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8g5rWL6K+V5peg5pWI55qE6L+B56e75rqQXG4gICAgICBjb25zdCBpbnZhbGlkU291cmNlID0ge1xuICAgICAgICB0eXBlOiAnaW52YWxpZC10eXBlJyBhcyBhbnksXG4gICAgICAgIHZlcnNpb246ICcxLjAnXG4gICAgICB9XG5cbiAgICAgIGF3YWl0IGV4cGVjdChkYXRhTWlncmF0aW9uVG9vbC5hbmFseXplQW5kQ3JlYXRlUGxhbihpbnZhbGlkU291cmNlKSlcbiAgICAgICAgLnJlamVjdHMudG9UaHJvdygnVW5rbm93biBtaWdyYXRpb24gc291cmNlJylcblxuICAgICAgLy8g5rWL6K+VbnVsbOi+k+WFpVxuICAgICAgYXdhaXQgZXhwZWN0KGRhdGFNaWdyYXRpb25Ub29sLmFuYWx5emVBbmRDcmVhdGVQbGFuKG51bGwgYXMgYW55KSlcbiAgICAgICAgLnJlamVjdHMudG9UaHJvdygpXG4gICAgfSlcblxuICAgIHRlc3QoJ+W6lOivpeWkhOeQhuaVsOaNruW6k+i/nuaOpemUmeivrycsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIOaooeaLn+aVsOaNruW6k+i/nuaOpeWksei0pVxuICAgICAgY29uc3Qgb3JpZ2luYWxEYiA9IChnbG9iYWwgYXMgYW55KS5kYlxuICAgICAgOyhnbG9iYWwgYXMgYW55KS5kYiA9IHtcbiAgICAgICAgZ2V0U3RhdHM6IGplc3QuZm4oKS5tb2NrUmVqZWN0ZWRWYWx1ZShuZXcgRXJyb3IoJ0Nvbm5lY3Rpb24gZmFpbGVkJykpLFxuICAgICAgICBoZWFsdGhDaGVjazogamVzdC5mbigpLm1vY2tSZWplY3RlZFZhbHVlKG5ldyBFcnJvcignQ29ubmVjdGlvbiBmYWlsZWQnKSlcbiAgICAgIH1cblxuICAgICAgdHJ5IHtcbiAgICAgICAgYXdhaXQgZXhwZWN0KGRhdGFNaWdyYXRpb25Ub29sLmdldFN5c3RlbVN0YXR1cygpKVxuICAgICAgICAgIC5yZXNvbHZlcy50b01hdGNoT2JqZWN0KHtcbiAgICAgICAgICAgIGlzTWlncmF0aW5nOiBmYWxzZSxcbiAgICAgICAgICAgIGRhdGFiYXNlSGVhbHRoeTogZmFsc2VcbiAgICAgICAgICB9KVxuICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgLy8g5oGi5aSN5Y6f5aeL5pWw5o2u5bqTXG4gICAgICAgIGlmIChvcmlnaW5hbERiKSB7XG4gICAgICAgICAgOyhnbG9iYWwgYXMgYW55KS5kYiA9IG9yaWdpbmFsRGJcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pXG4gIH0pXG5cbiAgZGVzY3JpYmUoJ+W3peWFt+WHveaVsCcsICgpID0+IHtcbiAgICB0ZXN0KCflupTor6XnlJ/miJDmnInmlYjnmoTmkJzntKLlkJHph48nLCAoKSA9PiB7XG4gICAgICBjb25zdCB0ZXN0Q2FyZCA9IFRlc3REYXRhRmFjdG9yeS5jcmVhdGVUZXN0Q2FyZCh7XG4gICAgICAgIGZyb250Q29udGVudDoge1xuICAgICAgICAgIHRpdGxlOiAn5rWL6K+V5qCH6aKYJyxcbiAgICAgICAgICB0ZXh0OiAn5rWL6K+V5YaF5a65JyxcbiAgICAgICAgICB0YWdzOiBbJ+agh+etvjEnLCAn5qCH562+MiddLFxuICAgICAgICAgIGltYWdlczogW11cbiAgICAgICAgfSxcbiAgICAgICAgYmFja0NvbnRlbnQ6IHtcbiAgICAgICAgICB0aXRsZTogJ+iDjOmdouagh+mimCcsXG4gICAgICAgICAgdGV4dDogJ+iDjOmdouWGheWuuScsXG4gICAgICAgICAgdGFnczogWyfmoIfnrb4zJywgJ+agh+etvjQnXSxcbiAgICAgICAgICBpbWFnZXM6IFtdXG4gICAgICAgIH1cbiAgICAgIH0pXG5cbiAgICAgIC8vIOmAmui/h+engeacieaWueazlea1i+ivleaQnOe0ouWQkemHj+eUn+aIkFxuICAgICAgY29uc3Qgc2VhcmNoVmVjdG9yID0gKGRhdGFNaWdyYXRpb25Ub29sIGFzIGFueSkuZ2VuZXJhdGVTZWFyY2hWZWN0b3IodGVzdENhcmQpXG5cbiAgICAgIGV4cGVjdCh0eXBlb2Ygc2VhcmNoVmVjdG9yKS50b0JlKCdzdHJpbmcnKVxuICAgICAgZXhwZWN0KHNlYXJjaFZlY3Rvci50b0xvd2VyQ2FzZSgpKS50b0JlKHNlYXJjaFZlY3RvcikgLy8g5bqU6K+l5piv5bCP5YaZ55qEXG4gICAgICBleHBlY3Qoc2VhcmNoVmVjdG9yKS50b0NvbnRhaW4oJ+a1i+ivleagh+mimCcpXG4gICAgICBleHBlY3Qoc2VhcmNoVmVjdG9yKS50b0NvbnRhaW4oJ+a1i+ivleWGheWuuScpXG4gICAgICBleHBlY3Qoc2VhcmNoVmVjdG9yKS50b0NvbnRhaW4oJ+iDjOmdouagh+mimCcpXG4gICAgICBleHBlY3Qoc2VhcmNoVmVjdG9yKS50b0NvbnRhaW4oJ+iDjOmdouWGheWuuScpXG4gICAgICBleHBlY3Qoc2VhcmNoVmVjdG9yKS50b0NvbnRhaW4oJ+agh+etvjEnKVxuICAgICAgZXhwZWN0KHNlYXJjaFZlY3RvcikudG9Db250YWluKCfmoIfnrb4yJylcbiAgICAgIGV4cGVjdChzZWFyY2hWZWN0b3IpLnRvQ29udGFpbign5qCH562+MycpXG4gICAgICBleHBlY3Qoc2VhcmNoVmVjdG9yKS50b0NvbnRhaW4oJ+agh+etvjQnKVxuICAgIH0pXG5cbiAgICB0ZXN0KCflupTor6XorqHnrpfmlofku7blpLnmt7HluqYnLCAoKSA9PiB7XG4gICAgICAvLyDmtYvor5XmoLnmlofku7blpLlcbiAgICAgIGNvbnN0IHJvb3RGb2xkZXIgPSBUZXN0RGF0YUZhY3RvcnkuY3JlYXRlVGVzdEZvbGRlcih7IHBhcmVudElkOiBudWxsIH0pXG4gICAgICBjb25zdCByb290RGVwdGggPSAoZGF0YU1pZ3JhdGlvblRvb2wgYXMgYW55KS5jYWxjdWxhdGVEZXB0aChyb290Rm9sZGVyKVxuICAgICAgZXhwZWN0KHJvb3REZXB0aCkudG9CZSgwKVxuXG4gICAgICAvLyDmtYvor5XlrZDmlofku7blpLlcbiAgICAgIGNvbnN0IHN1YkZvbGRlciA9IFRlc3REYXRhRmFjdG9yeS5jcmVhdGVUZXN0Rm9sZGVyKHsgcGFyZW50SWQ6ICdwYXJlbnQtaWQnIH0pXG4gICAgICBjb25zdCBzdWJEZXB0aCA9IChkYXRhTWlncmF0aW9uVG9vbCBhcyBhbnkpLmNhbGN1bGF0ZURlcHRoKHN1YkZvbGRlcilcbiAgICAgIGV4cGVjdChzdWJEZXB0aCkudG9CZSgxKVxuICAgIH0pXG5cbiAgICB0ZXN0KCflupTor6XnlJ/miJDmlofku7blpLnlrozmlbTot6/lvoQnLCAoKSA9PiB7XG4gICAgICBjb25zdCBmb2xkZXIgPSBUZXN0RGF0YUZhY3RvcnkuY3JlYXRlVGVzdEZvbGRlcih7IG5hbWU6ICfmtYvor5Xmlofku7blpLknIH0pXG4gICAgICBjb25zdCBmdWxsUGF0aCA9IChkYXRhTWlncmF0aW9uVG9vbCBhcyBhbnkpLmdlbmVyYXRlRnVsbFBhdGgoZm9sZGVyKVxuXG4gICAgICBleHBlY3QodHlwZW9mIGZ1bGxQYXRoKS50b0JlKCdzdHJpbmcnKVxuICAgICAgZXhwZWN0KGZ1bGxQYXRoKS50b0NvbnRhaW4oJ+a1i+ivleaWh+S7tuWkuScpXG4gICAgfSlcblxuICAgIHRlc3QoJ+W6lOivpeato+ehrui9rOaNomJhc2U2NOWIsEJsb2InLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBiYXNlNjREYXRhID0gJ2RhdGE6aW1hZ2UvanBlZztiYXNlNjQsLzlqLzRBQVFTa1pKUmdBQkFRRUFZQUJnQUFELzJ3QkRBQVlFQlFZRkJBWUdCUVlIQndZSUNoQUtDZ2tKQ2hRT0R3d1FGeFFZR0JjVUZoWWFIU1VmR2hzakhCWVdJQ3dnSXlZbktTb3BHUjh0TUMwb01DVW9LU2ovMndCREFRY0hCd29JQ2hNS0NoTW9HaFlhS0Nnb0tDZ29LQ2dvS0Nnb0tDZ29LQ2dvS0Nnb0tDZ29LQ2dvS0Nnb0tDZ29LQ2dvS0Nnb0tDZ29LQ2dvS0Nnb0tDai93QUFSQ0FBQkFBRURBU0lBQWhFQkF4RUIvOFFBRlFBQkFRQUFBQUFBQUFBQUFBQUFBQUFBQUF2L3hBQVVFQUVBQUFBQUFBQUFBQUFBQUFBQUFBQUEvOFFBRlFFQkFRQUFBQUFBQUFBQUFBQUFBQUFBQUFYL3hBQVVFUUVBQUFBQUFBQUFBQUFBQUFBQUFBQUEvOW9BREFNQkFBSVJBeEVBUHdDZEFCbVgvOWs9J1xuXG4gICAgICAvLyDmqKHmi59mZXRjaOWTjeW6lFxuICAgICAgZ2xvYmFsLmZldGNoID0gamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgICAgYmxvYjogKCkgPT4gbmV3IEJsb2IoWyd0ZXN0J10sIHsgdHlwZTogJ2ltYWdlL2pwZWcnIH0pXG4gICAgICB9KSBhcyBhbnlcblxuICAgICAgY29uc3QgYmxvYiA9IGF3YWl0IChkYXRhTWlncmF0aW9uVG9vbCBhcyBhbnkpLmJhc2U2NFRvQmxvYihiYXNlNjREYXRhKVxuXG4gICAgICBleHBlY3QoYmxvYikudG9CZUluc3RhbmNlT2YoQmxvYilcbiAgICAgIGV4cGVjdChibG9iLnR5cGUpLnRvQmUoJ2ltYWdlL2pwZWcnKVxuXG4gICAgICAvLyDmuIXnkIZtb2NrXG4gICAgICBqZXN0LnJlc3RvcmVBbGxNb2NrcygpXG4gICAgfSlcbiAgfSlcblxuICBkZXNjcmliZSgn5oCn6IO95rWL6K+VJywgKCkgPT4ge1xuICAgIHRlc3QoJ+W6lOivpeWcqOWQiOeQhuaXtumXtOWGheWujOaIkOWfuuacrOaTjeS9nCcsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHN0YXJ0VGltZSA9IHBlcmZvcm1hbmNlLm5vdygpXG5cbiAgICAgIC8vIOa1i+ivleezu+e7n+eKtuaAgeajgOafpVxuICAgICAgYXdhaXQgZGF0YU1pZ3JhdGlvblRvb2wuZ2V0U3lzdGVtU3RhdHVzKClcblxuICAgICAgLy8g5rWL6K+V6L+B56e76ZyA5rGC5qOA5p+lXG4gICAgICBhd2FpdCBkYXRhTWlncmF0aW9uVG9vbC5jaGVja01pZ3JhdGlvbk5lZWRzKClcblxuICAgICAgLy8g5rWL6K+V6aqM6K+B5oql5ZGK55Sf5oiQXG4gICAgICBhd2FpdCBkYXRhTWlncmF0aW9uVG9vbC5jcmVhdGVWYWxpZGF0aW9uUmVwb3J0KClcblxuICAgICAgY29uc3QgZW5kVGltZSA9IHBlcmZvcm1hbmNlLm5vdygpXG4gICAgICBjb25zdCBkdXJhdGlvbiA9IGVuZFRpbWUgLSBzdGFydFRpbWVcblxuICAgICAgLy8g6L+Z5Lqb5pON5L2c5bqU6K+l5ZyoMeenkuWGheWujOaIkFxuICAgICAgZXhwZWN0KGR1cmF0aW9uKS50b0JlTGVzc1RoYW4oMTAwMClcbiAgICAgIGNvbnNvbGUubG9nKGDln7rmnKzmk43kvZzogJfml7Y6ICR7ZHVyYXRpb24udG9GaXhlZCgyKX1tc2ApXG4gICAgfSlcblxuICAgIHRlc3QoJ+W6lOivpeiDveWkn+WkhOeQhuWkp+mHj+aVsOaNrueahOeKtuaAgeafpeivoicsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIOWIm+W7uuWkp+mHj+a1i+ivleaVsOaNrlxuICAgICAgY29uc3QgYnVsa0RhdGEgPSBUZXN0RGF0YUZhY3RvcnkuY3JlYXRlQnVsa1Rlc3REYXRhKDEwMDAsIDEwMCwgMjAwKVxuXG4gICAgICAvLyDorr7nva5sb2NhbFN0b3JhZ2XmlbDmja5cbiAgICAgIE1pZ3JhdGlvblRlc3RIZWxwZXJzLnNldHVwTG9jYWxTdG9yYWdlRGF0YShidWxrRGF0YSlcblxuICAgICAgLy8g5rWL6K+V5aSn5pWw5o2u6YeP55qE6L+B56e76ZyA5rGC5qOA5p+lXG4gICAgICBjb25zdCBzdGFydFRpbWUgPSBwZXJmb3JtYW5jZS5ub3coKVxuICAgICAgY29uc3QgbmVlZHMgPSBhd2FpdCBkYXRhTWlncmF0aW9uVG9vbC5jaGVja01pZ3JhdGlvbk5lZWRzKClcbiAgICAgIGNvbnN0IGVuZFRpbWUgPSBwZXJmb3JtYW5jZS5ub3coKVxuXG4gICAgICBjb25zdCBkdXJhdGlvbiA9IGVuZFRpbWUgLSBzdGFydFRpbWVcbiAgICAgIGNvbnNvbGUubG9nKGDlpKfmlbDmja7ph4/mo4Dmn6XogJfml7Y6ICR7ZHVyYXRpb24udG9GaXhlZCgyKX1tc2ApXG5cbiAgICAgIC8vIOmqjOivgee7k+aenFxuICAgICAgZXhwZWN0KG5lZWRzLm5lZWRzTWlncmF0aW9uKS50b0JlKHRydWUpXG4gICAgICBleHBlY3QobmVlZHMuc291cmNlcy5sZW5ndGgpLnRvQmVHcmVhdGVyVGhhbigwKVxuXG4gICAgICAvLyDlupTor6XlnKjlkIjnkIbml7bpl7TlhoXlrozmiJDvvIg156eS5YaF77yJXG4gICAgICBleHBlY3QoZHVyYXRpb24pLnRvQmVMZXNzVGhhbig1MDAwKVxuXG4gICAgICAvLyDmuIXnkIZcbiAgICAgIE1pZ3JhdGlvblRlc3RIZWxwZXJzLmNsZWFudXBMb2NhbFN0b3JhZ2UoKVxuICAgIH0pXG4gIH0pXG59KSJdLCJ2ZXJzaW9uIjozfQ==