5b586b492f840b0571c4c7ec4aa74024
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.TaskFactory = void 0;
const RawTask_js_1 = require("./RawTask.js");
class TaskFactory {
    create(task) {
        const tasks = this.freeTasks;
        const t1 = tasks.length ? tasks.pop() : new RawTask_js_1.RawTask(this.onError, (t) => tasks[tasks.length] = t);
        t1.task = task;
        return t1;
    }
    constructor(onError) {
        this.onError = onError;
        this.freeTasks = [];
    }
}
exports.TaskFactory = TaskFactory;
//# sourceMappingURL=TaskFactory.js.map
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiRDpcXFByb2plY3RzXFxDYXJkRXZlcnl0aGluZ1xcY2FyZGFsbC1wcm90b3R5cGVcXG5vZGVfbW9kdWxlc1xcQHJlYWN0LWRuZFxcYXNhcFxcZGlzdFxcVGFza0ZhY3RvcnkuanMiLCJtYXBwaW5ncyI6Ijs7O0FBQUEsNkNBQXVDO0FBQ3ZDLE1BQWEsV0FBVztJQUNwQixNQUFNLENBQUMsSUFBSTtRQUNQLE1BQU0sS0FBSyxHQUFHLElBQUksQ0FBQyxTQUFTLENBQUM7UUFDN0IsTUFBTSxFQUFFLEdBQUcsS0FBSyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLEdBQUcsRUFBRSxDQUFDLENBQUMsQ0FBQyxJQUFJLG9CQUFPLENBQUMsSUFBSSxDQUFDLE9BQU8sRUFBRSxDQUFDLENBQUMsRUFBQyxFQUFFLENBQUEsS0FBSyxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQzdGLENBQUM7UUFDRixFQUFFLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQztRQUNmLE9BQU8sRUFBRSxDQUFDO0lBQ2QsQ0FBQztJQUNELFlBQVksT0FBTztRQUNmLElBQUksQ0FBQyxPQUFPLEdBQUcsT0FBTyxDQUFDO1FBQ3ZCLElBQUksQ0FBQyxTQUFTLEdBQUcsRUFBRSxDQUFDO0lBQ3hCLENBQUM7Q0FDSjtBQVpELGtDQVlDO0FBRUQsdUNBQXVDIiwibmFtZXMiOltdLCJzb3VyY2VzIjpbIkQ6XFxQcm9qZWN0c1xcQ2FyZEV2ZXJ5dGhpbmdcXGNhcmRhbGwtcHJvdG90eXBlXFxub2RlX21vZHVsZXNcXEByZWFjdC1kbmRcXGFzYXBcXGRpc3RcXFRhc2tGYWN0b3J5LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFJhd1Rhc2sgfSBmcm9tICcuL1Jhd1Rhc2suanMnO1xuZXhwb3J0IGNsYXNzIFRhc2tGYWN0b3J5IHtcbiAgICBjcmVhdGUodGFzaykge1xuICAgICAgICBjb25zdCB0YXNrcyA9IHRoaXMuZnJlZVRhc2tzO1xuICAgICAgICBjb25zdCB0MSA9IHRhc2tzLmxlbmd0aCA/IHRhc2tzLnBvcCgpIDogbmV3IFJhd1Rhc2sodGhpcy5vbkVycm9yLCAodCk9PnRhc2tzW3Rhc2tzLmxlbmd0aF0gPSB0XG4gICAgICAgICk7XG4gICAgICAgIHQxLnRhc2sgPSB0YXNrO1xuICAgICAgICByZXR1cm4gdDE7XG4gICAgfVxuICAgIGNvbnN0cnVjdG9yKG9uRXJyb3Ipe1xuICAgICAgICB0aGlzLm9uRXJyb3IgPSBvbkVycm9yO1xuICAgICAgICB0aGlzLmZyZWVUYXNrcyA9IFtdO1xuICAgIH1cbn1cblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9VGFza0ZhY3RvcnkuanMubWFwIl0sInZlcnNpb24iOjN9