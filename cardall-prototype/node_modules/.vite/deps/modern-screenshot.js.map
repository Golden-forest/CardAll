{
  "version": 3,
  "sources": ["../../modern-screenshot/dist/index.mjs"],
  "sourcesContent": ["function changeJpegDpi(uint8Array, dpi) {\r\n  uint8Array[13] = 1;\r\n  uint8Array[14] = dpi >> 8;\r\n  uint8Array[15] = dpi & 255;\r\n  uint8Array[16] = dpi >> 8;\r\n  uint8Array[17] = dpi & 255;\r\n  return uint8Array;\r\n}\r\n\r\nconst _P = \"p\".charCodeAt(0);\r\nconst _H = \"H\".charCodeAt(0);\r\nconst _Y = \"Y\".charCodeAt(0);\r\nconst _S = \"s\".charCodeAt(0);\r\nlet pngDataTable;\r\nfunction createPngDataTable() {\r\n  const crcTable = new Int32Array(256);\r\n  for (let n = 0; n < 256; n++) {\r\n    let c = n;\r\n    for (let k = 0; k < 8; k++) {\r\n      c = c & 1 ? 3988292384 ^ c >>> 1 : c >>> 1;\r\n    }\r\n    crcTable[n] = c;\r\n  }\r\n  return crcTable;\r\n}\r\nfunction calcCrc(uint8Array) {\r\n  let c = -1;\r\n  if (!pngDataTable)\r\n    pngDataTable = createPngDataTable();\r\n  for (let n = 0; n < uint8Array.length; n++) {\r\n    c = pngDataTable[(c ^ uint8Array[n]) & 255] ^ c >>> 8;\r\n  }\r\n  return c ^ -1;\r\n}\r\nfunction searchStartOfPhys(uint8Array) {\r\n  const length = uint8Array.length - 1;\r\n  for (let i = length; i >= 4; i--) {\r\n    if (uint8Array[i - 4] === 9 && uint8Array[i - 3] === _P && uint8Array[i - 2] === _H && uint8Array[i - 1] === _Y && uint8Array[i] === _S) {\r\n      return i - 3;\r\n    }\r\n  }\r\n  return 0;\r\n}\r\nfunction changePngDpi(uint8Array, dpi, overwritepHYs = false) {\r\n  const physChunk = new Uint8Array(13);\r\n  dpi *= 39.3701;\r\n  physChunk[0] = _P;\r\n  physChunk[1] = _H;\r\n  physChunk[2] = _Y;\r\n  physChunk[3] = _S;\r\n  physChunk[4] = dpi >>> 24;\r\n  physChunk[5] = dpi >>> 16;\r\n  physChunk[6] = dpi >>> 8;\r\n  physChunk[7] = dpi & 255;\r\n  physChunk[8] = physChunk[4];\r\n  physChunk[9] = physChunk[5];\r\n  physChunk[10] = physChunk[6];\r\n  physChunk[11] = physChunk[7];\r\n  physChunk[12] = 1;\r\n  const crc = calcCrc(physChunk);\r\n  const crcChunk = new Uint8Array(4);\r\n  crcChunk[0] = crc >>> 24;\r\n  crcChunk[1] = crc >>> 16;\r\n  crcChunk[2] = crc >>> 8;\r\n  crcChunk[3] = crc & 255;\r\n  if (overwritepHYs) {\r\n    const startingIndex = searchStartOfPhys(uint8Array);\r\n    uint8Array.set(physChunk, startingIndex);\r\n    uint8Array.set(crcChunk, startingIndex + 13);\r\n    return uint8Array;\r\n  } else {\r\n    const chunkLength = new Uint8Array(4);\r\n    chunkLength[0] = 0;\r\n    chunkLength[1] = 0;\r\n    chunkLength[2] = 0;\r\n    chunkLength[3] = 9;\r\n    const finalHeader = new Uint8Array(54);\r\n    finalHeader.set(uint8Array, 0);\r\n    finalHeader.set(chunkLength, 33);\r\n    finalHeader.set(physChunk, 37);\r\n    finalHeader.set(crcChunk, 50);\r\n    return finalHeader;\r\n  }\r\n}\r\nconst b64PhysSignature1 = \"AAlwSFlz\";\r\nconst b64PhysSignature2 = \"AAAJcEhZ\";\r\nconst b64PhysSignature3 = \"AAAACXBI\";\r\nfunction detectPhysChunkFromDataUrl(dataUrl) {\r\n  let b64index = dataUrl.indexOf(b64PhysSignature1);\r\n  if (b64index === -1) {\r\n    b64index = dataUrl.indexOf(b64PhysSignature2);\r\n  }\r\n  if (b64index === -1) {\r\n    b64index = dataUrl.indexOf(b64PhysSignature3);\r\n  }\r\n  return b64index;\r\n}\r\n\r\nconst PREFIX = \"[modern-screenshot]\";\r\nconst IN_BROWSER = typeof window !== \"undefined\";\r\nconst SUPPORT_WEB_WORKER = IN_BROWSER && \"Worker\" in window;\r\nconst SUPPORT_ATOB = IN_BROWSER && \"atob\" in window;\r\nconst SUPPORT_BTOA = IN_BROWSER && \"btoa\" in window;\r\nconst USER_AGENT = IN_BROWSER ? window.navigator?.userAgent : \"\";\r\nconst IN_CHROME = USER_AGENT.includes(\"Chrome\");\r\nconst IN_SAFARI = USER_AGENT.includes(\"AppleWebKit\") && !IN_CHROME;\r\nconst IN_FIREFOX = USER_AGENT.includes(\"Firefox\");\r\nconst isContext = (value) => value && \"__CONTEXT__\" in value;\r\nconst isCssFontFaceRule = (rule) => rule.constructor.name === \"CSSFontFaceRule\";\r\nconst isCSSImportRule = (rule) => rule.constructor.name === \"CSSImportRule\";\r\nconst isElementNode = (node) => node.nodeType === 1;\r\nconst isSVGElementNode = (node) => typeof node.className === \"object\";\r\nconst isSVGImageElementNode = (node) => node.tagName === \"image\";\r\nconst isSVGUseElementNode = (node) => node.tagName === \"use\";\r\nconst isHTMLElementNode = (node) => isElementNode(node) && typeof node.style !== \"undefined\" && !isSVGElementNode(node);\r\nconst isCommentNode = (node) => node.nodeType === 8;\r\nconst isTextNode = (node) => node.nodeType === 3;\r\nconst isImageElement = (node) => node.tagName === \"IMG\";\r\nconst isVideoElement = (node) => node.tagName === \"VIDEO\";\r\nconst isCanvasElement = (node) => node.tagName === \"CANVAS\";\r\nconst isTextareaElement = (node) => node.tagName === \"TEXTAREA\";\r\nconst isInputElement = (node) => node.tagName === \"INPUT\";\r\nconst isStyleElement = (node) => node.tagName === \"STYLE\";\r\nconst isScriptElement = (node) => node.tagName === \"SCRIPT\";\r\nconst isSelectElement = (node) => node.tagName === \"SELECT\";\r\nconst isSlotElement = (node) => node.tagName === \"SLOT\";\r\nconst isIFrameElement = (node) => node.tagName === \"IFRAME\";\r\nconst consoleWarn = (...args) => console.warn(PREFIX, ...args);\r\nfunction supportWebp(ownerDocument) {\r\n  const canvas = ownerDocument?.createElement?.(\"canvas\");\r\n  if (canvas) {\r\n    canvas.height = canvas.width = 1;\r\n  }\r\n  return Boolean(canvas) && \"toDataURL\" in canvas && Boolean(canvas.toDataURL(\"image/webp\").includes(\"image/webp\"));\r\n}\r\nconst isDataUrl = (url) => url.startsWith(\"data:\");\r\nfunction resolveUrl(url, baseUrl) {\r\n  if (url.match(/^[a-z]+:\\/\\//i))\r\n    return url;\r\n  if (IN_BROWSER && url.match(/^\\/\\//))\r\n    return window.location.protocol + url;\r\n  if (url.match(/^[a-z]+:/i))\r\n    return url;\r\n  if (!IN_BROWSER)\r\n    return url;\r\n  const doc = getDocument().implementation.createHTMLDocument();\r\n  const base = doc.createElement(\"base\");\r\n  const a = doc.createElement(\"a\");\r\n  doc.head.appendChild(base);\r\n  doc.body.appendChild(a);\r\n  if (baseUrl)\r\n    base.href = baseUrl;\r\n  a.href = url;\r\n  return a.href;\r\n}\r\nfunction getDocument(target) {\r\n  return (target && isElementNode(target) ? target?.ownerDocument : target) ?? window.document;\r\n}\r\nconst XMLNS = \"http://www.w3.org/2000/svg\";\r\nfunction createSvg(width, height, ownerDocument) {\r\n  const svg = getDocument(ownerDocument).createElementNS(XMLNS, \"svg\");\r\n  svg.setAttributeNS(null, \"width\", width.toString());\r\n  svg.setAttributeNS(null, \"height\", height.toString());\r\n  svg.setAttributeNS(null, \"viewBox\", `0 0 ${width} ${height}`);\r\n  return svg;\r\n}\r\nfunction svgToDataUrl(svg, removeControlCharacter) {\r\n  let xhtml = new XMLSerializer().serializeToString(svg);\r\n  if (removeControlCharacter) {\r\n    xhtml = xhtml.replace(/[\\u0000-\\u0008\\v\\f\\u000E-\\u001F\\uD800-\\uDFFF\\uFFFE\\uFFFF]/gu, \"\");\r\n  }\r\n  return `data:image/svg+xml;charset=utf-8,${encodeURIComponent(xhtml)}`;\r\n}\r\nasync function canvasToBlob(canvas, type = \"image/png\", quality = 1) {\r\n  try {\r\n    return await new Promise((resolve, reject) => {\r\n      canvas.toBlob((blob) => {\r\n        if (blob) {\r\n          resolve(blob);\r\n        } else {\r\n          reject(new Error(\"Blob is null\"));\r\n        }\r\n      }, type, quality);\r\n    });\r\n  } catch (error) {\r\n    if (SUPPORT_ATOB) {\r\n      return dataUrlToBlob(canvas.toDataURL(type, quality));\r\n    }\r\n    throw error;\r\n  }\r\n}\r\nfunction dataUrlToBlob(dataUrl) {\r\n  const [header, base64] = dataUrl.split(\",\");\r\n  const type = header.match(/data:(.+);/)?.[1] ?? void 0;\r\n  const decoded = window.atob(base64);\r\n  const length = decoded.length;\r\n  const buffer = new Uint8Array(length);\r\n  for (let i = 0; i < length; i += 1) {\r\n    buffer[i] = decoded.charCodeAt(i);\r\n  }\r\n  return new Blob([buffer], { type });\r\n}\r\nfunction readBlob(blob, type) {\r\n  return new Promise((resolve, reject) => {\r\n    const reader = new FileReader();\r\n    reader.onload = () => resolve(reader.result);\r\n    reader.onerror = () => reject(reader.error);\r\n    reader.onabort = () => reject(new Error(`Failed read blob to ${type}`));\r\n    if (type === \"dataUrl\") {\r\n      reader.readAsDataURL(blob);\r\n    } else if (type === \"arrayBuffer\") {\r\n      reader.readAsArrayBuffer(blob);\r\n    }\r\n  });\r\n}\r\nconst blobToDataUrl = (blob) => readBlob(blob, \"dataUrl\");\r\nconst blobToArrayBuffer = (blob) => readBlob(blob, \"arrayBuffer\");\r\nfunction createImage(url, ownerDocument) {\r\n  const img = getDocument(ownerDocument).createElement(\"img\");\r\n  img.decoding = \"sync\";\r\n  img.loading = \"eager\";\r\n  img.src = url;\r\n  return img;\r\n}\r\nfunction loadMedia(media, options) {\r\n  return new Promise((resolve) => {\r\n    const { timeout, ownerDocument, onError: userOnError, onWarn } = options ?? {};\r\n    const node = typeof media === \"string\" ? createImage(media, getDocument(ownerDocument)) : media;\r\n    let timer = null;\r\n    let removeEventListeners = null;\r\n    function onResolve() {\r\n      resolve(node);\r\n      timer && clearTimeout(timer);\r\n      removeEventListeners?.();\r\n    }\r\n    if (timeout) {\r\n      timer = setTimeout(onResolve, timeout);\r\n    }\r\n    if (isVideoElement(node)) {\r\n      const currentSrc = node.currentSrc || node.src;\r\n      if (!currentSrc) {\r\n        if (node.poster) {\r\n          return loadMedia(node.poster, options).then(resolve);\r\n        }\r\n        return onResolve();\r\n      }\r\n      if (node.readyState >= 2) {\r\n        return onResolve();\r\n      }\r\n      const onLoadeddata = onResolve;\r\n      const onError = (error) => {\r\n        onWarn?.(\r\n          \"Failed video load\",\r\n          currentSrc,\r\n          error\r\n        );\r\n        userOnError?.(error);\r\n        onResolve();\r\n      };\r\n      removeEventListeners = () => {\r\n        node.removeEventListener(\"loadeddata\", onLoadeddata);\r\n        node.removeEventListener(\"error\", onError);\r\n      };\r\n      node.addEventListener(\"loadeddata\", onLoadeddata, { once: true });\r\n      node.addEventListener(\"error\", onError, { once: true });\r\n    } else {\r\n      const currentSrc = isSVGImageElementNode(node) ? node.href.baseVal : node.currentSrc || node.src;\r\n      if (!currentSrc) {\r\n        return onResolve();\r\n      }\r\n      const onLoad = async () => {\r\n        if (isImageElement(node) && \"decode\" in node) {\r\n          try {\r\n            await node.decode();\r\n          } catch (error) {\r\n            onWarn?.(\r\n              \"Failed to decode image, trying to render anyway\",\r\n              node.dataset.originalSrc || currentSrc,\r\n              error\r\n            );\r\n          }\r\n        }\r\n        onResolve();\r\n      };\r\n      const onError = (error) => {\r\n        onWarn?.(\r\n          \"Failed image load\",\r\n          node.dataset.originalSrc || currentSrc,\r\n          error\r\n        );\r\n        onResolve();\r\n      };\r\n      if (isImageElement(node) && node.complete) {\r\n        return onLoad();\r\n      }\r\n      removeEventListeners = () => {\r\n        node.removeEventListener(\"load\", onLoad);\r\n        node.removeEventListener(\"error\", onError);\r\n      };\r\n      node.addEventListener(\"load\", onLoad, { once: true });\r\n      node.addEventListener(\"error\", onError, { once: true });\r\n    }\r\n  });\r\n}\r\nasync function waitUntilLoad(node, options) {\r\n  if (isHTMLElementNode(node)) {\r\n    if (isImageElement(node) || isVideoElement(node)) {\r\n      await loadMedia(node, options);\r\n    } else {\r\n      await Promise.all(\r\n        [\"img\", \"video\"].flatMap((selectors) => {\r\n          return Array.from(node.querySelectorAll(selectors)).map((el) => loadMedia(el, options));\r\n        })\r\n      );\r\n    }\r\n  }\r\n}\r\nconst uuid = /* @__PURE__ */ function uuid2() {\r\n  let counter = 0;\r\n  const random = () => `0000${(Math.random() * 36 ** 4 << 0).toString(36)}`.slice(-4);\r\n  return () => {\r\n    counter += 1;\r\n    return `u${random()}${counter}`;\r\n  };\r\n}();\r\nfunction splitFontFamily(fontFamily) {\r\n  return fontFamily?.split(\",\").map((val) => val.trim().replace(/\"|'/g, \"\").toLowerCase()).filter(Boolean);\r\n}\r\n\r\nlet uid = 0;\r\nfunction createLogger(debug) {\r\n  const prefix = `${PREFIX}[#${uid}]`;\r\n  uid++;\r\n  return {\r\n    // eslint-disable-next-line no-console\r\n    time: (label) => debug && console.time(`${prefix} ${label}`),\r\n    // eslint-disable-next-line no-console\r\n    timeEnd: (label) => debug && console.timeEnd(`${prefix} ${label}`),\r\n    warn: (...args) => debug && consoleWarn(...args)\r\n  };\r\n}\r\n\r\nfunction getDefaultRequestInit(bypassingCache) {\r\n  return {\r\n    cache: bypassingCache ? \"no-cache\" : \"force-cache\"\r\n  };\r\n}\r\n\r\nasync function orCreateContext(node, options) {\r\n  return isContext(node) ? node : createContext(node, { ...options, autoDestruct: true });\r\n}\r\nasync function createContext(node, options) {\r\n  const { scale = 1, workerUrl, workerNumber = 1 } = options || {};\r\n  const debug = Boolean(options?.debug);\r\n  const features = options?.features ?? true;\r\n  const ownerDocument = node.ownerDocument ?? (IN_BROWSER ? window.document : void 0);\r\n  const ownerWindow = node.ownerDocument?.defaultView ?? (IN_BROWSER ? window : void 0);\r\n  const requests = /* @__PURE__ */ new Map();\r\n  const context = {\r\n    // Options\r\n    width: 0,\r\n    height: 0,\r\n    quality: 1,\r\n    type: \"image/png\",\r\n    scale,\r\n    backgroundColor: null,\r\n    style: null,\r\n    filter: null,\r\n    maximumCanvasSize: 0,\r\n    timeout: 3e4,\r\n    progress: null,\r\n    debug,\r\n    fetch: {\r\n      requestInit: getDefaultRequestInit(options?.fetch?.bypassingCache),\r\n      placeholderImage: \"data:image/png;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7\",\r\n      bypassingCache: false,\r\n      ...options?.fetch\r\n    },\r\n    fetchFn: null,\r\n    font: {},\r\n    drawImageInterval: 100,\r\n    workerUrl: null,\r\n    workerNumber,\r\n    onCloneEachNode: null,\r\n    onCloneNode: null,\r\n    onEmbedNode: null,\r\n    onCreateForeignObjectSvg: null,\r\n    includeStyleProperties: null,\r\n    autoDestruct: false,\r\n    ...options,\r\n    // InternalContext\r\n    __CONTEXT__: true,\r\n    log: createLogger(debug),\r\n    node,\r\n    ownerDocument,\r\n    ownerWindow,\r\n    dpi: scale === 1 ? null : 96 * scale,\r\n    svgStyleElement: createStyleElement(ownerDocument),\r\n    svgDefsElement: ownerDocument?.createElementNS(XMLNS, \"defs\"),\r\n    svgStyles: /* @__PURE__ */ new Map(),\r\n    defaultComputedStyles: /* @__PURE__ */ new Map(),\r\n    workers: [\r\n      ...Array.from({\r\n        length: SUPPORT_WEB_WORKER && workerUrl && workerNumber ? workerNumber : 0\r\n      })\r\n    ].map(() => {\r\n      try {\r\n        const worker = new Worker(workerUrl);\r\n        worker.onmessage = async (event) => {\r\n          const { url, result } = event.data;\r\n          if (result) {\r\n            requests.get(url)?.resolve?.(result);\r\n          } else {\r\n            requests.get(url)?.reject?.(new Error(`Error receiving message from worker: ${url}`));\r\n          }\r\n        };\r\n        worker.onmessageerror = (event) => {\r\n          const { url } = event.data;\r\n          requests.get(url)?.reject?.(new Error(`Error receiving message from worker: ${url}`));\r\n        };\r\n        return worker;\r\n      } catch (error) {\r\n        context.log.warn(\"Failed to new Worker\", error);\r\n        return null;\r\n      }\r\n    }).filter(Boolean),\r\n    fontFamilies: /* @__PURE__ */ new Map(),\r\n    fontCssTexts: /* @__PURE__ */ new Map(),\r\n    acceptOfImage: `${[\r\n      supportWebp(ownerDocument) && \"image/webp\",\r\n      \"image/svg+xml\",\r\n      \"image/*\",\r\n      \"*/*\"\r\n    ].filter(Boolean).join(\",\")};q=0.8`,\r\n    requests,\r\n    drawImageCount: 0,\r\n    tasks: [],\r\n    features,\r\n    isEnable: (key) => {\r\n      if (key === \"restoreScrollPosition\") {\r\n        return typeof features === \"boolean\" ? false : features[key] ?? false;\r\n      }\r\n      if (typeof features === \"boolean\") {\r\n        return features;\r\n      }\r\n      return features[key] ?? true;\r\n    },\r\n    shadowRoots: []\r\n  };\r\n  context.log.time(\"wait until load\");\r\n  await waitUntilLoad(node, { timeout: context.timeout, onWarn: context.log.warn });\r\n  context.log.timeEnd(\"wait until load\");\r\n  const { width, height } = resolveBoundingBox(node, context);\r\n  context.width = width;\r\n  context.height = height;\r\n  return context;\r\n}\r\nfunction createStyleElement(ownerDocument) {\r\n  if (!ownerDocument)\r\n    return void 0;\r\n  const style = ownerDocument.createElement(\"style\");\r\n  const cssText = style.ownerDocument.createTextNode(`\r\n.______background-clip--text {\r\n  background-clip: text;\r\n  -webkit-background-clip: text;\r\n}\r\n`);\r\n  style.appendChild(cssText);\r\n  return style;\r\n}\r\nfunction resolveBoundingBox(node, context) {\r\n  let { width, height } = context;\r\n  if (isElementNode(node) && (!width || !height)) {\r\n    const box = node.getBoundingClientRect();\r\n    width = width || box.width || Number(node.getAttribute(\"width\")) || 0;\r\n    height = height || box.height || Number(node.getAttribute(\"height\")) || 0;\r\n  }\r\n  return { width, height };\r\n}\r\n\r\nasync function imageToCanvas(image, context) {\r\n  const {\r\n    log,\r\n    timeout,\r\n    drawImageCount,\r\n    drawImageInterval\r\n  } = context;\r\n  log.time(\"image to canvas\");\r\n  const loaded = await loadMedia(image, { timeout, onWarn: context.log.warn });\r\n  const { canvas, context2d } = createCanvas(image.ownerDocument, context);\r\n  const drawImage = () => {\r\n    try {\r\n      context2d?.drawImage(loaded, 0, 0, canvas.width, canvas.height);\r\n    } catch (error) {\r\n      context.log.warn(\"Failed to drawImage\", error);\r\n    }\r\n  };\r\n  drawImage();\r\n  if (context.isEnable(\"fixSvgXmlDecode\")) {\r\n    for (let i = 0; i < drawImageCount; i++) {\r\n      await new Promise((resolve) => {\r\n        setTimeout(() => {\r\n          context2d?.clearRect(0, 0, canvas.width, canvas.height);\r\n          drawImage();\r\n          resolve();\r\n        }, i + drawImageInterval);\r\n      });\r\n    }\r\n  }\r\n  context.drawImageCount = 0;\r\n  log.timeEnd(\"image to canvas\");\r\n  return canvas;\r\n}\r\nfunction createCanvas(ownerDocument, context) {\r\n  const { width, height, scale, backgroundColor, maximumCanvasSize: max } = context;\r\n  const canvas = ownerDocument.createElement(\"canvas\");\r\n  canvas.width = Math.floor(width * scale);\r\n  canvas.height = Math.floor(height * scale);\r\n  canvas.style.width = `${width}px`;\r\n  canvas.style.height = `${height}px`;\r\n  if (max) {\r\n    if (canvas.width > max || canvas.height > max) {\r\n      if (canvas.width > max && canvas.height > max) {\r\n        if (canvas.width > canvas.height) {\r\n          canvas.height *= max / canvas.width;\r\n          canvas.width = max;\r\n        } else {\r\n          canvas.width *= max / canvas.height;\r\n          canvas.height = max;\r\n        }\r\n      } else if (canvas.width > max) {\r\n        canvas.height *= max / canvas.width;\r\n        canvas.width = max;\r\n      } else {\r\n        canvas.width *= max / canvas.height;\r\n        canvas.height = max;\r\n      }\r\n    }\r\n  }\r\n  const context2d = canvas.getContext(\"2d\");\r\n  if (context2d && backgroundColor) {\r\n    context2d.fillStyle = backgroundColor;\r\n    context2d.fillRect(0, 0, canvas.width, canvas.height);\r\n  }\r\n  return { canvas, context2d };\r\n}\r\n\r\nfunction cloneCanvas(canvas, context) {\r\n  if (canvas.ownerDocument) {\r\n    try {\r\n      const dataURL = canvas.toDataURL();\r\n      if (dataURL !== \"data:,\") {\r\n        return createImage(dataURL, canvas.ownerDocument);\r\n      }\r\n    } catch (error) {\r\n      context.log.warn(\"Failed to clone canvas\", error);\r\n    }\r\n  }\r\n  const cloned = canvas.cloneNode(false);\r\n  const ctx = canvas.getContext(\"2d\");\r\n  const clonedCtx = cloned.getContext(\"2d\");\r\n  try {\r\n    if (ctx && clonedCtx) {\r\n      clonedCtx.putImageData(\r\n        ctx.getImageData(0, 0, canvas.width, canvas.height),\r\n        0,\r\n        0\r\n      );\r\n    }\r\n    return cloned;\r\n  } catch (error) {\r\n    context.log.warn(\"Failed to clone canvas\", error);\r\n  }\r\n  return cloned;\r\n}\r\n\r\nfunction cloneIframe(iframe, context) {\r\n  try {\r\n    if (iframe?.contentDocument?.body) {\r\n      return cloneNode(iframe.contentDocument.body, context);\r\n    }\r\n  } catch (error) {\r\n    context.log.warn(\"Failed to clone iframe\", error);\r\n  }\r\n  return iframe.cloneNode(false);\r\n}\r\n\r\nfunction cloneImage(image) {\r\n  const cloned = image.cloneNode(false);\r\n  if (image.currentSrc && image.currentSrc !== image.src) {\r\n    cloned.src = image.currentSrc;\r\n    cloned.srcset = \"\";\r\n  }\r\n  if (cloned.loading === \"lazy\") {\r\n    cloned.loading = \"eager\";\r\n  }\r\n  return cloned;\r\n}\r\n\r\nasync function cloneVideo(video, context) {\r\n  if (video.ownerDocument && !video.currentSrc && video.poster) {\r\n    return createImage(video.poster, video.ownerDocument);\r\n  }\r\n  const cloned = video.cloneNode(false);\r\n  cloned.crossOrigin = \"anonymous\";\r\n  if (video.currentSrc && video.currentSrc !== video.src) {\r\n    cloned.src = video.currentSrc;\r\n  }\r\n  const ownerDocument = cloned.ownerDocument;\r\n  if (ownerDocument) {\r\n    let canPlay = true;\r\n    await loadMedia(cloned, { onError: () => canPlay = false, onWarn: context.log.warn });\r\n    if (!canPlay) {\r\n      if (video.poster) {\r\n        return createImage(video.poster, video.ownerDocument);\r\n      }\r\n      return cloned;\r\n    }\r\n    cloned.currentTime = video.currentTime;\r\n    await new Promise((resolve) => {\r\n      cloned.addEventListener(\"seeked\", resolve, { once: true });\r\n    });\r\n    const canvas = ownerDocument.createElement(\"canvas\");\r\n    canvas.width = video.offsetWidth;\r\n    canvas.height = video.offsetHeight;\r\n    try {\r\n      const ctx = canvas.getContext(\"2d\");\r\n      if (ctx)\r\n        ctx.drawImage(cloned, 0, 0, canvas.width, canvas.height);\r\n    } catch (error) {\r\n      context.log.warn(\"Failed to clone video\", error);\r\n      if (video.poster) {\r\n        return createImage(video.poster, video.ownerDocument);\r\n      }\r\n      return cloned;\r\n    }\r\n    return cloneCanvas(canvas, context);\r\n  }\r\n  return cloned;\r\n}\r\n\r\nfunction cloneElement(node, context) {\r\n  if (isCanvasElement(node)) {\r\n    return cloneCanvas(node, context);\r\n  }\r\n  if (isIFrameElement(node)) {\r\n    return cloneIframe(node, context);\r\n  }\r\n  if (isImageElement(node)) {\r\n    return cloneImage(node);\r\n  }\r\n  if (isVideoElement(node)) {\r\n    return cloneVideo(node, context);\r\n  }\r\n  return node.cloneNode(false);\r\n}\r\n\r\nfunction getSandBox(context) {\r\n  let sandbox = context.sandbox;\r\n  if (!sandbox) {\r\n    const { ownerDocument } = context;\r\n    try {\r\n      if (ownerDocument) {\r\n        sandbox = ownerDocument.createElement(\"iframe\");\r\n        sandbox.id = `__SANDBOX__${uuid()}`;\r\n        sandbox.width = \"0\";\r\n        sandbox.height = \"0\";\r\n        sandbox.style.visibility = \"hidden\";\r\n        sandbox.style.position = \"fixed\";\r\n        ownerDocument.body.appendChild(sandbox);\r\n        sandbox.srcdoc = '<!DOCTYPE html><meta charset=\"UTF-8\"><title></title><body>';\r\n        context.sandbox = sandbox;\r\n      }\r\n    } catch (error) {\r\n      context.log.warn(\"Failed to getSandBox\", error);\r\n    }\r\n  }\r\n  return sandbox;\r\n}\r\n\r\nconst ignoredStyles = [\r\n  \"width\",\r\n  \"height\",\r\n  \"-webkit-text-fill-color\"\r\n];\r\nconst includedAttributes = [\r\n  \"stroke\",\r\n  \"fill\"\r\n];\r\nfunction getDefaultStyle(node, pseudoElement, context) {\r\n  const { defaultComputedStyles } = context;\r\n  const nodeName = node.nodeName.toLowerCase();\r\n  const isSvgNode = isSVGElementNode(node) && nodeName !== \"svg\";\r\n  const attributes = isSvgNode ? includedAttributes.map((name) => [name, node.getAttribute(name)]).filter(([, value]) => value !== null) : [];\r\n  const key = [\r\n    isSvgNode && \"svg\",\r\n    nodeName,\r\n    attributes.map((name, value) => `${name}=${value}`).join(\",\"),\r\n    pseudoElement\r\n  ].filter(Boolean).join(\":\");\r\n  if (defaultComputedStyles.has(key))\r\n    return defaultComputedStyles.get(key);\r\n  const sandbox = getSandBox(context);\r\n  const sandboxWindow = sandbox?.contentWindow;\r\n  if (!sandboxWindow)\r\n    return /* @__PURE__ */ new Map();\r\n  const sandboxDocument = sandboxWindow?.document;\r\n  let root;\r\n  let el;\r\n  if (isSvgNode) {\r\n    root = sandboxDocument.createElementNS(XMLNS, \"svg\");\r\n    el = root.ownerDocument.createElementNS(root.namespaceURI, nodeName);\r\n    attributes.forEach(([name, value]) => {\r\n      el.setAttributeNS(null, name, value);\r\n    });\r\n    root.appendChild(el);\r\n  } else {\r\n    root = el = sandboxDocument.createElement(nodeName);\r\n  }\r\n  el.textContent = \" \";\r\n  sandboxDocument.body.appendChild(root);\r\n  const computedStyle = sandboxWindow.getComputedStyle(el, pseudoElement);\r\n  const styles = /* @__PURE__ */ new Map();\r\n  for (let len = computedStyle.length, i = 0; i < len; i++) {\r\n    const name = computedStyle.item(i);\r\n    if (ignoredStyles.includes(name))\r\n      continue;\r\n    styles.set(name, computedStyle.getPropertyValue(name));\r\n  }\r\n  sandboxDocument.body.removeChild(root);\r\n  defaultComputedStyles.set(key, styles);\r\n  return styles;\r\n}\r\n\r\nfunction getDiffStyle(style, defaultStyle, includeStyleProperties) {\r\n  const diffStyle = /* @__PURE__ */ new Map();\r\n  const prefixs = [];\r\n  const prefixTree = /* @__PURE__ */ new Map();\r\n  if (includeStyleProperties) {\r\n    for (const name of includeStyleProperties) {\r\n      applyTo(name);\r\n    }\r\n  } else {\r\n    for (let len = style.length, i = 0; i < len; i++) {\r\n      const name = style.item(i);\r\n      applyTo(name);\r\n    }\r\n  }\r\n  for (let len = prefixs.length, i = 0; i < len; i++) {\r\n    prefixTree.get(prefixs[i])?.forEach((value, name) => diffStyle.set(name, value));\r\n  }\r\n  function applyTo(name) {\r\n    const value = style.getPropertyValue(name);\r\n    const priority = style.getPropertyPriority(name);\r\n    const subIndex = name.lastIndexOf(\"-\");\r\n    const prefix = subIndex > -1 ? name.substring(0, subIndex) : void 0;\r\n    if (prefix) {\r\n      let map = prefixTree.get(prefix);\r\n      if (!map) {\r\n        map = /* @__PURE__ */ new Map();\r\n        prefixTree.set(prefix, map);\r\n      }\r\n      map.set(name, [value, priority]);\r\n    }\r\n    if (defaultStyle.get(name) === value && !priority)\r\n      return;\r\n    if (prefix) {\r\n      prefixs.push(prefix);\r\n    } else {\r\n      diffStyle.set(name, [value, priority]);\r\n    }\r\n  }\r\n  return diffStyle;\r\n}\r\n\r\nfunction copyCssStyles(node, cloned, isRoot, context) {\r\n  const { ownerWindow, includeStyleProperties, currentParentNodeStyle } = context;\r\n  const clonedStyle = cloned.style;\r\n  const computedStyle = ownerWindow.getComputedStyle(node);\r\n  const defaultStyle = getDefaultStyle(node, null, context);\r\n  currentParentNodeStyle?.forEach((_, key) => {\r\n    defaultStyle.delete(key);\r\n  });\r\n  const style = getDiffStyle(computedStyle, defaultStyle, includeStyleProperties);\r\n  style.delete(\"transition-property\");\r\n  style.delete(\"all\");\r\n  style.delete(\"d\");\r\n  style.delete(\"content\");\r\n  if (isRoot) {\r\n    style.delete(\"margin-top\");\r\n    style.delete(\"margin-right\");\r\n    style.delete(\"margin-bottom\");\r\n    style.delete(\"margin-left\");\r\n    style.delete(\"margin-block-start\");\r\n    style.delete(\"margin-block-end\");\r\n    style.delete(\"margin-inline-start\");\r\n    style.delete(\"margin-inline-end\");\r\n    style.set(\"box-sizing\", [\"border-box\", \"\"]);\r\n  }\r\n  if (style.get(\"background-clip\")?.[0] === \"text\") {\r\n    cloned.classList.add(\"______background-clip--text\");\r\n  }\r\n  if (IN_CHROME) {\r\n    if (!style.has(\"font-kerning\"))\r\n      style.set(\"font-kerning\", [\"normal\", \"\"]);\r\n    if ((style.get(\"overflow-x\")?.[0] === \"hidden\" || style.get(\"overflow-y\")?.[0] === \"hidden\") && style.get(\"text-overflow\")?.[0] === \"ellipsis\" && node.scrollWidth === node.clientWidth) {\r\n      style.set(\"text-overflow\", [\"clip\", \"\"]);\r\n    }\r\n  }\r\n  for (let len = clonedStyle.length, i = 0; i < len; i++) {\r\n    clonedStyle.removeProperty(clonedStyle.item(i));\r\n  }\r\n  style.forEach(([value, priority], name) => {\r\n    clonedStyle.setProperty(name, value, priority);\r\n  });\r\n  return style;\r\n}\r\n\r\nfunction copyInputValue(node, cloned) {\r\n  if (isTextareaElement(node) || isInputElement(node) || isSelectElement(node)) {\r\n    cloned.setAttribute(\"value\", node.value);\r\n  }\r\n}\r\n\r\nconst pseudoClasses = [\r\n  \":before\",\r\n  \":after\"\r\n  // ':placeholder', TODO\r\n];\r\nconst scrollbarPseudoClasses = [\r\n  \":-webkit-scrollbar\",\r\n  \":-webkit-scrollbar-button\",\r\n  // ':-webkit-scrollbar:horizontal', TODO\r\n  \":-webkit-scrollbar-thumb\",\r\n  \":-webkit-scrollbar-track\",\r\n  \":-webkit-scrollbar-track-piece\",\r\n  // ':-webkit-scrollbar:vertical', TODO\r\n  \":-webkit-scrollbar-corner\",\r\n  \":-webkit-resizer\"\r\n];\r\nfunction copyPseudoClass(node, cloned, copyScrollbar, context, addWordToFontFamilies) {\r\n  const { ownerWindow, svgStyleElement, svgStyles, currentNodeStyle } = context;\r\n  if (!svgStyleElement || !ownerWindow)\r\n    return;\r\n  function copyBy(pseudoClass) {\r\n    const computedStyle = ownerWindow.getComputedStyle(node, pseudoClass);\r\n    let content = computedStyle.getPropertyValue(\"content\");\r\n    if (!content || content === \"none\")\r\n      return;\r\n    addWordToFontFamilies?.(content);\r\n    content = content.replace(/(')|(\")|(counter\\(.+\\))/g, \"\");\r\n    const klasses = [uuid()];\r\n    const defaultStyle = getDefaultStyle(node, pseudoClass, context);\r\n    currentNodeStyle?.forEach((_, key) => {\r\n      defaultStyle.delete(key);\r\n    });\r\n    const style = getDiffStyle(computedStyle, defaultStyle, context.includeStyleProperties);\r\n    style.delete(\"content\");\r\n    style.delete(\"-webkit-locale\");\r\n    if (style.get(\"background-clip\")?.[0] === \"text\") {\r\n      cloned.classList.add(\"______background-clip--text\");\r\n    }\r\n    const cloneStyle = [\r\n      `content: '${content}';`\r\n    ];\r\n    style.forEach(([value, priority], name) => {\r\n      cloneStyle.push(`${name}: ${value}${priority ? \" !important\" : \"\"};`);\r\n    });\r\n    if (cloneStyle.length === 1)\r\n      return;\r\n    try {\r\n      cloned.className = [cloned.className, ...klasses].join(\" \");\r\n    } catch (err) {\r\n      context.log.warn(\"Failed to copyPseudoClass\", err);\r\n      return;\r\n    }\r\n    const cssText = cloneStyle.join(\"\\n  \");\r\n    let allClasses = svgStyles.get(cssText);\r\n    if (!allClasses) {\r\n      allClasses = [];\r\n      svgStyles.set(cssText, allClasses);\r\n    }\r\n    allClasses.push(`.${klasses[0]}:${pseudoClass}`);\r\n  }\r\n  pseudoClasses.forEach(copyBy);\r\n  if (copyScrollbar)\r\n    scrollbarPseudoClasses.forEach(copyBy);\r\n}\r\n\r\nconst excludeParentNodes = /* @__PURE__ */ new Set([\r\n  \"symbol\"\r\n  // test/fixtures/svg.symbol.html\r\n]);\r\nasync function appendChildNode(node, cloned, child, context, addWordToFontFamilies) {\r\n  if (isElementNode(child) && (isStyleElement(child) || isScriptElement(child)))\r\n    return;\r\n  if (context.filter && !context.filter(child))\r\n    return;\r\n  if (excludeParentNodes.has(cloned.nodeName) || excludeParentNodes.has(child.nodeName)) {\r\n    context.currentParentNodeStyle = void 0;\r\n  } else {\r\n    context.currentParentNodeStyle = context.currentNodeStyle;\r\n  }\r\n  const childCloned = await cloneNode(child, context, false, addWordToFontFamilies);\r\n  if (context.isEnable(\"restoreScrollPosition\")) {\r\n    restoreScrollPosition(node, childCloned);\r\n  }\r\n  cloned.appendChild(childCloned);\r\n}\r\nasync function cloneChildNodes(node, cloned, context, addWordToFontFamilies) {\r\n  let firstChild = node.firstChild;\r\n  if (isElementNode(node)) {\r\n    if (node.shadowRoot) {\r\n      firstChild = node.shadowRoot?.firstChild;\r\n      context.shadowRoots.push(node.shadowRoot);\r\n    }\r\n  }\r\n  for (let child = firstChild; child; child = child.nextSibling) {\r\n    if (isCommentNode(child))\r\n      continue;\r\n    if (isElementNode(child) && isSlotElement(child) && typeof child.assignedNodes === \"function\") {\r\n      const nodes = child.assignedNodes();\r\n      for (let i = 0; i < nodes.length; i++) {\r\n        await appendChildNode(node, cloned, nodes[i], context, addWordToFontFamilies);\r\n      }\r\n    } else {\r\n      await appendChildNode(node, cloned, child, context, addWordToFontFamilies);\r\n    }\r\n  }\r\n}\r\nfunction restoreScrollPosition(node, chlidCloned) {\r\n  if (!isHTMLElementNode(node) || !isHTMLElementNode(chlidCloned))\r\n    return;\r\n  const { scrollTop, scrollLeft } = node;\r\n  if (!scrollTop && !scrollLeft) {\r\n    return;\r\n  }\r\n  const { transform } = chlidCloned.style;\r\n  const matrix = new DOMMatrix(transform);\r\n  const { a, b, c, d } = matrix;\r\n  matrix.a = 1;\r\n  matrix.b = 0;\r\n  matrix.c = 0;\r\n  matrix.d = 1;\r\n  matrix.translateSelf(-scrollLeft, -scrollTop);\r\n  matrix.a = a;\r\n  matrix.b = b;\r\n  matrix.c = c;\r\n  matrix.d = d;\r\n  chlidCloned.style.transform = matrix.toString();\r\n}\r\nfunction applyCssStyleWithOptions(cloned, context) {\r\n  const { backgroundColor, width, height, style: styles } = context;\r\n  const clonedStyle = cloned.style;\r\n  if (backgroundColor)\r\n    clonedStyle.setProperty(\"background-color\", backgroundColor, \"important\");\r\n  if (width)\r\n    clonedStyle.setProperty(\"width\", `${width}px`, \"important\");\r\n  if (height)\r\n    clonedStyle.setProperty(\"height\", `${height}px`, \"important\");\r\n  if (styles) {\r\n    for (const name in styles) clonedStyle[name] = styles[name];\r\n  }\r\n}\r\nconst NORMAL_ATTRIBUTE_RE = /^[\\w-:]+$/;\r\nasync function cloneNode(node, context, isRoot = false, addWordToFontFamilies) {\r\n  const { ownerDocument, ownerWindow, fontFamilies, onCloneEachNode } = context;\r\n  if (ownerDocument && isTextNode(node)) {\r\n    if (addWordToFontFamilies && /\\S/.test(node.data)) {\r\n      addWordToFontFamilies(node.data);\r\n    }\r\n    return ownerDocument.createTextNode(node.data);\r\n  }\r\n  if (ownerDocument && ownerWindow && isElementNode(node) && (isHTMLElementNode(node) || isSVGElementNode(node))) {\r\n    const cloned2 = await cloneElement(node, context);\r\n    if (context.isEnable(\"removeAbnormalAttributes\")) {\r\n      const names = cloned2.getAttributeNames();\r\n      for (let len = names.length, i = 0; i < len; i++) {\r\n        const name = names[i];\r\n        if (!NORMAL_ATTRIBUTE_RE.test(name)) {\r\n          cloned2.removeAttribute(name);\r\n        }\r\n      }\r\n    }\r\n    const style = context.currentNodeStyle = copyCssStyles(node, cloned2, isRoot, context);\r\n    if (isRoot)\r\n      applyCssStyleWithOptions(cloned2, context);\r\n    let copyScrollbar = false;\r\n    if (context.isEnable(\"copyScrollbar\")) {\r\n      const overflow = [\r\n        style.get(\"overflow-x\")?.[0],\r\n        style.get(\"overflow-y\")?.[0]\r\n      ];\r\n      copyScrollbar = overflow.includes(\"scroll\") || (overflow.includes(\"auto\") || overflow.includes(\"overlay\")) && (node.scrollHeight > node.clientHeight || node.scrollWidth > node.clientWidth);\r\n    }\r\n    const textTransform = style.get(\"text-transform\")?.[0];\r\n    const families = splitFontFamily(style.get(\"font-family\")?.[0]);\r\n    const addWordToFontFamilies2 = families ? (word) => {\r\n      if (textTransform === \"uppercase\") {\r\n        word = word.toUpperCase();\r\n      } else if (textTransform === \"lowercase\") {\r\n        word = word.toLowerCase();\r\n      } else if (textTransform === \"capitalize\") {\r\n        word = word[0].toUpperCase() + word.substring(1);\r\n      }\r\n      families.forEach((family) => {\r\n        let fontFamily = fontFamilies.get(family);\r\n        if (!fontFamily) {\r\n          fontFamilies.set(family, fontFamily = /* @__PURE__ */ new Set());\r\n        }\r\n        word.split(\"\").forEach((text) => fontFamily.add(text));\r\n      });\r\n    } : void 0;\r\n    copyPseudoClass(\r\n      node,\r\n      cloned2,\r\n      copyScrollbar,\r\n      context,\r\n      addWordToFontFamilies2\r\n    );\r\n    copyInputValue(node, cloned2);\r\n    if (!isVideoElement(node)) {\r\n      await cloneChildNodes(\r\n        node,\r\n        cloned2,\r\n        context,\r\n        addWordToFontFamilies2\r\n      );\r\n    }\r\n    await onCloneEachNode?.(cloned2);\r\n    return cloned2;\r\n  }\r\n  const cloned = node.cloneNode(false);\r\n  await cloneChildNodes(node, cloned, context);\r\n  await onCloneEachNode?.(cloned);\r\n  return cloned;\r\n}\r\n\r\nfunction destroyContext(context) {\r\n  context.ownerDocument = void 0;\r\n  context.ownerWindow = void 0;\r\n  context.svgStyleElement = void 0;\r\n  context.svgDefsElement = void 0;\r\n  context.svgStyles.clear();\r\n  context.defaultComputedStyles.clear();\r\n  if (context.sandbox) {\r\n    try {\r\n      context.sandbox.remove();\r\n    } catch (err) {\r\n      context.log.warn(\"Failed to destroyContext\", err);\r\n    }\r\n    context.sandbox = void 0;\r\n  }\r\n  context.workers = [];\r\n  context.fontFamilies.clear();\r\n  context.fontCssTexts.clear();\r\n  context.requests.clear();\r\n  context.tasks = [];\r\n  context.shadowRoots = [];\r\n}\r\n\r\nfunction baseFetch(options) {\r\n  const { url, timeout, responseType, ...requestInit } = options;\r\n  const controller = new AbortController();\r\n  const timer = timeout ? setTimeout(() => controller.abort(), timeout) : void 0;\r\n  return fetch(url, { signal: controller.signal, ...requestInit }).then((response) => {\r\n    if (!response.ok) {\r\n      throw new Error(\"Failed fetch, not 2xx response\", { cause: response });\r\n    }\r\n    switch (responseType) {\r\n      case \"arrayBuffer\":\r\n        return response.arrayBuffer();\r\n      case \"dataUrl\":\r\n        return response.blob().then(blobToDataUrl);\r\n      case \"text\":\r\n      default:\r\n        return response.text();\r\n    }\r\n  }).finally(() => clearTimeout(timer));\r\n}\r\nfunction contextFetch(context, options) {\r\n  const { url: rawUrl, requestType = \"text\", responseType = \"text\", imageDom } = options;\r\n  let url = rawUrl;\r\n  const {\r\n    timeout,\r\n    acceptOfImage,\r\n    requests,\r\n    fetchFn,\r\n    fetch: {\r\n      requestInit,\r\n      bypassingCache,\r\n      placeholderImage\r\n    },\r\n    font,\r\n    workers,\r\n    fontFamilies\r\n  } = context;\r\n  if (requestType === \"image\" && (IN_SAFARI || IN_FIREFOX)) {\r\n    context.drawImageCount++;\r\n  }\r\n  let request = requests.get(rawUrl);\r\n  if (!request) {\r\n    if (bypassingCache) {\r\n      if (bypassingCache instanceof RegExp && bypassingCache.test(url)) {\r\n        url += (/\\?/.test(url) ? \"&\" : \"?\") + (/* @__PURE__ */ new Date()).getTime();\r\n      }\r\n    }\r\n    const canFontMinify = requestType.startsWith(\"font\") && font && font.minify;\r\n    const fontTexts = /* @__PURE__ */ new Set();\r\n    if (canFontMinify) {\r\n      const families = requestType.split(\";\")[1].split(\",\");\r\n      families.forEach((family) => {\r\n        if (!fontFamilies.has(family))\r\n          return;\r\n        fontFamilies.get(family).forEach((text) => fontTexts.add(text));\r\n      });\r\n    }\r\n    const needFontMinify = canFontMinify && fontTexts.size;\r\n    const baseFetchOptions = {\r\n      url,\r\n      timeout,\r\n      responseType: needFontMinify ? \"arrayBuffer\" : responseType,\r\n      headers: requestType === \"image\" ? { accept: acceptOfImage } : void 0,\r\n      ...requestInit\r\n    };\r\n    request = {\r\n      type: requestType,\r\n      resolve: void 0,\r\n      reject: void 0,\r\n      response: null\r\n    };\r\n    request.response = (async () => {\r\n      if (fetchFn && requestType === \"image\") {\r\n        const result = await fetchFn(rawUrl);\r\n        if (result)\r\n          return result;\r\n      }\r\n      if (!IN_SAFARI && rawUrl.startsWith(\"http\") && workers.length) {\r\n        return new Promise((resolve, reject) => {\r\n          const worker = workers[requests.size & workers.length - 1];\r\n          worker.postMessage({ rawUrl, ...baseFetchOptions });\r\n          request.resolve = resolve;\r\n          request.reject = reject;\r\n        });\r\n      }\r\n      return baseFetch(baseFetchOptions);\r\n    })().catch((error) => {\r\n      requests.delete(rawUrl);\r\n      if (requestType === \"image\" && placeholderImage) {\r\n        context.log.warn(\"Failed to fetch image base64, trying to use placeholder image\", url);\r\n        return typeof placeholderImage === \"string\" ? placeholderImage : placeholderImage(imageDom);\r\n      }\r\n      throw error;\r\n    });\r\n    requests.set(rawUrl, request);\r\n  }\r\n  return request.response;\r\n}\r\n\r\nasync function replaceCssUrlToDataUrl(cssText, baseUrl, context, isImage) {\r\n  if (!hasCssUrl(cssText))\r\n    return cssText;\r\n  for (const [rawUrl, url] of parseCssUrls(cssText, baseUrl)) {\r\n    try {\r\n      const dataUrl = await contextFetch(\r\n        context,\r\n        {\r\n          url,\r\n          requestType: isImage ? \"image\" : \"text\",\r\n          responseType: \"dataUrl\"\r\n        }\r\n      );\r\n      cssText = cssText.replace(toRE(rawUrl), `$1${dataUrl}$3`);\r\n    } catch (error) {\r\n      context.log.warn(\"Failed to fetch css data url\", rawUrl, error);\r\n    }\r\n  }\r\n  return cssText;\r\n}\r\nfunction hasCssUrl(cssText) {\r\n  return /url\\((['\"]?)([^'\"]+?)\\1\\)/.test(cssText);\r\n}\r\nconst URL_RE = /url\\((['\"]?)([^'\"]+?)\\1\\)/g;\r\nfunction parseCssUrls(cssText, baseUrl) {\r\n  const result = [];\r\n  cssText.replace(URL_RE, (raw, quotation, url) => {\r\n    result.push([url, resolveUrl(url, baseUrl)]);\r\n    return raw;\r\n  });\r\n  return result.filter(([url]) => !isDataUrl(url));\r\n}\r\nfunction toRE(url) {\r\n  const escaped = url.replace(/([.*+?^${}()|\\[\\]\\/\\\\])/g, \"\\\\$1\");\r\n  return new RegExp(`(url\\\\(['\"]?)(${escaped})(['\"]?\\\\))`, \"g\");\r\n}\r\n\r\nconst properties = [\r\n  \"background-image\",\r\n  \"border-image-source\",\r\n  \"-webkit-border-image\",\r\n  \"-webkit-mask-image\",\r\n  \"list-style-image\"\r\n];\r\nfunction embedCssStyleImage(style, context) {\r\n  return properties.map((property) => {\r\n    const value = style.getPropertyValue(property);\r\n    if (!value || value === \"none\") {\r\n      return null;\r\n    }\r\n    if (IN_SAFARI || IN_FIREFOX) {\r\n      context.drawImageCount++;\r\n    }\r\n    return replaceCssUrlToDataUrl(value, null, context, true).then((newValue) => {\r\n      if (!newValue || value === newValue)\r\n        return;\r\n      style.setProperty(\r\n        property,\r\n        newValue,\r\n        style.getPropertyPriority(property)\r\n      );\r\n    });\r\n  }).filter(Boolean);\r\n}\r\n\r\nfunction embedImageElement(cloned, context) {\r\n  if (isImageElement(cloned)) {\r\n    const originalSrc = cloned.currentSrc || cloned.src;\r\n    if (!isDataUrl(originalSrc)) {\r\n      return [\r\n        contextFetch(context, {\r\n          url: originalSrc,\r\n          imageDom: cloned,\r\n          requestType: \"image\",\r\n          responseType: \"dataUrl\"\r\n        }).then((url) => {\r\n          if (!url)\r\n            return;\r\n          cloned.srcset = \"\";\r\n          cloned.dataset.originalSrc = originalSrc;\r\n          cloned.src = url || \"\";\r\n        })\r\n      ];\r\n    }\r\n    if (IN_SAFARI || IN_FIREFOX) {\r\n      context.drawImageCount++;\r\n    }\r\n  } else if (isSVGElementNode(cloned) && !isDataUrl(cloned.href.baseVal)) {\r\n    const originalSrc = cloned.href.baseVal;\r\n    return [\r\n      contextFetch(context, {\r\n        url: originalSrc,\r\n        imageDom: cloned,\r\n        requestType: \"image\",\r\n        responseType: \"dataUrl\"\r\n      }).then((url) => {\r\n        if (!url)\r\n          return;\r\n        cloned.dataset.originalSrc = originalSrc;\r\n        cloned.href.baseVal = url || \"\";\r\n      })\r\n    ];\r\n  }\r\n  return [];\r\n}\r\n\r\nfunction embedSvgUse(cloned, context) {\r\n  const { ownerDocument, svgDefsElement } = context;\r\n  const href = cloned.getAttribute(\"href\") ?? cloned.getAttribute(\"xlink:href\");\r\n  if (!href)\r\n    return [];\r\n  const [svgUrl, id] = href.split(\"#\");\r\n  if (id) {\r\n    const query = `#${id}`;\r\n    const definition = context.shadowRoots.reduce(\r\n      (res, root) => {\r\n        return res ?? root.querySelector(`svg ${query}`);\r\n      },\r\n      ownerDocument?.querySelector(`svg ${query}`)\r\n    );\r\n    if (svgUrl) {\r\n      cloned.setAttribute(\"href\", query);\r\n    }\r\n    if (svgDefsElement?.querySelector(query))\r\n      return [];\r\n    if (definition) {\r\n      svgDefsElement?.appendChild(definition.cloneNode(true));\r\n      return [];\r\n    } else if (svgUrl) {\r\n      return [\r\n        contextFetch(context, {\r\n          url: svgUrl,\r\n          responseType: \"text\"\r\n        }).then((svgData) => {\r\n          svgDefsElement?.insertAdjacentHTML(\"beforeend\", svgData);\r\n        })\r\n      ];\r\n    }\r\n  }\r\n  return [];\r\n}\r\n\r\nfunction embedNode(cloned, context) {\r\n  const { tasks } = context;\r\n  if (isElementNode(cloned)) {\r\n    if (isImageElement(cloned) || isSVGImageElementNode(cloned)) {\r\n      tasks.push(...embedImageElement(cloned, context));\r\n    }\r\n    if (isSVGUseElementNode(cloned)) {\r\n      tasks.push(...embedSvgUse(cloned, context));\r\n    }\r\n  }\r\n  if (isHTMLElementNode(cloned)) {\r\n    tasks.push(...embedCssStyleImage(cloned.style, context));\r\n  }\r\n  cloned.childNodes.forEach((child) => {\r\n    embedNode(child, context);\r\n  });\r\n}\r\n\r\nasync function embedWebFont(clone, context) {\r\n  const {\r\n    ownerDocument,\r\n    svgStyleElement,\r\n    fontFamilies,\r\n    fontCssTexts,\r\n    tasks,\r\n    font\r\n  } = context;\r\n  if (!ownerDocument || !svgStyleElement || !fontFamilies.size) {\r\n    return;\r\n  }\r\n  if (font && font.cssText) {\r\n    const cssText = filterPreferredFormat(font.cssText, context);\r\n    svgStyleElement.appendChild(ownerDocument.createTextNode(`${cssText}\r\n`));\r\n  } else {\r\n    const styleSheets = Array.from(ownerDocument.styleSheets).filter((styleSheet) => {\r\n      try {\r\n        return \"cssRules\" in styleSheet && Boolean(styleSheet.cssRules.length);\r\n      } catch (error) {\r\n        context.log.warn(`Error while reading CSS rules from ${styleSheet.href}`, error);\r\n        return false;\r\n      }\r\n    });\r\n    await Promise.all(\r\n      styleSheets.flatMap((styleSheet) => {\r\n        return Array.from(styleSheet.cssRules).map(async (cssRule, index) => {\r\n          if (isCSSImportRule(cssRule)) {\r\n            let importIndex = index + 1;\r\n            const baseUrl = cssRule.href;\r\n            let cssText = \"\";\r\n            try {\r\n              cssText = await contextFetch(context, {\r\n                url: baseUrl,\r\n                requestType: \"text\",\r\n                responseType: \"text\"\r\n              });\r\n            } catch (error) {\r\n              context.log.warn(`Error fetch remote css import from ${baseUrl}`, error);\r\n            }\r\n            const replacedCssText = cssText.replace(\r\n              URL_RE,\r\n              (raw, quotation, url) => raw.replace(url, resolveUrl(url, baseUrl))\r\n            );\r\n            for (const rule of parseCss(replacedCssText)) {\r\n              try {\r\n                styleSheet.insertRule(\r\n                  rule,\r\n                  rule.startsWith(\"@import\") ? importIndex += 1 : styleSheet.cssRules.length\r\n                );\r\n              } catch (error) {\r\n                context.log.warn(\"Error inserting rule from remote css import\", { rule, error });\r\n              }\r\n            }\r\n          }\r\n        });\r\n      })\r\n    );\r\n    const cssRules = styleSheets.flatMap((styleSheet) => Array.from(styleSheet.cssRules));\r\n    cssRules.filter((cssRule) => isCssFontFaceRule(cssRule) && hasCssUrl(cssRule.style.getPropertyValue(\"src\")) && splitFontFamily(cssRule.style.getPropertyValue(\"font-family\"))?.some((val) => fontFamilies.has(val))).forEach((value) => {\r\n      const rule = value;\r\n      const cssText = fontCssTexts.get(rule.cssText);\r\n      if (cssText) {\r\n        svgStyleElement.appendChild(ownerDocument.createTextNode(`${cssText}\r\n`));\r\n      } else {\r\n        tasks.push(\r\n          replaceCssUrlToDataUrl(\r\n            rule.cssText,\r\n            rule.parentStyleSheet ? rule.parentStyleSheet.href : null,\r\n            context\r\n          ).then((cssText2) => {\r\n            cssText2 = filterPreferredFormat(cssText2, context);\r\n            fontCssTexts.set(rule.cssText, cssText2);\r\n            svgStyleElement.appendChild(ownerDocument.createTextNode(`${cssText2}\r\n`));\r\n          })\r\n        );\r\n      }\r\n    });\r\n  }\r\n}\r\nconst COMMENTS_RE = /(\\/\\*[\\s\\S]*?\\*\\/)/g;\r\nconst KEYFRAMES_RE = /((@.*?keyframes [\\s\\S]*?){([\\s\\S]*?}\\s*?)})/gi;\r\nfunction parseCss(source) {\r\n  if (source == null)\r\n    return [];\r\n  const result = [];\r\n  let cssText = source.replace(COMMENTS_RE, \"\");\r\n  while (true) {\r\n    const matches = KEYFRAMES_RE.exec(cssText);\r\n    if (!matches)\r\n      break;\r\n    result.push(matches[0]);\r\n  }\r\n  cssText = cssText.replace(KEYFRAMES_RE, \"\");\r\n  const IMPORT_RE = /@import[\\s\\S]*?url\\([^)]*\\)[\\s\\S]*?;/gi;\r\n  const UNIFIED_RE = new RegExp(\r\n    // eslint-disable-next-line\r\n    \"((\\\\s*?(?:\\\\/\\\\*[\\\\s\\\\S]*?\\\\*\\\\/)?\\\\s*?@media[\\\\s\\\\S]*?){([\\\\s\\\\S]*?)}\\\\s*?})|(([\\\\s\\\\S]*?){([\\\\s\\\\S]*?)})\",\r\n    \"gi\"\r\n  );\r\n  while (true) {\r\n    let matches = IMPORT_RE.exec(cssText);\r\n    if (!matches) {\r\n      matches = UNIFIED_RE.exec(cssText);\r\n      if (!matches) {\r\n        break;\r\n      } else {\r\n        IMPORT_RE.lastIndex = UNIFIED_RE.lastIndex;\r\n      }\r\n    } else {\r\n      UNIFIED_RE.lastIndex = IMPORT_RE.lastIndex;\r\n    }\r\n    result.push(matches[0]);\r\n  }\r\n  return result;\r\n}\r\nconst URL_WITH_FORMAT_RE = /url\\([^)]+\\)\\s*format\\(([\"']?)([^\"']+)\\1\\)/g;\r\nconst FONT_SRC_RE = /src:\\s*(?:url\\([^)]+\\)\\s*format\\([^)]+\\)[,;]\\s*)+/g;\r\nfunction filterPreferredFormat(str, context) {\r\n  const { font } = context;\r\n  const preferredFormat = font ? font?.preferredFormat : void 0;\r\n  return preferredFormat ? str.replace(FONT_SRC_RE, (match) => {\r\n    while (true) {\r\n      const [src, , format] = URL_WITH_FORMAT_RE.exec(match) || [];\r\n      if (!format)\r\n        return \"\";\r\n      if (format === preferredFormat)\r\n        return `src: ${src};`;\r\n    }\r\n  }) : str;\r\n}\r\n\r\nasync function domToForeignObjectSvg(node, options) {\r\n  const context = await orCreateContext(node, options);\r\n  if (isElementNode(context.node) && isSVGElementNode(context.node))\r\n    return context.node;\r\n  const {\r\n    ownerDocument,\r\n    log,\r\n    tasks,\r\n    svgStyleElement,\r\n    svgDefsElement,\r\n    svgStyles,\r\n    font,\r\n    progress,\r\n    autoDestruct,\r\n    onCloneNode,\r\n    onEmbedNode,\r\n    onCreateForeignObjectSvg\r\n  } = context;\r\n  log.time(\"clone node\");\r\n  const clone = await cloneNode(context.node, context, true);\r\n  if (svgStyleElement && ownerDocument) {\r\n    let allCssText = \"\";\r\n    svgStyles.forEach((klasses, cssText) => {\r\n      allCssText += `${klasses.join(\",\\n\")} {\r\n  ${cssText}\r\n}\r\n`;\r\n    });\r\n    svgStyleElement.appendChild(ownerDocument.createTextNode(allCssText));\r\n  }\r\n  log.timeEnd(\"clone node\");\r\n  await onCloneNode?.(clone);\r\n  if (font !== false && isElementNode(clone)) {\r\n    log.time(\"embed web font\");\r\n    await embedWebFont(clone, context);\r\n    log.timeEnd(\"embed web font\");\r\n  }\r\n  log.time(\"embed node\");\r\n  embedNode(clone, context);\r\n  const count = tasks.length;\r\n  let current = 0;\r\n  const runTask = async () => {\r\n    while (true) {\r\n      const task = tasks.pop();\r\n      if (!task)\r\n        break;\r\n      try {\r\n        await task;\r\n      } catch (error) {\r\n        context.log.warn(\"Failed to run task\", error);\r\n      }\r\n      progress?.(++current, count);\r\n    }\r\n  };\r\n  progress?.(current, count);\r\n  await Promise.all([...Array.from({ length: 4 })].map(runTask));\r\n  log.timeEnd(\"embed node\");\r\n  await onEmbedNode?.(clone);\r\n  const svg = createForeignObjectSvg(clone, context);\r\n  svgDefsElement && svg.insertBefore(svgDefsElement, svg.children[0]);\r\n  svgStyleElement && svg.insertBefore(svgStyleElement, svg.children[0]);\r\n  autoDestruct && destroyContext(context);\r\n  await onCreateForeignObjectSvg?.(svg);\r\n  return svg;\r\n}\r\nfunction createForeignObjectSvg(clone, context) {\r\n  const { width, height } = context;\r\n  const svg = createSvg(width, height, clone.ownerDocument);\r\n  const foreignObject = svg.ownerDocument.createElementNS(svg.namespaceURI, \"foreignObject\");\r\n  foreignObject.setAttributeNS(null, \"x\", \"0%\");\r\n  foreignObject.setAttributeNS(null, \"y\", \"0%\");\r\n  foreignObject.setAttributeNS(null, \"width\", \"100%\");\r\n  foreignObject.setAttributeNS(null, \"height\", \"100%\");\r\n  foreignObject.append(clone);\r\n  svg.appendChild(foreignObject);\r\n  return svg;\r\n}\r\n\r\nasync function domToCanvas(node, options) {\r\n  const context = await orCreateContext(node, options);\r\n  const svg = await domToForeignObjectSvg(context);\r\n  const dataUrl = svgToDataUrl(svg, context.isEnable(\"removeControlCharacter\"));\r\n  if (!context.autoDestruct) {\r\n    context.svgStyleElement = createStyleElement(context.ownerDocument);\r\n    context.svgDefsElement = context.ownerDocument?.createElementNS(XMLNS, \"defs\");\r\n    context.svgStyles.clear();\r\n  }\r\n  const image = createImage(dataUrl, svg.ownerDocument);\r\n  return await imageToCanvas(image, context);\r\n}\r\n\r\nasync function domToBlob(node, options) {\r\n  const context = await orCreateContext(node, options);\r\n  const { log, type, quality, dpi } = context;\r\n  const canvas = await domToCanvas(context);\r\n  log.time(\"canvas to blob\");\r\n  const blob = await canvasToBlob(canvas, type, quality);\r\n  if ([\"image/png\", \"image/jpeg\"].includes(type) && dpi) {\r\n    const arrayBuffer = await blobToArrayBuffer(blob.slice(0, 33));\r\n    let uint8Array = new Uint8Array(arrayBuffer);\r\n    if (type === \"image/png\") {\r\n      uint8Array = changePngDpi(uint8Array, dpi);\r\n    } else if (type === \"image/jpeg\") {\r\n      uint8Array = changeJpegDpi(uint8Array, dpi);\r\n    }\r\n    log.timeEnd(\"canvas to blob\");\r\n    return new Blob([uint8Array, blob.slice(33)], { type });\r\n  }\r\n  log.timeEnd(\"canvas to blob\");\r\n  return blob;\r\n}\r\n\r\nasync function domToDataUrl(node, options) {\r\n  const context = await orCreateContext(node, options);\r\n  const { log, quality, type, dpi } = context;\r\n  const canvas = await domToCanvas(context);\r\n  log.time(\"canvas to data url\");\r\n  let dataUrl = canvas.toDataURL(type, quality);\r\n  if ([\"image/png\", \"image/jpeg\"].includes(type) && dpi && SUPPORT_ATOB && SUPPORT_BTOA) {\r\n    const [format, body] = dataUrl.split(\",\");\r\n    let headerLength = 0;\r\n    let overwritepHYs = false;\r\n    if (type === \"image/png\") {\r\n      const b64Index = detectPhysChunkFromDataUrl(body);\r\n      if (b64Index >= 0) {\r\n        headerLength = Math.ceil((b64Index + 28) / 3) * 4;\r\n        overwritepHYs = true;\r\n      } else {\r\n        headerLength = 33 / 3 * 4;\r\n      }\r\n    } else if (type === \"image/jpeg\") {\r\n      headerLength = 18 / 3 * 4;\r\n    }\r\n    const stringHeader = body.substring(0, headerLength);\r\n    const restOfData = body.substring(headerLength);\r\n    const headerBytes = window.atob(stringHeader);\r\n    const uint8Array = new Uint8Array(headerBytes.length);\r\n    for (let i = 0; i < uint8Array.length; i++) {\r\n      uint8Array[i] = headerBytes.charCodeAt(i);\r\n    }\r\n    const finalArray = type === \"image/png\" ? changePngDpi(uint8Array, dpi, overwritepHYs) : changeJpegDpi(uint8Array, dpi);\r\n    const base64Header = window.btoa(String.fromCharCode(...finalArray));\r\n    dataUrl = [format, \",\", base64Header, restOfData].join(\"\");\r\n  }\r\n  log.timeEnd(\"canvas to data url\");\r\n  return dataUrl;\r\n}\r\n\r\nasync function domToSvg(node, options) {\r\n  const context = await orCreateContext(node, options);\r\n  const { width, height, ownerDocument } = context;\r\n  const dataUrl = await domToDataUrl(context);\r\n  const svg = createSvg(width, height, ownerDocument);\r\n  const svgImage = svg.ownerDocument.createElementNS(svg.namespaceURI, \"image\");\r\n  svgImage.setAttributeNS(null, \"href\", dataUrl);\r\n  svgImage.setAttributeNS(null, \"height\", \"100%\");\r\n  svgImage.setAttributeNS(null, \"width\", \"100%\");\r\n  svg.appendChild(svgImage);\r\n  return svgToDataUrl(svg, context.isEnable(\"removeControlCharacter\"));\r\n}\r\n\r\nasync function domToImage(node, options) {\r\n  const context = await orCreateContext(node, options);\r\n  const { ownerDocument, width, height, scale, type } = context;\r\n  const url = type === \"image/svg+xml\" ? await domToSvg(context) : await domToDataUrl(context);\r\n  const image = createImage(url, ownerDocument);\r\n  image.width = Math.floor(width * scale);\r\n  image.height = Math.floor(height * scale);\r\n  image.style.width = `${width}px`;\r\n  image.style.height = `${height}px`;\r\n  return image;\r\n}\r\n\r\nasync function domToJpeg(node, options) {\r\n  return domToDataUrl(\r\n    await orCreateContext(node, { ...options, type: \"image/jpeg\" })\r\n  );\r\n}\r\n\r\nasync function domToPixel(node, options) {\r\n  const context = await orCreateContext(node, options);\r\n  const canvas = await domToCanvas(context);\r\n  return canvas.getContext(\"2d\").getImageData(0, 0, canvas.width, canvas.height).data;\r\n}\r\n\r\nasync function domToPng(node, options) {\r\n  return domToDataUrl(\r\n    await orCreateContext(node, { ...options, type: \"image/png\" })\r\n  );\r\n}\r\n\r\nasync function domToWebp(node, options) {\r\n  return domToDataUrl(\r\n    await orCreateContext(node, { ...options, type: \"image/webp\" })\r\n  );\r\n}\r\n\r\nexport { createContext, destroyContext, domToBlob, domToCanvas, domToDataUrl, domToForeignObjectSvg, domToImage, domToJpeg, domToPixel, domToPng, domToSvg, domToWebp, loadMedia, waitUntilLoad };\r\n"],
  "mappings": "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",
  "names": ["_a", "_b"]
}
