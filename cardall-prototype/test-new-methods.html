<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>测试新增方法</title>
</head>
<body>
    <h1>测试 UniversalStorageAdapter 新增方法</h1>
    <div id="results"></div>

    <script type="module">
        import { UniversalStorageAdapter } from './src/services/universal-storage-adapter.js'

        const adapter = new UniversalStorageAdapter()
        const results = document.getElementById('results')

        function log(message) {
            const div = document.createElement('div')
            div.textContent = `${new Date().toLocaleTimeString()}: ${message}`
            results.appendChild(div)
            console.log(message)
        }

        async function testMethods() {
            log('开始测试新增方法...')

            try {
                // 测试 isIndexedDBAvailable
                log('测试 isIndexedDBAvailable...')
                const isAvailable = await adapter.isIndexedDBAvailable()
                log(`IndexedDB 可用性: ${isAvailable}`)

                // 测试 hasIndexedDBData
                log('测试 hasIndexedDBData...')
                const hasData = await adapter.hasIndexedDBData()
                log(`IndexedDB 数据存在: ${hasData}`)

                log('✅ 所有测试完成!')

            } catch (error) {
                log(`❌ 测试失败: ${error.message}`)
                console.error(error)
            }
        }

        // 等待页面加载完成后执行测试
        window.addEventListener('load', testMethods)
    </script>
</body>
</html>