import{j as u,S as Zr,c as rn,u as We,a as mr,P as $e,b as pe,d as Xr,e as Nt,f as cl,g as In,h as dl,i as oa,A as fl,k as hl,R as pl,F as ml,D as gl,C as bl,l as xl,m as wp,n as yl,o as vl,p as Wt,O as Ks,q as wl,r as Hs,s as Ws,T as Vs,t as Gs,v as Cl,w as Cp,x as _p,y as _l,z as kp,B as Sp,E as kl,W as Ep,G as jp,H as Ap}from"./ui-vLvn9UMW.js";import{a as vr,r as g,b as ne,g as Sl,v as Dp,d as cu}from"./vendor-MXm4CGdz.js";import{c as Np,_ as Ja}from"./supabase-Dpl7Lpu-.js";import{N as mt,n as Tp,m as Mp,P as Pp,T as Rp,a as Fp,S as Ip,M as vs,E as Ys,e as Op,b as Lp,c as zp,D as Bp,d as wr,g as El,F as ws,u as $p,i as qp,f as Up,h as Kp,j as Hp,k as Wp,l as Vp,o as Gp}from"./editor-CxQlH2eM.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const i of a.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(o){if(o.ep)return;o.ep=!0;const a=n(o);fetch(o.href,a)}})();var Cs={},du=vr;Cs.createRoot=du.createRoot,Cs.hydrateRoot=du.hydrateRoot;const Yp=[{id:"1",frontContent:{title:"React Best Practices",text:"Key principles for writing maintainable React code including component composition, state management, and performance optimization.",images:[],tags:["react","frontend","best-practices"],lastModified:new Date},backContent:{title:"Implementation Details",text:"Use functional components with hooks, implement proper error boundaries, optimize with React.memo and useMemo for expensive calculations.",images:[],tags:["react","frontend","best-practices"],lastModified:new Date},style:{type:"solid",backgroundColor:"#f8fafc",fontFamily:"system-ui",fontSize:"base",fontWeight:"normal",textColor:"#1f2937",borderRadius:"xl",shadow:"md",borderWidth:0},isFlipped:!1,createdAt:new Date("2024-01-15"),updatedAt:new Date("2024-01-15")},{id:"2",frontContent:{title:"TypeScript Tips",text:"Advanced TypeScript patterns for better type safety and developer experience in large applications.",images:[],tags:["typescript","types","development"],lastModified:new Date},backContent:{title:"Advanced Patterns",text:"Utility types, conditional types, mapped types, and template literal types for complex type transformations.",images:[],tags:["typescript","types","development"],lastModified:new Date},style:{type:"gradient",gradientColors:["#667eea","#764ba2"],gradientDirection:"to-br",fontFamily:"system-ui",fontSize:"base",fontWeight:"medium",textColor:"#ffffff",borderRadius:"xl",shadow:"lg",borderWidth:0},isFlipped:!1,createdAt:new Date("2024-01-16"),updatedAt:new Date("2024-01-16")}];function Zp(){const[e,t]=g.useState(Yp),[n,r]=g.useState({searchTerm:"",tags:[]}),[o,a]=g.useState({layout:"grid",cardSize:"medium",showTags:!0,showDates:!1,sortBy:"updated",sortOrder:"desc"}),[i,l]=g.useState([]),d=g.useCallback(()=>{let _=e.filter(E=>{if(n.searchTerm){const k=n.searchTerm.toLowerCase(),S=E.frontContent.title.toLowerCase().includes(k)||E.backContent.title.toLowerCase().includes(k),A=E.frontContent.text.toLowerCase().includes(k)||E.backContent.text.toLowerCase().includes(k),T=[...E.frontContent.tags,...E.backContent.tags].some($=>$.toLowerCase().includes(k));if(!S&&!A&&!T)return!1}if(n.tags.length>0){const k=[...E.frontContent.tags,...E.backContent.tags];if(!n.tags.some(S=>k.includes(S)))return!1}if(n.folderId&&E.folderId!==n.folderId)return!1;if(n.dateRange){const k=new Date(E.updatedAt);if(k<n.dateRange.start||k>n.dateRange.end)return!1}return!(n.styleType&&E.style.type!==n.styleType||n.hasImages!==void 0&&(E.frontContent.images.length>0||E.backContent.images.length>0)!==n.hasImages)});return _.sort((E,k)=>{let S=0;switch(o.sortBy){case"created":S=new Date(E.createdAt).getTime()-new Date(k.createdAt).getTime();break;case"updated":S=new Date(E.updatedAt).getTime()-new Date(k.updatedAt).getTime();break;case"title":S=E.frontContent.title.localeCompare(k.frontContent.title);break;default:S=0}return o.sortOrder==="desc"?-S:S}),_},[e,n,o]),h=g.useCallback(_=>{t(E=>{switch(_.type){case"CREATE_CARD":const k={..._.payload,id:Date.now().toString(),createdAt:new Date,updatedAt:new Date};return[...E,k];case"UPDATE_CARD":return E.map(T=>T.id===_.payload.id?{...T,..._.payload.updates,updatedAt:new Date}:T);case"DELETE_CARD":return E.filter(T=>T.id!==_.payload);case"FLIP_CARD":return E.map(T=>T.id===_.payload?{...T,isFlipped:!T.isFlipped,updatedAt:new Date}:T);case"SELECT_CARD":return l(T=>T.includes(_.payload)?T.filter($=>$!==_.payload):[...T,_.payload]),E;case"DESELECT_ALL":return l([]),E;case"DUPLICATE_CARD":const S=E.find(T=>T.id===_.payload);if(!S)return E;const A={...S,id:Date.now().toString(),createdAt:new Date,updatedAt:new Date};return[...E,A];case"MOVE_TO_FOLDER":return E.map(T=>T.id===_.payload.cardId?{...T,folderId:_.payload.folderId,updatedAt:new Date}:T);default:return E}})},[]),p=g.useCallback(_=>e.find(E=>E.id===_),[e]),y=g.useCallback(()=>e.filter(_=>i.includes(_.id)),[e,i]),v=g.useCallback(()=>{const _=new Set;return e.forEach(E=>{E.frontContent.tags.forEach(k=>_.add(k)),E.backContent.tags.forEach(k=>_.add(k))}),Array.from(_).sort()},[e]),x=g.useCallback((_,E)=>{t(k=>k.map(S=>{const A=U=>E?U.map(V=>V===_?E:V):U.filter(V=>V!==_),T=A(S.frontContent.tags),$=A(S.backContent.tags);return JSON.stringify(T)!==JSON.stringify(S.frontContent.tags)||JSON.stringify($)!==JSON.stringify(S.backContent.tags)?{...S,frontContent:{...S.frontContent,tags:T,lastModified:new Date},backContent:{...S.backContent,tags:$,lastModified:new Date},updatedAt:new Date}:S}))},[]),w=g.useCallback(_=>e.filter(E=>E.frontContent.tags.includes(_)||E.backContent.tags.includes(_)),[e]);return g.useEffect(()=>{const _=setTimeout(()=>{localStorage.setItem("cardall-cards",JSON.stringify(e))},1e3);return()=>clearTimeout(_)},[e]),g.useEffect(()=>{const _=localStorage.getItem("cardall-cards");if(_)try{const E=JSON.parse(_);t(E)}catch(E){console.error("Failed to load saved cards:",E)}},[]),{cards:d(),allCards:e,filter:n,setFilter:r,viewSettings:o,setViewSettings:a,selectedCardIds:i,dispatch:h,getCardById:p,getSelectedCards:y,getAllTags:v,updateTagsInAllCards:x,getCardsWithTag:w}}const Xp=[{id:"folder-1",name:"Development",color:"#3b82f6",icon:"Code",cardIds:["1"],isExpanded:!0,createdAt:new Date("2024-01-10"),updatedAt:new Date("2024-01-15")},{id:"folder-2",name:"Design Resources",color:"#8b5cf6",icon:"Palette",cardIds:[],isExpanded:!1,createdAt:new Date("2024-01-12"),updatedAt:new Date("2024-01-12")},{id:"folder-3",name:"Learning Notes",color:"#10b981",icon:"BookOpen",cardIds:["2"],parentId:"folder-1",isExpanded:!0,createdAt:new Date("2024-01-14"),updatedAt:new Date("2024-01-16")}];function Qp(){const[e,t]=g.useState(Xp),[n,r]=g.useState(null),o=g.useCallback(()=>{const v=e.filter(w=>!w.parentId),x=w=>w.map(_=>({..._,children:x(e.filter(E=>E.parentId===_.id))}));return x(v)},[e]),a=g.useCallback(v=>{t(x=>{switch(v.type){case"CREATE_FOLDER":const w={...v.payload,id:`folder-${Date.now()}`,cardIds:[],createdAt:new Date,updatedAt:new Date};return[...x,w];case"UPDATE_FOLDER":return x.map(E=>E.id===v.payload.id?{...E,...v.payload.updates,updatedAt:new Date}:E);case"DELETE_FOLDER":if(x.find(E=>E.id===v.payload)){const E=T=>{const $=x.filter(Y=>Y.parentId===T),U=$.map(Y=>Y.id),V=$.flatMap(Y=>E(Y.id));return[...U,...V]},k=E(v.payload),S=[v.payload,...k],A=x.filter(T=>S.includes(T.id)).flatMap(T=>T.cardIds);return"onDeleteCards"in v&&v.onDeleteCards&&A.length>0&&v.onDeleteCards(A),x.filter(T=>!S.includes(T.id))}return x.filter(E=>E.id!==v.payload);case"TOGGLE_FOLDER":return x.map(E=>E.id===v.payload?{...E,isExpanded:!E.isExpanded,updatedAt:new Date}:E);default:return x}})},[]),i=g.useCallback(v=>e.find(x=>x.id===v),[e]),l=g.useCallback(v=>{const x=[];let w=i(v);for(;w;)x.unshift(w),w=w.parentId?i(w.parentId):null;return x},[e,i]),d=g.useCallback((v,x)=>{a({type:"UPDATE_FOLDER",payload:{id:x,updates:{cardIds:[...i(x)?.cardIds||[],v]}}})},[a,i]),h=g.useCallback((v,x)=>{const w=i(x);w&&a({type:"UPDATE_FOLDER",payload:{id:x,updates:{cardIds:w.cardIds.filter(_=>_!==v)}}})},[a,i]),p=g.useCallback((v,x,w)=>{x&&h(v,x),w&&d(v,w)},[d,h]),y=g.useCallback((v,x)=>{if(v===x)return!1;let w=x;for(;w;){if(w===v)return!1;w=i(w)?.parentId??null}return!0},[i]);return g.useEffect(()=>{const v=setTimeout(()=>{localStorage.setItem("cardall-folders",JSON.stringify(e))},1e3);return()=>clearTimeout(v)},[e]),g.useEffect(()=>{const v=localStorage.getItem("cardall-folders");if(v)try{const x=JSON.parse(v);t(x)}catch(x){console.error("Failed to load saved folders:",x)}},[]),{folders:e,folderTree:o(),selectedFolderId:n,setSelectedFolderId:r,dispatch:a,getFolderById:i,getFolderPath:l,addCardToFolder:d,removeCardFromFolder:h,moveCardBetweenFolders:p,canMoveFolder:y}}const Jp=[{id:"tag-1",name:"react",color:"#3b82f6",count:1,createdAt:new Date("2024-01-15")},{id:"tag-2",name:"frontend",color:"#8b5cf6",count:1,createdAt:new Date("2024-01-15")},{id:"tag-3",name:"best-practices",color:"#10b981",count:1,createdAt:new Date("2024-01-15")},{id:"tag-4",name:"typescript",color:"#f59e0b",count:1,createdAt:new Date("2024-01-16")},{id:"tag-5",name:"types",color:"#ef4444",count:1,createdAt:new Date("2024-01-16")},{id:"tag-6",name:"development",color:"#06b6d4",count:1,createdAt:new Date("2024-01-16")}],sr=["#3b82f6","#8b5cf6","#10b981","#f59e0b","#ef4444","#06b6d4","#8b5a2b","#6b7280","#ec4899","#84cc16","#f97316","#6366f1"];function em(){const[e,t]=g.useState(Jp),[n,r]=g.useState([]),o=g.useCallback(()=>e.filter(k=>!n.includes(k.id)),[e,n]),a=g.useCallback(k=>{const S=[...o()].sort((A,T)=>T.count-A.count);return k?S.slice(0,k):S},[o]),i=g.useCallback(k=>{t(S=>{switch(k.type){case"CREATE_TAG":const A=S.find($=>$.name.toLowerCase()===k.payload.name.toLowerCase());if(A)return S.map($=>$.id===A.id?{...$,count:$.count+1}:$);const T={...k.payload,id:`tag-${Date.now()}`,count:1,color:k.payload.color||sr[S.length%sr.length],createdAt:new Date};return[...S,T];case"UPDATE_TAG":return S.map($=>$.id===k.payload.id?{...$,...k.payload.updates}:$);case"DELETE_TAG":return S.filter($=>$.id!==k.payload);case"TOGGLE_TAG_VISIBILITY":return r($=>$.includes(k.payload)?$.filter(U=>U!==k.payload):[...$,k.payload]),S;default:return S}})},[]),l=g.useCallback(k=>e.find(S=>S.id===k),[e]),d=g.useCallback(k=>e.find(S=>S.name.toLowerCase()===k.toLowerCase()),[e]),h=g.useCallback((k,S)=>{const A=d(k);return A||(i({type:"CREATE_TAG",payload:{name:k,color:S||sr[e.length%sr.length]}}),null)},[i,d,e.length]),p=g.useCallback((k,S)=>{const A=d(k);if(A){const T=Math.max(0,A.count+S);i(T===0?{type:"DELETE_TAG",payload:A.id}:{type:"UPDATE_TAG",payload:{id:A.id,updates:{count:T}}})}},[i,d]),y=g.useCallback(k=>{const S=k.reduce((U,V)=>(U[V]=(U[V]||0)+1,U),{}),A=e.map(U=>({...U,count:S[U.name]||0})),T=new Set(e.map(U=>U.name));Object.entries(S).forEach(([U,V])=>{if(!T.has(U)){const Y={id:`tag-${Date.now()}-${Math.random()}`,name:U,color:sr[A.length%sr.length],count:V,createdAt:new Date};A.push(Y)}});const $=A.filter(U=>U.count>0);t($)},[e]),v=g.useCallback(k=>{if(!k.trim())return o();const S=k.toLowerCase();return o().filter(A=>A.name.toLowerCase().includes(S))},[o]),x=g.useCallback((k,S=5)=>k.trim()?v(k).slice(0,S):a(S),[v,a]),w=g.useCallback((k,S)=>{const A=d(k);if(!A)return!1;const T=d(S);return T&&T.id!==A.id?!1:(i({type:"UPDATE_TAG",payload:{id:A.id,updates:{name:S.trim()}}}),!0)},[i,d]),_=g.useCallback(k=>{const S=d(k);return S?(i({type:"DELETE_TAG",payload:S.id}),!0):!1},[i,d]),E=g.useCallback(()=>e.map(k=>k.name),[e]);return g.useEffect(()=>{const k=setTimeout(()=>{localStorage.setItem("cardall-tags",JSON.stringify(e)),localStorage.setItem("cardall-hidden-tags",JSON.stringify(n))},1e3);return()=>clearTimeout(k)},[e,n]),g.useEffect(()=>{const k=localStorage.getItem("cardall-tags"),S=localStorage.getItem("cardall-hidden-tags");if(k)try{const A=JSON.parse(k);t(A)}catch(A){console.error("Failed to load saved tags:",A)}if(S)try{const A=JSON.parse(S);r(A)}catch(A){console.error("Failed to load hidden tags:",A)}},[]),{tags:o(),allTags:e,hiddenTags:n,popularTags:a,dispatch:i,getTagById:l,getTagByName:d,createTagIfNotExists:h,updateTagCount:p,syncTagsWithCards:y,searchTags:v,getTagSuggestions:x,renameTag:w,deleteTagByName:_,getAllTagNames:E}}const jl=g.createContext(null);function tm({children:e}){const t=Zp(),n=Qp(),r=em();ne.useEffect(()=>{const a=[];t.allCards.forEach(i=>{a.push(...i.frontContent.tags,...i.backContent.tags)}),r.syncTagsWithCards(a)},[t.allCards,r.syncTagsWithCards]);const o={cards:t,folders:n,tags:r};return u.jsx(jl.Provider,{value:o,children:e})}function Zs(){const e=g.useContext(jl);if(!e)throw new Error("useCardAll must be used within a CardAllProvider");return e}function nm(){return Zs().cards}function Al(){return Zs().folders}function Dl(){return Zs().tags}const rm="https://elwnpejlwkgdacaugvvd.supabase.co",om="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImVsd25wZWpsd2tnZGFjYXVndnZkIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTMzMzkxNTAsImV4cCI6MjA2ODkxNTE1MH0.XhVGgO2nf8uS1gC0V6jTMP0p0xN5KKV47t2rK2ncK90",nt=Np(rm,om,{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0},realtime:{params:{eventsPerSecond:10}}});class am{listeners=[];currentState={user:null,session:null,loading:!0,error:null};constructor(){this.initialize(),setTimeout(()=>{this.setupCloudSync()},0)}setupCloudSync(){try{Ja(async()=>{const{cloudSyncService:t}=await Promise.resolve().then(()=>ys);return{cloudSyncService:t}},void 0).then(({cloudSyncService:t})=>{t.setAuthService(this)}).catch(t=>{console.warn("Failed to setup cloud sync service:",t)})}catch(t){console.warn("Failed to setup cloud sync service:",t)}}async initialize(){try{const{data:{session:t},error:n}=await nt.auth.getSession();if(n){this.updateState({error:n.message,loading:!1});return}if(t?.user){const r=await this.fetchUserProfile(t.user.id);this.updateState({user:r,session:t,loading:!1,error:null})}else this.updateState({loading:!1});nt.auth.onAuthStateChange(async(r,o)=>{if(console.log("Auth state changed:",r,o?.user?.id),r==="SIGNED_OUT"){try{const{cloudSyncService:a}=await Ja(async()=>{const{cloudSyncService:i}=await Promise.resolve().then(()=>ys);return{cloudSyncService:i}},void 0);await a.clearSyncQueue()}catch(a){console.warn("Failed to clear sync queue on signout:",a)}this.updateState({user:null,session:null,loading:!1,error:null})}else if(o?.user){const a=await this.fetchUserProfile(o.user.id);if(this.updateState({user:a,session:o,loading:!1,error:null}),r==="SIGNED_IN")try{const{cloudSyncService:i}=await Ja(async()=>{const{cloudSyncService:l}=await Promise.resolve().then(()=>ys);return{cloudSyncService:l}},void 0);await i.performFullSync()}catch(i){console.warn("Failed to perform full sync after signin:",i)}}else this.updateState({user:null,session:null,loading:!1,error:null})})}catch(t){console.error("Auth initialization failed:",t),this.updateState({error:t instanceof Error?t.message:"Authentication failed",loading:!1})}}async fetchUserProfile(t){try{await new Promise(o=>setTimeout(o,100));const{data:n,error:r}=await nt.from("users").select("*").eq("id",t).single();return r?(console.error("Failed to fetch user profile:",r),null):n}catch(n){return console.error("Error fetching user profile:",n),null}}updateState(t){this.currentState={...this.currentState,...t},this.listeners.forEach(n=>n(this.currentState))}onAuthStateChange(t){return this.listeners.push(t),t(this.currentState),()=>{const n=this.listeners.indexOf(t);n>-1&&this.listeners.splice(n,1)}}getCurrentState(){return this.currentState}async signUpWithEmail(t,n,r){try{this.updateState({loading:!0,error:null});const{data:o,error:a}=await nt.auth.signUp({email:t,password:n,options:{data:{name:r?.name||t.split("@")[0],full_name:r?.name||t.split("@")[0]}}});return a?(this.updateState({error:a.message,loading:!1}),{error:a}):(this.updateState({loading:!1,error:null}),{error:null})}catch(o){const a=o instanceof Error?o.message:"Registration failed";return this.updateState({error:a,loading:!1}),{error:o}}}async signInWithEmail(t,n){try{this.updateState({loading:!0,error:null});const{error:r}=await nt.auth.signInWithPassword({email:t,password:n});return r?(this.updateState({error:r.message,loading:!1}),{error:r}):{error:null}}catch(r){const o=r instanceof Error?r.message:"Login failed";return this.updateState({error:o,loading:!1}),{error:r}}}async resetPassword(t){try{this.updateState({loading:!0,error:null});const{error:n}=await nt.auth.resetPasswordForEmail(t,{redirectTo:`${window.location.origin}/auth/reset-password`});return n?(this.updateState({error:n.message,loading:!1}),{error:n}):(this.updateState({loading:!1,error:null}),{error:null})}catch(n){const r=n instanceof Error?n.message:"Password reset failed";return this.updateState({error:r,loading:!1}),{error:n}}}async signInWithGitHub(){try{this.updateState({loading:!0,error:null});const{error:t}=await nt.auth.signInWithOAuth({provider:"github",options:{redirectTo:`${window.location.origin}`}});return t?(this.updateState({error:t.message,loading:!1}),{error:t}):{error:null}}catch(t){const n=t instanceof Error?t.message:"Login failed";return this.updateState({error:n,loading:!1}),{error:t}}}async signOut(){try{this.updateState({loading:!0,error:null});const{error:t}=await nt.auth.signOut();return t?(this.updateState({error:t.message,loading:!1}),{error:t}):(this.updateState({user:null,session:null,loading:!1,error:null}),{error:null})}catch(t){const n=t instanceof Error?t.message:"Logout failed";return this.updateState({error:n,loading:!1}),{error:t}}}async upsertUserProfile(t){try{if(!this.currentState.session?.user.id)return console.error("No authenticated user found"),null;const{data:n,error:r}=await nt.from("users").upsert({id:this.currentState.session.user.id,...t,updated_at:new Date().toISOString()}).select().single();return r?(console.error("Failed to upsert user profile:",r),null):n}catch(n){return console.error("Error upserting user profile:",n),null}}isAuthenticated(){return!!this.currentState.user&&!!this.currentState.session}getCurrentUser(){return this.currentState.user}getCurrentSession(){return this.currentState.session}}const Vn=new am,Nl=g.createContext(void 0);function sm({children:e}){const[t,n]=g.useState(!1),r=()=>n(!0),o=()=>n(!1);return u.jsx(Nl.Provider,{value:{isOpen:t,openModal:r,closeModal:o},children:e})}function Tl(){const e=g.useContext(Nl);if(e===void 0)throw new Error("useAuthModal must be used within an AuthModalProvider");return e}function Ml(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var o=e.length;for(t=0;t<o;t++)e[t]&&(n=Ml(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function Pl(){for(var e,t,n=0,r="",o=arguments.length;n<o;n++)(e=arguments[n])&&(t=Ml(e))&&(r&&(r+=" "),r+=t);return r}const fu=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,hu=Pl,Xs=(e,t)=>n=>{var r;if(t?.variants==null)return hu(e,n?.class,n?.className);const{variants:o,defaultVariants:a}=t,i=Object.keys(o).map(h=>{const p=n?.[h],y=a?.[h];if(p===null)return null;const v=fu(p)||fu(y);return o[h][v]}),l=n&&Object.entries(n).reduce((h,p)=>{let[y,v]=p;return v===void 0||(h[y]=v),h},{}),d=t==null||(r=t.compoundVariants)===null||r===void 0?void 0:r.reduce((h,p)=>{let{class:y,className:v,...x}=p;return Object.entries(x).every(w=>{let[_,E]=w;return Array.isArray(E)?E.includes({...a,...l}[_]):{...a,...l}[_]===E})?[...h,y,v]:h},[]);return hu(e,i,d,n?.class,n?.className)},Qs="-",im=e=>{const t=lm(e),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=e;return{getClassGroupId:i=>{const l=i.split(Qs);return l[0]===""&&l.length!==1&&l.shift(),Rl(l,t)||um(i)},getConflictingClassGroupIds:(i,l)=>{const d=n[i]||[];return l&&r[i]?[...d,...r[i]]:d}}},Rl=(e,t)=>{if(e.length===0)return t.classGroupId;const n=e[0],r=t.nextPart.get(n),o=r?Rl(e.slice(1),r):void 0;if(o)return o;if(t.validators.length===0)return;const a=e.join(Qs);return t.validators.find(({validator:i})=>i(a))?.classGroupId},pu=/^\[(.+)\]$/,um=e=>{if(pu.test(e)){const t=pu.exec(e)[1],n=t?.substring(0,t.indexOf(":"));if(n)return"arbitrary.."+n}},lm=e=>{const{theme:t,prefix:n}=e,r={nextPart:new Map,validators:[]};return dm(Object.entries(e.classGroups),n).forEach(([a,i])=>{_s(i,r,a,t)}),r},_s=(e,t,n,r)=>{e.forEach(o=>{if(typeof o=="string"){const a=o===""?t:mu(t,o);a.classGroupId=n;return}if(typeof o=="function"){if(cm(o)){_s(o(r),t,n,r);return}t.validators.push({validator:o,classGroupId:n});return}Object.entries(o).forEach(([a,i])=>{_s(i,mu(t,a),n,r)})})},mu=(e,t)=>{let n=e;return t.split(Qs).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},cm=e=>e.isThemeGetter,dm=(e,t)=>t?e.map(([n,r])=>{const o=r.map(a=>typeof a=="string"?t+a:typeof a=="object"?Object.fromEntries(Object.entries(a).map(([i,l])=>[t+i,l])):a);return[n,o]}):e,fm=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,n=new Map,r=new Map;const o=(a,i)=>{n.set(a,i),t++,t>e&&(t=0,r=n,n=new Map)};return{get(a){let i=n.get(a);if(i!==void 0)return i;if((i=r.get(a))!==void 0)return o(a,i),i},set(a,i){n.has(a)?n.set(a,i):o(a,i)}}},Fl="!",hm=e=>{const{separator:t,experimentalParseClassName:n}=e,r=t.length===1,o=t[0],a=t.length,i=l=>{const d=[];let h=0,p=0,y;for(let E=0;E<l.length;E++){let k=l[E];if(h===0){if(k===o&&(r||l.slice(E,E+a)===t)){d.push(l.slice(p,E)),p=E+a;continue}if(k==="/"){y=E;continue}}k==="["?h++:k==="]"&&h--}const v=d.length===0?l:l.substring(p),x=v.startsWith(Fl),w=x?v.substring(1):v,_=y&&y>p?y-p:void 0;return{modifiers:d,hasImportantModifier:x,baseClassName:w,maybePostfixModifierPosition:_}};return n?l=>n({className:l,parseClassName:i}):i},pm=e=>{if(e.length<=1)return e;const t=[];let n=[];return e.forEach(r=>{r[0]==="["?(t.push(...n.sort(),r),n=[]):n.push(r)}),t.push(...n.sort()),t},mm=e=>({cache:fm(e.cacheSize),parseClassName:hm(e),...im(e)}),gm=/\s+/,bm=(e,t)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:o}=t,a=[],i=e.trim().split(gm);let l="";for(let d=i.length-1;d>=0;d-=1){const h=i[d],{modifiers:p,hasImportantModifier:y,baseClassName:v,maybePostfixModifierPosition:x}=n(h);let w=!!x,_=r(w?v.substring(0,x):v);if(!_){if(!w){l=h+(l.length>0?" "+l:l);continue}if(_=r(v),!_){l=h+(l.length>0?" "+l:l);continue}w=!1}const E=pm(p).join(":"),k=y?E+Fl:E,S=k+_;if(a.includes(S))continue;a.push(S);const A=o(_,w);for(let T=0;T<A.length;++T){const $=A[T];a.push(k+$)}l=h+(l.length>0?" "+l:l)}return l};function xm(){let e=0,t,n,r="";for(;e<arguments.length;)(t=arguments[e++])&&(n=Il(t))&&(r&&(r+=" "),r+=n);return r}const Il=e=>{if(typeof e=="string")return e;let t,n="";for(let r=0;r<e.length;r++)e[r]&&(t=Il(e[r]))&&(n&&(n+=" "),n+=t);return n};function ym(e,...t){let n,r,o,a=i;function i(d){const h=t.reduce((p,y)=>y(p),e());return n=mm(h),r=n.cache.get,o=n.cache.set,a=l,l(d)}function l(d){const h=r(d);if(h)return h;const p=bm(d,n);return o(d,p),p}return function(){return a(xm.apply(null,arguments))}}const Xe=e=>{const t=n=>n[e]||[];return t.isThemeGetter=!0,t},Ol=/^\[(?:([a-z-]+):)?(.+)\]$/i,vm=/^\d+\/\d+$/,wm=new Set(["px","full","screen"]),Cm=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,_m=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,km=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,Sm=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,Em=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,pn=e=>cr(e)||wm.has(e)||vm.test(e),En=e=>Cr(e,"length",Rm),cr=e=>!!e&&!Number.isNaN(Number(e)),es=e=>Cr(e,"number",cr),zr=e=>!!e&&Number.isInteger(Number(e)),jm=e=>e.endsWith("%")&&cr(e.slice(0,-1)),Oe=e=>Ol.test(e),jn=e=>Cm.test(e),Am=new Set(["length","size","percentage"]),Dm=e=>Cr(e,Am,Ll),Nm=e=>Cr(e,"position",Ll),Tm=new Set(["image","url"]),Mm=e=>Cr(e,Tm,Im),Pm=e=>Cr(e,"",Fm),Br=()=>!0,Cr=(e,t,n)=>{const r=Ol.exec(e);return r?r[1]?typeof t=="string"?r[1]===t:t.has(r[1]):n(r[2]):!1},Rm=e=>_m.test(e)&&!km.test(e),Ll=()=>!1,Fm=e=>Sm.test(e),Im=e=>Em.test(e),Om=()=>{const e=Xe("colors"),t=Xe("spacing"),n=Xe("blur"),r=Xe("brightness"),o=Xe("borderColor"),a=Xe("borderRadius"),i=Xe("borderSpacing"),l=Xe("borderWidth"),d=Xe("contrast"),h=Xe("grayscale"),p=Xe("hueRotate"),y=Xe("invert"),v=Xe("gap"),x=Xe("gradientColorStops"),w=Xe("gradientColorStopPositions"),_=Xe("inset"),E=Xe("margin"),k=Xe("opacity"),S=Xe("padding"),A=Xe("saturate"),T=Xe("scale"),$=Xe("sepia"),U=Xe("skew"),V=Xe("space"),Y=Xe("translate"),se=()=>["auto","contain","none"],ge=()=>["auto","hidden","clip","visible","scroll"],G=()=>["auto",Oe,t],X=()=>[Oe,t],Ee=()=>["",pn,En],Te=()=>["auto",cr,Oe],De=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],be=()=>["solid","dashed","dotted","double","none"],Pe=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],je=()=>["start","end","center","between","around","evenly","stretch"],q=()=>["","0",Oe],fe=()=>["auto","avoid","all","avoid-page","page","left","right","column"],xe=()=>[cr,Oe];return{cacheSize:500,separator:":",theme:{colors:[Br],spacing:[pn,En],blur:["none","",jn,Oe],brightness:xe(),borderColor:[e],borderRadius:["none","","full",jn,Oe],borderSpacing:X(),borderWidth:Ee(),contrast:xe(),grayscale:q(),hueRotate:xe(),invert:q(),gap:X(),gradientColorStops:[e],gradientColorStopPositions:[jm,En],inset:G(),margin:G(),opacity:xe(),padding:X(),saturate:xe(),scale:xe(),sepia:q(),skew:xe(),space:X(),translate:X()},classGroups:{aspect:[{aspect:["auto","square","video",Oe]}],container:["container"],columns:[{columns:[jn]}],"break-after":[{"break-after":fe()}],"break-before":[{"break-before":fe()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...De(),Oe]}],overflow:[{overflow:ge()}],"overflow-x":[{"overflow-x":ge()}],"overflow-y":[{"overflow-y":ge()}],overscroll:[{overscroll:se()}],"overscroll-x":[{"overscroll-x":se()}],"overscroll-y":[{"overscroll-y":se()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[_]}],"inset-x":[{"inset-x":[_]}],"inset-y":[{"inset-y":[_]}],start:[{start:[_]}],end:[{end:[_]}],top:[{top:[_]}],right:[{right:[_]}],bottom:[{bottom:[_]}],left:[{left:[_]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",zr,Oe]}],basis:[{basis:G()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Oe]}],grow:[{grow:q()}],shrink:[{shrink:q()}],order:[{order:["first","last","none",zr,Oe]}],"grid-cols":[{"grid-cols":[Br]}],"col-start-end":[{col:["auto",{span:["full",zr,Oe]},Oe]}],"col-start":[{"col-start":Te()}],"col-end":[{"col-end":Te()}],"grid-rows":[{"grid-rows":[Br]}],"row-start-end":[{row:["auto",{span:[zr,Oe]},Oe]}],"row-start":[{"row-start":Te()}],"row-end":[{"row-end":Te()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Oe]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Oe]}],gap:[{gap:[v]}],"gap-x":[{"gap-x":[v]}],"gap-y":[{"gap-y":[v]}],"justify-content":[{justify:["normal",...je()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...je(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...je(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[S]}],px:[{px:[S]}],py:[{py:[S]}],ps:[{ps:[S]}],pe:[{pe:[S]}],pt:[{pt:[S]}],pr:[{pr:[S]}],pb:[{pb:[S]}],pl:[{pl:[S]}],m:[{m:[E]}],mx:[{mx:[E]}],my:[{my:[E]}],ms:[{ms:[E]}],me:[{me:[E]}],mt:[{mt:[E]}],mr:[{mr:[E]}],mb:[{mb:[E]}],ml:[{ml:[E]}],"space-x":[{"space-x":[V]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[V]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Oe,t]}],"min-w":[{"min-w":[Oe,t,"min","max","fit"]}],"max-w":[{"max-w":[Oe,t,"none","full","min","max","fit","prose",{screen:[jn]},jn]}],h:[{h:[Oe,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Oe,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Oe,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Oe,t,"auto","min","max","fit"]}],"font-size":[{text:["base",jn,En]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",es]}],"font-family":[{font:[Br]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Oe]}],"line-clamp":[{"line-clamp":["none",cr,es]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",pn,Oe]}],"list-image":[{"list-image":["none",Oe]}],"list-style-type":[{list:["none","disc","decimal",Oe]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[k]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[k]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...be(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",pn,En]}],"underline-offset":[{"underline-offset":["auto",pn,Oe]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:X()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Oe]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Oe]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[k]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...De(),Nm]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",Dm]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},Mm]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[w]}],"gradient-via-pos":[{via:[w]}],"gradient-to-pos":[{to:[w]}],"gradient-from":[{from:[x]}],"gradient-via":[{via:[x]}],"gradient-to":[{to:[x]}],rounded:[{rounded:[a]}],"rounded-s":[{"rounded-s":[a]}],"rounded-e":[{"rounded-e":[a]}],"rounded-t":[{"rounded-t":[a]}],"rounded-r":[{"rounded-r":[a]}],"rounded-b":[{"rounded-b":[a]}],"rounded-l":[{"rounded-l":[a]}],"rounded-ss":[{"rounded-ss":[a]}],"rounded-se":[{"rounded-se":[a]}],"rounded-ee":[{"rounded-ee":[a]}],"rounded-es":[{"rounded-es":[a]}],"rounded-tl":[{"rounded-tl":[a]}],"rounded-tr":[{"rounded-tr":[a]}],"rounded-br":[{"rounded-br":[a]}],"rounded-bl":[{"rounded-bl":[a]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[k]}],"border-style":[{border:[...be(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[k]}],"divide-style":[{divide:be()}],"border-color":[{border:[o]}],"border-color-x":[{"border-x":[o]}],"border-color-y":[{"border-y":[o]}],"border-color-s":[{"border-s":[o]}],"border-color-e":[{"border-e":[o]}],"border-color-t":[{"border-t":[o]}],"border-color-r":[{"border-r":[o]}],"border-color-b":[{"border-b":[o]}],"border-color-l":[{"border-l":[o]}],"divide-color":[{divide:[o]}],"outline-style":[{outline:["",...be()]}],"outline-offset":[{"outline-offset":[pn,Oe]}],"outline-w":[{outline:[pn,En]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:Ee()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[k]}],"ring-offset-w":[{"ring-offset":[pn,En]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",jn,Pm]}],"shadow-color":[{shadow:[Br]}],opacity:[{opacity:[k]}],"mix-blend":[{"mix-blend":[...Pe(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":Pe()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[d]}],"drop-shadow":[{"drop-shadow":["","none",jn,Oe]}],grayscale:[{grayscale:[h]}],"hue-rotate":[{"hue-rotate":[p]}],invert:[{invert:[y]}],saturate:[{saturate:[A]}],sepia:[{sepia:[$]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[d]}],"backdrop-grayscale":[{"backdrop-grayscale":[h]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[p]}],"backdrop-invert":[{"backdrop-invert":[y]}],"backdrop-opacity":[{"backdrop-opacity":[k]}],"backdrop-saturate":[{"backdrop-saturate":[A]}],"backdrop-sepia":[{"backdrop-sepia":[$]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[i]}],"border-spacing-x":[{"border-spacing-x":[i]}],"border-spacing-y":[{"border-spacing-y":[i]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Oe]}],duration:[{duration:xe()}],ease:[{ease:["linear","in","out","in-out",Oe]}],delay:[{delay:xe()}],animate:[{animate:["none","spin","ping","pulse","bounce",Oe]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[T]}],"scale-x":[{"scale-x":[T]}],"scale-y":[{"scale-y":[T]}],rotate:[{rotate:[zr,Oe]}],"translate-x":[{"translate-x":[Y]}],"translate-y":[{"translate-y":[Y]}],"skew-x":[{"skew-x":[U]}],"skew-y":[{"skew-y":[U]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Oe]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Oe]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":X()}],"scroll-mx":[{"scroll-mx":X()}],"scroll-my":[{"scroll-my":X()}],"scroll-ms":[{"scroll-ms":X()}],"scroll-me":[{"scroll-me":X()}],"scroll-mt":[{"scroll-mt":X()}],"scroll-mr":[{"scroll-mr":X()}],"scroll-mb":[{"scroll-mb":X()}],"scroll-ml":[{"scroll-ml":X()}],"scroll-p":[{"scroll-p":X()}],"scroll-px":[{"scroll-px":X()}],"scroll-py":[{"scroll-py":X()}],"scroll-ps":[{"scroll-ps":X()}],"scroll-pe":[{"scroll-pe":X()}],"scroll-pt":[{"scroll-pt":X()}],"scroll-pr":[{"scroll-pr":X()}],"scroll-pb":[{"scroll-pb":X()}],"scroll-pl":[{"scroll-pl":X()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Oe]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[pn,En,es]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},Lm=ym(Om);function re(...e){return Lm(Pl(e))}const Js=Xs("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),_e=g.forwardRef(({className:e,variant:t,size:n,asChild:r=!1,...o},a)=>{const i=r?Zr:"button";return u.jsx(i,{className:re(Js({variant:t,size:n,className:e})),ref:a,...o})});_e.displayName="Button";/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zm=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),zl=(...e)=>e.filter((t,n,r)=>!!t&&t.trim()!==""&&r.indexOf(t)===n).join(" ").trim();/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Bm={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $m=g.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:o="",children:a,iconNode:i,...l},d)=>g.createElement("svg",{ref:d,...Bm,width:t,height:t,stroke:e,strokeWidth:r?Number(n)*24/Number(t):n,className:zl("lucide",o),...l},[...i.map(([h,p])=>g.createElement(h,p)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ke=(e,t)=>{const n=g.forwardRef(({className:r,...o},a)=>g.createElement($m,{ref:a,iconNode:t,className:zl(`lucide-${zm(e)}`,r),...o}));return n.displayName=`${e}`,n};/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ts=ke("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qm=ke("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ks=ke("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Um=ke("Cat",[["path",{d:"M12 5c.67 0 1.35.09 2 .26 1.78-2 5.03-2.84 6.42-2.26 1.4.58-.42 7-.42 7 .57 1.07 1 2.24 1 3.44C21 17.9 16.97 21 12 21s-9-3-9-7.56c0-1.25.5-2.4 1-3.44 0 0-1.89-6.42-.5-7 1.39-.58 4.72.23 6.5 2.23A9.04 9.04 0 0 1 12 5Z",key:"x6xyqk"}],["path",{d:"M8 14v.5",key:"1nzgdb"}],["path",{d:"M16 14v.5",key:"1lajdz"}],["path",{d:"M11.25 16.25h1.5L12 17l-.75-.75Z",key:"12kq1m"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mn=ke("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bl=ke("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Km=ke("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ei=ke("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hm=ke("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kt=ke("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gu=ke("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $l=ke("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wm=ke("Code",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vm=ke("Coffee",[["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M14 2v2",key:"6buw04"}],["path",{d:"M16 8a1 1 0 0 1 1 1v8a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4V9a1 1 0 0 1 1-1h14a4 4 0 1 1 0 8h-1",key:"pwadti"}],["path",{d:"M6 2v2",key:"colzsn"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gm=ke("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vr=ke("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ym=ke("Ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bu=ke("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xu=ke("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ql=ke("FolderOpen",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ss=ke("FolderPlus",[["path",{d:"M12 10v6",key:"1bos4e"}],["path",{d:"M9 13h6",key:"1uhe8q"}],["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tn=ke("Folder",[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zm=ke("Github",[["path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4",key:"tonef"}],["path",{d:"M9 18c-4.51 2-5-2-7-2",key:"9comsn"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xm=ke("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yu=ke("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ul=ke("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qm=ke("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $r=ke("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ns=ke("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jm=ke("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qr=ke("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e1=ke("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kl=ke("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t1=ke("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uo=ke("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gr=ke("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n1=ke("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r1=ke("SlidersVertical",[["line",{x1:"4",x2:"4",y1:"21",y2:"14",key:"1p332r"}],["line",{x1:"4",x2:"4",y1:"10",y2:"3",key:"gb41h5"}],["line",{x1:"12",x2:"12",y1:"21",y2:"12",key:"hf2csr"}],["line",{x1:"12",x2:"12",y1:"8",y2:"3",key:"1kfi7u"}],["line",{x1:"20",x2:"20",y1:"21",y2:"16",key:"1lhrwl"}],["line",{x1:"20",x2:"20",y1:"12",y2:"3",key:"16vvfq"}],["line",{x1:"2",x2:"6",y1:"14",y2:"14",key:"1uebub"}],["line",{x1:"10",x2:"14",y1:"8",y2:"8",key:"1yglbp"}],["line",{x1:"18",x2:"22",y1:"16",y2:"16",key:"1jxqpz"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o1=ke("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a1=ke("Smile",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vu=ke("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hl=ke("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s1=ke("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wl=ke("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i1=ke("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ti=ke("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vl=ke("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wu=ke("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u1=ke("WifiOff",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l1=ke("Wifi",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zn=ke("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c1=ke("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]);function aa(e){const t=e+"CollectionProvider",[n,r]=rn(t),[o,a]=n(t,{collectionRef:{current:null},itemMap:new Map}),i=x=>{const{scope:w,children:_}=x,E=ne.useRef(null),k=ne.useRef(new Map).current;return u.jsx(o,{scope:w,itemMap:k,collectionRef:E,children:_})};i.displayName=t;const l=e+"CollectionSlot",d=ne.forwardRef((x,w)=>{const{scope:_,children:E}=x,k=a(l,_),S=We(w,k.collectionRef);return u.jsx(Zr,{ref:S,children:E})});d.displayName=l;const h=e+"CollectionItemSlot",p="data-radix-collection-item",y=ne.forwardRef((x,w)=>{const{scope:_,children:E,...k}=x,S=ne.useRef(null),A=We(w,S),T=a(h,_);return ne.useEffect(()=>(T.itemMap.set(S,{ref:S,...k}),()=>void T.itemMap.delete(S))),u.jsx(Zr,{[p]:"",ref:A,children:E})});y.displayName=h;function v(x){const w=a(e+"CollectionConsumer",x);return ne.useCallback(()=>{const E=w.collectionRef.current;if(!E)return[];const k=Array.from(E.querySelectorAll(`[${p}]`));return Array.from(w.itemMap.values()).sort((T,$)=>k.indexOf(T.ref.current)-k.indexOf($.ref.current))},[w.collectionRef,w.itemMap])}return[{Provider:i,Slot:d,ItemSlot:y},v,r]}var d1=g.createContext(void 0);function uo(e){const t=g.useContext(d1);return e||t||"ltr"}var rs="rovingFocusGroup.onEntryFocus",f1={bubbles:!1,cancelable:!0},sa="RovingFocusGroup",[Es,Gl,h1]=aa(sa),[p1,Yl]=rn(sa,[h1]),[m1,g1]=p1(sa),Zl=g.forwardRef((e,t)=>u.jsx(Es.Provider,{scope:e.__scopeRovingFocusGroup,children:u.jsx(Es.Slot,{scope:e.__scopeRovingFocusGroup,children:u.jsx(b1,{...e,ref:t})})}));Zl.displayName=sa;var b1=g.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:o=!1,dir:a,currentTabStopId:i,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:d,onEntryFocus:h,preventScrollOnEntryFocus:p=!1,...y}=e,v=g.useRef(null),x=We(t,v),w=uo(a),[_=null,E]=Xr({prop:i,defaultProp:l,onChange:d}),[k,S]=g.useState(!1),A=Nt(h),T=Gl(n),$=g.useRef(!1),[U,V]=g.useState(0);return g.useEffect(()=>{const Y=v.current;if(Y)return Y.addEventListener(rs,A),()=>Y.removeEventListener(rs,A)},[A]),u.jsx(m1,{scope:n,orientation:r,dir:w,loop:o,currentTabStopId:_,onItemFocus:g.useCallback(Y=>E(Y),[E]),onItemShiftTab:g.useCallback(()=>S(!0),[]),onFocusableItemAdd:g.useCallback(()=>V(Y=>Y+1),[]),onFocusableItemRemove:g.useCallback(()=>V(Y=>Y-1),[]),children:u.jsx($e.div,{tabIndex:k||U===0?-1:0,"data-orientation":r,...y,ref:x,style:{outline:"none",...e.style},onMouseDown:pe(e.onMouseDown,()=>{$.current=!0}),onFocus:pe(e.onFocus,Y=>{const se=!$.current;if(Y.target===Y.currentTarget&&se&&!k){const ge=new CustomEvent(rs,f1);if(Y.currentTarget.dispatchEvent(ge),!ge.defaultPrevented){const G=T().filter(be=>be.focusable),X=G.find(be=>be.active),Ee=G.find(be=>be.id===_),De=[X,Ee,...G].filter(Boolean).map(be=>be.ref.current);Jl(De,p)}}$.current=!1}),onBlur:pe(e.onBlur,()=>S(!1))})})}),Xl="RovingFocusGroupItem",Ql=g.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:o=!1,tabStopId:a,...i}=e,l=mr(),d=a||l,h=g1(Xl,n),p=h.currentTabStopId===d,y=Gl(n),{onFocusableItemAdd:v,onFocusableItemRemove:x}=h;return g.useEffect(()=>{if(r)return v(),()=>x()},[r,v,x]),u.jsx(Es.ItemSlot,{scope:n,id:d,focusable:r,active:o,children:u.jsx($e.span,{tabIndex:p?0:-1,"data-orientation":h.orientation,...i,ref:t,onMouseDown:pe(e.onMouseDown,w=>{r?h.onItemFocus(d):w.preventDefault()}),onFocus:pe(e.onFocus,()=>h.onItemFocus(d)),onKeyDown:pe(e.onKeyDown,w=>{if(w.key==="Tab"&&w.shiftKey){h.onItemShiftTab();return}if(w.target!==w.currentTarget)return;const _=v1(w,h.orientation,h.dir);if(_!==void 0){if(w.metaKey||w.ctrlKey||w.altKey||w.shiftKey)return;w.preventDefault();let k=y().filter(S=>S.focusable).map(S=>S.ref.current);if(_==="last")k.reverse();else if(_==="prev"||_==="next"){_==="prev"&&k.reverse();const S=k.indexOf(w.currentTarget);k=h.loop?w1(k,S+1):k.slice(S+1)}setTimeout(()=>Jl(k))}})})})});Ql.displayName=Xl;var x1={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function y1(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function v1(e,t,n){const r=y1(e.key,n);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return x1[r]}function Jl(e,t=!1){const n=document.activeElement;for(const r of e)if(r===n||(r.focus({preventScroll:t}),document.activeElement!==n))return}function w1(e,t){return e.map((n,r)=>e[(t+r)%e.length])}var C1=Zl,_1=Ql,js=["Enter"," "],k1=["ArrowDown","PageUp","Home"],ec=["ArrowUp","PageDown","End"],S1=[...k1,...ec],E1={ltr:[...js,"ArrowRight"],rtl:[...js,"ArrowLeft"]},j1={ltr:["ArrowLeft"],rtl:["ArrowRight"]},lo="Menu",[Qr,A1,D1]=aa(lo),[Xn,ia]=rn(lo,[D1,oa,Yl]),ua=oa(),tc=Yl(),[N1,Qn]=Xn(lo),[T1,co]=Xn(lo),nc=e=>{const{__scopeMenu:t,open:n=!1,children:r,dir:o,onOpenChange:a,modal:i=!0}=e,l=ua(t),[d,h]=g.useState(null),p=g.useRef(!1),y=Nt(a),v=uo(o);return g.useEffect(()=>{const x=()=>{p.current=!0,document.addEventListener("pointerdown",w,{capture:!0,once:!0}),document.addEventListener("pointermove",w,{capture:!0,once:!0})},w=()=>p.current=!1;return document.addEventListener("keydown",x,{capture:!0}),()=>{document.removeEventListener("keydown",x,{capture:!0}),document.removeEventListener("pointerdown",w,{capture:!0}),document.removeEventListener("pointermove",w,{capture:!0})}},[]),u.jsx(yl,{...l,children:u.jsx(N1,{scope:t,open:n,onOpenChange:y,content:d,onContentChange:h,children:u.jsx(T1,{scope:t,onClose:g.useCallback(()=>y(!1),[y]),isUsingKeyboardRef:p,dir:v,modal:i,children:r})})})};nc.displayName=lo;var M1="MenuAnchor",ni=g.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e,o=ua(n);return u.jsx(fl,{...o,...r,ref:t})});ni.displayName=M1;var ri="MenuPortal",[P1,rc]=Xn(ri,{forceMount:void 0}),oc=e=>{const{__scopeMenu:t,forceMount:n,children:r,container:o}=e,a=Qn(ri,t);return u.jsx(P1,{scope:t,forceMount:n,children:u.jsx(In,{present:n||a.open,children:u.jsx(dl,{asChild:!0,container:o,children:r})})})};oc.displayName=ri;var Lt="MenuContent",[R1,oi]=Xn(Lt),ac=g.forwardRef((e,t)=>{const n=rc(Lt,e.__scopeMenu),{forceMount:r=n.forceMount,...o}=e,a=Qn(Lt,e.__scopeMenu),i=co(Lt,e.__scopeMenu);return u.jsx(Qr.Provider,{scope:e.__scopeMenu,children:u.jsx(In,{present:r||a.open,children:u.jsx(Qr.Slot,{scope:e.__scopeMenu,children:i.modal?u.jsx(F1,{...o,ref:t}):u.jsx(I1,{...o,ref:t})})})})}),F1=g.forwardRef((e,t)=>{const n=Qn(Lt,e.__scopeMenu),r=g.useRef(null),o=We(t,r);return g.useEffect(()=>{const a=r.current;if(a)return xl(a)},[]),u.jsx(ai,{...e,ref:o,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:pe(e.onFocusOutside,a=>a.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),I1=g.forwardRef((e,t)=>{const n=Qn(Lt,e.__scopeMenu);return u.jsx(ai,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),ai=g.forwardRef((e,t)=>{const{__scopeMenu:n,loop:r=!1,trapFocus:o,onOpenAutoFocus:a,onCloseAutoFocus:i,disableOutsidePointerEvents:l,onEntryFocus:d,onEscapeKeyDown:h,onPointerDownOutside:p,onFocusOutside:y,onInteractOutside:v,onDismiss:x,disableOutsideScroll:w,..._}=e,E=Qn(Lt,n),k=co(Lt,n),S=ua(n),A=tc(n),T=A1(n),[$,U]=g.useState(null),V=g.useRef(null),Y=We(t,V,E.onContentChange),se=g.useRef(0),ge=g.useRef(""),G=g.useRef(0),X=g.useRef(null),Ee=g.useRef("right"),Te=g.useRef(0),De=w?pl:g.Fragment,be=w?{as:Zr,allowPinchZoom:!0}:void 0,Pe=q=>{const fe=ge.current+q,xe=T().filter(Z=>!Z.disabled),we=document.activeElement,ye=xe.find(Z=>Z.ref.current===we)?.textValue,Se=xe.map(Z=>Z.textValue),ze=G1(Se,fe,ye),ae=xe.find(Z=>Z.textValue===ze)?.ref.current;(function Z(Ie){ge.current=Ie,window.clearTimeout(se.current),Ie!==""&&(se.current=window.setTimeout(()=>Z(""),1e3))})(fe),ae&&setTimeout(()=>ae.focus())};g.useEffect(()=>()=>window.clearTimeout(se.current),[]),hl();const je=g.useCallback(q=>Ee.current===X.current?.side&&Z1(q,X.current?.area),[]);return u.jsx(R1,{scope:n,searchRef:ge,onItemEnter:g.useCallback(q=>{je(q)&&q.preventDefault()},[je]),onItemLeave:g.useCallback(q=>{je(q)||(V.current?.focus(),U(null))},[je]),onTriggerLeave:g.useCallback(q=>{je(q)&&q.preventDefault()},[je]),pointerGraceTimerRef:G,onPointerGraceIntentChange:g.useCallback(q=>{X.current=q},[]),children:u.jsx(De,{...be,children:u.jsx(ml,{asChild:!0,trapped:o,onMountAutoFocus:pe(a,q=>{q.preventDefault(),V.current?.focus({preventScroll:!0})}),onUnmountAutoFocus:i,children:u.jsx(gl,{asChild:!0,disableOutsidePointerEvents:l,onEscapeKeyDown:h,onPointerDownOutside:p,onFocusOutside:y,onInteractOutside:v,onDismiss:x,children:u.jsx(C1,{asChild:!0,...A,dir:k.dir,orientation:"vertical",loop:r,currentTabStopId:$,onCurrentTabStopIdChange:U,onEntryFocus:pe(d,q=>{k.isUsingKeyboardRef.current||q.preventDefault()}),preventScrollOnEntryFocus:!0,children:u.jsx(bl,{role:"menu","aria-orientation":"vertical","data-state":wc(E.open),"data-radix-menu-content":"",dir:k.dir,...S,..._,ref:Y,style:{outline:"none",..._.style},onKeyDown:pe(_.onKeyDown,q=>{const xe=q.target.closest("[data-radix-menu-content]")===q.currentTarget,we=q.ctrlKey||q.altKey||q.metaKey,ye=q.key.length===1;xe&&(q.key==="Tab"&&q.preventDefault(),!we&&ye&&Pe(q.key));const Se=V.current;if(q.target!==Se||!S1.includes(q.key))return;q.preventDefault();const ae=T().filter(Z=>!Z.disabled).map(Z=>Z.ref.current);ec.includes(q.key)&&ae.reverse(),W1(ae)}),onBlur:pe(e.onBlur,q=>{q.currentTarget.contains(q.target)||(window.clearTimeout(se.current),ge.current="")}),onPointerMove:pe(e.onPointerMove,Jr(q=>{const fe=q.target,xe=Te.current!==q.clientX;if(q.currentTarget.contains(fe)&&xe){const we=q.clientX>Te.current?"right":"left";Ee.current=we,Te.current=q.clientX}}))})})})})})})});ac.displayName=Lt;var O1="MenuGroup",si=g.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return u.jsx($e.div,{role:"group",...r,ref:t})});si.displayName=O1;var L1="MenuLabel",sc=g.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return u.jsx($e.div,{...r,ref:t})});sc.displayName=L1;var Wo="MenuItem",Cu="menu.itemSelect",la=g.forwardRef((e,t)=>{const{disabled:n=!1,onSelect:r,...o}=e,a=g.useRef(null),i=co(Wo,e.__scopeMenu),l=oi(Wo,e.__scopeMenu),d=We(t,a),h=g.useRef(!1),p=()=>{const y=a.current;if(!n&&y){const v=new CustomEvent(Cu,{bubbles:!0,cancelable:!0});y.addEventListener(Cu,x=>r?.(x),{once:!0}),wp(y,v),v.defaultPrevented?h.current=!1:i.onClose()}};return u.jsx(ic,{...o,ref:d,disabled:n,onClick:pe(e.onClick,p),onPointerDown:y=>{e.onPointerDown?.(y),h.current=!0},onPointerUp:pe(e.onPointerUp,y=>{h.current||y.currentTarget?.click()}),onKeyDown:pe(e.onKeyDown,y=>{const v=l.searchRef.current!=="";n||v&&y.key===" "||js.includes(y.key)&&(y.currentTarget.click(),y.preventDefault())})})});la.displayName=Wo;var ic=g.forwardRef((e,t)=>{const{__scopeMenu:n,disabled:r=!1,textValue:o,...a}=e,i=oi(Wo,n),l=tc(n),d=g.useRef(null),h=We(t,d),[p,y]=g.useState(!1),[v,x]=g.useState("");return g.useEffect(()=>{const w=d.current;w&&x((w.textContent??"").trim())},[a.children]),u.jsx(Qr.ItemSlot,{scope:n,disabled:r,textValue:o??v,children:u.jsx(_1,{asChild:!0,...l,focusable:!r,children:u.jsx($e.div,{role:"menuitem","data-highlighted":p?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...a,ref:h,onPointerMove:pe(e.onPointerMove,Jr(w=>{r?i.onItemLeave(w):(i.onItemEnter(w),w.defaultPrevented||w.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:pe(e.onPointerLeave,Jr(w=>i.onItemLeave(w))),onFocus:pe(e.onFocus,()=>y(!0)),onBlur:pe(e.onBlur,()=>y(!1))})})})}),z1="MenuCheckboxItem",uc=g.forwardRef((e,t)=>{const{checked:n=!1,onCheckedChange:r,...o}=e;return u.jsx(hc,{scope:e.__scopeMenu,checked:n,children:u.jsx(la,{role:"menuitemcheckbox","aria-checked":Vo(n)?"mixed":n,...o,ref:t,"data-state":ui(n),onSelect:pe(o.onSelect,()=>r?.(Vo(n)?!0:!n),{checkForDefaultPrevented:!1})})})});uc.displayName=z1;var lc="MenuRadioGroup",[B1,$1]=Xn(lc,{value:void 0,onValueChange:()=>{}}),cc=g.forwardRef((e,t)=>{const{value:n,onValueChange:r,...o}=e,a=Nt(r);return u.jsx(B1,{scope:e.__scopeMenu,value:n,onValueChange:a,children:u.jsx(si,{...o,ref:t})})});cc.displayName=lc;var dc="MenuRadioItem",fc=g.forwardRef((e,t)=>{const{value:n,...r}=e,o=$1(dc,e.__scopeMenu),a=n===o.value;return u.jsx(hc,{scope:e.__scopeMenu,checked:a,children:u.jsx(la,{role:"menuitemradio","aria-checked":a,...r,ref:t,"data-state":ui(a),onSelect:pe(r.onSelect,()=>o.onValueChange?.(n),{checkForDefaultPrevented:!1})})})});fc.displayName=dc;var ii="MenuItemIndicator",[hc,q1]=Xn(ii,{checked:!1}),pc=g.forwardRef((e,t)=>{const{__scopeMenu:n,forceMount:r,...o}=e,a=q1(ii,n);return u.jsx(In,{present:r||Vo(a.checked)||a.checked===!0,children:u.jsx($e.span,{...o,ref:t,"data-state":ui(a.checked)})})});pc.displayName=ii;var U1="MenuSeparator",mc=g.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return u.jsx($e.div,{role:"separator","aria-orientation":"horizontal",...r,ref:t})});mc.displayName=U1;var K1="MenuArrow",gc=g.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e,o=ua(n);return u.jsx(vl,{...o,...r,ref:t})});gc.displayName=K1;var H1="MenuSub",[h_,bc]=Xn(H1),Kr="MenuSubTrigger",xc=g.forwardRef((e,t)=>{const n=Qn(Kr,e.__scopeMenu),r=co(Kr,e.__scopeMenu),o=bc(Kr,e.__scopeMenu),a=oi(Kr,e.__scopeMenu),i=g.useRef(null),{pointerGraceTimerRef:l,onPointerGraceIntentChange:d}=a,h={__scopeMenu:e.__scopeMenu},p=g.useCallback(()=>{i.current&&window.clearTimeout(i.current),i.current=null},[]);return g.useEffect(()=>p,[p]),g.useEffect(()=>{const y=l.current;return()=>{window.clearTimeout(y),d(null)}},[l,d]),u.jsx(ni,{asChild:!0,...h,children:u.jsx(ic,{id:o.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":o.contentId,"data-state":wc(n.open),...e,ref:cl(t,o.onTriggerChange),onClick:y=>{e.onClick?.(y),!(e.disabled||y.defaultPrevented)&&(y.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:pe(e.onPointerMove,Jr(y=>{a.onItemEnter(y),!y.defaultPrevented&&!e.disabled&&!n.open&&!i.current&&(a.onPointerGraceIntentChange(null),i.current=window.setTimeout(()=>{n.onOpenChange(!0),p()},100))})),onPointerLeave:pe(e.onPointerLeave,Jr(y=>{p();const v=n.content?.getBoundingClientRect();if(v){const x=n.content?.dataset.side,w=x==="right",_=w?-5:5,E=v[w?"left":"right"],k=v[w?"right":"left"];a.onPointerGraceIntentChange({area:[{x:y.clientX+_,y:y.clientY},{x:E,y:v.top},{x:k,y:v.top},{x:k,y:v.bottom},{x:E,y:v.bottom}],side:x}),window.clearTimeout(l.current),l.current=window.setTimeout(()=>a.onPointerGraceIntentChange(null),300)}else{if(a.onTriggerLeave(y),y.defaultPrevented)return;a.onPointerGraceIntentChange(null)}})),onKeyDown:pe(e.onKeyDown,y=>{const v=a.searchRef.current!=="";e.disabled||v&&y.key===" "||E1[r.dir].includes(y.key)&&(n.onOpenChange(!0),n.content?.focus(),y.preventDefault())})})})});xc.displayName=Kr;var yc="MenuSubContent",vc=g.forwardRef((e,t)=>{const n=rc(Lt,e.__scopeMenu),{forceMount:r=n.forceMount,...o}=e,a=Qn(Lt,e.__scopeMenu),i=co(Lt,e.__scopeMenu),l=bc(yc,e.__scopeMenu),d=g.useRef(null),h=We(t,d);return u.jsx(Qr.Provider,{scope:e.__scopeMenu,children:u.jsx(In,{present:r||a.open,children:u.jsx(Qr.Slot,{scope:e.__scopeMenu,children:u.jsx(ai,{id:l.contentId,"aria-labelledby":l.triggerId,...o,ref:h,align:"start",side:i.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:p=>{i.isUsingKeyboardRef.current&&d.current?.focus(),p.preventDefault()},onCloseAutoFocus:p=>p.preventDefault(),onFocusOutside:pe(e.onFocusOutside,p=>{p.target!==l.trigger&&a.onOpenChange(!1)}),onEscapeKeyDown:pe(e.onEscapeKeyDown,p=>{i.onClose(),p.preventDefault()}),onKeyDown:pe(e.onKeyDown,p=>{const y=p.currentTarget.contains(p.target),v=j1[i.dir].includes(p.key);y&&v&&(a.onOpenChange(!1),l.trigger?.focus(),p.preventDefault())})})})})})});vc.displayName=yc;function wc(e){return e?"open":"closed"}function Vo(e){return e==="indeterminate"}function ui(e){return Vo(e)?"indeterminate":e?"checked":"unchecked"}function W1(e){const t=document.activeElement;for(const n of e)if(n===t||(n.focus(),document.activeElement!==t))return}function V1(e,t){return e.map((n,r)=>e[(t+r)%e.length])}function G1(e,t,n){const o=t.length>1&&Array.from(t).every(h=>h===t[0])?t[0]:t,a=n?e.indexOf(n):-1;let i=V1(e,Math.max(a,0));o.length===1&&(i=i.filter(h=>h!==n));const d=i.find(h=>h.toLowerCase().startsWith(o.toLowerCase()));return d!==n?d:void 0}function Y1(e,t){const{x:n,y:r}=e;let o=!1;for(let a=0,i=t.length-1;a<t.length;i=a++){const l=t[a].x,d=t[a].y,h=t[i].x,p=t[i].y;d>r!=p>r&&n<(h-l)*(r-d)/(p-d)+l&&(o=!o)}return o}function Z1(e,t){if(!t)return!1;const n={x:e.clientX,y:e.clientY};return Y1(n,t)}function Jr(e){return t=>t.pointerType==="mouse"?e(t):void 0}var Cc=nc,_c=ni,kc=oc,Sc=ac,Ec=si,jc=sc,Ac=la,Dc=uc,Nc=cc,Tc=fc,Mc=pc,Pc=mc,Rc=gc,Fc=xc,Ic=vc,li="DropdownMenu",[X1,p_]=rn(li,[ia]),yt=ia(),[Q1,Oc]=X1(li),Lc=e=>{const{__scopeDropdownMenu:t,children:n,dir:r,open:o,defaultOpen:a,onOpenChange:i,modal:l=!0}=e,d=yt(t),h=g.useRef(null),[p=!1,y]=Xr({prop:o,defaultProp:a,onChange:i});return u.jsx(Q1,{scope:t,triggerId:mr(),triggerRef:h,contentId:mr(),open:p,onOpenChange:y,onOpenToggle:g.useCallback(()=>y(v=>!v),[y]),modal:l,children:u.jsx(Cc,{...d,open:p,onOpenChange:y,dir:r,modal:l,children:n})})};Lc.displayName=li;var zc="DropdownMenuTrigger",Bc=g.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,disabled:r=!1,...o}=e,a=Oc(zc,n),i=yt(n);return u.jsx(_c,{asChild:!0,...i,children:u.jsx($e.button,{type:"button",id:a.triggerId,"aria-haspopup":"menu","aria-expanded":a.open,"aria-controls":a.open?a.contentId:void 0,"data-state":a.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...o,ref:cl(t,a.triggerRef),onPointerDown:pe(e.onPointerDown,l=>{!r&&l.button===0&&l.ctrlKey===!1&&(a.onOpenToggle(),a.open||l.preventDefault())}),onKeyDown:pe(e.onKeyDown,l=>{r||(["Enter"," "].includes(l.key)&&a.onOpenToggle(),l.key==="ArrowDown"&&a.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(l.key)&&l.preventDefault())})})})});Bc.displayName=zc;var J1="DropdownMenuPortal",$c=e=>{const{__scopeDropdownMenu:t,...n}=e,r=yt(t);return u.jsx(kc,{...r,...n})};$c.displayName=J1;var qc="DropdownMenuContent",Uc=g.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,o=Oc(qc,n),a=yt(n),i=g.useRef(!1);return u.jsx(Sc,{id:o.contentId,"aria-labelledby":o.triggerId,...a,...r,ref:t,onCloseAutoFocus:pe(e.onCloseAutoFocus,l=>{i.current||o.triggerRef.current?.focus(),i.current=!1,l.preventDefault()}),onInteractOutside:pe(e.onInteractOutside,l=>{const d=l.detail.originalEvent,h=d.button===0&&d.ctrlKey===!0,p=d.button===2||h;(!o.modal||p)&&(i.current=!0)}),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});Uc.displayName=qc;var eg="DropdownMenuGroup",tg=g.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,o=yt(n);return u.jsx(Ec,{...o,...r,ref:t})});tg.displayName=eg;var ng="DropdownMenuLabel",Kc=g.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,o=yt(n);return u.jsx(jc,{...o,...r,ref:t})});Kc.displayName=ng;var rg="DropdownMenuItem",Hc=g.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,o=yt(n);return u.jsx(Ac,{...o,...r,ref:t})});Hc.displayName=rg;var og="DropdownMenuCheckboxItem",Wc=g.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,o=yt(n);return u.jsx(Dc,{...o,...r,ref:t})});Wc.displayName=og;var ag="DropdownMenuRadioGroup",sg=g.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,o=yt(n);return u.jsx(Nc,{...o,...r,ref:t})});sg.displayName=ag;var ig="DropdownMenuRadioItem",Vc=g.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,o=yt(n);return u.jsx(Tc,{...o,...r,ref:t})});Vc.displayName=ig;var ug="DropdownMenuItemIndicator",Gc=g.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,o=yt(n);return u.jsx(Mc,{...o,...r,ref:t})});Gc.displayName=ug;var lg="DropdownMenuSeparator",Yc=g.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,o=yt(n);return u.jsx(Pc,{...o,...r,ref:t})});Yc.displayName=lg;var cg="DropdownMenuArrow",dg=g.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,o=yt(n);return u.jsx(Rc,{...o,...r,ref:t})});dg.displayName=cg;var fg="DropdownMenuSubTrigger",Zc=g.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,o=yt(n);return u.jsx(Fc,{...o,...r,ref:t})});Zc.displayName=fg;var hg="DropdownMenuSubContent",Xc=g.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,o=yt(n);return u.jsx(Ic,{...o,...r,ref:t,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});Xc.displayName=hg;var pg=Lc,mg=Bc,gg=$c,Qc=Uc,Jc=Kc,ed=Hc,td=Wc,nd=Vc,rd=Gc,od=Yc,ad=Zc,sd=Xc;const bg=pg,xg=mg,yg=g.forwardRef(({className:e,inset:t,children:n,...r},o)=>u.jsxs(ad,{ref:o,className:re("flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",t&&"pl-8",e),...r,children:[n,u.jsx(ei,{className:"ml-auto"})]}));yg.displayName=ad.displayName;const vg=g.forwardRef(({className:e,...t},n)=>u.jsx(sd,{ref:n,className:re("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...t}));vg.displayName=sd.displayName;const id=g.forwardRef(({className:e,sideOffset:t=4,...n},r)=>u.jsx(gg,{children:u.jsx(Qc,{ref:r,sideOffset:t,className:re("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...n})}));id.displayName=Qc.displayName;const mn=g.forwardRef(({className:e,inset:t,...n},r)=>u.jsx(ed,{ref:r,className:re("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",t&&"pl-8",e),...n}));mn.displayName=ed.displayName;const wg=g.forwardRef(({className:e,children:t,checked:n,...r},o)=>u.jsxs(td,{ref:o,className:re("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),checked:n,...r,children:[u.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:u.jsx(rd,{children:u.jsx(Mn,{className:"h-4 w-4"})})}),t]}));wg.displayName=td.displayName;const Cg=g.forwardRef(({className:e,children:t,...n},r)=>u.jsxs(nd,{ref:r,className:re("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...n,children:[u.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:u.jsx(rd,{children:u.jsx($l,{className:"h-2 w-2 fill-current"})})}),t]}));Cg.displayName=nd.displayName;const _g=g.forwardRef(({className:e,inset:t,...n},r)=>u.jsx(Jc,{ref:r,className:re("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",e),...n}));_g.displayName=Jc.displayName;const As=g.forwardRef(({className:e,...t},n)=>u.jsx(od,{ref:n,className:re("-mx-1 my-1 h-px bg-muted",e),...t}));As.displayName=od.displayName;var kg=/(?:^|\s)(!\[(.+|:?)]\((\S+)(?:(?:\s+)["'](\S+)["'])?\))$/,Sg=mt.create({name:"image",addOptions(){return{inline:!1,allowBase64:!1,HTMLAttributes:{}}},inline(){return this.options.inline},group(){return this.options.inline?"inline":"block"},draggable:!0,addAttributes(){return{src:{default:null},alt:{default:null},title:{default:null},width:{default:null},height:{default:null}}},parseHTML(){return[{tag:this.options.allowBase64?"img[src]":'img[src]:not([src^="data:"])'}]},renderHTML({HTMLAttributes:e}){return["img",Mp(this.options.HTMLAttributes,e)]},addCommands(){return{setImage:e=>({commands:t})=>t.insertContent({type:this.name,attrs:e})}},addInputRules(){return[Tp({find:kg,type:this.type,getAttributes:e=>{const[,,t,n,r]=e;return{src:n,alt:t,title:r}}})]}}),Eg=Sg,jg=Pp,Ag=Rp,Dg=Fp;const _u={};function Ng(e){let t=_u[e];if(t)return t;t=_u[e]=[];for(let n=0;n<128;n++){const r=String.fromCharCode(n);t.push(r)}for(let n=0;n<e.length;n++){const r=e.charCodeAt(n);t[r]="%"+("0"+r.toString(16).toUpperCase()).slice(-2)}return t}function gr(e,t){typeof t!="string"&&(t=gr.defaultChars);const n=Ng(t);return e.replace(/(%[a-f0-9]{2})+/gi,function(r){let o="";for(let a=0,i=r.length;a<i;a+=3){const l=parseInt(r.slice(a+1,a+3),16);if(l<128){o+=n[l];continue}if((l&224)===192&&a+3<i){const d=parseInt(r.slice(a+4,a+6),16);if((d&192)===128){const h=l<<6&1984|d&63;h<128?o+="":o+=String.fromCharCode(h),a+=3;continue}}if((l&240)===224&&a+6<i){const d=parseInt(r.slice(a+4,a+6),16),h=parseInt(r.slice(a+7,a+9),16);if((d&192)===128&&(h&192)===128){const p=l<<12&61440|d<<6&4032|h&63;p<2048||p>=55296&&p<=57343?o+="":o+=String.fromCharCode(p),a+=6;continue}}if((l&248)===240&&a+9<i){const d=parseInt(r.slice(a+4,a+6),16),h=parseInt(r.slice(a+7,a+9),16),p=parseInt(r.slice(a+10,a+12),16);if((d&192)===128&&(h&192)===128&&(p&192)===128){let y=l<<18&1835008|d<<12&258048|h<<6&4032|p&63;y<65536||y>1114111?o+="":(y-=65536,o+=String.fromCharCode(55296+(y>>10),56320+(y&1023))),a+=9;continue}}o+=""}return o})}gr.defaultChars=";/?:@&=+$,#";gr.componentChars="";const ku={};function Tg(e){let t=ku[e];if(t)return t;t=ku[e]=[];for(let n=0;n<128;n++){const r=String.fromCharCode(n);/^[0-9a-z]$/i.test(r)?t.push(r):t.push("%"+("0"+n.toString(16).toUpperCase()).slice(-2))}for(let n=0;n<e.length;n++)t[e.charCodeAt(n)]=e[n];return t}function fo(e,t,n){typeof t!="string"&&(n=t,t=fo.defaultChars),typeof n>"u"&&(n=!0);const r=Tg(t);let o="";for(let a=0,i=e.length;a<i;a++){const l=e.charCodeAt(a);if(n&&l===37&&a+2<i&&/^[0-9a-f]{2}$/i.test(e.slice(a+1,a+3))){o+=e.slice(a,a+3),a+=2;continue}if(l<128){o+=r[l];continue}if(l>=55296&&l<=57343){if(l>=55296&&l<=56319&&a+1<i){const d=e.charCodeAt(a+1);if(d>=56320&&d<=57343){o+=encodeURIComponent(e[a]+e[a+1]),a++;continue}}o+="%EF%BF%BD";continue}o+=encodeURIComponent(e[a])}return o}fo.defaultChars=";/?:@&=+$,-_.!~*'()#";fo.componentChars="-_.!~*'()";function ci(e){let t="";return t+=e.protocol||"",t+=e.slashes?"//":"",t+=e.auth?e.auth+"@":"",e.hostname&&e.hostname.indexOf(":")!==-1?t+="["+e.hostname+"]":t+=e.hostname||"",t+=e.port?":"+e.port:"",t+=e.pathname||"",t+=e.search||"",t+=e.hash||"",t}function Go(){this.protocol=null,this.slashes=null,this.auth=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.pathname=null}const Mg=/^([a-z0-9.+-]+:)/i,Pg=/:[0-9]*$/,Rg=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,Fg=["<",">",'"',"`"," ","\r",`
`,"	"],Ig=["{","}","|","\\","^","`"].concat(Fg),Og=["'"].concat(Ig),Su=["%","/","?",";","#"].concat(Og),Eu=["/","?","#"],Lg=255,ju=/^[+a-z0-9A-Z_-]{0,63}$/,zg=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,Au={javascript:!0,"javascript:":!0},Du={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};function di(e,t){if(e&&e instanceof Go)return e;const n=new Go;return n.parse(e,t),n}Go.prototype.parse=function(e,t){let n,r,o,a=e;if(a=a.trim(),!t&&e.split("#").length===1){const h=Rg.exec(a);if(h)return this.pathname=h[1],h[2]&&(this.search=h[2]),this}let i=Mg.exec(a);if(i&&(i=i[0],n=i.toLowerCase(),this.protocol=i,a=a.substr(i.length)),(t||i||a.match(/^\/\/[^@\/]+@[^@\/]+/))&&(o=a.substr(0,2)==="//",o&&!(i&&Au[i])&&(a=a.substr(2),this.slashes=!0)),!Au[i]&&(o||i&&!Du[i])){let h=-1;for(let w=0;w<Eu.length;w++)r=a.indexOf(Eu[w]),r!==-1&&(h===-1||r<h)&&(h=r);let p,y;h===-1?y=a.lastIndexOf("@"):y=a.lastIndexOf("@",h),y!==-1&&(p=a.slice(0,y),a=a.slice(y+1),this.auth=p),h=-1;for(let w=0;w<Su.length;w++)r=a.indexOf(Su[w]),r!==-1&&(h===-1||r<h)&&(h=r);h===-1&&(h=a.length),a[h-1]===":"&&h--;const v=a.slice(0,h);a=a.slice(h),this.parseHost(v),this.hostname=this.hostname||"";const x=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!x){const w=this.hostname.split(/\./);for(let _=0,E=w.length;_<E;_++){const k=w[_];if(k&&!k.match(ju)){let S="";for(let A=0,T=k.length;A<T;A++)k.charCodeAt(A)>127?S+="x":S+=k[A];if(!S.match(ju)){const A=w.slice(0,_),T=w.slice(_+1),$=k.match(zg);$&&(A.push($[1]),T.unshift($[2])),T.length&&(a=T.join(".")+a),this.hostname=A.join(".");break}}}}this.hostname.length>Lg&&(this.hostname=""),x&&(this.hostname=this.hostname.substr(1,this.hostname.length-2))}const l=a.indexOf("#");l!==-1&&(this.hash=a.substr(l),a=a.slice(0,l));const d=a.indexOf("?");return d!==-1&&(this.search=a.substr(d),a=a.slice(0,d)),a&&(this.pathname=a),Du[n]&&this.hostname&&!this.pathname&&(this.pathname=""),this};Go.prototype.parseHost=function(e){let t=Pg.exec(e);t&&(t=t[0],t!==":"&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)};const Bg=Object.freeze(Object.defineProperty({__proto__:null,decode:gr,encode:fo,format:ci,parse:di},Symbol.toStringTag,{value:"Module"})),ud=/[\0-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,ld=/[\0-\x1F\x7F-\x9F]/,$g=/[\xAD\u0600-\u0605\u061C\u06DD\u070F\u0890\u0891\u08E2\u180E\u200B-\u200F\u202A-\u202E\u2060-\u2064\u2066-\u206F\uFEFF\uFFF9-\uFFFB]|\uD804[\uDCBD\uDCCD]|\uD80D[\uDC30-\uDC3F]|\uD82F[\uDCA0-\uDCA3]|\uD834[\uDD73-\uDD7A]|\uDB40[\uDC01\uDC20-\uDC7F]/,fi=/[!-#%-\*,-\/:;\?@\[-\]_\{\}\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061D-\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C77\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1B7D\u1B7E\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4F\u2E52-\u2E5D\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD803[\uDEAD\uDF55-\uDF59\uDF86-\uDF89]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC8\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDC4B-\uDC4F\uDC5A\uDC5B\uDC5D\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDE60-\uDE6C\uDEB9\uDF3C-\uDF3E]|\uD806[\uDC3B\uDD44-\uDD46\uDDE2\uDE3F-\uDE46\uDE9A-\uDE9C\uDE9E-\uDEA2\uDF00-\uDF09]|\uD807[\uDC41-\uDC45\uDC70\uDC71\uDEF7\uDEF8\uDF43-\uDF4F\uDFFF]|\uD809[\uDC70-\uDC74]|\uD80B[\uDFF1\uDFF2]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD81B[\uDE97-\uDE9A\uDFE2]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]|\uD83A[\uDD5E\uDD5F]/,cd=/[\$\+<->\^`\|~\xA2-\xA6\xA8\xA9\xAC\xAE-\xB1\xB4\xB8\xD7\xF7\u02C2-\u02C5\u02D2-\u02DF\u02E5-\u02EB\u02ED\u02EF-\u02FF\u0375\u0384\u0385\u03F6\u0482\u058D-\u058F\u0606-\u0608\u060B\u060E\u060F\u06DE\u06E9\u06FD\u06FE\u07F6\u07FE\u07FF\u0888\u09F2\u09F3\u09FA\u09FB\u0AF1\u0B70\u0BF3-\u0BFA\u0C7F\u0D4F\u0D79\u0E3F\u0F01-\u0F03\u0F13\u0F15-\u0F17\u0F1A-\u0F1F\u0F34\u0F36\u0F38\u0FBE-\u0FC5\u0FC7-\u0FCC\u0FCE\u0FCF\u0FD5-\u0FD8\u109E\u109F\u1390-\u1399\u166D\u17DB\u1940\u19DE-\u19FF\u1B61-\u1B6A\u1B74-\u1B7C\u1FBD\u1FBF-\u1FC1\u1FCD-\u1FCF\u1FDD-\u1FDF\u1FED-\u1FEF\u1FFD\u1FFE\u2044\u2052\u207A-\u207C\u208A-\u208C\u20A0-\u20C0\u2100\u2101\u2103-\u2106\u2108\u2109\u2114\u2116-\u2118\u211E-\u2123\u2125\u2127\u2129\u212E\u213A\u213B\u2140-\u2144\u214A-\u214D\u214F\u218A\u218B\u2190-\u2307\u230C-\u2328\u232B-\u2426\u2440-\u244A\u249C-\u24E9\u2500-\u2767\u2794-\u27C4\u27C7-\u27E5\u27F0-\u2982\u2999-\u29D7\u29DC-\u29FB\u29FE-\u2B73\u2B76-\u2B95\u2B97-\u2BFF\u2CE5-\u2CEA\u2E50\u2E51\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFF\u3004\u3012\u3013\u3020\u3036\u3037\u303E\u303F\u309B\u309C\u3190\u3191\u3196-\u319F\u31C0-\u31E3\u31EF\u3200-\u321E\u322A-\u3247\u3250\u3260-\u327F\u328A-\u32B0\u32C0-\u33FF\u4DC0-\u4DFF\uA490-\uA4C6\uA700-\uA716\uA720\uA721\uA789\uA78A\uA828-\uA82B\uA836-\uA839\uAA77-\uAA79\uAB5B\uAB6A\uAB6B\uFB29\uFBB2-\uFBC2\uFD40-\uFD4F\uFDCF\uFDFC-\uFDFF\uFE62\uFE64-\uFE66\uFE69\uFF04\uFF0B\uFF1C-\uFF1E\uFF3E\uFF40\uFF5C\uFF5E\uFFE0-\uFFE6\uFFE8-\uFFEE\uFFFC\uFFFD]|\uD800[\uDD37-\uDD3F\uDD79-\uDD89\uDD8C-\uDD8E\uDD90-\uDD9C\uDDA0\uDDD0-\uDDFC]|\uD802[\uDC77\uDC78\uDEC8]|\uD805\uDF3F|\uD807[\uDFD5-\uDFF1]|\uD81A[\uDF3C-\uDF3F\uDF45]|\uD82F\uDC9C|\uD833[\uDF50-\uDFC3]|\uD834[\uDC00-\uDCF5\uDD00-\uDD26\uDD29-\uDD64\uDD6A-\uDD6C\uDD83\uDD84\uDD8C-\uDDA9\uDDAE-\uDDEA\uDE00-\uDE41\uDE45\uDF00-\uDF56]|\uD835[\uDEC1\uDEDB\uDEFB\uDF15\uDF35\uDF4F\uDF6F\uDF89\uDFA9\uDFC3]|\uD836[\uDC00-\uDDFF\uDE37-\uDE3A\uDE6D-\uDE74\uDE76-\uDE83\uDE85\uDE86]|\uD838[\uDD4F\uDEFF]|\uD83B[\uDCAC\uDCB0\uDD2E\uDEF0\uDEF1]|\uD83C[\uDC00-\uDC2B\uDC30-\uDC93\uDCA0-\uDCAE\uDCB1-\uDCBF\uDCC1-\uDCCF\uDCD1-\uDCF5\uDD0D-\uDDAD\uDDE6-\uDE02\uDE10-\uDE3B\uDE40-\uDE48\uDE50\uDE51\uDE60-\uDE65\uDF00-\uDFFF]|\uD83D[\uDC00-\uDED7\uDEDC-\uDEEC\uDEF0-\uDEFC\uDF00-\uDF76\uDF7B-\uDFD9\uDFE0-\uDFEB\uDFF0]|\uD83E[\uDC00-\uDC0B\uDC10-\uDC47\uDC50-\uDC59\uDC60-\uDC87\uDC90-\uDCAD\uDCB0\uDCB1\uDD00-\uDE53\uDE60-\uDE6D\uDE70-\uDE7C\uDE80-\uDE88\uDE90-\uDEBD\uDEBF-\uDEC5\uDECE-\uDEDB\uDEE0-\uDEE8\uDEF0-\uDEF8\uDF00-\uDF92\uDF94-\uDFCA]/,dd=/[ \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000]/,qg=Object.freeze(Object.defineProperty({__proto__:null,Any:ud,Cc:ld,Cf:$g,P:fi,S:cd,Z:dd},Symbol.toStringTag,{value:"Module"})),Ug=new Uint16Array('<\0\0\0\0\0\0EMabcfglmnoprstu\\bfmsligP&cutereve;iyx}rc;r;ravepha;acr;d;gpon;f;plyFunction;ingcsr;ign;ildemlaceforsucrkslash;;ed;y;crtause;noullis;a;r;pf;eve;cmpeq;HOacdefhilorsucy;PYcpyute;;italDifferentialD;leys;aeioron;dilrc;nint;ot;dnilla;terDot;i;rcleDMPTot;inus;lus;imes;ocskwiseContourIntegral;eCurlyDQoubleQuote;uote;lnpuon;e;gitruent;nt;ourIntegral;fr;oduct;nterClockwiseContourIntegral;oss;cr;p;Cap;DJSZacefios;otrahd;cy;cy;cy;grsger;r;hv;ayron;;l;ta;r;afcmriticalADGTcute;o;bleAcute;rave;ilde;ond;ferentialD;\0\0\0\0f;;DEot;qual;bleCDLRUVontourIntegrao\0\0nArrow;eoftARTrrow;ightArrow;engLReftARrrow;ightArrow;ightArrow;ightATrrow;ee;p\0\0rrow;ownArrow;erticalBar;nABLRTarrow;BUar;pArrow;reve;eft\0\0ightVector;eeVector;ector;Bar;ight\0eeVector;ector;Bar;ee;Arrow;ctr;rok;NTacdfglmopqstuxG;Hcuteaiyron;rc;ot;r;raveement;apcr;ty\0\0mallSquare;erySmallSquare;gpon;f;silon;uail;Tilde;librium;cir;m;a;mlipsts;onentialE;cfiosy;r;lled\0\0mallSquare;erySmallSquare;\0\0\0f;All;riertrf;cJTabcdfgorstcy;>mma;d;reve;eiydil;rc;;ot;r;;pf;eaterEFGLSTqual;Less;ullEqual;reater;ess;lantEqual;ilde;cr;;AacfiosuRDcy;ctek;;irc;r;lbertSpace;\0f;izontalLine;ctrok;mpownHumqual;EJOacdfgmnostucy;lig;cy;cuteiyrc;ot;r;rave;apcgr;inaryI;lie\0;egrral;section;isibleCTomma;imes;gpton;f;a;cr;ilde;\0cy;lcfosuiyrc;;r;pf;\0r;rcy;kcy;HJacfoscy;cy;ppa;eydil;;r;pf;cr;JTaceflmostcy;<cmnprute;bda;g;lacetrf;r;aeyron;dil;;fstACDFRTUVarnrgleBracket;row;BRar;ightArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ightAVrrow;ector;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;ightsEFGLSTqualGreater;ullEqual;reater;ess;lantEqual;ilde;r;;eftarrow;idot;npwgLRlreftARrrow;ightArrow;ightArrow;eftarightightf;erLReftArrow;ightArrow;cht;rok;;acefiosup;y;dliumSpace;lintrf;r;nusPlus;pf;c;Jacefostucy;cute;aeyron;dil;;gswativeMTVediumSpace;hicneryThitedGLreaterGreateessLesLine;r;Bnptreak;BreakingSpace;f;;CDEGHLNPRSTVoungruent;pCap;oubleVerticalBar;lqxement;ual;Tilde;ists;reater;EFGLSTqual;ullEqual;reater;ess;lantEqual;ilde;umpownHump;qual;efstTriangle;BEar;qual;s;EGLSTqual;reater;ess;lantEqual;ilde;estedGLreaterGreater;essLess;recedes;ESqual;lantEqual;eiverseElement;ghtTriangle;BEar;qual;quuareSubpset;Equal;erset;Equal;bcpset;Equal;ceeds;ESTqual;lantEqual;ilde;erset;Equal;ilde;EFTqual;ullEqual;ilde;erticalBar;cr;ilde;Eacdfgmoprstuvlig;cuteiyrc;blac;r;raveaeicr;ga;cron;pf;enCurlyDQoubleQuote;uote;;clr;ashidees;mlerBParr;acek;et;arenthesis;acfhilorsrtialD;y;r;i;;usMinus;ipncareplanf;;eiocedes;ESTqual;lantEqual;ilde;me;dpuct;ortion;al;cir;;UfosOT"r;pf;cr;BEacefhiorsuarr;Gcnrute;g;r;tl;aeyron;dil;;;verseEUlqement;uilibrium;pEquilibrium;ro;ghtACDFTUVanrgleBracket;row;BLar;eftArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;puf;ndImplies;ightarrow;chr;;leDelayed;HOacfhimoqstuCcHcy;y;FTcy;cute;;aeiyron;dil;rc;;r;ortDLRUownArroweftArrowightArrowpArrow;gma;allCircle;pf;\0\0t;are;ISUntersection;ubpset;Equal;erset;Equal;nion;cr;ar;bcmp;set;Equal;cheeds;ESTqual;lantEqual;ilde;Th;;esrset;Equal;etHRSacfhiorsORNADE;Hccy;y;bu;;aeyron;dil;;r;ei\0efore;a;cnkSpace;Space;lde;EFTqual;ullEqual;ilde;pf;ipleDot;ctr;rok;\0\0\0\0\0\0\0cruter;ocir;r\0y;ve;iyrc;blac;r;raveacr;dierBParr;acek;et;arenthesis;on;Plus;gpon;f;ADETadpsrrow;BDar;ownArrow;ownArrow;quilibrium;ee;Arrow;ownerLReftArrow;ightArrow;i;lon;ing;cr;ilde;mlDbcdefosvash;ar;y;ash;l;er;btyar;;icalBLSTar;ine;eparator;ilde;ThinSpace;r;pf;cr;dash;cefosirc;dge;r;pf;cr;fiosr;;pf;cr;AIUacfosucy;cy;cy;cuteiyrc;;r;pf;cr;ml;Hacdefoscy;cute;ayron;;ot;\0oWidta;r;pf;cr;\0\0\0\0\0\0\0cutereve;;Ediuy;;rcte;lig;r;raveepfpsym;ha;apcclr;g;\0\0;adsvnd;;lope;;;elmrsz;esd;a;;;;;;;;t;vb;d;pth;arr;gpon;f;;Eaeiop;cir;;d;s;rox;eingctyr;;mp;eildemlcioninnt;Nabcdefiklnoprsuot;crkcepsong;psilon;rime;im;eq;ee;ed;gerk;tbrk;oy;quo;cmprtaus;eptyv;snoahw;;een;r;gcostuvwaiurc;pdptot;lus;imes;\0\0cup;ar;riangleduown;p;plus;earow;akocnklstozenge;riangle;dlrown;eft;ight;k;\0\0;;4;ck;eo;q=uiv;t;ptwxf;;tomtie;DHUVbdhmptuvLRlr;;;;;DUdu;;;;LRlr;;;;;HLRhlr;;;;;;ox;LRlr;;;;;DUdu;;;;inus;lus;imes;LRlr;;;;;HLRhlr;;;;;;evbarceior;mi;m;el;bh;sub;l;etp;Ee;;q\0\0\0\0\0\0\0\0\0\0cprute;;abcdsnd;rcup;aup;p;ot;;eot;aeiu\0s;on;dilrc;ps;sm;ot;dmnilptyv;t;err;ceiy;ck;mark;r;Ecefms;;elq;e\0\0rrowlreft;ight;RSacd;st;irc;ash;nint;id;cir;ubs;uit\0on;e;q\0\0a;t;;flemxente\0;dot;nfry;o;sr;aorr;ss;cur;bp;e;;e;dot;delprvwarrlr;;\0\0r;c;arr;p;;bcdosrcap;aup;p;ot;r;;alrvrr;m;yevwq\0\0reuee;edge;enearrowlreftightecioninnt;lcty;AHabcdefhijlorstuwzrar;glrsger;eth;h;varow;aayron;;;aogrr;tseq;glmta;ptyv;irsht;;arlraegsvm;osnd;suit;amma;in;;iode;ontimes;ncy;c\0\0rn;op;lptuwlar;f;;empsq;dot;inus;lus;quare;blebarwedgnadhownarrowarpoonlrefighkaro\0\0rn;op;cotry;;l;rok;drot;i;fahraangle;ciy;grarr;DacdefglmnopqrstuxDoocsuteter;aioyron;r;clon;;ot;Drot;;;rsave;dot;;ilsnters;;;dot;apscr;ty;svetp1;;;gs;p;gpon;f;alsr;sl;us;i;lvon;csuviorc\0\0antgltressaeils;st;v;DD;parsl;Daot;rr;cdir;oah;mrlo;cipl;seoctationential\0\0\0\0\0\0\0llingdotsey;male;ilrlig;\0\0g;ig;;lig;lig;fjaltt;ig;ns;of;\0f;ak;v;artint;aocs\0\0;;;;\0;;\0\0;;5;\0;;8;l;wn;cr;Eabcdefgijlnorstv;l;cmpute;ma;d;reve;iyrc;;ot;;lqs;qslan;cdlc;ot;o;l;;es;r;;gmel;cy;;Eaj;;;Eaes;p;prox;q;qim;pf;cir;m;el;;>;cdlqrci;r;ot;Par;uest;adels\0pror;qlqlesienrtneqq;Aabcefkosyrilmrrsfildrcy;;cwir;;ar;irc;alrrts;uitlip;con;r;sewarow;arow;amoprrr;tht;klreftarrow;ightarrow;f;bar;cltr;asrok;bpull;hen\0\0\0\0\0\0cute;iyrc;cxy;clfr;rave;inoinnt;t;fin;ta;lig;aopcgtr;elpinarh;f;ed;;cfotare;in;tie;do;celpal;grerarhk;rod;cgpty;on;f;a;uestcir;n;Edsv;ot;;v;;ilde;\0cy;lcfmosuiyrc;;r;ath;pf;\0r;rcy;kcy;acfghjosppa;v;eydil;;r;reen;cy;cy;pf;cr;ABEHabcdefghjlmnoprstuvartrail;arr;;g;ar;\0\0\0\0\0\0\0\0\0ute;mptyv;rabda;g;dl;;uor;bfhlpst;fs;s;p;l;im;l;;aeil;;s;abrrr;rk;akcek;;es;ldu;;aeuyron;diil;;cqrsa;uo;rduhar;shar;h;;fgqstahlrtrrow;taarpoonduownpeftarrows;ightahsrrow;sarpoonquigarrohreetimes;;qslan;cdgsc;ot;o;r;;es;adegspproot;qgqgtiilrsht;;;E;rdu;l;lk;cy;;achtrorneard;ri;iodot;ust;acheEaes;p;prox;q;qim;abnoptwznrg;r;rglmreftarightapsto;ightparrowlrefight;aflr;;us;imes;st;;efngear;lt;achmtrornear;d;;ri;achiqtquo;r;m;eg;;buo;r;rok;<;cdhilqrci;r;remes;arr;uest;Piar;;efrdushar;har;enrtneqq;DacdefhilnopsuDot;clprret;;ese;sto;dluowefker;oymma;;ash;asuredangler;o;cdnro;acdsir;otus;bd;u;p;dpels;f;ctr;pos;lmtimap;GLRVabcdefghijlmoprstuvwgt;;veltftarrrow;ightarrow;;;vightarrow;Ddash;ash;bcnptlaute;g;;Eiop;d;s;rour;al;s\0pmp;eaeouy\0;on;dil;ng;dot;p;;ash;;Aadqsxrr;rhrk;;oot;uieiar;ist;sr;Eest;qs;qslani;rAaprrr;ar;;sv;d;cy;AEadestr;rr;r;;fqstarrroightarro;qslan;si;ri;eiptf;;inn;Edv;ot;;;i;v;;aorr;astllel;;lint;;ceu;c;eAaitrrr;cw;;ghtarrowri;echimpqu;ceru;ort\0\0arm;e;qsubpbcp;Ees;et;eq;qc;e;Ees;et;eq;qgilrldeianglelreft;eight;e;m;esro;p;DHadgilrsash;arr;p;ash;et;;>nfin;Aetrr;;;r<ie;Atrr;rie;im;Aanrr;rhrk;;oear;\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0csuteiyr;c;abioslac;v;old;lig;crir;;\0\0\0n;ave;bmar;acitrirr;oss;n;aeicr;ga;cdnron;;pf;aelr;rp;;adiosvr;efmr;ofgof;r;lope;;cloashl;idees;as;mlbar;\0\0\0\0\0\0\0\0\0r;ast;lle\0\0m;;y;rcimptnt;od;il;enk;r;imo;v;mane;;tvchfork;aunckk;h;s;abcdemstcir;ir;ou;;nim;wo;ipuntint;f;nd;Eaceinosu;p;u;c;acenspprourlyeaespprox;qq;im;ime;sEasdfpalslar;ine;urf;;trel;cir;;ncsp;fiopsur;pf;rime;cr;aeoteirnionnt;st;eABHabcdefhilmnoprstuxartrail;arar;cdenqrteu;te;imptyv;g;del;;uor;abcfhlpstwp;;fs;;s;l;im;l;;aiil;o;nalabrrrk;akcek;;es;ldu;;aeuyron;diil;;clqsa;dhar;uo;rh;acgl;ipsnart;ilrsht;;aordu;l;;v;gnshtahlrstrrow;taarpoonduowpeftahrrowarpoonightarrows;quigarrohreetimes;g;ingdotseahmra;oust;achemid;abptnrg;r;raflr;;us;imes;apr;gt;olint;arachqquo;r;buo;rhirremes;i;efltri;luhar;;\0\0\0\0\0\0\0cute;qu;Eaceinpsy;\0;on;u;dil;rc;Eas;p;im;olint;i;ot;be;Aacmstxrr;rhr;oti;war;minnut;r;oacoyrp;hycy;;rt\0\0iaragmma;fv;;deglnprot;;q;E;;E;e;lus;arr;araeitlslsetmhp;parsl;dle;;e;s;flptcy;;b;ar;f;adres;uitcsuaup;s;p;s;ubp;eset;e;eset;e;afrarcemtr;tmiararr;fanighteppsilohsbcmnp;Edemnprs;ot;;dot;ult;Ee;;lus;arr;eiut;enq;qeq;qm;bp;;c;acenspprourlyeaespproqg;123;Edehlmnps;ost;ub;;dot;soul;b;arr;ult;Ee;;lus;eiut;enq;qeq;qm;bp;;Aanrr;rhr;owar;lig\0\0\0\0\0\0\0\0\0\0\0\0get;;raeyron;dil;;lrec;r;eiko\0e4fa;svym;cnkaspproimsasrnes;bd;ar;;eps;bcfot;ir;;ork;rime;aipdadempstngle;dlqrowneft;e;ight;eot;inus;lus;b;ime;ezium;chtry;;cy;rok;ioxheadlreftarroightarrowAHabcdfghlmoprstuwrar;cruter\0y;ve;iyrc;abhrlac;airsht;;raverlrlk;ct\0\0rn;erop;ri;alcr;gpon;f;adhlsuownarpoonlrefighi;hlonparrows;cit\0\0rn;erop;ng;ri;cr;dirot;lde;i;famrlangle;ABDacdeflnoprszrar;v;asnrgrt;eknprstappothinhirop;hiugmbpsetneq;q;setneq;q;hretianglelreftighty;ashelr;bear;q;lip;btar;trsubppf;rotrcur;bpnEenEeigzag;cefoprsirc;dibgar;e;q;erp;r;pf;;eatcr;\0\0\0\0\0\0\0trr;Aarr;Aarrais;dptfl;imAarrcqr;ptracefiosucuyte;iyrc;;nr;cy;pf;cr;cmy;lacdefhioswcute;ayron;;ot;ettra;r;cy;grarr;pf;cr;jn;j;'.split("").map(e=>e.charCodeAt(0))),Kg=new Uint16Array("aglq	\x1B\0\0p;os;t;t;uot;".split("").map(e=>e.charCodeAt(0)));var os;const Hg=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]),Wg=(os=String.fromCodePoint)!==null&&os!==void 0?os:function(e){let t="";return e>65535&&(e-=65536,t+=String.fromCharCode(e>>>10&1023|55296),e=56320|e&1023),t+=String.fromCharCode(e),t};function Vg(e){var t;return e>=55296&&e<=57343||e>1114111?65533:(t=Hg.get(e))!==null&&t!==void 0?t:e}var lt;(function(e){e[e.NUM=35]="NUM",e[e.SEMI=59]="SEMI",e[e.EQUALS=61]="EQUALS",e[e.ZERO=48]="ZERO",e[e.NINE=57]="NINE",e[e.LOWER_A=97]="LOWER_A",e[e.LOWER_F=102]="LOWER_F",e[e.LOWER_X=120]="LOWER_X",e[e.LOWER_Z=122]="LOWER_Z",e[e.UPPER_A=65]="UPPER_A",e[e.UPPER_F=70]="UPPER_F",e[e.UPPER_Z=90]="UPPER_Z"})(lt||(lt={}));const Gg=32;var Nn;(function(e){e[e.VALUE_LENGTH=49152]="VALUE_LENGTH",e[e.BRANCH_LENGTH=16256]="BRANCH_LENGTH",e[e.JUMP_TABLE=127]="JUMP_TABLE"})(Nn||(Nn={}));function Ds(e){return e>=lt.ZERO&&e<=lt.NINE}function Yg(e){return e>=lt.UPPER_A&&e<=lt.UPPER_F||e>=lt.LOWER_A&&e<=lt.LOWER_F}function Zg(e){return e>=lt.UPPER_A&&e<=lt.UPPER_Z||e>=lt.LOWER_A&&e<=lt.LOWER_Z||Ds(e)}function Xg(e){return e===lt.EQUALS||Zg(e)}var ut;(function(e){e[e.EntityStart=0]="EntityStart",e[e.NumericStart=1]="NumericStart",e[e.NumericDecimal=2]="NumericDecimal",e[e.NumericHex=3]="NumericHex",e[e.NamedEntity=4]="NamedEntity"})(ut||(ut={}));var Dn;(function(e){e[e.Legacy=0]="Legacy",e[e.Strict=1]="Strict",e[e.Attribute=2]="Attribute"})(Dn||(Dn={}));class Qg{constructor(t,n,r){this.decodeTree=t,this.emitCodePoint=n,this.errors=r,this.state=ut.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=Dn.Strict}startEntity(t){this.decodeMode=t,this.state=ut.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1}write(t,n){switch(this.state){case ut.EntityStart:return t.charCodeAt(n)===lt.NUM?(this.state=ut.NumericStart,this.consumed+=1,this.stateNumericStart(t,n+1)):(this.state=ut.NamedEntity,this.stateNamedEntity(t,n));case ut.NumericStart:return this.stateNumericStart(t,n);case ut.NumericDecimal:return this.stateNumericDecimal(t,n);case ut.NumericHex:return this.stateNumericHex(t,n);case ut.NamedEntity:return this.stateNamedEntity(t,n)}}stateNumericStart(t,n){return n>=t.length?-1:(t.charCodeAt(n)|Gg)===lt.LOWER_X?(this.state=ut.NumericHex,this.consumed+=1,this.stateNumericHex(t,n+1)):(this.state=ut.NumericDecimal,this.stateNumericDecimal(t,n))}addToNumericResult(t,n,r,o){if(n!==r){const a=r-n;this.result=this.result*Math.pow(o,a)+parseInt(t.substr(n,a),o),this.consumed+=a}}stateNumericHex(t,n){const r=n;for(;n<t.length;){const o=t.charCodeAt(n);if(Ds(o)||Yg(o))n+=1;else return this.addToNumericResult(t,r,n,16),this.emitNumericEntity(o,3)}return this.addToNumericResult(t,r,n,16),-1}stateNumericDecimal(t,n){const r=n;for(;n<t.length;){const o=t.charCodeAt(n);if(Ds(o))n+=1;else return this.addToNumericResult(t,r,n,10),this.emitNumericEntity(o,2)}return this.addToNumericResult(t,r,n,10),-1}emitNumericEntity(t,n){var r;if(this.consumed<=n)return(r=this.errors)===null||r===void 0||r.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(t===lt.SEMI)this.consumed+=1;else if(this.decodeMode===Dn.Strict)return 0;return this.emitCodePoint(Vg(this.result),this.consumed),this.errors&&(t!==lt.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed}stateNamedEntity(t,n){const{decodeTree:r}=this;let o=r[this.treeIndex],a=(o&Nn.VALUE_LENGTH)>>14;for(;n<t.length;n++,this.excess++){const i=t.charCodeAt(n);if(this.treeIndex=Jg(r,o,this.treeIndex+Math.max(1,a),i),this.treeIndex<0)return this.result===0||this.decodeMode===Dn.Attribute&&(a===0||Xg(i))?0:this.emitNotTerminatedNamedEntity();if(o=r[this.treeIndex],a=(o&Nn.VALUE_LENGTH)>>14,a!==0){if(i===lt.SEMI)return this.emitNamedEntityData(this.treeIndex,a,this.consumed+this.excess);this.decodeMode!==Dn.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1}emitNotTerminatedNamedEntity(){var t;const{result:n,decodeTree:r}=this,o=(r[n]&Nn.VALUE_LENGTH)>>14;return this.emitNamedEntityData(n,o,this.consumed),(t=this.errors)===null||t===void 0||t.missingSemicolonAfterCharacterReference(),this.consumed}emitNamedEntityData(t,n,r){const{decodeTree:o}=this;return this.emitCodePoint(n===1?o[t]&~Nn.VALUE_LENGTH:o[t+1],r),n===3&&this.emitCodePoint(o[t+2],r),r}end(){var t;switch(this.state){case ut.NamedEntity:return this.result!==0&&(this.decodeMode!==Dn.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0;case ut.NumericDecimal:return this.emitNumericEntity(0,2);case ut.NumericHex:return this.emitNumericEntity(0,3);case ut.NumericStart:return(t=this.errors)===null||t===void 0||t.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case ut.EntityStart:return 0}}}function fd(e){let t="";const n=new Qg(e,r=>t+=Wg(r));return function(o,a){let i=0,l=0;for(;(l=o.indexOf("&",l))>=0;){t+=o.slice(i,l),n.startEntity(a);const h=n.write(o,l+1);if(h<0){i=l+n.end();break}i=l+h,l=h===0?i+1:i}const d=t+o.slice(i);return t="",d}}function Jg(e,t,n,r){const o=(t&Nn.BRANCH_LENGTH)>>7,a=t&Nn.JUMP_TABLE;if(o===0)return a!==0&&r===a?n:-1;if(a){const d=r-a;return d<0||d>=o?-1:e[n+d]-1}let i=n,l=i+o-1;for(;i<=l;){const d=i+l>>>1,h=e[d];if(h<r)i=d+1;else if(h>r)l=d-1;else return e[d+o]}return-1}const eb=fd(Ug);fd(Kg);function hd(e,t=Dn.Legacy){return eb(e,t)}function tb(e){return Object.prototype.toString.call(e)}function hi(e){return tb(e)==="[object String]"}const nb=Object.prototype.hasOwnProperty;function rb(e,t){return nb.call(e,t)}function ca(e){return Array.prototype.slice.call(arguments,1).forEach(function(n){if(n){if(typeof n!="object")throw new TypeError(n+"must be object");Object.keys(n).forEach(function(r){e[r]=n[r]})}}),e}function pd(e,t,n){return[].concat(e.slice(0,t),n,e.slice(t+1))}function pi(e){return!(e>=55296&&e<=57343||e>=64976&&e<=65007||(e&65535)===65535||(e&65535)===65534||e>=0&&e<=8||e===11||e>=14&&e<=31||e>=127&&e<=159||e>1114111)}function Yo(e){if(e>65535){e-=65536;const t=55296+(e>>10),n=56320+(e&1023);return String.fromCharCode(t,n)}return String.fromCharCode(e)}const md=/\\([!"#$%&'()*+,\-./:;<=>?@[\\\]^_`{|}~])/g,ob=/&([a-z#][a-z0-9]{1,31});/gi,ab=new RegExp(md.source+"|"+ob.source,"gi"),sb=/^#((?:x[a-f0-9]{1,8}|[0-9]{1,8}))$/i;function ib(e,t){if(t.charCodeAt(0)===35&&sb.test(t)){const r=t[1].toLowerCase()==="x"?parseInt(t.slice(2),16):parseInt(t.slice(1),10);return pi(r)?Yo(r):e}const n=hd(e);return n!==e?n:e}function ub(e){return e.indexOf("\\")<0?e:e.replace(md,"$1")}function br(e){return e.indexOf("\\")<0&&e.indexOf("&")<0?e:e.replace(ab,function(t,n,r){return n||ib(t,r)})}const lb=/[&<>"]/,cb=/[&<>"]/g,db={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;"};function fb(e){return db[e]}function Pn(e){return lb.test(e)?e.replace(cb,fb):e}const hb=/[.?*+^$[\]\\(){}|-]/g;function pb(e){return e.replace(hb,"\\$&")}function Ye(e){switch(e){case 9:case 32:return!0}return!1}function eo(e){if(e>=8192&&e<=8202)return!0;switch(e){case 9:case 10:case 11:case 12:case 13:case 32:case 160:case 5760:case 8239:case 8287:case 12288:return!0}return!1}function to(e){return fi.test(e)||cd.test(e)}function no(e){switch(e){case 33:case 34:case 35:case 36:case 37:case 38:case 39:case 40:case 41:case 42:case 43:case 44:case 45:case 46:case 47:case 58:case 59:case 60:case 61:case 62:case 63:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 124:case 125:case 126:return!0;default:return!1}}function da(e){return e=e.trim().replace(/\s+/g," "),"".toLowerCase()===""&&(e=e.replace(//g,"")),e.toLowerCase().toUpperCase()}const mb={mdurl:Bg,ucmicro:qg},gb=Object.freeze(Object.defineProperty({__proto__:null,arrayReplaceAt:pd,assign:ca,escapeHtml:Pn,escapeRE:pb,fromCodePoint:Yo,has:rb,isMdAsciiPunct:no,isPunctChar:to,isSpace:Ye,isString:hi,isValidEntityCode:pi,isWhiteSpace:eo,lib:mb,normalizeReference:da,unescapeAll:br,unescapeMd:ub},Symbol.toStringTag,{value:"Module"}));function bb(e,t,n){let r,o,a,i;const l=e.posMax,d=e.pos;for(e.pos=t+1,r=1;e.pos<l;){if(a=e.src.charCodeAt(e.pos),a===93&&(r--,r===0)){o=!0;break}if(i=e.pos,e.md.inline.skipToken(e),a===91){if(i===e.pos-1)r++;else if(n)return e.pos=d,-1}}let h=-1;return o&&(h=e.pos),e.pos=d,h}function xb(e,t,n){let r,o=t;const a={ok:!1,pos:0,str:""};if(e.charCodeAt(o)===60){for(o++;o<n;){if(r=e.charCodeAt(o),r===10||r===60)return a;if(r===62)return a.pos=o+1,a.str=br(e.slice(t+1,o)),a.ok=!0,a;if(r===92&&o+1<n){o+=2;continue}o++}return a}let i=0;for(;o<n&&(r=e.charCodeAt(o),!(r===32||r<32||r===127));){if(r===92&&o+1<n){if(e.charCodeAt(o+1)===32)break;o+=2;continue}if(r===40&&(i++,i>32))return a;if(r===41){if(i===0)break;i--}o++}return t===o||i!==0||(a.str=br(e.slice(t,o)),a.pos=o,a.ok=!0),a}function yb(e,t,n,r){let o,a=t;const i={ok:!1,can_continue:!1,pos:0,str:"",marker:0};if(r)i.str=r.str,i.marker=r.marker;else{if(a>=n)return i;let l=e.charCodeAt(a);if(l!==34&&l!==39&&l!==40)return i;t++,a++,l===40&&(l=41),i.marker=l}for(;a<n;){if(o=e.charCodeAt(a),o===i.marker)return i.pos=a+1,i.str+=br(e.slice(t,a)),i.ok=!0,i;if(o===40&&i.marker===41)return i;o===92&&a+1<n&&a++,a++}return i.can_continue=!0,i.str+=br(e.slice(t,a)),i}const vb=Object.freeze(Object.defineProperty({__proto__:null,parseLinkDestination:xb,parseLinkLabel:bb,parseLinkTitle:yb},Symbol.toStringTag,{value:"Module"})),on={};on.code_inline=function(e,t,n,r,o){const a=e[t];return"<code"+o.renderAttrs(a)+">"+Pn(a.content)+"</code>"};on.code_block=function(e,t,n,r,o){const a=e[t];return"<pre"+o.renderAttrs(a)+"><code>"+Pn(e[t].content)+`</code></pre>
`};on.fence=function(e,t,n,r,o){const a=e[t],i=a.info?br(a.info).trim():"";let l="",d="";if(i){const p=i.split(/(\s+)/g);l=p[0],d=p.slice(2).join("")}let h;if(n.highlight?h=n.highlight(a.content,l,d)||Pn(a.content):h=Pn(a.content),h.indexOf("<pre")===0)return h+`
`;if(i){const p=a.attrIndex("class"),y=a.attrs?a.attrs.slice():[];p<0?y.push(["class",n.langPrefix+l]):(y[p]=y[p].slice(),y[p][1]+=" "+n.langPrefix+l);const v={attrs:y};return`<pre><code${o.renderAttrs(v)}>${h}</code></pre>
`}return`<pre><code${o.renderAttrs(a)}>${h}</code></pre>
`};on.image=function(e,t,n,r,o){const a=e[t];return a.attrs[a.attrIndex("alt")][1]=o.renderInlineAsText(a.children,n,r),o.renderToken(e,t,n)};on.hardbreak=function(e,t,n){return n.xhtmlOut?`<br />
`:`<br>
`};on.softbreak=function(e,t,n){return n.breaks?n.xhtmlOut?`<br />
`:`<br>
`:`
`};on.text=function(e,t){return Pn(e[t].content)};on.html_block=function(e,t){return e[t].content};on.html_inline=function(e,t){return e[t].content};function _r(){this.rules=ca({},on)}_r.prototype.renderAttrs=function(t){let n,r,o;if(!t.attrs)return"";for(o="",n=0,r=t.attrs.length;n<r;n++)o+=" "+Pn(t.attrs[n][0])+'="'+Pn(t.attrs[n][1])+'"';return o};_r.prototype.renderToken=function(t,n,r){const o=t[n];let a="";if(o.hidden)return"";o.block&&o.nesting!==-1&&n&&t[n-1].hidden&&(a+=`
`),a+=(o.nesting===-1?"</":"<")+o.tag,a+=this.renderAttrs(o),o.nesting===0&&r.xhtmlOut&&(a+=" /");let i=!1;if(o.block&&(i=!0,o.nesting===1&&n+1<t.length)){const l=t[n+1];(l.type==="inline"||l.hidden||l.nesting===-1&&l.tag===o.tag)&&(i=!1)}return a+=i?`>
`:">",a};_r.prototype.renderInline=function(e,t,n){let r="";const o=this.rules;for(let a=0,i=e.length;a<i;a++){const l=e[a].type;typeof o[l]<"u"?r+=o[l](e,a,t,n,this):r+=this.renderToken(e,a,t)}return r};_r.prototype.renderInlineAsText=function(e,t,n){let r="";for(let o=0,a=e.length;o<a;o++)switch(e[o].type){case"text":r+=e[o].content;break;case"image":r+=this.renderInlineAsText(e[o].children,t,n);break;case"html_inline":case"html_block":r+=e[o].content;break;case"softbreak":case"hardbreak":r+=`
`;break}return r};_r.prototype.render=function(e,t,n){let r="";const o=this.rules;for(let a=0,i=e.length;a<i;a++){const l=e[a].type;l==="inline"?r+=this.renderInline(e[a].children,t,n):typeof o[l]<"u"?r+=o[l](e,a,t,n,this):r+=this.renderToken(e,a,t,n)}return r};function kt(){this.__rules__=[],this.__cache__=null}kt.prototype.__find__=function(e){for(let t=0;t<this.__rules__.length;t++)if(this.__rules__[t].name===e)return t;return-1};kt.prototype.__compile__=function(){const e=this,t=[""];e.__rules__.forEach(function(n){n.enabled&&n.alt.forEach(function(r){t.indexOf(r)<0&&t.push(r)})}),e.__cache__={},t.forEach(function(n){e.__cache__[n]=[],e.__rules__.forEach(function(r){r.enabled&&(n&&r.alt.indexOf(n)<0||e.__cache__[n].push(r.fn))})})};kt.prototype.at=function(e,t,n){const r=this.__find__(e),o=n||{};if(r===-1)throw new Error("Parser rule not found: "+e);this.__rules__[r].fn=t,this.__rules__[r].alt=o.alt||[],this.__cache__=null};kt.prototype.before=function(e,t,n,r){const o=this.__find__(e),a=r||{};if(o===-1)throw new Error("Parser rule not found: "+e);this.__rules__.splice(o,0,{name:t,enabled:!0,fn:n,alt:a.alt||[]}),this.__cache__=null};kt.prototype.after=function(e,t,n,r){const o=this.__find__(e),a=r||{};if(o===-1)throw new Error("Parser rule not found: "+e);this.__rules__.splice(o+1,0,{name:t,enabled:!0,fn:n,alt:a.alt||[]}),this.__cache__=null};kt.prototype.push=function(e,t,n){const r=n||{};this.__rules__.push({name:e,enabled:!0,fn:t,alt:r.alt||[]}),this.__cache__=null};kt.prototype.enable=function(e,t){Array.isArray(e)||(e=[e]);const n=[];return e.forEach(function(r){const o=this.__find__(r);if(o<0){if(t)return;throw new Error("Rules manager: invalid rule name "+r)}this.__rules__[o].enabled=!0,n.push(r)},this),this.__cache__=null,n};kt.prototype.enableOnly=function(e,t){Array.isArray(e)||(e=[e]),this.__rules__.forEach(function(n){n.enabled=!1}),this.enable(e,t)};kt.prototype.disable=function(e,t){Array.isArray(e)||(e=[e]);const n=[];return e.forEach(function(r){const o=this.__find__(r);if(o<0){if(t)return;throw new Error("Rules manager: invalid rule name "+r)}this.__rules__[o].enabled=!1,n.push(r)},this),this.__cache__=null,n};kt.prototype.getRules=function(e){return this.__cache__===null&&this.__compile__(),this.__cache__[e]||[]};function Vt(e,t,n){this.type=e,this.tag=t,this.attrs=null,this.map=null,this.nesting=n,this.level=0,this.children=null,this.content="",this.markup="",this.info="",this.meta=null,this.block=!1,this.hidden=!1}Vt.prototype.attrIndex=function(t){if(!this.attrs)return-1;const n=this.attrs;for(let r=0,o=n.length;r<o;r++)if(n[r][0]===t)return r;return-1};Vt.prototype.attrPush=function(t){this.attrs?this.attrs.push(t):this.attrs=[t]};Vt.prototype.attrSet=function(t,n){const r=this.attrIndex(t),o=[t,n];r<0?this.attrPush(o):this.attrs[r]=o};Vt.prototype.attrGet=function(t){const n=this.attrIndex(t);let r=null;return n>=0&&(r=this.attrs[n][1]),r};Vt.prototype.attrJoin=function(t,n){const r=this.attrIndex(t);r<0?this.attrPush([t,n]):this.attrs[r][1]=this.attrs[r][1]+" "+n};function gd(e,t,n){this.src=e,this.env=n,this.tokens=[],this.inlineMode=!1,this.md=t}gd.prototype.Token=Vt;const wb=/\r\n?|\n/g,Cb=/\0/g;function _b(e){let t;t=e.src.replace(wb,`
`),t=t.replace(Cb,""),e.src=t}function kb(e){let t;e.inlineMode?(t=new e.Token("inline","",0),t.content=e.src,t.map=[0,1],t.children=[],e.tokens.push(t)):e.md.block.parse(e.src,e.md,e.env,e.tokens)}function Sb(e){const t=e.tokens;for(let n=0,r=t.length;n<r;n++){const o=t[n];o.type==="inline"&&e.md.inline.parse(o.content,e.md,e.env,o.children)}}function Eb(e){return/^<a[>\s]/i.test(e)}function jb(e){return/^<\/a\s*>/i.test(e)}function Ab(e){const t=e.tokens;if(e.md.options.linkify)for(let n=0,r=t.length;n<r;n++){if(t[n].type!=="inline"||!e.md.linkify.pretest(t[n].content))continue;let o=t[n].children,a=0;for(let i=o.length-1;i>=0;i--){const l=o[i];if(l.type==="link_close"){for(i--;o[i].level!==l.level&&o[i].type!=="link_open";)i--;continue}if(l.type==="html_inline"&&(Eb(l.content)&&a>0&&a--,jb(l.content)&&a++),!(a>0)&&l.type==="text"&&e.md.linkify.test(l.content)){const d=l.content;let h=e.md.linkify.match(d);const p=[];let y=l.level,v=0;h.length>0&&h[0].index===0&&i>0&&o[i-1].type==="text_special"&&(h=h.slice(1));for(let x=0;x<h.length;x++){const w=h[x].url,_=e.md.normalizeLink(w);if(!e.md.validateLink(_))continue;let E=h[x].text;h[x].schema?h[x].schema==="mailto:"&&!/^mailto:/i.test(E)?E=e.md.normalizeLinkText("mailto:"+E).replace(/^mailto:/,""):E=e.md.normalizeLinkText(E):E=e.md.normalizeLinkText("http://"+E).replace(/^http:\/\//,"");const k=h[x].index;if(k>v){const $=new e.Token("text","",0);$.content=d.slice(v,k),$.level=y,p.push($)}const S=new e.Token("link_open","a",1);S.attrs=[["href",_]],S.level=y++,S.markup="linkify",S.info="auto",p.push(S);const A=new e.Token("text","",0);A.content=E,A.level=y,p.push(A);const T=new e.Token("link_close","a",-1);T.level=--y,T.markup="linkify",T.info="auto",p.push(T),v=h[x].lastIndex}if(v<d.length){const x=new e.Token("text","",0);x.content=d.slice(v),x.level=y,p.push(x)}t[n].children=o=pd(o,i,p)}}}}const bd=/\+-|\.\.|\?\?\?\?|!!!!|,,|--/,Db=/\((c|tm|r)\)/i,Nb=/\((c|tm|r)\)/ig,Tb={c:"",r:"",tm:""};function Mb(e,t){return Tb[t.toLowerCase()]}function Pb(e){let t=0;for(let n=e.length-1;n>=0;n--){const r=e[n];r.type==="text"&&!t&&(r.content=r.content.replace(Nb,Mb)),r.type==="link_open"&&r.info==="auto"&&t--,r.type==="link_close"&&r.info==="auto"&&t++}}function Rb(e){let t=0;for(let n=e.length-1;n>=0;n--){const r=e[n];r.type==="text"&&!t&&bd.test(r.content)&&(r.content=r.content.replace(/\+-/g,"").replace(/\.{2,}/g,"").replace(/([?!])/g,"$1..").replace(/([?!]){4,}/g,"$1$1$1").replace(/,{2,}/g,",").replace(/(^|[^-])---(?=[^-]|$)/mg,"$1").replace(/(^|\s)--(?=\s|$)/mg,"$1").replace(/(^|[^-\s])--(?=[^-\s]|$)/mg,"$1")),r.type==="link_open"&&r.info==="auto"&&t--,r.type==="link_close"&&r.info==="auto"&&t++}}function Fb(e){let t;if(e.md.options.typographer)for(t=e.tokens.length-1;t>=0;t--)e.tokens[t].type==="inline"&&(Db.test(e.tokens[t].content)&&Pb(e.tokens[t].children),bd.test(e.tokens[t].content)&&Rb(e.tokens[t].children))}const Ib=/['"]/,Nu=/['"]/g,Tu="";function zo(e,t,n){return e.slice(0,t)+n+e.slice(t+1)}function Ob(e,t){let n;const r=[];for(let o=0;o<e.length;o++){const a=e[o],i=e[o].level;for(n=r.length-1;n>=0&&!(r[n].level<=i);n--);if(r.length=n+1,a.type!=="text")continue;let l=a.content,d=0,h=l.length;e:for(;d<h;){Nu.lastIndex=d;const p=Nu.exec(l);if(!p)break;let y=!0,v=!0;d=p.index+1;const x=p[0]==="'";let w=32;if(p.index-1>=0)w=l.charCodeAt(p.index-1);else for(n=o-1;n>=0&&!(e[n].type==="softbreak"||e[n].type==="hardbreak");n--)if(e[n].content){w=e[n].content.charCodeAt(e[n].content.length-1);break}let _=32;if(d<h)_=l.charCodeAt(d);else for(n=o+1;n<e.length&&!(e[n].type==="softbreak"||e[n].type==="hardbreak");n++)if(e[n].content){_=e[n].content.charCodeAt(0);break}const E=no(w)||to(String.fromCharCode(w)),k=no(_)||to(String.fromCharCode(_)),S=eo(w),A=eo(_);if(A?y=!1:k&&(S||E||(y=!1)),S?v=!1:E&&(A||k||(v=!1)),_===34&&p[0]==='"'&&w>=48&&w<=57&&(v=y=!1),y&&v&&(y=E,v=k),!y&&!v){x&&(a.content=zo(a.content,p.index,Tu));continue}if(v)for(n=r.length-1;n>=0;n--){let T=r[n];if(r[n].level<i)break;if(T.single===x&&r[n].level===i){T=r[n];let $,U;x?($=t.md.options.quotes[2],U=t.md.options.quotes[3]):($=t.md.options.quotes[0],U=t.md.options.quotes[1]),a.content=zo(a.content,p.index,U),e[T.token].content=zo(e[T.token].content,T.pos,$),d+=U.length-1,T.token===o&&(d+=$.length-1),l=a.content,h=l.length,r.length=n;continue e}}y?r.push({token:o,pos:p.index,single:x,level:i}):v&&x&&(a.content=zo(a.content,p.index,Tu))}}}function Lb(e){if(e.md.options.typographer)for(let t=e.tokens.length-1;t>=0;t--)e.tokens[t].type!=="inline"||!Ib.test(e.tokens[t].content)||Ob(e.tokens[t].children,e)}function zb(e){let t,n;const r=e.tokens,o=r.length;for(let a=0;a<o;a++){if(r[a].type!=="inline")continue;const i=r[a].children,l=i.length;for(t=0;t<l;t++)i[t].type==="text_special"&&(i[t].type="text");for(t=n=0;t<l;t++)i[t].type==="text"&&t+1<l&&i[t+1].type==="text"?i[t+1].content=i[t].content+i[t+1].content:(t!==n&&(i[n]=i[t]),n++);t!==n&&(i.length=n)}}const as=[["normalize",_b],["block",kb],["inline",Sb],["linkify",Ab],["replacements",Fb],["smartquotes",Lb],["text_join",zb]];function mi(){this.ruler=new kt;for(let e=0;e<as.length;e++)this.ruler.push(as[e][0],as[e][1])}mi.prototype.process=function(e){const t=this.ruler.getRules("");for(let n=0,r=t.length;n<r;n++)t[n](e)};mi.prototype.State=gd;function an(e,t,n,r){this.src=e,this.md=t,this.env=n,this.tokens=r,this.bMarks=[],this.eMarks=[],this.tShift=[],this.sCount=[],this.bsCount=[],this.blkIndent=0,this.line=0,this.lineMax=0,this.tight=!1,this.ddIndent=-1,this.listIndent=-1,this.parentType="root",this.level=0;const o=this.src;for(let a=0,i=0,l=0,d=0,h=o.length,p=!1;i<h;i++){const y=o.charCodeAt(i);if(!p)if(Ye(y)){l++,y===9?d+=4-d%4:d++;continue}else p=!0;(y===10||i===h-1)&&(y!==10&&i++,this.bMarks.push(a),this.eMarks.push(i),this.tShift.push(l),this.sCount.push(d),this.bsCount.push(0),p=!1,l=0,d=0,a=i+1)}this.bMarks.push(o.length),this.eMarks.push(o.length),this.tShift.push(0),this.sCount.push(0),this.bsCount.push(0),this.lineMax=this.bMarks.length-1}an.prototype.push=function(e,t,n){const r=new Vt(e,t,n);return r.block=!0,n<0&&this.level--,r.level=this.level,n>0&&this.level++,this.tokens.push(r),r};an.prototype.isEmpty=function(t){return this.bMarks[t]+this.tShift[t]>=this.eMarks[t]};an.prototype.skipEmptyLines=function(t){for(let n=this.lineMax;t<n&&!(this.bMarks[t]+this.tShift[t]<this.eMarks[t]);t++);return t};an.prototype.skipSpaces=function(t){for(let n=this.src.length;t<n;t++){const r=this.src.charCodeAt(t);if(!Ye(r))break}return t};an.prototype.skipSpacesBack=function(t,n){if(t<=n)return t;for(;t>n;)if(!Ye(this.src.charCodeAt(--t)))return t+1;return t};an.prototype.skipChars=function(t,n){for(let r=this.src.length;t<r&&this.src.charCodeAt(t)===n;t++);return t};an.prototype.skipCharsBack=function(t,n,r){if(t<=r)return t;for(;t>r;)if(n!==this.src.charCodeAt(--t))return t+1;return t};an.prototype.getLines=function(t,n,r,o){if(t>=n)return"";const a=new Array(n-t);for(let i=0,l=t;l<n;l++,i++){let d=0;const h=this.bMarks[l];let p=h,y;for(l+1<n||o?y=this.eMarks[l]+1:y=this.eMarks[l];p<y&&d<r;){const v=this.src.charCodeAt(p);if(Ye(v))v===9?d+=4-(d+this.bsCount[l])%4:d++;else if(p-h<this.tShift[l])d++;else break;p++}d>r?a[i]=new Array(d-r+1).join(" ")+this.src.slice(p,y):a[i]=this.src.slice(p,y)}return a.join("")};an.prototype.Token=Vt;const Bb=65536;function ss(e,t){const n=e.bMarks[t]+e.tShift[t],r=e.eMarks[t];return e.src.slice(n,r)}function Mu(e){const t=[],n=e.length;let r=0,o=e.charCodeAt(r),a=!1,i=0,l="";for(;r<n;)o===124&&(a?(l+=e.substring(i,r-1),i=r):(t.push(l+e.substring(i,r)),l="",i=r+1)),a=o===92,r++,o=e.charCodeAt(r);return t.push(l+e.substring(i)),t}function $b(e,t,n,r){if(t+2>n)return!1;let o=t+1;if(e.sCount[o]<e.blkIndent||e.sCount[o]-e.blkIndent>=4)return!1;let a=e.bMarks[o]+e.tShift[o];if(a>=e.eMarks[o])return!1;const i=e.src.charCodeAt(a++);if(i!==124&&i!==45&&i!==58||a>=e.eMarks[o])return!1;const l=e.src.charCodeAt(a++);if(l!==124&&l!==45&&l!==58&&!Ye(l)||i===45&&Ye(l))return!1;for(;a<e.eMarks[o];){const T=e.src.charCodeAt(a);if(T!==124&&T!==45&&T!==58&&!Ye(T))return!1;a++}let d=ss(e,t+1),h=d.split("|");const p=[];for(let T=0;T<h.length;T++){const $=h[T].trim();if(!$){if(T===0||T===h.length-1)continue;return!1}if(!/^:?-+:?$/.test($))return!1;$.charCodeAt($.length-1)===58?p.push($.charCodeAt(0)===58?"center":"right"):$.charCodeAt(0)===58?p.push("left"):p.push("")}if(d=ss(e,t).trim(),d.indexOf("|")===-1||e.sCount[t]-e.blkIndent>=4)return!1;h=Mu(d),h.length&&h[0]===""&&h.shift(),h.length&&h[h.length-1]===""&&h.pop();const y=h.length;if(y===0||y!==p.length)return!1;if(r)return!0;const v=e.parentType;e.parentType="table";const x=e.md.block.ruler.getRules("blockquote"),w=e.push("table_open","table",1),_=[t,0];w.map=_;const E=e.push("thead_open","thead",1);E.map=[t,t+1];const k=e.push("tr_open","tr",1);k.map=[t,t+1];for(let T=0;T<h.length;T++){const $=e.push("th_open","th",1);p[T]&&($.attrs=[["style","text-align:"+p[T]]]);const U=e.push("inline","",0);U.content=h[T].trim(),U.children=[],e.push("th_close","th",-1)}e.push("tr_close","tr",-1),e.push("thead_close","thead",-1);let S,A=0;for(o=t+2;o<n&&!(e.sCount[o]<e.blkIndent);o++){let T=!1;for(let U=0,V=x.length;U<V;U++)if(x[U](e,o,n,!0)){T=!0;break}if(T||(d=ss(e,o).trim(),!d)||e.sCount[o]-e.blkIndent>=4||(h=Mu(d),h.length&&h[0]===""&&h.shift(),h.length&&h[h.length-1]===""&&h.pop(),A+=y-h.length,A>Bb))break;if(o===t+2){const U=e.push("tbody_open","tbody",1);U.map=S=[t+2,0]}const $=e.push("tr_open","tr",1);$.map=[o,o+1];for(let U=0;U<y;U++){const V=e.push("td_open","td",1);p[U]&&(V.attrs=[["style","text-align:"+p[U]]]);const Y=e.push("inline","",0);Y.content=h[U]?h[U].trim():"",Y.children=[],e.push("td_close","td",-1)}e.push("tr_close","tr",-1)}return S&&(e.push("tbody_close","tbody",-1),S[1]=o),e.push("table_close","table",-1),_[1]=o,e.parentType=v,e.line=o,!0}function qb(e,t,n){if(e.sCount[t]-e.blkIndent<4)return!1;let r=t+1,o=r;for(;r<n;){if(e.isEmpty(r)){r++;continue}if(e.sCount[r]-e.blkIndent>=4){r++,o=r;continue}break}e.line=o;const a=e.push("code_block","code",0);return a.content=e.getLines(t,o,4+e.blkIndent,!1)+`
`,a.map=[t,e.line],!0}function Ub(e,t,n,r){let o=e.bMarks[t]+e.tShift[t],a=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4||o+3>a)return!1;const i=e.src.charCodeAt(o);if(i!==126&&i!==96)return!1;let l=o;o=e.skipChars(o,i);let d=o-l;if(d<3)return!1;const h=e.src.slice(l,o),p=e.src.slice(o,a);if(i===96&&p.indexOf(String.fromCharCode(i))>=0)return!1;if(r)return!0;let y=t,v=!1;for(;y++,!(y>=n||(o=l=e.bMarks[y]+e.tShift[y],a=e.eMarks[y],o<a&&e.sCount[y]<e.blkIndent));)if(e.src.charCodeAt(o)===i&&!(e.sCount[y]-e.blkIndent>=4)&&(o=e.skipChars(o,i),!(o-l<d)&&(o=e.skipSpaces(o),!(o<a)))){v=!0;break}d=e.sCount[t],e.line=y+(v?1:0);const x=e.push("fence","code",0);return x.info=p,x.content=e.getLines(t+1,y,d,!0),x.markup=h,x.map=[t,e.line],!0}function Kb(e,t,n,r){let o=e.bMarks[t]+e.tShift[t],a=e.eMarks[t];const i=e.lineMax;if(e.sCount[t]-e.blkIndent>=4||e.src.charCodeAt(o)!==62)return!1;if(r)return!0;const l=[],d=[],h=[],p=[],y=e.md.block.ruler.getRules("blockquote"),v=e.parentType;e.parentType="blockquote";let x=!1,w;for(w=t;w<n;w++){const A=e.sCount[w]<e.blkIndent;if(o=e.bMarks[w]+e.tShift[w],a=e.eMarks[w],o>=a)break;if(e.src.charCodeAt(o++)===62&&!A){let $=e.sCount[w]+1,U,V;e.src.charCodeAt(o)===32?(o++,$++,V=!1,U=!0):e.src.charCodeAt(o)===9?(U=!0,(e.bsCount[w]+$)%4===3?(o++,$++,V=!1):V=!0):U=!1;let Y=$;for(l.push(e.bMarks[w]),e.bMarks[w]=o;o<a;){const se=e.src.charCodeAt(o);if(Ye(se))se===9?Y+=4-(Y+e.bsCount[w]+(V?1:0))%4:Y++;else break;o++}x=o>=a,d.push(e.bsCount[w]),e.bsCount[w]=e.sCount[w]+1+(U?1:0),h.push(e.sCount[w]),e.sCount[w]=Y-$,p.push(e.tShift[w]),e.tShift[w]=o-e.bMarks[w];continue}if(x)break;let T=!1;for(let $=0,U=y.length;$<U;$++)if(y[$](e,w,n,!0)){T=!0;break}if(T){e.lineMax=w,e.blkIndent!==0&&(l.push(e.bMarks[w]),d.push(e.bsCount[w]),p.push(e.tShift[w]),h.push(e.sCount[w]),e.sCount[w]-=e.blkIndent);break}l.push(e.bMarks[w]),d.push(e.bsCount[w]),p.push(e.tShift[w]),h.push(e.sCount[w]),e.sCount[w]=-1}const _=e.blkIndent;e.blkIndent=0;const E=e.push("blockquote_open","blockquote",1);E.markup=">";const k=[t,0];E.map=k,e.md.block.tokenize(e,t,w);const S=e.push("blockquote_close","blockquote",-1);S.markup=">",e.lineMax=i,e.parentType=v,k[1]=e.line;for(let A=0;A<p.length;A++)e.bMarks[A+t]=l[A],e.tShift[A+t]=p[A],e.sCount[A+t]=h[A],e.bsCount[A+t]=d[A];return e.blkIndent=_,!0}function Hb(e,t,n,r){const o=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4)return!1;let a=e.bMarks[t]+e.tShift[t];const i=e.src.charCodeAt(a++);if(i!==42&&i!==45&&i!==95)return!1;let l=1;for(;a<o;){const h=e.src.charCodeAt(a++);if(h!==i&&!Ye(h))return!1;h===i&&l++}if(l<3)return!1;if(r)return!0;e.line=t+1;const d=e.push("hr","hr",0);return d.map=[t,e.line],d.markup=Array(l+1).join(String.fromCharCode(i)),!0}function Pu(e,t){const n=e.eMarks[t];let r=e.bMarks[t]+e.tShift[t];const o=e.src.charCodeAt(r++);if(o!==42&&o!==45&&o!==43)return-1;if(r<n){const a=e.src.charCodeAt(r);if(!Ye(a))return-1}return r}function Ru(e,t){const n=e.bMarks[t]+e.tShift[t],r=e.eMarks[t];let o=n;if(o+1>=r)return-1;let a=e.src.charCodeAt(o++);if(a<48||a>57)return-1;for(;;){if(o>=r)return-1;if(a=e.src.charCodeAt(o++),a>=48&&a<=57){if(o-n>=10)return-1;continue}if(a===41||a===46)break;return-1}return o<r&&(a=e.src.charCodeAt(o),!Ye(a))?-1:o}function Wb(e,t){const n=e.level+2;for(let r=t+2,o=e.tokens.length-2;r<o;r++)e.tokens[r].level===n&&e.tokens[r].type==="paragraph_open"&&(e.tokens[r+2].hidden=!0,e.tokens[r].hidden=!0,r+=2)}function Vb(e,t,n,r){let o,a,i,l,d=t,h=!0;if(e.sCount[d]-e.blkIndent>=4||e.listIndent>=0&&e.sCount[d]-e.listIndent>=4&&e.sCount[d]<e.blkIndent)return!1;let p=!1;r&&e.parentType==="paragraph"&&e.sCount[d]>=e.blkIndent&&(p=!0);let y,v,x;if((x=Ru(e,d))>=0){if(y=!0,i=e.bMarks[d]+e.tShift[d],v=Number(e.src.slice(i,x-1)),p&&v!==1)return!1}else if((x=Pu(e,d))>=0)y=!1;else return!1;if(p&&e.skipSpaces(x)>=e.eMarks[d])return!1;if(r)return!0;const w=e.src.charCodeAt(x-1),_=e.tokens.length;y?(l=e.push("ordered_list_open","ol",1),v!==1&&(l.attrs=[["start",v]])):l=e.push("bullet_list_open","ul",1);const E=[d,0];l.map=E,l.markup=String.fromCharCode(w);let k=!1;const S=e.md.block.ruler.getRules("list"),A=e.parentType;for(e.parentType="list";d<n;){a=x,o=e.eMarks[d];const T=e.sCount[d]+x-(e.bMarks[d]+e.tShift[d]);let $=T;for(;a<o;){const De=e.src.charCodeAt(a);if(De===9)$+=4-($+e.bsCount[d])%4;else if(De===32)$++;else break;a++}const U=a;let V;U>=o?V=1:V=$-T,V>4&&(V=1);const Y=T+V;l=e.push("list_item_open","li",1),l.markup=String.fromCharCode(w);const se=[d,0];l.map=se,y&&(l.info=e.src.slice(i,x-1));const ge=e.tight,G=e.tShift[d],X=e.sCount[d],Ee=e.listIndent;if(e.listIndent=e.blkIndent,e.blkIndent=Y,e.tight=!0,e.tShift[d]=U-e.bMarks[d],e.sCount[d]=$,U>=o&&e.isEmpty(d+1)?e.line=Math.min(e.line+2,n):e.md.block.tokenize(e,d,n,!0),(!e.tight||k)&&(h=!1),k=e.line-d>1&&e.isEmpty(e.line-1),e.blkIndent=e.listIndent,e.listIndent=Ee,e.tShift[d]=G,e.sCount[d]=X,e.tight=ge,l=e.push("list_item_close","li",-1),l.markup=String.fromCharCode(w),d=e.line,se[1]=d,d>=n||e.sCount[d]<e.blkIndent||e.sCount[d]-e.blkIndent>=4)break;let Te=!1;for(let De=0,be=S.length;De<be;De++)if(S[De](e,d,n,!0)){Te=!0;break}if(Te)break;if(y){if(x=Ru(e,d),x<0)break;i=e.bMarks[d]+e.tShift[d]}else if(x=Pu(e,d),x<0)break;if(w!==e.src.charCodeAt(x-1))break}return y?l=e.push("ordered_list_close","ol",-1):l=e.push("bullet_list_close","ul",-1),l.markup=String.fromCharCode(w),E[1]=d,e.line=d,e.parentType=A,h&&Wb(e,_),!0}function Gb(e,t,n,r){let o=e.bMarks[t]+e.tShift[t],a=e.eMarks[t],i=t+1;if(e.sCount[t]-e.blkIndent>=4||e.src.charCodeAt(o)!==91)return!1;function l(S){const A=e.lineMax;if(S>=A||e.isEmpty(S))return null;let T=!1;if(e.sCount[S]-e.blkIndent>3&&(T=!0),e.sCount[S]<0&&(T=!0),!T){const V=e.md.block.ruler.getRules("reference"),Y=e.parentType;e.parentType="reference";let se=!1;for(let ge=0,G=V.length;ge<G;ge++)if(V[ge](e,S,A,!0)){se=!0;break}if(e.parentType=Y,se)return null}const $=e.bMarks[S]+e.tShift[S],U=e.eMarks[S];return e.src.slice($,U+1)}let d=e.src.slice(o,a+1);a=d.length;let h=-1;for(o=1;o<a;o++){const S=d.charCodeAt(o);if(S===91)return!1;if(S===93){h=o;break}else if(S===10){const A=l(i);A!==null&&(d+=A,a=d.length,i++)}else if(S===92&&(o++,o<a&&d.charCodeAt(o)===10)){const A=l(i);A!==null&&(d+=A,a=d.length,i++)}}if(h<0||d.charCodeAt(h+1)!==58)return!1;for(o=h+2;o<a;o++){const S=d.charCodeAt(o);if(S===10){const A=l(i);A!==null&&(d+=A,a=d.length,i++)}else if(!Ye(S))break}const p=e.md.helpers.parseLinkDestination(d,o,a);if(!p.ok)return!1;const y=e.md.normalizeLink(p.str);if(!e.md.validateLink(y))return!1;o=p.pos;const v=o,x=i,w=o;for(;o<a;o++){const S=d.charCodeAt(o);if(S===10){const A=l(i);A!==null&&(d+=A,a=d.length,i++)}else if(!Ye(S))break}let _=e.md.helpers.parseLinkTitle(d,o,a);for(;_.can_continue;){const S=l(i);if(S===null)break;d+=S,o=a,a=d.length,i++,_=e.md.helpers.parseLinkTitle(d,o,a,_)}let E;for(o<a&&w!==o&&_.ok?(E=_.str,o=_.pos):(E="",o=v,i=x);o<a;){const S=d.charCodeAt(o);if(!Ye(S))break;o++}if(o<a&&d.charCodeAt(o)!==10&&E)for(E="",o=v,i=x;o<a;){const S=d.charCodeAt(o);if(!Ye(S))break;o++}if(o<a&&d.charCodeAt(o)!==10)return!1;const k=da(d.slice(1,h));return k?(r||(typeof e.env.references>"u"&&(e.env.references={}),typeof e.env.references[k]>"u"&&(e.env.references[k]={title:E,href:y}),e.line=i),!0):!1}const Yb=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],Zb="[a-zA-Z_:][a-zA-Z0-9:._-]*",Xb="[^\"'=<>`\\x00-\\x20]+",Qb="'[^']*'",Jb='"[^"]*"',ex="(?:"+Xb+"|"+Qb+"|"+Jb+")",tx="(?:\\s+"+Zb+"(?:\\s*=\\s*"+ex+")?)",xd="<[A-Za-z][A-Za-z0-9\\-]*"+tx+"*\\s*\\/?>",yd="<\\/[A-Za-z][A-Za-z0-9\\-]*\\s*>",nx="<!---?>|<!--(?:[^-]|-[^-]|--[^>])*-->",rx="<[?][\\s\\S]*?[?]>",ox="<![A-Za-z][^>]*>",ax="<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",sx=new RegExp("^(?:"+xd+"|"+yd+"|"+nx+"|"+rx+"|"+ox+"|"+ax+")"),ix=new RegExp("^(?:"+xd+"|"+yd+")"),ir=[[/^<(script|pre|style|textarea)(?=(\s|>|$))/i,/<\/(script|pre|style|textarea)>/i,!0],[/^<!--/,/-->/,!0],[/^<\?/,/\?>/,!0],[/^<![A-Z]/,/>/,!0],[/^<!\[CDATA\[/,/\]\]>/,!0],[new RegExp("^</?("+Yb.join("|")+")(?=(\\s|/?>|$))","i"),/^$/,!0],[new RegExp(ix.source+"\\s*$"),/^$/,!1]];function ux(e,t,n,r){let o=e.bMarks[t]+e.tShift[t],a=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4||!e.md.options.html||e.src.charCodeAt(o)!==60)return!1;let i=e.src.slice(o,a),l=0;for(;l<ir.length&&!ir[l][0].test(i);l++);if(l===ir.length)return!1;if(r)return ir[l][2];let d=t+1;if(!ir[l][1].test(i)){for(;d<n&&!(e.sCount[d]<e.blkIndent);d++)if(o=e.bMarks[d]+e.tShift[d],a=e.eMarks[d],i=e.src.slice(o,a),ir[l][1].test(i)){i.length!==0&&d++;break}}e.line=d;const h=e.push("html_block","",0);return h.map=[t,d],h.content=e.getLines(t,d,e.blkIndent,!0),!0}function lx(e,t,n,r){let o=e.bMarks[t]+e.tShift[t],a=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4)return!1;let i=e.src.charCodeAt(o);if(i!==35||o>=a)return!1;let l=1;for(i=e.src.charCodeAt(++o);i===35&&o<a&&l<=6;)l++,i=e.src.charCodeAt(++o);if(l>6||o<a&&!Ye(i))return!1;if(r)return!0;a=e.skipSpacesBack(a,o);const d=e.skipCharsBack(a,35,o);d>o&&Ye(e.src.charCodeAt(d-1))&&(a=d),e.line=t+1;const h=e.push("heading_open","h"+String(l),1);h.markup="########".slice(0,l),h.map=[t,e.line];const p=e.push("inline","",0);p.content=e.src.slice(o,a).trim(),p.map=[t,e.line],p.children=[];const y=e.push("heading_close","h"+String(l),-1);return y.markup="########".slice(0,l),!0}function cx(e,t,n){const r=e.md.block.ruler.getRules("paragraph");if(e.sCount[t]-e.blkIndent>=4)return!1;const o=e.parentType;e.parentType="paragraph";let a=0,i,l=t+1;for(;l<n&&!e.isEmpty(l);l++){if(e.sCount[l]-e.blkIndent>3)continue;if(e.sCount[l]>=e.blkIndent){let x=e.bMarks[l]+e.tShift[l];const w=e.eMarks[l];if(x<w&&(i=e.src.charCodeAt(x),(i===45||i===61)&&(x=e.skipChars(x,i),x=e.skipSpaces(x),x>=w))){a=i===61?1:2;break}}if(e.sCount[l]<0)continue;let v=!1;for(let x=0,w=r.length;x<w;x++)if(r[x](e,l,n,!0)){v=!0;break}if(v)break}if(!a)return!1;const d=e.getLines(t,l,e.blkIndent,!1).trim();e.line=l+1;const h=e.push("heading_open","h"+String(a),1);h.markup=String.fromCharCode(i),h.map=[t,e.line];const p=e.push("inline","",0);p.content=d,p.map=[t,e.line-1],p.children=[];const y=e.push("heading_close","h"+String(a),-1);return y.markup=String.fromCharCode(i),e.parentType=o,!0}function dx(e,t,n){const r=e.md.block.ruler.getRules("paragraph"),o=e.parentType;let a=t+1;for(e.parentType="paragraph";a<n&&!e.isEmpty(a);a++){if(e.sCount[a]-e.blkIndent>3||e.sCount[a]<0)continue;let h=!1;for(let p=0,y=r.length;p<y;p++)if(r[p](e,a,n,!0)){h=!0;break}if(h)break}const i=e.getLines(t,a,e.blkIndent,!1).trim();e.line=a;const l=e.push("paragraph_open","p",1);l.map=[t,e.line];const d=e.push("inline","",0);return d.content=i,d.map=[t,e.line],d.children=[],e.push("paragraph_close","p",-1),e.parentType=o,!0}const Bo=[["table",$b,["paragraph","reference"]],["code",qb],["fence",Ub,["paragraph","reference","blockquote","list"]],["blockquote",Kb,["paragraph","reference","blockquote","list"]],["hr",Hb,["paragraph","reference","blockquote","list"]],["list",Vb,["paragraph","reference","blockquote"]],["reference",Gb],["html_block",ux,["paragraph","reference","blockquote"]],["heading",lx,["paragraph","reference","blockquote"]],["lheading",cx],["paragraph",dx]];function fa(){this.ruler=new kt;for(let e=0;e<Bo.length;e++)this.ruler.push(Bo[e][0],Bo[e][1],{alt:(Bo[e][2]||[]).slice()})}fa.prototype.tokenize=function(e,t,n){const r=this.ruler.getRules(""),o=r.length,a=e.md.options.maxNesting;let i=t,l=!1;for(;i<n&&(e.line=i=e.skipEmptyLines(i),!(i>=n||e.sCount[i]<e.blkIndent));){if(e.level>=a){e.line=n;break}const d=e.line;let h=!1;for(let p=0;p<o;p++)if(h=r[p](e,i,n,!1),h){if(d>=e.line)throw new Error("block rule didn't increment state.line");break}if(!h)throw new Error("none of the block rules matched");e.tight=!l,e.isEmpty(e.line-1)&&(l=!0),i=e.line,i<n&&e.isEmpty(i)&&(l=!0,i++,e.line=i)}};fa.prototype.parse=function(e,t,n,r){if(!e)return;const o=new this.State(e,t,n,r);this.tokenize(o,o.line,o.lineMax)};fa.prototype.State=an;function ho(e,t,n,r){this.src=e,this.env=n,this.md=t,this.tokens=r,this.tokens_meta=Array(r.length),this.pos=0,this.posMax=this.src.length,this.level=0,this.pending="",this.pendingLevel=0,this.cache={},this.delimiters=[],this._prev_delimiters=[],this.backticks={},this.backticksScanned=!1,this.linkLevel=0}ho.prototype.pushPending=function(){const e=new Vt("text","",0);return e.content=this.pending,e.level=this.pendingLevel,this.tokens.push(e),this.pending="",e};ho.prototype.push=function(e,t,n){this.pending&&this.pushPending();const r=new Vt(e,t,n);let o=null;return n<0&&(this.level--,this.delimiters=this._prev_delimiters.pop()),r.level=this.level,n>0&&(this.level++,this._prev_delimiters.push(this.delimiters),this.delimiters=[],o={delimiters:this.delimiters}),this.pendingLevel=this.level,this.tokens.push(r),this.tokens_meta.push(o),r};ho.prototype.scanDelims=function(e,t){const n=this.posMax,r=this.src.charCodeAt(e),o=e>0?this.src.charCodeAt(e-1):32;let a=e;for(;a<n&&this.src.charCodeAt(a)===r;)a++;const i=a-e,l=a<n?this.src.charCodeAt(a):32,d=no(o)||to(String.fromCharCode(o)),h=no(l)||to(String.fromCharCode(l)),p=eo(o),y=eo(l),v=!y&&(!h||p||d),x=!p&&(!d||y||h);return{can_open:v&&(t||!x||d),can_close:x&&(t||!v||h),length:i}};ho.prototype.Token=Vt;function fx(e){switch(e){case 10:case 33:case 35:case 36:case 37:case 38:case 42:case 43:case 45:case 58:case 60:case 61:case 62:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 125:case 126:return!0;default:return!1}}function hx(e,t){let n=e.pos;for(;n<e.posMax&&!fx(e.src.charCodeAt(n));)n++;return n===e.pos?!1:(t||(e.pending+=e.src.slice(e.pos,n)),e.pos=n,!0)}const px=/(?:^|[^a-z0-9.+-])([a-z][a-z0-9.+-]*)$/i;function mx(e,t){if(!e.md.options.linkify||e.linkLevel>0)return!1;const n=e.pos,r=e.posMax;if(n+3>r||e.src.charCodeAt(n)!==58||e.src.charCodeAt(n+1)!==47||e.src.charCodeAt(n+2)!==47)return!1;const o=e.pending.match(px);if(!o)return!1;const a=o[1],i=e.md.linkify.matchAtStart(e.src.slice(n-a.length));if(!i)return!1;let l=i.url;if(l.length<=a.length)return!1;l=l.replace(/\*+$/,"");const d=e.md.normalizeLink(l);if(!e.md.validateLink(d))return!1;if(!t){e.pending=e.pending.slice(0,-a.length);const h=e.push("link_open","a",1);h.attrs=[["href",d]],h.markup="linkify",h.info="auto";const p=e.push("text","",0);p.content=e.md.normalizeLinkText(l);const y=e.push("link_close","a",-1);y.markup="linkify",y.info="auto"}return e.pos+=l.length-a.length,!0}function gx(e,t){let n=e.pos;if(e.src.charCodeAt(n)!==10)return!1;const r=e.pending.length-1,o=e.posMax;if(!t)if(r>=0&&e.pending.charCodeAt(r)===32)if(r>=1&&e.pending.charCodeAt(r-1)===32){let a=r-1;for(;a>=1&&e.pending.charCodeAt(a-1)===32;)a--;e.pending=e.pending.slice(0,a),e.push("hardbreak","br",0)}else e.pending=e.pending.slice(0,-1),e.push("softbreak","br",0);else e.push("softbreak","br",0);for(n++;n<o&&Ye(e.src.charCodeAt(n));)n++;return e.pos=n,!0}const gi=[];for(let e=0;e<256;e++)gi.push(0);"\\!\"#$%&'()*+,./:;<=>?@[]^_`{|}~-".split("").forEach(function(e){gi[e.charCodeAt(0)]=1});function bx(e,t){let n=e.pos;const r=e.posMax;if(e.src.charCodeAt(n)!==92||(n++,n>=r))return!1;let o=e.src.charCodeAt(n);if(o===10){for(t||e.push("hardbreak","br",0),n++;n<r&&(o=e.src.charCodeAt(n),!!Ye(o));)n++;return e.pos=n,!0}let a=e.src[n];if(o>=55296&&o<=56319&&n+1<r){const l=e.src.charCodeAt(n+1);l>=56320&&l<=57343&&(a+=e.src[n+1],n++)}const i="\\"+a;if(!t){const l=e.push("text_special","",0);o<256&&gi[o]!==0?l.content=a:l.content=i,l.markup=i,l.info="escape"}return e.pos=n+1,!0}function xx(e,t){let n=e.pos;if(e.src.charCodeAt(n)!==96)return!1;const o=n;n++;const a=e.posMax;for(;n<a&&e.src.charCodeAt(n)===96;)n++;const i=e.src.slice(o,n),l=i.length;if(e.backticksScanned&&(e.backticks[l]||0)<=o)return t||(e.pending+=i),e.pos+=l,!0;let d=n,h;for(;(h=e.src.indexOf("`",d))!==-1;){for(d=h+1;d<a&&e.src.charCodeAt(d)===96;)d++;const p=d-h;if(p===l){if(!t){const y=e.push("code_inline","code",0);y.markup=i,y.content=e.src.slice(n,h).replace(/\n/g," ").replace(/^ (.+) $/,"$1")}return e.pos=d,!0}e.backticks[p]=h}return e.backticksScanned=!0,t||(e.pending+=i),e.pos+=l,!0}function yx(e,t){const n=e.pos,r=e.src.charCodeAt(n);if(t||r!==126)return!1;const o=e.scanDelims(e.pos,!0);let a=o.length;const i=String.fromCharCode(r);if(a<2)return!1;let l;a%2&&(l=e.push("text","",0),l.content=i,a--);for(let d=0;d<a;d+=2)l=e.push("text","",0),l.content=i+i,e.delimiters.push({marker:r,length:0,token:e.tokens.length-1,end:-1,open:o.can_open,close:o.can_close});return e.pos+=o.length,!0}function Fu(e,t){let n;const r=[],o=t.length;for(let a=0;a<o;a++){const i=t[a];if(i.marker!==126||i.end===-1)continue;const l=t[i.end];n=e.tokens[i.token],n.type="s_open",n.tag="s",n.nesting=1,n.markup="~~",n.content="",n=e.tokens[l.token],n.type="s_close",n.tag="s",n.nesting=-1,n.markup="~~",n.content="",e.tokens[l.token-1].type==="text"&&e.tokens[l.token-1].content==="~"&&r.push(l.token-1)}for(;r.length;){const a=r.pop();let i=a+1;for(;i<e.tokens.length&&e.tokens[i].type==="s_close";)i++;i--,a!==i&&(n=e.tokens[i],e.tokens[i]=e.tokens[a],e.tokens[a]=n)}}function vx(e){const t=e.tokens_meta,n=e.tokens_meta.length;Fu(e,e.delimiters);for(let r=0;r<n;r++)t[r]&&t[r].delimiters&&Fu(e,t[r].delimiters)}const vd={tokenize:yx,postProcess:vx};function wx(e,t){const n=e.pos,r=e.src.charCodeAt(n);if(t||r!==95&&r!==42)return!1;const o=e.scanDelims(e.pos,r===42);for(let a=0;a<o.length;a++){const i=e.push("text","",0);i.content=String.fromCharCode(r),e.delimiters.push({marker:r,length:o.length,token:e.tokens.length-1,end:-1,open:o.can_open,close:o.can_close})}return e.pos+=o.length,!0}function Iu(e,t){const n=t.length;for(let r=n-1;r>=0;r--){const o=t[r];if(o.marker!==95&&o.marker!==42||o.end===-1)continue;const a=t[o.end],i=r>0&&t[r-1].end===o.end+1&&t[r-1].marker===o.marker&&t[r-1].token===o.token-1&&t[o.end+1].token===a.token+1,l=String.fromCharCode(o.marker),d=e.tokens[o.token];d.type=i?"strong_open":"em_open",d.tag=i?"strong":"em",d.nesting=1,d.markup=i?l+l:l,d.content="";const h=e.tokens[a.token];h.type=i?"strong_close":"em_close",h.tag=i?"strong":"em",h.nesting=-1,h.markup=i?l+l:l,h.content="",i&&(e.tokens[t[r-1].token].content="",e.tokens[t[o.end+1].token].content="",r--)}}function Cx(e){const t=e.tokens_meta,n=e.tokens_meta.length;Iu(e,e.delimiters);for(let r=0;r<n;r++)t[r]&&t[r].delimiters&&Iu(e,t[r].delimiters)}const wd={tokenize:wx,postProcess:Cx};function _x(e,t){let n,r,o,a,i="",l="",d=e.pos,h=!0;if(e.src.charCodeAt(e.pos)!==91)return!1;const p=e.pos,y=e.posMax,v=e.pos+1,x=e.md.helpers.parseLinkLabel(e,e.pos,!0);if(x<0)return!1;let w=x+1;if(w<y&&e.src.charCodeAt(w)===40){for(h=!1,w++;w<y&&(n=e.src.charCodeAt(w),!(!Ye(n)&&n!==10));w++);if(w>=y)return!1;if(d=w,o=e.md.helpers.parseLinkDestination(e.src,w,e.posMax),o.ok){for(i=e.md.normalizeLink(o.str),e.md.validateLink(i)?w=o.pos:i="",d=w;w<y&&(n=e.src.charCodeAt(w),!(!Ye(n)&&n!==10));w++);if(o=e.md.helpers.parseLinkTitle(e.src,w,e.posMax),w<y&&d!==w&&o.ok)for(l=o.str,w=o.pos;w<y&&(n=e.src.charCodeAt(w),!(!Ye(n)&&n!==10));w++);}(w>=y||e.src.charCodeAt(w)!==41)&&(h=!0),w++}if(h){if(typeof e.env.references>"u")return!1;if(w<y&&e.src.charCodeAt(w)===91?(d=w+1,w=e.md.helpers.parseLinkLabel(e,w),w>=0?r=e.src.slice(d,w++):w=x+1):w=x+1,r||(r=e.src.slice(v,x)),a=e.env.references[da(r)],!a)return e.pos=p,!1;i=a.href,l=a.title}if(!t){e.pos=v,e.posMax=x;const _=e.push("link_open","a",1),E=[["href",i]];_.attrs=E,l&&E.push(["title",l]),e.linkLevel++,e.md.inline.tokenize(e),e.linkLevel--,e.push("link_close","a",-1)}return e.pos=w,e.posMax=y,!0}function kx(e,t){let n,r,o,a,i,l,d,h,p="";const y=e.pos,v=e.posMax;if(e.src.charCodeAt(e.pos)!==33||e.src.charCodeAt(e.pos+1)!==91)return!1;const x=e.pos+2,w=e.md.helpers.parseLinkLabel(e,e.pos+1,!1);if(w<0)return!1;if(a=w+1,a<v&&e.src.charCodeAt(a)===40){for(a++;a<v&&(n=e.src.charCodeAt(a),!(!Ye(n)&&n!==10));a++);if(a>=v)return!1;for(h=a,l=e.md.helpers.parseLinkDestination(e.src,a,e.posMax),l.ok&&(p=e.md.normalizeLink(l.str),e.md.validateLink(p)?a=l.pos:p=""),h=a;a<v&&(n=e.src.charCodeAt(a),!(!Ye(n)&&n!==10));a++);if(l=e.md.helpers.parseLinkTitle(e.src,a,e.posMax),a<v&&h!==a&&l.ok)for(d=l.str,a=l.pos;a<v&&(n=e.src.charCodeAt(a),!(!Ye(n)&&n!==10));a++);else d="";if(a>=v||e.src.charCodeAt(a)!==41)return e.pos=y,!1;a++}else{if(typeof e.env.references>"u")return!1;if(a<v&&e.src.charCodeAt(a)===91?(h=a+1,a=e.md.helpers.parseLinkLabel(e,a),a>=0?o=e.src.slice(h,a++):a=w+1):a=w+1,o||(o=e.src.slice(x,w)),i=e.env.references[da(o)],!i)return e.pos=y,!1;p=i.href,d=i.title}if(!t){r=e.src.slice(x,w);const _=[];e.md.inline.parse(r,e.md,e.env,_);const E=e.push("image","img",0),k=[["src",p],["alt",""]];E.attrs=k,E.children=_,E.content=r,d&&k.push(["title",d])}return e.pos=a,e.posMax=v,!0}const Sx=/^([a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*)$/,Ex=/^([a-zA-Z][a-zA-Z0-9+.-]{1,31}):([^<>\x00-\x20]*)$/;function jx(e,t){let n=e.pos;if(e.src.charCodeAt(n)!==60)return!1;const r=e.pos,o=e.posMax;for(;;){if(++n>=o)return!1;const i=e.src.charCodeAt(n);if(i===60)return!1;if(i===62)break}const a=e.src.slice(r+1,n);if(Ex.test(a)){const i=e.md.normalizeLink(a);if(!e.md.validateLink(i))return!1;if(!t){const l=e.push("link_open","a",1);l.attrs=[["href",i]],l.markup="autolink",l.info="auto";const d=e.push("text","",0);d.content=e.md.normalizeLinkText(a);const h=e.push("link_close","a",-1);h.markup="autolink",h.info="auto"}return e.pos+=a.length+2,!0}if(Sx.test(a)){const i=e.md.normalizeLink("mailto:"+a);if(!e.md.validateLink(i))return!1;if(!t){const l=e.push("link_open","a",1);l.attrs=[["href",i]],l.markup="autolink",l.info="auto";const d=e.push("text","",0);d.content=e.md.normalizeLinkText(a);const h=e.push("link_close","a",-1);h.markup="autolink",h.info="auto"}return e.pos+=a.length+2,!0}return!1}function Ax(e){return/^<a[>\s]/i.test(e)}function Dx(e){return/^<\/a\s*>/i.test(e)}function Nx(e){const t=e|32;return t>=97&&t<=122}function Tx(e,t){if(!e.md.options.html)return!1;const n=e.posMax,r=e.pos;if(e.src.charCodeAt(r)!==60||r+2>=n)return!1;const o=e.src.charCodeAt(r+1);if(o!==33&&o!==63&&o!==47&&!Nx(o))return!1;const a=e.src.slice(r).match(sx);if(!a)return!1;if(!t){const i=e.push("html_inline","",0);i.content=a[0],Ax(i.content)&&e.linkLevel++,Dx(i.content)&&e.linkLevel--}return e.pos+=a[0].length,!0}const Mx=/^&#((?:x[a-f0-9]{1,6}|[0-9]{1,7}));/i,Px=/^&([a-z][a-z0-9]{1,31});/i;function Rx(e,t){const n=e.pos,r=e.posMax;if(e.src.charCodeAt(n)!==38||n+1>=r)return!1;if(e.src.charCodeAt(n+1)===35){const a=e.src.slice(n).match(Mx);if(a){if(!t){const i=a[1][0].toLowerCase()==="x"?parseInt(a[1].slice(1),16):parseInt(a[1],10),l=e.push("text_special","",0);l.content=pi(i)?Yo(i):Yo(65533),l.markup=a[0],l.info="entity"}return e.pos+=a[0].length,!0}}else{const a=e.src.slice(n).match(Px);if(a){const i=hd(a[0]);if(i!==a[0]){if(!t){const l=e.push("text_special","",0);l.content=i,l.markup=a[0],l.info="entity"}return e.pos+=a[0].length,!0}}}return!1}function Ou(e){const t={},n=e.length;if(!n)return;let r=0,o=-2;const a=[];for(let i=0;i<n;i++){const l=e[i];if(a.push(0),(e[r].marker!==l.marker||o!==l.token-1)&&(r=i),o=l.token,l.length=l.length||0,!l.close)continue;t.hasOwnProperty(l.marker)||(t[l.marker]=[-1,-1,-1,-1,-1,-1]);const d=t[l.marker][(l.open?3:0)+l.length%3];let h=r-a[r]-1,p=h;for(;h>d;h-=a[h]+1){const y=e[h];if(y.marker===l.marker&&y.open&&y.end<0){let v=!1;if((y.close||l.open)&&(y.length+l.length)%3===0&&(y.length%3!==0||l.length%3!==0)&&(v=!0),!v){const x=h>0&&!e[h-1].open?a[h-1]+1:0;a[i]=i-h+x,a[h]=x,l.open=!1,y.end=i,y.close=!1,p=-1,o=-2;break}}}p!==-1&&(t[l.marker][(l.open?3:0)+(l.length||0)%3]=p)}}function Fx(e){const t=e.tokens_meta,n=e.tokens_meta.length;Ou(e.delimiters);for(let r=0;r<n;r++)t[r]&&t[r].delimiters&&Ou(t[r].delimiters)}function Ix(e){let t,n,r=0;const o=e.tokens,a=e.tokens.length;for(t=n=0;t<a;t++)o[t].nesting<0&&r--,o[t].level=r,o[t].nesting>0&&r++,o[t].type==="text"&&t+1<a&&o[t+1].type==="text"?o[t+1].content=o[t].content+o[t+1].content:(t!==n&&(o[n]=o[t]),n++);t!==n&&(o.length=n)}const is=[["text",hx],["linkify",mx],["newline",gx],["escape",bx],["backticks",xx],["strikethrough",vd.tokenize],["emphasis",wd.tokenize],["link",_x],["image",kx],["autolink",jx],["html_inline",Tx],["entity",Rx]],us=[["balance_pairs",Fx],["strikethrough",vd.postProcess],["emphasis",wd.postProcess],["fragments_join",Ix]];function po(){this.ruler=new kt;for(let e=0;e<is.length;e++)this.ruler.push(is[e][0],is[e][1]);this.ruler2=new kt;for(let e=0;e<us.length;e++)this.ruler2.push(us[e][0],us[e][1])}po.prototype.skipToken=function(e){const t=e.pos,n=this.ruler.getRules(""),r=n.length,o=e.md.options.maxNesting,a=e.cache;if(typeof a[t]<"u"){e.pos=a[t];return}let i=!1;if(e.level<o){for(let l=0;l<r;l++)if(e.level++,i=n[l](e,!0),e.level--,i){if(t>=e.pos)throw new Error("inline rule didn't increment state.pos");break}}else e.pos=e.posMax;i||e.pos++,a[t]=e.pos};po.prototype.tokenize=function(e){const t=this.ruler.getRules(""),n=t.length,r=e.posMax,o=e.md.options.maxNesting;for(;e.pos<r;){const a=e.pos;let i=!1;if(e.level<o){for(let l=0;l<n;l++)if(i=t[l](e,!1),i){if(a>=e.pos)throw new Error("inline rule didn't increment state.pos");break}}if(i){if(e.pos>=r)break;continue}e.pending+=e.src[e.pos++]}e.pending&&e.pushPending()};po.prototype.parse=function(e,t,n,r){const o=new this.State(e,t,n,r);this.tokenize(o);const a=this.ruler2.getRules(""),i=a.length;for(let l=0;l<i;l++)a[l](o)};po.prototype.State=ho;function Ox(e){const t={};e=e||{},t.src_Any=ud.source,t.src_Cc=ld.source,t.src_Z=dd.source,t.src_P=fi.source,t.src_ZPCc=[t.src_Z,t.src_P,t.src_Cc].join("|"),t.src_ZCc=[t.src_Z,t.src_Cc].join("|");const n="[><]";return t.src_pseudo_letter="(?:(?!"+n+"|"+t.src_ZPCc+")"+t.src_Any+")",t.src_ip4="(?:(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)",t.src_auth="(?:(?:(?!"+t.src_ZCc+"|[@/\\[\\]()]).)+@)?",t.src_port="(?::(?:6(?:[0-4]\\d{3}|5(?:[0-4]\\d{2}|5(?:[0-2]\\d|3[0-5])))|[1-5]?\\d{1,4}))?",t.src_host_terminator="(?=$|"+n+"|"+t.src_ZPCc+")(?!"+(e["---"]?"-(?!--)|":"-|")+"_|:\\d|\\.-|\\.(?!$|"+t.src_ZPCc+"))",t.src_path="(?:[/?#](?:(?!"+t.src_ZCc+"|"+n+`|[()[\\]{}.,"'?!\\-;]).|\\[(?:(?!`+t.src_ZCc+"|\\]).)*\\]|\\((?:(?!"+t.src_ZCc+"|[)]).)*\\)|\\{(?:(?!"+t.src_ZCc+'|[}]).)*\\}|\\"(?:(?!'+t.src_ZCc+`|["]).)+\\"|\\'(?:(?!`+t.src_ZCc+"|[']).)+\\'|\\'(?="+t.src_pseudo_letter+"|[-])|\\.{2,}[a-zA-Z0-9%/&]|\\.(?!"+t.src_ZCc+"|[.]|$)|"+(e["---"]?"\\-(?!--(?:[^-]|$))(?:-*)|":"\\-+|")+",(?!"+t.src_ZCc+"|$)|;(?!"+t.src_ZCc+"|$)|\\!+(?!"+t.src_ZCc+"|[!]|$)|\\?(?!"+t.src_ZCc+"|[?]|$))+|\\/)?",t.src_email_name='[\\-;:&=\\+\\$,\\.a-zA-Z0-9_][\\-;:&=\\+\\$,\\"\\.a-zA-Z0-9_]*',t.src_xn="xn--[a-z0-9\\-]{1,59}",t.src_domain_root="(?:"+t.src_xn+"|"+t.src_pseudo_letter+"{1,63})",t.src_domain="(?:"+t.src_xn+"|(?:"+t.src_pseudo_letter+")|(?:"+t.src_pseudo_letter+"(?:-|"+t.src_pseudo_letter+"){0,61}"+t.src_pseudo_letter+"))",t.src_host="(?:(?:(?:(?:"+t.src_domain+")\\.)*"+t.src_domain+"))",t.tpl_host_fuzzy="(?:"+t.src_ip4+"|(?:(?:(?:"+t.src_domain+")\\.)+(?:%TLDS%)))",t.tpl_host_no_ip_fuzzy="(?:(?:(?:"+t.src_domain+")\\.)+(?:%TLDS%))",t.src_host_strict=t.src_host+t.src_host_terminator,t.tpl_host_fuzzy_strict=t.tpl_host_fuzzy+t.src_host_terminator,t.src_host_port_strict=t.src_host+t.src_port+t.src_host_terminator,t.tpl_host_port_fuzzy_strict=t.tpl_host_fuzzy+t.src_port+t.src_host_terminator,t.tpl_host_port_no_ip_fuzzy_strict=t.tpl_host_no_ip_fuzzy+t.src_port+t.src_host_terminator,t.tpl_host_fuzzy_test="localhost|www\\.|\\.\\d{1,3}\\.|(?:\\.(?:%TLDS%)(?:"+t.src_ZPCc+"|>|$))",t.tpl_email_fuzzy="(^|"+n+'|"|\\(|'+t.src_ZCc+")("+t.src_email_name+"@"+t.tpl_host_fuzzy_strict+")",t.tpl_link_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|]|"+t.src_ZPCc+"))((?![$+<=>^`|])"+t.tpl_host_port_fuzzy_strict+t.src_path+")",t.tpl_link_no_ip_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|]|"+t.src_ZPCc+"))((?![$+<=>^`|])"+t.tpl_host_port_no_ip_fuzzy_strict+t.src_path+")",t}function Ns(e){return Array.prototype.slice.call(arguments,1).forEach(function(n){n&&Object.keys(n).forEach(function(r){e[r]=n[r]})}),e}function ha(e){return Object.prototype.toString.call(e)}function Lx(e){return ha(e)==="[object String]"}function zx(e){return ha(e)==="[object Object]"}function Bx(e){return ha(e)==="[object RegExp]"}function Lu(e){return ha(e)==="[object Function]"}function $x(e){return e.replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}const Cd={fuzzyLink:!0,fuzzyEmail:!0,fuzzyIP:!1};function qx(e){return Object.keys(e||{}).reduce(function(t,n){return t||Cd.hasOwnProperty(n)},!1)}const Ux={"http:":{validate:function(e,t,n){const r=e.slice(t);return n.re.http||(n.re.http=new RegExp("^\\/\\/"+n.re.src_auth+n.re.src_host_port_strict+n.re.src_path,"i")),n.re.http.test(r)?r.match(n.re.http)[0].length:0}},"https:":"http:","ftp:":"http:","//":{validate:function(e,t,n){const r=e.slice(t);return n.re.no_http||(n.re.no_http=new RegExp("^"+n.re.src_auth+"(?:localhost|(?:(?:"+n.re.src_domain+")\\.)+"+n.re.src_domain_root+")"+n.re.src_port+n.re.src_host_terminator+n.re.src_path,"i")),n.re.no_http.test(r)?t>=3&&e[t-3]===":"||t>=3&&e[t-3]==="/"?0:r.match(n.re.no_http)[0].length:0}},"mailto:":{validate:function(e,t,n){const r=e.slice(t);return n.re.mailto||(n.re.mailto=new RegExp("^"+n.re.src_email_name+"@"+n.re.src_host_strict,"i")),n.re.mailto.test(r)?r.match(n.re.mailto)[0].length:0}}},Kx="a[cdefgilmnoqrstuwxz]|b[abdefghijmnorstvwyz]|c[acdfghiklmnoruvwxyz]|d[ejkmoz]|e[cegrstu]|f[ijkmor]|g[abdefghilmnpqrstuwy]|h[kmnrtu]|i[delmnoqrst]|j[emop]|k[eghimnprwyz]|l[abcikrstuvy]|m[acdeghklmnopqrstuvwxyz]|n[acefgilopruz]|om|p[aefghklmnrstwy]|qa|r[eosuw]|s[abcdeghijklmnortuvxyz]|t[cdfghjklmnortvwz]|u[agksyz]|v[aceginu]|w[fs]|y[et]|z[amw]",Hx="biz|com|edu|gov|net|org|pro|web|xxx|aero|asia|coop|info|museum|name|shop|".split("|");function Wx(e){e.__index__=-1,e.__text_cache__=""}function Vx(e){return function(t,n){const r=t.slice(n);return e.test(r)?r.match(e)[0].length:0}}function zu(){return function(e,t){t.normalize(e)}}function Zo(e){const t=e.re=Ox(e.__opts__),n=e.__tlds__.slice();e.onCompile(),e.__tlds_replaced__||n.push(Kx),n.push(t.src_xn),t.src_tlds=n.join("|");function r(l){return l.replace("%TLDS%",t.src_tlds)}t.email_fuzzy=RegExp(r(t.tpl_email_fuzzy),"i"),t.link_fuzzy=RegExp(r(t.tpl_link_fuzzy),"i"),t.link_no_ip_fuzzy=RegExp(r(t.tpl_link_no_ip_fuzzy),"i"),t.host_fuzzy_test=RegExp(r(t.tpl_host_fuzzy_test),"i");const o=[];e.__compiled__={};function a(l,d){throw new Error('(LinkifyIt) Invalid schema "'+l+'": '+d)}Object.keys(e.__schemas__).forEach(function(l){const d=e.__schemas__[l];if(d===null)return;const h={validate:null,link:null};if(e.__compiled__[l]=h,zx(d)){Bx(d.validate)?h.validate=Vx(d.validate):Lu(d.validate)?h.validate=d.validate:a(l,d),Lu(d.normalize)?h.normalize=d.normalize:d.normalize?a(l,d):h.normalize=zu();return}if(Lx(d)){o.push(l);return}a(l,d)}),o.forEach(function(l){e.__compiled__[e.__schemas__[l]]&&(e.__compiled__[l].validate=e.__compiled__[e.__schemas__[l]].validate,e.__compiled__[l].normalize=e.__compiled__[e.__schemas__[l]].normalize)}),e.__compiled__[""]={validate:null,normalize:zu()};const i=Object.keys(e.__compiled__).filter(function(l){return l.length>0&&e.__compiled__[l]}).map($x).join("|");e.re.schema_test=RegExp("(^|(?!_)(?:[><]|"+t.src_ZPCc+"))("+i+")","i"),e.re.schema_search=RegExp("(^|(?!_)(?:[><]|"+t.src_ZPCc+"))("+i+")","ig"),e.re.schema_at_start=RegExp("^"+e.re.schema_search.source,"i"),e.re.pretest=RegExp("("+e.re.schema_test.source+")|("+e.re.host_fuzzy_test.source+")|@","i"),Wx(e)}function Gx(e,t){const n=e.__index__,r=e.__last_index__,o=e.__text_cache__.slice(n,r);this.schema=e.__schema__.toLowerCase(),this.index=n+t,this.lastIndex=r+t,this.raw=o,this.text=o,this.url=o}function Ts(e,t){const n=new Gx(e,t);return e.__compiled__[n.schema].normalize(n,e),n}function Mt(e,t){if(!(this instanceof Mt))return new Mt(e,t);t||qx(e)&&(t=e,e={}),this.__opts__=Ns({},Cd,t),this.__index__=-1,this.__last_index__=-1,this.__schema__="",this.__text_cache__="",this.__schemas__=Ns({},Ux,e),this.__compiled__={},this.__tlds__=Hx,this.__tlds_replaced__=!1,this.re={},Zo(this)}Mt.prototype.add=function(t,n){return this.__schemas__[t]=n,Zo(this),this};Mt.prototype.set=function(t){return this.__opts__=Ns(this.__opts__,t),this};Mt.prototype.test=function(t){if(this.__text_cache__=t,this.__index__=-1,!t.length)return!1;let n,r,o,a,i,l,d,h,p;if(this.re.schema_test.test(t)){for(d=this.re.schema_search,d.lastIndex=0;(n=d.exec(t))!==null;)if(a=this.testSchemaAt(t,n[2],d.lastIndex),a){this.__schema__=n[2],this.__index__=n.index+n[1].length,this.__last_index__=n.index+n[0].length+a;break}}return this.__opts__.fuzzyLink&&this.__compiled__["http:"]&&(h=t.search(this.re.host_fuzzy_test),h>=0&&(this.__index__<0||h<this.__index__)&&(r=t.match(this.__opts__.fuzzyIP?this.re.link_fuzzy:this.re.link_no_ip_fuzzy))!==null&&(i=r.index+r[1].length,(this.__index__<0||i<this.__index__)&&(this.__schema__="",this.__index__=i,this.__last_index__=r.index+r[0].length))),this.__opts__.fuzzyEmail&&this.__compiled__["mailto:"]&&(p=t.indexOf("@"),p>=0&&(o=t.match(this.re.email_fuzzy))!==null&&(i=o.index+o[1].length,l=o.index+o[0].length,(this.__index__<0||i<this.__index__||i===this.__index__&&l>this.__last_index__)&&(this.__schema__="mailto:",this.__index__=i,this.__last_index__=l))),this.__index__>=0};Mt.prototype.pretest=function(t){return this.re.pretest.test(t)};Mt.prototype.testSchemaAt=function(t,n,r){return this.__compiled__[n.toLowerCase()]?this.__compiled__[n.toLowerCase()].validate(t,r,this):0};Mt.prototype.match=function(t){const n=[];let r=0;this.__index__>=0&&this.__text_cache__===t&&(n.push(Ts(this,r)),r=this.__last_index__);let o=r?t.slice(r):t;for(;this.test(o);)n.push(Ts(this,r)),o=o.slice(this.__last_index__),r+=this.__last_index__;return n.length?n:null};Mt.prototype.matchAtStart=function(t){if(this.__text_cache__=t,this.__index__=-1,!t.length)return null;const n=this.re.schema_at_start.exec(t);if(!n)return null;const r=this.testSchemaAt(t,n[2],n[0].length);return r?(this.__schema__=n[2],this.__index__=n.index+n[1].length,this.__last_index__=n.index+n[0].length+r,Ts(this,0)):null};Mt.prototype.tlds=function(t,n){return t=Array.isArray(t)?t:[t],n?(this.__tlds__=this.__tlds__.concat(t).sort().filter(function(r,o,a){return r!==a[o-1]}).reverse(),Zo(this),this):(this.__tlds__=t.slice(),this.__tlds_replaced__=!0,Zo(this),this)};Mt.prototype.normalize=function(t){t.schema||(t.url="http://"+t.url),t.schema==="mailto:"&&!/^mailto:/i.test(t.url)&&(t.url="mailto:"+t.url)};Mt.prototype.onCompile=function(){};const dr=2147483647,en=36,bi=1,ro=26,Yx=38,Zx=700,_d=72,kd=128,Sd="-",Xx=/^xn--/,Qx=/[^\0-\x7F]/,Jx=/[\x2E\u3002\uFF0E\uFF61]/g,e2={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},ls=en-bi,tn=Math.floor,cs=String.fromCharCode;function An(e){throw new RangeError(e2[e])}function t2(e,t){const n=[];let r=e.length;for(;r--;)n[r]=t(e[r]);return n}function Ed(e,t){const n=e.split("@");let r="";n.length>1&&(r=n[0]+"@",e=n[1]),e=e.replace(Jx,".");const o=e.split("."),a=t2(o,t).join(".");return r+a}function jd(e){const t=[];let n=0;const r=e.length;for(;n<r;){const o=e.charCodeAt(n++);if(o>=55296&&o<=56319&&n<r){const a=e.charCodeAt(n++);(a&64512)==56320?t.push(((o&1023)<<10)+(a&1023)+65536):(t.push(o),n--)}else t.push(o)}return t}const n2=e=>String.fromCodePoint(...e),r2=function(e){return e>=48&&e<58?26+(e-48):e>=65&&e<91?e-65:e>=97&&e<123?e-97:en},Bu=function(e,t){return e+22+75*(e<26)-((t!=0)<<5)},Ad=function(e,t,n){let r=0;for(e=n?tn(e/Zx):e>>1,e+=tn(e/t);e>ls*ro>>1;r+=en)e=tn(e/ls);return tn(r+(ls+1)*e/(e+Yx))},Dd=function(e){const t=[],n=e.length;let r=0,o=kd,a=_d,i=e.lastIndexOf(Sd);i<0&&(i=0);for(let l=0;l<i;++l)e.charCodeAt(l)>=128&&An("not-basic"),t.push(e.charCodeAt(l));for(let l=i>0?i+1:0;l<n;){const d=r;for(let p=1,y=en;;y+=en){l>=n&&An("invalid-input");const v=r2(e.charCodeAt(l++));v>=en&&An("invalid-input"),v>tn((dr-r)/p)&&An("overflow"),r+=v*p;const x=y<=a?bi:y>=a+ro?ro:y-a;if(v<x)break;const w=en-x;p>tn(dr/w)&&An("overflow"),p*=w}const h=t.length+1;a=Ad(r-d,h,d==0),tn(r/h)>dr-o&&An("overflow"),o+=tn(r/h),r%=h,t.splice(r++,0,o)}return String.fromCodePoint(...t)},Nd=function(e){const t=[];e=jd(e);const n=e.length;let r=kd,o=0,a=_d;for(const d of e)d<128&&t.push(cs(d));const i=t.length;let l=i;for(i&&t.push(Sd);l<n;){let d=dr;for(const p of e)p>=r&&p<d&&(d=p);const h=l+1;d-r>tn((dr-o)/h)&&An("overflow"),o+=(d-r)*h,r=d;for(const p of e)if(p<r&&++o>dr&&An("overflow"),p===r){let y=o;for(let v=en;;v+=en){const x=v<=a?bi:v>=a+ro?ro:v-a;if(y<x)break;const w=y-x,_=en-x;t.push(cs(Bu(x+w%_,0))),y=tn(w/_)}t.push(cs(Bu(y,0))),a=Ad(o,h,l===i),o=0,++l}++o,++r}return t.join("")},o2=function(e){return Ed(e,function(t){return Xx.test(t)?Dd(t.slice(4).toLowerCase()):t})},a2=function(e){return Ed(e,function(t){return Qx.test(t)?"xn--"+Nd(t):t})},Td={version:"2.3.1",ucs2:{decode:jd,encode:n2},decode:Dd,encode:Nd,toASCII:a2,toUnicode:o2},s2={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"",highlight:null,maxNesting:100},components:{core:{},block:{},inline:{}}},i2={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline","text_join"]},block:{rules:["paragraph"]},inline:{rules:["text"],rules2:["balance_pairs","fragments_join"]}}},u2={options:{html:!0,xhtmlOut:!0,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline","text_join"]},block:{rules:["blockquote","code","fence","heading","hr","html_block","lheading","list","reference","paragraph"]},inline:{rules:["autolink","backticks","emphasis","entity","escape","html_inline","image","link","newline","text"],rules2:["balance_pairs","emphasis","fragments_join"]}}},l2={default:s2,zero:i2,commonmark:u2},c2=/^(vbscript|javascript|file|data):/,d2=/^data:image\/(gif|png|jpeg|webp);/;function f2(e){const t=e.trim().toLowerCase();return c2.test(t)?d2.test(t):!0}const Md=["http:","https:","mailto:"];function h2(e){const t=di(e,!0);if(t.hostname&&(!t.protocol||Md.indexOf(t.protocol)>=0))try{t.hostname=Td.toASCII(t.hostname)}catch{}return fo(ci(t))}function p2(e){const t=di(e,!0);if(t.hostname&&(!t.protocol||Md.indexOf(t.protocol)>=0))try{t.hostname=Td.toUnicode(t.hostname)}catch{}return gr(ci(t),gr.defaultChars+"%")}function St(e,t){if(!(this instanceof St))return new St(e,t);t||hi(e)||(t=e||{},e="default"),this.inline=new po,this.block=new fa,this.core=new mi,this.renderer=new _r,this.linkify=new Mt,this.validateLink=f2,this.normalizeLink=h2,this.normalizeLinkText=p2,this.utils=gb,this.helpers=ca({},vb),this.options={},this.configure(e),t&&this.set(t)}St.prototype.set=function(e){return ca(this.options,e),this};St.prototype.configure=function(e){const t=this;if(hi(e)){const n=e;if(e=l2[n],!e)throw new Error('Wrong `markdown-it` preset "'+n+'", check name')}if(!e)throw new Error("Wrong `markdown-it` preset, can't be empty");return e.options&&t.set(e.options),e.components&&Object.keys(e.components).forEach(function(n){e.components[n].rules&&t[n].ruler.enableOnly(e.components[n].rules),e.components[n].rules2&&t[n].ruler2.enableOnly(e.components[n].rules2)}),this};St.prototype.enable=function(e,t){let n=[];Array.isArray(e)||(e=[e]),["core","block","inline"].forEach(function(o){n=n.concat(this[o].ruler.enable(e,!0))},this),n=n.concat(this.inline.ruler2.enable(e,!0));const r=e.filter(function(o){return n.indexOf(o)<0});if(r.length&&!t)throw new Error("MarkdownIt. Failed to enable unknown rule(s): "+r);return this};St.prototype.disable=function(e,t){let n=[];Array.isArray(e)||(e=[e]),["core","block","inline"].forEach(function(o){n=n.concat(this[o].ruler.disable(e,!0))},this),n=n.concat(this.inline.ruler2.disable(e,!0));const r=e.filter(function(o){return n.indexOf(o)<0});if(r.length&&!t)throw new Error("MarkdownIt. Failed to disable unknown rule(s): "+r);return this};St.prototype.use=function(e){const t=[this].concat(Array.prototype.slice.call(arguments,1));return e.apply(e,t),this};St.prototype.parse=function(e,t){if(typeof e!="string")throw new Error("Input data should be a String");const n=new this.core.State(e,this,t);return this.core.process(n),n.tokens};St.prototype.render=function(e,t){return t=t||{},this.renderer.render(this.parse(e,t),this.options,t)};St.prototype.parseInline=function(e,t){const n=new this.core.State(e,this,t);return n.inlineMode=!0,this.core.process(n),n.tokens};St.prototype.renderInline=function(e,t){return t=t||{},this.renderer.render(this.parseInline(e,t),this.options,t)};const m2=new Ip({nodes:{doc:{content:"block+"},paragraph:{content:"inline*",group:"block",parseDOM:[{tag:"p"}],toDOM(){return["p",0]}},blockquote:{content:"block+",group:"block",parseDOM:[{tag:"blockquote"}],toDOM(){return["blockquote",0]}},horizontal_rule:{group:"block",parseDOM:[{tag:"hr"}],toDOM(){return["div",["hr"]]}},heading:{attrs:{level:{default:1}},content:"(text | image)*",group:"block",defining:!0,parseDOM:[{tag:"h1",attrs:{level:1}},{tag:"h2",attrs:{level:2}},{tag:"h3",attrs:{level:3}},{tag:"h4",attrs:{level:4}},{tag:"h5",attrs:{level:5}},{tag:"h6",attrs:{level:6}}],toDOM(e){return["h"+e.attrs.level,0]}},code_block:{content:"text*",group:"block",code:!0,defining:!0,marks:"",attrs:{params:{default:""}},parseDOM:[{tag:"pre",preserveWhitespace:"full",getAttrs:e=>({params:e.getAttribute("data-params")||""})}],toDOM(e){return["pre",e.attrs.params?{"data-params":e.attrs.params}:{},["code",0]]}},ordered_list:{content:"list_item+",group:"block",attrs:{order:{default:1},tight:{default:!1}},parseDOM:[{tag:"ol",getAttrs(e){return{order:e.hasAttribute("start")?+e.getAttribute("start"):1,tight:e.hasAttribute("data-tight")}}}],toDOM(e){return["ol",{start:e.attrs.order==1?null:e.attrs.order,"data-tight":e.attrs.tight?"true":null},0]}},bullet_list:{content:"list_item+",group:"block",attrs:{tight:{default:!1}},parseDOM:[{tag:"ul",getAttrs:e=>({tight:e.hasAttribute("data-tight")})}],toDOM(e){return["ul",{"data-tight":e.attrs.tight?"true":null},0]}},list_item:{content:"block+",defining:!0,parseDOM:[{tag:"li"}],toDOM(){return["li",0]}},text:{group:"inline"},image:{inline:!0,attrs:{src:{},alt:{default:null},title:{default:null}},group:"inline",draggable:!0,parseDOM:[{tag:"img[src]",getAttrs(e){return{src:e.getAttribute("src"),title:e.getAttribute("title"),alt:e.getAttribute("alt")}}}],toDOM(e){return["img",e.attrs]}},hard_break:{inline:!0,group:"inline",selectable:!1,parseDOM:[{tag:"br"}],toDOM(){return["br"]}}},marks:{em:{parseDOM:[{tag:"i"},{tag:"em"},{style:"font-style=italic"},{style:"font-style=normal",clearMark:e=>e.type.name=="em"}],toDOM(){return["em"]}},strong:{parseDOM:[{tag:"strong"},{tag:"b",getAttrs:e=>e.style.fontWeight!="normal"&&null},{style:"font-weight=400",clearMark:e=>e.type.name=="strong"},{style:"font-weight",getAttrs:e=>/^(bold(er)?|[5-9]\d{2,})$/.test(e)&&null}],toDOM(){return["strong"]}},link:{attrs:{href:{},title:{default:null}},inclusive:!1,parseDOM:[{tag:"a[href]",getAttrs(e){return{href:e.getAttribute("href"),title:e.getAttribute("title")}}}],toDOM(e){return["a",e.attrs]}},code:{code:!0,parseDOM:[{tag:"code"}],toDOM(){return["code"]}}}});function g2(e,t){if(e.isText&&t.isText&&vs.sameSet(e.marks,t.marks))return e.withText(e.text+t.text)}class b2{constructor(t,n){this.schema=t,this.tokenHandlers=n,this.stack=[{type:t.topNodeType,attrs:null,content:[],marks:vs.none}]}top(){return this.stack[this.stack.length-1]}push(t){this.stack.length&&this.top().content.push(t)}addText(t){if(!t)return;let n=this.top(),r=n.content,o=r[r.length-1],a=this.schema.text(t,n.marks),i;o&&(i=g2(o,a))?r[r.length-1]=i:r.push(a)}openMark(t){let n=this.top();n.marks=t.addToSet(n.marks)}closeMark(t){let n=this.top();n.marks=t.removeFromSet(n.marks)}parseTokens(t){for(let n=0;n<t.length;n++){let r=t[n],o=this.tokenHandlers[r.type];if(!o)throw new Error("Token type `"+r.type+"` not supported by Markdown parser");o(this,r,t,n)}}addNode(t,n,r){let o=this.top(),a=t.createAndFill(n,r,o?o.marks:[]);return a?(this.push(a),a):null}openNode(t,n){this.stack.push({type:t,attrs:n,content:[],marks:vs.none})}closeNode(){let t=this.stack.pop();return this.addNode(t.type,t.attrs,t.content)}}function Ur(e,t,n,r){return e.getAttrs?e.getAttrs(t,n,r):e.attrs instanceof Function?e.attrs(t):e.attrs}function ds(e,t){return e.noCloseToken||t=="code_inline"||t=="code_block"||t=="fence"}function $u(e){return e[e.length-1]==`
`?e.slice(0,e.length-1):e}function fs(){}function x2(e,t){let n=Object.create(null);for(let r in t){let o=t[r];if(o.block){let a=e.nodeType(o.block);ds(o,r)?n[r]=(i,l,d,h)=>{i.openNode(a,Ur(o,l,d,h)),i.addText($u(l.content)),i.closeNode()}:(n[r+"_open"]=(i,l,d,h)=>i.openNode(a,Ur(o,l,d,h)),n[r+"_close"]=i=>i.closeNode())}else if(o.node){let a=e.nodeType(o.node);n[r]=(i,l,d,h)=>i.addNode(a,Ur(o,l,d,h))}else if(o.mark){let a=e.marks[o.mark];ds(o,r)?n[r]=(i,l,d,h)=>{i.openMark(a.create(Ur(o,l,d,h))),i.addText($u(l.content)),i.closeMark(a)}:(n[r+"_open"]=(i,l,d,h)=>i.openMark(a.create(Ur(o,l,d,h))),n[r+"_close"]=i=>i.closeMark(a))}else if(o.ignore)ds(o,r)?n[r]=fs:(n[r+"_open"]=fs,n[r+"_close"]=fs);else throw new RangeError("Unrecognized parsing spec "+JSON.stringify(o))}return n.text=(r,o)=>r.addText(o.content),n.inline=(r,o)=>r.parseTokens(o.children),n.softbreak=n.softbreak||(r=>r.addText(" ")),n}let y2=class{constructor(t,n,r){this.schema=t,this.tokenizer=n,this.tokens=r,this.tokenHandlers=x2(t,r)}parse(t,n={}){let r=new b2(this.schema,this.tokenHandlers),o;r.parseTokens(this.tokenizer.parse(t,n));do o=r.closeNode();while(r.stack.length);return o||this.schema.topNodeType.createAndFill()}};function qu(e,t){for(;++t<e.length;)if(e[t].type!="list_item_open")return e[t].hidden;return!1}new y2(m2,St("commonmark",{html:!1}),{blockquote:{block:"blockquote"},paragraph:{block:"paragraph"},list_item:{block:"list_item"},bullet_list:{block:"bullet_list",getAttrs:(e,t,n)=>({tight:qu(t,n)})},ordered_list:{block:"ordered_list",getAttrs:(e,t,n)=>({order:+e.attrGet("start")||1,tight:qu(t,n)})},heading:{block:"heading",getAttrs:e=>({level:+e.tag.slice(1)})},code_block:{block:"code_block",noCloseToken:!0},fence:{block:"code_block",getAttrs:e=>({params:e.info||""}),noCloseToken:!0},hr:{node:"horizontal_rule"},image:{node:"image",getAttrs:e=>({src:e.attrGet("src"),title:e.attrGet("title")||null,alt:e.children[0]&&e.children[0].content||null})},hardbreak:{node:"hard_break"},em:{mark:"em"},strong:{mark:"strong"},link:{mark:"link",getAttrs:e=>({href:e.attrGet("href"),title:e.attrGet("title")||null})},code_inline:{mark:"code",noCloseToken:!0}});const v2={open:"",close:"",mixable:!0};let w2=class{constructor(t,n,r={}){this.nodes=t,this.marks=n,this.options=r}serialize(t,n={}){n=Object.assign({},this.options,n);let r=new Pd(this.nodes,this.marks,n);return r.renderContent(t),r.out}};const sn=new w2({blockquote(e,t){e.wrapBlock("> ",null,t,()=>e.renderContent(t))},code_block(e,t){const n=t.textContent.match(/`{3,}/gm),r=n?n.sort().slice(-1)[0]+"`":"```";e.write(r+(t.attrs.params||"")+`
`),e.text(t.textContent,!1),e.write(`
`),e.write(r),e.closeBlock(t)},heading(e,t){e.write(e.repeat("#",t.attrs.level)+" "),e.renderInline(t,!1),e.closeBlock(t)},horizontal_rule(e,t){e.write(t.attrs.markup||"---"),e.closeBlock(t)},bullet_list(e,t){e.renderList(t,"  ",()=>(t.attrs.bullet||"*")+" ")},ordered_list(e,t){let n=t.attrs.order||1,r=String(n+t.childCount-1).length,o=e.repeat(" ",r+2);e.renderList(t,o,a=>{let i=String(n+a);return e.repeat(" ",r-i.length)+i+". "})},list_item(e,t){e.renderContent(t)},paragraph(e,t){e.renderInline(t),e.closeBlock(t)},image(e,t){e.write("!["+e.esc(t.attrs.alt||"")+"]("+t.attrs.src.replace(/[\(\)]/g,"\\$&")+(t.attrs.title?' "'+t.attrs.title.replace(/"/g,'\\"')+'"':"")+")")},hard_break(e,t,n,r){for(let o=r+1;o<n.childCount;o++)if(n.child(o).type!=t.type){e.write(`\\
`);return}},text(e,t){e.text(t.text,!e.inAutolink)}},{em:{open:"*",close:"*",mixable:!0,expelEnclosingWhitespace:!0},strong:{open:"**",close:"**",mixable:!0,expelEnclosingWhitespace:!0},link:{open(e,t,n,r){return e.inAutolink=C2(t,n,r),e.inAutolink?"<":"["},close(e,t,n,r){let{inAutolink:o}=e;return e.inAutolink=void 0,o?">":"]("+t.attrs.href.replace(/[\(\)"]/g,"\\$&")+(t.attrs.title?` "${t.attrs.title.replace(/"/g,'\\"')}"`:"")+")"},mixable:!0},code:{open(e,t,n,r){return Uu(n.child(r),-1)},close(e,t,n,r){return Uu(n.child(r-1),1)},escape:!1}});function Uu(e,t){let n=/`+/g,r,o=0;if(e.isText)for(;r=n.exec(e.text);)o=Math.max(o,r[0].length);let a=o>0&&t>0?" `":"`";for(let i=0;i<o;i++)a+="`";return o>0&&t<0&&(a+=" "),a}function C2(e,t,n){if(e.attrs.title||!/^\w+:/.test(e.attrs.href))return!1;let r=t.child(n);return!r.isText||r.text!=e.attrs.href||r.marks[r.marks.length-1]!=e?!1:n==t.childCount-1||!e.isInSet(t.child(n+1).marks)}let Pd=class{constructor(t,n,r){this.nodes=t,this.marks=n,this.options=r,this.delim="",this.out="",this.closed=null,this.inAutolink=void 0,this.atBlockStart=!1,this.inTightList=!1,typeof this.options.tightLists>"u"&&(this.options.tightLists=!1),typeof this.options.hardBreakNodeName>"u"&&(this.options.hardBreakNodeName="hard_break")}flushClose(t=2){if(this.closed){if(this.atBlank()||(this.out+=`
`),t>1){let n=this.delim,r=/\s+$/.exec(n);r&&(n=n.slice(0,n.length-r[0].length));for(let o=1;o<t;o++)this.out+=n+`
`}this.closed=null}}getMark(t){let n=this.marks[t];if(!n){if(this.options.strict!==!1)throw new Error(`Mark type \`${t}\` not supported by Markdown renderer`);n=v2}return n}wrapBlock(t,n,r,o){let a=this.delim;this.write(n??t),this.delim+=t,o(),this.delim=a,this.closeBlock(r)}atBlank(){return/(^|\n)$/.test(this.out)}ensureNewLine(){this.atBlank()||(this.out+=`
`)}write(t){this.flushClose(),this.delim&&this.atBlank()&&(this.out+=this.delim),t&&(this.out+=t)}closeBlock(t){this.closed=t}text(t,n=!0){let r=t.split(`
`);for(let o=0;o<r.length;o++)this.write(),!n&&r[o][0]=="["&&/(^|[^\\])\!$/.test(this.out)&&(this.out=this.out.slice(0,this.out.length-1)+"\\!"),this.out+=n?this.esc(r[o],this.atBlockStart):r[o],o!=r.length-1&&(this.out+=`
`)}render(t,n,r){if(this.nodes[t.type.name])this.nodes[t.type.name](this,t,n,r);else{if(this.options.strict!==!1)throw new Error("Token type `"+t.type.name+"` not supported by Markdown renderer");t.type.isLeaf||(t.type.inlineContent?this.renderInline(t):this.renderContent(t),t.isBlock&&this.closeBlock(t))}}renderContent(t){t.forEach((n,r,o)=>this.render(n,t,o))}renderInline(t,n=!0){this.atBlockStart=n;let r=[],o="",a=(i,l,d)=>{let h=i?i.marks:[];i&&i.type.name===this.options.hardBreakNodeName&&(h=h.filter(_=>{if(d+1==t.childCount)return!1;let E=t.child(d+1);return _.isInSet(E.marks)&&(!E.isText||/\S/.test(E.text))}));let p=o;if(o="",i&&i.isText&&h.some(_=>{let E=this.getMark(_.type.name);return E&&E.expelEnclosingWhitespace&&!_.isInSet(r)})){let[_,E,k]=/^(\s*)(.*)$/m.exec(i.text);E&&(p+=E,i=k?i.withText(k):null,i||(h=r))}if(i&&i.isText&&h.some(_=>{let E=this.getMark(_.type.name);return E&&E.expelEnclosingWhitespace&&(d==t.childCount-1||!_.isInSet(t.child(d+1).marks))})){let[_,E,k]=/^(.*?)(\s*)$/m.exec(i.text);k&&(o=k,i=E?i.withText(E):null,i||(h=r))}let y=h.length?h[h.length-1]:null,v=y&&this.getMark(y.type.name).escape===!1,x=h.length-(v?1:0);e:for(let _=0;_<x;_++){let E=h[_];if(!this.getMark(E.type.name).mixable)break;for(let k=0;k<r.length;k++){let S=r[k];if(!this.getMark(S.type.name).mixable)break;if(E.eq(S)){_>k?h=h.slice(0,k).concat(E).concat(h.slice(k,_)).concat(h.slice(_+1,x)):k>_&&(h=h.slice(0,_).concat(h.slice(_+1,k)).concat(E).concat(h.slice(k,x)));continue e}}}let w=0;for(;w<Math.min(r.length,x)&&h[w].eq(r[w]);)++w;for(;w<r.length;)this.text(this.markString(r.pop(),!1,t,d),!1);if(p&&this.text(p),i){for(;r.length<x;){let _=h[r.length];r.push(_),this.text(this.markString(_,!0,t,d),!1),this.atBlockStart=!1}v&&i.isText?this.text(this.markString(y,!0,t,d)+i.text+this.markString(y,!1,t,d+1),!1):this.render(i,t,d),this.atBlockStart=!1}i?.isText&&i.nodeSize>0&&(this.atBlockStart=!1)};t.forEach(a),a(null,0,t.childCount),this.atBlockStart=!1}renderList(t,n,r){this.closed&&this.closed.type==t.type?this.flushClose(3):this.inTightList&&this.flushClose(1);let o=typeof t.attrs.tight<"u"?t.attrs.tight:this.options.tightLists,a=this.inTightList;this.inTightList=o,t.forEach((i,l,d)=>{d&&o&&this.flushClose(1),this.wrapBlock(n,r(d),t,()=>this.render(i,t,d))}),this.inTightList=a}esc(t,n=!1){return t=t.replace(/[`*\\~\[\]_]/g,(r,o)=>r=="_"&&o>0&&o+1<t.length&&t[o-1].match(/\w/)&&t[o+1].match(/\w/)?r:"\\"+r),n&&(t=t.replace(/^(\+[ ]|[\-*>])/,"\\$&").replace(/^(\s*)(#{1,6})(\s|$)/,"$1\\$2$3").replace(/^(\s*\d+)\.\s/,"$1\\. ")),this.options.escapeExtraCharacters&&(t=t.replace(this.options.escapeExtraCharacters,"\\$&")),t}quote(t){let n=t.indexOf('"')==-1?'""':t.indexOf("'")==-1?"''":"()";return n[0]+t+n[1]}repeat(t,n){let r="";for(let o=0;o<n;o++)r+=t;return r}markString(t,n,r,o){let a=this.getMark(t.type.name),i=n?a.open:a.close;return typeof i=="string"?i:i(this,t,r,o)}getEnclosingWhitespace(t){return{leading:(t.match(/^(\s+)/)||[void 0])[0],trailing:(t.match(/(\s+)$/)||[void 0])[0]}}};var Ms=!0,Rd=!1,Fd=!1,_2=function(e,t){t&&(Ms=!t.enabled,Rd=!!t.label,Fd=!!t.labelAfter),e.core.ruler.after("inline","github-task-lists",function(n){for(var r=n.tokens,o=2;o<r.length;o++)S2(r,o)&&(E2(r[o],n.Token),Ku(r[o-2],"class","task-list-item"+(Ms?"":" enabled")),Ku(r[k2(r,o-2)],"class","contains-task-list"))})};function Ku(e,t,n){var r=e.attrIndex(t),o=[t,n];r<0?e.attrPush(o):e.attrs[r]=o}function k2(e,t){for(var n=e[t].level-1,r=t-1;r>=0;r--)if(e[r].level===n)return r;return-1}function S2(e,t){return T2(e[t])&&M2(e[t-1])&&P2(e[t-2])&&R2(e[t])}function E2(e,t){if(e.children.unshift(j2(e,t)),e.children[1].content=e.children[1].content.slice(3),e.content=e.content.slice(3),Rd)if(Fd){e.children.pop();var n="task-item-"+Math.ceil(Math.random()*(1e4*1e3)-1e3);e.children[0].content=e.children[0].content.slice(0,-1)+' id="'+n+'">',e.children.push(N2(e.content,n,t))}else e.children.unshift(A2(t)),e.children.push(D2(t))}function j2(e,t){var n=new t("html_inline","",0),r=Ms?' disabled="" ':"";return e.content.indexOf("[ ] ")===0?n.content='<input class="task-list-item-checkbox"'+r+'type="checkbox">':(e.content.indexOf("[x] ")===0||e.content.indexOf("[X] ")===0)&&(n.content='<input class="task-list-item-checkbox" checked=""'+r+'type="checkbox">'),n}function A2(e){var t=new e("html_inline","",0);return t.content="<label>",t}function D2(e){var t=new e("html_inline","",0);return t.content="</label>",t}function N2(e,t,n){var r=new n("html_inline","",0);return r.content='<label class="task-list-item-label" for="'+t+'">'+e+"</label>",r.attrs=[{for:t}],r}function T2(e){return e.type==="inline"}function M2(e){return e.type==="paragraph_open"}function P2(e){return e.type==="list_item_open"}function R2(e){return e.content.indexOf("[ ] ")===0||e.content.indexOf("[x] ")===0||e.content.indexOf("[X] ")===0}const F2=Sl(_2);var I2=Object.defineProperty,O2=(e,t,n)=>t in e?I2(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Xo=(e,t,n)=>O2(e,typeof t!="symbol"?t+"":t,n);const L2=Ys.create({name:"markdownTightLists",addOptions:()=>({tight:!0,tightClass:"tight",listTypes:["bulletList","orderedList"]}),addGlobalAttributes(){return[{types:this.options.listTypes,attributes:{tight:{default:this.options.tight,parseHTML:e=>e.getAttribute("data-tight")==="true"||!e.querySelector("p"),renderHTML:e=>({class:e.tight?this.options.tightClass:null,"data-tight":e.tight?"true":null})}}}]},addCommands(){var e=this;return{toggleTight:function(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return n=>{let{editor:r,commands:o}=n;function a(i){if(!r.isActive(i))return!1;const l=r.getAttributes(i);return o.updateAttributes(i,{tight:t??!(l!=null&&l.tight)})}return e.options.listTypes.some(i=>a(i))}}}}}),Hu=St();function Id(e,t){return Hu.inline.State.prototype.scanDelims.call({src:e,posMax:e.length}),new Hu.inline.State(e,null,null,[]).scanDelims(t,!0)}function Od(e,t,n,r){let o=e.substring(0,n)+e.substring(n+t.length);return o=o.substring(0,n+r)+t+o.substring(n+r),o}function z2(e,t,n,r){let o=n,a=e;for(;o<r&&!Id(a,o).can_open;)a=Od(a,t,o,1),o++;return{text:a,from:o,to:r}}function B2(e,t,n,r){let o=r,a=e;for(;o>n&&!Id(a,o).can_close;)a=Od(a,t,o,-1),o--;return{text:a,from:n,to:o}}function $2(e,t,n,r){let o={text:e,from:n,to:r};return o=z2(o.text,t,o.from,o.to),o=B2(o.text,t,o.from,o.to),o.to-o.from<t.length+1&&(o.text=o.text.substring(0,o.from)+o.text.substring(o.to+t.length)),o.text}class q2 extends Pd{constructor(t,n,r){super(t,n,r??{}),Xo(this,"inTable",!1),this.inlines=[]}render(t,n,r){super.render(t,n,r);const o=this.inlines[this.inlines.length-1];if(o!=null&&o.start&&o!==null&&o!==void 0&&o.end){const{delimiter:a,start:i,end:l}=this.normalizeInline(o);this.out=$2(this.out,a,i,l),this.inlines.pop()}}markString(t,n,r,o){const a=this.marks[t.type.name];if(a.expelEnclosingWhitespace)if(n)this.inlines.push({start:this.out.length,delimiter:a.open});else{const i=this.inlines.pop();this.inlines.push({...i,end:this.out.length})}return super.markString(t,n,r,o)}normalizeInline(t){let{start:n,end:r}=t;for(;this.out.charAt(n).match(/\s/);)n++;return{...t,start:n}}}const Ld=wr.create({name:"markdownHTMLMark",addStorage(){return{markdown:{serialize:{open(e,t){var n,r;return this.editor.storage.markdown.options.html?(n=(r=Wu(t))===null||r===void 0?void 0:r[0])!==null&&n!==void 0?n:"":(console.warn(`Tiptap Markdown: "${t.type.name}" mark is only available in html mode`),"")},close(e,t){var n,r;return this.editor.storage.markdown.options.html&&(n=(r=Wu(t))===null||r===void 0?void 0:r[1])!==null&&n!==void 0?n:""}},parse:{}}}}});function Wu(e){const t=e.type.schema,n=t.text(" ",[e]),o=El(ws.from(n),t).match(/^(<.*?>) (<\/.*?>)$/);return o?[o[1],o[2]]:null}function xi(e){const t=`<body>${e}</body>`;return new window.DOMParser().parseFromString(t,"text/html").body}function U2(e){return e?.replace(/</g,"&lt;").replace(/>/g,"&gt;")}function K2(e){const t=e.parentElement,n=t.cloneNode();for(;t.firstChild&&t.firstChild!==e;)n.appendChild(t.firstChild);n.childNodes.length>0&&t.parentElement.insertBefore(n,t),t.parentElement.insertBefore(e,t),t.childNodes.length===0&&t.remove()}function H2(e){const t=e.parentNode;for(;e.firstChild;)t.insertBefore(e.firstChild,e);t.removeChild(e)}const pa=mt.create({name:"markdownHTMLNode",addStorage(){return{markdown:{serialize(e,t,n){this.editor.storage.markdown.options.html?e.write(W2(t,n)):(console.warn(`Tiptap Markdown: "${t.type.name}" node is only available in html mode`),e.write(`[${t.type.name}]`)),t.isBlock&&e.closeBlock(t)},parse:{}}}}});function W2(e,t){const n=e.type.schema,r=El(ws.from(e),n);return e.isBlock&&(t instanceof ws||t.type.name===n.topNodeType.name)?V2(r):r}function V2(e){const n=xi(e).firstElementChild;return n.innerHTML=n.innerHTML.trim()?`
${n.innerHTML}
`:`
`,n.outerHTML}const G2=mt.create({name:"blockquote"}),Y2=G2.extend({addStorage(){return{markdown:{serialize:sn.nodes.blockquote,parse:{}}}}}),Z2=mt.create({name:"bulletList"}),zd=Z2.extend({addStorage(){return{markdown:{serialize(e,t){return e.renderList(t,"  ",()=>(this.editor.storage.markdown.options.bulletListMarker||"-")+" ")},parse:{}}}}}),X2=mt.create({name:"codeBlock"}),Q2=X2.extend({addStorage(){return{markdown:{serialize(e,t){e.write("```"+(t.attrs.language||"")+`
`),e.text(t.textContent,!1),e.ensureNewLine(),e.write("```"),e.closeBlock(t)},parse:{setup(e){var t;e.set({langPrefix:(t=this.options.languageClassPrefix)!==null&&t!==void 0?t:"language-"})},updateDOM(e){e.innerHTML=e.innerHTML.replace(/\n<\/code><\/pre>/g,"</code></pre>")}}}}}}),J2=mt.create({name:"hardBreak"}),Bd=J2.extend({addStorage(){return{markdown:{serialize(e,t,n,r){for(let o=r+1;o<n.childCount;o++)if(n.child(o).type!=t.type){e.write(e.inTable?pa.storage.markdown.serialize.call(this,e,t,n):`\\
`);return}},parse:{}}}}}),ey=mt.create({name:"heading"}),ty=ey.extend({addStorage(){return{markdown:{serialize:sn.nodes.heading,parse:{}}}}}),ny=mt.create({name:"horizontalRule"}),ry=ny.extend({addStorage(){return{markdown:{serialize:sn.nodes.horizontal_rule,parse:{}}}}}),oy=mt.create({name:"image"}),ay=oy.extend({addStorage(){return{markdown:{serialize:sn.nodes.image,parse:{}}}}}),sy=mt.create({name:"listItem"}),iy=sy.extend({addStorage(){return{markdown:{serialize:sn.nodes.list_item,parse:{}}}}}),uy=mt.create({name:"orderedList"});function ly(e,t,n){let r=0;for(;n-r>0&&t.child(n-r-1).type.name===e.type.name;r++);return r}const cy=uy.extend({addStorage(){return{markdown:{serialize(e,t,n,r){const o=t.attrs.start||1,a=String(o+t.childCount-1).length,i=e.repeat(" ",a+2),d=ly(t,n,r)%2?") ":". ";e.renderList(t,i,h=>{const p=String(o+h);return e.repeat(" ",a-p.length)+p+d})},parse:{}}}}}),dy=mt.create({name:"paragraph"}),fy=dy.extend({addStorage(){return{markdown:{serialize:sn.nodes.paragraph,parse:{}}}}});function hs(e){var t,n;return(t=e==null||(n=e.content)===null||n===void 0?void 0:n.content)!==null&&t!==void 0?t:[]}const hy=mt.create({name:"table"}),py=hy.extend({addStorage(){return{markdown:{serialize(e,t,n){if(!my(t)){pa.storage.markdown.serialize.call(this,e,t,n);return}e.inTable=!0,t.forEach((r,o,a)=>{if(e.write("| "),r.forEach((i,l,d)=>{d&&e.write(" | ");const h=i.firstChild;h.textContent.trim()&&e.renderInline(h)}),e.write(" |"),e.ensureNewLine(),!a){const i=Array.from({length:r.childCount}).map(()=>"---").join(" | ");e.write(`| ${i} |`),e.ensureNewLine()}}),e.closeBlock(t),e.inTable=!1},parse:{}}}}});function Vu(e){return e.attrs.colspan>1||e.attrs.rowspan>1}function my(e){const t=hs(e),n=t[0],r=t.slice(1);return!(hs(n).some(o=>o.type.name!=="tableHeader"||Vu(o)||o.childCount>1)||r.some(o=>hs(o).some(a=>a.type.name==="tableHeader"||Vu(a)||a.childCount>1)))}const gy=mt.create({name:"taskItem"}),by=gy.extend({addStorage(){return{markdown:{serialize(e,t){const n=t.attrs.checked?"[x]":"[ ]";e.write(`${n} `),e.renderContent(t)},parse:{updateDOM(e){[...e.querySelectorAll(".task-list-item")].forEach(t=>{const n=t.querySelector("input");t.setAttribute("data-type","taskItem"),n&&(t.setAttribute("data-checked",n.checked),n.remove())})}}}}}}),xy=mt.create({name:"taskList"}),yy=xy.extend({addStorage(){return{markdown:{serialize:zd.storage.markdown.serialize,parse:{setup(e){e.use(F2)},updateDOM(e){[...e.querySelectorAll(".contains-task-list")].forEach(t=>{t.setAttribute("data-type","taskList")})}}}}}}),vy=mt.create({name:"text"}),wy=vy.extend({addStorage(){return{markdown:{serialize(e,t){e.text(U2(t.text))},parse:{}}}}}),Cy=wr.create({name:"bold"}),_y=Cy.extend({addStorage(){return{markdown:{serialize:sn.marks.strong,parse:{}}}}}),ky=wr.create({name:"code"}),Sy=ky.extend({addStorage(){return{markdown:{serialize:sn.marks.code,parse:{}}}}}),Ey=wr.create({name:"italic"}),jy=Ey.extend({addStorage(){return{markdown:{serialize:sn.marks.em,parse:{}}}}}),Ay=wr.create({name:"link"}),Dy=Ay.extend({addStorage(){return{markdown:{serialize:sn.marks.link,parse:{}}}}}),Ny=wr.create({name:"strike"}),Ty=Ny.extend({addStorage(){return{markdown:{serialize:{open:"~~",close:"~~",expelEnclosingWhitespace:!0},parse:{}}}}}),My=[Y2,zd,Q2,Bd,ty,ry,pa,ay,iy,cy,fy,py,by,yy,wy,_y,Sy,Ld,jy,Dy,Ty];function Qo(e){var t,n;const r=(t=e.storage)===null||t===void 0?void 0:t.markdown,o=(n=My.find(a=>a.name===e.name))===null||n===void 0?void 0:n.storage.markdown;return r||o?{...o,...r}:null}class Py{constructor(t){Xo(this,"editor",null),this.editor=t}serialize(t){const n=new q2(this.nodes,this.marks,{hardBreakNodeName:Bd.name});return n.renderContent(t),n.out}get nodes(){var t;return{...Object.fromEntries(Object.keys(this.editor.schema.nodes).map(n=>[n,this.serializeNode(pa)])),...Object.fromEntries((t=this.editor.extensionManager.extensions.filter(n=>n.type==="node"&&this.serializeNode(n)).map(n=>[n.name,this.serializeNode(n)]))!==null&&t!==void 0?t:[])}}get marks(){var t;return{...Object.fromEntries(Object.keys(this.editor.schema.marks).map(n=>[n,this.serializeMark(Ld)])),...Object.fromEntries((t=this.editor.extensionManager.extensions.filter(n=>n.type==="mark"&&this.serializeMark(n)).map(n=>[n.name,this.serializeMark(n)]))!==null&&t!==void 0?t:[])}}serializeNode(t){var n;return(n=Qo(t))===null||n===void 0||(n=n.serialize)===null||n===void 0?void 0:n.bind({editor:this.editor,options:t.options})}serializeMark(t){var n;const r=(n=Qo(t))===null||n===void 0?void 0:n.serialize;return r?{...r,open:typeof r.open=="function"?r.open.bind({editor:this.editor,options:t.options}):r.open,close:typeof r.close=="function"?r.close.bind({editor:this.editor,options:t.options}):r.close}:null}}class Ry{constructor(t,n){Xo(this,"editor",null),Xo(this,"md",null);let{html:r,linkify:o,breaks:a}=n;this.editor=t,this.md=this.withPatchedRenderer(St({html:r,linkify:o,breaks:a}))}parse(t){let{inline:n}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(typeof t=="string"){this.editor.extensionManager.extensions.forEach(a=>{var i;return(i=Qo(a))===null||i===void 0||(i=i.parse)===null||i===void 0||(i=i.setup)===null||i===void 0?void 0:i.call({editor:this.editor,options:a.options},this.md)});const r=this.md.render(t),o=xi(r);return this.editor.extensionManager.extensions.forEach(a=>{var i;return(i=Qo(a))===null||i===void 0||(i=i.parse)===null||i===void 0||(i=i.updateDOM)===null||i===void 0?void 0:i.call({editor:this.editor,options:a.options},o)}),this.normalizeDOM(o,{inline:n,content:t}),o.innerHTML}return t}normalizeDOM(t,n){let{inline:r,content:o}=n;return this.normalizeBlocks(t),t.querySelectorAll("*").forEach(a=>{var i;((i=a.nextSibling)===null||i===void 0?void 0:i.nodeType)===Node.TEXT_NODE&&!a.closest("pre")&&(a.nextSibling.textContent=a.nextSibling.textContent.replace(/^\n/,""))}),r&&this.normalizeInline(t,o),t}normalizeBlocks(t){const r=Object.values(this.editor.schema.nodes).filter(o=>o.isBlock).map(o=>{var a;return(a=o.spec.parseDOM)===null||a===void 0?void 0:a.map(i=>i.tag)}).flat().filter(Boolean).join(",");r&&[...t.querySelectorAll(r)].forEach(o=>{o.parentElement.matches("p")&&K2(o)})}normalizeInline(t,n){var r;if((r=t.firstElementChild)!==null&&r!==void 0&&r.matches("p")){var o,a,i,l;const d=t.firstElementChild,{nextElementSibling:h}=d,p=(o=(a=n.match(/^\s+/))===null||a===void 0?void 0:a[0])!==null&&o!==void 0?o:"",y=h?"":(i=(l=n.match(/\s+$/))===null||l===void 0?void 0:l[0])!==null&&i!==void 0?i:"";if(n.match(/^\n\n/)){d.innerHTML=`${d.innerHTML}${y}`;return}H2(d),t.innerHTML=`${p}${t.innerHTML}${y}`}}withPatchedRenderer(t){const n=r=>function(){const o=r(...arguments);return o===`
`?o:o[o.length-1]===`
`?o.slice(0,-1):o};return t.renderer.rules.hardbreak=n(t.renderer.rules.hardbreak),t.renderer.rules.softbreak=n(t.renderer.rules.softbreak),t.renderer.rules.fence=n(t.renderer.rules.fence),t.renderer.rules.code_block=n(t.renderer.rules.code_block),t.renderer.renderToken=n(t.renderer.renderToken.bind(t.renderer)),t}}const Fy=Ys.create({name:"markdownClipboard",addOptions(){return{transformPastedText:!1,transformCopiedText:!1}},addProseMirrorPlugins(){return[new Lp({key:new zp("markdownClipboard"),props:{clipboardTextParser:(e,t,n)=>{if(n||!this.options.transformPastedText)return null;const r=this.editor.storage.markdown.parser.parse(e,{inline:!0});return Bp.fromSchema(this.editor.schema).parseSlice(xi(r),{preserveWhitespace:!0,context:t})},clipboardTextSerializer:e=>this.options.transformCopiedText?this.editor.storage.markdown.serializer.serialize(e.content):null}})]}}),Iy=Ys.create({name:"markdown",priority:50,addOptions(){return{html:!0,tightLists:!0,tightListClass:"tight",bulletListMarker:"-",linkify:!1,breaks:!1,transformPastedText:!1,transformCopiedText:!1}},addCommands(){const e=Op.Commands.config.addCommands();return{setContent:(t,n,r)=>o=>e.setContent(o.editor.storage.markdown.parser.parse(t),n,r)(o),insertContentAt:(t,n,r)=>o=>e.insertContentAt(t,o.editor.storage.markdown.parser.parse(n,{inline:!0}),r)(o)}},onBeforeCreate(){this.editor.storage.markdown={options:{...this.options},parser:new Ry(this.editor,this.options),serializer:new Py(this.editor),getMarkdown:()=>this.editor.storage.markdown.serializer.serialize(this.editor.state.doc)},this.editor.options.initialContent=this.editor.options.content,this.editor.options.content=this.editor.storage.markdown.parser.parse(this.editor.options.content)},onCreate(){this.editor.options.content=this.editor.options.initialContent,delete this.editor.options.initialContent},addStorage(){return{}},addExtensions(){return[L2.configure({tight:this.options.tightLists,tightClass:this.options.tightListClass}),Fy.configure({transformPastedText:this.options.transformPastedText,transformCopiedText:this.options.transformCopiedText})]}}),ps=[{emoji:"",name:"grinning"},{emoji:"",name:"smiley"},{emoji:"",name:"smile"},{emoji:"",name:"grin"},{emoji:"",name:"laughing"},{emoji:"",name:"sweat_smile"},{emoji:"",name:"rofl"},{emoji:"",name:"joy"},{emoji:"",name:"slightly_smiling_face"},{emoji:"",name:"upside_down_face"},{emoji:"",name:"wink"},{emoji:"",name:"blush"},{emoji:"",name:"innocent"},{emoji:"",name:"smiling_face_with_hearts"},{emoji:"",name:"heart_eyes"},{emoji:"",name:"star_struck"},{emoji:"",name:"kissing_heart"},{emoji:"",name:"kissing"},{emoji:"",name:"kissing_closed_eyes"},{emoji:"",name:"kissing_smiling_eyes"},{emoji:"",name:"smiling_face_with_tear"},{emoji:"",name:"yum"},{emoji:"",name:"stuck_out_tongue"},{emoji:"",name:"stuck_out_tongue_winking_eye"},{emoji:"",name:"zany_face"},{emoji:"",name:"stuck_out_tongue_closed_eyes"},{emoji:"",name:"money_mouth_face"},{emoji:"",name:"hugs"},{emoji:"",name:"hand_over_mouth"},{emoji:"",name:"shushing_face"},{emoji:"",name:"thinking"},{emoji:"",name:"zipper_mouth_face"},{emoji:"",name:"raised_eyebrow"},{emoji:"",name:"neutral_face"},{emoji:"",name:"expressionless"},{emoji:"",name:"no_mouth"},{emoji:"",name:"smirk"},{emoji:"",name:"unamused"},{emoji:"",name:"roll_eyes"},{emoji:"",name:"grimacing"},{emoji:"",name:"lying_face"},{emoji:"",name:"pensive"},{emoji:"",name:"sleepy"},{emoji:"",name:"drooling_face"},{emoji:"",name:"sleeping"},{emoji:"",name:"mask"},{emoji:"",name:"face_with_thermometer"},{emoji:"",name:"face_with_head_bandage"},{emoji:"",name:"nauseated_face"},{emoji:"",name:"vomiting_face"},{emoji:"",name:"sneezing_face"},{emoji:"",name:"hot_face"},{emoji:"",name:"cold_face"},{emoji:"",name:"woozy_face"},{emoji:"",name:"dizzy_face"},{emoji:"",name:"exploding_head"},{emoji:"",name:"cowboy_hat_face"},{emoji:"",name:"partying_face"},{emoji:"",name:"disguised_face"},{emoji:"",name:"sunglasses"},{emoji:"",name:"nerd_face"},{emoji:"",name:"monocle_face"},{emoji:"",name:"confused"},{emoji:"",name:"worried"},{emoji:"",name:"slightly_frowning_face"},{emoji:"",name:"frowning_face"},{emoji:"",name:"open_mouth"},{emoji:"",name:"hushed"},{emoji:"",name:"astonished"},{emoji:"",name:"flushed"},{emoji:"",name:"pleading_face"},{emoji:"",name:"frowning"},{emoji:"",name:"anguished"},{emoji:"",name:"fearful"},{emoji:"",name:"cold_sweat"},{emoji:"",name:"disappointed_relieved"},{emoji:"",name:"cry"},{emoji:"",name:"sob"},{emoji:"",name:"scream"},{emoji:"",name:"confounded"},{emoji:"",name:"persevere"},{emoji:"",name:"disappointed"},{emoji:"",name:"sweat"},{emoji:"",name:"weary"},{emoji:"",name:"tired_face"},{emoji:"",name:"yawning_face"},{emoji:"",name:"triumph"},{emoji:"",name:"rage"},{emoji:"",name:"angry"},{emoji:"",name:"cursing_face"},{emoji:"",name:"smiling_imp"},{emoji:"",name:"imp"},{emoji:"",name:"skull"},{emoji:"",name:"skull_and_crossbones"},{emoji:"",name:"poop"},{emoji:"",name:"clown_face"},{emoji:"",name:"ogre"},{emoji:"",name:"goblin"},{emoji:"",name:"ghost"},{emoji:"",name:"alien"},{emoji:"",name:"space_invader"},{emoji:"",name:"robot"},{emoji:"",name:"smiley_cat"},{emoji:"",name:"smile_cat"},{emoji:"",name:"joy_cat"},{emoji:"",name:"heart_eyes_cat"},{emoji:"",name:"smirk_cat"},{emoji:"",name:"kissing_cat"},{emoji:"",name:"scream_cat"},{emoji:"",name:"crying_cat_face"},{emoji:"",name:"pouting_cat"},{emoji:"",name:"wave"},{emoji:"",name:"raised_back_of_hand"},{emoji:"",name:"raised_hand_with_fingers_splayed"},{emoji:"",name:"hand"},{emoji:"",name:"vulcan_salute"},{emoji:"",name:"ok_hand"},{emoji:"",name:"pinched_fingers"},{emoji:"",name:"pinching_hand"},{emoji:"",name:"v"},{emoji:"",name:"crossed_fingers"},{emoji:"",name:"love_you_gesture"},{emoji:"",name:"metal"},{emoji:"",name:"call_me_hand"},{emoji:"",name:"point_left"},{emoji:"",name:"point_right"},{emoji:"",name:"point_up_2"},{emoji:"",name:"middle_finger"},{emoji:"",name:"point_down"},{emoji:"",name:"point_up"},{emoji:"",name:"thumbsup"},{emoji:"",name:"thumbsdown"},{emoji:"",name:"fist"},{emoji:"",name:"facepunch"},{emoji:"",name:"fist_left"},{emoji:"",name:"fist_right"},{emoji:"",name:"clap"},{emoji:"",name:"raised_hands"},{emoji:"",name:"open_hands"},{emoji:"",name:"palms_up_together"},{emoji:"",name:"handshake"},{emoji:"",name:"pray"},{emoji:"",name:"heart"},{emoji:"",name:"orange_heart"},{emoji:"",name:"yellow_heart"},{emoji:"",name:"green_heart"},{emoji:"",name:"blue_heart"},{emoji:"",name:"purple_heart"},{emoji:"",name:"black_heart"},{emoji:"",name:"white_heart"},{emoji:"",name:"brown_heart"},{emoji:"",name:"broken_heart"},{emoji:"",name:"heavy_heart_exclamation"},{emoji:"",name:"two_hearts"},{emoji:"",name:"revolving_hearts"},{emoji:"",name:"heartbeat"},{emoji:"",name:"heartpulse"},{emoji:"",name:"sparkling_heart"},{emoji:"",name:"cupid"},{emoji:"",name:"gift_heart"},{emoji:"",name:"heart_decoration"},{emoji:"",name:"peace_symbol"},{emoji:"",name:"latin_cross"},{emoji:"",name:"star_and_crescent"},{emoji:"",name:"om"},{emoji:"",name:"wheel_of_dharma"},{emoji:"",name:"star_of_david"},{emoji:"",name:"six_pointed_star"},{emoji:"",name:"menorah"},{emoji:"",name:"yin_yang"},{emoji:"",name:"orthodox_cross"},{emoji:"",name:"place_of_worship"},{emoji:"",name:"ophiuchus"},{emoji:"",name:"aries"},{emoji:"",name:"taurus"},{emoji:"",name:"gemini"},{emoji:"",name:"cancer"},{emoji:"",name:"leo"},{emoji:"",name:"virgo"},{emoji:"",name:"libra"},{emoji:"",name:"scorpius"},{emoji:"",name:"sagittarius"},{emoji:"",name:"capricorn"},{emoji:"",name:"aquarius"},{emoji:"",name:"pisces"},{emoji:"",name:"id"},{emoji:"",name:"zap"},{emoji:"",name:"boom"},{emoji:"",name:"dizzy"},{emoji:"",name:"sweat_drops"},{emoji:"",name:"dash"},{emoji:"",name:"hole"},{emoji:"",name:"bomb"},{emoji:"",name:"speech_balloon"},{emoji:"",name:"eye_speech_bubble"},{emoji:"",name:"left_speech_bubble"},{emoji:"",name:"right_anger_bubble"},{emoji:"",name:"thought_balloon"},{emoji:"",name:"zzz"}];function Oy({onEmojiSelect:e,onClose:t,query:n="",position:r}){const[o,a]=g.useState(ps);g.useEffect(()=>{if(n&&n.trim()){const p=n.toLowerCase().trim(),y=ps.filter(v=>v.name.toLowerCase().includes(p)||v.emoji.includes(n)||v.name.toLowerCase().startsWith(p));a(y.slice(0,20))}else a(ps.slice(0,40))},[n]);const i=p=>{e(p),t()},l=p=>{p.key==="Escape"&&t()},d=()=>{if(!r)return{};const p=window.innerWidth,y=window.innerHeight,v=320,x=240;let w=r.x,_=r.y;return w+v>p&&(w=p-v-20),_+x>y&&(_=r.y-x-10),{left:Math.max(10,w),top:Math.max(10,_)}},h=u.jsxs("div",{className:"fixed bg-white border border-border rounded-lg shadow-xl p-3 w-80",style:{...d(),zIndex:2147483647},onKeyDown:l,children:[n&&u.jsxs("div",{className:"text-xs text-blue-600 mb-2 font-medium",children:['"',n,'"']}),u.jsx("div",{className:"grid grid-cols-10 gap-1 max-h-52 overflow-y-auto",children:o.map((p,y)=>u.jsx(_e,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0 hover:bg-blue-50 text-lg transition-colors",onClick:()=>i(p.emoji),title:p.name,children:p.emoji},`${p.emoji}-${y}`))}),o.length===0&&n&&u.jsx("div",{className:"text-center text-muted-foreground text-sm py-6",children:"No emojis found"})]});return vr.createPortal(h,document.body)}function Ly({content:e,placeholder:t="Start typing...",onUpdate:n,onSave:r,onCancel:o,className:a,autoFocus:i=!1}){const[l,d]=g.useState(!1),[h,p]=g.useState(""),[y,v]=g.useState(null),x=g.useRef(null),w=$p({extensions:[qp.configure({strike:!1,code:!1,blockquote:!1}),Iy.configure({html:!0,transformPastedText:!0,transformCopiedText:!1}),Ag,Dg.configure({nested:!0}),Up.configure({openOnClick:!1,HTMLAttributes:{class:"text-blue-600 underline hover:text-blue-800 cursor-pointer",target:"_blank",rel:"noopener noreferrer"},protocols:["http","https","ftp","mailto"],validate:S=>/^https?:\/\//.test(S)}),Kp.configure({HTMLAttributes:{class:"border-l-4 border-gray-300 pl-4 italic"}}),Hp.configure({HTMLAttributes:{class:"inline-code"}}),Wp.configure({HTMLAttributes:{class:"code-block"}}),Vp.configure({HTMLAttributes:{class:"line-through"}}),Eg.configure({inline:!0,allowBase64:!0,HTMLAttributes:{class:"rounded-md max-w-full h-auto"}}),jg.configure({placeholder:t})],content:e,onUpdate:({editor:S})=>{n(S.getHTML())},editorProps:{attributes:{class:"tiptap-editor text-sm leading-relaxed focus:outline-none min-h-[100px] w-full"},handleKeyDown:(S,A)=>{if(A.key==="/"&&!l){const{selection:T}=S.state,{from:$}=T,U=S.state.doc.resolve($),V=U.parent.textBetween(0,U.parentOffset);if(!V.trim()||V.endsWith(" ")){const se=S.coordsAtPos($);return v({x:se.left,y:se.bottom+5}),d(!0),p(""),A.preventDefault(),!0}}if(l){if(A.key==="Escape")return d(!1),p(""),!0;if(A.key==="Backspace")return h.length>0?p(T=>T.slice(0,-1)):d(!1),!0;if(A.key.length===1&&!A.ctrlKey&&!A.metaKey&&A.key!==" ")return p(T=>T+A.key),!0;if(A.key===" ")return d(!1),p(""),!0}return!1}}}),_=g.useCallback(()=>{const S=document.createElement("input");S.type="file",S.accept="image/*",S.onchange=A=>{const T=A.target.files?.[0];if(T&&w){const $=new FileReader;$.onload=U=>{const V=U.target?.result;w.chain().focus().setImage({src:V}).run()},$.readAsDataURL(T)}},S.click()},[w]);g.useEffect(()=>{if(!w)return;const S=T=>{const $=T.clipboardData?.items;if($)for(let U=0;U<$.length;U++){const V=$[U];if(V.type.indexOf("image")!==-1){T.preventDefault();const Y=V.getAsFile();if(Y){const se=new FileReader;se.onload=ge=>{const G=ge.target?.result;w.chain().focus().setImage({src:G}).run()},se.readAsDataURL(Y)}}}},A=w.view.dom;return A.addEventListener("paste",S),()=>{A.removeEventListener("paste",S)}},[w]);const E=g.useCallback(S=>{w&&w.chain().focus().insertContent(S).run(),d(!1),p("")},[w]),k=g.useCallback(()=>{d(!1),p("")},[]);return g.useEffect(()=>{if(!w)return;const S=T=>{T.key==="Escape"?l?(d(!1),p("")):o():T.key==="Enter"&&(T.ctrlKey||T.metaKey)&&r()},A=w.view.dom;return A.addEventListener("keydown",S),()=>{A.removeEventListener("keydown",S)}},[w,r,o,l]),g.useEffect(()=>{w&&i&&w.commands.focus()},[w,i]),w?u.jsxs("div",{className:re("relative z-20",a),ref:x,children:[u.jsxs("div",{className:"relative p-2 -m-2",children:[u.jsx(Gp,{editor:w,className:"min-h-[100px]"}),u.jsxs("div",{className:"absolute top-0 right-0 flex gap-1 opacity-60 hover:opacity-100 transition-opacity",children:[u.jsx(_e,{size:"sm",variant:"ghost",className:"h-6 w-6 p-0 bg-white/90 hover:bg-white shadow-sm rounded",onClick:()=>d(!l),title:"Insert Emoji (Press / to open)",children:u.jsx(a1,{className:"h-3 w-3"})}),u.jsx(_e,{size:"sm",variant:"ghost",className:"h-6 w-6 p-0 bg-white/90 hover:bg-white shadow-sm rounded",onClick:_,title:"Insert Image",children:u.jsx(Ul,{className:"h-3 w-3"})})]})]}),l&&u.jsx(Oy,{onEmojiSelect:E,onClose:k,query:h,position:y||void 0}),u.jsxs("div",{className:"flex justify-end gap-2 mt-2 pt-2 border-t border-border/30",children:[u.jsxs(_e,{size:"sm",variant:"ghost",onClick:o,className:"h-7 px-3 text-xs",children:[u.jsx(Zn,{className:"h-3 w-3 mr-1"}),"Cancel"]}),u.jsxs(_e,{size:"sm",onClick:r,className:"h-7 px-3 text-xs",children:[u.jsx(Mn,{className:"h-3 w-3 mr-1"}),"Accept"]})]}),w&&u.jsxs("div",{className:"absolute top-0 right-0 text-xs text-muted-foreground bg-white/90 px-2 py-1 rounded shadow-sm opacity-0 hover:opacity-100 transition-opacity pointer-events-none z-10 max-w-xs",children:["**bold** *italic* # heading - list ",">"," quote `code` ~~strike~~ [link](url) [] task / emoji"]})]}):null}function zy({content:e,onUpdate:t,onSave:n,onCancel:r,className:o,autoFocus:a=!1}){const[i,l]=g.useState(e),d=g.useRef(null);g.useEffect(()=>{l(e)},[e]),g.useEffect(()=>{a&&d.current&&(d.current.focus(),d.current.select())},[a]);const h=y=>{l(y.target.value),t(y.target.value)},p=y=>{y.key==="Enter"?n():y.key==="Escape"&&r()};return u.jsxs("div",{className:re("relative",o),children:[u.jsx("input",{ref:d,type:"text",value:i,onChange:h,onKeyDown:p,className:"w-full bg-transparent border-none outline-none text-lg font-semibold resize-none pr-16",placeholder:"Card title..."}),u.jsxs("div",{className:"absolute right-0 top-0 flex gap-1",children:[u.jsx(_e,{size:"sm",variant:"ghost",onClick:r,className:"h-6 w-6 p-0 bg-white/80 hover:bg-white shadow-sm",children:u.jsx(Zn,{className:"h-3 w-3"})}),u.jsx(_e,{size:"sm",onClick:n,className:"h-6 w-6 p-0 bg-white/80 hover:bg-white shadow-sm",children:u.jsx(Mn,{className:"h-3 w-3"})})]})]})}const By=e=>{const t=["#3b82f6","#8b5cf6","#10b981","#f59e0b","#ef4444","#06b6d4","#8b5a2b","#6b7280","#ec4899","#84cc16","#f97316","#6366f1"];let n=0;for(let r=0;r<e.length;r++)n=e.charCodeAt(r)+((n<<5)-n);return t[Math.abs(n)%t.length]},$y=({tags:e,className:t,maxTags:n=5,size:r="sm"})=>{if(!e||e.length===0)return null;const o=e.slice(0,n),a=e.length-n,i={sm:"text-xs px-2 py-1",md:"text-sm px-2.5 py-1.5",lg:"text-base px-3 py-2"};return u.jsxs("div",{className:re("flex flex-wrap gap-1.5 mt-3",t),children:[o.map((l,d)=>u.jsx("span",{className:re("inline-flex items-center rounded-full font-medium text-white","shadow-sm transition-all duration-200 hover:scale-105",i[r]),style:{backgroundColor:By(l),fontSize:r==="sm"?"0.75rem":r==="md"?"0.875rem":"1rem"},children:l},`${l}-${d}`)),a>0&&u.jsxs("span",{className:re("inline-flex items-center rounded-full bg-gray-500 text-white font-medium",i[r]),children:["+",a]})]})};function qy({card:e,onFlip:t,onUpdate:n,onCopy:r,onScreenshot:o,onShare:a,onDelete:i,onStyleChange:l,onTagsChange:d,onMoveToFolder:h,className:p,size:y="md"}){const[v,x]=g.useState(!1),[w,_]=g.useState(!1),[E,k]=g.useState(null),[S,A]=g.useState(null),[T,$]=g.useState(null),[U,V]=g.useState(!1),Y=g.useRef(null),se=e.isFlipped?e.backContent:e.frontContent,ge={sm:"w-full",md:"w-full",lg:"w-full"},G={sm:"p-3",md:"p-4",lg:"p-5"},X=()=>{const{style:ae}=e,Z={borderRadius:"1rem",fontFamily:ae.fontFamily,fontSize:ae.fontSize==="sm"?"0.875rem":ae.fontSize==="lg"?"1.125rem":"1rem",fontWeight:ae.fontWeight,color:ae.textColor,borderWidth:ae.borderWidth||0,borderColor:ae.borderColor};let Ie="";return ae.type==="gradient"&&ae.gradientColors?(Z.background=`linear-gradient(135deg, ${ae.gradientColors.join(", ")})`,ae.gradientColors.includes("#8a2be2")&&ae.gradientColors.includes("#00ffff")?(Ie="gradient-wave-animation",Z.position="relative"):ae.gradientColors.includes("#ee7752")&&ae.gradientColors.includes("#23d5ab")?Ie="moving-gradient-animation":ae.gradientColors.includes("#667eea")&&(Ie="gradient-mesh-animation")):ae.type==="glass"?(Z.background=ae.backgroundColor||"rgba(255, 255, 255, 0.15)",Z.backdropFilter="blur(20px) saturate(180%)",Z.WebkitBackdropFilter="blur(20px) saturate(180%)",Z.border=`1px solid ${ae.borderColor||"rgba(255, 255, 255, 0.18)"}`,Ie="glass-morphism"):ae.backgroundColor&&ae.backgroundColor.includes("linear-gradient")?(Z.background=ae.backgroundColor,Z.backgroundSize="400% 400%",ae.backgroundColor.includes("#667eea")&&(Ie="gradient-mesh-animation")):(Z.backgroundColor=ae.backgroundColor,ae.backgroundColor==="#1a1a2e"&&ae.borderColor==="#4361ee"?Ie="pulse-border-animation":ae.backgroundColor==="#0f172a"&&(Ie="glow-hover-animation")),{style:Z,shadowClass:{sm:"shadow-sm",md:"shadow-md",lg:"shadow-lg",xl:"shadow-xl",none:"","2xl":"shadow-2xl",glass:"shadow-lg"}[ae.shadow||"md"]||"shadow-md",specialClasses:Ie}},{style:Ee,shadowClass:Te,specialClasses:De}=X(),be=g.useCallback(ae=>{ae.stopPropagation(),ae.preventDefault(),!U&&(V(!0),t(e.id),setTimeout(()=>{V(!1)},600))},[e.id,t,U]),Pe=ae=>{ae.stopPropagation(),q("content")},je=ae=>{q(ae)},q=ae=>{A(se),$(se),k(ae),_(!0)},fe=(ae,Z)=>{T&&$({...T,[ae]:Z,lastModified:new Date})},xe=()=>{if(T){const Z={[e.isFlipped?"backContent":"frontContent"]:T};n(e.id,Z)}_(!1),k(null),A(null),$(null)},we=()=>{_(!1),k(null),A(null),$(null)},ye=ae=>{fe("title",ae.target.value)},Se=ae=>{fe("text",ae.target.value)},ze=ae=>{ae.key==="Escape"&&we(),ae.key==="Enter"&&ae.ctrlKey&&xe()};return u.jsx("div",{className:re("relative group",p),"data-card-id":e.id,onMouseEnter:()=>x(!0),onMouseLeave:()=>x(!1),children:u.jsx("div",{className:"flip-card-container",style:{perspective:"1000px",width:"100%",minHeight:"fit-content"},children:u.jsxs("div",{ref:Y,className:re("flip-card-inner relative transition-all duration-700 ease-in-out",ge[y]),style:{minHeight:"fit-content",width:"100%",transformStyle:"preserve-3d",transform:e.isFlipped?"rotateY(180deg)":"rotateY(0deg)"},children:[u.jsx("div",{className:re("flip-card-face flip-card-front w-full flex flex-col transition-all duration-300 relative",Te,De,G[y]),style:{...Ee,borderRadius:Ee.borderRadius,backfaceVisibility:"hidden",position:e.isFlipped?"absolute":"relative",opacity:e.isFlipped?0:1},children:u.jsx(Gu,{content:T||e.frontContent,isEditing:w&&!e.isFlipped,editingField:E,onTitleChange:ye,onTextChange:Se,onTempContentUpdate:fe,onSaveEdit:xe,onCancelEdit:we,onDoubleClick:je,onKeyDown:ze,sideLabel:"Front",isHovered:v,onEdit:Pe,onFlip:be,onCopy:()=>r(e.id),onScreenshot:()=>o(e.id),onShare:()=>a(e.id),onDelete:()=>i(e.id),onStyleChange:l?()=>l(e.id):void 0,onTagsChange:d?()=>d(e.id):void 0,onMoveToFolder:h,card:e,isFlipping:U})}),u.jsx("div",{className:re("flip-card-face flip-card-back w-full flex flex-col transition-all duration-300 relative",Te,De,G[y]),style:{...Ee,borderRadius:Ee.borderRadius,backfaceVisibility:"hidden",transform:"rotateY(180deg)",position:e.isFlipped?"relative":"absolute",top:e.isFlipped?"auto":"0",opacity:e.isFlipped?1:0},children:u.jsx(Gu,{content:T||e.backContent,isEditing:w&&e.isFlipped,editingField:E,onTitleChange:ye,onTextChange:Se,onTempContentUpdate:fe,onSaveEdit:xe,onCancelEdit:we,onDoubleClick:je,onKeyDown:ze,sideLabel:"Back",isHovered:v,onEdit:Pe,onFlip:be,onCopy:()=>r(e.id),onScreenshot:()=>o(e.id),onShare:()=>a(e.id),onDelete:()=>i(e.id),onStyleChange:l?()=>l(e.id):void 0,onTagsChange:d?()=>d(e.id):void 0,onMoveToFolder:h,card:e,isFlipping:U})})]})})})}function Uy({images:e}){const t=e.slice(0,4),n=t.length,r=a=>{switch(a){case 1:return"flex justify-center";case 2:return"grid grid-cols-2 gap-2";case 3:return"grid grid-cols-2 gap-2";case 4:default:return"grid grid-cols-2 gap-2"}},o=(a,i)=>{const l="relative aspect-video rounded-md overflow-hidden bg-muted transition-all duration-200 hover:scale-[1.02]";return a===1?`${l} max-w-xs w-full`:a===3&&i===2?`${l} col-span-2 max-w-xs mx-auto`:l};return u.jsx("div",{className:r(n),children:t.map((a,i)=>u.jsx("div",{className:o(n,i),children:u.jsx("img",{src:a.url,alt:a.alt||`Image ${i+1}`,className:"w-full h-full object-cover transition-transform duration-200",loading:"lazy"})},i))})}function Gu({content:e,isEditing:t,editingField:n,onTitleChange:r,onTextChange:o,onTempContentUpdate:a,onSaveEdit:i,onCancelEdit:l,onDoubleClick:d,onKeyDown:h,sideLabel:p,isHovered:y,onEdit:v,onFlip:x,onCopy:w,onScreenshot:_,onShare:E,onDelete:k,onStyleChange:S,onTagsChange:A,onMoveToFolder:T,card:$,isFlipping:U}){return u.jsxs("div",{className:"flex flex-col h-full",children:[u.jsxs("div",{className:"flex items-start justify-between mb-3",children:[u.jsx("div",{className:"flex-1 mr-2",children:t&&n==="title"?u.jsx(zy,{content:e.title,onUpdate:V=>a("title",V),onSave:i,onCancel:l,autoFocus:!0}):u.jsx("h3",{className:"text-lg font-semibold text-left cursor-pointer hover:bg-black/5 rounded px-1 py-0.5 -mx-1 transition-colors",onDoubleClick:()=>d("title"),children:e.title||"Untitled Card"})}),u.jsxs("div",{className:re("flex gap-1 transition-all duration-200 flex-shrink-0",y||t?"opacity-100":"opacity-60"),children:[u.jsx(_e,{size:"sm",variant:"ghost",className:re("h-7 w-7 p-0 rounded-md hover:bg-black/10 transition-all duration-200",U&&"animate-pulse"),onClick:x,title:`Flip to ${$.isFlipped?"Front":"Back"}`,disabled:U,children:u.jsx(Um,{className:re("h-3.5 w-3.5 transition-transform duration-200",U&&"scale-110")})}),u.jsxs(bg,{modal:!1,children:[u.jsx(xg,{asChild:!0,children:u.jsx("div",{className:"h-7 w-7 rounded-md hover:bg-black/10 flex items-center justify-center cursor-pointer transition-colors group",onMouseEnter:V=>{V.stopPropagation();const Y=new MouseEvent("click",{view:window,bubbles:!0,cancelable:!0});V.currentTarget.dispatchEvent(Y)},onClick:V=>V.stopPropagation(),children:u.jsx(Ym,{className:"h-3.5 w-3.5"})})}),u.jsxs(id,{align:"end",className:"w-48",children:[u.jsxs(mn,{onClick:v,children:[u.jsx(t1,{className:"h-4 w-4 mr-2"}),"Edit Content"]}),u.jsxs(mn,{onClick:w,children:[u.jsx(Gm,{className:"h-4 w-4 mr-2"}),"Copy Text"]}),u.jsxs(mn,{onClick:_,children:[u.jsx(ks,{className:"h-4 w-4 mr-2"}),"Screenshot"]}),u.jsxs(mn,{onClick:E,children:[u.jsx(n1,{className:"h-4 w-4 mr-2"}),"Share"]}),u.jsx(As,{}),S&&u.jsxs(mn,{onClick:S,children:[u.jsx(Kl,{className:"h-4 w-4 mr-2"}),"Change Style"]}),A&&u.jsxs(mn,{onClick:A,children:[u.jsx(Wl,{className:"h-4 w-4 mr-2"}),"Manage Tags"]}),T&&u.jsxs(mn,{onClick:T,children:[u.jsx(ql,{className:"h-4 w-4 mr-2"}),"Move to Folder"]}),u.jsx(As,{}),u.jsxs(mn,{onClick:k,className:"text-destructive focus:text-destructive",children:[u.jsx(ti,{className:"h-4 w-4 mr-2"}),"Delete Card"]})]})]})]})]}),e.images.length>0&&u.jsxs("div",{className:"mb-3 flex-shrink-0",children:[u.jsx(Uy,{images:e.images}),e.images.length>4&&u.jsxs("div",{className:"text-xs text-muted-foreground mt-1 text-center",children:["+",e.images.length-4," more images"]})]}),u.jsx("div",{className:"flex-1 mb-3 relative z-10",children:t&&n==="content"?u.jsx(Ly,{content:e.text,placeholder:"Add your content here...",onUpdate:V=>a("text",V),onSave:i,onCancel:l,autoFocus:!0}):u.jsx("div",{className:"text-sm leading-relaxed text-left cursor-pointer hover:bg-black/5 rounded p-2 -m-2 transition-colors min-h-[100px] tiptap-editor relative z-10",onDoubleClick:V=>{V.target.tagName!=="A"&&d("content")},onClick:V=>{const Y=V.target;if(Y.tagName==="A"){V.stopPropagation();const se=Y.getAttribute("href");se&&window.open(se,"_blank","noopener,noreferrer")}},children:u.jsx("div",{className:"whitespace-pre-wrap",dangerouslySetInnerHTML:{__html:e.text||'<span class="text-muted-foreground">Click to add content...</span>'}})})}),u.jsxs("div",{className:"mt-auto",children:[u.jsx($y,{tags:e.tags,size:"sm"}),e.images.length>0&&u.jsx("div",{className:"flex items-center justify-end text-xs text-muted-foreground mt-2",children:u.jsxs("div",{className:"flex items-center gap-1",children:[u.jsx(Ul,{className:"h-3 w-3"}),u.jsx("span",{children:e.images.length})]})})]})]})}const zt=({title:e="Sample Card",content:t="This is a preview of how your card will look with this style.",style:n,isSelected:r=!1,onClick:o,className:a})=>{console.log("Rendering StylePreviewCard (Simplified):",{title:e,isSelected:r,style:n});const i=()=>{const l={minHeight:"60px",width:"100%",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",padding:"8px",borderRadius:"8px",cursor:"pointer",border:r?"2px solid #3b82f6":"1px solid #e5e7eb",position:"relative",fontSize:"10px",textAlign:"center",boxShadow:r?"0 4px 12px rgba(59, 130, 246, 0.3)":"0 2px 4px rgba(0, 0, 0, 0.1)",transition:"all 0.2s ease",backgroundColor:"#ffffff"};if(typeof n=="object"&&n!==null){if("background"in n||"backgroundColor"in n)return{...l,...n,cursor:"pointer",border:r?"3px solid #3b82f6":n.border||"2px solid #e5e7eb",boxShadow:r?"0 4px 12px rgba(59, 130, 246, 0.3)":n.boxShadow||"0 2px 4px rgba(0, 0, 0, 0.1)",transition:"all 0.2s ease"};if("type"in n){if(n.type==="solid")return{...l,backgroundColor:n.backgroundColor||"#ffffff",color:n.textColor||"#374151"};if(n.type==="gradient"&&n.gradientColors){const h=`linear-gradient(${n.gradientDirection||"to bottom right"}, ${n.gradientColors.join(", ")})`;return{...l,background:h,color:n.textColor||"#ffffff"}}}}return l};return u.jsxs("div",{style:i(),onClick:o,className:a,children:[u.jsx("div",{style:{fontWeight:"600",marginBottom:"2px",fontSize:"11px"},children:e}),u.jsx("div",{style:{fontSize:"9px",opacity:.8,lineHeight:"1.1"},children:t})]})},Ky=({isSelected:e,onClick:t,className:n})=>{const r={background:"#ffffff",color:"#1f2937",fontFamily:"system-ui, -apple-system, sans-serif",fontSize:"14px",fontWeight:"400",borderRadius:"12px",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)",border:"1px solid #e5e7eb"};return u.jsx(zt,{title:"Classic White",content:"Clean and professional",style:r,isSelected:e,onClick:t,className:n})},Hy={id:"classic-white",name:"Classic White",category:"business",description:"Clean and professional white background with subtle shadows",style:{type:"solid",backgroundColor:"#ffffff",fontFamily:"system-ui",fontSize:"base",fontWeight:"normal",textColor:"#1f2937",borderRadius:"2xl",shadow:"md",borderWidth:1,borderColor:"#e5e7eb"},previewComponent:Ky},Wy=({isSelected:e,onClick:t,className:n})=>{const r={background:"linear-gradient(135deg, #1f2937 0%, #111827 50%, #030712 100%)",color:"#f9fafb",fontFamily:"system-ui, -apple-system, sans-serif",fontSize:"14px",fontWeight:"600",borderRadius:"12px",boxShadow:"0 25px 50px -12px rgba(0, 0, 0, 0.5), 0 0 0 1px rgba(255, 255, 255, 0.1)",border:"1px solid rgba(255, 255, 255, 0.1)"};return u.jsx(zt,{title:"Deep Dark",content:"Bold and mysterious",style:r,isSelected:e,onClick:t,className:n})},Vy={id:"deep-dark",name:"Deep Dark",category:"personality",description:"Bold dark gradient with mysterious depth",style:{type:"gradient",gradientColors:["#1f2937","#111827","#030712"],gradientDirection:"to-br",fontFamily:"system-ui",fontSize:"base",fontWeight:"semibold",textColor:"#f9fafb",borderRadius:"2xl",shadow:"2xl",borderWidth:1,borderColor:"rgba(255, 255, 255, 0.1)"},previewComponent:Wy},Gy=({isSelected:e,onClick:t,className:n})=>{const r={background:"linear-gradient(135deg, #8b5cf6 0%, #a855f7 50%, #c084fc 100%)",color:"#ffffff",fontFamily:"system-ui, -apple-system, sans-serif",fontSize:"14px",fontWeight:"500",borderRadius:"20px",boxShadow:"0 20px 25px -5px rgba(139, 92, 246, 0.25), 0 10px 10px -5px rgba(139, 92, 246, 0.1)",border:"none"};return u.jsx(zt,{title:"Elegant Purple",content:"Artistic and inspiring",style:r,isSelected:e,onClick:t,className:n})},Yy={id:"elegant-purple",name:"Elegant Purple",category:"creative",description:"Artistic purple gradient with elegant curves and shadows",style:{type:"gradient",gradientColors:["#8b5cf6","#a855f7","#c084fc"],gradientDirection:"to-br",fontFamily:"system-ui",fontSize:"base",fontWeight:"medium",textColor:"#ffffff",borderRadius:"2xl",shadow:"2xl",borderWidth:0},previewComponent:Gy},Zy=({isSelected:e,onClick:t,className:n})=>{const r={background:"linear-gradient(135deg, #10b981 0%, #059669 50%, #047857 100%)",color:"#ffffff",fontFamily:"system-ui, -apple-system, sans-serif",fontSize:"14px",fontWeight:"500",borderRadius:"16px",boxShadow:"0 20px 25px -5px rgba(16, 185, 129, 0.2), 0 10px 10px -5px rgba(16, 185, 129, 0.1)",border:"none"};return u.jsx(zt,{title:"Fresh Green",content:"Natural and harmonious",style:r,isSelected:e,onClick:t,className:n})},Xy={id:"fresh-green",name:"Fresh Green",category:"natural",description:"Natural green gradient with organic harmony",style:{type:"gradient",gradientColors:["#10b981","#059669","#047857"],gradientDirection:"to-br",fontFamily:"system-ui",fontSize:"base",fontWeight:"medium",textColor:"#ffffff",borderRadius:"2xl",shadow:"2xl",borderWidth:0},previewComponent:Zy},Qy=({isSelected:e,onClick:t,className:n})=>{const r={background:"linear-gradient(135deg, #667eea 0%, #764ba2 25%, #f093fb 50%, #f5576c 75%, #4facfe 100%)",backgroundSize:"400% 400%",animation:"gradientShift 8s ease infinite",color:"#ffffff",fontFamily:'"Inter", system-ui, -apple-system, sans-serif',fontSize:"14px",fontWeight:"500",borderRadius:"12px",boxShadow:"0 8px 32px rgba(102, 126, 234, 0.3), 0 4px 16px rgba(118, 75, 162, 0.2)",border:"none",position:"relative",overflow:"hidden"},o={position:"absolute",top:0,left:0,right:0,bottom:0,background:"linear-gradient(45deg, rgba(255,255,255,0.1) 0%, rgba(255,255,255,0.05) 100%)",pointerEvents:"none"};return u.jsxs("div",{style:{position:"relative"},children:[u.jsx(zt,{title:"Gradient Mesh",content:"Dynamic gradient background",style:r,isSelected:e,onClick:t,className:n}),u.jsx("div",{style:o}),u.jsx("style",{jsx:!0,children:`
        @keyframes gradientShift {
          0% { background-position: 0% 50%; }
          50% { background-position: 100% 50%; }
          100% { background-position: 0% 50%; }
        }
      `})]})},Jy={id:"gradient-mesh",name:"Gradient Mesh",category:"creative",description:"Dynamic gradient background with animated mesh effect",style:{type:"solid",backgroundColor:"linear-gradient(135deg, #667eea 0%, #764ba2 25%, #f093fb 50%, #f5576c 75%, #4facfe 100%)",fontFamily:"Inter",fontSize:"base",fontWeight:"medium",textColor:"#ffffff",borderRadius:"2xl",shadow:"xl",borderWidth:0,borderColor:"transparent"},previewComponent:Qy},ev=({isSelected:e,onClick:t,className:n})=>{const r={background:"linear-gradient(90deg, #fb923c 0%, #8b5cf6 100%)",color:"#ffffff",fontFamily:"system-ui, -apple-system, sans-serif",fontSize:"14px",fontWeight:"600",borderRadius:"24px",boxShadow:"0 25px 50px -12px rgba(251, 146, 60, 0.3), 0 0 0 1px rgba(255, 255, 255, 0.2)",border:"none"};return u.jsx(zt,{title:"Gradient Sunset",content:"Vibrant and expressive",style:r,isSelected:e,onClick:t,className:n})},tv={id:"gradient-sunset",name:"Gradient Sunset",category:"personality",description:"Warm orange to violet gradient with magical sunset vibes",style:{type:"gradient",gradientColors:["#fb923c","#8b5cf6"],gradientDirection:"to-r",fontFamily:"system-ui",fontSize:"base",fontWeight:"semibold",textColor:"#ffffff",borderRadius:"2xl",shadow:"2xl",borderWidth:0},previewComponent:ev},nv=({isSelected:e,onClick:t,className:n})=>{const r={background:"linear-gradient(135deg, #8a2be2 0%, #4b0082 25%, #9370db 50%, #00ffff 75%, #00bfff 100%)",color:"#ffffff",fontFamily:"system-ui, -apple-system, sans-serif",fontSize:"14px",fontWeight:"600",borderRadius:"24px",boxShadow:"0 25px 50px -12px rgba(138, 43, 226, 0.3), 0 0 0 1px rgba(255, 255, 255, 0.2)",border:"none",position:"relative",overflow:"hidden"};return u.jsx("div",{className:"relative",children:u.jsx(zt,{title:"Gradient Wave",content:"Dynamic wave effect",style:r,isSelected:e,onClick:t,className:`${n} gradient-wave-animation`})})},rv={id:"gradient-wave",name:"Gradient Wave",category:"creative",description:"Purple to cyan gradient with dynamic wave effect",style:{type:"gradient",gradientColors:["#8a2be2","#4b0082","#9370db","#00ffff","#00bfff"],gradientDirection:"to-br",fontFamily:"system-ui",fontSize:"base",fontWeight:"semibold",textColor:"#ffffff",borderRadius:"2xl",shadow:"2xl",borderWidth:0},previewComponent:nv},ov=({isSelected:e,onClick:t,className:n})=>{const r={background:"linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%)",color:"#ffffff",fontFamily:"system-ui, -apple-system, sans-serif",fontSize:"14px",fontWeight:"500",borderRadius:"16px",boxShadow:"0 10px 15px -3px rgba(59, 130, 246, 0.3), 0 4px 6px -2px rgba(59, 130, 246, 0.1)",border:"none"};return u.jsx(zt,{title:"Modern Blue",content:"Contemporary gradient design",style:r,isSelected:e,onClick:t,className:n})},av={id:"modern-blue",name:"Modern Blue",category:"business",description:"Contemporary blue gradient with professional appeal",style:{type:"gradient",gradientColors:["#3b82f6","#1d4ed8","#1e40af"],gradientDirection:"to-br",fontFamily:"system-ui",fontSize:"base",fontWeight:"medium",textColor:"#ffffff",borderRadius:"2xl",shadow:"lg",borderWidth:0},previewComponent:ov},sv=({isSelected:e,onClick:t,className:n})=>{const r={background:"linear-gradient(-45deg, #ee7752, #e73c7e, #23a6d5, #23d5ab)",backgroundSize:"400% 400%",color:"#ffffff",fontFamily:'"Poppins", system-ui, sans-serif',fontSize:"14px",fontWeight:"600",borderRadius:"16px",boxShadow:"0 15px 30px -10px rgba(0, 0, 0, 0.25)",border:"none",position:"relative",overflow:"hidden"};return u.jsx("div",{className:"relative",children:u.jsx(zt,{title:"Moving Gradient",content:"Flowing color effect",style:r,isSelected:e,onClick:t,className:`${n} moving-gradient-animation`})})},iv={id:"moving-gradient",name:"Moving Gradient",category:"creative",description:"Colorful gradient with flowing animation effect",style:{type:"gradient",gradientColors:["#ee7752","#e73c7e","#23a6d5","#23d5ab"],gradientDirection:"to-br",fontFamily:"Poppins",fontSize:"base",fontWeight:"semibold",textColor:"#ffffff",borderRadius:"xl",shadow:"xl",borderWidth:0},previewComponent:sv},uv=({isSelected:e,onClick:t,className:n})=>{const r={background:"linear-gradient(90deg, #34d399 0%, #0d9488 100%)",color:"#ffffff",fontFamily:"system-ui, -apple-system, sans-serif",fontSize:"14px",fontWeight:"500",borderRadius:"20px",boxShadow:"0 10px 15px -3px rgba(52, 211, 153, 0.3), 0 4px 6px -2px rgba(13, 148, 136, 0.1)",border:"1px solid rgba(52, 211, 153, 0.3)"};return u.jsx(zt,{title:"Ocean Breeze",content:"Fresh and refreshing",style:r,isSelected:e,onClick:t,className:n})},lv={id:"ocean-breeze",name:"Ocean Breeze",category:"natural",description:"Fresh emerald to teal gradient with tropical vibes",style:{type:"gradient",gradientColors:["#34d399","#0d9488"],gradientDirection:"to-r",fontFamily:"system-ui",fontSize:"base",fontWeight:"medium",textColor:"#ffffff",borderRadius:"2xl",shadow:"lg",borderWidth:1,borderColor:"rgba(52, 211, 153, 0.3)"},previewComponent:uv},cv=({isSelected:e,onClick:t,className:n})=>{const r={background:"linear-gradient(90deg, #fda4af 0%, #f87171 100%)",color:"#ffffff",fontFamily:"system-ui, -apple-system, sans-serif",fontSize:"14px",fontWeight:"500",borderRadius:"20px",boxShadow:"0 10px 15px -3px rgba(253, 164, 175, 0.3), 0 4px 6px -2px rgba(248, 113, 113, 0.1)",border:"1px solid rgba(253, 164, 175, 0.3)"};return u.jsx(zt,{title:"Soft Pink",content:"Gentle and soothing",style:r,isSelected:e,onClick:t,className:n})},dv={id:"soft-pink",name:"Soft Pink",category:"natural",description:"Warm pink to red gradient with romantic tones",style:{type:"gradient",gradientColors:["#fda4af","#f87171"],gradientDirection:"to-r",fontFamily:"system-ui",fontSize:"base",fontWeight:"medium",textColor:"#ffffff",borderRadius:"2xl",shadow:"lg",borderWidth:1,borderColor:"rgba(253, 164, 175, 0.3)"},previewComponent:cv},fv=({isSelected:e,onClick:t,className:n})=>{const r={background:"linear-gradient(135deg, #ff7e5f 0%, #feb47b 100%)",color:"#ffffff",fontFamily:"system-ui, -apple-system, sans-serif",fontSize:"14px",fontWeight:"600",borderRadius:"18px",boxShadow:"0 25px 50px -12px rgba(255, 126, 95, 0.25), 0 0 0 1px rgba(255, 126, 95, 0.1)",border:"none"};return u.jsx(zt,{title:"Warm Orange",content:"Energetic and vibrant",style:r,isSelected:e,onClick:t,className:n})},hv={id:"warm-orange",name:"Warm Orange",category:"creative",description:"Energetic warm orange gradient with peachy tones",style:{type:"gradient",gradientColors:["#ff7e5f","#feb47b"],gradientDirection:"to-br",fontFamily:"system-ui",fontSize:"base",fontWeight:"semibold",textColor:"#ffffff",borderRadius:"2xl",shadow:"2xl",borderWidth:0},previewComponent:fv};class ur{static instance;presets=new Map;categories=new Map;constructor(){this.initializeCategories()}static getInstance(){return ur.instance||(ur.instance=new ur),ur.instance}initializeCategories(){["business","creative","natural","personality"].forEach(n=>{this.categories.set(n,[])})}register(t){this.presets.set(t.id,t);const n=this.categories.get(t.category)||[];n.push(t),this.categories.set(t.category,n)}unregister(t){const n=this.presets.get(t);if(n){this.presets.delete(t);const o=(this.categories.get(n.category)||[]).filter(a=>a.id!==t);this.categories.set(n.category,o)}}getByCategory(t){return this.categories.get(t)||[]}getById(t){return this.presets.get(t)}getAll(){return Array.from(this.presets.values())}getAllByOrder(){const t=[];return["business","creative","natural","personality"].forEach(r=>{const o=this.getByCategory(r);t.push(...o)}),t}getCategoryCount(t){return this.categories.get(t)?.length||0}getTotalCount(){return this.presets.size}clear(){this.presets.clear(),this.initializeCategories()}}const yi=ur.getInstance(),pv=()=>yi.getAllByOrder();class lr{static instance;STORAGE_KEYS={USER_PREFERENCES:"cardall_style_preferences",RECENT_STYLES:"cardall_recent_styles",DEFAULT_STYLE:"cardall_default_style"};constructor(){}static getInstance(){return lr.instance||(lr.instance=new lr),lr.instance}saveUserPreference(t,n){try{const r=this.getUserPreferences();r[t]={styleId:n,appliedAt:new Date().toISOString()},localStorage.setItem(this.STORAGE_KEYS.USER_PREFERENCES,JSON.stringify(r)),this.addToRecentStyles(n)}catch(r){console.error("Failed to save user style preference:",r)}}getUserPreference(t){try{return this.getUserPreferences()[t]?.styleId||null}catch(n){return console.error("Failed to get user style preference:",n),null}}getRecentStyles(t=10){try{const n=localStorage.getItem(this.STORAGE_KEYS.RECENT_STYLES);return n?JSON.parse(n).slice(0,t):[]}catch(n){return console.error("Failed to get recent styles:",n),[]}}clearPreferences(){try{localStorage.removeItem(this.STORAGE_KEYS.USER_PREFERENCES),localStorage.removeItem(this.STORAGE_KEYS.RECENT_STYLES)}catch(t){console.error("Failed to clear style preferences:",t)}}setDefaultStyle(t){try{localStorage.setItem(this.STORAGE_KEYS.DEFAULT_STYLE,t)}catch(n){console.error("Failed to set default style:",n)}}getDefaultStyle(){try{return localStorage.getItem(this.STORAGE_KEYS.DEFAULT_STYLE)}catch(t){return console.error("Failed to get default style:",t),null}}getUserPreferences(){try{const t=localStorage.getItem(this.STORAGE_KEYS.USER_PREFERENCES);return t?JSON.parse(t):{}}catch(t){return console.error("Failed to parse user preferences:",t),{}}}addToRecentStyles(t){try{const r=this.getRecentStyles().filter(a=>a!==t),o=[t,...r].slice(0,10);localStorage.setItem(this.STORAGE_KEYS.RECENT_STYLES,JSON.stringify(o))}catch(n){console.error("Failed to update recent styles:",n)}}getStyleUsageStats(){try{const t=this.getUserPreferences(),n={};return Object.values(t).forEach(({styleId:r})=>{n[r]=(n[r]||0)+1}),n}catch(t){return console.error("Failed to get style usage stats:",t),{}}}getMostUsedStyles(t=5){try{const n=this.getStyleUsageStats();return Object.entries(n).sort(([,r],[,o])=>o-r).slice(0,t).map(([r])=>r)}catch(n){return console.error("Failed to get most used styles:",n),[]}}}const Yu=lr.getInstance(),mv=()=>{const e=[Hy,av,Yy,hv,Xy,dv,lv,Vy,tv,Jy,rv,iv];e.forEach(t=>{yi.register(t)}),console.log(`Registered ${e.length} card style presets`)};mv();const gv=({isOpen:e,onClose:t,context:n})=>{const[r,o]=g.useState(null),[a,i]=g.useState([]);g.useEffect(()=>{const h=pv();console.log("Loaded style presets:",h.length,h),i(h);const p=Yu.getUserPreference(n.targetCardId);p&&o(p)},[n.targetCardId]);const l=h=>{const p=yi.getById(h);p&&(o(h),n.onStyleApply(p.style),Yu.saveUserPreference(n.targetCardId,h))},d=()=>{o(null),t()};return e?u.jsxs("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center p-4",style:{backgroundColor:"rgba(0, 0, 0, 0.1)",backdropFilter:"blur(2px)"},children:[u.jsx("div",{className:"absolute inset-0",onClick:d}),u.jsxs("div",{className:"relative bg-white rounded-2xl shadow-2xl border border-gray-200 p-6 w-full max-w-md sm:max-w-2xl lg:max-w-4xl",children:[u.jsxs("div",{className:"flex items-center justify-between mb-6",children:[u.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Card Styles"}),u.jsx("button",{onClick:d,className:"p-1 rounded-lg hover:bg-gray-100 transition-colors",children:u.jsx(Zn,{className:"w-5 h-5 text-gray-500"})})]}),u.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 gap-3 mb-6",style:{minHeight:"300px",maxHeight:"70vh",overflowY:"auto"},children:a.map(h=>{const p=h.previewComponent;return console.log("Rendering preset:",h.id,h.name,p),u.jsxs("div",{className:"relative",children:[u.jsx(p,{isSelected:r===h.id,onClick:()=>l(h.id),className:"w-full"}),u.jsxs("div",{className:"mt-2 text-center",children:[u.jsx("div",{className:"text-xs font-medium text-gray-700 truncate",children:h.name}),u.jsx("div",{className:"text-xs text-gray-500 capitalize",children:h.category})]})]},h.id)})}),u.jsxs("div",{className:"text-xs text-gray-400 text-center mb-2",children:["Loaded ",a.length," presets"]}),u.jsx("div",{className:"text-xs text-gray-500 text-center",children:"Click any style to apply it instantly to your card"})]})]}):null},$d=g.createContext(void 0),bv=()=>{const e=g.useContext($d);if(!e)throw new Error("useStylePanel must be used within a StylePanelProvider");return e},xv=({children:e})=>{const[t,n]=g.useState({isOpen:!1,context:null}),r=i=>{n({isOpen:!0,context:i})},o=()=>{n({isOpen:!1,context:null})},a={openStylePanel:r,closeStylePanel:o,isOpen:t.isOpen};return u.jsxs($d.Provider,{value:a,children:[e,typeof window<"u"&&t.isOpen&&t.context&&vr.createPortal(u.jsx(gv,{isOpen:t.isOpen,onClose:o,context:t.context}),document.body)]})},qd=g.createContext(void 0);function yv({children:e}){const[t,n]=g.useState(!1),[r,o]=g.useState(null),[a,i]=g.useState([]),[l,d]=g.useState(null),y={isOpen:t,currentCardId:r,currentCardTags:a,onTagsChange:l,openTagPanel:v=>{o(v.targetCardId),i(v.currentTags),d(()=>v.onTagsApply),n(!0)},closeTagPanel:()=>{n(!1),o(null),i([]),d(null)}};return u.jsx(qd.Provider,{value:y,children:e})}function Ud(){const e=g.useContext(qd);if(e===void 0)throw new Error("useTagPanel must be used within a TagPanelProvider");return e}const Ct=g.forwardRef(({className:e,type:t,...n},r)=>u.jsx("input",{type:t,className:re("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:r,...n}));Ct.displayName="Input";function oo(e,[t,n]){return Math.min(n,Math.max(t,e))}function vv(e,t){return g.useReducer((n,r)=>t[n][r]??n,e)}var vi="ScrollArea",[Kd,x_]=rn(vi),[wv,Bt]=Kd(vi),Hd=g.forwardRef((e,t)=>{const{__scopeScrollArea:n,type:r="hover",dir:o,scrollHideDelay:a=600,...i}=e,[l,d]=g.useState(null),[h,p]=g.useState(null),[y,v]=g.useState(null),[x,w]=g.useState(null),[_,E]=g.useState(null),[k,S]=g.useState(0),[A,T]=g.useState(0),[$,U]=g.useState(!1),[V,Y]=g.useState(!1),se=We(t,G=>d(G)),ge=uo(o);return u.jsx(wv,{scope:n,type:r,dir:ge,scrollHideDelay:a,scrollArea:l,viewport:h,onViewportChange:p,content:y,onContentChange:v,scrollbarX:x,onScrollbarXChange:w,scrollbarXEnabled:$,onScrollbarXEnabledChange:U,scrollbarY:_,onScrollbarYChange:E,scrollbarYEnabled:V,onScrollbarYEnabledChange:Y,onCornerWidthChange:S,onCornerHeightChange:T,children:u.jsx($e.div,{dir:ge,...i,ref:se,style:{position:"relative","--radix-scroll-area-corner-width":k+"px","--radix-scroll-area-corner-height":A+"px",...e.style}})})});Hd.displayName=vi;var Wd="ScrollAreaViewport",Vd=g.forwardRef((e,t)=>{const{__scopeScrollArea:n,children:r,nonce:o,...a}=e,i=Bt(Wd,n),l=g.useRef(null),d=We(t,l,i.onViewportChange);return u.jsxs(u.Fragment,{children:[u.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:o}),u.jsx($e.div,{"data-radix-scroll-area-viewport":"",...a,ref:d,style:{overflowX:i.scrollbarXEnabled?"scroll":"hidden",overflowY:i.scrollbarYEnabled?"scroll":"hidden",...e.style},children:u.jsx("div",{ref:i.onContentChange,style:{minWidth:"100%",display:"table"},children:r})})]})});Vd.displayName=Wd;var un="ScrollAreaScrollbar",wi=g.forwardRef((e,t)=>{const{forceMount:n,...r}=e,o=Bt(un,e.__scopeScrollArea),{onScrollbarXEnabledChange:a,onScrollbarYEnabledChange:i}=o,l=e.orientation==="horizontal";return g.useEffect(()=>(l?a(!0):i(!0),()=>{l?a(!1):i(!1)}),[l,a,i]),o.type==="hover"?u.jsx(Cv,{...r,ref:t,forceMount:n}):o.type==="scroll"?u.jsx(_v,{...r,ref:t,forceMount:n}):o.type==="auto"?u.jsx(Gd,{...r,ref:t,forceMount:n}):o.type==="always"?u.jsx(Ci,{...r,ref:t}):null});wi.displayName=un;var Cv=g.forwardRef((e,t)=>{const{forceMount:n,...r}=e,o=Bt(un,e.__scopeScrollArea),[a,i]=g.useState(!1);return g.useEffect(()=>{const l=o.scrollArea;let d=0;if(l){const h=()=>{window.clearTimeout(d),i(!0)},p=()=>{d=window.setTimeout(()=>i(!1),o.scrollHideDelay)};return l.addEventListener("pointerenter",h),l.addEventListener("pointerleave",p),()=>{window.clearTimeout(d),l.removeEventListener("pointerenter",h),l.removeEventListener("pointerleave",p)}}},[o.scrollArea,o.scrollHideDelay]),u.jsx(In,{present:n||a,children:u.jsx(Gd,{"data-state":a?"visible":"hidden",...r,ref:t})})}),_v=g.forwardRef((e,t)=>{const{forceMount:n,...r}=e,o=Bt(un,e.__scopeScrollArea),a=e.orientation==="horizontal",i=ga(()=>d("SCROLL_END"),100),[l,d]=vv("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return g.useEffect(()=>{if(l==="idle"){const h=window.setTimeout(()=>d("HIDE"),o.scrollHideDelay);return()=>window.clearTimeout(h)}},[l,o.scrollHideDelay,d]),g.useEffect(()=>{const h=o.viewport,p=a?"scrollLeft":"scrollTop";if(h){let y=h[p];const v=()=>{const x=h[p];y!==x&&(d("SCROLL"),i()),y=x};return h.addEventListener("scroll",v),()=>h.removeEventListener("scroll",v)}},[o.viewport,a,d,i]),u.jsx(In,{present:n||l!=="hidden",children:u.jsx(Ci,{"data-state":l==="hidden"?"hidden":"visible",...r,ref:t,onPointerEnter:pe(e.onPointerEnter,()=>d("POINTER_ENTER")),onPointerLeave:pe(e.onPointerLeave,()=>d("POINTER_LEAVE"))})})}),Gd=g.forwardRef((e,t)=>{const n=Bt(un,e.__scopeScrollArea),{forceMount:r,...o}=e,[a,i]=g.useState(!1),l=e.orientation==="horizontal",d=ga(()=>{if(n.viewport){const h=n.viewport.offsetWidth<n.viewport.scrollWidth,p=n.viewport.offsetHeight<n.viewport.scrollHeight;i(l?h:p)}},10);return xr(n.viewport,d),xr(n.content,d),u.jsx(In,{present:r||a,children:u.jsx(Ci,{"data-state":a?"visible":"hidden",...o,ref:t})})}),Ci=g.forwardRef((e,t)=>{const{orientation:n="vertical",...r}=e,o=Bt(un,e.__scopeScrollArea),a=g.useRef(null),i=g.useRef(0),[l,d]=g.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),h=Jd(l.viewport,l.content),p={...r,sizes:l,onSizesChange:d,hasThumb:h>0&&h<1,onThumbChange:v=>a.current=v,onThumbPointerUp:()=>i.current=0,onThumbPointerDown:v=>i.current=v};function y(v,x){return Dv(v,i.current,l,x)}return n==="horizontal"?u.jsx(kv,{...p,ref:t,onThumbPositionChange:()=>{if(o.viewport&&a.current){const v=o.viewport.scrollLeft,x=Zu(v,l,o.dir);a.current.style.transform=`translate3d(${x}px, 0, 0)`}},onWheelScroll:v=>{o.viewport&&(o.viewport.scrollLeft=v)},onDragScroll:v=>{o.viewport&&(o.viewport.scrollLeft=y(v,o.dir))}}):n==="vertical"?u.jsx(Sv,{...p,ref:t,onThumbPositionChange:()=>{if(o.viewport&&a.current){const v=o.viewport.scrollTop,x=Zu(v,l);a.current.style.transform=`translate3d(0, ${x}px, 0)`}},onWheelScroll:v=>{o.viewport&&(o.viewport.scrollTop=v)},onDragScroll:v=>{o.viewport&&(o.viewport.scrollTop=y(v))}}):null}),kv=g.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,...o}=e,a=Bt(un,e.__scopeScrollArea),[i,l]=g.useState(),d=g.useRef(null),h=We(t,d,a.onScrollbarXChange);return g.useEffect(()=>{d.current&&l(getComputedStyle(d.current))},[d]),u.jsx(Zd,{"data-orientation":"horizontal",...o,ref:h,sizes:n,style:{bottom:0,left:a.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:a.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":ma(n)+"px",...e.style},onThumbPointerDown:p=>e.onThumbPointerDown(p.x),onDragScroll:p=>e.onDragScroll(p.x),onWheelScroll:(p,y)=>{if(a.viewport){const v=a.viewport.scrollLeft+p.deltaX;e.onWheelScroll(v),tf(v,y)&&p.preventDefault()}},onResize:()=>{d.current&&a.viewport&&i&&r({content:a.viewport.scrollWidth,viewport:a.viewport.offsetWidth,scrollbar:{size:d.current.clientWidth,paddingStart:ea(i.paddingLeft),paddingEnd:ea(i.paddingRight)}})}})}),Sv=g.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,...o}=e,a=Bt(un,e.__scopeScrollArea),[i,l]=g.useState(),d=g.useRef(null),h=We(t,d,a.onScrollbarYChange);return g.useEffect(()=>{d.current&&l(getComputedStyle(d.current))},[d]),u.jsx(Zd,{"data-orientation":"vertical",...o,ref:h,sizes:n,style:{top:0,right:a.dir==="ltr"?0:void 0,left:a.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":ma(n)+"px",...e.style},onThumbPointerDown:p=>e.onThumbPointerDown(p.y),onDragScroll:p=>e.onDragScroll(p.y),onWheelScroll:(p,y)=>{if(a.viewport){const v=a.viewport.scrollTop+p.deltaY;e.onWheelScroll(v),tf(v,y)&&p.preventDefault()}},onResize:()=>{d.current&&a.viewport&&i&&r({content:a.viewport.scrollHeight,viewport:a.viewport.offsetHeight,scrollbar:{size:d.current.clientHeight,paddingStart:ea(i.paddingTop),paddingEnd:ea(i.paddingBottom)}})}})}),[Ev,Yd]=Kd(un),Zd=g.forwardRef((e,t)=>{const{__scopeScrollArea:n,sizes:r,hasThumb:o,onThumbChange:a,onThumbPointerUp:i,onThumbPointerDown:l,onThumbPositionChange:d,onDragScroll:h,onWheelScroll:p,onResize:y,...v}=e,x=Bt(un,n),[w,_]=g.useState(null),E=We(t,se=>_(se)),k=g.useRef(null),S=g.useRef(""),A=x.viewport,T=r.content-r.viewport,$=Nt(p),U=Nt(d),V=ga(y,10);function Y(se){if(k.current){const ge=se.clientX-k.current.left,G=se.clientY-k.current.top;h({x:ge,y:G})}}return g.useEffect(()=>{const se=ge=>{const G=ge.target;w?.contains(G)&&$(ge,T)};return document.addEventListener("wheel",se,{passive:!1}),()=>document.removeEventListener("wheel",se,{passive:!1})},[A,w,T,$]),g.useEffect(U,[r,U]),xr(w,V),xr(x.content,V),u.jsx(Ev,{scope:n,scrollbar:w,hasThumb:o,onThumbChange:Nt(a),onThumbPointerUp:Nt(i),onThumbPositionChange:U,onThumbPointerDown:Nt(l),children:u.jsx($e.div,{...v,ref:E,style:{position:"absolute",...v.style},onPointerDown:pe(e.onPointerDown,se=>{se.button===0&&(se.target.setPointerCapture(se.pointerId),k.current=w.getBoundingClientRect(),S.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",x.viewport&&(x.viewport.style.scrollBehavior="auto"),Y(se))}),onPointerMove:pe(e.onPointerMove,Y),onPointerUp:pe(e.onPointerUp,se=>{const ge=se.target;ge.hasPointerCapture(se.pointerId)&&ge.releasePointerCapture(se.pointerId),document.body.style.webkitUserSelect=S.current,x.viewport&&(x.viewport.style.scrollBehavior=""),k.current=null})})})}),Jo="ScrollAreaThumb",Xd=g.forwardRef((e,t)=>{const{forceMount:n,...r}=e,o=Yd(Jo,e.__scopeScrollArea);return u.jsx(In,{present:n||o.hasThumb,children:u.jsx(jv,{ref:t,...r})})}),jv=g.forwardRef((e,t)=>{const{__scopeScrollArea:n,style:r,...o}=e,a=Bt(Jo,n),i=Yd(Jo,n),{onThumbPositionChange:l}=i,d=We(t,y=>i.onThumbChange(y)),h=g.useRef(void 0),p=ga(()=>{h.current&&(h.current(),h.current=void 0)},100);return g.useEffect(()=>{const y=a.viewport;if(y){const v=()=>{if(p(),!h.current){const x=Nv(y,l);h.current=x,l()}};return l(),y.addEventListener("scroll",v),()=>y.removeEventListener("scroll",v)}},[a.viewport,p,l]),u.jsx($e.div,{"data-state":i.hasThumb?"visible":"hidden",...o,ref:d,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...r},onPointerDownCapture:pe(e.onPointerDownCapture,y=>{const x=y.target.getBoundingClientRect(),w=y.clientX-x.left,_=y.clientY-x.top;i.onThumbPointerDown({x:w,y:_})}),onPointerUp:pe(e.onPointerUp,i.onThumbPointerUp)})});Xd.displayName=Jo;var _i="ScrollAreaCorner",Qd=g.forwardRef((e,t)=>{const n=Bt(_i,e.__scopeScrollArea),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?u.jsx(Av,{...e,ref:t}):null});Qd.displayName=_i;var Av=g.forwardRef((e,t)=>{const{__scopeScrollArea:n,...r}=e,o=Bt(_i,n),[a,i]=g.useState(0),[l,d]=g.useState(0),h=!!(a&&l);return xr(o.scrollbarX,()=>{const p=o.scrollbarX?.offsetHeight||0;o.onCornerHeightChange(p),d(p)}),xr(o.scrollbarY,()=>{const p=o.scrollbarY?.offsetWidth||0;o.onCornerWidthChange(p),i(p)}),h?u.jsx($e.div,{...r,ref:t,style:{width:a,height:l,position:"absolute",right:o.dir==="ltr"?0:void 0,left:o.dir==="rtl"?0:void 0,bottom:0,...e.style}}):null});function ea(e){return e?parseInt(e,10):0}function Jd(e,t){const n=e/t;return isNaN(n)?0:n}function ma(e){const t=Jd(e.viewport,e.content),n=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,r=(e.scrollbar.size-n)*t;return Math.max(r,18)}function Dv(e,t,n,r="ltr"){const o=ma(n),a=o/2,i=t||a,l=o-i,d=n.scrollbar.paddingStart+i,h=n.scrollbar.size-n.scrollbar.paddingEnd-l,p=n.content-n.viewport,y=r==="ltr"?[0,p]:[p*-1,0];return ef([d,h],y)(e)}function Zu(e,t,n="ltr"){const r=ma(t),o=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,a=t.scrollbar.size-o,i=t.content-t.viewport,l=a-r,d=n==="ltr"?[0,i]:[i*-1,0],h=oo(e,d);return ef([0,i],[0,l])(h)}function ef(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}function tf(e,t){return e>0&&e<t}var Nv=(e,t=()=>{})=>{let n={left:e.scrollLeft,top:e.scrollTop},r=0;return function o(){const a={left:e.scrollLeft,top:e.scrollTop},i=n.left!==a.left,l=n.top!==a.top;(i||l)&&t(),n=a,r=window.requestAnimationFrame(o)}(),()=>window.cancelAnimationFrame(r)};function ga(e,t){const n=Nt(e),r=g.useRef(0);return g.useEffect(()=>()=>window.clearTimeout(r.current),[]),g.useCallback(()=>{window.clearTimeout(r.current),r.current=window.setTimeout(n,t)},[n,t])}function xr(e,t){const n=Nt(t);Wt(()=>{let r=0;if(e){const o=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return o.observe(e),()=>{window.cancelAnimationFrame(r),o.unobserve(e)}}},[e,n])}var nf=Hd,Tv=Vd,Mv=Qd;const rf=g.forwardRef(({className:e,children:t,...n},r)=>u.jsxs(nf,{ref:r,className:re("relative overflow-hidden",e),...n,children:[u.jsx(Tv,{className:"h-full w-full rounded-[inherit]",children:t}),u.jsx(of,{}),u.jsx(Mv,{})]}));rf.displayName=nf.displayName;const of=g.forwardRef(({className:e,orientation:t="vertical",...n},r)=>u.jsx(wi,{ref:r,orientation:t,className:re("flex touch-none select-none transition-colors",t==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",t==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",e),...n,children:u.jsx(Xd,{className:"relative flex-1 rounded-full bg-border"})}));of.displayName=wi.displayName;const Pv=Xs("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function Tt({className:e,variant:t,...n}){return u.jsx("div",{className:re(Pv({variant:t}),e),...n})}const Gn=Cl,Rv=wl,af=g.forwardRef(({className:e,...t},n)=>u.jsx(Ks,{ref:n,className:re("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));af.displayName=Ks.displayName;const Rn=g.forwardRef(({className:e,children:t,...n},r)=>u.jsxs(Rv,{children:[u.jsx(af,{}),u.jsxs(Hs,{ref:r,className:re("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...n,children:[t,u.jsxs(Ws,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[u.jsx(Zn,{className:"h-4 w-4"}),u.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Rn.displayName=Hs.displayName;const kr=({className:e,...t})=>u.jsx("div",{className:re("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});kr.displayName="DialogHeader";const Sr=({className:e,...t})=>u.jsx("div",{className:re("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});Sr.displayName="DialogFooter";const Er=g.forwardRef(({className:e,...t},n)=>u.jsx(Vs,{ref:n,className:re("text-lg font-semibold leading-none tracking-tight",e),...t}));Er.displayName=Vs.displayName;const ba=g.forwardRef(({className:e,...t},n)=>u.jsx(Gs,{ref:n,className:re("text-sm text-muted-foreground",e),...t}));ba.displayName=Gs.displayName;function Fv({isOpen:e,onClose:t,currentCardId:n,currentFolderId:r,onFolderSelect:o}){const{folders:a,getFolderById:i}=Al(),[l,d]=g.useState(""),[h,p]=g.useState(r);g.useEffect(()=>{e&&(p(r),d(""))},[e,r]);const y=a.filter(k=>k.name.toLowerCase().includes(l.toLowerCase())),v=r?i(r):null,x=k=>{p(k)},w=()=>{o&&o(h),t()},_=()=>{p(r),t()},E=h!==r;return u.jsx(Gn,{open:e,onOpenChange:t,children:u.jsxs(Rn,{className:"sm:max-w-md",children:[u.jsx(kr,{children:u.jsxs(Er,{className:"flex items-center gap-2",children:[u.jsx(Tn,{className:"h-5 w-5"}),"Move Card to Folder"]})}),u.jsxs("div",{className:"space-y-4",children:[v&&u.jsxs("div",{className:"flex items-center gap-2 p-3 bg-muted rounded-lg",children:[u.jsx(ql,{className:"h-4 w-4 text-muted-foreground"}),u.jsx("span",{className:"text-sm text-muted-foreground",children:"Currently in:"}),u.jsx(Tt,{variant:"secondary",children:v.name})]}),!v&&u.jsxs("div",{className:"flex items-center gap-2 p-3 bg-muted rounded-lg",children:[u.jsx(yu,{className:"h-4 w-4 text-muted-foreground"}),u.jsx("span",{className:"text-sm text-muted-foreground",children:"Currently in: Root"})]}),u.jsxs("div",{className:"relative",children:[u.jsx(Gr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),u.jsx(Ct,{placeholder:"Search folders...",value:l,onChange:k=>d(k.target.value),className:"pl-10"})]}),u.jsx(rf,{className:"h-64 w-full border rounded-md",children:u.jsxs("div",{className:"p-2 space-y-1",children:[u.jsxs("div",{className:re("flex items-center gap-3 p-2 rounded-md cursor-pointer transition-colors",h===null?"bg-primary text-primary-foreground":"hover:bg-muted"),onClick:()=>x(null),children:[u.jsx(yu,{className:"h-4 w-4 flex-shrink-0"}),u.jsx("span",{className:"flex-1",children:"Root"}),h===null&&u.jsx(Mn,{className:"h-4 w-4 flex-shrink-0"}),r===null&&u.jsx(Tt,{variant:"outline",className:"text-xs",children:"Current"})]}),y.map(k=>u.jsxs("div",{className:re("flex items-center gap-3 p-2 rounded-md cursor-pointer transition-colors",h===k.id?"bg-primary text-primary-foreground":"hover:bg-muted",r===k.id&&"opacity-60"),onClick:()=>x(k.id),children:[u.jsx(Tn,{className:"h-4 w-4 flex-shrink-0"}),u.jsx("span",{className:"flex-1",children:k.name}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(Tt,{variant:"outline",className:"text-xs",children:k.cardIds.length}),h===k.id&&u.jsx(Mn,{className:"h-4 w-4 flex-shrink-0"}),r===k.id&&u.jsx(Tt,{variant:"outline",className:"text-xs",children:"Current"})]})]},k.id)),y.length===0&&l&&u.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[u.jsx(Tn,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),u.jsx("p",{className:"text-sm",children:"No folders found"})]})]})})]}),u.jsxs(Sr,{children:[u.jsx(_e,{variant:"outline",onClick:_,children:"Cancel"}),u.jsx(_e,{onClick:w,disabled:!E,children:E?"Move Card":"No Change"})]})]})})}const sf=g.createContext(void 0);function Iv({children:e}){const[t,n]=g.useState(!1),[r,o]=g.useState(null),[a,i]=g.useState(null),[l,d]=g.useState(null),h=v=>{o(v.targetCardId),i(v.currentFolderId||null),d(()=>v.onFolderApply),n(!0)},p=()=>{n(!1),o(null),i(null),d(null)},y={isOpen:t,currentCardId:r,currentFolderId:a,onFolderSelect:l,openFolderPanel:h,closeFolderPanel:p};return u.jsxs(sf.Provider,{value:y,children:[e,typeof window<"u"&&t&&r&&vr.createPortal(u.jsx(Fv,{isOpen:t,onClose:p,currentCardId:r,currentFolderId:a,onFolderSelect:l}),document.body)]})}function Ov(){const e=g.useContext(sf);if(e===void 0)throw new Error("useFolderPanel must be used within a FolderPanelProvider");return e}function Lv({card:e,onFlip:t,onUpdate:n,onCopy:r,onScreenshot:o,onShare:a,onDelete:i,onMoveToFolder:l,className:d,size:h="md"}){const{openStylePanel:p}=bv(),{openTagPanel:y}=Ud(),{openFolderPanel:v}=Ov(),x=(S,A)=>{n(S,{style:A,updatedAt:new Date})},w=()=>{p({targetCardId:e.id,currentStyle:e.style,onStyleApply:S=>x(e.id,S),onPanelClose:()=>{}})},_=(S,A)=>{const T=e.isFlipped?e.backContent:e.frontContent,$=e.isFlipped?"backContent":"frontContent";n(S,{[$]:{...T,tags:A,lastModified:new Date},updatedAt:new Date})},E=()=>{const S=e.isFlipped?e.backContent:e.frontContent;y({targetCardId:e.id,currentTags:S.tags,onTagsApply:A=>_(e.id,A),onPanelClose:()=>{}})},k=()=>{l&&v({targetCardId:e.id,currentFolderId:e.folderId,onFolderApply:S=>l(e.id,S),onPanelClose:()=>{}})};return u.jsx(qy,{card:e,onFlip:t,onUpdate:n,onCopy:r,onScreenshot:o,onShare:a,onDelete:i,onStyleChange:w,onTagsChange:E,onMoveToFolder:l?k:void 0,className:d,size:h})}function zv({items:e,gap:t=16,minColumnWidth:n=280,maxColumns:r=5,breakpoints:o={sm:640,md:768,lg:1024,xl:1280,"2xl":1536}}){const a=g.useRef(null),[i,l]=g.useState(new Map),[d,h]=g.useState(0),[p,y]=g.useState({columns:1,gap:t,containerWidth:0}),v=g.useCallback(k=>{if(k===0)return 1;let S=r;k<o.sm?S=1:k<o.md?S=2:k<o.lg?S=3:k<o.xl&&(S=4);const A=k-t,T=Math.floor(A/(n+t));return Math.min(Math.max(1,T),S)},[t,n,r,o]),x=g.useCallback((k,S,A,T)=>{if(S===0||A===0)return{positions:new Map,totalHeight:0};const $=T*(S-1),U=A-$,V=Math.floor(U/S),Y=new Array(S).fill(0),se=new Map;k.forEach(G=>{const X=Y.indexOf(Math.min(...Y)),Ee=X*(V+T),Te=Y[X];se.set(G.id,{x:Ee,y:Te,width:V,height:G.height}),Y[X]+=G.height+T});const ge=Math.max(...Y)-T;return{positions:se,totalHeight:ge}},[]),w=g.useCallback(k=>{const S=k[0];if(!S)return;const A=S.contentRect.width,T=v(A);y($=>({...$,columns:T,containerWidth:A}))},[v]);g.useEffect(()=>{const k=a.current;if(!k)return;const S=new ResizeObserver(A=>{w(A)});return S.observe(k),()=>{S.disconnect()}},[w]),g.useEffect(()=>{if(e.length===0||p.containerWidth===0){l(new Map),h(0);return}const{positions:k,totalHeight:S}=x(e,p.columns,p.containerWidth,t);l(k),h(S)},[e,p,t,x]);const _=g.useCallback(k=>i.get(k),[i]),E=g.useCallback((k,S)=>{const A=e.findIndex(V=>V.id===k);if(A===-1)return;const T=[...e];T[A]={...T[A],height:S};const{positions:$,totalHeight:U}=x(T,p.columns,p.containerWidth,t);l($),h(U)},[e,p,t,x]);return{containerRef:a,positions:i,containerHeight:d,config:p,getItemPosition:_,updateItemHeight:E}}function Bv({cards:e,onCardFlip:t,onCardUpdate:n,onCardCopy:r,onCardScreenshot:o,onCardShare:a,onCardDelete:i,onMoveToFolder:l,onCardStyleChange:d,cardSize:h="md",className:p,gap:y=16,enableVirtualization:v=!0,overscan:x=5}){const[w,_]=g.useState(new Map),[E,k]=g.useState(!1),[S,A]=g.useState(0),[T,$]=g.useState(0),U=g.useRef(new Map),V=g.useRef(null),Y=g.useMemo(()=>[...e].sort((q,fe)=>new Date(fe.createdAt).getTime()-new Date(q.createdAt).getTime()),[e]),se=g.useCallback(q=>{const xe={sm:.8,md:1,lg:1.3}[h],we=200*xe,ye=Math.min(Math.ceil(q.frontContent.title.length/25),3)*24*xe,Se=Math.min(Math.ceil(q.frontContent.text.length/40),8)*18*xe,ze=q.frontContent.images.length>0?120*xe:0,ae=q.frontContent.tags.length>0?32*xe:0,Z=32*xe;return Math.round(we+ye+Se+ze+ae+Z)},[h]),ge=g.useMemo(()=>Y.map(q=>({id:q.id,height:w.get(q.id)||se(q)})),[Y,w,se]),G=g.useMemo(()=>({sm:{minColumnWidth:240,maxColumns:5},md:{minColumnWidth:280,maxColumns:4},lg:{minColumnWidth:320,maxColumns:3}})[h],[h]),{containerRef:X,positions:Ee,containerHeight:Te,updateItemHeight:De}=zv({items:ge,gap:y,...G,breakpoints:{sm:640,md:768,lg:1024,xl:1280,"2xl":1536}}),be=g.useMemo(()=>{if(!v||!V.current)return Y;const q=V.current.clientHeight,fe=S-x*100,xe=S+q+x*100;return Y.filter(we=>{const ye=Ee.get(we.id);return ye?ye.y+ye.height>=fe&&ye.y<=xe:!0})},[Y,Ee,S,v,x]);g.useCallback(q=>{v&&A(q.currentTarget.scrollTop)},[v]);const Pe=g.useCallback(q=>{const fe=U.current.get(q);if(!fe)return;const xe=new ResizeObserver(we=>{const ye=we[0];if(ye){const Se=ye.contentRect.height,ze=w.get(q);Math.abs(Se-(ze||0))>3&&(_(ae=>{const Z=new Map(ae);return Z.set(q,Se),Z}),De(q,Se))}});return xe.observe(fe),()=>xe.disconnect()},[w,De]);g.useEffect(()=>{if(!E&&Y.length>0){const q=new Map;Y.forEach(fe=>{q.set(fe.id,se(fe))}),_(q),k(!0)}},[Y,se,E]),g.useEffect(()=>{const q=[];return be.forEach(fe=>{const xe=Pe(fe.id);xe&&q.push(xe)}),()=>{q.forEach(fe=>fe())}},[be,Pe]);const je=g.useCallback((q,fe)=>{fe?U.current.set(q,fe):U.current.delete(q)},[]);return g.useEffect(()=>{V.current&&$(V.current.clientHeight)},[]),Y.length===0?u.jsx("div",{className:"flex-1 flex items-center justify-center p-12",children:u.jsxs("div",{className:"text-center space-y-4",children:[u.jsx("div",{className:"w-24 h-24 mx-auto rounded-full bg-muted flex items-center justify-center",children:u.jsx("div",{className:"w-12 h-12 rounded-lg bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center",children:u.jsx("span",{className:"text-white font-bold text-lg",children:"+"})})}),u.jsxs("div",{className:"space-y-2",children:[u.jsx("h3",{className:"text-lg font-semibold",children:"No cards yet"}),u.jsx("p",{className:"text-muted-foreground max-w-sm",children:"Create your first knowledge card to get started. Click the + button to begin."})]})]})}):u.jsx("div",{ref:X,className:re("relative w-full",p),style:{height:Te},children:be.map(q=>{const fe=Ee.get(q.id);return fe?u.jsx("div",{ref:xe=>je(q.id,xe),className:"absolute transition-all duration-300 ease-out",style:{transform:`translate3d(${fe.x}px, ${fe.y}px, 0)`,width:fe.width,willChange:"transform"},children:u.jsx(Lv,{card:q,onFlip:t,onUpdate:n,onCopy:r,onScreenshot:o,onShare:a,onDelete:i,onMoveToFolder:l,size:h,className:"w-full"})},q.id):null})})}function uf(e){const t=g.useRef({value:e,previous:e});return g.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var lf=["PageUp","PageDown"],cf=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],df={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},jr="Slider",[Ps,$v,qv]=aa(jr),[ff,y_]=rn(jr,[qv]),[Uv,xa]=ff(jr),hf=g.forwardRef((e,t)=>{const{name:n,min:r=0,max:o=100,step:a=1,orientation:i="horizontal",disabled:l=!1,minStepsBetweenThumbs:d=0,defaultValue:h=[r],value:p,onValueChange:y=()=>{},onValueCommit:v=()=>{},inverted:x=!1,form:w,..._}=e,E=g.useRef(new Set),k=g.useRef(0),A=i==="horizontal"?Kv:Hv,[T=[],$]=Xr({prop:p,defaultProp:h,onChange:G=>{[...E.current][k.current]?.focus(),y(G)}}),U=g.useRef(T);function V(G){const X=Zv(T,G);ge(G,X)}function Y(G){ge(G,k.current)}function se(){const G=U.current[k.current];T[k.current]!==G&&v(T)}function ge(G,X,{commit:Ee}={commit:!1}){const Te=ew(a),De=tw(Math.round((G-r)/a)*a+r,Te),be=oo(De,[r,o]);$((Pe=[])=>{const je=Gv(Pe,be,X);if(Jv(je,d*a)){k.current=je.indexOf(be);const q=String(je)!==String(Pe);return q&&Ee&&v(je),q?je:Pe}else return Pe})}return u.jsx(Uv,{scope:e.__scopeSlider,name:n,disabled:l,min:r,max:o,valueIndexToChangeRef:k,thumbs:E.current,values:T,orientation:i,form:w,children:u.jsx(Ps.Provider,{scope:e.__scopeSlider,children:u.jsx(Ps.Slot,{scope:e.__scopeSlider,children:u.jsx(A,{"aria-disabled":l,"data-disabled":l?"":void 0,..._,ref:t,onPointerDown:pe(_.onPointerDown,()=>{l||(U.current=T)}),min:r,max:o,inverted:x,onSlideStart:l?void 0:V,onSlideMove:l?void 0:Y,onSlideEnd:l?void 0:se,onHomeKeyDown:()=>!l&&ge(r,0,{commit:!0}),onEndKeyDown:()=>!l&&ge(o,T.length-1,{commit:!0}),onStepKeyDown:({event:G,direction:X})=>{if(!l){const De=lf.includes(G.key)||G.shiftKey&&cf.includes(G.key)?10:1,be=k.current,Pe=T[be],je=a*De*X;ge(Pe+je,be,{commit:!0})}}})})})})});hf.displayName=jr;var[pf,mf]=ff(jr,{startEdge:"left",endEdge:"right",size:"width",direction:1}),Kv=g.forwardRef((e,t)=>{const{min:n,max:r,dir:o,inverted:a,onSlideStart:i,onSlideMove:l,onSlideEnd:d,onStepKeyDown:h,...p}=e,[y,v]=g.useState(null),x=We(t,A=>v(A)),w=g.useRef(void 0),_=uo(o),E=_==="ltr",k=E&&!a||!E&&a;function S(A){const T=w.current||y.getBoundingClientRect(),$=[0,T.width],V=ki($,k?[n,r]:[r,n]);return w.current=T,V(A-T.left)}return u.jsx(pf,{scope:e.__scopeSlider,startEdge:k?"left":"right",endEdge:k?"right":"left",direction:k?1:-1,size:"width",children:u.jsx(gf,{dir:_,"data-orientation":"horizontal",...p,ref:x,style:{...p.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:A=>{const T=S(A.clientX);i?.(T)},onSlideMove:A=>{const T=S(A.clientX);l?.(T)},onSlideEnd:()=>{w.current=void 0,d?.()},onStepKeyDown:A=>{const $=df[k?"from-left":"from-right"].includes(A.key);h?.({event:A,direction:$?-1:1})}})})}),Hv=g.forwardRef((e,t)=>{const{min:n,max:r,inverted:o,onSlideStart:a,onSlideMove:i,onSlideEnd:l,onStepKeyDown:d,...h}=e,p=g.useRef(null),y=We(t,p),v=g.useRef(void 0),x=!o;function w(_){const E=v.current||p.current.getBoundingClientRect(),k=[0,E.height],A=ki(k,x?[r,n]:[n,r]);return v.current=E,A(_-E.top)}return u.jsx(pf,{scope:e.__scopeSlider,startEdge:x?"bottom":"top",endEdge:x?"top":"bottom",size:"height",direction:x?1:-1,children:u.jsx(gf,{"data-orientation":"vertical",...h,ref:y,style:{...h.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:_=>{const E=w(_.clientY);a?.(E)},onSlideMove:_=>{const E=w(_.clientY);i?.(E)},onSlideEnd:()=>{v.current=void 0,l?.()},onStepKeyDown:_=>{const k=df[x?"from-bottom":"from-top"].includes(_.key);d?.({event:_,direction:k?-1:1})}})})}),gf=g.forwardRef((e,t)=>{const{__scopeSlider:n,onSlideStart:r,onSlideMove:o,onSlideEnd:a,onHomeKeyDown:i,onEndKeyDown:l,onStepKeyDown:d,...h}=e,p=xa(jr,n);return u.jsx($e.span,{...h,ref:t,onKeyDown:pe(e.onKeyDown,y=>{y.key==="Home"?(i(y),y.preventDefault()):y.key==="End"?(l(y),y.preventDefault()):lf.concat(cf).includes(y.key)&&(d(y),y.preventDefault())}),onPointerDown:pe(e.onPointerDown,y=>{const v=y.target;v.setPointerCapture(y.pointerId),y.preventDefault(),p.thumbs.has(v)?v.focus():r(y)}),onPointerMove:pe(e.onPointerMove,y=>{y.target.hasPointerCapture(y.pointerId)&&o(y)}),onPointerUp:pe(e.onPointerUp,y=>{const v=y.target;v.hasPointerCapture(y.pointerId)&&(v.releasePointerCapture(y.pointerId),a(y))})})}),bf="SliderTrack",xf=g.forwardRef((e,t)=>{const{__scopeSlider:n,...r}=e,o=xa(bf,n);return u.jsx($e.span,{"data-disabled":o.disabled?"":void 0,"data-orientation":o.orientation,...r,ref:t})});xf.displayName=bf;var Rs="SliderRange",yf=g.forwardRef((e,t)=>{const{__scopeSlider:n,...r}=e,o=xa(Rs,n),a=mf(Rs,n),i=g.useRef(null),l=We(t,i),d=o.values.length,h=o.values.map(v=>wf(v,o.min,o.max)),p=d>1?Math.min(...h):0,y=100-Math.max(...h);return u.jsx($e.span,{"data-orientation":o.orientation,"data-disabled":o.disabled?"":void 0,...r,ref:l,style:{...e.style,[a.startEdge]:p+"%",[a.endEdge]:y+"%"}})});yf.displayName=Rs;var Fs="SliderThumb",vf=g.forwardRef((e,t)=>{const n=$v(e.__scopeSlider),[r,o]=g.useState(null),a=We(t,l=>o(l)),i=g.useMemo(()=>r?n().findIndex(l=>l.ref.current===r):-1,[n,r]);return u.jsx(Wv,{...e,ref:a,index:i})}),Wv=g.forwardRef((e,t)=>{const{__scopeSlider:n,index:r,name:o,...a}=e,i=xa(Fs,n),l=mf(Fs,n),[d,h]=g.useState(null),p=We(t,S=>h(S)),y=d?i.form||!!d.closest("form"):!0,v=Cp(d),x=i.values[r],w=x===void 0?0:wf(x,i.min,i.max),_=Yv(r,i.values.length),E=v?.[l.size],k=E?Xv(E,w,l.direction):0;return g.useEffect(()=>{if(d)return i.thumbs.add(d),()=>{i.thumbs.delete(d)}},[d,i.thumbs]),u.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[l.startEdge]:`calc(${w}% + ${k}px)`},children:[u.jsx(Ps.ItemSlot,{scope:e.__scopeSlider,children:u.jsx($e.span,{role:"slider","aria-label":e["aria-label"]||_,"aria-valuemin":i.min,"aria-valuenow":x,"aria-valuemax":i.max,"aria-orientation":i.orientation,"data-orientation":i.orientation,"data-disabled":i.disabled?"":void 0,tabIndex:i.disabled?void 0:0,...a,ref:p,style:x===void 0?{display:"none"}:e.style,onFocus:pe(e.onFocus,()=>{i.valueIndexToChangeRef.current=r})})}),y&&u.jsx(Vv,{name:o??(i.name?i.name+(i.values.length>1?"[]":""):void 0),form:i.form,value:x},r)]})});vf.displayName=Fs;var Vv=e=>{const{value:t,...n}=e,r=g.useRef(null),o=uf(t);return g.useEffect(()=>{const a=r.current,i=window.HTMLInputElement.prototype,d=Object.getOwnPropertyDescriptor(i,"value").set;if(o!==t&&d){const h=new Event("input",{bubbles:!0});d.call(a,t),a.dispatchEvent(h)}},[o,t]),u.jsx("input",{style:{display:"none"},...n,ref:r,defaultValue:t})};function Gv(e=[],t,n){const r=[...e];return r[n]=t,r.sort((o,a)=>o-a)}function wf(e,t,n){const a=100/(n-t)*(e-t);return oo(a,[0,100])}function Yv(e,t){return t>2?`Value ${e+1} of ${t}`:t===2?["Minimum","Maximum"][e]:void 0}function Zv(e,t){if(e.length===1)return 0;const n=e.map(o=>Math.abs(o-t)),r=Math.min(...n);return n.indexOf(r)}function Xv(e,t,n){const r=e/2,a=ki([0,50],[0,r]);return(r-a(t)*n)*n}function Qv(e){return e.slice(0,-1).map((t,n)=>e[n+1]-t)}function Jv(e,t){if(t>0){const n=Qv(e);return Math.min(...n)>=t}return!0}function ki(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}function ew(e){return(String(e).split(".")[1]||"").length}function tw(e,t){const n=Math.pow(10,t);return Math.round(e*n)/n}var Cf=hf,nw=xf,rw=yf,ow=vf;const _f=g.forwardRef(({className:e,...t},n)=>u.jsxs(Cf,{ref:n,className:re("relative flex w-full touch-none select-none items-center",e),...t,children:[u.jsx(nw,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:u.jsx(rw,{className:"absolute h-full bg-primary"})}),u.jsx(ow,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]}));_f.displayName=Cf.displayName;var aw="Label",kf=g.forwardRef((e,t)=>u.jsx($e.label,{...e,ref:t,onMouseDown:n=>{n.target.closest("button, input, select, textarea")||(e.onMouseDown?.(n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));kf.displayName=aw;var Sf=kf;const sw=Xs("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),_t=g.forwardRef(({className:e,...t},n)=>u.jsx(Sf,{ref:n,className:re(sw(),e),...t}));_t.displayName=Sf.displayName;var iw="Separator",Xu="horizontal",uw=["horizontal","vertical"],Ef=g.forwardRef((e,t)=>{const{decorative:n,orientation:r=Xu,...o}=e,a=lw(r)?r:Xu,l=n?{role:"none"}:{"aria-orientation":a==="vertical"?a:void 0,role:"separator"};return u.jsx($e.div,{"data-orientation":a,...l,...o,ref:t})});Ef.displayName=iw;function lw(e){return uw.includes(e)}var jf=Ef;const Hr=g.forwardRef(({className:e,orientation:t="horizontal",decorative:n=!0,...r},o)=>u.jsx(jf,{ref:o,decorative:n,orientation:t,className:re("shrink-0 bg-border",t==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",e),...r}));Hr.displayName=jf.displayName;const cw=kp,dw=Sp,Af=g.forwardRef(({className:e,align:t="center",sideOffset:n=4,...r},o)=>u.jsx(_p,{children:u.jsx(_l,{ref:o,align:t,sideOffset:n,className:re("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...r})}));Af.displayName=_l.displayName;function Qu(e){if(!e)return"";try{const t=new DOMParser().parseFromString(e,"text/html");t.querySelectorAll("img").forEach(i=>i.remove()),t.querySelectorAll("br").forEach(i=>{i.replaceWith(`
`)}),t.querySelectorAll("p, div, h1, h2, h3, h4, h5, h6, li, blockquote").forEach(i=>{i.insertAdjacentText("afterend",`
`)});let a=t.body.textContent||t.body.innerText||"";return a=a.replace(/[ \t]+/g," ").replace(/[ \t]*\n[ \t]*/g,`
`).replace(/\n{3,}/g,`

`).trim(),a}catch(t){return console.warn("Failed to parse HTML, falling back to regex cleanup:",t),e.replace(/<img[^>]*>/gi,"").replace(/<br\s*\/?>/gi,`
`).replace(/<\/?(p|div|h[1-6]|li|blockquote)[^>]*>/gi,`
`).replace(/<[^>]*>/g,"").replace(/&nbsp;/g," ").replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&#39;/g,"'").replace(/[ \t]+/g," ").replace(/[ \t]*\n[ \t]*/g,`
`).replace(/\n{3,}/g,`

`).trim()}}function fw(e,t){const n=Qu(e),r=Qu(t);return`${n}

${r}`}async function hw(e){try{if(navigator.clipboard&&navigator.clipboard.writeText)return await navigator.clipboard.writeText(e),!0;{const t=document.createElement("textarea");t.value=e,t.style.position="fixed",t.style.left="-999999px",t.style.top="-999999px",document.body.appendChild(t),t.focus(),t.select();const n=document.execCommand("copy");return document.body.removeChild(t),n}}catch(t){return console.error("Failed to copy text to clipboard:",t),!1}}function pw(e,t){return e[13]=1,e[14]=t>>8,e[15]=t&255,e[16]=t>>8,e[17]=t&255,e}const Df=112,Nf=72,Tf=89,Mf=115;let ms;function mw(){const e=new Int32Array(256);for(let t=0;t<256;t++){let n=t;for(let r=0;r<8;r++)n=n&1?3988292384^n>>>1:n>>>1;e[t]=n}return e}function gw(e){let t=-1;ms||(ms=mw());for(let n=0;n<e.length;n++)t=ms[(t^e[n])&255]^t>>>8;return t^-1}function bw(e){const t=e.length-1;for(let n=t;n>=4;n--)if(e[n-4]===9&&e[n-3]===Df&&e[n-2]===Nf&&e[n-1]===Tf&&e[n]===Mf)return n-3;return 0}function xw(e,t,n=!1){const r=new Uint8Array(13);t*=39.3701,r[0]=Df,r[1]=Nf,r[2]=Tf,r[3]=Mf,r[4]=t>>>24,r[5]=t>>>16,r[6]=t>>>8,r[7]=t&255,r[8]=r[4],r[9]=r[5],r[10]=r[6],r[11]=r[7],r[12]=1;const o=gw(r),a=new Uint8Array(4);if(a[0]=o>>>24,a[1]=o>>>16,a[2]=o>>>8,a[3]=o&255,n){const i=bw(e);return e.set(r,i),e.set(a,i+13),e}else{const i=new Uint8Array(4);i[0]=0,i[1]=0,i[2]=0,i[3]=9;const l=new Uint8Array(54);return l.set(e,0),l.set(i,33),l.set(r,37),l.set(a,50),l}}const yw="AAlwSFlz",vw="AAAJcEhZ",ww="AAAACXBI";function Cw(e){let t=e.indexOf(yw);return t===-1&&(t=e.indexOf(vw)),t===-1&&(t=e.indexOf(ww)),t}const Pf="[modern-screenshot]",Fn=typeof window<"u",_w=Fn&&"Worker"in window,kw=Fn&&"atob"in window,Sw=Fn&&"btoa"in window,Si=Fn?window.navigator?.userAgent:"",Rf=Si.includes("Chrome"),ta=Si.includes("AppleWebKit")&&!Rf,Ei=Si.includes("Firefox"),Ew=e=>e&&"__CONTEXT__"in e,jw=e=>e.constructor.name==="CSSFontFaceRule",Aw=e=>e.constructor.name==="CSSImportRule",nn=e=>e.nodeType===1,mo=e=>typeof e.className=="object",Ff=e=>e.tagName==="image",Dw=e=>e.tagName==="use",ao=e=>nn(e)&&typeof e.style<"u"&&!mo(e),Nw=e=>e.nodeType===8,Tw=e=>e.nodeType===3,yr=e=>e.tagName==="IMG",ya=e=>e.tagName==="VIDEO",Mw=e=>e.tagName==="CANVAS",Pw=e=>e.tagName==="TEXTAREA",Rw=e=>e.tagName==="INPUT",Fw=e=>e.tagName==="STYLE",Iw=e=>e.tagName==="SCRIPT",Ow=e=>e.tagName==="SELECT",Lw=e=>e.tagName==="SLOT",zw=e=>e.tagName==="IFRAME",Bw=(...e)=>console.warn(Pf,...e);function $w(e){const t=e?.createElement?.("canvas");return t&&(t.height=t.width=1),!!t&&"toDataURL"in t&&!!t.toDataURL("image/webp").includes("image/webp")}const Is=e=>e.startsWith("data:");function If(e,t){if(e.match(/^[a-z]+:\/\//i))return e;if(Fn&&e.match(/^\/\//))return window.location.protocol+e;if(e.match(/^[a-z]+:/i)||!Fn)return e;const n=va().implementation.createHTMLDocument(),r=n.createElement("base"),o=n.createElement("a");return n.head.appendChild(r),n.body.appendChild(o),t&&(r.href=t),o.href=e,o.href}function va(e){return(e&&nn(e)?e?.ownerDocument:e)??window.document}const wa="http://www.w3.org/2000/svg";function qw(e,t,n){const r=va(n).createElementNS(wa,"svg");return r.setAttributeNS(null,"width",e.toString()),r.setAttributeNS(null,"height",t.toString()),r.setAttributeNS(null,"viewBox",`0 0 ${e} ${t}`),r}function Uw(e,t){let n=new XMLSerializer().serializeToString(e);return t&&(n=n.replace(/[\u0000-\u0008\v\f\u000E-\u001F\uD800-\uDFFF\uFFFE\uFFFF]/gu,"")),`data:image/svg+xml;charset=utf-8,${encodeURIComponent(n)}`}function Kw(e,t){return new Promise((n,r)=>{const o=new FileReader;o.onload=()=>n(o.result),o.onerror=()=>r(o.error),o.onabort=()=>r(new Error(`Failed read blob to ${t}`)),o.readAsDataURL(e)})}const Hw=e=>Kw(e,"dataUrl");function fr(e,t){const n=va(t).createElement("img");return n.decoding="sync",n.loading="eager",n.src=e,n}function so(e,t){return new Promise(n=>{const{timeout:r,ownerDocument:o,onError:a,onWarn:i}=t??{},l=typeof e=="string"?fr(e,va(o)):e;let d=null,h=null;function p(){n(l),d&&clearTimeout(d),h?.()}if(r&&(d=setTimeout(p,r)),ya(l)){const y=l.currentSrc||l.src;if(!y)return l.poster?so(l.poster,t).then(n):p();if(l.readyState>=2)return p();const v=p,x=w=>{i?.("Failed video load",y,w),a?.(w),p()};h=()=>{l.removeEventListener("loadeddata",v),l.removeEventListener("error",x)},l.addEventListener("loadeddata",v,{once:!0}),l.addEventListener("error",x,{once:!0})}else{const y=Ff(l)?l.href.baseVal:l.currentSrc||l.src;if(!y)return p();const v=async()=>{if(yr(l)&&"decode"in l)try{await l.decode()}catch(w){i?.("Failed to decode image, trying to render anyway",l.dataset.originalSrc||y,w)}p()},x=w=>{i?.("Failed image load",l.dataset.originalSrc||y,w),p()};if(yr(l)&&l.complete)return v();h=()=>{l.removeEventListener("load",v),l.removeEventListener("error",x)},l.addEventListener("load",v,{once:!0}),l.addEventListener("error",x,{once:!0})}})}async function Ww(e,t){ao(e)&&(yr(e)||ya(e)?await so(e,t):await Promise.all(["img","video"].flatMap(n=>Array.from(e.querySelectorAll(n)).map(r=>so(r,t)))))}const Of=function(){let t=0;const n=()=>`0000${(Math.random()*36**4<<0).toString(36)}`.slice(-4);return()=>(t+=1,`u${n()}${t}`)}();function Lf(e){return e?.split(",").map(t=>t.trim().replace(/"|'/g,"").toLowerCase()).filter(Boolean)}let Ju=0;function Vw(e){const t=`${Pf}[#${Ju}]`;return Ju++,{time:n=>e&&console.time(`${t} ${n}`),timeEnd:n=>e&&console.timeEnd(`${t} ${n}`),warn:(...n)=>e&&Bw(...n)}}function Gw(e){return{cache:e?"no-cache":"force-cache"}}async function Ca(e,t){return Ew(e)?e:Yw(e,{...t,autoDestruct:!0})}async function Yw(e,t){const{scale:n=1,workerUrl:r,workerNumber:o=1}=t||{},a=!!t?.debug,i=t?.features??!0,l=e.ownerDocument??(Fn?window.document:void 0),d=e.ownerDocument?.defaultView??(Fn?window:void 0),h=new Map,p={width:0,height:0,quality:1,type:"image/png",scale:n,backgroundColor:null,style:null,filter:null,maximumCanvasSize:0,timeout:3e4,progress:null,debug:a,fetch:{requestInit:Gw(t?.fetch?.bypassingCache),placeholderImage:"data:image/png;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",bypassingCache:!1,...t?.fetch},fetchFn:null,font:{},drawImageInterval:100,workerUrl:null,workerNumber:o,onCloneEachNode:null,onCloneNode:null,onEmbedNode:null,onCreateForeignObjectSvg:null,includeStyleProperties:null,autoDestruct:!1,...t,__CONTEXT__:!0,log:Vw(a),node:e,ownerDocument:l,ownerWindow:d,dpi:n===1?null:96*n,svgStyleElement:zf(l),svgDefsElement:l?.createElementNS(wa,"defs"),svgStyles:new Map,defaultComputedStyles:new Map,workers:[...Array.from({length:_w&&r&&o?o:0})].map(()=>{try{const x=new Worker(r);return x.onmessage=async w=>{const{url:_,result:E}=w.data;E?h.get(_)?.resolve?.(E):h.get(_)?.reject?.(new Error(`Error receiving message from worker: ${_}`))},x.onmessageerror=w=>{const{url:_}=w.data;h.get(_)?.reject?.(new Error(`Error receiving message from worker: ${_}`))},x}catch(x){return p.log.warn("Failed to new Worker",x),null}}).filter(Boolean),fontFamilies:new Map,fontCssTexts:new Map,acceptOfImage:`${[$w(l)&&"image/webp","image/svg+xml","image/*","*/*"].filter(Boolean).join(",")};q=0.8`,requests:h,drawImageCount:0,tasks:[],features:i,isEnable:x=>x==="restoreScrollPosition"?typeof i=="boolean"?!1:i[x]??!1:typeof i=="boolean"?i:i[x]??!0,shadowRoots:[]};p.log.time("wait until load"),await Ww(e,{timeout:p.timeout,onWarn:p.log.warn}),p.log.timeEnd("wait until load");const{width:y,height:v}=Zw(e,p);return p.width=y,p.height=v,p}function zf(e){if(!e)return;const t=e.createElement("style"),n=t.ownerDocument.createTextNode(`
.______background-clip--text {
  background-clip: text;
  -webkit-background-clip: text;
}
`);return t.appendChild(n),t}function Zw(e,t){let{width:n,height:r}=t;if(nn(e)&&(!n||!r)){const o=e.getBoundingClientRect();n=n||o.width||Number(e.getAttribute("width"))||0,r=r||o.height||Number(e.getAttribute("height"))||0}return{width:n,height:r}}async function Xw(e,t){const{log:n,timeout:r,drawImageCount:o,drawImageInterval:a}=t;n.time("image to canvas");const i=await so(e,{timeout:r,onWarn:t.log.warn}),{canvas:l,context2d:d}=Qw(e.ownerDocument,t),h=()=>{try{d?.drawImage(i,0,0,l.width,l.height)}catch(p){t.log.warn("Failed to drawImage",p)}};if(h(),t.isEnable("fixSvgXmlDecode"))for(let p=0;p<o;p++)await new Promise(y=>{setTimeout(()=>{d?.clearRect(0,0,l.width,l.height),h(),y()},p+a)});return t.drawImageCount=0,n.timeEnd("image to canvas"),l}function Qw(e,t){const{width:n,height:r,scale:o,backgroundColor:a,maximumCanvasSize:i}=t,l=e.createElement("canvas");l.width=Math.floor(n*o),l.height=Math.floor(r*o),l.style.width=`${n}px`,l.style.height=`${r}px`,i&&(l.width>i||l.height>i)&&(l.width>i&&l.height>i?l.width>l.height?(l.height*=i/l.width,l.width=i):(l.width*=i/l.height,l.height=i):l.width>i?(l.height*=i/l.width,l.width=i):(l.width*=i/l.height,l.height=i));const d=l.getContext("2d");return d&&a&&(d.fillStyle=a,d.fillRect(0,0,l.width,l.height)),{canvas:l,context2d:d}}function Bf(e,t){if(e.ownerDocument)try{const a=e.toDataURL();if(a!=="data:,")return fr(a,e.ownerDocument)}catch(a){t.log.warn("Failed to clone canvas",a)}const n=e.cloneNode(!1),r=e.getContext("2d"),o=n.getContext("2d");try{return r&&o&&o.putImageData(r.getImageData(0,0,e.width,e.height),0,0),n}catch(a){t.log.warn("Failed to clone canvas",a)}return n}function Jw(e,t){try{if(e?.contentDocument?.body)return ji(e.contentDocument.body,t)}catch(n){t.log.warn("Failed to clone iframe",n)}return e.cloneNode(!1)}function e3(e){const t=e.cloneNode(!1);return e.currentSrc&&e.currentSrc!==e.src&&(t.src=e.currentSrc,t.srcset=""),t.loading==="lazy"&&(t.loading="eager"),t}async function t3(e,t){if(e.ownerDocument&&!e.currentSrc&&e.poster)return fr(e.poster,e.ownerDocument);const n=e.cloneNode(!1);n.crossOrigin="anonymous",e.currentSrc&&e.currentSrc!==e.src&&(n.src=e.currentSrc);const r=n.ownerDocument;if(r){let o=!0;if(await so(n,{onError:()=>o=!1,onWarn:t.log.warn}),!o)return e.poster?fr(e.poster,e.ownerDocument):n;n.currentTime=e.currentTime,await new Promise(i=>{n.addEventListener("seeked",i,{once:!0})});const a=r.createElement("canvas");a.width=e.offsetWidth,a.height=e.offsetHeight;try{const i=a.getContext("2d");i&&i.drawImage(n,0,0,a.width,a.height)}catch(i){return t.log.warn("Failed to clone video",i),e.poster?fr(e.poster,e.ownerDocument):n}return Bf(a,t)}return n}function n3(e,t){return Mw(e)?Bf(e,t):zw(e)?Jw(e,t):yr(e)?e3(e):ya(e)?t3(e,t):e.cloneNode(!1)}function r3(e){let t=e.sandbox;if(!t){const{ownerDocument:n}=e;try{n&&(t=n.createElement("iframe"),t.id=`__SANDBOX__${Of()}`,t.width="0",t.height="0",t.style.visibility="hidden",t.style.position="fixed",n.body.appendChild(t),t.srcdoc='<!DOCTYPE html><meta charset="UTF-8"><title></title><body>',e.sandbox=t)}catch(r){e.log.warn("Failed to getSandBox",r)}}return t}const o3=["width","height","-webkit-text-fill-color"],a3=["stroke","fill"];function $f(e,t,n){const{defaultComputedStyles:r}=n,o=e.nodeName.toLowerCase(),a=mo(e)&&o!=="svg",i=a?a3.map(_=>[_,e.getAttribute(_)]).filter(([,_])=>_!==null):[],l=[a&&"svg",o,i.map((_,E)=>`${_}=${E}`).join(","),t].filter(Boolean).join(":");if(r.has(l))return r.get(l);const h=r3(n)?.contentWindow;if(!h)return new Map;const p=h?.document;let y,v;a?(y=p.createElementNS(wa,"svg"),v=y.ownerDocument.createElementNS(y.namespaceURI,o),i.forEach(([_,E])=>{v.setAttributeNS(null,_,E)}),y.appendChild(v)):y=v=p.createElement(o),v.textContent=" ",p.body.appendChild(y);const x=h.getComputedStyle(v,t),w=new Map;for(let _=x.length,E=0;E<_;E++){const k=x.item(E);o3.includes(k)||w.set(k,x.getPropertyValue(k))}return p.body.removeChild(y),r.set(l,w),w}function qf(e,t,n){const r=new Map,o=[],a=new Map;if(n)for(const l of n)i(l);else for(let l=e.length,d=0;d<l;d++){const h=e.item(d);i(h)}for(let l=o.length,d=0;d<l;d++)a.get(o[d])?.forEach((h,p)=>r.set(p,h));function i(l){const d=e.getPropertyValue(l),h=e.getPropertyPriority(l),p=l.lastIndexOf("-"),y=p>-1?l.substring(0,p):void 0;if(y){let v=a.get(y);v||(v=new Map,a.set(y,v)),v.set(l,[d,h])}t.get(l)===d&&!h||(y?o.push(y):r.set(l,[d,h]))}return r}function s3(e,t,n,r){const{ownerWindow:o,includeStyleProperties:a,currentParentNodeStyle:i}=r,l=t.style,d=o.getComputedStyle(e),h=$f(e,null,r);i?.forEach((y,v)=>{h.delete(v)});const p=qf(d,h,a);p.delete("transition-property"),p.delete("all"),p.delete("d"),p.delete("content"),n&&(p.delete("margin-top"),p.delete("margin-right"),p.delete("margin-bottom"),p.delete("margin-left"),p.delete("margin-block-start"),p.delete("margin-block-end"),p.delete("margin-inline-start"),p.delete("margin-inline-end"),p.set("box-sizing",["border-box",""])),p.get("background-clip")?.[0]==="text"&&t.classList.add("______background-clip--text"),Rf&&(p.has("font-kerning")||p.set("font-kerning",["normal",""]),(p.get("overflow-x")?.[0]==="hidden"||p.get("overflow-y")?.[0]==="hidden")&&p.get("text-overflow")?.[0]==="ellipsis"&&e.scrollWidth===e.clientWidth&&p.set("text-overflow",["clip",""]));for(let y=l.length,v=0;v<y;v++)l.removeProperty(l.item(v));return p.forEach(([y,v],x)=>{l.setProperty(x,y,v)}),p}function i3(e,t){(Pw(e)||Rw(e)||Ow(e))&&t.setAttribute("value",e.value)}const u3=[":before",":after"],l3=[":-webkit-scrollbar",":-webkit-scrollbar-button",":-webkit-scrollbar-thumb",":-webkit-scrollbar-track",":-webkit-scrollbar-track-piece",":-webkit-scrollbar-corner",":-webkit-resizer"];function c3(e,t,n,r,o){const{ownerWindow:a,svgStyleElement:i,svgStyles:l,currentNodeStyle:d}=r;if(!i||!a)return;function h(p){const y=a.getComputedStyle(e,p);let v=y.getPropertyValue("content");if(!v||v==="none")return;o?.(v),v=v.replace(/(')|(")|(counter\(.+\))/g,"");const x=[Of()],w=$f(e,p,r);d?.forEach((A,T)=>{w.delete(T)});const _=qf(y,w,r.includeStyleProperties);_.delete("content"),_.delete("-webkit-locale"),_.get("background-clip")?.[0]==="text"&&t.classList.add("______background-clip--text");const E=[`content: '${v}';`];if(_.forEach(([A,T],$)=>{E.push(`${$}: ${A}${T?" !important":""};`)}),E.length===1)return;try{t.className=[t.className,...x].join(" ")}catch(A){r.log.warn("Failed to copyPseudoClass",A);return}const k=E.join(`
  `);let S=l.get(k);S||(S=[],l.set(k,S)),S.push(`.${x[0]}:${p}`)}u3.forEach(h),n&&l3.forEach(h)}const el=new Set(["symbol"]);async function tl(e,t,n,r,o){if(nn(n)&&(Fw(n)||Iw(n))||r.filter&&!r.filter(n))return;el.has(t.nodeName)||el.has(n.nodeName)?r.currentParentNodeStyle=void 0:r.currentParentNodeStyle=r.currentNodeStyle;const a=await ji(n,r,!1,o);r.isEnable("restoreScrollPosition")&&d3(e,a),t.appendChild(a)}async function nl(e,t,n,r){let o=e.firstChild;nn(e)&&e.shadowRoot&&(o=e.shadowRoot?.firstChild,n.shadowRoots.push(e.shadowRoot));for(let a=o;a;a=a.nextSibling)if(!Nw(a))if(nn(a)&&Lw(a)&&typeof a.assignedNodes=="function"){const i=a.assignedNodes();for(let l=0;l<i.length;l++)await tl(e,t,i[l],n,r)}else await tl(e,t,a,n,r)}function d3(e,t){if(!ao(e)||!ao(t))return;const{scrollTop:n,scrollLeft:r}=e;if(!n&&!r)return;const{transform:o}=t.style,a=new DOMMatrix(o),{a:i,b:l,c:d,d:h}=a;a.a=1,a.b=0,a.c=0,a.d=1,a.translateSelf(-r,-n),a.a=i,a.b=l,a.c=d,a.d=h,t.style.transform=a.toString()}function f3(e,t){const{backgroundColor:n,width:r,height:o,style:a}=t,i=e.style;if(n&&i.setProperty("background-color",n,"important"),r&&i.setProperty("width",`${r}px`,"important"),o&&i.setProperty("height",`${o}px`,"important"),a)for(const l in a)i[l]=a[l]}const h3=/^[\w-:]+$/;async function ji(e,t,n=!1,r){const{ownerDocument:o,ownerWindow:a,fontFamilies:i,onCloneEachNode:l}=t;if(o&&Tw(e))return r&&/\S/.test(e.data)&&r(e.data),o.createTextNode(e.data);if(o&&a&&nn(e)&&(ao(e)||mo(e))){const h=await n3(e,t);if(t.isEnable("removeAbnormalAttributes")){const _=h.getAttributeNames();for(let E=_.length,k=0;k<E;k++){const S=_[k];h3.test(S)||h.removeAttribute(S)}}const p=t.currentNodeStyle=s3(e,h,n,t);n&&f3(h,t);let y=!1;if(t.isEnable("copyScrollbar")){const _=[p.get("overflow-x")?.[0],p.get("overflow-y")?.[0]];y=_.includes("scroll")||(_.includes("auto")||_.includes("overlay"))&&(e.scrollHeight>e.clientHeight||e.scrollWidth>e.clientWidth)}const v=p.get("text-transform")?.[0],x=Lf(p.get("font-family")?.[0]),w=x?_=>{v==="uppercase"?_=_.toUpperCase():v==="lowercase"?_=_.toLowerCase():v==="capitalize"&&(_=_[0].toUpperCase()+_.substring(1)),x.forEach(E=>{let k=i.get(E);k||i.set(E,k=new Set),_.split("").forEach(S=>k.add(S))})}:void 0;return c3(e,h,y,t,w),i3(e,h),ya(e)||await nl(e,h,t,w),await l?.(h),h}const d=e.cloneNode(!1);return await nl(e,d,t),await l?.(d),d}function p3(e){if(e.ownerDocument=void 0,e.ownerWindow=void 0,e.svgStyleElement=void 0,e.svgDefsElement=void 0,e.svgStyles.clear(),e.defaultComputedStyles.clear(),e.sandbox){try{e.sandbox.remove()}catch(t){e.log.warn("Failed to destroyContext",t)}e.sandbox=void 0}e.workers=[],e.fontFamilies.clear(),e.fontCssTexts.clear(),e.requests.clear(),e.tasks=[],e.shadowRoots=[]}function m3(e){const{url:t,timeout:n,responseType:r,...o}=e,a=new AbortController,i=n?setTimeout(()=>a.abort(),n):void 0;return fetch(t,{signal:a.signal,...o}).then(l=>{if(!l.ok)throw new Error("Failed fetch, not 2xx response",{cause:l});switch(r){case"arrayBuffer":return l.arrayBuffer();case"dataUrl":return l.blob().then(Hw);case"text":default:return l.text()}}).finally(()=>clearTimeout(i))}function io(e,t){const{url:n,requestType:r="text",responseType:o="text",imageDom:a}=t;let i=n;const{timeout:l,acceptOfImage:d,requests:h,fetchFn:p,fetch:{requestInit:y,bypassingCache:v,placeholderImage:x},font:w,workers:_,fontFamilies:E}=e;r==="image"&&(ta||Ei)&&e.drawImageCount++;let k=h.get(n);if(!k){v&&v instanceof RegExp&&v.test(i)&&(i+=(/\?/.test(i)?"&":"?")+new Date().getTime());const S=r.startsWith("font")&&w&&w.minify,A=new Set;S&&r.split(";")[1].split(",").forEach(V=>{E.has(V)&&E.get(V).forEach(Y=>A.add(Y))});const T=S&&A.size,$={url:i,timeout:l,responseType:T?"arrayBuffer":o,headers:r==="image"?{accept:d}:void 0,...y};k={type:r,resolve:void 0,reject:void 0,response:null},k.response=(async()=>{if(p&&r==="image"){const U=await p(n);if(U)return U}return!ta&&n.startsWith("http")&&_.length?new Promise((U,V)=>{_[h.size&_.length-1].postMessage({rawUrl:n,...$}),k.resolve=U,k.reject=V}):m3($)})().catch(U=>{if(h.delete(n),r==="image"&&x)return e.log.warn("Failed to fetch image base64, trying to use placeholder image",i),typeof x=="string"?x:x(a);throw U}),h.set(n,k)}return k.response}async function Uf(e,t,n,r){if(!Kf(e))return e;for(const[o,a]of g3(e,t))try{const i=await io(n,{url:a,requestType:r?"image":"text",responseType:"dataUrl"});e=e.replace(b3(o),`$1${i}$3`)}catch(i){n.log.warn("Failed to fetch css data url",o,i)}return e}function Kf(e){return/url\((['"]?)([^'"]+?)\1\)/.test(e)}const Hf=/url\((['"]?)([^'"]+?)\1\)/g;function g3(e,t){const n=[];return e.replace(Hf,(r,o,a)=>(n.push([a,If(a,t)]),r)),n.filter(([r])=>!Is(r))}function b3(e){const t=e.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1");return new RegExp(`(url\\(['"]?)(${t})(['"]?\\))`,"g")}const x3=["background-image","border-image-source","-webkit-border-image","-webkit-mask-image","list-style-image"];function y3(e,t){return x3.map(n=>{const r=e.getPropertyValue(n);return!r||r==="none"?null:((ta||Ei)&&t.drawImageCount++,Uf(r,null,t,!0).then(o=>{!o||r===o||e.setProperty(n,o,e.getPropertyPriority(n))}))}).filter(Boolean)}function v3(e,t){if(yr(e)){const n=e.currentSrc||e.src;if(!Is(n))return[io(t,{url:n,imageDom:e,requestType:"image",responseType:"dataUrl"}).then(r=>{r&&(e.srcset="",e.dataset.originalSrc=n,e.src=r||"")})];(ta||Ei)&&t.drawImageCount++}else if(mo(e)&&!Is(e.href.baseVal)){const n=e.href.baseVal;return[io(t,{url:n,imageDom:e,requestType:"image",responseType:"dataUrl"}).then(r=>{r&&(e.dataset.originalSrc=n,e.href.baseVal=r||"")})]}return[]}function w3(e,t){const{ownerDocument:n,svgDefsElement:r}=t,o=e.getAttribute("href")??e.getAttribute("xlink:href");if(!o)return[];const[a,i]=o.split("#");if(i){const l=`#${i}`,d=t.shadowRoots.reduce((h,p)=>h??p.querySelector(`svg ${l}`),n?.querySelector(`svg ${l}`));if(a&&e.setAttribute("href",l),r?.querySelector(l))return[];if(d)return r?.appendChild(d.cloneNode(!0)),[];if(a)return[io(t,{url:a,responseType:"text"}).then(h=>{r?.insertAdjacentHTML("beforeend",h)})]}return[]}function Wf(e,t){const{tasks:n}=t;nn(e)&&((yr(e)||Ff(e))&&n.push(...v3(e,t)),Dw(e)&&n.push(...w3(e,t))),ao(e)&&n.push(...y3(e.style,t)),e.childNodes.forEach(r=>{Wf(r,t)})}async function C3(e,t){const{ownerDocument:n,svgStyleElement:r,fontFamilies:o,fontCssTexts:a,tasks:i,font:l}=t;if(!(!n||!r||!o.size))if(l&&l.cssText){const d=ol(l.cssText,t);r.appendChild(n.createTextNode(`${d}
`))}else{const d=Array.from(n.styleSheets).filter(p=>{try{return"cssRules"in p&&!!p.cssRules.length}catch(y){return t.log.warn(`Error while reading CSS rules from ${p.href}`,y),!1}});await Promise.all(d.flatMap(p=>Array.from(p.cssRules).map(async(y,v)=>{if(Aw(y)){let x=v+1;const w=y.href;let _="";try{_=await io(t,{url:w,requestType:"text",responseType:"text"})}catch(k){t.log.warn(`Error fetch remote css import from ${w}`,k)}const E=_.replace(Hf,(k,S,A)=>k.replace(A,If(A,w)));for(const k of k3(E))try{p.insertRule(k,k.startsWith("@import")?x+=1:p.cssRules.length)}catch(S){t.log.warn("Error inserting rule from remote css import",{rule:k,error:S})}}}))),d.flatMap(p=>Array.from(p.cssRules)).filter(p=>jw(p)&&Kf(p.style.getPropertyValue("src"))&&Lf(p.style.getPropertyValue("font-family"))?.some(y=>o.has(y))).forEach(p=>{const y=p,v=a.get(y.cssText);v?r.appendChild(n.createTextNode(`${v}
`)):i.push(Uf(y.cssText,y.parentStyleSheet?y.parentStyleSheet.href:null,t).then(x=>{x=ol(x,t),a.set(y.cssText,x),r.appendChild(n.createTextNode(`${x}
`))}))})}}const _3=/(\/\*[\s\S]*?\*\/)/g,rl=/((@.*?keyframes [\s\S]*?){([\s\S]*?}\s*?)})/gi;function k3(e){if(e==null)return[];const t=[];let n=e.replace(_3,"");for(;;){const a=rl.exec(n);if(!a)break;t.push(a[0])}n=n.replace(rl,"");const r=/@import[\s\S]*?url\([^)]*\)[\s\S]*?;/gi,o=new RegExp("((\\s*?(?:\\/\\*[\\s\\S]*?\\*\\/)?\\s*?@media[\\s\\S]*?){([\\s\\S]*?)}\\s*?})|(([\\s\\S]*?){([\\s\\S]*?)})","gi");for(;;){let a=r.exec(n);if(a)o.lastIndex=r.lastIndex;else if(a=o.exec(n),a)r.lastIndex=o.lastIndex;else break;t.push(a[0])}return t}const S3=/url\([^)]+\)\s*format\((["']?)([^"']+)\1\)/g,E3=/src:\s*(?:url\([^)]+\)\s*format\([^)]+\)[,;]\s*)+/g;function ol(e,t){const{font:n}=t,r=n?n?.preferredFormat:void 0;return r?e.replace(E3,o=>{for(;;){const[a,,i]=S3.exec(o)||[];if(!i)return"";if(i===r)return`src: ${a};`}}):e}async function j3(e,t){const n=await Ca(e,t);if(nn(n.node)&&mo(n.node))return n.node;const{ownerDocument:r,log:o,tasks:a,svgStyleElement:i,svgDefsElement:l,svgStyles:d,font:h,progress:p,autoDestruct:y,onCloneNode:v,onEmbedNode:x,onCreateForeignObjectSvg:w}=n;o.time("clone node");const _=await ji(n.node,n,!0);if(i&&r){let T="";d.forEach(($,U)=>{T+=`${$.join(`,
`)} {
  ${U}
}
`}),i.appendChild(r.createTextNode(T))}o.timeEnd("clone node"),await v?.(_),h!==!1&&nn(_)&&(o.time("embed web font"),await C3(_,n),o.timeEnd("embed web font")),o.time("embed node"),Wf(_,n);const E=a.length;let k=0;const S=async()=>{for(;;){const T=a.pop();if(!T)break;try{await T}catch($){n.log.warn("Failed to run task",$)}p?.(++k,E)}};p?.(k,E),await Promise.all([...Array.from({length:4})].map(S)),o.timeEnd("embed node"),await x?.(_);const A=A3(_,n);return l&&A.insertBefore(l,A.children[0]),i&&A.insertBefore(i,A.children[0]),y&&p3(n),await w?.(A),A}function A3(e,t){const{width:n,height:r}=t,o=qw(n,r,e.ownerDocument),a=o.ownerDocument.createElementNS(o.namespaceURI,"foreignObject");return a.setAttributeNS(null,"x","0%"),a.setAttributeNS(null,"y","0%"),a.setAttributeNS(null,"width","100%"),a.setAttributeNS(null,"height","100%"),a.append(e),o.appendChild(a),o}async function D3(e,t){const n=await Ca(e,t),r=await j3(n),o=Uw(r,n.isEnable("removeControlCharacter"));n.autoDestruct||(n.svgStyleElement=zf(n.ownerDocument),n.svgDefsElement=n.ownerDocument?.createElementNS(wa,"defs"),n.svgStyles.clear());const a=fr(o,r.ownerDocument);return await Xw(a,n)}async function N3(e,t){const n=await Ca(e,t),{log:r,quality:o,type:a,dpi:i}=n,l=await D3(n);r.time("canvas to data url");let d=l.toDataURL(a,o);if(["image/png","image/jpeg"].includes(a)&&i&&kw&&Sw){const[h,p]=d.split(",");let y=0,v=!1;if(a==="image/png"){const A=Cw(p);A>=0?(y=Math.ceil((A+28)/3)*4,v=!0):y=33/3*4}else a==="image/jpeg"&&(y=18/3*4);const x=p.substring(0,y),w=p.substring(y),_=window.atob(x),E=new Uint8Array(_.length);for(let A=0;A<E.length;A++)E[A]=_.charCodeAt(A);const k=a==="image/png"?xw(E,i,v):pw(E,i),S=window.btoa(String.fromCharCode(...k));d=[h,",",S,w].join("")}return r.timeEnd("canvas to data url"),d}async function T3(e,t){return N3(await Ca(e,{...t,type:"image/png"}))}function M3(e,t=30){if(!e||e.trim()==="")return"untitled-card";let n=e.replace(/[^\w\s\u4e00-\u9fff\u3400-\u4dbf\u20000-\u2a6df\u2a700-\u2b73f\u2b740-\u2b81f\u2b820-\u2ceaf\uf900-\ufaff\u3300-\u33ff-]/g,"").replace(/\s+/g," ").trim();return n?(n.length>t&&(n=n.substring(0,t).trim()),n):"untitled-card"}async function P3(e,t={}){const{quality:n=1,pixelRatio:r=2,backgroundColor:o="transparent",includeStyles:a=!0}=t;try{const i=await T3(e,{quality:n,pixelRatio:r,backgroundColor:o,style:a?void 0:{},filter:d=>{if(d instanceof HTMLElement){const h=d.classList;return!h.contains("tooltip")&&!h.contains("dropdown-menu")&&!h.contains("popover")}return!0}});return await(await fetch(i)).blob()}catch(i){throw console.error("Screenshot capture failed:",i),new Error("Failed to capture screenshot")}}function R3(e,t){const n=URL.createObjectURL(e),r=document.createElement("a");r.href=n,r.download=`${t}.png`,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(n)}async function F3(e,t,n={}){const r=M3(t);return{blob:await P3(e,{quality:1,pixelRatio:2,backgroundColor:"transparent",...n}),fileName:r}}function I3(e={}){const[t,n]=g.useState(!1),[r,o]=g.useState(!1),[a,i]=g.useState(null),[l,d]=g.useState(!1),[h,p]=g.useState(null),y=g.useCallback(async(_,E)=>{n(!0),p(null);try{const{blob:k,fileName:S}=await F3(_,E),A=URL.createObjectURL(k);i({blob:k,fileName:S,previewUrl:A}),d(!0)}catch(k){const S=k instanceof Error?k:new Error("Screenshot failed");p(S.message),e.onError?.(S)}finally{n(!1)}},[e]),v=g.useCallback(async()=>{if(a){o(!0);try{await new Promise(_=>setTimeout(_,500)),R3(a.blob,a.fileName),e.onSuccess?.(a.fileName),d(!1),setTimeout(()=>{a.previewUrl&&URL.revokeObjectURL(a.previewUrl),i(null)},100)}catch(_){const E=_ instanceof Error?_:new Error("Download failed");p(E.message),e.onError?.(E)}finally{o(!1)}}},[a,e]),x=g.useCallback(()=>{d(!1),setTimeout(()=>{a?.previewUrl&&URL.revokeObjectURL(a.previewUrl),i(null)},100)},[a]),w=g.useCallback(()=>{p(null)},[]);return{isCapturing:t,isDownloading:r,showPreview:l,previewData:a,error:h,captureScreenshot:y,confirmDownload:v,cancelPreview:x,clearError:w}}function O3({isOpen:e,onClose:t,onConfirm:n,previewUrl:r,fileName:o,isDownloading:a=!1}){const[i,l]=g.useState(!1),d=()=>{l(!0),setTimeout(()=>{n(),l(!1)},800)};return u.jsx(Gn,{open:e,onOpenChange:t,children:u.jsxs(Rn,{className:"max-w-2xl max-h-[90vh] overflow-hidden",children:[u.jsx(kr,{children:u.jsxs(Er,{className:"flex items-center gap-2",children:[u.jsx(ks,{className:"h-5 w-5"}),"Screenshot Preview"]})}),u.jsxs("div",{className:"space-y-4",children:[u.jsx("div",{className:"flex items-center justify-between",children:u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsxs(Tt,{variant:"secondary",className:"font-mono text-xs",children:[o,".png"]}),u.jsx(Tt,{variant:"outline",className:"text-xs",children:"High Quality"})]})}),u.jsx("div",{className:"relative bg-checkered rounded-lg overflow-hidden border",children:r?u.jsxs("div",{className:"relative",children:[u.jsx("img",{src:r,alt:"Screenshot preview",className:re("w-full h-auto max-h-[60vh] object-contain transition-all duration-300",i&&"scale-95 opacity-80")}),i&&u.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-500/20 to-purple-600/20 flex items-center justify-center",children:u.jsx("div",{className:"bg-white/90 backdrop-blur-sm rounded-full p-6 shadow-lg animate-pulse",children:u.jsxs("div",{className:"relative",children:[u.jsx(Vr,{className:"h-8 w-8 text-blue-600 animate-bounce"}),u.jsx(vu,{className:"h-4 w-4 text-purple-500 absolute -top-1 -right-1 animate-spin"})]})})})]}):u.jsx("div",{className:"h-64 flex items-center justify-center text-muted-foreground",children:u.jsxs("div",{className:"text-center space-y-2",children:[u.jsx(ks,{className:"h-12 w-12 mx-auto opacity-50"}),u.jsx("p",{children:"Loading preview..."})]})})}),a&&u.jsxs("div",{className:"flex items-center justify-center gap-2 text-sm text-muted-foreground",children:[u.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-blue-500 border-t-transparent"}),"Preparing download..."]})]}),u.jsxs(Sr,{className:"gap-2",children:[u.jsxs(_e,{variant:"outline",onClick:t,disabled:i||a,children:[u.jsx(Zn,{className:"h-4 w-4 mr-2"}),"Cancel"]}),u.jsx(_e,{onClick:d,disabled:i||a||!r,className:re("relative overflow-hidden",i&&"bg-gradient-to-r from-blue-500 to-purple-600"),children:i?u.jsxs(u.Fragment,{children:[u.jsx(vu,{className:"h-4 w-4 mr-2 animate-spin"}),"Downloading..."]}):u.jsxs(u.Fragment,{children:[u.jsx(Vr,{className:"h-4 w-4 mr-2"}),"Download PNG"]})})]})]})})}const L3=`
.bg-checkered {
  background-image: 
    linear-gradient(45deg, #f1f5f9 25%, transparent 25%), 
    linear-gradient(-45deg, #f1f5f9 25%, transparent 25%), 
    linear-gradient(45deg, transparent 75%, #f1f5f9 75%), 
    linear-gradient(-45deg, transparent 75%, #f1f5f9 75%);
  background-size: 20px 20px;
  background-position: 0 0, 0 10px, 10px -10px, -10px 0px;
}
`;if(typeof document<"u"){const e=document.createElement("style");e.textContent=L3,document.head.appendChild(e)}const z3=1,B3=1e6;let gs=0;function $3(){return gs=(gs+1)%Number.MAX_SAFE_INTEGER,gs.toString()}const bs=new Map,al=e=>{if(bs.has(e))return;const t=setTimeout(()=>{bs.delete(e),Yr({type:"REMOVE_TOAST",toastId:e})},B3);bs.set(e,t)},q3=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,z3)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(n=>n.id===t.toast.id?{...n,...t.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=t;return n?al(n):e.toasts.forEach(r=>{al(r.id)}),{...e,toasts:e.toasts.map(r=>r.id===n||n===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(n=>n.id!==t.toastId)}}},Ko=[];let Ho={toasts:[]};function Yr(e){Ho=q3(Ho,e),Ko.forEach(t=>{t(Ho)})}function U3({...e}){const t=$3(),n=o=>Yr({type:"UPDATE_TOAST",toast:{...o,id:t}}),r=()=>Yr({type:"DISMISS_TOAST",toastId:t});return Yr({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:o=>{o||r()}}}),{id:t,dismiss:r,update:n}}function K3(){const[e,t]=g.useState(Ho);return g.useEffect(()=>(Ko.push(t),()=>{const n=Ko.indexOf(t);n>-1&&Ko.splice(n,1)}),[e]),{...e,toast:U3,dismiss:n=>Yr({type:"DISMISS_TOAST",toastId:n})}}var Ai="Avatar",[H3,v_]=rn(Ai),[W3,Vf]=H3(Ai),Gf=g.forwardRef((e,t)=>{const{__scopeAvatar:n,...r}=e,[o,a]=g.useState("idle");return u.jsx(W3,{scope:n,imageLoadingStatus:o,onImageLoadingStatusChange:a,children:u.jsx($e.span,{...r,ref:t})})});Gf.displayName=Ai;var Yf="AvatarImage",Zf=g.forwardRef((e,t)=>{const{__scopeAvatar:n,src:r,onLoadingStatusChange:o=()=>{},...a}=e,i=Vf(Yf,n),l=V3(r,a.referrerPolicy),d=Nt(h=>{o(h),i.onImageLoadingStatusChange(h)});return Wt(()=>{l!=="idle"&&d(l)},[l,d]),l==="loaded"?u.jsx($e.img,{...a,ref:t,src:r}):null});Zf.displayName=Yf;var Xf="AvatarFallback",Qf=g.forwardRef((e,t)=>{const{__scopeAvatar:n,delayMs:r,...o}=e,a=Vf(Xf,n),[i,l]=g.useState(r===void 0);return g.useEffect(()=>{if(r!==void 0){const d=window.setTimeout(()=>l(!0),r);return()=>window.clearTimeout(d)}},[r]),i&&a.imageLoadingStatus!=="loaded"?u.jsx($e.span,{...o,ref:t}):null});Qf.displayName=Xf;function V3(e,t){const[n,r]=g.useState("idle");return Wt(()=>{if(!e){r("error");return}let o=!0;const a=new window.Image,i=l=>()=>{o&&r(l)};return r("loading"),a.onload=i("loaded"),a.onerror=i("error"),a.src=e,t&&(a.referrerPolicy=t),()=>{o=!1}},[e,t]),n}var Jf=Gf,e0=Zf,t0=Qf;const n0=g.forwardRef(({className:e,...t},n)=>u.jsx(Jf,{ref:n,className:re("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",e),...t}));n0.displayName=Jf.displayName;const r0=g.forwardRef(({className:e,...t},n)=>u.jsx(e0,{ref:n,className:re("aspect-square h-full w-full",e),...t}));r0.displayName=e0.displayName;const o0=g.forwardRef(({className:e,...t},n)=>u.jsx(t0,{ref:n,className:re("flex h-full w-full items-center justify-center rounded-full bg-muted",e),...t}));o0.displayName=t0.displayName;const a0=["from-violet-500 to-pink-500","from-blue-500 to-purple-600","from-green-500 to-teal-600","from-orange-500 to-red-600","from-pink-500 to-rose-600","from-indigo-500 to-blue-600","from-yellow-500 to-orange-600","from-purple-500 to-pink-600","from-teal-500 to-green-600","from-red-500 to-pink-600","from-cyan-500 to-blue-600"];function G3(e){let t=0;for(let n=0;n<e.length;n++){const r=e.charCodeAt(n);t=(t<<5)-t+r,t=t&t}return Math.abs(t)%a0.length}function Y3(e){return e?e.username?e.username.charAt(0).toUpperCase():e.email?e.email.charAt(0).toUpperCase():"?":"?"}function Z3(e){return e&&(e.username||e.email)||"anonymous"}function s0({user:e,size:t="md",className:n,onClick:r,showHoverEffect:o=!0}){const a=Y3(e),i=Z3(e),l=G3(i),d=a0[l],p=re({sm:"h-6 w-6 text-xs",md:"h-8 w-8 text-sm",lg:"h-10 w-10 text-base"}[t],o&&r&&"cursor-pointer transition-transform hover:scale-105",n),y=re("bg-gradient-to-br text-white font-semibold flex items-center justify-center",d,o&&r&&"transition-all duration-200 hover:shadow-md");return u.jsxs(n0,{className:p,onClick:r,children:[u.jsx(r0,{src:e?.avatar_url,alt:e?.username||e?.email||"User"}),u.jsx(o0,{className:y,children:a})]})}var Di="ContextMenu",[X3,w_]=rn(Di,[ia]),vt=ia(),[Q3,i0]=X3(Di),u0=e=>{const{__scopeContextMenu:t,children:n,onOpenChange:r,dir:o,modal:a=!0}=e,[i,l]=g.useState(!1),d=vt(t),h=Nt(r),p=g.useCallback(y=>{l(y),h(y)},[h]);return u.jsx(Q3,{scope:t,open:i,onOpenChange:p,modal:a,children:u.jsx(Cc,{...d,dir:o,open:i,onOpenChange:p,modal:a,children:n})})};u0.displayName=Di;var l0="ContextMenuTrigger",c0=g.forwardRef((e,t)=>{const{__scopeContextMenu:n,disabled:r=!1,...o}=e,a=i0(l0,n),i=vt(n),l=g.useRef({x:0,y:0}),d=g.useRef({getBoundingClientRect:()=>DOMRect.fromRect({width:0,height:0,...l.current})}),h=g.useRef(0),p=g.useCallback(()=>window.clearTimeout(h.current),[]),y=v=>{l.current={x:v.clientX,y:v.clientY},a.onOpenChange(!0)};return g.useEffect(()=>p,[p]),g.useEffect(()=>void(r&&p()),[r,p]),u.jsxs(u.Fragment,{children:[u.jsx(_c,{...i,virtualRef:d}),u.jsx($e.span,{"data-state":a.open?"open":"closed","data-disabled":r?"":void 0,...o,ref:t,style:{WebkitTouchCallout:"none",...e.style},onContextMenu:r?e.onContextMenu:pe(e.onContextMenu,v=>{p(),y(v),v.preventDefault()}),onPointerDown:r?e.onPointerDown:pe(e.onPointerDown,$o(v=>{p(),h.current=window.setTimeout(()=>y(v),700)})),onPointerMove:r?e.onPointerMove:pe(e.onPointerMove,$o(p)),onPointerCancel:r?e.onPointerCancel:pe(e.onPointerCancel,$o(p)),onPointerUp:r?e.onPointerUp:pe(e.onPointerUp,$o(p))})]})});c0.displayName=l0;var J3="ContextMenuPortal",d0=e=>{const{__scopeContextMenu:t,...n}=e,r=vt(t);return u.jsx(kc,{...r,...n})};d0.displayName=J3;var f0="ContextMenuContent",h0=g.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,o=i0(f0,n),a=vt(n),i=g.useRef(!1);return u.jsx(Sc,{...a,...r,ref:t,side:"right",sideOffset:2,align:"start",onCloseAutoFocus:l=>{e.onCloseAutoFocus?.(l),!l.defaultPrevented&&i.current&&l.preventDefault(),i.current=!1},onInteractOutside:l=>{e.onInteractOutside?.(l),!l.defaultPrevented&&!o.modal&&(i.current=!0)},style:{...e.style,"--radix-context-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-context-menu-content-available-width":"var(--radix-popper-available-width)","--radix-context-menu-content-available-height":"var(--radix-popper-available-height)","--radix-context-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-context-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});h0.displayName=f0;var e6="ContextMenuGroup",t6=g.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,o=vt(n);return u.jsx(Ec,{...o,...r,ref:t})});t6.displayName=e6;var n6="ContextMenuLabel",p0=g.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,o=vt(n);return u.jsx(jc,{...o,...r,ref:t})});p0.displayName=n6;var r6="ContextMenuItem",m0=g.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,o=vt(n);return u.jsx(Ac,{...o,...r,ref:t})});m0.displayName=r6;var o6="ContextMenuCheckboxItem",g0=g.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,o=vt(n);return u.jsx(Dc,{...o,...r,ref:t})});g0.displayName=o6;var a6="ContextMenuRadioGroup",s6=g.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,o=vt(n);return u.jsx(Nc,{...o,...r,ref:t})});s6.displayName=a6;var i6="ContextMenuRadioItem",b0=g.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,o=vt(n);return u.jsx(Tc,{...o,...r,ref:t})});b0.displayName=i6;var u6="ContextMenuItemIndicator",x0=g.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,o=vt(n);return u.jsx(Mc,{...o,...r,ref:t})});x0.displayName=u6;var l6="ContextMenuSeparator",y0=g.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,o=vt(n);return u.jsx(Pc,{...o,...r,ref:t})});y0.displayName=l6;var c6="ContextMenuArrow",d6=g.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,o=vt(n);return u.jsx(Rc,{...o,...r,ref:t})});d6.displayName=c6;var f6="ContextMenuSubTrigger",v0=g.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,o=vt(n);return u.jsx(Fc,{...o,...r,ref:t})});v0.displayName=f6;var h6="ContextMenuSubContent",w0=g.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,o=vt(n);return u.jsx(Ic,{...o,...r,ref:t,style:{...e.style,"--radix-context-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-context-menu-content-available-width":"var(--radix-popper-available-width)","--radix-context-menu-content-available-height":"var(--radix-popper-available-height)","--radix-context-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-context-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});w0.displayName=h6;function $o(e){return t=>t.pointerType!=="mouse"?e(t):void 0}var p6=u0,m6=c0,g6=d0,C0=h0,_0=p0,k0=m0,S0=g0,E0=b0,j0=x0,A0=y0,D0=v0,N0=w0;const T0=p6,M0=m6,b6=g.forwardRef(({className:e,inset:t,children:n,...r},o)=>u.jsxs(D0,{ref:o,className:re("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground",t&&"pl-8",e),...r,children:[n,u.jsx(ei,{className:"ml-auto h-4 w-4"})]}));b6.displayName=D0.displayName;const x6=g.forwardRef(({className:e,...t},n)=>u.jsx(N0,{ref:n,className:re("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...t}));x6.displayName=N0.displayName;const Ni=g.forwardRef(({className:e,...t},n)=>u.jsx(g6,{children:u.jsx(C0,{ref:n,className:re("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...t})}));Ni.displayName=C0.displayName;const hr=g.forwardRef(({className:e,inset:t,...n},r)=>u.jsx(k0,{ref:r,className:re("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t&&"pl-8",e),...n}));hr.displayName=k0.displayName;const y6=g.forwardRef(({className:e,children:t,checked:n,...r},o)=>u.jsxs(S0,{ref:o,className:re("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),checked:n,...r,children:[u.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:u.jsx(j0,{children:u.jsx(Mn,{className:"h-4 w-4"})})}),t]}));y6.displayName=S0.displayName;const v6=g.forwardRef(({className:e,children:t,...n},r)=>u.jsxs(E0,{ref:r,className:re("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...n,children:[u.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:u.jsx(j0,{children:u.jsx($l,{className:"h-2 w-2 fill-current"})})}),t]}));v6.displayName=E0.displayName;const w6=g.forwardRef(({className:e,inset:t,...n},r)=>u.jsx(_0,{ref:r,className:re("px-2 py-1.5 text-sm font-semibold text-foreground",t&&"pl-8",e),...n}));w6.displayName=_0.displayName;const P0=g.forwardRef(({className:e,...t},n)=>u.jsx(A0,{ref:n,className:re("-mx-1 my-1 h-px bg-border",e),...t}));P0.displayName=A0.displayName;function sl({children:e,folderId:t,folderName:n,onRename:r,onDelete:o,onCreateSubfolder:a,disabled:i=!1}){return i?u.jsx(u.Fragment,{children:e}):u.jsxs(T0,{children:[u.jsx(M0,{asChild:!0,children:e}),u.jsxs(Ni,{className:"w-48",children:[u.jsxs(hr,{onClick:()=>r(t),children:[u.jsx(Hl,{className:"h-4 w-4 mr-2"}),"Rename Folder"]}),u.jsxs(hr,{onClick:()=>a(t),children:[u.jsx(Ss,{className:"h-4 w-4 mr-2"}),"New Subfolder"]}),u.jsx(P0,{}),u.jsxs(hr,{onClick:()=>o(t),className:"text-destructive focus:text-destructive",children:[u.jsx(ti,{className:"h-4 w-4 mr-2"}),"Delete Folder"]})]})]})}var C6="VisuallyHidden",R0=g.forwardRef((e,t)=>u.jsx($e.span,{...e,ref:t,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...e.style}}));R0.displayName=C6;var _6=[" ","Enter","ArrowUp","ArrowDown"],k6=[" ","Enter"],go="Select",[_a,ka,S6]=aa(go),[Ar,C_]=rn(go,[S6,oa]),Sa=oa(),[E6,On]=Ar(go),[j6,A6]=Ar(go),F0=e=>{const{__scopeSelect:t,children:n,open:r,defaultOpen:o,onOpenChange:a,value:i,defaultValue:l,onValueChange:d,dir:h,name:p,autoComplete:y,disabled:v,required:x,form:w}=e,_=Sa(t),[E,k]=g.useState(null),[S,A]=g.useState(null),[T,$]=g.useState(!1),U=uo(h),[V=!1,Y]=Xr({prop:r,defaultProp:o,onChange:a}),[se,ge]=Xr({prop:i,defaultProp:l,onChange:d}),G=g.useRef(null),X=E?w||!!E.closest("form"):!0,[Ee,Te]=g.useState(new Set),De=Array.from(Ee).map(be=>be.props.value).join(";");return u.jsx(yl,{..._,children:u.jsxs(E6,{required:x,scope:t,trigger:E,onTriggerChange:k,valueNode:S,onValueNodeChange:A,valueNodeHasChildren:T,onValueNodeHasChildrenChange:$,contentId:mr(),value:se,onValueChange:ge,open:V,onOpenChange:Y,dir:U,triggerPointerDownPosRef:G,disabled:v,children:[u.jsx(_a.Provider,{scope:t,children:u.jsx(j6,{scope:e.__scopeSelect,onNativeOptionAdd:g.useCallback(be=>{Te(Pe=>new Set(Pe).add(be))},[]),onNativeOptionRemove:g.useCallback(be=>{Te(Pe=>{const je=new Set(Pe);return je.delete(be),je})},[]),children:n})}),X?u.jsxs(sh,{"aria-hidden":!0,required:x,tabIndex:-1,name:p,autoComplete:y,value:se,onChange:be=>ge(be.target.value),disabled:v,form:w,children:[se===void 0?u.jsx("option",{value:""}):null,Array.from(Ee)]},De):null]})})};F0.displayName=go;var I0="SelectTrigger",O0=g.forwardRef((e,t)=>{const{__scopeSelect:n,disabled:r=!1,...o}=e,a=Sa(n),i=On(I0,n),l=i.disabled||r,d=We(t,i.onTriggerChange),h=ka(n),p=g.useRef("touch"),[y,v,x]=ih(_=>{const E=h().filter(A=>!A.disabled),k=E.find(A=>A.value===i.value),S=uh(E,_,k);S!==void 0&&i.onValueChange(S.value)}),w=_=>{l||(i.onOpenChange(!0),x()),_&&(i.triggerPointerDownPosRef.current={x:Math.round(_.pageX),y:Math.round(_.pageY)})};return u.jsx(fl,{asChild:!0,...a,children:u.jsx($e.button,{type:"button",role:"combobox","aria-controls":i.contentId,"aria-expanded":i.open,"aria-required":i.required,"aria-autocomplete":"none",dir:i.dir,"data-state":i.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":ah(i.value)?"":void 0,...o,ref:d,onClick:pe(o.onClick,_=>{_.currentTarget.focus(),p.current!=="mouse"&&w(_)}),onPointerDown:pe(o.onPointerDown,_=>{p.current=_.pointerType;const E=_.target;E.hasPointerCapture(_.pointerId)&&E.releasePointerCapture(_.pointerId),_.button===0&&_.ctrlKey===!1&&_.pointerType==="mouse"&&(w(_),_.preventDefault())}),onKeyDown:pe(o.onKeyDown,_=>{const E=y.current!=="";!(_.ctrlKey||_.altKey||_.metaKey)&&_.key.length===1&&v(_.key),!(E&&_.key===" ")&&_6.includes(_.key)&&(w(),_.preventDefault())})})})});O0.displayName=I0;var L0="SelectValue",z0=g.forwardRef((e,t)=>{const{__scopeSelect:n,className:r,style:o,children:a,placeholder:i="",...l}=e,d=On(L0,n),{onValueNodeHasChildrenChange:h}=d,p=a!==void 0,y=We(t,d.onValueNodeChange);return Wt(()=>{h(p)},[h,p]),u.jsx($e.span,{...l,ref:y,style:{pointerEvents:"none"},children:ah(d.value)?u.jsx(u.Fragment,{children:i}):a})});z0.displayName=L0;var D6="SelectIcon",B0=g.forwardRef((e,t)=>{const{__scopeSelect:n,children:r,...o}=e;return u.jsx($e.span,{"aria-hidden":!0,...o,ref:t,children:r||""})});B0.displayName=D6;var N6="SelectPortal",$0=e=>u.jsx(dl,{asChild:!0,...e});$0.displayName=N6;var Yn="SelectContent",q0=g.forwardRef((e,t)=>{const n=On(Yn,e.__scopeSelect),[r,o]=g.useState();if(Wt(()=>{o(new DocumentFragment)},[]),!n.open){const a=r;return a?vr.createPortal(u.jsx(U0,{scope:e.__scopeSelect,children:u.jsx(_a.Slot,{scope:e.__scopeSelect,children:u.jsx("div",{children:e.children})})}),a):null}return u.jsx(K0,{...e,ref:t})});q0.displayName=Yn;var Ht=10,[U0,Ln]=Ar(Yn),T6="SelectContentImpl",K0=g.forwardRef((e,t)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:o,onEscapeKeyDown:a,onPointerDownOutside:i,side:l,sideOffset:d,align:h,alignOffset:p,arrowPadding:y,collisionBoundary:v,collisionPadding:x,sticky:w,hideWhenDetached:_,avoidCollisions:E,...k}=e,S=On(Yn,n),[A,T]=g.useState(null),[$,U]=g.useState(null),V=We(t,Z=>T(Z)),[Y,se]=g.useState(null),[ge,G]=g.useState(null),X=ka(n),[Ee,Te]=g.useState(!1),De=g.useRef(!1);g.useEffect(()=>{if(A)return xl(A)},[A]),hl();const be=g.useCallback(Z=>{const[Ie,...ue]=X().map(ve=>ve.ref.current),[qe]=ue.slice(-1),Me=document.activeElement;for(const ve of Z)if(ve===Me||(ve?.scrollIntoView({block:"nearest"}),ve===Ie&&$&&($.scrollTop=0),ve===qe&&$&&($.scrollTop=$.scrollHeight),ve?.focus(),document.activeElement!==Me))return},[X,$]),Pe=g.useCallback(()=>be([Y,A]),[be,Y,A]);g.useEffect(()=>{Ee&&Pe()},[Ee,Pe]);const{onOpenChange:je,triggerPointerDownPosRef:q}=S;g.useEffect(()=>{if(A){let Z={x:0,y:0};const Ie=qe=>{Z={x:Math.abs(Math.round(qe.pageX)-(q.current?.x??0)),y:Math.abs(Math.round(qe.pageY)-(q.current?.y??0))}},ue=qe=>{Z.x<=10&&Z.y<=10?qe.preventDefault():A.contains(qe.target)||je(!1),document.removeEventListener("pointermove",Ie),q.current=null};return q.current!==null&&(document.addEventListener("pointermove",Ie),document.addEventListener("pointerup",ue,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",Ie),document.removeEventListener("pointerup",ue,{capture:!0})}}},[A,je,q]),g.useEffect(()=>{const Z=()=>je(!1);return window.addEventListener("blur",Z),window.addEventListener("resize",Z),()=>{window.removeEventListener("blur",Z),window.removeEventListener("resize",Z)}},[je]);const[fe,xe]=ih(Z=>{const Ie=X().filter(Me=>!Me.disabled),ue=Ie.find(Me=>Me.ref.current===document.activeElement),qe=uh(Ie,Z,ue);qe&&setTimeout(()=>qe.ref.current.focus())}),we=g.useCallback((Z,Ie,ue)=>{const qe=!De.current&&!ue;(S.value!==void 0&&S.value===Ie||qe)&&(se(Z),qe&&(De.current=!0))},[S.value]),ye=g.useCallback(()=>A?.focus(),[A]),Se=g.useCallback((Z,Ie,ue)=>{const qe=!De.current&&!ue;(S.value!==void 0&&S.value===Ie||qe)&&G(Z)},[S.value]),ze=r==="popper"?Os:H0,ae=ze===Os?{side:l,sideOffset:d,align:h,alignOffset:p,arrowPadding:y,collisionBoundary:v,collisionPadding:x,sticky:w,hideWhenDetached:_,avoidCollisions:E}:{};return u.jsx(U0,{scope:n,content:A,viewport:$,onViewportChange:U,itemRefCallback:we,selectedItem:Y,onItemLeave:ye,itemTextRefCallback:Se,focusSelectedItem:Pe,selectedItemText:ge,position:r,isPositioned:Ee,searchRef:fe,children:u.jsx(pl,{as:Zr,allowPinchZoom:!0,children:u.jsx(ml,{asChild:!0,trapped:S.open,onMountAutoFocus:Z=>{Z.preventDefault()},onUnmountAutoFocus:pe(o,Z=>{S.trigger?.focus({preventScroll:!0}),Z.preventDefault()}),children:u.jsx(gl,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:a,onPointerDownOutside:i,onFocusOutside:Z=>Z.preventDefault(),onDismiss:()=>S.onOpenChange(!1),children:u.jsx(ze,{role:"listbox",id:S.contentId,"data-state":S.open?"open":"closed",dir:S.dir,onContextMenu:Z=>Z.preventDefault(),...k,...ae,onPlaced:()=>Te(!0),ref:V,style:{display:"flex",flexDirection:"column",outline:"none",...k.style},onKeyDown:pe(k.onKeyDown,Z=>{const Ie=Z.ctrlKey||Z.altKey||Z.metaKey;if(Z.key==="Tab"&&Z.preventDefault(),!Ie&&Z.key.length===1&&xe(Z.key),["ArrowUp","ArrowDown","Home","End"].includes(Z.key)){let qe=X().filter(Me=>!Me.disabled).map(Me=>Me.ref.current);if(["ArrowUp","End"].includes(Z.key)&&(qe=qe.slice().reverse()),["ArrowUp","ArrowDown"].includes(Z.key)){const Me=Z.target,ve=qe.indexOf(Me);qe=qe.slice(ve+1)}setTimeout(()=>be(qe)),Z.preventDefault()}})})})})})})});K0.displayName=T6;var M6="SelectItemAlignedPosition",H0=g.forwardRef((e,t)=>{const{__scopeSelect:n,onPlaced:r,...o}=e,a=On(Yn,n),i=Ln(Yn,n),[l,d]=g.useState(null),[h,p]=g.useState(null),y=We(t,V=>p(V)),v=ka(n),x=g.useRef(!1),w=g.useRef(!0),{viewport:_,selectedItem:E,selectedItemText:k,focusSelectedItem:S}=i,A=g.useCallback(()=>{if(a.trigger&&a.valueNode&&l&&h&&_&&E&&k){const V=a.trigger.getBoundingClientRect(),Y=h.getBoundingClientRect(),se=a.valueNode.getBoundingClientRect(),ge=k.getBoundingClientRect();if(a.dir!=="rtl"){const Me=ge.left-Y.left,ve=se.left-Me,rt=V.left-ve,Et=V.width+rt,dt=Math.max(Et,Y.width),Gt=window.innerWidth-Ht,ln=oo(ve,[Ht,Math.max(Ht,Gt-dt)]);l.style.minWidth=Et+"px",l.style.left=ln+"px"}else{const Me=Y.right-ge.right,ve=window.innerWidth-se.right-Me,rt=window.innerWidth-V.right-ve,Et=V.width+rt,dt=Math.max(Et,Y.width),Gt=window.innerWidth-Ht,ln=oo(ve,[Ht,Math.max(Ht,Gt-dt)]);l.style.minWidth=Et+"px",l.style.right=ln+"px"}const G=v(),X=window.innerHeight-Ht*2,Ee=_.scrollHeight,Te=window.getComputedStyle(h),De=parseInt(Te.borderTopWidth,10),be=parseInt(Te.paddingTop,10),Pe=parseInt(Te.borderBottomWidth,10),je=parseInt(Te.paddingBottom,10),q=De+be+Ee+je+Pe,fe=Math.min(E.offsetHeight*5,q),xe=window.getComputedStyle(_),we=parseInt(xe.paddingTop,10),ye=parseInt(xe.paddingBottom,10),Se=V.top+V.height/2-Ht,ze=X-Se,ae=E.offsetHeight/2,Z=E.offsetTop+ae,Ie=De+be+Z,ue=q-Ie;if(Ie<=Se){const Me=G.length>0&&E===G[G.length-1].ref.current;l.style.bottom="0px";const ve=h.clientHeight-_.offsetTop-_.offsetHeight,rt=Math.max(ze,ae+(Me?ye:0)+ve+Pe),Et=Ie+rt;l.style.height=Et+"px"}else{const Me=G.length>0&&E===G[0].ref.current;l.style.top="0px";const rt=Math.max(Se,De+_.offsetTop+(Me?we:0)+ae)+ue;l.style.height=rt+"px",_.scrollTop=Ie-Se+_.offsetTop}l.style.margin=`${Ht}px 0`,l.style.minHeight=fe+"px",l.style.maxHeight=X+"px",r?.(),requestAnimationFrame(()=>x.current=!0)}},[v,a.trigger,a.valueNode,l,h,_,E,k,a.dir,r]);Wt(()=>A(),[A]);const[T,$]=g.useState();Wt(()=>{h&&$(window.getComputedStyle(h).zIndex)},[h]);const U=g.useCallback(V=>{V&&w.current===!0&&(A(),S?.(),w.current=!1)},[A,S]);return u.jsx(R6,{scope:n,contentWrapper:l,shouldExpandOnScrollRef:x,onScrollButtonChange:U,children:u.jsx("div",{ref:d,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:T},children:u.jsx($e.div,{...o,ref:y,style:{boxSizing:"border-box",maxHeight:"100%",...o.style}})})})});H0.displayName=M6;var P6="SelectPopperPosition",Os=g.forwardRef((e,t)=>{const{__scopeSelect:n,align:r="start",collisionPadding:o=Ht,...a}=e,i=Sa(n);return u.jsx(bl,{...i,...a,ref:t,align:r,collisionPadding:o,style:{boxSizing:"border-box",...a.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});Os.displayName=P6;var[R6,Ti]=Ar(Yn,{}),Ls="SelectViewport",W0=g.forwardRef((e,t)=>{const{__scopeSelect:n,nonce:r,...o}=e,a=Ln(Ls,n),i=Ti(Ls,n),l=We(t,a.onViewportChange),d=g.useRef(0);return u.jsxs(u.Fragment,{children:[u.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),u.jsx(_a.Slot,{scope:n,children:u.jsx($e.div,{"data-radix-select-viewport":"",role:"presentation",...o,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...o.style},onScroll:pe(o.onScroll,h=>{const p=h.currentTarget,{contentWrapper:y,shouldExpandOnScrollRef:v}=i;if(v?.current&&y){const x=Math.abs(d.current-p.scrollTop);if(x>0){const w=window.innerHeight-Ht*2,_=parseFloat(y.style.minHeight),E=parseFloat(y.style.height),k=Math.max(_,E);if(k<w){const S=k+x,A=Math.min(w,S),T=S-A;y.style.height=A+"px",y.style.bottom==="0px"&&(p.scrollTop=T>0?T:0,y.style.justifyContent="flex-end")}}}d.current=p.scrollTop})})})]})});W0.displayName=Ls;var V0="SelectGroup",[F6,I6]=Ar(V0),O6=g.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,o=mr();return u.jsx(F6,{scope:n,id:o,children:u.jsx($e.div,{role:"group","aria-labelledby":o,...r,ref:t})})});O6.displayName=V0;var G0="SelectLabel",Y0=g.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,o=I6(G0,n);return u.jsx($e.div,{id:o.id,...r,ref:t})});Y0.displayName=G0;var na="SelectItem",[L6,Z0]=Ar(na),X0=g.forwardRef((e,t)=>{const{__scopeSelect:n,value:r,disabled:o=!1,textValue:a,...i}=e,l=On(na,n),d=Ln(na,n),h=l.value===r,[p,y]=g.useState(a??""),[v,x]=g.useState(!1),w=We(t,S=>d.itemRefCallback?.(S,r,o)),_=mr(),E=g.useRef("touch"),k=()=>{o||(l.onValueChange(r),l.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return u.jsx(L6,{scope:n,value:r,disabled:o,textId:_,isSelected:h,onItemTextChange:g.useCallback(S=>{y(A=>A||(S?.textContent??"").trim())},[]),children:u.jsx(_a.ItemSlot,{scope:n,value:r,disabled:o,textValue:p,children:u.jsx($e.div,{role:"option","aria-labelledby":_,"data-highlighted":v?"":void 0,"aria-selected":h&&v,"data-state":h?"checked":"unchecked","aria-disabled":o||void 0,"data-disabled":o?"":void 0,tabIndex:o?void 0:-1,...i,ref:w,onFocus:pe(i.onFocus,()=>x(!0)),onBlur:pe(i.onBlur,()=>x(!1)),onClick:pe(i.onClick,()=>{E.current!=="mouse"&&k()}),onPointerUp:pe(i.onPointerUp,()=>{E.current==="mouse"&&k()}),onPointerDown:pe(i.onPointerDown,S=>{E.current=S.pointerType}),onPointerMove:pe(i.onPointerMove,S=>{E.current=S.pointerType,o?d.onItemLeave?.():E.current==="mouse"&&S.currentTarget.focus({preventScroll:!0})}),onPointerLeave:pe(i.onPointerLeave,S=>{S.currentTarget===document.activeElement&&d.onItemLeave?.()}),onKeyDown:pe(i.onKeyDown,S=>{d.searchRef?.current!==""&&S.key===" "||(k6.includes(S.key)&&k(),S.key===" "&&S.preventDefault())})})})})});X0.displayName=na;var Wr="SelectItemText",Q0=g.forwardRef((e,t)=>{const{__scopeSelect:n,className:r,style:o,...a}=e,i=On(Wr,n),l=Ln(Wr,n),d=Z0(Wr,n),h=A6(Wr,n),[p,y]=g.useState(null),v=We(t,k=>y(k),d.onItemTextChange,k=>l.itemTextRefCallback?.(k,d.value,d.disabled)),x=p?.textContent,w=g.useMemo(()=>u.jsx("option",{value:d.value,disabled:d.disabled,children:x},d.value),[d.disabled,d.value,x]),{onNativeOptionAdd:_,onNativeOptionRemove:E}=h;return Wt(()=>(_(w),()=>E(w)),[_,E,w]),u.jsxs(u.Fragment,{children:[u.jsx($e.span,{id:d.textId,...a,ref:v}),d.isSelected&&i.valueNode&&!i.valueNodeHasChildren?vr.createPortal(a.children,i.valueNode):null]})});Q0.displayName=Wr;var J0="SelectItemIndicator",eh=g.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e;return Z0(J0,n).isSelected?u.jsx($e.span,{"aria-hidden":!0,...r,ref:t}):null});eh.displayName=J0;var zs="SelectScrollUpButton",th=g.forwardRef((e,t)=>{const n=Ln(zs,e.__scopeSelect),r=Ti(zs,e.__scopeSelect),[o,a]=g.useState(!1),i=We(t,r.onScrollButtonChange);return Wt(()=>{if(n.viewport&&n.isPositioned){let l=function(){const h=d.scrollTop>0;a(h)};const d=n.viewport;return l(),d.addEventListener("scroll",l),()=>d.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),o?u.jsx(rh,{...e,ref:i,onAutoScroll:()=>{const{viewport:l,selectedItem:d}=n;l&&d&&(l.scrollTop=l.scrollTop-d.offsetHeight)}}):null});th.displayName=zs;var Bs="SelectScrollDownButton",nh=g.forwardRef((e,t)=>{const n=Ln(Bs,e.__scopeSelect),r=Ti(Bs,e.__scopeSelect),[o,a]=g.useState(!1),i=We(t,r.onScrollButtonChange);return Wt(()=>{if(n.viewport&&n.isPositioned){let l=function(){const h=d.scrollHeight-d.clientHeight,p=Math.ceil(d.scrollTop)<h;a(p)};const d=n.viewport;return l(),d.addEventListener("scroll",l),()=>d.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),o?u.jsx(rh,{...e,ref:i,onAutoScroll:()=>{const{viewport:l,selectedItem:d}=n;l&&d&&(l.scrollTop=l.scrollTop+d.offsetHeight)}}):null});nh.displayName=Bs;var rh=g.forwardRef((e,t)=>{const{__scopeSelect:n,onAutoScroll:r,...o}=e,a=Ln("SelectScrollButton",n),i=g.useRef(null),l=ka(n),d=g.useCallback(()=>{i.current!==null&&(window.clearInterval(i.current),i.current=null)},[]);return g.useEffect(()=>()=>d(),[d]),Wt(()=>{l().find(p=>p.ref.current===document.activeElement)?.ref.current?.scrollIntoView({block:"nearest"})},[l]),u.jsx($e.div,{"aria-hidden":!0,...o,ref:t,style:{flexShrink:0,...o.style},onPointerDown:pe(o.onPointerDown,()=>{i.current===null&&(i.current=window.setInterval(r,50))}),onPointerMove:pe(o.onPointerMove,()=>{a.onItemLeave?.(),i.current===null&&(i.current=window.setInterval(r,50))}),onPointerLeave:pe(o.onPointerLeave,()=>{d()})})}),z6="SelectSeparator",oh=g.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e;return u.jsx($e.div,{"aria-hidden":!0,...r,ref:t})});oh.displayName=z6;var $s="SelectArrow",B6=g.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,o=Sa(n),a=On($s,n),i=Ln($s,n);return a.open&&i.position==="popper"?u.jsx(vl,{...o,...r,ref:t}):null});B6.displayName=$s;function ah(e){return e===""||e===void 0}var sh=g.forwardRef((e,t)=>{const{value:n,...r}=e,o=g.useRef(null),a=We(t,o),i=uf(n);return g.useEffect(()=>{const l=o.current,d=window.HTMLSelectElement.prototype,p=Object.getOwnPropertyDescriptor(d,"value").set;if(i!==n&&p){const y=new Event("change",{bubbles:!0});p.call(l,n),l.dispatchEvent(y)}},[i,n]),u.jsx(R0,{asChild:!0,children:u.jsx("select",{...r,ref:a,defaultValue:n})})});sh.displayName="BubbleSelect";function ih(e){const t=Nt(e),n=g.useRef(""),r=g.useRef(0),o=g.useCallback(i=>{const l=n.current+i;t(l),function d(h){n.current=h,window.clearTimeout(r.current),h!==""&&(r.current=window.setTimeout(()=>d(""),1e3))}(l)},[t]),a=g.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return g.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,o,a]}function uh(e,t,n){const o=t.length>1&&Array.from(t).every(h=>h===t[0])?t[0]:t,a=n?e.indexOf(n):-1;let i=$6(e,Math.max(a,0));o.length===1&&(i=i.filter(h=>h!==n));const d=i.find(h=>h.textValue.toLowerCase().startsWith(o.toLowerCase()));return d!==n?d:void 0}function $6(e,t){return e.map((n,r)=>e[(t+r)%e.length])}var q6=F0,lh=O0,U6=z0,K6=B0,H6=$0,ch=q0,W6=W0,dh=Y0,fh=X0,V6=Q0,G6=eh,hh=th,ph=nh,mh=oh;const Y6=q6,Z6=U6,gh=g.forwardRef(({className:e,children:t,...n},r)=>u.jsxs(lh,{ref:r,className:re("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...n,children:[t,u.jsx(K6,{asChild:!0,children:u.jsx(Bl,{className:"h-4 w-4 opacity-50"})})]}));gh.displayName=lh.displayName;const bh=g.forwardRef(({className:e,...t},n)=>u.jsx(hh,{ref:n,className:re("flex cursor-default items-center justify-center py-1",e),...t,children:u.jsx(Hm,{className:"h-4 w-4"})}));bh.displayName=hh.displayName;const xh=g.forwardRef(({className:e,...t},n)=>u.jsx(ph,{ref:n,className:re("flex cursor-default items-center justify-center py-1",e),...t,children:u.jsx(Bl,{className:"h-4 w-4"})}));xh.displayName=ph.displayName;const yh=g.forwardRef(({className:e,children:t,position:n="popper",...r},o)=>u.jsx(H6,{children:u.jsxs(ch,{ref:o,className:re("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:n,...r,children:[u.jsx(bh,{}),u.jsx(W6,{className:re("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),u.jsx(xh,{})]})}));yh.displayName=ch.displayName;const X6=g.forwardRef(({className:e,...t},n)=>u.jsx(dh,{ref:n,className:re("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t}));X6.displayName=dh.displayName;const vh=g.forwardRef(({className:e,children:t,...n},r)=>u.jsxs(fh,{ref:r,className:re("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...n,children:[u.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:u.jsx(G6,{children:u.jsx(Mn,{className:"h-4 w-4"})})}),u.jsx(V6,{children:t})]}));vh.displayName=fh.displayName;const Q6=g.forwardRef(({className:e,...t},n)=>u.jsx(mh,{ref:n,className:re("-mx-1 my-1 h-px bg-muted",e),...t}));Q6.displayName=mh.displayName;const J6=[{value:"#3b82f6",label:"Blue"},{value:"#8b5cf6",label:"Purple"},{value:"#10b981",label:"Green"},{value:"#f59e0b",label:"Orange"},{value:"#ef4444",label:"Red"},{value:"#06b6d4",label:"Cyan"},{value:"#84cc16",label:"Lime"},{value:"#f97316",label:"Orange"}],xs=[{value:"Folder",label:"Folder",icon:Tn},{value:"Code",label:"Code",icon:Wm},{value:"Palette",label:"Design",icon:Kl},{value:"BookOpen",label:"Learning",icon:qm},{value:"Star",label:"Favorites",icon:s1},{value:"Heart",label:"Personal",icon:Xm},{value:"Zap",label:"Quick",icon:c1},{value:"Target",label:"Goals",icon:i1},{value:"Lightbulb",label:"Ideas",icon:Qm},{value:"Coffee",label:"Work",icon:Vm}];function eC({isOpen:e,onClose:t,onConfirm:n,parentId:r,initialData:o,mode:a="create"}){const[i,l]=g.useState(""),[d,h]=g.useState("#3b82f6"),[p,y]=g.useState("Folder");g.useEffect(()=>{e&&(o?(l(o.name),h(o.color),y(o.icon)):(l(""),h("#3b82f6"),y("Folder")))},[e]),g.useEffect(()=>{e&&o&&(l(o.name),h(o.color),y(o.icon))},[o,e]);const v=w=>{w.preventDefault(),i.trim()&&(n({name:i.trim(),color:d,icon:p,parentId:r}),t())},x=xs.find(w=>w.value===p)?.icon||Tn;return u.jsx(Gn,{open:e,onOpenChange:t,children:u.jsxs(Rn,{className:"sm:max-w-md",children:[u.jsxs(kr,{children:[u.jsx(Er,{children:a==="create"?"Create New Folder":"Edit Folder"}),u.jsx(ba,{children:a==="create"?"Create a new folder to organize your cards.":"Update folder details."})]}),u.jsxs("form",{onSubmit:v,className:"space-y-4",children:[u.jsxs("div",{className:"space-y-2",children:[u.jsx(_t,{htmlFor:"folder-name",children:"Folder Name"}),u.jsx(Ct,{id:"folder-name",value:i,onChange:w=>l(w.target.value),placeholder:"Enter folder name...",autoFocus:!0})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsx(_t,{children:"Color"}),u.jsx("div",{className:"flex flex-wrap gap-2",children:J6.map(w=>u.jsx("button",{type:"button",onClick:()=>h(w.value),className:`w-8 h-8 rounded-full border-2 transition-all ${d===w.value?"border-foreground scale-110":"border-muted hover:scale-105"}`,style:{backgroundColor:w.value},title:w.label},w.value))})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsx(_t,{children:"Icon"}),u.jsxs(Y6,{value:p,onValueChange:y,children:[u.jsx(gh,{children:u.jsx(Z6,{children:u.jsxs("div",{className:"flex items-center gap-2",children:[ne.createElement(x,{className:"h-4 w-4",style:{color:d}}),xs.find(w=>w.value===p)?.label]})})}),u.jsx(yh,{children:xs.map(w=>{const _=w.icon;return u.jsx(vh,{value:w.value,children:u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(_,{className:"h-4 w-4"}),w.label]})},w.value)})})]})]}),r&&u.jsx("div",{className:"flex items-center gap-2",children:u.jsx(Tt,{variant:"secondary",children:"Subfolder"})}),u.jsxs(Sr,{children:[u.jsx(_e,{type:"button",variant:"outline",onClick:t,children:"Cancel"}),u.jsx(_e,{type:"submit",disabled:!i.trim(),children:a==="create"?"Create Folder":"Save Changes"})]})]})]})})}var wh="AlertDialog",[tC,__]=rn(wh,[kl]),gn=kl(),Ch=e=>{const{__scopeAlertDialog:t,...n}=e,r=gn(t);return u.jsx(Cl,{...r,...n,modal:!0})};Ch.displayName=wh;var nC="AlertDialogTrigger",rC=g.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,o=gn(n);return u.jsx(Ap,{...o,...r,ref:t})});rC.displayName=nC;var oC="AlertDialogPortal",_h=e=>{const{__scopeAlertDialog:t,...n}=e,r=gn(t);return u.jsx(wl,{...r,...n})};_h.displayName=oC;var aC="AlertDialogOverlay",kh=g.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,o=gn(n);return u.jsx(Ks,{...o,...r,ref:t})});kh.displayName=aC;var pr="AlertDialogContent",[sC,iC]=tC(pr),Sh=g.forwardRef((e,t)=>{const{__scopeAlertDialog:n,children:r,...o}=e,a=gn(n),i=g.useRef(null),l=We(t,i),d=g.useRef(null);return u.jsx(Ep,{contentName:pr,titleName:Eh,docsSlug:"alert-dialog",children:u.jsx(sC,{scope:n,cancelRef:d,children:u.jsxs(Hs,{role:"alertdialog",...a,...o,ref:l,onOpenAutoFocus:pe(o.onOpenAutoFocus,h=>{h.preventDefault(),d.current?.focus({preventScroll:!0})}),onPointerDownOutside:h=>h.preventDefault(),onInteractOutside:h=>h.preventDefault(),children:[u.jsx(jp,{children:r}),u.jsx(lC,{contentRef:i})]})})})});Sh.displayName=pr;var Eh="AlertDialogTitle",jh=g.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,o=gn(n);return u.jsx(Vs,{...o,...r,ref:t})});jh.displayName=Eh;var Ah="AlertDialogDescription",Dh=g.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,o=gn(n);return u.jsx(Gs,{...o,...r,ref:t})});Dh.displayName=Ah;var uC="AlertDialogAction",Nh=g.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,o=gn(n);return u.jsx(Ws,{...o,...r,ref:t})});Nh.displayName=uC;var Th="AlertDialogCancel",Mh=g.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,{cancelRef:o}=iC(Th,n),a=gn(n),i=We(t,o);return u.jsx(Ws,{...a,...r,ref:i})});Mh.displayName=Th;var lC=({contentRef:e})=>{const t=`\`${pr}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${pr}\` by passing a \`${Ah}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${pr}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return g.useEffect(()=>{document.getElementById(e.current?.getAttribute("aria-describedby"))||console.warn(t)},[t,e]),null},cC=Ch,dC=_h,Ph=kh,Rh=Sh,Fh=Nh,Ih=Mh,Oh=jh,Lh=Dh;const fC=cC,hC=dC,zh=g.forwardRef(({className:e,...t},n)=>u.jsx(Ph,{className:re("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:n}));zh.displayName=Ph.displayName;const Bh=g.forwardRef(({className:e,...t},n)=>u.jsxs(hC,{children:[u.jsx(zh,{}),u.jsx(Rh,{ref:n,className:re("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...t})]}));Bh.displayName=Rh.displayName;const $h=({className:e,...t})=>u.jsx("div",{className:re("flex flex-col space-y-2 text-center sm:text-left",e),...t});$h.displayName="AlertDialogHeader";const qh=({className:e,...t})=>u.jsx("div",{className:re("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});qh.displayName="AlertDialogFooter";const Uh=g.forwardRef(({className:e,...t},n)=>u.jsx(Oh,{ref:n,className:re("text-lg font-semibold",e),...t}));Uh.displayName=Oh.displayName;const Kh=g.forwardRef(({className:e,...t},n)=>u.jsx(Lh,{ref:n,className:re("text-sm text-muted-foreground",e),...t}));Kh.displayName=Lh.displayName;const Hh=g.forwardRef(({className:e,...t},n)=>u.jsx(Fh,{ref:n,className:re(Js(),e),...t}));Hh.displayName=Fh.displayName;const Wh=g.forwardRef(({className:e,...t},n)=>u.jsx(Ih,{ref:n,className:re(Js({variant:"outline"}),"mt-2 sm:mt-0",e),...t}));Wh.displayName=Ih.displayName;function pC({isOpen:e,onClose:t,onConfirm:n,folderName:r,cardCount:o,hasSubfolders:a=!1,subfolderCount:i=0}){const l=()=>{n(),t()};return u.jsx(fC,{open:e,onOpenChange:t,children:u.jsxs(Bh,{children:[u.jsxs($h,{children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(Vl,{className:"h-5 w-5 text-destructive"}),u.jsx(Uh,{children:"Delete Folder"})]}),u.jsxs(Kh,{className:"space-y-3",children:[u.jsxs("p",{children:["Are you sure you want to delete the folder ",u.jsxs("strong",{children:['"',r,'"']}),"?"]}),u.jsxs("div",{className:"bg-destructive/10 p-3 rounded-lg space-y-2",children:[u.jsx("p",{className:"text-sm font-medium text-destructive",children:"This action will permanently delete:"}),u.jsxs("div",{className:"flex flex-wrap gap-2",children:[o>0&&u.jsxs(Tt,{variant:"destructive",children:[o," card",o!==1?"s":""]}),a&&i>0&&u.jsxs(Tt,{variant:"destructive",children:[i," subfolder",i!==1?"s":""]})]})]}),u.jsx("p",{className:"text-sm text-muted-foreground",children:"This action cannot be undone."})]})]}),u.jsxs(qh,{children:[u.jsx(Wh,{children:"Cancel"}),u.jsx(Hh,{onClick:l,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Delete Forever"})]})]})})}function mC({children:e,tagName:t,onRename:n,onDelete:r,disabled:o=!1}){const a=()=>{o||n(t)},i=()=>{o||r(t)};return o?u.jsx(u.Fragment,{children:e}):u.jsxs(T0,{children:[u.jsx(M0,{asChild:!0,children:e}),u.jsxs(Ni,{className:"w-48",children:[u.jsxs(hr,{onClick:a,className:"flex items-center gap-2",children:[u.jsx(Hl,{className:"h-4 w-4"}),"Rename Tag"]}),u.jsxs(hr,{onClick:i,className:"flex items-center gap-2 text-destructive focus:text-destructive",children:[u.jsx(ti,{className:"h-4 w-4"}),"Delete Tag"]})]})]})}function gC({isOpen:e,onClose:t,onConfirm:n,tagName:r,existingTags:o}){const[a,i]=g.useState(""),[l,d]=g.useState("");g.useEffect(()=>{e&&(i(r),d(""))},[e,r]);const h=v=>{const x=v.trim();return x?x===r?"Please enter a different name":o.includes(x)?"A tag with this name already exists":x.length>50?"Tag name must be less than 50 characters":"":"Tag name cannot be empty"},p=()=>{const v=a.trim(),x=h(v);if(x){d(x);return}n(r,v),t()},y=v=>{v.key==="Enter"&&p()};return u.jsx(Gn,{open:e,onOpenChange:t,children:u.jsxs(Rn,{className:"sm:max-w-md",children:[u.jsxs(kr,{children:[u.jsx(Er,{children:"Rename Tag"}),u.jsxs(ba,{children:['Enter a new name for the tag "',r,'". This will update all cards using this tag.']})]}),u.jsx("div",{className:"space-y-4 py-4",children:u.jsxs("div",{className:"space-y-2",children:[u.jsx(_t,{htmlFor:"tag-name",children:"Tag Name"}),u.jsx(Ct,{id:"tag-name",value:a,onChange:v=>{i(v.target.value),l&&d("")},onKeyPress:y,placeholder:"Enter tag name...",autoFocus:!0}),l&&u.jsxs("div",{className:"flex items-center gap-2 text-sm text-destructive",children:[u.jsx(Kt,{className:"h-4 w-4"}),l]})]})}),u.jsxs(Sr,{children:[u.jsx(_e,{variant:"outline",onClick:t,children:"Cancel"}),u.jsx(_e,{onClick:p,disabled:!!l||!a.trim(),children:"Rename Tag"})]})]})})}function bC({isOpen:e,onClose:t,onConfirm:n,tagName:r,cardCount:o}){return u.jsx(Gn,{open:e,onOpenChange:t,children:u.jsxs(Rn,{className:"sm:max-w-md",children:[u.jsxs(kr,{children:[u.jsxs(Er,{className:"flex items-center gap-2",children:[u.jsx(Vl,{className:"h-5 w-5 text-destructive"}),"Delete Tag"]}),u.jsxs(ba,{children:['Are you sure you want to delete the tag "',r,'"?']})]}),u.jsx("div",{className:"py-4",children:u.jsxs("div",{className:"rounded-lg bg-destructive/10 p-4 border border-destructive/20",children:[u.jsx("p",{className:"text-sm text-destructive font-medium mb-2",children:"This action cannot be undone."}),u.jsxs("p",{className:"text-sm text-muted-foreground",children:["This tag will be removed from ",u.jsx("strong",{children:o})," ",o===1?"card":"cards","."]})]})}),u.jsxs(Sr,{children:[u.jsx(_e,{variant:"outline",onClick:t,children:"Cancel"}),u.jsx(_e,{variant:"destructive",onClick:n,children:"Delete Tag"})]})]})})}const xC=({tag:e,isSelected:t,onClick:n,className:r,showCount:o=!0})=>u.jsxs("button",{onClick:()=>n(e),className:re("relative flex items-center justify-between px-3 py-2 rounded-xl border transition-all duration-300 ease-out","hover:shadow-lg hover:shadow-black/10 active:scale-[0.98] focus:outline-none focus:ring-2 focus:ring-blue-500/30","backdrop-blur-sm group",t?"bg-gradient-to-r from-blue-500 to-blue-600 border-blue-500 text-white shadow-md shadow-blue-500/25":"bg-white/80 border-gray-200/60 text-gray-700 hover:bg-white hover:border-gray-300/80",r),style:{boxShadow:t?"0 4px 20px -4px rgba(59, 130, 246, 0.3), 0 0 0 1px rgba(59, 130, 246, 0.1)":void 0},children:[u.jsxs("div",{className:"flex items-center gap-2.5 flex-1 min-w-0",children:[u.jsx("div",{className:re("w-2 h-2 rounded-full flex-shrink-0 transition-all duration-300",t?"bg-white/90 shadow-sm":"shadow-sm"),style:{backgroundColor:t?"rgba(255, 255, 255, 0.9)":e.color,boxShadow:t?"0 1px 3px rgba(0, 0, 0, 0.1)":`0 1px 3px ${e.color}40`}}),u.jsx("span",{className:re("text-sm font-medium truncate transition-all duration-300",t?"text-white":"text-gray-700 group-hover:text-gray-900"),children:e.name}),t&&u.jsx(Mn,{className:"w-3.5 h-3.5 text-white/90 flex-shrink-0 animate-in fade-in-0 zoom-in-95 duration-200"})]}),o&&u.jsx("span",{className:re("text-xs font-medium px-2 py-0.5 rounded-full ml-2 flex-shrink-0 transition-all duration-300",t?"text-blue-600 bg-white/90 shadow-sm":"text-gray-500 bg-gray-100/80 group-hover:bg-gray-200/80 group-hover:text-gray-600"),children:e.count})]}),yC=({tags:e,selectedTags:t,onTagClick:n,className:r,emptyMessage:o="No tags found"})=>e.length===0?u.jsx("div",{className:re("text-center py-8 text-gray-500",r),children:u.jsx("p",{className:"text-sm",children:o})}):u.jsx("div",{className:re("grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-2",r),children:e.map(a=>u.jsx(xC,{tag:a,isSelected:t.includes(a.name),onClick:n},a.id))}),vC=({onSearch:e,onCreateTag:t,searchResults:n,searchQuery:r,className:o})=>{const[a,i]=g.useState(r);g.useEffect(()=>{i(r)},[r]);const l=p=>{const y=p.target.value;i(y),e(y)},d=()=>{a.trim()&&(t(a.trim()),i(""),e(""))},h=a.trim()&&n.length===0&&!n.some(p=>p.name.toLowerCase()===a.toLowerCase());return u.jsxs("div",{className:re("space-y-3",o),children:[u.jsxs("div",{className:"relative",children:[u.jsx(Gr,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),u.jsx(Ct,{placeholder:"Search tags or create new...",value:a,onChange:l,className:"pl-11 pr-4 py-3 rounded-2xl border-gray-200/60 bg-gray-50/50 backdrop-blur-sm focus:bg-white focus:border-blue-300 transition-all duration-300"})]}),h&&u.jsxs(_e,{onClick:d,variant:"outline",className:"w-full justify-start text-left rounded-xl border-dashed border-2 border-gray-300 hover:border-blue-400 hover:bg-blue-50/50 transition-all duration-300 py-3",children:[u.jsx(Uo,{className:"h-4 w-4 mr-2 text-blue-500"}),u.jsxs("span",{className:"text-gray-700",children:['Create tag "',u.jsx("span",{className:"font-medium text-blue-600",children:a}),'"']})]})]})},wC=({isOpen:e,onClose:t,currentCardTags:n,onTagsChange:r})=>{const{tags:o,searchTags:a,dispatch:i,createTagIfNotExists:l}=Dl(),[d,h]=g.useState(""),[p,y]=g.useState([]),[v,x]=g.useState(n);g.useEffect(()=>{if(d.trim()){const S=a(d);y(S)}else{const S=[...o].sort((A,T)=>T.count-A.count);y(S)}},[d,o,a]),g.useEffect(()=>{x(n)},[n]);const w=S=>{h(S)},_=S=>{i({type:"CREATE_TAG",payload:{name:S,color:"#3b82f6"}});const A=[...v,S];x(A),r(A),h("")},E=S=>{const A=v.includes(S.name);let T;A?T=v.filter($=>$!==S.name):T=[...v,S.name],x(T),r(T)},k=()=>{h(""),t()};return e?u.jsxs("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center p-4",style:{backgroundColor:"rgba(0, 0, 0, 0.15)",backdropFilter:"blur(8px)"},children:[u.jsx("div",{className:"absolute inset-0",onClick:k}),u.jsxs("div",{className:"relative bg-white/95 backdrop-blur-xl rounded-3xl shadow-2xl border border-gray-200/50 p-6 w-full max-w-sm sm:max-w-md lg:max-w-2xl max-h-[85vh] flex flex-col",children:[u.jsxs("div",{className:"flex items-center justify-between mb-6",children:[u.jsxs("div",{children:[u.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Manage Tags"}),u.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Select tags for this card"})]}),u.jsx("button",{onClick:k,className:"p-1 rounded-lg hover:bg-gray-100 transition-colors",children:u.jsx(Zn,{className:"w-5 h-5 text-gray-500"})})]}),u.jsx(vC,{onSearch:w,onCreateTag:_,searchResults:p,searchQuery:d,className:"mb-4"}),v.length>0&&u.jsxs("div",{className:"mb-4 p-4 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-2xl border border-blue-100/50",children:[u.jsxs("p",{className:"text-sm font-medium text-blue-700 mb-3",children:["Selected tags (",v.length,"):"]}),u.jsx("div",{className:"flex flex-wrap gap-1.5",children:v.map(S=>u.jsx("span",{className:"inline-flex items-center px-3 py-1.5 rounded-full text-xs font-medium bg-gradient-to-r from-blue-500 to-blue-600 text-white shadow-sm",children:S},S))})]}),u.jsx("div",{className:"flex-1 overflow-y-auto",children:u.jsx(yC,{tags:p,selectedTags:v,onTagClick:E,emptyMessage:d?`No tags found for "${d}"`:"No tags available"})}),u.jsx("div",{className:"text-xs text-gray-400 text-center mt-4 pt-4 border-t border-gray-100",children:u.jsxs("div",{className:"flex items-center justify-center gap-2",children:[u.jsx("div",{className:"w-1 h-1 rounded-full bg-gray-300"}),u.jsx("span",{children:"Click tags to add/remove them from this card"}),u.jsx("div",{className:"w-1 h-1 rounded-full bg-gray-300"})]})})]})]}):null},CC=()=>{const{isOpen:e,currentCardTags:t,onTagsChange:n,closeTagPanel:r}=Ud();return!e||!n?null:u.jsx(wC,{isOpen:e,onClose:r,currentCardTags:t,onTagsChange:n})};function _C({className:e}){const[t,n]=g.useState({user:null,session:null,loading:!1,error:null}),{openModal:r}=Tl(),{cards:o,filter:a,setFilter:i,viewSettings:l,setViewSettings:d,dispatch:h,getAllTags:p,updateTagsInAllCards:y,getCardsWithTag:v}=nm(),{folderTree:x,selectedFolderId:w,setSelectedFolderId:_,dispatch:E,getFolderById:k,folders:S}=Al(),{tags:A,popularTags:T,renameTag:$,deleteTagByName:U,getAllTagNames:V}=Dl(),{toast:Y}=K3(),[se,ge]=g.useState(!1),[G,X]=g.useState(!1),[Ee,Te]=g.useState({gap:16,showLayoutControls:!1});g.useEffect(()=>Vn.onAuthStateChange(n),[]);const[De,be]=g.useState(!1),[Pe,je]=g.useState(!1),[q,fe]=g.useState(null),[xe,we]=g.useState(null),[ye,Se]=g.useState(),[ze,ae]=g.useState(!1),[Z,Ie]=g.useState(!1),[ue,qe]=g.useState(""),[Me,ve]=g.useState(null),{isDownloading:rt,showPreview:Et,previewData:dt,captureScreenshot:Gt,confirmDownload:ln,cancelPreview:zn}=I3({onSuccess:Q=>{Y({title:"Screenshot saved!",description:`${Q}.png has been downloaded successfully.`})},onError:Q=>{Y({title:"Screenshot failed",description:Q.message,variant:"destructive"})}}),Dr=Q=>{h({type:"FLIP_CARD",payload:Q})},bn=(Q,me)=>{h({type:"UPDATE_CARD",payload:{id:Q,updates:me}})},ot=async Q=>{const me=o.find(Re=>Re.id===Q);if(me){const Re=me.isFlipped?me.backContent:me.frontContent,At=fw(Re.title,Re.text);await hw(At)?console.log("Card content copied to clipboard"):console.error("Failed to copy card content")}},Bn=async Q=>{const me=o.find(Le=>Le.id===Q);if(!me)return;const Re=document.querySelector(`[data-card-id="${Q}"]`);if(!Re){Y({title:"Screenshot failed",description:"Could not find card element. Please try again.",variant:"destructive"});return}const Ce=(me.isFlipped?me.backContent:me.frontContent).title||"Untitled Card";await Gt(Re,Ce)},gt=Q=>{console.log("Share card:",Q)},Jn=Q=>{h({type:"DELETE_CARD",payload:Q})},cn=(Q,me)=>{const Re=o.find(Le=>Le.id===Q);if(!Re)return;const At=Re.folderId;if(h({type:"UPDATE_CARD",payload:{id:Q,updates:{folderId:me||void 0}}}),At){const Le=k(At);Le&&E({type:"UPDATE_FOLDER",payload:{id:At,updates:{cardIds:Le.cardIds.filter(Ve=>Ve!==Q)}}})}if(me){const Le=k(me);Le&&E({type:"UPDATE_FOLDER",payload:{id:me,updates:{cardIds:[...Le.cardIds,Q]}}})}const Ce=me?k(me)?.name:"Root";Y({title:"Card moved",description:`Card has been moved to "${Ce}".`})},Qe=()=>{h({type:"CREATE_CARD",payload:{frontContent:{title:"New Card",text:"Click to edit this card...",images:[],tags:[],lastModified:new Date},backContent:{title:"Back Side",text:"Add additional content here...",images:[],tags:[],lastModified:new Date},style:{type:"solid",backgroundColor:"#ffffff",fontFamily:"system-ui",fontSize:"base",fontWeight:"normal",textColor:"#1f2937",borderRadius:"xl",shadow:"md",borderWidth:0},isFlipped:!1,folderId:w||void 0}})},ct=()=>{Se(void 0),fe(null),be(!0)},xn=Q=>{Se(Q),fe(null),be(!0)},Yt=Q=>{const me=k(Q);me&&(fe({id:Q,name:me.name,color:me.color,icon:me.icon||"Folder"}),Se(void 0),be(!0))},$t=Q=>{const me=k(Q);if(me){const Re=S.filter(At=>At.parentId===Q);we({id:Q,name:me.name,cardCount:me.cardIds.length,hasSubfolders:Re.length>0,subfolderCount:Re.length}),je(!0)}},yn=Q=>{q?(E({type:"UPDATE_FOLDER",payload:{id:q.id,updates:{name:Q.name,color:Q.color,icon:Q.icon}}}),Y({title:"Folder updated",description:`"${Q.name}" has been updated successfully.`})):(E({type:"CREATE_FOLDER",payload:{name:Q.name,color:Q.color,icon:Q.icon,cardIds:[],parentId:Q.parentId,isExpanded:!0}}),Y({title:"Folder created",description:`"${Q.name}" has been created successfully.`}))},Pt=()=>{xe&&(E({type:"DELETE_FOLDER",payload:xe.id,onDeleteCards:Q=>{Q.forEach(me=>{h({type:"DELETE_CARD",payload:me})})}}),Y({title:"Folder deleted",description:`"${xe.name}" and ${xe.cardCount} cards have been deleted.`}),w===xe.id&&bt(null))},Zt=Q=>{const me=a.tags.includes(Q);i({...a,tags:me?a.tags.filter(Re=>Re!==Q):[...a.tags,Q]})},bt=Q=>{_(Q),i({...a,folderId:Q||void 0})},jt=Q=>{qe(Q),ae(!0)},he=Q=>{const me=v(Q);ve({name:Q,cardCount:me.length}),Ie(!0)},dn=(Q,me)=>{$(Q,me)?(y(Q,me),Y({title:"Tag renamed",description:`"${Q}" has been renamed to "${me}".`}),ae(!1),qe("")):Y({title:"Rename failed",description:"A tag with this name already exists.",variant:"destructive"})},qt=()=>{Me&&U(Me.name)&&(y(Me.name),a.tags.includes(Me.name)&&i({...a,tags:a.tags.filter(me=>me!==Me.name)}),Y({title:"Tag deleted",description:`"${Me.name}" has been removed from ${Me.cardCount} cards.`}),Ie(!1),ve(null))},Xt=(Q,me=0)=>Q.map(Re=>u.jsxs("div",{style:{marginLeft:me*16},children:[u.jsx(sl,{folderId:Re.id,folderName:Re.name,onRename:Yt,onDelete:$t,onCreateSubfolder:xn,children:u.jsxs(_e,{variant:w===Re.id?"secondary":"ghost",className:"w-full justify-start text-sm mb-1",onClick:()=>bt(Re.id),children:[u.jsx(Tn,{className:"h-4 w-4 mr-2",style:{color:Re.color}}),Re.name,u.jsx(Tt,{variant:"secondary",className:"ml-auto",children:Re.cardIds.length})]})}),Re.children&&Re.children.length>0&&Re.isExpanded&&u.jsx("div",{className:"ml-4",children:Xt(Re.children,me+1)})]},Re.id)),ie=Q=>Q.map(me=>u.jsxs("div",{children:[u.jsx(sl,{folderId:me.id,folderName:me.name,onRename:Yt,onDelete:$t,onCreateSubfolder:xn,children:u.jsx(_e,{variant:w===me.id?"secondary":"ghost",className:"w-full h-10 p-0 mb-1",onClick:()=>bt(me.id),title:me.name,children:u.jsx(Tn,{className:"h-4 w-4",style:{color:me.color}})})}),me.children&&me.children.length>0&&me.isExpanded&&u.jsx("div",{children:ie(me.children)})]},me.id));return u.jsx(Iv,{children:u.jsxs("div",{className:re("min-h-screen bg-background",e),children:[u.jsx("header",{className:"sticky top-0 z-40 w-full border-b bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60",children:u.jsxs("div",{className:"container flex h-16 items-center justify-between px-4",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("div",{className:"h-8 w-8 rounded-lg bg-gradient-to-br from-violet-500 to-pink-500 flex items-center justify-center",children:u.jsx("span",{className:"text-white font-bold text-sm",children:"CA"})}),u.jsxs("h1",{className:"text-xl font-bold",children:[u.jsx("span",{className:"text-violet-600",children:"Card"}),u.jsx("span",{className:"text-pink-500",children:"All"})]})]}),u.jsx("div",{className:"absolute left-1/2 transform -translate-x-1/2 hidden md:block",children:u.jsxs("div",{className:"relative",children:[u.jsx(Gr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),u.jsx(Ct,{placeholder:"Search cards...",value:a.searchTerm,onChange:Q=>i({...a,searchTerm:Q.target.value}),className:"pl-10 rounded-full w-80"})]})}),u.jsx("div",{className:"md:hidden absolute left-1/2 transform -translate-x-1/2",children:u.jsxs("div",{className:"relative",children:[u.jsx(Gr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),u.jsx(Ct,{placeholder:"Search...",value:a.searchTerm,onChange:Q=>i({...a,searchTerm:Q.target.value}),className:"pl-10 rounded-full w-60"})]})}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsxs(cw,{children:[u.jsx(dw,{asChild:!0,children:u.jsx(_e,{variant:"ghost",size:"sm",children:u.jsx(r1,{className:"h-4 w-4"})})}),u.jsx(Af,{className:"w-80",align:"end",children:u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"space-y-2",children:[u.jsx("h4",{className:"font-medium",children:"Layout Settings"}),u.jsx("p",{className:"text-sm text-muted-foreground",children:"Customize the masonry layout appearance"})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsxs(_t,{children:["Gap Size: ",Ee.gap,"px"]}),u.jsx(_f,{value:[Ee.gap],onValueChange:([Q])=>Te(me=>({...me,gap:Q})),max:32,min:8,step:4,className:"w-full"})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsx(_t,{children:"Card Size"}),u.jsx("div",{className:"flex gap-2",children:["small","medium","large"].map(Q=>u.jsx(_e,{variant:l.cardSize===Q?"default":"outline",size:"sm",onClick:()=>d(me=>({...me,cardSize:Q})),children:Q.charAt(0).toUpperCase()+Q.slice(1)},Q))})]})]})})]}),u.jsxs(_e,{onClick:Qe,variant:"ghost",size:"sm",className:"text-black font-bold hover:bg-gray-100 rounded-full w-10 h-10 p-0 flex items-center justify-center",children:[u.jsx(Uo,{className:"h-6 w-6"}),u.jsx("span",{className:"sr-only",children:"Add Card"})]}),u.jsx(_e,{variant:"ghost",size:"sm",onClick:r,className:"flex items-center gap-2",children:t.user?u.jsxs(u.Fragment,{children:[u.jsx(s0,{user:t.user,size:"sm",onClick:r,showHoverEffect:!0}),u.jsx("span",{className:"hidden sm:inline text-sm",children:t.user.username||"User"})]}):u.jsxs(u.Fragment,{children:[u.jsx(Jm,{className:"h-4 w-4"}),u.jsx("span",{className:"hidden sm:inline text-sm",children:"Login"})]})})]})]})}),u.jsxs("main",{className:"flex h-[calc(100vh-4rem)]",children:[u.jsxs("aside",{className:re("border-r transition-all duration-300 ease-in-out flex flex-col",G?"w-16":"w-72"),children:[u.jsx("div",{className:"p-3 flex items-center justify-end",children:u.jsx(_e,{variant:"ghost",size:"sm",onClick:()=>X(!G),className:"h-8 w-8 p-0",children:G?u.jsx(ei,{className:"h-4 w-4"}):u.jsx(Km,{className:"h-4 w-4"})})}),u.jsx("div",{className:"flex-1 overflow-y-auto",children:u.jsxs("div",{className:"p-3 space-y-4",children:[!G&&u.jsxs("div",{children:[u.jsxs("div",{className:"space-y-2",children:[u.jsxs(_e,{className:"w-full justify-start",onClick:Qe,children:[u.jsx(Uo,{className:"h-4 w-4 mr-2"}),"New Card"]}),u.jsxs(_e,{variant:"outline",className:"w-full justify-start",onClick:ct,children:[u.jsx(Ss,{className:"h-4 w-4 mr-2"}),"New Folder"]})]}),u.jsx(Hr,{className:"my-4"})]}),G&&u.jsxs("div",{className:"space-y-2",children:[u.jsx(_e,{variant:"ghost",size:"sm",className:"w-full h-10 p-0",onClick:Qe,title:"New Card",children:u.jsx(Uo,{className:"h-4 w-4"})}),u.jsx(_e,{variant:"ghost",size:"sm",className:"w-full h-10 p-0",onClick:ct,title:"New Folder",children:u.jsx(Ss,{className:"h-4 w-4"})}),u.jsx(Hr,{className:"my-4"})]}),u.jsxs("div",{children:[!G&&u.jsx("h3",{className:"text-sm font-medium mb-3",children:"Folders"}),u.jsxs("div",{className:"space-y-1",children:[u.jsxs(_e,{variant:w?"ghost":"secondary",className:re("w-full text-sm",G?"h-10 p-0":"justify-start"),onClick:()=>bt(null),title:G?"All Cards":void 0,children:[u.jsx(Tn,{className:"h-4 w-4"}),!G&&u.jsxs(u.Fragment,{children:[u.jsx("span",{className:"ml-2",children:"All Cards"}),u.jsx(Tt,{variant:"secondary",className:"ml-auto",children:o.length})]})]}),G?ie(x):Xt(x)]})]}),u.jsx(Hr,{}),u.jsxs("div",{children:[!G&&u.jsxs("div",{className:"flex items-center justify-between mb-3",children:[u.jsx("h3",{className:"text-sm font-medium",children:"Tags"}),a.tags.length>0&&u.jsx(_e,{variant:"ghost",size:"sm",onClick:()=>i({...a,tags:[]}),className:"h-6 px-2 text-xs",children:"Clear"})]}),u.jsx("div",{className:"space-y-1",children:T(G?5:10).map(Q=>u.jsx(mC,{tagName:Q.name,onRename:jt,onDelete:he,disabled:G,children:u.jsxs(_e,{variant:a.tags.includes(Q.name)?"secondary":"ghost",className:re("w-full text-sm",G?"h-10 p-0":"justify-start"),onClick:()=>Zt(Q.name),title:G?`${Q.name} (Right-click to expand sidebar for tag management)`:Q.name,children:[u.jsx(Wl,{className:"h-3 w-3",style:{color:Q.color}}),!G&&u.jsxs(u.Fragment,{children:[u.jsx("span",{className:"ml-2",children:Q.name}),u.jsx(Tt,{variant:"secondary",className:"ml-auto",children:Q.count})]})]})},Q.id))})]}),!G&&(a.tags.length>0||a.searchTerm)&&u.jsxs(u.Fragment,{children:[u.jsx(Hr,{}),u.jsxs("div",{children:[u.jsx("h3",{className:"text-sm font-medium mb-3",children:"Active Filters"}),u.jsxs("div",{className:"space-y-2",children:[a.searchTerm&&u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(Gr,{className:"h-3 w-3"}),u.jsxs("span",{className:"text-xs text-muted-foreground",children:['"',a.searchTerm,'"']})]}),a.tags.map(Q=>u.jsx(Tt,{variant:"secondary",className:"mr-1",children:Q},Q))]})]})]})]})})]}),u.jsx("div",{className:"flex-1 overflow-y-auto",children:u.jsx("div",{className:"p-4",children:u.jsx(Bv,{cards:o,onCardFlip:Dr,onCardUpdate:bn,onCardCopy:ot,onCardScreenshot:Bn,onCardShare:gt,onCardDelete:Jn,onMoveToFolder:cn,cardSize:l.cardSize==="small"?"sm":l.cardSize==="large"?"lg":"md",enableVirtualization:o.length>20,gap:Ee.gap,overscan:3})})})]}),u.jsx(O3,{isOpen:Et,onClose:zn,onConfirm:ln,previewUrl:dt?.previewUrl||null,fileName:dt?.fileName||"",isDownloading:rt}),u.jsx(eC,{isOpen:De,onClose:()=>{be(!1),fe(null),Se(void 0)},onConfirm:yn,parentId:ye,initialData:g.useMemo(()=>q?{name:q.name,color:q.color,icon:q.icon}:void 0,[q]),mode:q?"edit":"create"}),u.jsx(pC,{isOpen:Pe,onClose:()=>{je(!1),we(null)},onConfirm:Pt,folderName:xe?.name||"",cardCount:xe?.cardCount||0,hasSubfolders:xe?.hasSubfolders||!1,subfolderCount:xe?.subfolderCount||0}),u.jsx(gC,{isOpen:ze,onClose:()=>{ae(!1),qe("")},onConfirm:dn,tagName:ue,existingTags:V()}),u.jsx(bC,{isOpen:Z,onClose:()=>{Ie(!1),ve(null)},onConfirm:qt,tagName:Me?.name||"",cardCount:Me?.cardCount||0}),u.jsx(CC,{})]})})}const kC={theme:"system",setTheme:()=>null},SC=g.createContext(kC);function EC({children:e,defaultTheme:t="system",storageKey:n="vite-ui-theme",...r}){const[o,a]=g.useState(()=>localStorage.getItem(n)||t);g.useEffect(()=>{const l=window.document.documentElement;if(l.classList.remove("light","dark"),o==="system"){const d=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";l.classList.add(d);return}l.classList.add(o)},[o]);const i={theme:o,setTheme:l=>{localStorage.setItem(n,l),a(l)}};return u.jsx(SC.Provider,{...r,value:i,children:e})}var jC=e=>{switch(e){case"success":return NC;case"info":return MC;case"warning":return TC;case"error":return PC;default:return null}},AC=Array(12).fill(0),DC=({visible:e,className:t})=>ne.createElement("div",{className:["sonner-loading-wrapper",t].filter(Boolean).join(" "),"data-visible":e},ne.createElement("div",{className:"sonner-spinner"},AC.map((n,r)=>ne.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${r}`})))),NC=ne.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},ne.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),TC=ne.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},ne.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),MC=ne.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},ne.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),PC=ne.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},ne.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),RC=ne.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},ne.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),ne.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),FC=()=>{let[e,t]=ne.useState(document.hidden);return ne.useEffect(()=>{let n=()=>{t(document.hidden)};return document.addEventListener("visibilitychange",n),()=>window.removeEventListener("visibilitychange",n)},[]),e},qs=1,IC=class{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{let t=this.subscribers.indexOf(e);this.subscribers.splice(t,1)}),this.publish=e=>{this.subscribers.forEach(t=>t(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var t;let{message:n,...r}=e,o=typeof e?.id=="number"||((t=e.id)==null?void 0:t.length)>0?e.id:qs++,a=this.toasts.find(l=>l.id===o),i=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(o)&&this.dismissedToasts.delete(o),a?this.toasts=this.toasts.map(l=>l.id===o?(this.publish({...l,...e,id:o,title:n}),{...l,...e,id:o,dismissible:i,title:n}):l):this.addToast({title:n,...r,dismissible:i,id:o}),o},this.dismiss=e=>(this.dismissedToasts.add(e),e||this.toasts.forEach(t=>{this.subscribers.forEach(n=>n({id:t.id,dismiss:!0}))}),this.subscribers.forEach(t=>t({id:e,dismiss:!0})),e),this.message=(e,t)=>this.create({...t,message:e}),this.error=(e,t)=>this.create({...t,message:e,type:"error"}),this.success=(e,t)=>this.create({...t,type:"success",message:e}),this.info=(e,t)=>this.create({...t,type:"info",message:e}),this.warning=(e,t)=>this.create({...t,type:"warning",message:e}),this.loading=(e,t)=>this.create({...t,type:"loading",message:e}),this.promise=(e,t)=>{if(!t)return;let n;t.loading!==void 0&&(n=this.create({...t,promise:e,type:"loading",message:t.loading,description:typeof t.description!="function"?t.description:void 0}));let r=e instanceof Promise?e:e(),o=n!==void 0,a,i=r.then(async d=>{if(a=["resolve",d],ne.isValidElement(d))o=!1,this.create({id:n,type:"default",message:d});else if(LC(d)&&!d.ok){o=!1;let h=typeof t.error=="function"?await t.error(`HTTP error! status: ${d.status}`):t.error,p=typeof t.description=="function"?await t.description(`HTTP error! status: ${d.status}`):t.description;this.create({id:n,type:"error",message:h,description:p})}else if(t.success!==void 0){o=!1;let h=typeof t.success=="function"?await t.success(d):t.success,p=typeof t.description=="function"?await t.description(d):t.description;this.create({id:n,type:"success",message:h,description:p})}}).catch(async d=>{if(a=["reject",d],t.error!==void 0){o=!1;let h=typeof t.error=="function"?await t.error(d):t.error,p=typeof t.description=="function"?await t.description(d):t.description;this.create({id:n,type:"error",message:h,description:p})}}).finally(()=>{var d;o&&(this.dismiss(n),n=void 0),(d=t.finally)==null||d.call(t)}),l=()=>new Promise((d,h)=>i.then(()=>a[0]==="reject"?h(a[1]):d(a[1])).catch(h));return typeof n!="string"&&typeof n!="number"?{unwrap:l}:Object.assign(n,{unwrap:l})},this.custom=(e,t)=>{let n=t?.id||qs++;return this.create({jsx:e(n),id:n,...t}),n},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},wt=new IC,OC=(e,t)=>{let n=t?.id||qs++;return wt.addToast({title:e,...t,id:n}),n},LC=e=>e&&typeof e=="object"&&"ok"in e&&typeof e.ok=="boolean"&&"status"in e&&typeof e.status=="number",zC=OC,BC=()=>wt.toasts,$C=()=>wt.getActiveToasts();Object.assign(zC,{success:wt.success,info:wt.info,warning:wt.warning,error:wt.error,custom:wt.custom,message:wt.message,promise:wt.promise,dismiss:wt.dismiss,loading:wt.loading},{getHistory:BC,getToasts:$C});function qC(e,{insertAt:t}={}){if(typeof document>"u")return;let n=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",t==="top"&&n.firstChild?n.insertBefore(r,n.firstChild):n.appendChild(r),r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e))}qC(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function qo(e){return e.label!==void 0}var UC=3,KC="32px",HC="16px",il=4e3,WC=356,VC=14,GC=20,YC=200;function Ut(...e){return e.filter(Boolean).join(" ")}function ZC(e){let[t,n]=e.split("-"),r=[];return t&&r.push(t),n&&r.push(n),r}var XC=e=>{var t,n,r,o,a,i,l,d,h,p,y;let{invert:v,toast:x,unstyled:w,interacting:_,setHeights:E,visibleToasts:k,heights:S,index:A,toasts:T,expanded:$,removeToast:U,defaultRichColors:V,closeButton:Y,style:se,cancelButtonStyle:ge,actionButtonStyle:G,className:X="",descriptionClassName:Ee="",duration:Te,position:De,gap:be,loadingIcon:Pe,expandByDefault:je,classNames:q,icons:fe,closeButtonAriaLabel:xe="Close toast",pauseWhenPageIsHidden:we}=e,[ye,Se]=ne.useState(null),[ze,ae]=ne.useState(null),[Z,Ie]=ne.useState(!1),[ue,qe]=ne.useState(!1),[Me,ve]=ne.useState(!1),[rt,Et]=ne.useState(!1),[dt,Gt]=ne.useState(!1),[ln,zn]=ne.useState(0),[Dr,bn]=ne.useState(0),ot=ne.useRef(x.duration||Te||il),Bn=ne.useRef(null),gt=ne.useRef(null),Jn=A===0,cn=A+1<=k,Qe=x.type,ct=x.dismissible!==!1,xn=x.className||"",Yt=x.descriptionClassName||"",$t=ne.useMemo(()=>S.findIndex(Ce=>Ce.toastId===x.id)||0,[S,x.id]),yn=ne.useMemo(()=>{var Ce;return(Ce=x.closeButton)!=null?Ce:Y},[x.closeButton,Y]),Pt=ne.useMemo(()=>x.duration||Te||il,[x.duration,Te]),Zt=ne.useRef(0),bt=ne.useRef(0),jt=ne.useRef(0),he=ne.useRef(null),[dn,qt]=De.split("-"),Xt=ne.useMemo(()=>S.reduce((Ce,Le,Ve)=>Ve>=$t?Ce:Ce+Le.height,0),[S,$t]),ie=FC(),Q=x.invert||v,me=Qe==="loading";bt.current=ne.useMemo(()=>$t*be+Xt,[$t,Xt]),ne.useEffect(()=>{ot.current=Pt},[Pt]),ne.useEffect(()=>{Ie(!0)},[]),ne.useEffect(()=>{let Ce=gt.current;if(Ce){let Le=Ce.getBoundingClientRect().height;return bn(Le),E(Ve=>[{toastId:x.id,height:Le,position:x.position},...Ve]),()=>E(Ve=>Ve.filter(at=>at.toastId!==x.id))}},[E,x.id]),ne.useLayoutEffect(()=>{if(!Z)return;let Ce=gt.current,Le=Ce.style.height;Ce.style.height="auto";let Ve=Ce.getBoundingClientRect().height;Ce.style.height=Le,bn(Ve),E(at=>at.find(st=>st.toastId===x.id)?at.map(st=>st.toastId===x.id?{...st,height:Ve}:st):[{toastId:x.id,height:Ve,position:x.position},...at])},[Z,x.title,x.description,E,x.id]);let Re=ne.useCallback(()=>{qe(!0),zn(bt.current),E(Ce=>Ce.filter(Le=>Le.toastId!==x.id)),setTimeout(()=>{U(x)},YC)},[x,U,E,bt]);ne.useEffect(()=>{if(x.promise&&Qe==="loading"||x.duration===1/0||x.type==="loading")return;let Ce;return $||_||we&&ie?(()=>{if(jt.current<Zt.current){let Le=new Date().getTime()-Zt.current;ot.current=ot.current-Le}jt.current=new Date().getTime()})():ot.current!==1/0&&(Zt.current=new Date().getTime(),Ce=setTimeout(()=>{var Le;(Le=x.onAutoClose)==null||Le.call(x,x),Re()},ot.current)),()=>clearTimeout(Ce)},[$,_,x,Qe,we,ie,Re]),ne.useEffect(()=>{x.delete&&Re()},[Re,x.delete]);function At(){var Ce,Le,Ve;return fe!=null&&fe.loading?ne.createElement("div",{className:Ut(q?.loader,(Ce=x?.classNames)==null?void 0:Ce.loader,"sonner-loader"),"data-visible":Qe==="loading"},fe.loading):Pe?ne.createElement("div",{className:Ut(q?.loader,(Le=x?.classNames)==null?void 0:Le.loader,"sonner-loader"),"data-visible":Qe==="loading"},Pe):ne.createElement(DC,{className:Ut(q?.loader,(Ve=x?.classNames)==null?void 0:Ve.loader),visible:Qe==="loading"})}return ne.createElement("li",{tabIndex:0,ref:gt,className:Ut(X,xn,q?.toast,(t=x?.classNames)==null?void 0:t.toast,q?.default,q?.[Qe],(n=x?.classNames)==null?void 0:n[Qe]),"data-sonner-toast":"","data-rich-colors":(r=x.richColors)!=null?r:V,"data-styled":!(x.jsx||x.unstyled||w),"data-mounted":Z,"data-promise":!!x.promise,"data-swiped":dt,"data-removed":ue,"data-visible":cn,"data-y-position":dn,"data-x-position":qt,"data-index":A,"data-front":Jn,"data-swiping":Me,"data-dismissible":ct,"data-type":Qe,"data-invert":Q,"data-swipe-out":rt,"data-swipe-direction":ze,"data-expanded":!!($||je&&Z),style:{"--index":A,"--toasts-before":A,"--z-index":T.length-A,"--offset":`${ue?ln:bt.current}px`,"--initial-height":je?"auto":`${Dr}px`,...se,...x.style},onDragEnd:()=>{ve(!1),Se(null),he.current=null},onPointerDown:Ce=>{me||!ct||(Bn.current=new Date,zn(bt.current),Ce.target.setPointerCapture(Ce.pointerId),Ce.target.tagName!=="BUTTON"&&(ve(!0),he.current={x:Ce.clientX,y:Ce.clientY}))},onPointerUp:()=>{var Ce,Le,Ve,at;if(rt||!ct)return;he.current=null;let st=Number(((Ce=gt.current)==null?void 0:Ce.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),Rt=Number(((Le=gt.current)==null?void 0:Le.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),Ft=new Date().getTime()-((Ve=Bn.current)==null?void 0:Ve.getTime()),Be=ye==="x"?st:Rt,Ge=Math.abs(Be)/Ft;if(Math.abs(Be)>=GC||Ge>.11){zn(bt.current),(at=x.onDismiss)==null||at.call(x,x),ae(ye==="x"?st>0?"right":"left":Rt>0?"down":"up"),Re(),Et(!0),Gt(!1);return}ve(!1),Se(null)},onPointerMove:Ce=>{var Le,Ve,at,st;if(!he.current||!ct||((Le=window.getSelection())==null?void 0:Le.toString().length)>0)return;let Rt=Ce.clientY-he.current.y,Ft=Ce.clientX-he.current.x,Be=(Ve=e.swipeDirections)!=null?Ve:ZC(De);!ye&&(Math.abs(Ft)>1||Math.abs(Rt)>1)&&Se(Math.abs(Ft)>Math.abs(Rt)?"x":"y");let Ge={x:0,y:0};ye==="y"?(Be.includes("top")||Be.includes("bottom"))&&(Be.includes("top")&&Rt<0||Be.includes("bottom")&&Rt>0)&&(Ge.y=Rt):ye==="x"&&(Be.includes("left")||Be.includes("right"))&&(Be.includes("left")&&Ft<0||Be.includes("right")&&Ft>0)&&(Ge.x=Ft),(Math.abs(Ge.x)>0||Math.abs(Ge.y)>0)&&Gt(!0),(at=gt.current)==null||at.style.setProperty("--swipe-amount-x",`${Ge.x}px`),(st=gt.current)==null||st.style.setProperty("--swipe-amount-y",`${Ge.y}px`)}},yn&&!x.jsx?ne.createElement("button",{"aria-label":xe,"data-disabled":me,"data-close-button":!0,onClick:me||!ct?()=>{}:()=>{var Ce;Re(),(Ce=x.onDismiss)==null||Ce.call(x,x)},className:Ut(q?.closeButton,(o=x?.classNames)==null?void 0:o.closeButton)},(a=fe?.close)!=null?a:RC):null,x.jsx||g.isValidElement(x.title)?x.jsx?x.jsx:typeof x.title=="function"?x.title():x.title:ne.createElement(ne.Fragment,null,Qe||x.icon||x.promise?ne.createElement("div",{"data-icon":"",className:Ut(q?.icon,(i=x?.classNames)==null?void 0:i.icon)},x.promise||x.type==="loading"&&!x.icon?x.icon||At():null,x.type!=="loading"?x.icon||fe?.[Qe]||jC(Qe):null):null,ne.createElement("div",{"data-content":"",className:Ut(q?.content,(l=x?.classNames)==null?void 0:l.content)},ne.createElement("div",{"data-title":"",className:Ut(q?.title,(d=x?.classNames)==null?void 0:d.title)},typeof x.title=="function"?x.title():x.title),x.description?ne.createElement("div",{"data-description":"",className:Ut(Ee,Yt,q?.description,(h=x?.classNames)==null?void 0:h.description)},typeof x.description=="function"?x.description():x.description):null),g.isValidElement(x.cancel)?x.cancel:x.cancel&&qo(x.cancel)?ne.createElement("button",{"data-button":!0,"data-cancel":!0,style:x.cancelButtonStyle||ge,onClick:Ce=>{var Le,Ve;qo(x.cancel)&&ct&&((Ve=(Le=x.cancel).onClick)==null||Ve.call(Le,Ce),Re())},className:Ut(q?.cancelButton,(p=x?.classNames)==null?void 0:p.cancelButton)},x.cancel.label):null,g.isValidElement(x.action)?x.action:x.action&&qo(x.action)?ne.createElement("button",{"data-button":!0,"data-action":!0,style:x.actionButtonStyle||G,onClick:Ce=>{var Le,Ve;qo(x.action)&&((Ve=(Le=x.action).onClick)==null||Ve.call(Le,Ce),!Ce.defaultPrevented&&Re())},className:Ut(q?.actionButton,(y=x?.classNames)==null?void 0:y.actionButton)},x.action.label):null))};function ul(){if(typeof window>"u"||typeof document>"u")return"ltr";let e=document.documentElement.getAttribute("dir");return e==="auto"||!e?window.getComputedStyle(document.documentElement).direction:e}function QC(e,t){let n={};return[e,t].forEach((r,o)=>{let a=o===1,i=a?"--mobile-offset":"--offset",l=a?HC:KC;function d(h){["top","right","bottom","left"].forEach(p=>{n[`${i}-${p}`]=typeof h=="number"?`${h}px`:h})}typeof r=="number"||typeof r=="string"?d(r):typeof r=="object"?["top","right","bottom","left"].forEach(h=>{r[h]===void 0?n[`${i}-${h}`]=l:n[`${i}-${h}`]=typeof r[h]=="number"?`${r[h]}px`:r[h]}):d(l)}),n}var JC=g.forwardRef(function(e,t){let{invert:n,position:r="bottom-right",hotkey:o=["altKey","KeyT"],expand:a,closeButton:i,className:l,offset:d,mobileOffset:h,theme:p="light",richColors:y,duration:v,style:x,visibleToasts:w=UC,toastOptions:_,dir:E=ul(),gap:k=VC,loadingIcon:S,icons:A,containerAriaLabel:T="Notifications",pauseWhenPageIsHidden:$}=e,[U,V]=ne.useState([]),Y=ne.useMemo(()=>Array.from(new Set([r].concat(U.filter(we=>we.position).map(we=>we.position)))),[U,r]),[se,ge]=ne.useState([]),[G,X]=ne.useState(!1),[Ee,Te]=ne.useState(!1),[De,be]=ne.useState(p!=="system"?p:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),Pe=ne.useRef(null),je=o.join("+").replace(/Key/g,"").replace(/Digit/g,""),q=ne.useRef(null),fe=ne.useRef(!1),xe=ne.useCallback(we=>{V(ye=>{var Se;return(Se=ye.find(ze=>ze.id===we.id))!=null&&Se.delete||wt.dismiss(we.id),ye.filter(({id:ze})=>ze!==we.id)})},[]);return ne.useEffect(()=>wt.subscribe(we=>{if(we.dismiss){V(ye=>ye.map(Se=>Se.id===we.id?{...Se,delete:!0}:Se));return}setTimeout(()=>{Dp.flushSync(()=>{V(ye=>{let Se=ye.findIndex(ze=>ze.id===we.id);return Se!==-1?[...ye.slice(0,Se),{...ye[Se],...we},...ye.slice(Se+1)]:[we,...ye]})})})}),[]),ne.useEffect(()=>{if(p!=="system"){be(p);return}if(p==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?be("dark"):be("light")),typeof window>"u")return;let we=window.matchMedia("(prefers-color-scheme: dark)");try{we.addEventListener("change",({matches:ye})=>{be(ye?"dark":"light")})}catch{we.addListener(({matches:Se})=>{try{be(Se?"dark":"light")}catch(ze){console.error(ze)}})}},[p]),ne.useEffect(()=>{U.length<=1&&X(!1)},[U]),ne.useEffect(()=>{let we=ye=>{var Se,ze;o.every(ae=>ye[ae]||ye.code===ae)&&(X(!0),(Se=Pe.current)==null||Se.focus()),ye.code==="Escape"&&(document.activeElement===Pe.current||(ze=Pe.current)!=null&&ze.contains(document.activeElement))&&X(!1)};return document.addEventListener("keydown",we),()=>document.removeEventListener("keydown",we)},[o]),ne.useEffect(()=>{if(Pe.current)return()=>{q.current&&(q.current.focus({preventScroll:!0}),q.current=null,fe.current=!1)}},[Pe.current]),ne.createElement("section",{ref:t,"aria-label":`${T} ${je}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},Y.map((we,ye)=>{var Se;let[ze,ae]=we.split("-");return U.length?ne.createElement("ol",{key:we,dir:E==="auto"?ul():E,tabIndex:-1,ref:Pe,className:l,"data-sonner-toaster":!0,"data-theme":De,"data-y-position":ze,"data-lifted":G&&U.length>1&&!a,"data-x-position":ae,style:{"--front-toast-height":`${((Se=se[0])==null?void 0:Se.height)||0}px`,"--width":`${WC}px`,"--gap":`${k}px`,...x,...QC(d,h)},onBlur:Z=>{fe.current&&!Z.currentTarget.contains(Z.relatedTarget)&&(fe.current=!1,q.current&&(q.current.focus({preventScroll:!0}),q.current=null))},onFocus:Z=>{Z.target instanceof HTMLElement&&Z.target.dataset.dismissible==="false"||fe.current||(fe.current=!0,q.current=Z.relatedTarget)},onMouseEnter:()=>X(!0),onMouseMove:()=>X(!0),onMouseLeave:()=>{Ee||X(!1)},onDragEnd:()=>X(!1),onPointerDown:Z=>{Z.target instanceof HTMLElement&&Z.target.dataset.dismissible==="false"||Te(!0)},onPointerUp:()=>Te(!1)},U.filter(Z=>!Z.position&&ye===0||Z.position===we).map((Z,Ie)=>{var ue,qe;return ne.createElement(XC,{key:Z.id,icons:A,index:Ie,toast:Z,defaultRichColors:y,duration:(ue=_?.duration)!=null?ue:v,className:_?.className,descriptionClassName:_?.descriptionClassName,invert:n,visibleToasts:w,closeButton:(qe=_?.closeButton)!=null?qe:i,interacting:Ee,position:we,style:_?.style,unstyled:_?.unstyled,classNames:_?.classNames,cancelButtonStyle:_?.cancelButtonStyle,actionButtonStyle:_?.actionButtonStyle,removeToast:xe,toasts:U.filter(Me=>Me.position==Z.position),heights:se.filter(Me=>Me.position==Z.position),setHeights:ge,expandByDefault:a,gap:k,loadingIcon:S,expanded:G,pauseWhenPageIsHidden:$,swipeDirections:e.swipeDirections})})):null}))});const e_=({...e})=>u.jsx(JC,{theme:"light",className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...e}),Mi=g.forwardRef(({className:e,...t},n)=>u.jsx("div",{ref:n,className:re("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));Mi.displayName="Card";const Vh=g.forwardRef(({className:e,...t},n)=>u.jsx("div",{ref:n,className:re("flex flex-col space-y-1.5 p-6",e),...t}));Vh.displayName="CardHeader";const Gh=g.forwardRef(({className:e,...t},n)=>u.jsx("div",{ref:n,className:re("text-2xl font-semibold leading-none tracking-tight",e),...t}));Gh.displayName="CardTitle";const Yh=g.forwardRef(({className:e,...t},n)=>u.jsx("div",{ref:n,className:re("text-sm text-muted-foreground",e),...t}));Yh.displayName="CardDescription";const Pi=g.forwardRef(({className:e,...t},n)=>u.jsx("div",{ref:n,className:re("p-6 pt-0",e),...t}));Pi.displayName="CardContent";const t_=g.forwardRef(({className:e,...t},n)=>u.jsx("div",{ref:n,className:re("flex items-center p-6 pt-0",e),...t}));t_.displayName="CardFooter";var Zh={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(cu,function(){var n=function(s,c){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,m){f.__proto__=m}||function(f,m){for(var b in m)Object.prototype.hasOwnProperty.call(m,b)&&(f[b]=m[b])})(s,c)},r=function(){return(r=Object.assign||function(s){for(var c,f=1,m=arguments.length;f<m;f++)for(var b in c=arguments[f])Object.prototype.hasOwnProperty.call(c,b)&&(s[b]=c[b]);return s}).apply(this,arguments)};function o(s,c,f){for(var m,b=0,C=c.length;b<C;b++)!m&&b in c||((m=m||Array.prototype.slice.call(c,0,b))[b]=c[b]);return s.concat(m||Array.prototype.slice.call(c))}var a=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:cu,i=Object.keys,l=Array.isArray;function d(s,c){return typeof c!="object"||i(c).forEach(function(f){s[f]=c[f]}),s}typeof Promise>"u"||a.Promise||(a.Promise=Promise);var h=Object.getPrototypeOf,p={}.hasOwnProperty;function y(s,c){return p.call(s,c)}function v(s,c){typeof c=="function"&&(c=c(h(s))),(typeof Reflect>"u"?i:Reflect.ownKeys)(c).forEach(function(f){w(s,f,c[f])})}var x=Object.defineProperty;function w(s,c,f,m){x(s,c,d(f&&y(f,"get")&&typeof f.get=="function"?{get:f.get,set:f.set,configurable:!0}:{value:f,configurable:!0,writable:!0},m))}function _(s){return{from:function(c){return s.prototype=Object.create(c.prototype),w(s.prototype,"constructor",s),{extend:v.bind(null,s.prototype)}}}}var E=Object.getOwnPropertyDescriptor,k=[].slice;function S(s,c,f){return k.call(s,c,f)}function A(s,c){return c(s)}function T(s){if(!s)throw new Error("Assertion Failed")}function $(s){a.setImmediate?setImmediate(s):setTimeout(s,0)}function U(s,c){if(typeof c=="string"&&y(s,c))return s[c];if(!c)return s;if(typeof c!="string"){for(var f=[],m=0,b=c.length;m<b;++m){var C=U(s,c[m]);f.push(C)}return f}var j=c.indexOf(".");if(j!==-1){var D=s[c.substr(0,j)];return D==null?void 0:U(D,c.substr(j+1))}}function V(s,c,f){if(s&&c!==void 0&&!("isFrozen"in Object&&Object.isFrozen(s)))if(typeof c!="string"&&"length"in c){T(typeof f!="string"&&"length"in f);for(var m=0,b=c.length;m<b;++m)V(s,c[m],f[m])}else{var C,j,D=c.indexOf(".");D!==-1?(C=c.substr(0,D),(j=c.substr(D+1))===""?f===void 0?l(s)&&!isNaN(parseInt(C))?s.splice(C,1):delete s[C]:s[C]=f:V(D=!(D=s[C])||!y(s,C)?s[C]={}:D,j,f)):f===void 0?l(s)&&!isNaN(parseInt(c))?s.splice(c,1):delete s[c]:s[c]=f}}function Y(s){var c,f={};for(c in s)y(s,c)&&(f[c]=s[c]);return f}var se=[].concat;function ge(s){return se.apply([],s)}var Qe="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(ge([8,16,32,64].map(function(s){return["Int","Uint","Float"].map(function(c){return c+s+"Array"})}))).filter(function(s){return a[s]}),G=new Set(Qe.map(function(s){return a[s]})),X=null;function Ee(s){return X=new WeakMap,s=function c(f){if(!f||typeof f!="object")return f;var m=X.get(f);if(m)return m;if(l(f)){m=[],X.set(f,m);for(var b=0,C=f.length;b<C;++b)m.push(c(f[b]))}else if(G.has(f.constructor))m=f;else{var j,D=h(f);for(j in m=D===Object.prototype?{}:Object.create(D),X.set(f,m),f)y(f,j)&&(m[j]=c(f[j]))}return m}(s),X=null,s}var Te={}.toString;function De(s){return Te.call(s).slice(8,-1)}var be=typeof Symbol<"u"?Symbol.iterator:"@@iterator",Pe=typeof be=="symbol"?function(s){var c;return s!=null&&(c=s[be])&&c.apply(s)}:function(){return null};function je(s,c){return c=s.indexOf(c),0<=c&&s.splice(c,1),0<=c}var q={};function fe(s){var c,f,m,b;if(arguments.length===1){if(l(s))return s.slice();if(this===q&&typeof s=="string")return[s];if(b=Pe(s)){for(f=[];!(m=b.next()).done;)f.push(m.value);return f}if(s==null)return[s];if(typeof(c=s.length)!="number")return[s];for(f=new Array(c);c--;)f[c]=s[c];return f}for(c=arguments.length,f=new Array(c);c--;)f[c]=arguments[c];return f}var xe=typeof Symbol<"u"?function(s){return s[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},cn=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],It=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(cn),we={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function ye(s,c){this.name=s,this.message=c}function Se(s,c){return s+". Errors: "+Object.keys(c).map(function(f){return c[f].toString()}).filter(function(f,m,b){return b.indexOf(f)===m}).join(`
`)}function ze(s,c,f,m){this.failures=c,this.failedKeys=m,this.successCount=f,this.message=Se(s,c)}function ae(s,c){this.name="BulkError",this.failures=Object.keys(c).map(function(f){return c[f]}),this.failuresByPos=c,this.message=Se(s,this.failures)}_(ye).from(Error).extend({toString:function(){return this.name+": "+this.message}}),_(ze).from(ye),_(ae).from(ye);var Z=It.reduce(function(s,c){return s[c]=c+"Error",s},{}),Ie=ye,ue=It.reduce(function(s,c){var f=c+"Error";function m(b,C){this.name=f,b?typeof b=="string"?(this.message="".concat(b).concat(C?`
 `+C:""),this.inner=C||null):typeof b=="object"&&(this.message="".concat(b.name," ").concat(b.message),this.inner=b):(this.message=we[c]||f,this.inner=null)}return _(m).from(Ie),s[c]=m,s},{});ue.Syntax=SyntaxError,ue.Type=TypeError,ue.Range=RangeError;var qe=cn.reduce(function(s,c){return s[c+"Error"]=ue[c],s},{}),Me=It.reduce(function(s,c){return["Syntax","Type","Range"].indexOf(c)===-1&&(s[c+"Error"]=ue[c]),s},{});function ve(){}function rt(s){return s}function Et(s,c){return s==null||s===rt?c:function(f){return c(s(f))}}function dt(s,c){return function(){s.apply(this,arguments),c.apply(this,arguments)}}function Gt(s,c){return s===ve?c:function(){var f=s.apply(this,arguments);f!==void 0&&(arguments[0]=f);var m=this.onsuccess,b=this.onerror;this.onsuccess=null,this.onerror=null;var C=c.apply(this,arguments);return m&&(this.onsuccess=this.onsuccess?dt(m,this.onsuccess):m),b&&(this.onerror=this.onerror?dt(b,this.onerror):b),C!==void 0?C:f}}function ln(s,c){return s===ve?c:function(){s.apply(this,arguments);var f=this.onsuccess,m=this.onerror;this.onsuccess=this.onerror=null,c.apply(this,arguments),f&&(this.onsuccess=this.onsuccess?dt(f,this.onsuccess):f),m&&(this.onerror=this.onerror?dt(m,this.onerror):m)}}function zn(s,c){return s===ve?c:function(f){var m=s.apply(this,arguments);d(f,m);var b=this.onsuccess,C=this.onerror;return this.onsuccess=null,this.onerror=null,f=c.apply(this,arguments),b&&(this.onsuccess=this.onsuccess?dt(b,this.onsuccess):b),C&&(this.onerror=this.onerror?dt(C,this.onerror):C),m===void 0?f===void 0?void 0:f:d(m,f)}}function Dr(s,c){return s===ve?c:function(){return c.apply(this,arguments)!==!1&&s.apply(this,arguments)}}function bn(s,c){return s===ve?c:function(){var f=s.apply(this,arguments);if(f&&typeof f.then=="function"){for(var m=this,b=arguments.length,C=new Array(b);b--;)C[b]=arguments[b];return f.then(function(){return c.apply(m,C)})}return c.apply(this,arguments)}}Me.ModifyError=ze,Me.DexieError=ye,Me.BulkError=ae;var ot=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function Bn(s){ot=s}var gt={},Jn=100,Qe=typeof Promise>"u"?[]:function(){var s=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[s,h(s),s];var c=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[c,h(c),s]}(),cn=Qe[0],It=Qe[1],Qe=Qe[2],It=It&&It.then,ct=cn&&cn.constructor,xn=!!Qe,Yt=function(s,c){dn.push([s,c]),yn&&(queueMicrotask(Ve),yn=!1)},$t=!0,yn=!0,Pt=[],Zt=[],bt=rt,jt={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:ve,pgp:!1,env:{},finalize:ve},he=jt,dn=[],qt=0,Xt=[];function ie(s){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var c=this._PSD=he;if(typeof s!="function"){if(s!==gt)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&Re(this,this._value))}this._state=null,this._value=null,++c.ref,function f(m,b){try{b(function(C){if(m._state===null){if(C===m)throw new TypeError("A promise cannot be resolved with itself.");var j=m._lib&&at();C&&typeof C.then=="function"?f(m,function(D,M){C instanceof ie?C._then(D,M):C.then(D,M)}):(m._state=!0,m._value=C,At(m)),j&&st()}},Re.bind(null,m))}catch(C){Re(m,C)}}(this,s)}var Q={get:function(){var s=he,c=yo;function f(m,b){var C=this,j=!s.global&&(s!==he||c!==yo),D=j&&!wn(),M=new ie(function(R,I){Ce(C,new me(Fi(m,s,j,D),Fi(b,s,j,D),R,I,s))});return this._consoleTask&&(M._consoleTask=this._consoleTask),M}return f.prototype=gt,f},set:function(s){w(this,"then",s&&s.prototype===gt?Q:{get:function(){return s},set:Q.set})}};function me(s,c,f,m,b){this.onFulfilled=typeof s=="function"?s:null,this.onRejected=typeof c=="function"?c:null,this.resolve=f,this.reject=m,this.psd=b}function Re(s,c){var f,m;Zt.push(c),s._state===null&&(f=s._lib&&at(),c=bt(c),s._state=!1,s._value=c,m=s,Pt.some(function(b){return b._value===m._value})||Pt.push(m),At(s),f&&st())}function At(s){var c=s._listeners;s._listeners=[];for(var f=0,m=c.length;f<m;++f)Ce(s,c[f]);var b=s._PSD;--b.ref||b.finalize(),qt===0&&(++qt,Yt(function(){--qt==0&&Rt()},[]))}function Ce(s,c){if(s._state!==null){var f=s._state?c.onFulfilled:c.onRejected;if(f===null)return(s._state?c.resolve:c.reject)(s._value);++c.psd.ref,++qt,Yt(Le,[f,s,c])}else s._listeners.push(c)}function Le(s,c,f){try{var m,b=c._value;!c._state&&Zt.length&&(Zt=[]),m=ot&&c._consoleTask?c._consoleTask.run(function(){return s(b)}):s(b),c._state||Zt.indexOf(b)!==-1||function(C){for(var j=Pt.length;j;)if(Pt[--j]._value===C._value)return Pt.splice(j,1)}(c),f.resolve(m)}catch(C){f.reject(C)}finally{--qt==0&&Rt(),--f.psd.ref||f.psd.finalize()}}function Ve(){$n(jt,function(){at()&&st()})}function at(){var s=$t;return yn=$t=!1,s}function st(){var s,c,f;do for(;0<dn.length;)for(s=dn,dn=[],f=s.length,c=0;c<f;++c){var m=s[c];m[0].apply(null,m[1])}while(0<dn.length);yn=$t=!0}function Rt(){var s=Pt;Pt=[],s.forEach(function(m){m._PSD.onunhandled.call(null,m._value,m)});for(var c=Xt.slice(0),f=c.length;f;)c[--f]()}function Ft(s){return new ie(gt,!1,s)}function Be(s,c){var f=he;return function(){var m=at(),b=he;try{return Cn(f,!0),s.apply(this,arguments)}catch(C){c&&c(C)}finally{Cn(b,!1),m&&st()}}}v(ie.prototype,{then:Q,_then:function(s,c){Ce(this,new me(null,null,s,c,he))},catch:function(s){if(arguments.length===1)return this.then(null,s);var c=s,f=arguments[1];return typeof c=="function"?this.then(null,function(m){return(m instanceof c?f:Ft)(m)}):this.then(null,function(m){return(m&&m.name===c?f:Ft)(m)})},finally:function(s){return this.then(function(c){return ie.resolve(s()).then(function(){return c})},function(c){return ie.resolve(s()).then(function(){return Ft(c)})})},timeout:function(s,c){var f=this;return s<1/0?new ie(function(m,b){var C=setTimeout(function(){return b(new ue.Timeout(c))},s);f.then(m,b).finally(clearTimeout.bind(null,C))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&w(ie.prototype,Symbol.toStringTag,"Dexie.Promise"),jt.env=Ri(),v(ie,{all:function(){var s=fe.apply(null,arguments).map(vo);return new ie(function(c,f){s.length===0&&c([]);var m=s.length;s.forEach(function(b,C){return ie.resolve(b).then(function(j){s[C]=j,--m||c(s)},f)})})},resolve:function(s){return s instanceof ie?s:s&&typeof s.then=="function"?new ie(function(c,f){s.then(c,f)}):new ie(gt,!0,s)},reject:Ft,race:function(){var s=fe.apply(null,arguments).map(vo);return new ie(function(c,f){s.map(function(m){return ie.resolve(m).then(c,f)})})},PSD:{get:function(){return he},set:function(s){return he=s}},totalEchoes:{get:function(){return yo}},newPSD:vn,usePSD:$n,scheduler:{get:function(){return Yt},set:function(s){Yt=s}},rejectionMapper:{get:function(){return bt},set:function(s){bt=s}},follow:function(s,c){return new ie(function(f,m){return vn(function(b,C){var j=he;j.unhandleds=[],j.onunhandled=C,j.finalize=dt(function(){var D,M=this;D=function(){M.unhandleds.length===0?b():C(M.unhandleds[0])},Xt.push(function R(){D(),Xt.splice(Xt.indexOf(R),1)}),++qt,Yt(function(){--qt==0&&Rt()},[])},j.finalize),s()},c,f,m)})}}),ct&&(ct.allSettled&&w(ie,"allSettled",function(){var s=fe.apply(null,arguments).map(vo);return new ie(function(c){s.length===0&&c([]);var f=s.length,m=new Array(f);s.forEach(function(b,C){return ie.resolve(b).then(function(j){return m[C]={status:"fulfilled",value:j}},function(j){return m[C]={status:"rejected",reason:j}}).then(function(){return--f||c(m)})})})}),ct.any&&typeof AggregateError<"u"&&w(ie,"any",function(){var s=fe.apply(null,arguments).map(vo);return new ie(function(c,f){s.length===0&&f(new AggregateError([]));var m=s.length,b=new Array(m);s.forEach(function(C,j){return ie.resolve(C).then(function(D){return c(D)},function(D){b[j]=D,--m||f(new AggregateError(b))})})})}),ct.withResolvers&&(ie.withResolvers=ct.withResolvers));var Ge={awaits:0,echoes:0,id:0},Qh=0,bo=[],xo=0,yo=0,Jh=0;function vn(s,c,f,m){var b=he,C=Object.create(b);return C.parent=b,C.ref=0,C.global=!1,C.id=++Jh,jt.env,C.env=xn?{Promise:ie,PromiseProp:{value:ie,configurable:!0,writable:!0},all:ie.all,race:ie.race,allSettled:ie.allSettled,any:ie.any,resolve:ie.resolve,reject:ie.reject}:{},c&&d(C,c),++b.ref,C.finalize=function(){--this.parent.ref||this.parent.finalize()},m=$n(C,s,f,m),C.ref===0&&C.finalize(),m}function er(){return Ge.id||(Ge.id=++Qh),++Ge.awaits,Ge.echoes+=Jn,Ge.id}function wn(){return!!Ge.awaits&&(--Ge.awaits==0&&(Ge.id=0),Ge.echoes=Ge.awaits*Jn,!0)}function vo(s){return Ge.echoes&&s&&s.constructor===ct?(er(),s.then(function(c){return wn(),c},function(c){return wn(),et(c)})):s}function ep(){var s=bo[bo.length-1];bo.pop(),Cn(s,!1)}function Cn(s,c){var f,m=he;(c?!Ge.echoes||xo++&&s===he:!xo||--xo&&s===he)||queueMicrotask(c?function(b){++yo,Ge.echoes&&--Ge.echoes!=0||(Ge.echoes=Ge.awaits=Ge.id=0),bo.push(he),Cn(b,!0)}.bind(null,s):ep),s!==he&&(he=s,m===jt&&(jt.env=Ri()),xn&&(f=jt.env.Promise,c=s.env,(m.global||s.global)&&(Object.defineProperty(a,"Promise",c.PromiseProp),f.all=c.all,f.race=c.race,f.resolve=c.resolve,f.reject=c.reject,c.allSettled&&(f.allSettled=c.allSettled),c.any&&(f.any=c.any))))}function Ri(){var s=a.Promise;return xn?{Promise:s,PromiseProp:Object.getOwnPropertyDescriptor(a,"Promise"),all:s.all,race:s.race,allSettled:s.allSettled,any:s.any,resolve:s.resolve,reject:s.reject}:{}}function $n(s,c,f,m,b){var C=he;try{return Cn(s,!0),c(f,m,b)}finally{Cn(C,!1)}}function Fi(s,c,f,m){return typeof s!="function"?s:function(){var b=he;f&&er(),Cn(c,!0);try{return s.apply(this,arguments)}finally{Cn(b,!1),m&&queueMicrotask(wn)}}}function Ea(s){Promise===ct&&Ge.echoes===0?xo===0?s():enqueueNativeMicroTask(s):setTimeout(s,0)}(""+It).indexOf("[native code]")===-1&&(er=wn=ve);var et=ie.reject,qn="",fn="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",Ii="String expected.",tr=[],wo="__dbnames",ja="readonly",Aa="readwrite";function Un(s,c){return s?c?function(){return s.apply(this,arguments)&&c.apply(this,arguments)}:s:c}var Oi={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function Co(s){return typeof s!="string"||/\./.test(s)?function(c){return c}:function(c){return c[s]===void 0&&s in c&&delete(c=Ee(c))[s],c}}function Li(){throw ue.Type("Entity instances must never be new:ed. Instances are generated by the framework bypassing the constructor.")}function Ue(s,c){try{var f=zi(s),m=zi(c);if(f!==m)return f==="Array"?1:m==="Array"?-1:f==="binary"?1:m==="binary"?-1:f==="string"?1:m==="string"?-1:f==="Date"?1:m!=="Date"?NaN:-1;switch(f){case"number":case"Date":case"string":return c<s?1:s<c?-1:0;case"binary":return function(b,C){for(var j=b.length,D=C.length,M=j<D?j:D,R=0;R<M;++R)if(b[R]!==C[R])return b[R]<C[R]?-1:1;return j===D?0:j<D?-1:1}(Bi(s),Bi(c));case"Array":return function(b,C){for(var j=b.length,D=C.length,M=j<D?j:D,R=0;R<M;++R){var I=Ue(b[R],C[R]);if(I!==0)return I}return j===D?0:j<D?-1:1}(s,c)}}catch{}return NaN}function zi(s){var c=typeof s;return c!="object"?c:ArrayBuffer.isView(s)?"binary":(s=De(s),s==="ArrayBuffer"?"binary":s)}function Bi(s){return s instanceof Uint8Array?s:ArrayBuffer.isView(s)?new Uint8Array(s.buffer,s.byteOffset,s.byteLength):new Uint8Array(s)}function _o(s,c,f){var m=s.schema.yProps;return m?(c&&0<f.numFailures&&(c=c.filter(function(b,C){return!f.failures[C]})),Promise.all(m.map(function(b){return b=b.updatesTable,c?s.db.table(b).where("k").anyOf(c).delete():s.db.table(b).clear()})).then(function(){return f})):f}var $i=(Ze.prototype._trans=function(s,c,f){var m=this._tx||he.trans,b=this.name,C=ot&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(s==="readonly"?"read":"write"," ").concat(this.name));function j(R,I,N){if(!N.schema[b])throw new ue.NotFound("Table "+b+" not part of transaction");return c(N.idbtrans,N)}var D=at();try{var M=m&&m.db._novip===this.db._novip?m===he.trans?m._promise(s,j,f):vn(function(){return m._promise(s,j,f)},{trans:m,transless:he.transless||he}):function R(I,N,z,P){if(I.idbdb&&(I._state.openComplete||he.letThrough||I._vip)){var F=I._createTransaction(N,z,I._dbSchema);try{F.create(),I._state.PR1398_maxLoop=3}catch(L){return L.name===Z.InvalidState&&I.isOpen()&&0<--I._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),I.close({disableAutoOpen:!1}),I.open().then(function(){return R(I,N,z,P)})):et(L)}return F._promise(N,function(L,O){return vn(function(){return he.trans=F,P(L,O,F)})}).then(function(L){if(N==="readwrite")try{F.idbtrans.commit()}catch{}return N==="readonly"?L:F._completion.then(function(){return L})})}if(I._state.openComplete)return et(new ue.DatabaseClosed(I._state.dbOpenError));if(!I._state.isBeingOpened){if(!I._state.autoOpen)return et(new ue.DatabaseClosed);I.open().catch(ve)}return I._state.dbReadyPromise.then(function(){return R(I,N,z,P)})}(this.db,s,[this.name],j);return C&&(M._consoleTask=C,M=M.catch(function(R){return console.trace(R),et(R)})),M}finally{D&&st()}},Ze.prototype.get=function(s,c){var f=this;return s&&s.constructor===Object?this.where(s).first(c):s==null?et(new ue.Type("Invalid argument to Table.get()")):this._trans("readonly",function(m){return f.core.get({trans:m,key:s}).then(function(b){return f.hook.reading.fire(b)})}).then(c)},Ze.prototype.where=function(s){if(typeof s=="string")return new this.db.WhereClause(this,s);if(l(s))return new this.db.WhereClause(this,"[".concat(s.join("+"),"]"));var c=i(s);if(c.length===1)return this.where(c[0]).equals(s[c[0]]);var f=this.schema.indexes.concat(this.schema.primKey).filter(function(D){if(D.compound&&c.every(function(R){return 0<=D.keyPath.indexOf(R)})){for(var M=0;M<c.length;++M)if(c.indexOf(D.keyPath[M])===-1)return!1;return!0}return!1}).sort(function(D,M){return D.keyPath.length-M.keyPath.length})[0];if(f&&this.db._maxKey!==qn){var C=f.keyPath.slice(0,c.length);return this.where(C).equals(C.map(function(M){return s[M]}))}!f&&ot&&console.warn("The query ".concat(JSON.stringify(s)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(c.join("+"),"]"));var m=this.schema.idxByName;function b(D,M){return Ue(D,M)===0}var j=c.reduce(function(N,M){var R=N[0],I=N[1],N=m[M],z=s[M];return[R||N,R||!N?Un(I,N&&N.multi?function(P){return P=U(P,M),l(P)&&P.some(function(F){return b(z,F)})}:function(P){return b(z,U(P,M))}):I]},[null,null]),C=j[0],j=j[1];return C?this.where(C.name).equals(s[C.keyPath]).filter(j):f?this.filter(j):this.where(c).equals("")},Ze.prototype.filter=function(s){return this.toCollection().and(s)},Ze.prototype.count=function(s){return this.toCollection().count(s)},Ze.prototype.offset=function(s){return this.toCollection().offset(s)},Ze.prototype.limit=function(s){return this.toCollection().limit(s)},Ze.prototype.each=function(s){return this.toCollection().each(s)},Ze.prototype.toArray=function(s){return this.toCollection().toArray(s)},Ze.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},Ze.prototype.orderBy=function(s){return new this.db.Collection(new this.db.WhereClause(this,l(s)?"[".concat(s.join("+"),"]"):s))},Ze.prototype.reverse=function(){return this.toCollection().reverse()},Ze.prototype.mapToClass=function(s){var c,f=this.db,m=this.name;function b(){return c!==null&&c.apply(this,arguments)||this}(this.schema.mappedClass=s).prototype instanceof Li&&(function(M,R){if(typeof R!="function"&&R!==null)throw new TypeError("Class extends value "+String(R)+" is not a constructor or null");function I(){this.constructor=M}n(M,R),M.prototype=R===null?Object.create(R):(I.prototype=R.prototype,new I)}(b,c=s),Object.defineProperty(b.prototype,"db",{get:function(){return f},enumerable:!1,configurable:!0}),b.prototype.table=function(){return m},s=b);for(var C=new Set,j=s.prototype;j;j=h(j))Object.getOwnPropertyNames(j).forEach(function(M){return C.add(M)});function D(M){if(!M)return M;var R,I=Object.create(s.prototype);for(R in M)if(!C.has(R))try{I[R]=M[R]}catch{}return I}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=D,this.hook("reading",D),s},Ze.prototype.defineClass=function(){return this.mapToClass(function(s){d(this,s)})},Ze.prototype.add=function(s,c){var f=this,m=this.schema.primKey,b=m.auto,C=m.keyPath,j=s;return C&&b&&(j=Co(C)(s)),this._trans("readwrite",function(D){return f.core.mutate({trans:D,type:"add",keys:c!=null?[c]:null,values:[j]})}).then(function(D){return D.numFailures?ie.reject(D.failures[0]):D.lastResult}).then(function(D){if(C)try{V(s,C,D)}catch{}return D})},Ze.prototype.update=function(s,c){return typeof s!="object"||l(s)?this.where(":id").equals(s).modify(c):(s=U(s,this.schema.primKey.keyPath),s===void 0?et(new ue.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(s).modify(c))},Ze.prototype.put=function(s,c){var f=this,m=this.schema.primKey,b=m.auto,C=m.keyPath,j=s;return C&&b&&(j=Co(C)(s)),this._trans("readwrite",function(D){return f.core.mutate({trans:D,type:"put",values:[j],keys:c!=null?[c]:null})}).then(function(D){return D.numFailures?ie.reject(D.failures[0]):D.lastResult}).then(function(D){if(C)try{V(s,C,D)}catch{}return D})},Ze.prototype.delete=function(s){var c=this;return this._trans("readwrite",function(f){return c.core.mutate({trans:f,type:"delete",keys:[s]}).then(function(m){return _o(c,[s],m)}).then(function(m){return m.numFailures?ie.reject(m.failures[0]):void 0})})},Ze.prototype.clear=function(){var s=this;return this._trans("readwrite",function(c){return s.core.mutate({trans:c,type:"deleteRange",range:Oi}).then(function(f){return _o(s,null,f)})}).then(function(c){return c.numFailures?ie.reject(c.failures[0]):void 0})},Ze.prototype.bulkGet=function(s){var c=this;return this._trans("readonly",function(f){return c.core.getMany({keys:s,trans:f}).then(function(m){return m.map(function(b){return c.hook.reading.fire(b)})})})},Ze.prototype.bulkAdd=function(s,c,f){var m=this,b=Array.isArray(c)?c:void 0,C=(f=f||(b?void 0:c))?f.allKeys:void 0;return this._trans("readwrite",function(j){var R=m.schema.primKey,D=R.auto,R=R.keyPath;if(R&&b)throw new ue.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(b&&b.length!==s.length)throw new ue.InvalidArgument("Arguments objects and keys must have the same length");var M=s.length,R=R&&D?s.map(Co(R)):s;return m.core.mutate({trans:j,type:"add",keys:b,values:R,wantResults:C}).then(function(F){var N=F.numFailures,z=F.results,P=F.lastResult,F=F.failures;if(N===0)return C?z:P;throw new ae("".concat(m.name,".bulkAdd(): ").concat(N," of ").concat(M," operations failed"),F)})})},Ze.prototype.bulkPut=function(s,c,f){var m=this,b=Array.isArray(c)?c:void 0,C=(f=f||(b?void 0:c))?f.allKeys:void 0;return this._trans("readwrite",function(j){var R=m.schema.primKey,D=R.auto,R=R.keyPath;if(R&&b)throw new ue.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(b&&b.length!==s.length)throw new ue.InvalidArgument("Arguments objects and keys must have the same length");var M=s.length,R=R&&D?s.map(Co(R)):s;return m.core.mutate({trans:j,type:"put",keys:b,values:R,wantResults:C}).then(function(F){var N=F.numFailures,z=F.results,P=F.lastResult,F=F.failures;if(N===0)return C?z:P;throw new ae("".concat(m.name,".bulkPut(): ").concat(N," of ").concat(M," operations failed"),F)})})},Ze.prototype.bulkUpdate=function(s){var c=this,f=this.core,m=s.map(function(j){return j.key}),b=s.map(function(j){return j.changes}),C=[];return this._trans("readwrite",function(j){return f.getMany({trans:j,keys:m,cache:"clone"}).then(function(D){var M=[],R=[];s.forEach(function(N,z){var P=N.key,F=N.changes,L=D[z];if(L){for(var O=0,B=Object.keys(F);O<B.length;O++){var K=B[O],H=F[K];if(K===c.schema.primKey.keyPath){if(Ue(H,P)!==0)throw new ue.Constraint("Cannot update primary key in bulkUpdate()")}else V(L,K,H)}C.push(z),M.push(P),R.push(L)}});var I=M.length;return f.mutate({trans:j,type:"put",keys:M,values:R,updates:{keys:m,changeSpecs:b}}).then(function(N){var z=N.numFailures,P=N.failures;if(z===0)return I;for(var F=0,L=Object.keys(P);F<L.length;F++){var O,B=L[F],K=C[Number(B)];K!=null&&(O=P[B],delete P[B],P[K]=O)}throw new ae("".concat(c.name,".bulkUpdate(): ").concat(z," of ").concat(I," operations failed"),P)})})})},Ze.prototype.bulkDelete=function(s){var c=this,f=s.length;return this._trans("readwrite",function(m){return c.core.mutate({trans:m,type:"delete",keys:s}).then(function(b){return _o(c,s,b)})}).then(function(j){var b=j.numFailures,C=j.lastResult,j=j.failures;if(b===0)return C;throw new ae("".concat(c.name,".bulkDelete(): ").concat(b," of ").concat(f," operations failed"),j)})},Ze);function Ze(){}function Nr(s){function c(j,D){if(D){for(var M=arguments.length,R=new Array(M-1);--M;)R[M-1]=arguments[M];return f[j].subscribe.apply(null,R),s}if(typeof j=="string")return f[j]}var f={};c.addEventType=C;for(var m=1,b=arguments.length;m<b;++m)C(arguments[m]);return c;function C(j,D,M){if(typeof j!="object"){var R;D=D||Dr;var I={subscribers:[],fire:M=M||ve,subscribe:function(N){I.subscribers.indexOf(N)===-1&&(I.subscribers.push(N),I.fire=D(I.fire,N))},unsubscribe:function(N){I.subscribers=I.subscribers.filter(function(z){return z!==N}),I.fire=I.subscribers.reduce(D,M)}};return f[j]=c[j]=I}i(R=j).forEach(function(N){var z=R[N];if(l(z))C(N,R[N][0],R[N][1]);else{if(z!=="asap")throw new ue.InvalidArgument("Invalid event config");var P=C(N,rt,function(){for(var F=arguments.length,L=new Array(F);F--;)L[F]=arguments[F];P.subscribers.forEach(function(O){$(function(){O.apply(null,L)})})})}})}}function Tr(s,c){return _(c).from({prototype:s}),c}function nr(s,c){return!(s.filter||s.algorithm||s.or)&&(c?s.justLimit:!s.replayFilter)}function Da(s,c){s.filter=Un(s.filter,c)}function Na(s,c,f){var m=s.replayFilter;s.replayFilter=m?function(){return Un(m(),c())}:c,s.justLimit=f&&!m}function ko(s,c){if(s.isPrimKey)return c.primaryKey;var f=c.getIndexByKeyPath(s.index);if(!f)throw new ue.Schema("KeyPath "+s.index+" on object store "+c.name+" is not indexed");return f}function qi(s,c,f){var m=ko(s,c.schema);return c.openCursor({trans:f,values:!s.keysOnly,reverse:s.dir==="prev",unique:!!s.unique,query:{index:m,range:s.range}})}function So(s,c,f,m){var b=s.replayFilter?Un(s.filter,s.replayFilter()):s.filter;if(s.or){var C={},j=function(D,M,R){var I,N;b&&!b(M,R,function(z){return M.stop(z)},function(z){return M.fail(z)})||((N=""+(I=M.primaryKey))=="[object ArrayBuffer]"&&(N=""+new Uint8Array(I)),y(C,N)||(C[N]=!0,c(D,M,R)))};return Promise.all([s.or._iterate(j,f),Ui(qi(s,m,f),s.algorithm,j,!s.keysOnly&&s.valueMapper)])}return Ui(qi(s,m,f),Un(s.algorithm,b),c,!s.keysOnly&&s.valueMapper)}function Ui(s,c,f,m){var b=Be(m?function(C,j,D){return f(m(C),j,D)}:f);return s.then(function(C){if(C)return C.start(function(){var j=function(){return C.continue()};c&&!c(C,function(D){return j=D},function(D){C.stop(D),j=ve},function(D){C.fail(D),j=ve})||b(C.value,C,function(D){return j=D}),j()})})}var Mr=(Ki.prototype.execute=function(s){var c=this["@@propmod"];if(c.add!==void 0){var f=c.add;if(l(f))return o(o([],l(s)?s:[],!0),f).sort();if(typeof f=="number")return(Number(s)||0)+f;if(typeof f=="bigint")try{return BigInt(s)+f}catch{return BigInt(0)+f}throw new TypeError("Invalid term ".concat(f))}if(c.remove!==void 0){var m=c.remove;if(l(m))return l(s)?s.filter(function(b){return!m.includes(b)}).sort():[];if(typeof m=="number")return Number(s)-m;if(typeof m=="bigint")try{return BigInt(s)-m}catch{return BigInt(0)-m}throw new TypeError("Invalid subtrahend ".concat(m))}return f=(f=c.replacePrefix)===null||f===void 0?void 0:f[0],f&&typeof s=="string"&&s.startsWith(f)?c.replacePrefix[1]+s.substring(f.length):s},Ki);function Ki(s){this["@@propmod"]=s}var tp=(He.prototype._read=function(s,c){var f=this._ctx;return f.error?f.table._trans(null,et.bind(null,f.error)):f.table._trans("readonly",s).then(c)},He.prototype._write=function(s){var c=this._ctx;return c.error?c.table._trans(null,et.bind(null,c.error)):c.table._trans("readwrite",s,"locked")},He.prototype._addAlgorithm=function(s){var c=this._ctx;c.algorithm=Un(c.algorithm,s)},He.prototype._iterate=function(s,c){return So(this._ctx,s,c,this._ctx.table.core)},He.prototype.clone=function(s){var c=Object.create(this.constructor.prototype),f=Object.create(this._ctx);return s&&d(f,s),c._ctx=f,c},He.prototype.raw=function(){return this._ctx.valueMapper=null,this},He.prototype.each=function(s){var c=this._ctx;return this._read(function(f){return So(c,s,f,c.table.core)})},He.prototype.count=function(s){var c=this;return this._read(function(f){var m=c._ctx,b=m.table.core;if(nr(m,!0))return b.count({trans:f,query:{index:ko(m,b.schema),range:m.range}}).then(function(j){return Math.min(j,m.limit)});var C=0;return So(m,function(){return++C,!1},f,b).then(function(){return C})}).then(s)},He.prototype.sortBy=function(s,c){var f=s.split(".").reverse(),m=f[0],b=f.length-1;function C(M,R){return R?C(M[f[R]],R-1):M[m]}var j=this._ctx.dir==="next"?1:-1;function D(M,R){return Ue(C(M,b),C(R,b))*j}return this.toArray(function(M){return M.sort(D)}).then(c)},He.prototype.toArray=function(s){var c=this;return this._read(function(f){var m=c._ctx;if(m.dir==="next"&&nr(m,!0)&&0<m.limit){var b=m.valueMapper,C=ko(m,m.table.core.schema);return m.table.core.query({trans:f,limit:m.limit,values:!0,query:{index:C,range:m.range}}).then(function(D){return D=D.result,b?D.map(b):D})}var j=[];return So(m,function(D){return j.push(D)},f,m.table.core).then(function(){return j})},s)},He.prototype.offset=function(s){var c=this._ctx;return s<=0||(c.offset+=s,nr(c)?Na(c,function(){var f=s;return function(m,b){return f===0||(f===1?--f:b(function(){m.advance(f),f=0}),!1)}}):Na(c,function(){var f=s;return function(){return--f<0}})),this},He.prototype.limit=function(s){return this._ctx.limit=Math.min(this._ctx.limit,s),Na(this._ctx,function(){var c=s;return function(f,m,b){return--c<=0&&m(b),0<=c}},!0),this},He.prototype.until=function(s,c){return Da(this._ctx,function(f,m,b){return!s(f.value)||(m(b),c)}),this},He.prototype.first=function(s){return this.limit(1).toArray(function(c){return c[0]}).then(s)},He.prototype.last=function(s){return this.reverse().first(s)},He.prototype.filter=function(s){var c;return Da(this._ctx,function(f){return s(f.value)}),(c=this._ctx).isMatch=Un(c.isMatch,s),this},He.prototype.and=function(s){return this.filter(s)},He.prototype.or=function(s){return new this.db.WhereClause(this._ctx.table,s,this)},He.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},He.prototype.desc=function(){return this.reverse()},He.prototype.eachKey=function(s){var c=this._ctx;return c.keysOnly=!c.isMatch,this.each(function(f,m){s(m.key,m)})},He.prototype.eachUniqueKey=function(s){return this._ctx.unique="unique",this.eachKey(s)},He.prototype.eachPrimaryKey=function(s){var c=this._ctx;return c.keysOnly=!c.isMatch,this.each(function(f,m){s(m.primaryKey,m)})},He.prototype.keys=function(s){var c=this._ctx;c.keysOnly=!c.isMatch;var f=[];return this.each(function(m,b){f.push(b.key)}).then(function(){return f}).then(s)},He.prototype.primaryKeys=function(s){var c=this._ctx;if(c.dir==="next"&&nr(c,!0)&&0<c.limit)return this._read(function(m){var b=ko(c,c.table.core.schema);return c.table.core.query({trans:m,values:!1,limit:c.limit,query:{index:b,range:c.range}})}).then(function(m){return m.result}).then(s);c.keysOnly=!c.isMatch;var f=[];return this.each(function(m,b){f.push(b.primaryKey)}).then(function(){return f}).then(s)},He.prototype.uniqueKeys=function(s){return this._ctx.unique="unique",this.keys(s)},He.prototype.firstKey=function(s){return this.limit(1).keys(function(c){return c[0]}).then(s)},He.prototype.lastKey=function(s){return this.reverse().firstKey(s)},He.prototype.distinct=function(){var s=this._ctx,s=s.index&&s.table.schema.idxByName[s.index];if(!s||!s.multi)return this;var c={};return Da(this._ctx,function(b){var m=b.primaryKey.toString(),b=y(c,m);return c[m]=!0,!b}),this},He.prototype.modify=function(s){var c=this,f=this._ctx;return this._write(function(m){var b,C,j;j=typeof s=="function"?s:(b=i(s),C=b.length,function(B){for(var K=!1,H=0;H<C;++H){var W=b[H],J=s[W],oe=U(B,W);J instanceof Mr?(V(B,W,J.execute(oe)),K=!0):oe!==J&&(V(B,W,J),K=!0)}return K});var D=f.table.core,N=D.schema.primaryKey,M=N.outbound,R=N.extractKey,I=200,N=c.db._options.modifyChunkSize;N&&(I=typeof N=="object"?N[D.name]||N["*"]||200:N);function z(B,W){var H=W.failures,W=W.numFailures;F+=B-W;for(var J=0,oe=i(H);J<oe.length;J++){var ee=oe[J];P.push(H[ee])}}var P=[],F=0,L=[],O=s===Hi;return c.clone().primaryKeys().then(function(B){function K(W){var J=Math.min(I,B.length-W),oe=B.slice(W,W+J);return(O?Promise.resolve([]):D.getMany({trans:m,keys:oe,cache:"immutable"})).then(function(ee){var te=[],ce=[],le=M?[]:null,de=O?oe:[];if(!O)for(var Fe=0;Fe<J;++Fe){var Ke=ee[Fe],Ne={value:Ee(Ke),primKey:B[W+Fe]};j.call(Ne,Ne.value,Ne)!==!1&&(Ne.value==null?de.push(B[W+Fe]):M||Ue(R(Ke),R(Ne.value))===0?(ce.push(Ne.value),M&&le.push(B[W+Fe])):(de.push(B[W+Fe]),te.push(Ne.value)))}return Promise.resolve(0<te.length&&D.mutate({trans:m,type:"add",values:te}).then(function(Je){for(var Ae in Je.failures)de.splice(parseInt(Ae),1);z(te.length,Je)})).then(function(){return(0<ce.length||H&&typeof s=="object")&&D.mutate({trans:m,type:"put",keys:le,values:ce,criteria:H,changeSpec:typeof s!="function"&&s,isAdditionalChunk:0<W}).then(function(Je){return z(ce.length,Je)})}).then(function(){return(0<de.length||H&&O)&&D.mutate({trans:m,type:"delete",keys:de,criteria:H,isAdditionalChunk:0<W}).then(function(Je){return _o(f.table,de,Je)}).then(function(Je){return z(de.length,Je)})}).then(function(){return B.length>W+J&&K(W+I)})})}var H=nr(f)&&f.limit===1/0&&(typeof s!="function"||O)&&{index:f.index,range:f.range};return K(0).then(function(){if(0<P.length)throw new ze("Error modifying one or more objects",P,F,L);return B.length})})})},He.prototype.delete=function(){var s=this._ctx,c=s.range;return!nr(s)||s.table.schema.yProps||!s.isPrimKey&&c.type!==3?this.modify(Hi):this._write(function(f){var m=s.table.core.schema.primaryKey,b=c;return s.table.core.count({trans:f,query:{index:m,range:b}}).then(function(C){return s.table.core.mutate({trans:f,type:"deleteRange",range:b}).then(function(M){var D=M.failures,M=M.numFailures;if(M)throw new ze("Could not delete some values",Object.keys(D).map(function(R){return D[R]}),C-M);return C-M})})})},He);function He(){}var Hi=function(s,c){return c.value=null};function np(s,c){return s<c?-1:s===c?0:1}function rp(s,c){return c<s?-1:s===c?0:1}function Dt(s,c,f){return s=s instanceof Vi?new s.Collection(s):s,s._ctx.error=new(f||TypeError)(c),s}function rr(s){return new s.Collection(s,function(){return Wi("")}).limit(0)}function Eo(s,c,f,m){var b,C,j,D,M,R,I,N=f.length;if(!f.every(function(F){return typeof F=="string"}))return Dt(s,Ii);function z(F){b=F==="next"?function(O){return O.toUpperCase()}:function(O){return O.toLowerCase()},C=F==="next"?function(O){return O.toLowerCase()}:function(O){return O.toUpperCase()},j=F==="next"?np:rp;var L=f.map(function(O){return{lower:C(O),upper:b(O)}}).sort(function(O,B){return j(O.lower,B.lower)});D=L.map(function(O){return O.upper}),M=L.map(function(O){return O.lower}),I=(R=F)==="next"?"":m}z("next"),s=new s.Collection(s,function(){return _n(D[0],M[N-1]+m)}),s._ondirectionchange=function(F){z(F)};var P=0;return s._addAlgorithm(function(F,L,O){var B=F.key;if(typeof B!="string")return!1;var K=C(B);if(c(K,M,P))return!0;for(var H=null,W=P;W<N;++W){var J=function(oe,ee,te,ce,le,de){for(var Fe=Math.min(oe.length,ce.length),Ke=-1,Ne=0;Ne<Fe;++Ne){var Je=ee[Ne];if(Je!==ce[Ne])return le(oe[Ne],te[Ne])<0?oe.substr(0,Ne)+te[Ne]+te.substr(Ne+1):le(oe[Ne],ce[Ne])<0?oe.substr(0,Ne)+ce[Ne]+te.substr(Ne+1):0<=Ke?oe.substr(0,Ke)+ee[Ke]+te.substr(Ke+1):null;le(oe[Ne],Je)<0&&(Ke=Ne)}return Fe<ce.length&&de==="next"?oe+te.substr(oe.length):Fe<oe.length&&de==="prev"?oe.substr(0,te.length):Ke<0?null:oe.substr(0,Ke)+ce[Ke]+te.substr(Ke+1)}(B,K,D[W],M[W],j,R);J===null&&H===null?P=W+1:(H===null||0<j(H,J))&&(H=J)}return L(H!==null?function(){F.continue(H+I)}:O),!1}),s}function _n(s,c,f,m){return{type:2,lower:s,upper:c,lowerOpen:f,upperOpen:m}}function Wi(s){return{type:1,lower:s,upper:s}}var Vi=(Object.defineProperty(it.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),it.prototype.between=function(s,c,f,m){f=f!==!1,m=m===!0;try{return 0<this._cmp(s,c)||this._cmp(s,c)===0&&(f||m)&&(!f||!m)?rr(this):new this.Collection(this,function(){return _n(s,c,!f,!m)})}catch{return Dt(this,fn)}},it.prototype.equals=function(s){return s==null?Dt(this,fn):new this.Collection(this,function(){return Wi(s)})},it.prototype.above=function(s){return s==null?Dt(this,fn):new this.Collection(this,function(){return _n(s,void 0,!0)})},it.prototype.aboveOrEqual=function(s){return s==null?Dt(this,fn):new this.Collection(this,function(){return _n(s,void 0,!1)})},it.prototype.below=function(s){return s==null?Dt(this,fn):new this.Collection(this,function(){return _n(void 0,s,!1,!0)})},it.prototype.belowOrEqual=function(s){return s==null?Dt(this,fn):new this.Collection(this,function(){return _n(void 0,s)})},it.prototype.startsWith=function(s){return typeof s!="string"?Dt(this,Ii):this.between(s,s+qn,!0,!0)},it.prototype.startsWithIgnoreCase=function(s){return s===""?this.startsWith(s):Eo(this,function(c,f){return c.indexOf(f[0])===0},[s],qn)},it.prototype.equalsIgnoreCase=function(s){return Eo(this,function(c,f){return c===f[0]},[s],"")},it.prototype.anyOfIgnoreCase=function(){var s=fe.apply(q,arguments);return s.length===0?rr(this):Eo(this,function(c,f){return f.indexOf(c)!==-1},s,"")},it.prototype.startsWithAnyOfIgnoreCase=function(){var s=fe.apply(q,arguments);return s.length===0?rr(this):Eo(this,function(c,f){return f.some(function(m){return c.indexOf(m)===0})},s,qn)},it.prototype.anyOf=function(){var s=this,c=fe.apply(q,arguments),f=this._cmp;try{c.sort(f)}catch{return Dt(this,fn)}if(c.length===0)return rr(this);var m=new this.Collection(this,function(){return _n(c[0],c[c.length-1])});m._ondirectionchange=function(C){f=C==="next"?s._ascending:s._descending,c.sort(f)};var b=0;return m._addAlgorithm(function(C,j,D){for(var M=C.key;0<f(M,c[b]);)if(++b===c.length)return j(D),!1;return f(M,c[b])===0||(j(function(){C.continue(c[b])}),!1)}),m},it.prototype.notEqual=function(s){return this.inAnyRange([[-1/0,s],[s,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},it.prototype.noneOf=function(){var s=fe.apply(q,arguments);if(s.length===0)return new this.Collection(this);try{s.sort(this._ascending)}catch{return Dt(this,fn)}var c=s.reduce(function(f,m){return f?f.concat([[f[f.length-1][1],m]]):[[-1/0,m]]},null);return c.push([s[s.length-1],this.db._maxKey]),this.inAnyRange(c,{includeLowers:!1,includeUppers:!1})},it.prototype.inAnyRange=function(B,c){var f=this,m=this._cmp,b=this._ascending,C=this._descending,j=this._min,D=this._max;if(B.length===0)return rr(this);if(!B.every(function(K){return K[0]!==void 0&&K[1]!==void 0&&b(K[0],K[1])<=0}))return Dt(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",ue.InvalidArgument);var M=!c||c.includeLowers!==!1,R=c&&c.includeUppers===!0,I,N=b;function z(K,H){return N(K[0],H[0])}try{(I=B.reduce(function(K,H){for(var W=0,J=K.length;W<J;++W){var oe=K[W];if(m(H[0],oe[1])<0&&0<m(H[1],oe[0])){oe[0]=j(oe[0],H[0]),oe[1]=D(oe[1],H[1]);break}}return W===J&&K.push(H),K},[])).sort(z)}catch{return Dt(this,fn)}var P=0,F=R?function(K){return 0<b(K,I[P][1])}:function(K){return 0<=b(K,I[P][1])},L=M?function(K){return 0<C(K,I[P][0])}:function(K){return 0<=C(K,I[P][0])},O=F,B=new this.Collection(this,function(){return _n(I[0][0],I[I.length-1][1],!M,!R)});return B._ondirectionchange=function(K){N=K==="next"?(O=F,b):(O=L,C),I.sort(z)},B._addAlgorithm(function(K,H,W){for(var J,oe=K.key;O(oe);)if(++P===I.length)return H(W),!1;return!F(J=oe)&&!L(J)||(f._cmp(oe,I[P][1])===0||f._cmp(oe,I[P][0])===0||H(function(){N===b?K.continue(I[P][0]):K.continue(I[P][1])}),!1)}),B},it.prototype.startsWithAnyOf=function(){var s=fe.apply(q,arguments);return s.every(function(c){return typeof c=="string"})?s.length===0?rr(this):this.inAnyRange(s.map(function(c){return[c,c+qn]})):Dt(this,"startsWithAnyOf() only works with strings")},it);function it(){}function Qt(s){return Be(function(c){return Pr(c),s(c.target.error),!1})}function Pr(s){s.stopPropagation&&s.stopPropagation(),s.preventDefault&&s.preventDefault()}var Rr="storagemutated",Ta="x-storagemutated-1",kn=Nr(null,Rr),op=(Jt.prototype._lock=function(){return T(!he.global),++this._reculock,this._reculock!==1||he.global||(he.lockOwnerFor=this),this},Jt.prototype._unlock=function(){if(T(!he.global),--this._reculock==0)for(he.global||(he.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var s=this._blockedFuncs.shift();try{$n(s[1],s[0])}catch{}}return this},Jt.prototype._locked=function(){return this._reculock&&he.lockOwnerFor!==this},Jt.prototype.create=function(s){var c=this;if(!this.mode)return this;var f=this.db.idbdb,m=this.db._state.dbOpenError;if(T(!this.idbtrans),!s&&!f)switch(m&&m.name){case"DatabaseClosedError":throw new ue.DatabaseClosed(m);case"MissingAPIError":throw new ue.MissingAPI(m.message,m);default:throw new ue.OpenFailed(m)}if(!this.active)throw new ue.TransactionInactive;return T(this._completion._state===null),(s=this.idbtrans=s||(this.db.core||f).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=Be(function(b){Pr(b),c._reject(s.error)}),s.onabort=Be(function(b){Pr(b),c.active&&c._reject(new ue.Abort(s.error)),c.active=!1,c.on("abort").fire(b)}),s.oncomplete=Be(function(){c.active=!1,c._resolve(),"mutatedParts"in s&&kn.storagemutated.fire(s.mutatedParts)}),this},Jt.prototype._promise=function(s,c,f){var m=this;if(s==="readwrite"&&this.mode!=="readwrite")return et(new ue.ReadOnly("Transaction is readonly"));if(!this.active)return et(new ue.TransactionInactive);if(this._locked())return new ie(function(C,j){m._blockedFuncs.push([function(){m._promise(s,c,f).then(C,j)},he])});if(f)return vn(function(){var C=new ie(function(j,D){m._lock();var M=c(j,D,m);M&&M.then&&M.then(j,D)});return C.finally(function(){return m._unlock()}),C._lib=!0,C});var b=new ie(function(C,j){var D=c(C,j,m);D&&D.then&&D.then(C,j)});return b._lib=!0,b},Jt.prototype._root=function(){return this.parent?this.parent._root():this},Jt.prototype.waitFor=function(s){var c,f=this._root(),m=ie.resolve(s);f._waitingFor?f._waitingFor=f._waitingFor.then(function(){return m}):(f._waitingFor=m,f._waitingQueue=[],c=f.idbtrans.objectStore(f.storeNames[0]),function C(){for(++f._spinCount;f._waitingQueue.length;)f._waitingQueue.shift()();f._waitingFor&&(c.get(-1/0).onsuccess=C)}());var b=f._waitingFor;return new ie(function(C,j){m.then(function(D){return f._waitingQueue.push(Be(C.bind(null,D)))},function(D){return f._waitingQueue.push(Be(j.bind(null,D)))}).finally(function(){f._waitingFor===b&&(f._waitingFor=null)})})},Jt.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new ue.Abort))},Jt.prototype.table=function(s){var c=this._memoizedTables||(this._memoizedTables={});if(y(c,s))return c[s];var f=this.schema[s];if(!f)throw new ue.NotFound("Table "+s+" not part of transaction");return f=new this.db.Table(s,f,this),f.core=this.db.core.table(s),c[s]=f},Jt);function Jt(){}function Ma(s,c,f,m,b,C,j,D){return{name:s,keyPath:c,unique:f,multi:m,auto:b,compound:C,src:(f&&!j?"&":"")+(m?"*":"")+(b?"++":"")+Gi(c),type:D}}function Gi(s){return typeof s=="string"?s:s?"["+[].join.call(s,"+")+"]":""}function Pa(s,c,f){return{name:s,primKey:c,indexes:f,mappedClass:null,idxByName:(m=function(b){return[b.name,b]},f.reduce(function(b,C,j){return j=m(C,j),j&&(b[j[0]]=j[1]),b},{}))};var m}var Fr=function(s){try{return s.only([[]]),Fr=function(){return[[]]},[[]]}catch{return Fr=function(){return qn},qn}};function Ra(s){return s==null?function(){}:typeof s=="string"?(c=s).split(".").length===1?function(f){return f[c]}:function(f){return U(f,c)}:function(f){return U(f,s)};var c}function Yi(s){return[].slice.call(s)}var ap=0;function Ir(s){return s==null?":id":typeof s=="string"?s:"[".concat(s.join("+"),"]")}function sp(s,c,M){function m(O){if(O.type===3)return null;if(O.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var P=O.lower,F=O.upper,L=O.lowerOpen,O=O.upperOpen;return P===void 0?F===void 0?null:c.upperBound(F,!!O):F===void 0?c.lowerBound(P,!!L):c.bound(P,F,!!L,!!O)}function b(z){var P,F=z.name;return{name:F,schema:z,mutate:function(L){var O=L.trans,B=L.type,K=L.keys,H=L.values,W=L.range;return new Promise(function(J,oe){J=Be(J);var ee=O.objectStore(F),te=ee.keyPath==null,ce=B==="put"||B==="add";if(!ce&&B!=="delete"&&B!=="deleteRange")throw new Error("Invalid operation type: "+B);var le,de=(K||H||{length:1}).length;if(K&&H&&K.length!==H.length)throw new Error("Given keys array must have same length as given values array.");if(de===0)return J({numFailures:0,failures:{},results:[],lastResult:void 0});function Fe(xt){++Je,Pr(xt)}var Ke=[],Ne=[],Je=0;if(B==="deleteRange"){if(W.type===4)return J({numFailures:Je,failures:Ne,results:[],lastResult:void 0});W.type===3?Ke.push(le=ee.clear()):Ke.push(le=ee.delete(m(W)))}else{var te=ce?te?[H,K]:[H,null]:[K,null],Ae=te[0],ht=te[1];if(ce)for(var pt=0;pt<de;++pt)Ke.push(le=ht&&ht[pt]!==void 0?ee[B](Ae[pt],ht[pt]):ee[B](Ae[pt])),le.onerror=Fe;else for(pt=0;pt<de;++pt)Ke.push(le=ee[B](Ae[pt])),le.onerror=Fe}function Lo(xt){xt=xt.target.result,Ke.forEach(function(Wn,Qa){return Wn.error!=null&&(Ne[Qa]=Wn.error)}),J({numFailures:Je,failures:Ne,results:B==="delete"?K:Ke.map(function(Wn){return Wn.result}),lastResult:xt})}le.onerror=function(xt){Fe(xt),Lo(xt)},le.onsuccess=Lo})},getMany:function(L){var O=L.trans,B=L.keys;return new Promise(function(K,H){K=Be(K);for(var W,J=O.objectStore(F),oe=B.length,ee=new Array(oe),te=0,ce=0,le=function(Ke){Ke=Ke.target,ee[Ke._pos]=Ke.result,++ce===te&&K(ee)},de=Qt(H),Fe=0;Fe<oe;++Fe)B[Fe]!=null&&((W=J.get(B[Fe]))._pos=Fe,W.onsuccess=le,W.onerror=de,++te);te===0&&K(ee)})},get:function(L){var O=L.trans,B=L.key;return new Promise(function(K,H){K=Be(K);var W=O.objectStore(F).get(B);W.onsuccess=function(J){return K(J.target.result)},W.onerror=Qt(H)})},query:(P=R,function(L){return new Promise(function(O,B){O=Be(O);var K,H,W,te=L.trans,J=L.values,oe=L.limit,le=L.query,ee=oe===1/0?void 0:oe,ce=le.index,le=le.range,te=te.objectStore(F),ce=ce.isPrimaryKey?te:te.index(ce.name),le=m(le);if(oe===0)return O({result:[]});P?((ee=J?ce.getAll(le,ee):ce.getAllKeys(le,ee)).onsuccess=function(de){return O({result:de.target.result})},ee.onerror=Qt(B)):(K=0,H=!J&&"openKeyCursor"in ce?ce.openKeyCursor(le):ce.openCursor(le),W=[],H.onsuccess=function(de){var Fe=H.result;return Fe?(W.push(J?Fe.value:Fe.primaryKey),++K===oe?O({result:W}):void Fe.continue()):O({result:W})},H.onerror=Qt(B))})}),openCursor:function(L){var O=L.trans,B=L.values,K=L.query,H=L.reverse,W=L.unique;return new Promise(function(J,oe){J=Be(J);var ce=K.index,ee=K.range,te=O.objectStore(F),te=ce.isPrimaryKey?te:te.index(ce.name),ce=H?W?"prevunique":"prev":W?"nextunique":"next",le=!B&&"openKeyCursor"in te?te.openKeyCursor(m(ee),ce):te.openCursor(m(ee),ce);le.onerror=Qt(oe),le.onsuccess=Be(function(de){var Fe,Ke,Ne,Je,Ae=le.result;Ae?(Ae.___id=++ap,Ae.done=!1,Fe=Ae.continue.bind(Ae),Ke=(Ke=Ae.continuePrimaryKey)&&Ke.bind(Ae),Ne=Ae.advance.bind(Ae),Je=function(){throw new Error("Cursor not stopped")},Ae.trans=O,Ae.stop=Ae.continue=Ae.continuePrimaryKey=Ae.advance=function(){throw new Error("Cursor not started")},Ae.fail=Be(oe),Ae.next=function(){var ht=this,pt=1;return this.start(function(){return pt--?ht.continue():ht.stop()}).then(function(){return ht})},Ae.start=function(ht){function pt(){if(le.result)try{ht()}catch(xt){Ae.fail(xt)}else Ae.done=!0,Ae.start=function(){throw new Error("Cursor behind last entry")},Ae.stop()}var Lo=new Promise(function(xt,Wn){xt=Be(xt),le.onerror=Qt(Wn),Ae.fail=Wn,Ae.stop=function(Qa){Ae.stop=Ae.continue=Ae.continuePrimaryKey=Ae.advance=Je,xt(Qa)}});return le.onsuccess=Be(function(xt){le.onsuccess=pt,pt()}),Ae.continue=Fe,Ae.continuePrimaryKey=Ke,Ae.advance=Ne,pt(),Lo},J(Ae)):J(null)},oe)})},count:function(L){var O=L.query,B=L.trans,K=O.index,H=O.range;return new Promise(function(W,J){var oe=B.objectStore(F),ee=K.isPrimaryKey?oe:oe.index(K.name),oe=m(H),ee=oe?ee.count(oe):ee.count();ee.onsuccess=Be(function(te){return W(te.target.result)}),ee.onerror=Qt(J)})}}}var C,j,D,I=(j=M,D=Yi((C=s).objectStoreNames),{schema:{name:C.name,tables:D.map(function(z){return j.objectStore(z)}).map(function(z){var P=z.keyPath,O=z.autoIncrement,F=l(P),L={},O={name:z.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:P==null,compound:F,keyPath:P,autoIncrement:O,unique:!0,extractKey:Ra(P)},indexes:Yi(z.indexNames).map(function(B){return z.index(B)}).map(function(W){var K=W.name,H=W.unique,J=W.multiEntry,W=W.keyPath,J={name:K,compound:l(W),keyPath:W,unique:H,multiEntry:J,extractKey:Ra(W)};return L[Ir(W)]=J}),getIndexByKeyPath:function(B){return L[Ir(B)]}};return L[":id"]=O.primaryKey,P!=null&&(L[Ir(P)]=O.primaryKey),O})},hasGetAll:0<D.length&&"getAll"in j.objectStore(D[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),M=I.schema,R=I.hasGetAll,I=M.tables.map(b),N={};return I.forEach(function(z){return N[z.name]=z}),{stack:"dbcore",transaction:s.transaction.bind(s),table:function(z){if(!N[z])throw new Error("Table '".concat(z,"' not found"));return N[z]},MIN_KEY:-1/0,MAX_KEY:Fr(c),schema:M}}function ip(s,c,f,m){var b=f.IDBKeyRange;return f.indexedDB,{dbcore:(m=sp(c,b,m),s.dbcore.reduce(function(C,j){return j=j.create,r(r({},C),j(C))},m))}}function jo(s,m){var f=m.db,m=ip(s._middlewares,f,s._deps,m);s.core=m.dbcore,s.tables.forEach(function(b){var C=b.name;s.core.schema.tables.some(function(j){return j.name===C})&&(b.core=s.core.table(C),s[C]instanceof s.Table&&(s[C].core=b.core))})}function Ao(s,c,f,m){f.forEach(function(b){var C=m[b];c.forEach(function(j){var D=function M(R,I){return E(R,I)||(R=h(R))&&M(R,I)}(j,b);(!D||"value"in D&&D.value===void 0)&&(j===s.Transaction.prototype||j instanceof s.Transaction?w(j,b,{get:function(){return this.table(b)},set:function(M){x(this,b,{value:M,writable:!0,configurable:!0,enumerable:!0})}}):j[b]=new s.Table(b,C))})})}function Fa(s,c){c.forEach(function(f){for(var m in f)f[m]instanceof s.Table&&delete f[m]})}function up(s,c){return s._cfg.version-c._cfg.version}function lp(s,c,f,m){var b=s._dbSchema;f.objectStoreNames.contains("$meta")&&!b.$meta&&(b.$meta=Pa("$meta",Xi("")[0],[]),s._storeNames.push("$meta"));var C=s._createTransaction("readwrite",s._storeNames,b);C.create(f),C._completion.catch(m);var j=C._reject.bind(C),D=he.transless||he;vn(function(){return he.trans=C,he.transless=D,c!==0?(jo(s,f),R=c,((M=C).storeNames.includes("$meta")?M.table("$meta").get("version").then(function(I){return I??R}):ie.resolve(R)).then(function(I){return z=I,P=C,F=f,L=[],I=(N=s)._versions,O=N._dbSchema=No(0,N.idbdb,F),(I=I.filter(function(B){return B._cfg.version>=z})).length!==0?(I.forEach(function(B){L.push(function(){var K=O,H=B._cfg.dbschema;To(N,K,F),To(N,H,F),O=N._dbSchema=H;var W=Ia(K,H);W.add.forEach(function(ce){Oa(F,ce[0],ce[1].primKey,ce[1].indexes)}),W.change.forEach(function(ce){if(ce.recreate)throw new ue.Upgrade("Not yet support for changing primary key");var le=F.objectStore(ce.name);ce.add.forEach(function(de){return Do(le,de)}),ce.change.forEach(function(de){le.deleteIndex(de.name),Do(le,de)}),ce.del.forEach(function(de){return le.deleteIndex(de)})});var J=B._cfg.contentUpgrade;if(J&&B._cfg.version>z){jo(N,F),P._memoizedTables={};var oe=Y(H);W.del.forEach(function(ce){oe[ce]=K[ce]}),Fa(N,[N.Transaction.prototype]),Ao(N,[N.Transaction.prototype],i(oe),oe),P.schema=oe;var ee,te=xe(J);return te&&er(),W=ie.follow(function(){var ce;(ee=J(P))&&te&&(ce=wn.bind(null,null),ee.then(ce,ce))}),ee&&typeof ee.then=="function"?ie.resolve(ee):W.then(function(){return ee})}}),L.push(function(K){var H,W,J=B._cfg.dbschema;H=J,W=K,[].slice.call(W.db.objectStoreNames).forEach(function(oe){return H[oe]==null&&W.db.deleteObjectStore(oe)}),Fa(N,[N.Transaction.prototype]),Ao(N,[N.Transaction.prototype],N._storeNames,N._dbSchema),P.schema=N._dbSchema}),L.push(function(K){N.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(N.idbdb.version/10)===B._cfg.version?(N.idbdb.deleteObjectStore("$meta"),delete N._dbSchema.$meta,N._storeNames=N._storeNames.filter(function(H){return H!=="$meta"})):K.objectStore("$meta").put(B._cfg.version,"version"))})}),function B(){return L.length?ie.resolve(L.shift()(P.idbtrans)).then(B):ie.resolve()}().then(function(){Zi(O,F)})):ie.resolve();var N,z,P,F,L,O}).catch(j)):(i(b).forEach(function(I){Oa(f,I,b[I].primKey,b[I].indexes)}),jo(s,f),void ie.follow(function(){return s.on.populate.fire(C)}).catch(j));var M,R})}function cp(s,c){Zi(s._dbSchema,c),c.db.version%10!=0||c.objectStoreNames.contains("$meta")||c.db.createObjectStore("$meta").add(Math.ceil(c.db.version/10-1),"version");var f=No(0,s.idbdb,c);To(s,s._dbSchema,c);for(var m=0,b=Ia(f,s._dbSchema).change;m<b.length;m++){var C=function(j){if(j.change.length||j.recreate)return console.warn("Unable to patch indexes of table ".concat(j.name," because it has changes on the type of index or primary key.")),{value:void 0};var D=c.objectStore(j.name);j.add.forEach(function(M){ot&&console.debug("Dexie upgrade patch: Creating missing index ".concat(j.name,".").concat(M.src)),Do(D,M)})}(b[m]);if(typeof C=="object")return C.value}}function Ia(s,c){var f,m={del:[],add:[],change:[]};for(f in s)c[f]||m.del.push(f);for(f in c){var b=s[f],C=c[f];if(b){var j={name:f,def:C,recreate:!1,del:[],add:[],change:[]};if(""+(b.primKey.keyPath||"")!=""+(C.primKey.keyPath||"")||b.primKey.auto!==C.primKey.auto)j.recreate=!0,m.change.push(j);else{var D=b.idxByName,M=C.idxByName,R=void 0;for(R in D)M[R]||j.del.push(R);for(R in M){var I=D[R],N=M[R];I?I.src!==N.src&&j.change.push(N):j.add.push(N)}(0<j.del.length||0<j.add.length||0<j.change.length)&&m.change.push(j)}}else m.add.push([f,C])}return m}function Oa(s,c,f,m){var b=s.db.createObjectStore(c,f.keyPath?{keyPath:f.keyPath,autoIncrement:f.auto}:{autoIncrement:f.auto});return m.forEach(function(C){return Do(b,C)}),b}function Zi(s,c){i(s).forEach(function(f){c.db.objectStoreNames.contains(f)||(ot&&console.debug("Dexie: Creating missing table",f),Oa(c,f,s[f].primKey,s[f].indexes))})}function Do(s,c){s.createIndex(c.name,c.keyPath,{unique:c.unique,multiEntry:c.multi})}function No(s,c,f){var m={};return S(c.objectStoreNames,0).forEach(function(b){for(var C=f.objectStore(b),j=Ma(Gi(R=C.keyPath),R||"",!0,!1,!!C.autoIncrement,R&&typeof R!="string",!0),D=[],M=0;M<C.indexNames.length;++M){var I=C.index(C.indexNames[M]),R=I.keyPath,I=Ma(I.name,R,!!I.unique,!!I.multiEntry,!1,R&&typeof R!="string",!1);D.push(I)}m[b]=Pa(b,j,D)}),m}function To(s,c,f){for(var m=f.db.objectStoreNames,b=0;b<m.length;++b){var C=m[b],j=f.objectStore(C);s._hasGetAll="getAll"in j;for(var D=0;D<j.indexNames.length;++D){var M=j.indexNames[D],R=j.index(M).keyPath,I=typeof R=="string"?R:"["+S(R).join("+")+"]";!c[C]||(R=c[C].idxByName[I])&&(R.name=M,delete c[C].idxByName[I],c[C].idxByName[M]=R)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&a.WorkerGlobalScope&&a instanceof a.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(s._hasGetAll=!1)}function Xi(s){return s.split(",").map(function(c,f){var C=c.split(":"),m=(b=C[1])===null||b===void 0?void 0:b.trim(),b=(c=C[0].trim()).replace(/([&*]|\+\+)/g,""),C=/^\[/.test(b)?b.match(/^\[(.*)\]$/)[1].split("+"):b;return Ma(b,C||null,/\&/.test(c),/\*/.test(c),/\+\+/.test(c),l(C),f===0,m)})}var dp=(or.prototype._createTableSchema=Pa,or.prototype._parseIndexSyntax=Xi,or.prototype._parseStoresSpec=function(s,c){var f=this;i(s).forEach(function(m){if(s[m]!==null){var b=f._parseIndexSyntax(s[m]),C=b.shift();if(!C)throw new ue.Schema("Invalid schema for table "+m+": "+s[m]);if(C.unique=!0,C.multi)throw new ue.Schema("Primary key cannot be multiEntry*");b.forEach(function(j){if(j.auto)throw new ue.Schema("Only primary key can be marked as autoIncrement (++)");if(!j.keyPath)throw new ue.Schema("Index must have a name and cannot be an empty string")}),b=f._createTableSchema(m,C,b),c[m]=b}})},or.prototype.stores=function(f){var c=this.db;this._cfg.storesSource=this._cfg.storesSource?d(this._cfg.storesSource,f):f;var f=c._versions,m={},b={};return f.forEach(function(C){d(m,C._cfg.storesSource),b=C._cfg.dbschema={},C._parseStoresSpec(m,b)}),c._dbSchema=b,Fa(c,[c._allTables,c,c.Transaction.prototype]),Ao(c,[c._allTables,c,c.Transaction.prototype,this._cfg.tables],i(b),b),c._storeNames=i(b),this},or.prototype.upgrade=function(s){return this._cfg.contentUpgrade=bn(this._cfg.contentUpgrade||ve,s),this},or);function or(){}function La(s,c){var f=s._dbNamesDB;return f||(f=s._dbNamesDB=new hn(wo,{addons:[],indexedDB:s,IDBKeyRange:c})).version(1).stores({dbnames:"name"}),f.table("dbnames")}function za(s){return s&&typeof s.databases=="function"}function Ba(s){return vn(function(){return he.letThrough=!0,s()})}function $a(s){return!("from"in s)}var ft=function(s,c){if(!this){var f=new ft;return s&&"d"in s&&d(f,s),f}d(this,arguments.length?{d:1,from:s,to:1<arguments.length?c:s}:{d:0})};function Or(s,c,f){var m=Ue(c,f);if(!isNaN(m)){if(0<m)throw RangeError();if($a(s))return d(s,{from:c,to:f,d:1});var b=s.l,m=s.r;if(Ue(f,s.from)<0)return b?Or(b,c,f):s.l={from:c,to:f,d:1,l:null,r:null},Ji(s);if(0<Ue(c,s.to))return m?Or(m,c,f):s.r={from:c,to:f,d:1,l:null,r:null},Ji(s);Ue(c,s.from)<0&&(s.from=c,s.l=null,s.d=m?m.d+1:1),0<Ue(f,s.to)&&(s.to=f,s.r=null,s.d=s.l?s.l.d+1:1),f=!s.r,b&&!s.l&&Lr(s,b),m&&f&&Lr(s,m)}}function Lr(s,c){$a(c)||function f(m,M){var C=M.from,j=M.to,D=M.l,M=M.r;Or(m,C,j),D&&f(m,D),M&&f(m,M)}(s,c)}function Qi(s,c){var f=Mo(c),m=f.next();if(m.done)return!1;for(var b=m.value,C=Mo(s),j=C.next(b.from),D=j.value;!m.done&&!j.done;){if(Ue(D.from,b.to)<=0&&0<=Ue(D.to,b.from))return!0;Ue(b.from,D.from)<0?b=(m=f.next(D.from)).value:D=(j=C.next(b.from)).value}return!1}function Mo(s){var c=$a(s)?null:{s:0,n:s};return{next:function(f){for(var m=0<arguments.length;c;)switch(c.s){case 0:if(c.s=1,m)for(;c.n.l&&Ue(f,c.n.from)<0;)c={up:c,n:c.n.l,s:1};else for(;c.n.l;)c={up:c,n:c.n.l,s:1};case 1:if(c.s=2,!m||Ue(f,c.n.to)<=0)return{value:c.n,done:!1};case 2:if(c.n.r){c.s=3,c={up:c,n:c.n.r,s:0};continue}case 3:c=c.up}return{done:!0}}}}function Ji(s){var c,f,m=(((c=s.r)===null||c===void 0?void 0:c.d)||0)-(((f=s.l)===null||f===void 0?void 0:f.d)||0),b=1<m?"r":m<-1?"l":"";b&&(c=b=="r"?"l":"r",f=r({},s),m=s[b],s.from=m.from,s.to=m.to,s[b]=m[b],f[b]=m[c],(s[c]=f).d=eu(f)),s.d=eu(s)}function eu(f){var c=f.r,f=f.l;return(c?f?Math.max(c.d,f.d):c.d:f?f.d:0)+1}function Po(s,c){return i(c).forEach(function(f){s[f]?Lr(s[f],c[f]):s[f]=function m(b){var C,j,D={};for(C in b)y(b,C)&&(j=b[C],D[C]=!j||typeof j!="object"||G.has(j.constructor)?j:m(j));return D}(c[f])}),s}function qa(s,c){return s.all||c.all||Object.keys(s).some(function(f){return c[f]&&Qi(c[f],s[f])})}v(ft.prototype,((It={add:function(s){return Lr(this,s),this},addKey:function(s){return Or(this,s,s),this},addKeys:function(s){var c=this;return s.forEach(function(f){return Or(c,f,f)}),this},hasKey:function(s){var c=Mo(this).next(s).value;return c&&Ue(c.from,s)<=0&&0<=Ue(c.to,s)}})[be]=function(){return Mo(this)},It));var Kn={},Ua={},Ka=!1;function Ro(s){Po(Ua,s),Ka||(Ka=!0,setTimeout(function(){Ka=!1,Ha(Ua,!(Ua={}))},0))}function Ha(s,c){c===void 0&&(c=!1);var f=new Set;if(s.all)for(var m=0,b=Object.values(Kn);m<b.length;m++)tu(j=b[m],s,f,c);else for(var C in s){var j,D=/^idb\:\/\/(.*)\/(.*)\//.exec(C);D&&(C=D[1],D=D[2],(j=Kn["idb://".concat(C,"/").concat(D)])&&tu(j,s,f,c))}f.forEach(function(M){return M()})}function tu(s,c,f,m){for(var b=[],C=0,j=Object.entries(s.queries.query);C<j.length;C++){for(var D=j[C],M=D[0],R=[],I=0,N=D[1];I<N.length;I++){var z=N[I];qa(c,z.obsSet)?z.subscribers.forEach(function(O){return f.add(O)}):m&&R.push(z)}m&&b.push([M,R])}if(m)for(var P=0,F=b;P<F.length;P++){var L=F[P],M=L[0],R=L[1];s.queries.query[M]=R}}function fp(s){var c=s._state,f=s._deps.indexedDB;if(c.isBeingOpened||s.idbdb)return c.dbReadyPromise.then(function(){return c.dbOpenError?et(c.dbOpenError):s});c.isBeingOpened=!0,c.dbOpenError=null,c.openComplete=!1;var m=c.openCanceller,b=Math.round(10*s.verno),C=!1;function j(){if(c.openCanceller!==m)throw new ue.DatabaseClosed("db.open() was cancelled")}function D(){return new ie(function(z,P){if(j(),!f)throw new ue.MissingAPI;var F=s.name,L=c.autoSchema||!b?f.open(F):f.open(F,b);if(!L)throw new ue.MissingAPI;L.onerror=Qt(P),L.onblocked=Be(s._fireOnBlocked),L.onupgradeneeded=Be(function(O){var B;I=L.transaction,c.autoSchema&&!s._options.allowEmptyDB?(L.onerror=Pr,I.abort(),L.result.close(),(B=f.deleteDatabase(F)).onsuccess=B.onerror=Be(function(){P(new ue.NoSuchDatabase("Database ".concat(F," doesnt exist")))})):(I.onerror=Qt(P),O=O.oldVersion>Math.pow(2,62)?0:O.oldVersion,N=O<1,s.idbdb=L.result,C&&cp(s,I),lp(s,O/10,I,P))},P),L.onsuccess=Be(function(){I=null;var O,B,K,H,W,J=s.idbdb=L.result,oe=S(J.objectStoreNames);if(0<oe.length)try{var ee=J.transaction((H=oe).length===1?H[0]:H,"readonly");if(c.autoSchema)B=J,K=ee,(O=s).verno=B.version/10,K=O._dbSchema=No(0,B,K),O._storeNames=S(B.objectStoreNames,0),Ao(O,[O._allTables],i(K),K);else if(To(s,s._dbSchema,ee),((W=Ia(No(0,(W=s).idbdb,ee),W._dbSchema)).add.length||W.change.some(function(te){return te.add.length||te.change.length}))&&!C)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),J.close(),b=J.version+1,C=!0,z(D());jo(s,ee)}catch{}tr.push(s),J.onversionchange=Be(function(te){c.vcFired=!0,s.on("versionchange").fire(te)}),J.onclose=Be(function(te){s.on("close").fire(te)}),N&&(W=s._deps,ee=F,J=W.indexedDB,W=W.IDBKeyRange,za(J)||ee===wo||La(J,W).put({name:ee}).catch(ve)),z()},P)}).catch(function(z){switch(z?.name){case"UnknownError":if(0<c.PR1398_maxLoop)return c.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),D();break;case"VersionError":if(0<b)return b=0,D()}return ie.reject(z)})}var M,R=c.dbReadyResolve,I=null,N=!1;return ie.race([m,(typeof navigator>"u"?ie.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(z){function P(){return indexedDB.databases().finally(z)}M=setInterval(P,100),P()}).finally(function(){return clearInterval(M)}):Promise.resolve()).then(D)]).then(function(){return j(),c.onReadyBeingFired=[],ie.resolve(Ba(function(){return s.on.ready.fire(s.vip)})).then(function z(){if(0<c.onReadyBeingFired.length){var P=c.onReadyBeingFired.reduce(bn,ve);return c.onReadyBeingFired=[],ie.resolve(Ba(function(){return P(s.vip)})).then(z)}})}).finally(function(){c.openCanceller===m&&(c.onReadyBeingFired=null,c.isBeingOpened=!1)}).catch(function(z){c.dbOpenError=z;try{I&&I.abort()}catch{}return m===c.openCanceller&&s._close(),et(z)}).finally(function(){c.openComplete=!0,R()}).then(function(){var z;return N&&(z={},s.tables.forEach(function(P){P.schema.indexes.forEach(function(F){F.name&&(z["idb://".concat(s.name,"/").concat(P.name,"/").concat(F.name)]=new ft(-1/0,[[[]]]))}),z["idb://".concat(s.name,"/").concat(P.name,"/")]=z["idb://".concat(s.name,"/").concat(P.name,"/:dels")]=new ft(-1/0,[[[]]])}),kn(Rr).fire(z),Ha(z,!0)),s})}function Wa(s){function c(C){return s.next(C)}var f=b(c),m=b(function(C){return s.throw(C)});function b(C){return function(M){var D=C(M),M=D.value;return D.done?M:M&&typeof M.then=="function"?M.then(f,m):l(M)?Promise.all(M).then(f,m):f(M)}}return b(c)()}function Fo(s,c,f){for(var m=l(s)?s.slice():[s],b=0;b<f;++b)m.push(c);return m}var hp={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(s){return r(r({},s),{table:function(c){var f=s.table(c),m=f.schema,b={},C=[];function j(N,z,P){var F=Ir(N),L=b[F]=b[F]||[],O=N==null?0:typeof N=="string"?1:N.length,B=0<z,B=r(r({},P),{name:B?"".concat(F,"(virtual-from:").concat(P.name,")"):P.name,lowLevelIndex:P,isVirtual:B,keyTail:z,keyLength:O,extractKey:Ra(N),unique:!B&&P.unique});return L.push(B),B.isPrimaryKey||C.push(B),1<O&&j(O===2?N[0]:N.slice(0,O-1),z+1,P),L.sort(function(K,H){return K.keyTail-H.keyTail}),B}c=j(m.primaryKey.keyPath,0,m.primaryKey),b[":id"]=[c];for(var D=0,M=m.indexes;D<M.length;D++){var R=M[D];j(R.keyPath,0,R)}function I(N){var z,P=N.query.index;return P.isVirtual?r(r({},N),{query:{index:P.lowLevelIndex,range:(z=N.query.range,P=P.keyTail,{type:z.type===1?2:z.type,lower:Fo(z.lower,z.lowerOpen?s.MAX_KEY:s.MIN_KEY,P),lowerOpen:!0,upper:Fo(z.upper,z.upperOpen?s.MIN_KEY:s.MAX_KEY,P),upperOpen:!0})}}):N}return r(r({},f),{schema:r(r({},m),{primaryKey:c,indexes:C,getIndexByKeyPath:function(N){return(N=b[Ir(N)])&&N[0]}}),count:function(N){return f.count(I(N))},query:function(N){return f.query(I(N))},openCursor:function(N){var z=N.query.index,P=z.keyTail,F=z.isVirtual,L=z.keyLength;return F?f.openCursor(I(N)).then(function(B){return B&&O(B)}):f.openCursor(N);function O(B){return Object.create(B,{continue:{value:function(K){K!=null?B.continue(Fo(K,N.reverse?s.MAX_KEY:s.MIN_KEY,P)):N.unique?B.continue(B.key.slice(0,L).concat(N.reverse?s.MIN_KEY:s.MAX_KEY,P)):B.continue()}},continuePrimaryKey:{value:function(K,H){B.continuePrimaryKey(Fo(K,s.MAX_KEY,P),H)}},primaryKey:{get:function(){return B.primaryKey}},key:{get:function(){var K=B.key;return L===1?K[0]:K.slice(0,L)}},value:{get:function(){return B.value}}})}}})}})}};function Va(s,c,f,m){return f=f||{},m=m||"",i(s).forEach(function(b){var C,j,D;y(c,b)?(C=s[b],j=c[b],typeof C=="object"&&typeof j=="object"&&C&&j?(D=De(C))!==De(j)?f[m+b]=c[b]:D==="Object"?Va(C,j,f,m+b+"."):C!==j&&(f[m+b]=c[b]):C!==j&&(f[m+b]=c[b])):f[m+b]=void 0}),i(c).forEach(function(b){y(s,b)||(f[m+b]=c[b])}),f}function Ga(s,c){return c.type==="delete"?c.keys:c.keys||c.values.map(s.extractKey)}var pp={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(s){return r(r({},s),{table:function(c){var f=s.table(c),m=f.schema.primaryKey;return r(r({},f),{mutate:function(b){var C=he.trans,j=C.table(c).hook,D=j.deleting,M=j.creating,R=j.updating;switch(b.type){case"add":if(M.fire===ve)break;return C._promise("readwrite",function(){return I(b)},!0);case"put":if(M.fire===ve&&R.fire===ve)break;return C._promise("readwrite",function(){return I(b)},!0);case"delete":if(D.fire===ve)break;return C._promise("readwrite",function(){return I(b)},!0);case"deleteRange":if(D.fire===ve)break;return C._promise("readwrite",function(){return function N(z,P,F){return f.query({trans:z,values:!1,query:{index:m,range:P},limit:F}).then(function(L){var O=L.result;return I({type:"delete",keys:O,trans:z}).then(function(B){return 0<B.numFailures?Promise.reject(B.failures[0]):O.length<F?{failures:[],numFailures:0,lastResult:void 0}:N(z,r(r({},P),{lower:O[O.length-1],lowerOpen:!0}),F)})})}(b.trans,b.range,1e4)},!0)}return f.mutate(b);function I(N){var z,P,F,L=he.trans,O=N.keys||Ga(m,N);if(!O)throw new Error("Keys missing");return(N=N.type==="add"||N.type==="put"?r(r({},N),{keys:O}):r({},N)).type!=="delete"&&(N.values=o([],N.values)),N.keys&&(N.keys=o([],N.keys)),z=f,F=O,((P=N).type==="add"?Promise.resolve([]):z.getMany({trans:P.trans,keys:F,cache:"immutable"})).then(function(B){var K=O.map(function(H,W){var J,oe,ee,te=B[W],ce={onerror:null,onsuccess:null};return N.type==="delete"?D.fire.call(ce,H,te,L):N.type==="add"||te===void 0?(J=M.fire.call(ce,H,N.values[W],L),H==null&&J!=null&&(N.keys[W]=H=J,m.outbound||V(N.values[W],m.keyPath,H))):(J=Va(te,N.values[W]),(oe=R.fire.call(ce,J,H,te,L))&&(ee=N.values[W],Object.keys(oe).forEach(function(le){y(ee,le)?ee[le]=oe[le]:V(ee,le,oe[le])}))),ce});return f.mutate(N).then(function(H){for(var W=H.failures,J=H.results,oe=H.numFailures,H=H.lastResult,ee=0;ee<O.length;++ee){var te=(J||O)[ee],ce=K[ee];te==null?ce.onerror&&ce.onerror(W[ee]):ce.onsuccess&&ce.onsuccess(N.type==="put"&&B[ee]?N.values[ee]:te)}return{failures:W,results:J,numFailures:oe,lastResult:H}}).catch(function(H){return K.forEach(function(W){return W.onerror&&W.onerror(H)}),Promise.reject(H)})})}}})}})}};function nu(s,c,f){try{if(!c||c.keys.length<s.length)return null;for(var m=[],b=0,C=0;b<c.keys.length&&C<s.length;++b)Ue(c.keys[b],s[C])===0&&(m.push(f?Ee(c.values[b]):c.values[b]),++C);return m.length===s.length?m:null}catch{return null}}var mp={stack:"dbcore",level:-1,create:function(s){return{table:function(c){var f=s.table(c);return r(r({},f),{getMany:function(m){if(!m.cache)return f.getMany(m);var b=nu(m.keys,m.trans._cache,m.cache==="clone");return b?ie.resolve(b):f.getMany(m).then(function(C){return m.trans._cache={keys:m.keys,values:m.cache==="clone"?Ee(C):C},C})},mutate:function(m){return m.type!=="add"&&(m.trans._cache=null),f.mutate(m)}})}}}};function ru(s,c){return s.trans.mode==="readonly"&&!!s.subscr&&!s.trans.explicit&&s.trans.db._options.cache!=="disabled"&&!c.schema.primaryKey.outbound}function ou(s,c){switch(s){case"query":return c.values&&!c.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var gp={stack:"dbcore",level:0,name:"Observability",create:function(s){var c=s.schema.name,f=new ft(s.MIN_KEY,s.MAX_KEY);return r(r({},s),{transaction:function(m,b,C){if(he.subscr&&b!=="readonly")throw new ue.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(he.querier));return s.transaction(m,b,C)},table:function(m){var b=s.table(m),C=b.schema,j=C.primaryKey,N=C.indexes,D=j.extractKey,M=j.outbound,R=j.autoIncrement&&N.filter(function(P){return P.compound&&P.keyPath.includes(j.keyPath)}),I=r(r({},b),{mutate:function(P){function F(le){return le="idb://".concat(c,"/").concat(m,"/").concat(le),H[le]||(H[le]=new ft)}var L,O,B,K=P.trans,H=P.mutatedParts||(P.mutatedParts={}),W=F(""),J=F(":dels"),oe=P.type,ce=P.type==="deleteRange"?[P.range]:P.type==="delete"?[P.keys]:P.values.length<50?[Ga(j,P).filter(function(le){return le}),P.values]:[],ee=ce[0],te=ce[1],ce=P.trans._cache;return l(ee)?(W.addKeys(ee),(ce=oe==="delete"||ee.length===te.length?nu(ee,ce):null)||J.addKeys(ee),(ce||te)&&(L=F,O=ce,B=te,C.indexes.forEach(function(le){var de=L(le.name||"");function Fe(Ne){return Ne!=null?le.extractKey(Ne):null}function Ke(Ne){return le.multiEntry&&l(Ne)?Ne.forEach(function(Je){return de.addKey(Je)}):de.addKey(Ne)}(O||B).forEach(function(Ne,ht){var Ae=O&&Fe(O[ht]),ht=B&&Fe(B[ht]);Ue(Ae,ht)!==0&&(Ae!=null&&Ke(Ae),ht!=null&&Ke(ht))})}))):ee?(te={from:(te=ee.lower)!==null&&te!==void 0?te:s.MIN_KEY,to:(te=ee.upper)!==null&&te!==void 0?te:s.MAX_KEY},J.add(te),W.add(te)):(W.add(f),J.add(f),C.indexes.forEach(function(le){return F(le.name).add(f)})),b.mutate(P).then(function(le){return!ee||P.type!=="add"&&P.type!=="put"||(W.addKeys(le.results),R&&R.forEach(function(de){for(var Fe=P.values.map(function(Ae){return de.extractKey(Ae)}),Ke=de.keyPath.findIndex(function(Ae){return Ae===j.keyPath}),Ne=0,Je=le.results.length;Ne<Je;++Ne)Fe[Ne][Ke]=le.results[Ne];F(de.name).addKeys(Fe)})),K.mutatedParts=Po(K.mutatedParts||{},H),le})}}),N=function(F){var L=F.query,F=L.index,L=L.range;return[F,new ft((F=L.lower)!==null&&F!==void 0?F:s.MIN_KEY,(L=L.upper)!==null&&L!==void 0?L:s.MAX_KEY)]},z={get:function(P){return[j,new ft(P.key)]},getMany:function(P){return[j,new ft().addKeys(P.keys)]},count:N,query:N,openCursor:N};return i(z).forEach(function(P){I[P]=function(F){var L=he.subscr,O=!!L,B=ru(he,b)&&ou(P,F)?F.obsSet={}:L;if(O){var K=function(te){return te="idb://".concat(c,"/").concat(m,"/").concat(te),B[te]||(B[te]=new ft)},H=K(""),W=K(":dels"),L=z[P](F),O=L[0],L=L[1];if((P==="query"&&O.isPrimaryKey&&!F.values?W:K(O.name||"")).add(L),!O.isPrimaryKey){if(P!=="count"){var J=P==="query"&&M&&F.values&&b.query(r(r({},F),{values:!1}));return b[P].apply(this,arguments).then(function(te){if(P==="query"){if(M&&F.values)return J.then(function(Fe){return Fe=Fe.result,H.addKeys(Fe),te});var ce=F.values?te.result.map(D):te.result;(F.values?H:W).addKeys(ce)}else if(P==="openCursor"){var le=te,de=F.values;return le&&Object.create(le,{key:{get:function(){return W.addKey(le.primaryKey),le.key}},primaryKey:{get:function(){var Fe=le.primaryKey;return W.addKey(Fe),Fe}},value:{get:function(){return de&&H.addKey(le.primaryKey),le.value}}})}return te})}W.add(f)}}return b[P].apply(this,arguments)}}),I}})}};function au(s,c,f){if(f.numFailures===0)return c;if(c.type==="deleteRange")return null;var m=c.keys?c.keys.length:"values"in c&&c.values?c.values.length:1;return f.numFailures===m?null:(c=r({},c),l(c.keys)&&(c.keys=c.keys.filter(function(b,C){return!(C in f.failures)})),"values"in c&&l(c.values)&&(c.values=c.values.filter(function(b,C){return!(C in f.failures)})),c)}function Ya(s,c){return f=s,((m=c).lower===void 0||(m.lowerOpen?0<Ue(f,m.lower):0<=Ue(f,m.lower)))&&(s=s,(c=c).upper===void 0||(c.upperOpen?Ue(s,c.upper)<0:Ue(s,c.upper)<=0));var f,m}function su(s,c,z,m,b,C){if(!z||z.length===0)return s;var j=c.query.index,D=j.multiEntry,M=c.query.range,R=m.schema.primaryKey.extractKey,I=j.extractKey,N=(j.lowLevelIndex||j).extractKey,z=z.reduce(function(P,F){var L=P,O=[];if(F.type==="add"||F.type==="put")for(var B=new ft,K=F.values.length-1;0<=K;--K){var H,W=F.values[K],J=R(W);B.hasKey(J)||(H=I(W),(D&&l(H)?H.some(function(le){return Ya(le,M)}):Ya(H,M))&&(B.addKey(J),O.push(W)))}switch(F.type){case"add":var oe=new ft().addKeys(c.values?P.map(function(de){return R(de)}):P),L=P.concat(c.values?O.filter(function(de){return de=R(de),!oe.hasKey(de)&&(oe.addKey(de),!0)}):O.map(function(de){return R(de)}).filter(function(de){return!oe.hasKey(de)&&(oe.addKey(de),!0)}));break;case"put":var ee=new ft().addKeys(F.values.map(function(de){return R(de)}));L=P.filter(function(de){return!ee.hasKey(c.values?R(de):de)}).concat(c.values?O:O.map(function(de){return R(de)}));break;case"delete":var te=new ft().addKeys(F.keys);L=P.filter(function(de){return!te.hasKey(c.values?R(de):de)});break;case"deleteRange":var ce=F.range;L=P.filter(function(de){return!Ya(R(de),ce)})}return L},s);return z===s?s:(z.sort(function(P,F){return Ue(N(P),N(F))||Ue(R(P),R(F))}),c.limit&&c.limit<1/0&&(z.length>c.limit?z.length=c.limit:s.length===c.limit&&z.length<c.limit&&(b.dirty=!0)),C?Object.freeze(z):z)}function iu(s,c){return Ue(s.lower,c.lower)===0&&Ue(s.upper,c.upper)===0&&!!s.lowerOpen==!!c.lowerOpen&&!!s.upperOpen==!!c.upperOpen}function bp(s,c){return function(f,m,b,C){if(f===void 0)return m!==void 0?-1:0;if(m===void 0)return 1;if((m=Ue(f,m))===0){if(b&&C)return 0;if(b)return 1;if(C)return-1}return m}(s.lower,c.lower,s.lowerOpen,c.lowerOpen)<=0&&0<=function(f,m,b,C){if(f===void 0)return m!==void 0?1:0;if(m===void 0)return-1;if((m=Ue(f,m))===0){if(b&&C)return 0;if(b)return-1;if(C)return 1}return m}(s.upper,c.upper,s.upperOpen,c.upperOpen)}function xp(s,c,f,m){s.subscribers.add(f),m.addEventListener("abort",function(){var b,C;s.subscribers.delete(f),s.subscribers.size===0&&(b=s,C=c,setTimeout(function(){b.subscribers.size===0&&je(C,b)},3e3))})}var yp={stack:"dbcore",level:0,name:"Cache",create:function(s){var c=s.schema.name;return r(r({},s),{transaction:function(f,m,b){var C,j,D=s.transaction(f,m,b);return m==="readwrite"&&(j=(C=new AbortController).signal,b=function(M){return function(){if(C.abort(),m==="readwrite"){for(var R=new Set,I=0,N=f;I<N.length;I++){var z=N[I],P=Kn["idb://".concat(c,"/").concat(z)];if(P){var F=s.table(z),L=P.optimisticOps.filter(function(de){return de.trans===D});if(D._explicit&&M&&D.mutatedParts)for(var O=0,B=Object.values(P.queries.query);O<B.length;O++)for(var K=0,H=(oe=B[O]).slice();K<H.length;K++)qa((ee=H[K]).obsSet,D.mutatedParts)&&(je(oe,ee),ee.subscribers.forEach(function(de){return R.add(de)}));else if(0<L.length){P.optimisticOps=P.optimisticOps.filter(function(de){return de.trans!==D});for(var W=0,J=Object.values(P.queries.query);W<J.length;W++)for(var oe,ee,te,ce=0,le=(oe=J[W]).slice();ce<le.length;ce++)(ee=le[ce]).res!=null&&D.mutatedParts&&(M&&!ee.dirty?(te=Object.isFrozen(ee.res),te=su(ee.res,ee.req,L,F,ee,te),ee.dirty?(je(oe,ee),ee.subscribers.forEach(function(de){return R.add(de)})):te!==ee.res&&(ee.res=te,ee.promise=ie.resolve({result:te}))):(ee.dirty&&je(oe,ee),ee.subscribers.forEach(function(de){return R.add(de)})))}}}R.forEach(function(de){return de()})}}},D.addEventListener("abort",b(!1),{signal:j}),D.addEventListener("error",b(!1),{signal:j}),D.addEventListener("complete",b(!0),{signal:j})),D},table:function(f){var m=s.table(f),b=m.schema.primaryKey;return r(r({},m),{mutate:function(C){var j=he.trans;if(b.outbound||j.db._options.cache==="disabled"||j.explicit||j.idbtrans.mode!=="readwrite")return m.mutate(C);var D=Kn["idb://".concat(c,"/").concat(f)];return D?(j=m.mutate(C),C.type!=="add"&&C.type!=="put"||!(50<=C.values.length||Ga(b,C).some(function(M){return M==null}))?(D.optimisticOps.push(C),C.mutatedParts&&Ro(C.mutatedParts),j.then(function(M){0<M.numFailures&&(je(D.optimisticOps,C),(M=au(0,C,M))&&D.optimisticOps.push(M),C.mutatedParts&&Ro(C.mutatedParts))}),j.catch(function(){je(D.optimisticOps,C),C.mutatedParts&&Ro(C.mutatedParts)})):j.then(function(M){var R=au(0,r(r({},C),{values:C.values.map(function(I,N){var z;return M.failures[N]?I:(I=(z=b.keyPath)!==null&&z!==void 0&&z.includes(".")?Ee(I):r({},I),V(I,b.keyPath,M.results[N]),I)})}),M);D.optimisticOps.push(R),queueMicrotask(function(){return C.mutatedParts&&Ro(C.mutatedParts)})}),j):m.mutate(C)},query:function(C){if(!ru(he,m)||!ou("query",C))return m.query(C);var j=((R=he.trans)===null||R===void 0?void 0:R.db._options.cache)==="immutable",N=he,D=N.requery,M=N.signal,R=function(F,L,O,B){var K=Kn["idb://".concat(F,"/").concat(L)];if(!K)return[];if(!(L=K.queries[O]))return[null,!1,K,null];var H=L[(B.query?B.query.index.name:null)||""];if(!H)return[null,!1,K,null];switch(O){case"query":var W=H.find(function(J){return J.req.limit===B.limit&&J.req.values===B.values&&iu(J.req.query.range,B.query.range)});return W?[W,!0,K,H]:[H.find(function(J){return("limit"in J.req?J.req.limit:1/0)>=B.limit&&(!B.values||J.req.values)&&bp(J.req.query.range,B.query.range)}),!1,K,H];case"count":return W=H.find(function(J){return iu(J.req.query.range,B.query.range)}),[W,!!W,K,H]}}(c,f,"query",C),I=R[0],N=R[1],z=R[2],P=R[3];return I&&N?I.obsSet=C.obsSet:(N=m.query(C).then(function(F){var L=F.result;if(I&&(I.res=L),j){for(var O=0,B=L.length;O<B;++O)Object.freeze(L[O]);Object.freeze(L)}else F.result=Ee(L);return F}).catch(function(F){return P&&I&&je(P,I),Promise.reject(F)}),I={obsSet:C.obsSet,promise:N,subscribers:new Set,type:"query",req:C,dirty:!1},P?P.push(I):(P=[I],(z=z||(Kn["idb://".concat(c,"/").concat(f)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[C.query.index.name||""]=P)),xp(I,P,D,M),I.promise.then(function(F){return{result:su(F.result,C,z?.optimisticOps,m,I,j)}})}})}})}};function Io(s,c){return new Proxy(s,{get:function(f,m,b){return m==="db"?c:Reflect.get(f,m,b)}})}var hn=(tt.prototype.version=function(s){if(isNaN(s)||s<.1)throw new ue.Type("Given version is not a positive number");if(s=Math.round(10*s)/10,this.idbdb||this._state.isBeingOpened)throw new ue.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,s);var c=this._versions,f=c.filter(function(m){return m._cfg.version===s})[0];return f||(f=new this.Version(s),c.push(f),c.sort(up),f.stores({}),this._state.autoSchema=!1,f)},tt.prototype._whenReady=function(s){var c=this;return this.idbdb&&(this._state.openComplete||he.letThrough||this._vip)?s():new ie(function(f,m){if(c._state.openComplete)return m(new ue.DatabaseClosed(c._state.dbOpenError));if(!c._state.isBeingOpened){if(!c._state.autoOpen)return void m(new ue.DatabaseClosed);c.open().catch(ve)}c._state.dbReadyPromise.then(f,m)}).then(s)},tt.prototype.use=function(s){var c=s.stack,f=s.create,m=s.level,b=s.name;return b&&this.unuse({stack:c,name:b}),s=this._middlewares[c]||(this._middlewares[c]=[]),s.push({stack:c,create:f,level:m??10,name:b}),s.sort(function(C,j){return C.level-j.level}),this},tt.prototype.unuse=function(s){var c=s.stack,f=s.name,m=s.create;return c&&this._middlewares[c]&&(this._middlewares[c]=this._middlewares[c].filter(function(b){return m?b.create!==m:!!f&&b.name!==f})),this},tt.prototype.open=function(){var s=this;return $n(jt,function(){return fp(s)})},tt.prototype._close=function(){this.on.close.fire(new CustomEvent("close"));var s=this._state,c=tr.indexOf(this);if(0<=c&&tr.splice(c,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}s.isBeingOpened||(s.dbReadyPromise=new ie(function(f){s.dbReadyResolve=f}),s.openCanceller=new ie(function(f,m){s.cancelOpen=m}))},tt.prototype.close=function(f){var c=(f===void 0?{disableAutoOpen:!0}:f).disableAutoOpen,f=this._state;c?(f.isBeingOpened&&f.cancelOpen(new ue.DatabaseClosed),this._close(),f.autoOpen=!1,f.dbOpenError=new ue.DatabaseClosed):(this._close(),f.autoOpen=this._options.autoOpen||f.isBeingOpened,f.openComplete=!1,f.dbOpenError=null)},tt.prototype.delete=function(s){var c=this;s===void 0&&(s={disableAutoOpen:!0});var f=0<arguments.length&&typeof arguments[0]!="object",m=this._state;return new ie(function(b,C){function j(){c.close(s);var D=c._deps.indexedDB.deleteDatabase(c.name);D.onsuccess=Be(function(){var M,R,I;M=c._deps,R=c.name,I=M.indexedDB,M=M.IDBKeyRange,za(I)||R===wo||La(I,M).delete(R).catch(ve),b()}),D.onerror=Qt(C),D.onblocked=c._fireOnBlocked}if(f)throw new ue.InvalidArgument("Invalid closeOptions argument to db.delete()");m.isBeingOpened?m.dbReadyPromise.then(j):j()})},tt.prototype.backendDB=function(){return this.idbdb},tt.prototype.isOpen=function(){return this.idbdb!==null},tt.prototype.hasBeenClosed=function(){var s=this._state.dbOpenError;return s&&s.name==="DatabaseClosed"},tt.prototype.hasFailed=function(){return this._state.dbOpenError!==null},tt.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(tt.prototype,"tables",{get:function(){var s=this;return i(this._allTables).map(function(c){return s._allTables[c]})},enumerable:!1,configurable:!0}),tt.prototype.transaction=function(){var s=function(c,f,m){var b=arguments.length;if(b<2)throw new ue.InvalidArgument("Too few arguments");for(var C=new Array(b-1);--b;)C[b-1]=arguments[b];return m=C.pop(),[c,ge(C),m]}.apply(this,arguments);return this._transaction.apply(this,s)},tt.prototype._transaction=function(s,c,f){var m=this,b=he.trans;b&&b.db===this&&s.indexOf("!")===-1||(b=null);var C,j,D=s.indexOf("?")!==-1;s=s.replace("!","").replace("?","");try{if(j=c.map(function(R){if(R=R instanceof m.Table?R.name:R,typeof R!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return R}),s=="r"||s===ja)C=ja;else{if(s!="rw"&&s!=Aa)throw new ue.InvalidArgument("Invalid transaction mode: "+s);C=Aa}if(b){if(b.mode===ja&&C===Aa){if(!D)throw new ue.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");b=null}b&&j.forEach(function(R){if(b&&b.storeNames.indexOf(R)===-1){if(!D)throw new ue.SubTransaction("Table "+R+" not included in parent transaction.");b=null}}),D&&b&&!b.active&&(b=null)}}catch(R){return b?b._promise(null,function(I,N){N(R)}):et(R)}var M=function R(I,N,z,P,F){return ie.resolve().then(function(){var L=he.transless||he,O=I._createTransaction(N,z,I._dbSchema,P);if(O.explicit=!0,L={trans:O,transless:L},P)O.idbtrans=P.idbtrans;else try{O.create(),O.idbtrans._explicit=!0,I._state.PR1398_maxLoop=3}catch(H){return H.name===Z.InvalidState&&I.isOpen()&&0<--I._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),I.close({disableAutoOpen:!1}),I.open().then(function(){return R(I,N,z,null,F)})):et(H)}var B,K=xe(F);return K&&er(),L=ie.follow(function(){var H;(B=F.call(O,O))&&(K?(H=wn.bind(null,null),B.then(H,H)):typeof B.next=="function"&&typeof B.throw=="function"&&(B=Wa(B)))},L),(B&&typeof B.then=="function"?ie.resolve(B).then(function(H){return O.active?H:et(new ue.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):L.then(function(){return B})).then(function(H){return P&&O._resolve(),O._completion.then(function(){return H})}).catch(function(H){return O._reject(H),et(H)})})}.bind(null,this,C,j,b,f);return b?b._promise(C,M,"lock"):he.trans?$n(he.transless,function(){return m._whenReady(M)}):this._whenReady(M)},tt.prototype.table=function(s){if(!y(this._allTables,s))throw new ue.InvalidTable("Table ".concat(s," does not exist"));return this._allTables[s]},tt);function tt(s,c){var f=this;this._middlewares={},this.verno=0;var m=tt.dependencies;this._options=c=r({addons:tt.addons,autoOpen:!0,indexedDB:m.indexedDB,IDBKeyRange:m.IDBKeyRange,cache:"cloned"},c),this._deps={indexedDB:c.indexedDB,IDBKeyRange:c.IDBKeyRange},m=c.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var b,C,j,D,M,R={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:ve,dbReadyPromise:null,cancelOpen:ve,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:c.autoOpen};R.dbReadyPromise=new ie(function(N){R.dbReadyResolve=N}),R.openCanceller=new ie(function(N,z){R.cancelOpen=z}),this._state=R,this.name=s,this.on=Nr(this,"populate","blocked","versionchange","close",{ready:[bn,ve]}),this.once=function(N,z){var P=function(){for(var F=[],L=0;L<arguments.length;L++)F[L]=arguments[L];f.on(N).unsubscribe(P),z.apply(f,F)};return f.on(N,P)},this.on.ready.subscribe=A(this.on.ready.subscribe,function(N){return function(z,P){tt.vip(function(){var F,L=f._state;L.openComplete?(L.dbOpenError||ie.resolve().then(z),P&&N(z)):L.onReadyBeingFired?(L.onReadyBeingFired.push(z),P&&N(z)):(N(z),F=f,P||N(function O(){F.on.ready.unsubscribe(z),F.on.ready.unsubscribe(O)}))})}}),this.Collection=(b=this,Tr(tp.prototype,function(B,O){this.db=b;var P=Oi,F=null;if(O)try{P=O()}catch(K){F=K}var L=B._ctx,O=L.table,B=O.hook.reading.fire;this._ctx={table:O,index:L.index,isPrimKey:!L.index||O.schema.primKey.keyPath&&L.index===O.schema.primKey.name,range:P,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:F,or:L.or,valueMapper:B!==rt?B:null}})),this.Table=(C=this,Tr($i.prototype,function(N,z,P){this.db=C,this._tx=P,this.name=N,this.schema=z,this.hook=C._allTables[N]?C._allTables[N].hook:Nr(null,{creating:[Gt,ve],reading:[Et,rt],updating:[zn,ve],deleting:[ln,ve]})})),this.Transaction=(j=this,Tr(op.prototype,function(N,z,P,F,L){var O=this;N!=="readonly"&&z.forEach(function(B){B=(B=P[B])===null||B===void 0?void 0:B.yProps,B&&(z=z.concat(B.map(function(K){return K.updatesTable})))}),this.db=j,this.mode=N,this.storeNames=z,this.schema=P,this.chromeTransactionDurability=F,this.idbtrans=null,this.on=Nr(this,"complete","error","abort"),this.parent=L||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new ie(function(B,K){O._resolve=B,O._reject=K}),this._completion.then(function(){O.active=!1,O.on.complete.fire()},function(B){var K=O.active;return O.active=!1,O.on.error.fire(B),O.parent?O.parent._reject(B):K&&O.idbtrans&&O.idbtrans.abort(),et(B)})})),this.Version=(D=this,Tr(dp.prototype,function(N){this.db=D,this._cfg={version:N,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(M=this,Tr(Vi.prototype,function(N,z,P){if(this.db=M,this._ctx={table:N,index:z===":id"?null:z,or:P},this._cmp=this._ascending=Ue,this._descending=function(F,L){return Ue(L,F)},this._max=function(F,L){return 0<Ue(F,L)?F:L},this._min=function(F,L){return Ue(F,L)<0?F:L},this._IDBKeyRange=M._deps.IDBKeyRange,!this._IDBKeyRange)throw new ue.MissingAPI})),this.on("versionchange",function(N){0<N.newVersion?console.warn("Another connection wants to upgrade database '".concat(f.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(f.name,"'. Closing db now to resume the delete request.")),f.close({disableAutoOpen:!1})}),this.on("blocked",function(N){!N.newVersion||N.newVersion<N.oldVersion?console.warn("Dexie.delete('".concat(f.name,"') was blocked")):console.warn("Upgrade '".concat(f.name,"' blocked by other connection holding version ").concat(N.oldVersion/10))}),this._maxKey=Fr(c.IDBKeyRange),this._createTransaction=function(N,z,P,F){return new f.Transaction(N,z,P,f._options.chromeTransactionDurability,F)},this._fireOnBlocked=function(N){f.on("blocked").fire(N),tr.filter(function(z){return z.name===f.name&&z!==f&&!z._state.vcFired}).map(function(z){return z.on("versionchange").fire(N)})},this.use(mp),this.use(yp),this.use(gp),this.use(hp),this.use(pp);var I=new Proxy(this,{get:function(N,z,P){if(z==="_vip")return!0;if(z==="table")return function(L){return Io(f.table(L),I)};var F=Reflect.get(N,z,P);return F instanceof $i?Io(F,I):z==="tables"?F.map(function(L){return Io(L,I)}):z==="_createTransaction"?function(){return Io(F.apply(this,arguments),I)}:F}});this.vip=I,m.forEach(function(N){return N(f)})}var Oo,It=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",vp=(Za.prototype.subscribe=function(s,c,f){return this._subscribe(s&&typeof s!="function"?s:{next:s,error:c,complete:f})},Za.prototype[It]=function(){return this},Za);function Za(s){this._subscribe=s}try{Oo={indexedDB:a.indexedDB||a.mozIndexedDB||a.webkitIndexedDB||a.msIndexedDB,IDBKeyRange:a.IDBKeyRange||a.webkitIDBKeyRange}}catch{Oo={indexedDB:null,IDBKeyRange:null}}function uu(s){var c,f=!1,m=new vp(function(b){var C=xe(s),j,D=!1,M={},R={},I={get closed(){return D},unsubscribe:function(){D||(D=!0,j&&j.abort(),N&&kn.storagemutated.unsubscribe(P))}};b.start&&b.start(I);var N=!1,z=function(){return Ea(F)},P=function(L){Po(M,L),qa(R,M)&&z()},F=function(){var L,O,B;!D&&Oo.indexedDB&&(M={},L={},j&&j.abort(),j=new AbortController,B=function(K){var H=at();try{C&&er();var W=vn(s,K);return W=C?W.finally(wn):W}finally{H&&st()}}(O={subscr:L,signal:j.signal,requery:z,querier:s,trans:null}),Promise.resolve(B).then(function(K){f=!0,c=K,D||O.signal.aborted||(M={},function(H){for(var W in H)if(y(H,W))return;return 1}(R=L)||N||(kn(Rr,P),N=!0),Ea(function(){return!D&&b.next&&b.next(K)}))},function(K){f=!1,["DatabaseClosedError","AbortError"].includes(K?.name)||D||Ea(function(){D||b.error&&b.error(K)})}))};return setTimeout(z,0),I});return m.hasValue=function(){return f},m.getValue=function(){return c},m}var Hn=hn;function Xa(s){var c=Sn;try{Sn=!0,kn.storagemutated.fire(s),Ha(s,!0)}finally{Sn=c}}v(Hn,r(r({},Me),{delete:function(s){return new Hn(s,{addons:[]}).delete()},exists:function(s){return new Hn(s,{addons:[]}).open().then(function(c){return c.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(s){try{return c=Hn.dependencies,f=c.indexedDB,c=c.IDBKeyRange,(za(f)?Promise.resolve(f.databases()).then(function(m){return m.map(function(b){return b.name}).filter(function(b){return b!==wo})}):La(f,c).toCollection().primaryKeys()).then(s)}catch{return et(new ue.MissingAPI)}var c,f},defineClass:function(){return function(s){d(this,s)}},ignoreTransaction:function(s){return he.trans?$n(he.transless,s):s()},vip:Ba,async:function(s){return function(){try{var c=Wa(s.apply(this,arguments));return c&&typeof c.then=="function"?c:ie.resolve(c)}catch(f){return et(f)}}},spawn:function(s,c,f){try{var m=Wa(s.apply(f,c||[]));return m&&typeof m.then=="function"?m:ie.resolve(m)}catch(b){return et(b)}},currentTransaction:{get:function(){return he.trans||null}},waitFor:function(s,c){return c=ie.resolve(typeof s=="function"?Hn.ignoreTransaction(s):s).timeout(c||6e4),he.trans?he.trans.waitFor(c):c},Promise:ie,debug:{get:function(){return ot},set:function(s){Bn(s)}},derive:_,extend:d,props:v,override:A,Events:Nr,on:kn,liveQuery:uu,extendObservabilitySet:Po,getByKeyPath:U,setByKeyPath:V,delByKeyPath:function(s,c){typeof c=="string"?V(s,c,void 0):"length"in c&&[].map.call(c,function(f){V(s,f,void 0)})},shallowClone:Y,deepClone:Ee,getObjectDiff:Va,cmp:Ue,asap:$,minKey:-1/0,addons:[],connections:tr,errnames:Z,dependencies:Oo,cache:Kn,semVer:"4.2.0",version:"4.2.0".split(".").map(function(s){return parseInt(s)}).reduce(function(s,c,f){return s+c/Math.pow(10,2*f)})})),Hn.maxKey=Fr(Hn.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(kn(Rr,function(s){Sn||(s=new CustomEvent(Ta,{detail:s}),Sn=!0,dispatchEvent(s),Sn=!1)}),addEventListener(Ta,function(s){s=s.detail,Sn||Xa(s)}));var ar,Sn=!1,lu=function(){};return typeof BroadcastChannel<"u"&&((lu=function(){(ar=new BroadcastChannel(Ta)).onmessage=function(s){return s.data&&Xa(s.data)}})(),typeof ar.unref=="function"&&ar.unref(),kn(Rr,function(s){Sn||ar.postMessage(s)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(s){if(!hn.disableBfCache&&s.persisted){ot&&console.debug("Dexie: handling persisted pagehide"),ar?.close();for(var c=0,f=tr;c<f.length;c++)f[c].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(s){!hn.disableBfCache&&s.persisted&&(ot&&console.debug("Dexie: handling persisted pageshow"),lu(),Xa({all:new ft(-1/0,[[]])}))})),ie.rejectionMapper=function(s,c){return!s||s instanceof ye||s instanceof TypeError||s instanceof SyntaxError||!s.name||!qe[s.name]?s:(c=new qe[s.name](c||s.message,s),"stack"in s&&w(c,"stack",{get:function(){return this.inner.stack}}),c)},Bn(ot),r(hn,Object.freeze({__proto__:null,Dexie:hn,liveQuery:uu,Entity:Li,cmp:Ue,PropModification:Mr,replacePrefix:function(s,c){return new Mr({replacePrefix:[s,c]})},add:function(s){return new Mr({add:s})},remove:function(s){return new Mr({remove:s})},default:hn,RangeSet:ft,mergeRanges:Lr,rangesOverlap:Qi}),{default:hn}),hn})})(Zh);var n_=Zh.exports;const Us=Sl(n_),ll=Symbol.for("Dexie"),ra=globalThis[ll]||(globalThis[ll]=Us);if(Us.semVer!==ra.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${Us.semVer} and ${ra.semVer}`);const{liveQuery:k_,mergeRanges:S_,rangesOverlap:E_,RangeSet:j_,cmp:A_,Entity:D_,PropModification:N_,replacePrefix:T_,add:M_,remove:P_,DexieYProvider:R_}=ra;class r_ extends ra{cards;folders;tags;syncQueue;settings;constructor(){super("CardAllDatabase"),this.version(1).stores({cards:"++id, userId, folderId, createdAt, updatedAt, syncVersion, pendingSync",folders:"++id, userId, parentId, createdAt, updatedAt, syncVersion, pendingSync",tags:"++id, userId, name, createdAt, syncVersion, pendingSync",syncQueue:"++id, type, entity, entityId, timestamp, retryCount",settings:"++id, key, updatedAt"}),this.version(1).upgrade(async t=>{console.log("Initializing CardAll database..."),await t.table("settings").add({key:"storageMode",value:"hybrid",updatedAt:new Date}),await t.table("settings").add({key:"syncEnabled",value:!0,updatedAt:new Date}),await t.table("settings").add({key:"imageCompression",value:{enabled:!0,quality:.8,maxWidth:1920,maxHeight:1080,format:"webp"},updatedAt:new Date})})}async getSetting(t){return(await this.settings.where("key").equals(t).first())?.value}async updateSetting(t,n){await this.settings.where("key").equals(t).modify({value:n,updatedAt:new Date})}async clearAll(){await this.transaction("rw",this.cards,this.folders,this.tags,this.syncQueue,async()=>{await this.cards.clear(),await this.folders.clear(),await this.tags.clear(),await this.syncQueue.clear()})}async getStats(){const[t,n,r,o,a]=await Promise.all([this.cards.count(),this.folders.count(),this.tags.count(),0,this.syncQueue.count()]);return{cards:t,folders:n,tags:r,images:o,pendingSync:a}}async createCard(t){const n=crypto.randomUUID(),r=new Date;return await this.cards.add({...t,id:n,syncVersion:1,pendingSync:!0,updatedAt:r}),n}async updateCard(t,n){return await this.cards.update(t,{...n,syncVersion:n.syncVersion?n.syncVersion+1:void 0,pendingSync:!0,updatedAt:new Date})}async deleteCard(t){await this.cards.delete(t)}}const Ot=new r_;Ot.on("blocked",()=>{console.warn("Database operation blocked")});Ot.on("versionchange",()=>{console.warn("Database version changed")});Ot.on("ready",()=>{console.log("Database is ready")});class o_{syncQueue=[];isOnline=navigator.onLine;syncInProgress=!1;lastSyncTime=null;conflicts=[];listeners=[];authService=null;constructor(){this.initialize()}initialize(){window.addEventListener("online",()=>{this.isOnline=!0,this.notifyStatusChange(),this.processSyncQueue()}),window.addEventListener("offline",()=>{this.isOnline=!1,this.notifyStatusChange()}),setInterval(()=>{this.isOnline&&this.authService?.isAuthenticated()&&this.processSyncQueue()},5*60*1e3)}setAuthService(t){this.authService=t,t.onAuthStateChange(n=>{n.user&&this.isOnline&&this.performFullSync()})}onStatusChange(t){return this.listeners.push(t),t(this.getCurrentStatus()),()=>{const n=this.listeners.indexOf(t);n>-1&&this.listeners.splice(n,1)}}notifyStatusChange(){const t=this.getCurrentStatus();this.listeners.forEach(n=>n(t))}getCurrentStatus(){return{isOnline:this.isOnline,lastSyncTime:this.lastSyncTime,pendingOperations:this.syncQueue.length,syncInProgress:this.syncInProgress,hasConflicts:this.conflicts.length>0}}async queueOperation(t){const n={...t,id:crypto.randomUUID(),timestamp:new Date,retryCount:0};this.syncQueue.push(n),await this.persistSyncQueue(),this.isOnline&&this.authService?.isAuthenticated()&&this.processSyncQueue(),this.notifyStatusChange()}async processSyncQueue(){if(!(this.syncInProgress||!this.isOnline||!this.authService?.isAuthenticated())){this.syncInProgress=!0,this.notifyStatusChange();try{const t=[...this.syncQueue];for(const n of t)try{await this.executeOperation(n);const r=this.syncQueue.findIndex(o=>o.id===n.id);r>-1&&this.syncQueue.splice(r,1)}catch(r){if(console.error("Sync operation failed:",r),n.retryCount++,n.retryCount>3){const o=this.syncQueue.findIndex(a=>a.id===n.id);o>-1&&this.syncQueue.splice(o,1)}}await this.persistSyncQueue(),this.lastSyncTime=new Date}finally{this.syncInProgress=!1,this.notifyStatusChange()}}}async executeOperation(t){const n=this.authService?.getCurrentUser();if(!n)throw new Error("User not authenticated");switch(t.table){case"cards":await this.syncCard(t,n.id);break;case"folders":await this.syncFolder(t,n.id);break;case"tags":await this.syncTag(t,n.id);break;case"images":await this.syncImage(t,n.id);break}}async syncCard(t,n){const{type:r,data:o,localId:a}=t;switch(r){case"create":case"update":const{error:i}=await nt.from("cards").upsert({id:a,user_id:n,front_content:o.frontContent,back_content:o.backContent,style:o.style,folder_id:o.folderId,updated_at:new Date().toISOString(),sync_version:o.syncVersion+1});if(i)throw i;break;case"delete":const{error:l}=await nt.from("cards").update({is_deleted:!0,updated_at:new Date().toISOString()}).eq("id",a).eq("user_id",n);if(l)throw l;break}}async syncFolder(t,n){const{type:r,data:o,localId:a}=t;switch(r){case"create":case"update":const{error:i}=await nt.from("folders").upsert({id:a,user_id:n,name:o.name,parent_id:o.parentId,updated_at:new Date().toISOString(),sync_version:o.syncVersion+1});if(i)throw i;break;case"delete":const{error:l}=await nt.from("folders").update({is_deleted:!0,updated_at:new Date().toISOString()}).eq("id",a).eq("user_id",n);if(l)throw l;break}}async syncTag(t,n){const{type:r,data:o,localId:a}=t;switch(r){case"create":case"update":const{error:i}=await nt.from("tags").upsert({id:a,user_id:n,name:o.name,color:o.color,updated_at:new Date().toISOString(),sync_version:o.syncVersion+1});if(i)throw i;break;case"delete":const{error:l}=await nt.from("tags").update({is_deleted:!0,updated_at:new Date().toISOString()}).eq("id",a).eq("user_id",n);if(l)throw l;break}}async syncImage(t,n){const{type:r,data:o,localId:a}=t;switch(r){case"create":case"update":const{error:i}=await nt.from("images").upsert({id:a,user_id:n,card_id:o.cardId,file_name:o.fileName,file_path:o.filePath,cloud_url:o.cloudUrl,metadata:o.metadata,updated_at:new Date().toISOString(),sync_version:o.syncVersion+1});if(i)throw i;break;case"delete":const{error:l}=await nt.from("images").update({is_deleted:!0,updated_at:new Date().toISOString()}).eq("id",a).eq("user_id",n);if(l)throw l;break}}async performFullSync(){if(!(!this.authService?.isAuthenticated()||!this.isOnline))try{this.syncInProgress=!0,this.notifyStatusChange();const t=this.authService.getCurrentUser();await this.syncFromCloud(t.id),await this.processSyncQueue(),this.lastSyncTime=new Date,console.log("Full sync completed successfully")}catch(t){console.error("Full sync failed:",t)}finally{this.syncInProgress=!1,this.notifyStatusChange()}}async syncFromCloud(t){const n=this.lastSyncTime||new Date(0),{data:r}=await nt.from("cards").select("*").eq("user_id",t).gte("updated_at",n.toISOString());if(r)for(const i of r)await this.mergeCloudCard(i);const{data:o}=await nt.from("folders").select("*").eq("user_id",t).gte("updated_at",n.toISOString());if(o)for(const i of o)await this.mergeCloudFolder(i);const{data:a}=await nt.from("tags").select("*").eq("user_id",t).gte("updated_at",n.toISOString());if(a)for(const i of a)await this.mergeCloudTag(i)}async mergeCloudCard(t){const n=await Ot.cards?.get(t.id);if(!n)await Ot.cards?.add({id:t.id,frontContent:t.front_content,backContent:t.back_content,style:t.style,folderId:t.folder_id||void 0,isFlipped:!1,createdAt:new Date(t.created_at),updatedAt:new Date(t.updated_at),syncVersion:t.sync_version,pendingSync:!1});else{const r=new Date(n.updatedAt).getTime(),o=new Date(t.updated_at).getTime();o>r?await Ot.cards?.update(t.id,{frontContent:t.front_content,backContent:t.back_content,style:t.style,folderId:t.folder_id||void 0,updatedAt:new Date(t.updated_at),syncVersion:t.sync_version,pendingSync:!1}):r>o&&n.pendingSync&&await this.queueOperation({type:"update",table:"cards",data:n,localId:n.id})}}async mergeCloudFolder(t){const n=await Ot.folders?.get(t.id);if(!n)await Ot.folders?.add({id:t.id,name:t.name,color:"#3b82f6",icon:"Folder",cardIds:[],parentId:t.parent_id||void 0,isExpanded:!0,createdAt:new Date(t.created_at),updatedAt:new Date(t.updated_at),syncVersion:t.sync_version,pendingSync:!1});else{const r=new Date(n.updatedAt).getTime(),o=new Date(t.updated_at).getTime();o>r?await Ot.folders?.update(t.id,{name:t.name,parentId:t.parent_id||void 0,updatedAt:new Date(t.updated_at),syncVersion:t.sync_version,pendingSync:!1}):r>o&&n.pendingSync&&await this.queueOperation({type:"update",table:"folders",data:n,localId:n.id})}}async mergeCloudTag(t){const n=await Ot.tags?.get(t.id);if(!n)await Ot.tags?.add({id:t.id,name:t.name,color:t.color,count:0,createdAt:new Date(t.created_at),updatedAt:new Date(t.updated_at),syncVersion:t.sync_version,pendingSync:!1});else{const r=new Date(n.updatedAt).getTime(),o=new Date(t.updatedAt).getTime();o>r?await Ot.tags?.update(t.id,{name:t.name,color:t.color,updatedAt:new Date(t.updated_at),syncVersion:t.sync_version,pendingSync:!1}):r>o&&n.pendingSync&&await this.queueOperation({type:"update",table:"tags",data:n,localId:n.id})}}async persistSyncQueue(){try{localStorage.setItem("cardall_sync_queue",JSON.stringify(this.syncQueue))}catch(t){console.error("Failed to persist sync queue:",t)}}async restoreSyncQueue(){try{const t=localStorage.getItem("cardall_sync_queue");t&&(this.syncQueue=JSON.parse(t),this.notifyStatusChange())}catch(t){console.error("Failed to restore sync queue:",t)}}async clearSyncQueue(){this.syncQueue=[],await this.persistSyncQueue(),this.notifyStatusChange()}getConflicts(){return[...this.conflicts]}async resolveConflict(t,n){const r=this.conflicts.find(a=>a.id===t);if(!r)return;switch(n){case"local":await this.queueOperation({type:"update",table:r.table,data:r.localData,localId:r.localData.id});break}const o=this.conflicts.findIndex(a=>a.id===t);o>-1&&(this.conflicts.splice(o,1),this.notifyStatusChange())}}const Xh=new o_,ys=Object.freeze(Object.defineProperty({__proto__:null,cloudSyncService:Xh},Symbol.toStringTag,{value:"Module"}));function a_({open:e,onOpenChange:t}){const[n,r]=g.useState({user:null,session:null,loading:!1,error:null}),[o,a]=g.useState("main"),[i,l]=g.useState(!1),[d,h]=g.useState({email:"",password:"",confirmPassword:"",name:""}),[p,y]=g.useState({}),[v,x]=g.useState(!1);g.useEffect(()=>Vn.onAuthStateChange(r),[]);const w=()=>{h({email:"",password:"",confirmPassword:"",name:""}),y({}),x(!1),l(!1)},_=G=>{const X={};return(G==="email-login"||G==="email-signup"||G==="forgot-password")&&(d.email?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(d.email)||(X.email=""):X.email=""),(G==="email-login"||G==="email-signup")&&(d.password?d.password.length<6&&(X.password="6"):X.password=""),G==="email-signup"&&(d.name||(X.name=""),d.password!==d.confirmPassword&&(X.confirmPassword="")),y(X),Object.keys(X).length===0},E=async()=>{x(!0);const{error:G}=await Vn.signInWithGitHub();G&&console.error("GitHub:",G),x(!1)},k=async()=>{if(!_("email-login"))return;x(!0);const{error:G}=await Vn.signInWithEmail(d.email,d.password);G?y({general:G.message}):(t(!1),w(),a("main")),x(!1)},S=async()=>{if(!_("email-signup"))return;x(!0);const{error:G}=await Vn.signUpWithEmail(d.email,d.password,{name:d.name});G?y({general:G.message}):a("check-email"),x(!1)},A=async()=>{if(!_("forgot-password"))return;x(!0);const{error:G}=await Vn.resetPassword(d.email);G?y({general:G.message}):a("check-email"),x(!1)},T=async()=>{const{error:G}=await Vn.signOut();G&&console.error(":",G)},$=async()=>{await Xh.performFullSync()};if(n.user)return u.jsx(Gn,{open:e,onOpenChange:t,children:u.jsx(Rn,{className:"sm:max-w-md border-0 shadow-2xl",children:u.jsxs("div",{className:"space-y-6 p-2",children:[u.jsx(Mi,{className:"border-0 bg-gradient-to-br from-blue-50 to-indigo-50 dark:from-blue-950/20 dark:to-indigo-950/20",children:u.jsx(Pi,{className:"p-6",children:u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsxs("div",{className:"relative",children:[u.jsx(s0,{user:n.user,size:"lg",className:"h-16 w-16 shadow-lg",showHoverEffect:!1}),u.jsx("div",{className:"absolute -bottom-1 -right-1 h-5 w-5 bg-green-500 rounded-full border-2 border-white"})]}),u.jsxs("div",{className:"flex-1",children:[u.jsx("h3",{className:"font-semibold text-lg",children:n.user.username||""}),u.jsx("p",{className:"text-sm text-muted-foreground",children:n.user.email}),u.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[u.jsx(gu,{className:"h-3 w-3 text-green-500"}),u.jsx("span",{className:"text-xs text-green-600",children:""})]})]})]})})}),u.jsxs("div",{className:"space-y-3",children:[u.jsxs(_e,{onClick:$,variant:"outline",className:"w-full h-12 rounded-2xl border-2 hover:bg-blue-50 transition-all duration-200",disabled:n.loading,children:[n.loading?u.jsx($r,{className:"h-5 w-5 mr-2 animate-spin"}):u.jsx(gu,{className:"h-5 w-5 mr-2 text-blue-500"}),""]}),u.jsx(_e,{onClick:T,variant:"ghost",className:"w-full h-12 rounded-2xl hover:bg-red-50 hover:text-red-600 transition-all duration-200",disabled:n.loading,children:""})]})]})})});const U=()=>u.jsxs("div",{className:"space-y-6 p-2",children:[u.jsxs("div",{className:"text-center space-y-2",children:[u.jsx("h2",{className:"text-2xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:" CardAll"}),u.jsx("p",{className:"text-muted-foreground",children:""})]}),u.jsxs(_e,{onClick:E,disabled:v,className:"w-full h-14 rounded-2xl bg-gray-900 hover:bg-gray-800 text-white shadow-lg transition-all duration-200 transform hover:scale-[1.02]",size:"lg",children:[v?u.jsx($r,{className:"h-5 w-5 mr-3 animate-spin"}):u.jsx(Zm,{className:"h-5 w-5 mr-3"})," GitHub "]}),u.jsxs("div",{className:"relative",children:[u.jsx("div",{className:"absolute inset-0 flex items-center",children:u.jsx("span",{className:"w-full border-t border-gray-200"})}),u.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:u.jsx("span",{className:"bg-background px-4 text-muted-foreground",children:""})})]}),u.jsxs("div",{className:"space-y-3",children:[u.jsxs(_e,{onClick:()=>a("email-login"),variant:"outline",className:"w-full h-14 rounded-2xl border-2 hover:bg-blue-50 transition-all duration-200 transform hover:scale-[1.02]",size:"lg",children:[u.jsx(qr,{className:"h-5 w-5 mr-3 text-blue-500"}),""]}),u.jsxs(_e,{onClick:()=>a("email-signup"),variant:"ghost",className:"w-full h-12 rounded-2xl hover:bg-green-50 hover:text-green-600 transition-all duration-200",children:[u.jsx(wu,{className:"h-4 w-4 mr-2"}),""]})]}),u.jsxs("div",{className:"text-xs text-muted-foreground text-center space-y-1 pt-4",children:[u.jsx("p",{children:""}),u.jsx("p",{children:""})]})]}),V=()=>u.jsxs("div",{className:"space-y-6 p-2",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx(_e,{variant:"ghost",size:"sm",onClick:()=>a("main"),className:"rounded-full p-2",children:u.jsx(ts,{className:"h-4 w-4"})}),u.jsx("h2",{className:"text-xl font-semibold",children:""})]}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"space-y-2",children:[u.jsx(_t,{htmlFor:"email",children:""}),u.jsxs("div",{className:"relative",children:[u.jsx(qr,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),u.jsx(Ct,{id:"email",type:"email",placeholder:"",value:d.email,onChange:G=>h(X=>({...X,email:G.target.value})),className:"pl-10 h-12 rounded-2xl border-2"})]}),p.email&&u.jsxs("p",{className:"text-sm text-red-500 flex items-center gap-1",children:[u.jsx(Kt,{className:"h-3 w-3"}),p.email]})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsx(_t,{htmlFor:"password",children:""}),u.jsxs("div",{className:"relative",children:[u.jsx(ns,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),u.jsx(Ct,{id:"password",type:i?"text":"password",placeholder:"",value:d.password,onChange:G=>h(X=>({...X,password:G.target.value})),className:"pl-10 pr-10 h-12 rounded-2xl border-2"}),u.jsx(_e,{type:"button",variant:"ghost",size:"sm",className:"absolute right-1 top-1 h-10 w-10 rounded-xl",onClick:()=>l(!i),children:i?u.jsx(bu,{className:"h-4 w-4"}):u.jsx(xu,{className:"h-4 w-4"})})]}),p.password&&u.jsxs("p",{className:"text-sm text-red-500 flex items-center gap-1",children:[u.jsx(Kt,{className:"h-3 w-3"}),p.password]})]}),u.jsx("div",{className:"text-right",children:u.jsx(_e,{variant:"link",size:"sm",onClick:()=>a("forgot-password"),className:"text-blue-600 hover:text-blue-700 p-0 h-auto",children:""})}),p.general&&u.jsxs("div",{className:"text-sm text-red-500 text-center bg-red-50 p-3 rounded-2xl flex items-center justify-center gap-2",children:[u.jsx(Kt,{className:"h-4 w-4"}),p.general]}),u.jsxs(_e,{onClick:k,disabled:v,className:"w-full h-12 rounded-2xl bg-blue-600 hover:bg-blue-700 transition-all duration-200",children:[v?u.jsx($r,{className:"h-4 w-4 mr-2 animate-spin"}):null,""]})]})]}),Y=()=>u.jsxs("div",{className:"space-y-6 p-2",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx(_e,{variant:"ghost",size:"sm",onClick:()=>a("main"),className:"rounded-full p-2",children:u.jsx(ts,{className:"h-4 w-4"})}),u.jsx("h2",{className:"text-xl font-semibold",children:""})]}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"space-y-2",children:[u.jsx(_t,{htmlFor:"name",children:""}),u.jsxs("div",{className:"relative",children:[u.jsx(wu,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),u.jsx(Ct,{id:"name",type:"text",placeholder:"",value:d.name,onChange:G=>h(X=>({...X,name:G.target.value})),className:"pl-10 h-12 rounded-2xl border-2"})]}),p.name&&u.jsxs("p",{className:"text-sm text-red-500 flex items-center gap-1",children:[u.jsx(Kt,{className:"h-3 w-3"}),p.name]})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsx(_t,{htmlFor:"signup-email",children:""}),u.jsxs("div",{className:"relative",children:[u.jsx(qr,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),u.jsx(Ct,{id:"signup-email",type:"email",placeholder:"",value:d.email,onChange:G=>h(X=>({...X,email:G.target.value})),className:"pl-10 h-12 rounded-2xl border-2"})]}),p.email&&u.jsxs("p",{className:"text-sm text-red-500 flex items-center gap-1",children:[u.jsx(Kt,{className:"h-3 w-3"}),p.email]})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsx(_t,{htmlFor:"signup-password",children:""}),u.jsxs("div",{className:"relative",children:[u.jsx(ns,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),u.jsx(Ct,{id:"signup-password",type:i?"text":"password",placeholder:"6",value:d.password,onChange:G=>h(X=>({...X,password:G.target.value})),className:"pl-10 pr-10 h-12 rounded-2xl border-2"}),u.jsx(_e,{type:"button",variant:"ghost",size:"sm",className:"absolute right-1 top-1 h-10 w-10 rounded-xl",onClick:()=>l(!i),children:i?u.jsx(bu,{className:"h-4 w-4"}):u.jsx(xu,{className:"h-4 w-4"})})]}),p.password&&u.jsxs("p",{className:"text-sm text-red-500 flex items-center gap-1",children:[u.jsx(Kt,{className:"h-3 w-3"}),p.password]})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsx(_t,{htmlFor:"confirm-password",children:""}),u.jsxs("div",{className:"relative",children:[u.jsx(ns,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),u.jsx(Ct,{id:"confirm-password",type:i?"text":"password",placeholder:"",value:d.confirmPassword,onChange:G=>h(X=>({...X,confirmPassword:G.target.value})),className:"pl-10 h-12 rounded-2xl border-2"})]}),p.confirmPassword&&u.jsxs("p",{className:"text-sm text-red-500 flex items-center gap-1",children:[u.jsx(Kt,{className:"h-3 w-3"}),p.confirmPassword]})]}),p.general&&u.jsxs("div",{className:"text-sm text-red-500 text-center bg-red-50 p-3 rounded-2xl flex items-center justify-center gap-2",children:[u.jsx(Kt,{className:"h-4 w-4"}),p.general]}),u.jsxs(_e,{onClick:S,disabled:v,className:"w-full h-12 rounded-2xl bg-green-600 hover:bg-green-700 transition-all duration-200",children:[v?u.jsx($r,{className:"h-4 w-4 mr-2 animate-spin"}):null,""]}),u.jsx("div",{className:"text-xs text-muted-foreground text-center",children:u.jsx("p",{children:""})})]})]}),se=()=>u.jsxs("div",{className:"space-y-6 p-2",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx(_e,{variant:"ghost",size:"sm",onClick:()=>a("email-login"),className:"rounded-full p-2",children:u.jsx(ts,{className:"h-4 w-4"})}),u.jsx("h2",{className:"text-xl font-semibold",children:""})]}),u.jsx("div",{className:"text-center space-y-2",children:u.jsx("p",{className:"text-muted-foreground",children:""})}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"space-y-2",children:[u.jsx(_t,{htmlFor:"reset-email",children:""}),u.jsxs("div",{className:"relative",children:[u.jsx(qr,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),u.jsx(Ct,{id:"reset-email",type:"email",placeholder:"",value:d.email,onChange:G=>h(X=>({...X,email:G.target.value})),className:"pl-10 h-12 rounded-2xl border-2"})]}),p.email&&u.jsxs("p",{className:"text-sm text-red-500 flex items-center gap-1",children:[u.jsx(Kt,{className:"h-3 w-3"}),p.email]})]}),p.general&&u.jsxs("div",{className:"text-sm text-red-500 text-center bg-red-50 p-3 rounded-2xl flex items-center justify-center gap-2",children:[u.jsx(Kt,{className:"h-4 w-4"}),p.general]}),u.jsxs(_e,{onClick:A,disabled:v,className:"w-full h-12 rounded-2xl bg-blue-600 hover:bg-blue-700 transition-all duration-200",children:[v?u.jsx($r,{className:"h-4 w-4 mr-2 animate-spin"}):null,""]})]})]}),ge=()=>u.jsxs("div",{className:"space-y-6 p-2 text-center",children:[u.jsx("div",{className:"flex justify-center",children:u.jsx("div",{className:"h-16 w-16 bg-blue-100 rounded-full flex items-center justify-center",children:u.jsx(qr,{className:"h-8 w-8 text-blue-600"})})}),u.jsxs("div",{className:"space-y-2",children:[u.jsx("h2",{className:"text-xl font-semibold",children:""}),u.jsxs("p",{className:"text-muted-foreground",children:[" ",u.jsx("span",{className:"font-medium",children:d.email})," "]}),u.jsxs("p",{className:"text-sm text-muted-foreground",children:["",o==="check-email"?"":""]})]}),u.jsx(_e,{onClick:()=>{a("main"),w()},variant:"outline",className:"w-full h-12 rounded-2xl border-2",children:""})]});return u.jsx(Gn,{open:e,onOpenChange:G=>{t(G),G||(a("main"),w())},children:u.jsxs(Rn,{className:"sm:max-w-md border-0 shadow-2xl rounded-3xl",children:[o==="main"&&U(),o==="email-login"&&V(),o==="email-signup"&&Y(),o==="forgot-password"&&se(),o==="check-email"&&ge()]})})}const s_=({onClose:e})=>{const[t,n]=g.useState(null),[r,o]=g.useState(!1),[a,i]=g.useState(!1),[l,d]=g.useState(navigator.onLine);g.useEffect(()=>{const y=()=>{window.matchMedia("(display-mode: standalone)").matches&&i(!0)},v=E=>{E.preventDefault(),n(E),setTimeout(()=>{a||o(!0)},3e3)},x=()=>{i(!0),o(!1),n(null),console.log("PWA was installed")},w=()=>d(!0),_=()=>d(!1);return y(),window.addEventListener("beforeinstallprompt",v),window.addEventListener("appinstalled",x),window.addEventListener("online",w),window.addEventListener("offline",_),()=>{window.removeEventListener("beforeinstallprompt",v),window.removeEventListener("appinstalled",x),window.removeEventListener("online",w),window.removeEventListener("offline",_)}},[a]);const h=async()=>{if(t)try{await t.prompt();const{outcome:y}=await t.userChoice;console.log(y==="accepted"?"User accepted the install prompt":"User dismissed the install prompt"),n(null),o(!1)}catch(y){console.error("Error during installation:",y)}},p=()=>{o(!1),e?.()};return!r||a?null:u.jsx("div",{className:"fixed bottom-4 right-4 z-50 max-w-sm",children:u.jsxs(Mi,{className:"shadow-lg border-2 border-blue-200 bg-gradient-to-br from-blue-50 to-white",children:[u.jsxs(Vh,{className:"pb-3",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(Vr,{className:"h-5 w-5 text-blue-600"}),u.jsx(Gh,{className:"text-lg",children:" CardAll"})]}),u.jsx(_e,{variant:"ghost",size:"sm",onClick:p,className:"h-6 w-6 p-0",children:u.jsx(Zn,{className:"h-4 w-4"})})]}),u.jsx(Yh,{children:" CardAll "})]}),u.jsxs(Pi,{className:"space-y-4",children:[u.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[u.jsxs("div",{className:"flex items-center gap-2 text-green-600",children:[l?u.jsx(l1,{className:"h-4 w-4"}):u.jsx(u1,{className:"h-4 w-4"}),u.jsx("span",{children:l?"":""})]}),u.jsxs("div",{className:"flex items-center gap-2 text-blue-600",children:[u.jsx(o1,{className:"h-4 w-4"}),u.jsx("span",{children:""})]}),u.jsxs("div",{className:"flex items-center gap-2 text-purple-600",children:[u.jsx(e1,{className:"h-4 w-4"}),u.jsx("span",{children:""})]}),u.jsxs("div",{className:"flex items-center gap-2 text-orange-600",children:[u.jsx(Vr,{className:"h-4 w-4"}),u.jsx("span",{children:""})]})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsx("h4",{className:"font-medium text-sm",children:""}),u.jsxs("ul",{className:"text-xs text-gray-600 space-y-1",children:[u.jsx("li",{children:" "}),u.jsx("li",{children:" "}),u.jsx("li",{children:" "}),u.jsx("li",{children:" "})]})]}),u.jsxs("div",{className:"flex gap-2",children:[u.jsxs(_e,{onClick:h,className:"flex-1 bg-blue-600 hover:bg-blue-700",disabled:!t,children:[u.jsx(Vr,{className:"h-4 w-4 mr-2"}),""]}),u.jsx(_e,{variant:"outline",onClick:p,className:"px-3",children:""})]})]})]})})};function i_(){const{isOpen:e,closeModal:t}=Tl();return u.jsxs("div",{className:"min-h-screen bg-background",children:[u.jsx(tm,{children:u.jsx(xv,{children:u.jsx(yv,{children:u.jsx(_C,{})})})}),u.jsx(s_,{}),u.jsx(a_,{open:e,onOpenChange:t}),u.jsx(e_,{})]})}function u_(){return u.jsx(EC,{defaultTheme:"light",storageKey:"cardall-theme",children:u.jsx(sm,{children:u.jsx(i_,{})})})}Cs.createRoot(document.getElementById("root")).render(u.jsx(ne.StrictMode,{children:u.jsx(u_,{})}));
