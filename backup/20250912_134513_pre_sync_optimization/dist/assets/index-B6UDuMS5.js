import{j as u,S as Kr,u as He,c as Qt,P as Le,a as En,b as pe,d as jt,e as $t,O as Ks,f as gl,C as Vs,g as Ws,T as Gs,D as Ys,R as bl,h as lr,i as Vr,k as ta,l as xl,m as yl,A as vl,n as wl,o as Cl,F as kl,p as _l,q as Sl,r as El,s as _p,t as jl,v as Al,w as Sp,x as Dl,W as Ep,y as jp,z as Ap}from"./ui-Bwvcqbz3.js";import{a as pr,d as gu,g as Nl,r as m,b as oe,v as Dp}from"./vendor-MXm4CGdz.js";import{c as Np,_ as Za}from"./supabase-Dpl7Lpu-.js";import{N as ft,n as Tp,m as Mp,P as Ip,T as Pp,a as Rp,S as Fp,M as ys,E as Qs,e as Op,b as Lp,c as zp,D as Bp,d as mr,g as Tl,F as vs,u as $p,i as qp,f as Up,h as Hp,j as Kp,k as Vp,l as Wp,o as Gp}from"./editor-Dk-8PF1f.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const i of a.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(o){if(o.ep)return;o.ep=!0;const a=n(o);fetch(o.href,a)}})();var qo={},bu=pr;qo.createRoot=bu.createRoot,qo.hydrateRoot=bu.hydrateRoot;var Ml={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(gu,function(){var n=function(s,c){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,g){h.__proto__=g}||function(h,g){for(var x in g)Object.prototype.hasOwnProperty.call(g,x)&&(h[x]=g[x])})(s,c)},r=function(){return(r=Object.assign||function(s){for(var c,h=1,g=arguments.length;h<g;h++)for(var x in c=arguments[h])Object.prototype.hasOwnProperty.call(c,x)&&(s[x]=c[x]);return s}).apply(this,arguments)};function o(s,c,h){for(var g,x=0,w=c.length;x<w;x++)!g&&x in c||((g=g||Array.prototype.slice.call(c,0,x))[x]=c[x]);return s.concat(g||Array.prototype.slice.call(c))}var a=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:gu,i=Object.keys,l=Array.isArray;function d(s,c){return typeof c!="object"||i(c).forEach(function(h){s[h]=c[h]}),s}typeof Promise>"u"||a.Promise||(a.Promise=Promise);var f=Object.getPrototypeOf,p={}.hasOwnProperty;function b(s,c){return p.call(s,c)}function v(s,c){typeof c=="function"&&(c=c(f(s))),(typeof Reflect>"u"?i:Reflect.ownKeys)(c).forEach(function(h){C(s,h,c[h])})}var y=Object.defineProperty;function C(s,c,h,g){y(s,c,d(h&&b(h,"get")&&typeof h.get=="function"?{get:h.get,set:h.set,configurable:!0}:{value:h,configurable:!0,writable:!0},g))}function k(s){return{from:function(c){return s.prototype=Object.create(c.prototype),C(s.prototype,"constructor",s),{extend:v.bind(null,s.prototype)}}}}var A=Object.getOwnPropertyDescriptor,j=[].slice;function _(s,c,h){return j.call(s,c,h)}function S(s,c){return c(s)}function D(s){if(!s)throw new Error("Assertion Failed")}function I(s){a.setImmediate?setImmediate(s):setTimeout(s,0)}function M(s,c){if(typeof c=="string"&&b(s,c))return s[c];if(!c)return s;if(typeof c!="string"){for(var h=[],g=0,x=c.length;g<x;++g){var w=M(s,c[g]);h.push(w)}return h}var E=c.indexOf(".");if(E!==-1){var N=s[c.substr(0,E)];return N==null?void 0:M(N,c.substr(E+1))}}function F(s,c,h){if(s&&c!==void 0&&!("isFrozen"in Object&&Object.isFrozen(s)))if(typeof c!="string"&&"length"in c){D(typeof h!="string"&&"length"in h);for(var g=0,x=c.length;g<x;++g)F(s,c[g],h[g])}else{var w,E,N=c.indexOf(".");N!==-1?(w=c.substr(0,N),(E=c.substr(N+1))===""?h===void 0?l(s)&&!isNaN(parseInt(w))?s.splice(w,1):delete s[w]:s[w]=h:F(N=!(N=s[w])||!b(s,w)?s[w]={}:N,E,h)):h===void 0?l(s)&&!isNaN(parseInt(c))?s.splice(c,1):delete s[c]:s[c]=h}}function H(s){var c,h={};for(c in s)b(s,c)&&(h[c]=s[c]);return h}var Z=[].concat;function ie(s){return Z.apply([],s)}var tt="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(ie([8,16,32,64].map(function(s){return["Int","Uint","Float"].map(function(c){return c+s+"Array"})}))).filter(function(s){return a[s]}),Y=new Set(tt.map(function(s){return a[s]})),Q=null;function me(s){return Q=new WeakMap,s=function c(h){if(!h||typeof h!="object")return h;var g=Q.get(h);if(g)return g;if(l(h)){g=[],Q.set(h,g);for(var x=0,w=h.length;x<w;++x)g.push(c(h[x]))}else if(Y.has(h.constructor))g=h;else{var E,N=f(h);for(E in g=N===Object.prototype?{}:Object.create(N),Q.set(h,g),h)b(h,E)&&(g[E]=c(h[E]))}return g}(s),Q=null,s}var _e={}.toString;function Ee(s){return _e.call(s).slice(8,-1)}var xe=typeof Symbol<"u"?Symbol.iterator:"@@iterator",Ne=typeof xe=="symbol"?function(s){var c;return s!=null&&(c=s[xe])&&c.apply(s)}:function(){return null};function Ae(s,c){return c=s.indexOf(c),0<=c&&s.splice(c,1),0<=c}var K={};function ge(s){var c,h,g,x;if(arguments.length===1){if(l(s))return s.slice();if(this===K&&typeof s=="string")return[s];if(x=Ne(s)){for(h=[];!(g=x.next()).done;)h.push(g.value);return h}if(s==null)return[s];if(typeof(c=s.length)!="number")return[s];for(h=new Array(c);c--;)h[c]=s[c];return h}for(c=arguments.length,h=new Array(c);c--;)h[c]=arguments[c];return h}var Ce=typeof Symbol<"u"?function(s){return s[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},Tn=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],Mt=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(Tn),Se={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function we(s,c){this.name=s,this.message=c}function je(s,c){return s+". Errors: "+Object.keys(c).map(function(h){return c[h].toString()}).filter(function(h,g,x){return x.indexOf(h)===g}).join(`
`)}function Fe(s,c,h,g){this.failures=c,this.failedKeys=g,this.successCount=h,this.message=je(s,c)}function Be(s,c){this.name="BulkError",this.failures=Object.keys(c).map(function(h){return c[h]}),this.failuresByPos=c,this.message=je(s,this.failures)}k(we).from(Error).extend({toString:function(){return this.name+": "+this.message}}),k(Fe).from(we),k(Be).from(we);var ee=Mt.reduce(function(s,c){return s[c]=c+"Error",s},{}),se=we,J=Mt.reduce(function(s,c){var h=c+"Error";function g(x,w){this.name=h,x?typeof x=="string"?(this.message="".concat(x).concat(w?`
 `+w:""),this.inner=w||null):typeof x=="object"&&(this.message="".concat(x.name," ").concat(x.message),this.inner=x):(this.message=Se[c]||h,this.inner=null)}return k(g).from(se),s[c]=g,s},{});J.Syntax=SyntaxError,J.Type=TypeError,J.Range=RangeError;var Ie=Tn.reduce(function(s,c){return s[c+"Error"]=J[c],s},{}),ve=Mt.reduce(function(s,c){return["Syntax","Type","Range"].indexOf(c)===-1&&(s[c+"Error"]=J[c]),s},{});function fe(){}function qe(s){return s}function vt(s,c){return s==null||s===qe?c:function(h){return c(s(h))}}function wt(s,c){return function(){s.apply(this,arguments),c.apply(this,arguments)}}function un(s,c){return s===fe?c:function(){var h=s.apply(this,arguments);h!==void 0&&(arguments[0]=h);var g=this.onsuccess,x=this.onerror;this.onsuccess=null,this.onerror=null;var w=c.apply(this,arguments);return g&&(this.onsuccess=this.onsuccess?wt(g,this.onsuccess):g),x&&(this.onerror=this.onerror?wt(x,this.onerror):x),w!==void 0?w:h}}function Nn(s,c){return s===fe?c:function(){s.apply(this,arguments);var h=this.onsuccess,g=this.onerror;this.onsuccess=this.onerror=null,c.apply(this,arguments),h&&(this.onsuccess=this.onsuccess?wt(h,this.onsuccess):h),g&&(this.onerror=this.onerror?wt(g,this.onerror):g)}}function kr(s,c){return s===fe?c:function(h){var g=s.apply(this,arguments);d(h,g);var x=this.onsuccess,w=this.onerror;return this.onsuccess=null,this.onerror=null,h=c.apply(this,arguments),x&&(this.onsuccess=this.onsuccess?wt(x,this.onsuccess):x),w&&(this.onerror=this.onerror?wt(w,this.onerror):w),g===void 0?h===void 0?void 0:h:d(g,h)}}function ka(s,c){return s===fe?c:function(){return c.apply(this,arguments)!==!1&&s.apply(this,arguments)}}function Vn(s,c){return s===fe?c:function(){var h=s.apply(this,arguments);if(h&&typeof h.then=="function"){for(var g=this,x=arguments.length,w=new Array(x);x--;)w[x]=arguments[x];return h.then(function(){return c.apply(g,w)})}return c.apply(this,arguments)}}ve.ModifyError=Fe,ve.DexieError=we,ve.BulkError=Be;var ut=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function _r(s){ut=s}var Ct={},fo=100,tt=typeof Promise>"u"?[]:function(){var s=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[s,f(s),s];var c=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[c,f(c),s]}(),Tn=tt[0],Mt=tt[1],tt=tt[2],Mt=Mt&&Mt.then,gt=Tn&&Tn.constructor,Sr=!!tt,Mn=function(s,c){In.push([s,c]),Wn&&(queueMicrotask(We),Wn=!1)},ln=!0,Wn=!0,Ut=[],cn=[],Ht=qe,Ot={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:fe,pgp:!1,env:{},finalize:fe},be=Ot,In=[],tn=0,Pn=[];function le(s){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var c=this._PSD=be;if(typeof s!="function"){if(s!==Ct)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&Dt(this,this._value))}this._state=null,this._value=null,++c.ref,function h(g,x){try{x(function(w){if(g._state===null){if(w===g)throw new TypeError("A promise cannot be resolved with itself.");var E=g._lib&&rt();w&&typeof w.then=="function"?h(g,function(N,P){w instanceof le?w._then(N,P):w.then(N,P)}):(g._state=!0,g._value=w,ho(g)),E&&ot()}},Dt.bind(null,g))}catch(w){Dt(g,w)}}(this,s)}var Er={get:function(){var s=be,c=go;function h(g,x){var w=this,E=!s.global&&(s!==be||c!==go),N=E&&!fn(),P=new le(function(O,z){De(w,new Gn($i(g,s,E,N),$i(x,s,E,N),O,z,s))});return this._consoleTask&&(P._consoleTask=this._consoleTask),P}return h.prototype=Ct,h},set:function(s){C(this,"then",s&&s.prototype===Ct?Er:{get:function(){return s},set:Er.set})}};function Gn(s,c,h,g,x){this.onFulfilled=typeof s=="function"?s:null,this.onRejected=typeof c=="function"?c:null,this.resolve=h,this.reject=g,this.psd=x}function Dt(s,c){var h,g;cn.push(c),s._state===null&&(h=s._lib&&rt(),c=Ht(c),s._state=!1,s._value=c,g=s,Ut.some(function(x){return x._value===g._value})||Ut.push(g),ho(s),h&&ot())}function ho(s){var c=s._listeners;s._listeners=[];for(var h=0,g=c.length;h<g;++h)De(s,c[h]);var x=s._PSD;--x.ref||x.finalize(),tn===0&&(++tn,Mn(function(){--tn==0&&Nt()},[]))}function De(s,c){if(s._state!==null){var h=s._state?c.onFulfilled:c.onRejected;if(h===null)return(s._state?c.resolve:c.reject)(s._value);++c.psd.ref,++tn,Mn(Ke,[h,s,c])}else s._listeners.push(c)}function Ke(s,c,h){try{var g,x=c._value;!c._state&&cn.length&&(cn=[]),g=ut&&c._consoleTask?c._consoleTask.run(function(){return s(x)}):s(x),c._state||cn.indexOf(x)!==-1||function(w){for(var E=Ut.length;E;)if(Ut[--E]._value===w._value)return Ut.splice(E,1)}(c),h.resolve(g)}catch(w){h.reject(w)}finally{--tn==0&&Nt(),--h.psd.ref||h.psd.finalize()}}function We(){Rn(Ot,function(){rt()&&ot()})}function rt(){var s=ln;return Wn=ln=!1,s}function ot(){var s,c,h;do for(;0<In.length;)for(s=In,In=[],h=s.length,c=0;c<h;++c){var g=s[c];g[0].apply(null,g[1])}while(0<In.length);Wn=ln=!0}function Nt(){var s=Ut;Ut=[],s.forEach(function(g){g._PSD.onunhandled.call(null,g._value,g)});for(var c=Pn.slice(0),h=c.length;h;)c[--h]()}function Tt(s){return new le(Ct,!1,s)}function Oe(s,c){var h=be;return function(){var g=rt(),x=be;try{return hn(h,!0),s.apply(this,arguments)}catch(w){c&&c(w)}finally{hn(x,!1),g&&ot()}}}v(le.prototype,{then:Er,_then:function(s,c){De(this,new Gn(null,null,s,c,be))},catch:function(s){if(arguments.length===1)return this.then(null,s);var c=s,h=arguments[1];return typeof c=="function"?this.then(null,function(g){return(g instanceof c?h:Tt)(g)}):this.then(null,function(g){return(g&&g.name===c?h:Tt)(g)})},finally:function(s){return this.then(function(c){return le.resolve(s()).then(function(){return c})},function(c){return le.resolve(s()).then(function(){return Tt(c)})})},timeout:function(s,c){var h=this;return s<1/0?new le(function(g,x){var w=setTimeout(function(){return x(new J.Timeout(c))},s);h.then(g,x).finally(clearTimeout.bind(null,w))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&C(le.prototype,Symbol.toStringTag,"Dexie.Promise"),Ot.env=Bi(),v(le,{all:function(){var s=ge.apply(null,arguments).map(bo);return new le(function(c,h){s.length===0&&c([]);var g=s.length;s.forEach(function(x,w){return le.resolve(x).then(function(E){s[w]=E,--g||c(s)},h)})})},resolve:function(s){return s instanceof le?s:s&&typeof s.then=="function"?new le(function(c,h){s.then(c,h)}):new le(Ct,!0,s)},reject:Tt,race:function(){var s=ge.apply(null,arguments).map(bo);return new le(function(c,h){s.map(function(g){return le.resolve(g).then(c,h)})})},PSD:{get:function(){return be},set:function(s){return be=s}},totalEchoes:{get:function(){return go}},newPSD:dn,usePSD:Rn,scheduler:{get:function(){return Mn},set:function(s){Mn=s}},rejectionMapper:{get:function(){return Ht},set:function(s){Ht=s}},follow:function(s,c){return new le(function(h,g){return dn(function(x,w){var E=be;E.unhandleds=[],E.onunhandled=w,E.finalize=wt(function(){var N,P=this;N=function(){P.unhandleds.length===0?x():w(P.unhandleds[0])},Pn.push(function O(){N(),Pn.splice(Pn.indexOf(O),1)}),++tn,Mn(function(){--tn==0&&Nt()},[])},E.finalize),s()},c,h,g)})}}),gt&&(gt.allSettled&&C(le,"allSettled",function(){var s=ge.apply(null,arguments).map(bo);return new le(function(c){s.length===0&&c([]);var h=s.length,g=new Array(h);s.forEach(function(x,w){return le.resolve(x).then(function(E){return g[w]={status:"fulfilled",value:E}},function(E){return g[w]={status:"rejected",reason:E}}).then(function(){return--h||c(g)})})})}),gt.any&&typeof AggregateError<"u"&&C(le,"any",function(){var s=ge.apply(null,arguments).map(bo);return new le(function(c,h){s.length===0&&h(new AggregateError([]));var g=s.length,x=new Array(g);s.forEach(function(w,E){return le.resolve(w).then(function(N){return c(N)},function(N){x[E]=N,--g||h(new AggregateError(x))})})})}),gt.withResolvers&&(le.withResolvers=gt.withResolvers));var Ve={awaits:0,echoes:0,id:0},tp=0,po=[],mo=0,go=0,np=0;function dn(s,c,h,g){var x=be,w=Object.create(x);return w.parent=x,w.ref=0,w.global=!1,w.id=++np,Ot.env,w.env=Sr?{Promise:le,PromiseProp:{value:le,configurable:!0,writable:!0},all:le.all,race:le.race,allSettled:le.allSettled,any:le.any,resolve:le.resolve,reject:le.reject}:{},c&&d(w,c),++x.ref,w.finalize=function(){--this.parent.ref||this.parent.finalize()},g=Rn(w,s,h,g),w.ref===0&&w.finalize(),g}function Yn(){return Ve.id||(Ve.id=++tp),++Ve.awaits,Ve.echoes+=fo,Ve.id}function fn(){return!!Ve.awaits&&(--Ve.awaits==0&&(Ve.id=0),Ve.echoes=Ve.awaits*fo,!0)}function bo(s){return Ve.echoes&&s&&s.constructor===gt?(Yn(),s.then(function(c){return fn(),c},function(c){return fn(),Je(c)})):s}function rp(){var s=po[po.length-1];po.pop(),hn(s,!1)}function hn(s,c){var h,g=be;(c?!Ve.echoes||mo++&&s===be:!mo||--mo&&s===be)||queueMicrotask(c?function(x){++go,Ve.echoes&&--Ve.echoes!=0||(Ve.echoes=Ve.awaits=Ve.id=0),po.push(be),hn(x,!0)}.bind(null,s):rp),s!==be&&(be=s,g===Ot&&(Ot.env=Bi()),Sr&&(h=Ot.env.Promise,c=s.env,(g.global||s.global)&&(Object.defineProperty(a,"Promise",c.PromiseProp),h.all=c.all,h.race=c.race,h.resolve=c.resolve,h.reject=c.reject,c.allSettled&&(h.allSettled=c.allSettled),c.any&&(h.any=c.any))))}function Bi(){var s=a.Promise;return Sr?{Promise:s,PromiseProp:Object.getOwnPropertyDescriptor(a,"Promise"),all:s.all,race:s.race,allSettled:s.allSettled,any:s.any,resolve:s.resolve,reject:s.reject}:{}}function Rn(s,c,h,g,x){var w=be;try{return hn(s,!0),c(h,g,x)}finally{hn(w,!1)}}function $i(s,c,h,g){return typeof s!="function"?s:function(){var x=be;h&&Yn(),hn(c,!0);try{return s.apply(this,arguments)}finally{hn(x,!1),g&&queueMicrotask(fn)}}}function _a(s){Promise===gt&&Ve.echoes===0?mo===0?s():enqueueNativeMicroTask(s):setTimeout(s,0)}(""+Mt).indexOf("[native code]")===-1&&(Yn=fn=fe);var Je=le.reject,Fn="ï¿¿",nn="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",qi="String expected.",Qn=[],xo="__dbnames",Sa="readonly",Ea="readwrite";function On(s,c){return s?c?function(){return s.apply(this,arguments)&&c.apply(this,arguments)}:s:c}var Ui={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function yo(s){return typeof s!="string"||/\./.test(s)?function(c){return c}:function(c){return c[s]===void 0&&s in c&&delete(c=me(c))[s],c}}function Hi(){throw J.Type("Entity instances must never be new:ed. Instances are generated by the framework bypassing the constructor.")}function ze(s,c){try{var h=Ki(s),g=Ki(c);if(h!==g)return h==="Array"?1:g==="Array"?-1:h==="binary"?1:g==="binary"?-1:h==="string"?1:g==="string"?-1:h==="Date"?1:g!=="Date"?NaN:-1;switch(h){case"number":case"Date":case"string":return c<s?1:s<c?-1:0;case"binary":return function(x,w){for(var E=x.length,N=w.length,P=E<N?E:N,O=0;O<P;++O)if(x[O]!==w[O])return x[O]<w[O]?-1:1;return E===N?0:E<N?-1:1}(Vi(s),Vi(c));case"Array":return function(x,w){for(var E=x.length,N=w.length,P=E<N?E:N,O=0;O<P;++O){var z=ze(x[O],w[O]);if(z!==0)return z}return E===N?0:E<N?-1:1}(s,c)}}catch{}return NaN}function Ki(s){var c=typeof s;return c!="object"?c:ArrayBuffer.isView(s)?"binary":(s=Ee(s),s==="ArrayBuffer"?"binary":s)}function Vi(s){return s instanceof Uint8Array?s:ArrayBuffer.isView(s)?new Uint8Array(s.buffer,s.byteOffset,s.byteLength):new Uint8Array(s)}function vo(s,c,h){var g=s.schema.yProps;return g?(c&&0<h.numFailures&&(c=c.filter(function(x,w){return!h.failures[w]})),Promise.all(g.map(function(x){return x=x.updatesTable,c?s.db.table(x).where("k").anyOf(c).delete():s.db.table(x).clear()})).then(function(){return h})):h}var Wi=(Ye.prototype._trans=function(s,c,h){var g=this._tx||be.trans,x=this.name,w=ut&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(s==="readonly"?"read":"write"," ").concat(this.name));function E(O,z,T){if(!T.schema[x])throw new J.NotFound("Table "+x+" not part of transaction");return c(T.idbtrans,T)}var N=rt();try{var P=g&&g.db._novip===this.db._novip?g===be.trans?g._promise(s,E,h):dn(function(){return g._promise(s,E,h)},{trans:g,transless:be.transless||be}):function O(z,T,q,R){if(z.idbdb&&(z._state.openComplete||be.letThrough||z._vip)){var L=z._createTransaction(T,q,z._dbSchema);try{L.create(),z._state.PR1398_maxLoop=3}catch($){return $.name===ee.InvalidState&&z.isOpen()&&0<--z._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),z.close({disableAutoOpen:!1}),z.open().then(function(){return O(z,T,q,R)})):Je($)}return L._promise(T,function($,B){return dn(function(){return be.trans=L,R($,B,L)})}).then(function($){if(T==="readwrite")try{L.idbtrans.commit()}catch{}return T==="readonly"?$:L._completion.then(function(){return $})})}if(z._state.openComplete)return Je(new J.DatabaseClosed(z._state.dbOpenError));if(!z._state.isBeingOpened){if(!z._state.autoOpen)return Je(new J.DatabaseClosed);z.open().catch(fe)}return z._state.dbReadyPromise.then(function(){return O(z,T,q,R)})}(this.db,s,[this.name],E);return w&&(P._consoleTask=w,P=P.catch(function(O){return console.trace(O),Je(O)})),P}finally{N&&ot()}},Ye.prototype.get=function(s,c){var h=this;return s&&s.constructor===Object?this.where(s).first(c):s==null?Je(new J.Type("Invalid argument to Table.get()")):this._trans("readonly",function(g){return h.core.get({trans:g,key:s}).then(function(x){return h.hook.reading.fire(x)})}).then(c)},Ye.prototype.where=function(s){if(typeof s=="string")return new this.db.WhereClause(this,s);if(l(s))return new this.db.WhereClause(this,"[".concat(s.join("+"),"]"));var c=i(s);if(c.length===1)return this.where(c[0]).equals(s[c[0]]);var h=this.schema.indexes.concat(this.schema.primKey).filter(function(N){if(N.compound&&c.every(function(O){return 0<=N.keyPath.indexOf(O)})){for(var P=0;P<c.length;++P)if(c.indexOf(N.keyPath[P])===-1)return!1;return!0}return!1}).sort(function(N,P){return N.keyPath.length-P.keyPath.length})[0];if(h&&this.db._maxKey!==Fn){var w=h.keyPath.slice(0,c.length);return this.where(w).equals(w.map(function(P){return s[P]}))}!h&&ut&&console.warn("The query ".concat(JSON.stringify(s)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(c.join("+"),"]"));var g=this.schema.idxByName;function x(N,P){return ze(N,P)===0}var E=c.reduce(function(T,P){var O=T[0],z=T[1],T=g[P],q=s[P];return[O||T,O||!T?On(z,T&&T.multi?function(R){return R=M(R,P),l(R)&&R.some(function(L){return x(q,L)})}:function(R){return x(q,M(R,P))}):z]},[null,null]),w=E[0],E=E[1];return w?this.where(w.name).equals(s[w.keyPath]).filter(E):h?this.filter(E):this.where(c).equals("")},Ye.prototype.filter=function(s){return this.toCollection().and(s)},Ye.prototype.count=function(s){return this.toCollection().count(s)},Ye.prototype.offset=function(s){return this.toCollection().offset(s)},Ye.prototype.limit=function(s){return this.toCollection().limit(s)},Ye.prototype.each=function(s){return this.toCollection().each(s)},Ye.prototype.toArray=function(s){return this.toCollection().toArray(s)},Ye.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},Ye.prototype.orderBy=function(s){return new this.db.Collection(new this.db.WhereClause(this,l(s)?"[".concat(s.join("+"),"]"):s))},Ye.prototype.reverse=function(){return this.toCollection().reverse()},Ye.prototype.mapToClass=function(s){var c,h=this.db,g=this.name;function x(){return c!==null&&c.apply(this,arguments)||this}(this.schema.mappedClass=s).prototype instanceof Hi&&(function(P,O){if(typeof O!="function"&&O!==null)throw new TypeError("Class extends value "+String(O)+" is not a constructor or null");function z(){this.constructor=P}n(P,O),P.prototype=O===null?Object.create(O):(z.prototype=O.prototype,new z)}(x,c=s),Object.defineProperty(x.prototype,"db",{get:function(){return h},enumerable:!1,configurable:!0}),x.prototype.table=function(){return g},s=x);for(var w=new Set,E=s.prototype;E;E=f(E))Object.getOwnPropertyNames(E).forEach(function(P){return w.add(P)});function N(P){if(!P)return P;var O,z=Object.create(s.prototype);for(O in P)if(!w.has(O))try{z[O]=P[O]}catch{}return z}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=N,this.hook("reading",N),s},Ye.prototype.defineClass=function(){return this.mapToClass(function(s){d(this,s)})},Ye.prototype.add=function(s,c){var h=this,g=this.schema.primKey,x=g.auto,w=g.keyPath,E=s;return w&&x&&(E=yo(w)(s)),this._trans("readwrite",function(N){return h.core.mutate({trans:N,type:"add",keys:c!=null?[c]:null,values:[E]})}).then(function(N){return N.numFailures?le.reject(N.failures[0]):N.lastResult}).then(function(N){if(w)try{F(s,w,N)}catch{}return N})},Ye.prototype.update=function(s,c){return typeof s!="object"||l(s)?this.where(":id").equals(s).modify(c):(s=M(s,this.schema.primKey.keyPath),s===void 0?Je(new J.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(s).modify(c))},Ye.prototype.put=function(s,c){var h=this,g=this.schema.primKey,x=g.auto,w=g.keyPath,E=s;return w&&x&&(E=yo(w)(s)),this._trans("readwrite",function(N){return h.core.mutate({trans:N,type:"put",values:[E],keys:c!=null?[c]:null})}).then(function(N){return N.numFailures?le.reject(N.failures[0]):N.lastResult}).then(function(N){if(w)try{F(s,w,N)}catch{}return N})},Ye.prototype.delete=function(s){var c=this;return this._trans("readwrite",function(h){return c.core.mutate({trans:h,type:"delete",keys:[s]}).then(function(g){return vo(c,[s],g)}).then(function(g){return g.numFailures?le.reject(g.failures[0]):void 0})})},Ye.prototype.clear=function(){var s=this;return this._trans("readwrite",function(c){return s.core.mutate({trans:c,type:"deleteRange",range:Ui}).then(function(h){return vo(s,null,h)})}).then(function(c){return c.numFailures?le.reject(c.failures[0]):void 0})},Ye.prototype.bulkGet=function(s){var c=this;return this._trans("readonly",function(h){return c.core.getMany({keys:s,trans:h}).then(function(g){return g.map(function(x){return c.hook.reading.fire(x)})})})},Ye.prototype.bulkAdd=function(s,c,h){var g=this,x=Array.isArray(c)?c:void 0,w=(h=h||(x?void 0:c))?h.allKeys:void 0;return this._trans("readwrite",function(E){var O=g.schema.primKey,N=O.auto,O=O.keyPath;if(O&&x)throw new J.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(x&&x.length!==s.length)throw new J.InvalidArgument("Arguments objects and keys must have the same length");var P=s.length,O=O&&N?s.map(yo(O)):s;return g.core.mutate({trans:E,type:"add",keys:x,values:O,wantResults:w}).then(function(L){var T=L.numFailures,q=L.results,R=L.lastResult,L=L.failures;if(T===0)return w?q:R;throw new Be("".concat(g.name,".bulkAdd(): ").concat(T," of ").concat(P," operations failed"),L)})})},Ye.prototype.bulkPut=function(s,c,h){var g=this,x=Array.isArray(c)?c:void 0,w=(h=h||(x?void 0:c))?h.allKeys:void 0;return this._trans("readwrite",function(E){var O=g.schema.primKey,N=O.auto,O=O.keyPath;if(O&&x)throw new J.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(x&&x.length!==s.length)throw new J.InvalidArgument("Arguments objects and keys must have the same length");var P=s.length,O=O&&N?s.map(yo(O)):s;return g.core.mutate({trans:E,type:"put",keys:x,values:O,wantResults:w}).then(function(L){var T=L.numFailures,q=L.results,R=L.lastResult,L=L.failures;if(T===0)return w?q:R;throw new Be("".concat(g.name,".bulkPut(): ").concat(T," of ").concat(P," operations failed"),L)})})},Ye.prototype.bulkUpdate=function(s){var c=this,h=this.core,g=s.map(function(E){return E.key}),x=s.map(function(E){return E.changes}),w=[];return this._trans("readwrite",function(E){return h.getMany({trans:E,keys:g,cache:"clone"}).then(function(N){var P=[],O=[];s.forEach(function(T,q){var R=T.key,L=T.changes,$=N[q];if($){for(var B=0,U=Object.keys(L);B<U.length;B++){var V=U[B],W=L[V];if(V===c.schema.primKey.keyPath){if(ze(W,R)!==0)throw new J.Constraint("Cannot update primary key in bulkUpdate()")}else F($,V,W)}w.push(q),P.push(R),O.push($)}});var z=P.length;return h.mutate({trans:E,type:"put",keys:P,values:O,updates:{keys:g,changeSpecs:x}}).then(function(T){var q=T.numFailures,R=T.failures;if(q===0)return z;for(var L=0,$=Object.keys(R);L<$.length;L++){var B,U=$[L],V=w[Number(U)];V!=null&&(B=R[U],delete R[U],R[V]=B)}throw new Be("".concat(c.name,".bulkUpdate(): ").concat(q," of ").concat(z," operations failed"),R)})})})},Ye.prototype.bulkDelete=function(s){var c=this,h=s.length;return this._trans("readwrite",function(g){return c.core.mutate({trans:g,type:"delete",keys:s}).then(function(x){return vo(c,s,x)})}).then(function(E){var x=E.numFailures,w=E.lastResult,E=E.failures;if(x===0)return w;throw new Be("".concat(c.name,".bulkDelete(): ").concat(x," of ").concat(h," operations failed"),E)})},Ye);function Ye(){}function jr(s){function c(E,N){if(N){for(var P=arguments.length,O=new Array(P-1);--P;)O[P-1]=arguments[P];return h[E].subscribe.apply(null,O),s}if(typeof E=="string")return h[E]}var h={};c.addEventType=w;for(var g=1,x=arguments.length;g<x;++g)w(arguments[g]);return c;function w(E,N,P){if(typeof E!="object"){var O;N=N||ka;var z={subscribers:[],fire:P=P||fe,subscribe:function(T){z.subscribers.indexOf(T)===-1&&(z.subscribers.push(T),z.fire=N(z.fire,T))},unsubscribe:function(T){z.subscribers=z.subscribers.filter(function(q){return q!==T}),z.fire=z.subscribers.reduce(N,P)}};return h[E]=c[E]=z}i(O=E).forEach(function(T){var q=O[T];if(l(q))w(T,O[T][0],O[T][1]);else{if(q!=="asap")throw new J.InvalidArgument("Invalid event config");var R=w(T,qe,function(){for(var L=arguments.length,$=new Array(L);L--;)$[L]=arguments[L];R.subscribers.forEach(function(B){I(function(){B.apply(null,$)})})})}})}}function Ar(s,c){return k(c).from({prototype:s}),c}function Zn(s,c){return!(s.filter||s.algorithm||s.or)&&(c?s.justLimit:!s.replayFilter)}function ja(s,c){s.filter=On(s.filter,c)}function Aa(s,c,h){var g=s.replayFilter;s.replayFilter=g?function(){return On(g(),c())}:c,s.justLimit=h&&!g}function wo(s,c){if(s.isPrimKey)return c.primaryKey;var h=c.getIndexByKeyPath(s.index);if(!h)throw new J.Schema("KeyPath "+s.index+" on object store "+c.name+" is not indexed");return h}function Gi(s,c,h){var g=wo(s,c.schema);return c.openCursor({trans:h,values:!s.keysOnly,reverse:s.dir==="prev",unique:!!s.unique,query:{index:g,range:s.range}})}function Co(s,c,h,g){var x=s.replayFilter?On(s.filter,s.replayFilter()):s.filter;if(s.or){var w={},E=function(N,P,O){var z,T;x&&!x(P,O,function(q){return P.stop(q)},function(q){return P.fail(q)})||((T=""+(z=P.primaryKey))=="[object ArrayBuffer]"&&(T=""+new Uint8Array(z)),b(w,T)||(w[T]=!0,c(N,P,O)))};return Promise.all([s.or._iterate(E,h),Yi(Gi(s,g,h),s.algorithm,E,!s.keysOnly&&s.valueMapper)])}return Yi(Gi(s,g,h),On(s.algorithm,x),c,!s.keysOnly&&s.valueMapper)}function Yi(s,c,h,g){var x=Oe(g?function(w,E,N){return h(g(w),E,N)}:h);return s.then(function(w){if(w)return w.start(function(){var E=function(){return w.continue()};c&&!c(w,function(N){return E=N},function(N){w.stop(N),E=fe},function(N){w.fail(N),E=fe})||x(w.value,w,function(N){return E=N}),E()})})}var Dr=(Qi.prototype.execute=function(s){var c=this["@@propmod"];if(c.add!==void 0){var h=c.add;if(l(h))return o(o([],l(s)?s:[],!0),h).sort();if(typeof h=="number")return(Number(s)||0)+h;if(typeof h=="bigint")try{return BigInt(s)+h}catch{return BigInt(0)+h}throw new TypeError("Invalid term ".concat(h))}if(c.remove!==void 0){var g=c.remove;if(l(g))return l(s)?s.filter(function(x){return!g.includes(x)}).sort():[];if(typeof g=="number")return Number(s)-g;if(typeof g=="bigint")try{return BigInt(s)-g}catch{return BigInt(0)-g}throw new TypeError("Invalid subtrahend ".concat(g))}return h=(h=c.replacePrefix)===null||h===void 0?void 0:h[0],h&&typeof s=="string"&&s.startsWith(h)?c.replacePrefix[1]+s.substring(h.length):s},Qi);function Qi(s){this["@@propmod"]=s}var op=(Ue.prototype._read=function(s,c){var h=this._ctx;return h.error?h.table._trans(null,Je.bind(null,h.error)):h.table._trans("readonly",s).then(c)},Ue.prototype._write=function(s){var c=this._ctx;return c.error?c.table._trans(null,Je.bind(null,c.error)):c.table._trans("readwrite",s,"locked")},Ue.prototype._addAlgorithm=function(s){var c=this._ctx;c.algorithm=On(c.algorithm,s)},Ue.prototype._iterate=function(s,c){return Co(this._ctx,s,c,this._ctx.table.core)},Ue.prototype.clone=function(s){var c=Object.create(this.constructor.prototype),h=Object.create(this._ctx);return s&&d(h,s),c._ctx=h,c},Ue.prototype.raw=function(){return this._ctx.valueMapper=null,this},Ue.prototype.each=function(s){var c=this._ctx;return this._read(function(h){return Co(c,s,h,c.table.core)})},Ue.prototype.count=function(s){var c=this;return this._read(function(h){var g=c._ctx,x=g.table.core;if(Zn(g,!0))return x.count({trans:h,query:{index:wo(g,x.schema),range:g.range}}).then(function(E){return Math.min(E,g.limit)});var w=0;return Co(g,function(){return++w,!1},h,x).then(function(){return w})}).then(s)},Ue.prototype.sortBy=function(s,c){var h=s.split(".").reverse(),g=h[0],x=h.length-1;function w(P,O){return O?w(P[h[O]],O-1):P[g]}var E=this._ctx.dir==="next"?1:-1;function N(P,O){return ze(w(P,x),w(O,x))*E}return this.toArray(function(P){return P.sort(N)}).then(c)},Ue.prototype.toArray=function(s){var c=this;return this._read(function(h){var g=c._ctx;if(g.dir==="next"&&Zn(g,!0)&&0<g.limit){var x=g.valueMapper,w=wo(g,g.table.core.schema);return g.table.core.query({trans:h,limit:g.limit,values:!0,query:{index:w,range:g.range}}).then(function(N){return N=N.result,x?N.map(x):N})}var E=[];return Co(g,function(N){return E.push(N)},h,g.table.core).then(function(){return E})},s)},Ue.prototype.offset=function(s){var c=this._ctx;return s<=0||(c.offset+=s,Zn(c)?Aa(c,function(){var h=s;return function(g,x){return h===0||(h===1?--h:x(function(){g.advance(h),h=0}),!1)}}):Aa(c,function(){var h=s;return function(){return--h<0}})),this},Ue.prototype.limit=function(s){return this._ctx.limit=Math.min(this._ctx.limit,s),Aa(this._ctx,function(){var c=s;return function(h,g,x){return--c<=0&&g(x),0<=c}},!0),this},Ue.prototype.until=function(s,c){return ja(this._ctx,function(h,g,x){return!s(h.value)||(g(x),c)}),this},Ue.prototype.first=function(s){return this.limit(1).toArray(function(c){return c[0]}).then(s)},Ue.prototype.last=function(s){return this.reverse().first(s)},Ue.prototype.filter=function(s){var c;return ja(this._ctx,function(h){return s(h.value)}),(c=this._ctx).isMatch=On(c.isMatch,s),this},Ue.prototype.and=function(s){return this.filter(s)},Ue.prototype.or=function(s){return new this.db.WhereClause(this._ctx.table,s,this)},Ue.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},Ue.prototype.desc=function(){return this.reverse()},Ue.prototype.eachKey=function(s){var c=this._ctx;return c.keysOnly=!c.isMatch,this.each(function(h,g){s(g.key,g)})},Ue.prototype.eachUniqueKey=function(s){return this._ctx.unique="unique",this.eachKey(s)},Ue.prototype.eachPrimaryKey=function(s){var c=this._ctx;return c.keysOnly=!c.isMatch,this.each(function(h,g){s(g.primaryKey,g)})},Ue.prototype.keys=function(s){var c=this._ctx;c.keysOnly=!c.isMatch;var h=[];return this.each(function(g,x){h.push(x.key)}).then(function(){return h}).then(s)},Ue.prototype.primaryKeys=function(s){var c=this._ctx;if(c.dir==="next"&&Zn(c,!0)&&0<c.limit)return this._read(function(g){var x=wo(c,c.table.core.schema);return c.table.core.query({trans:g,values:!1,limit:c.limit,query:{index:x,range:c.range}})}).then(function(g){return g.result}).then(s);c.keysOnly=!c.isMatch;var h=[];return this.each(function(g,x){h.push(x.primaryKey)}).then(function(){return h}).then(s)},Ue.prototype.uniqueKeys=function(s){return this._ctx.unique="unique",this.keys(s)},Ue.prototype.firstKey=function(s){return this.limit(1).keys(function(c){return c[0]}).then(s)},Ue.prototype.lastKey=function(s){return this.reverse().firstKey(s)},Ue.prototype.distinct=function(){var s=this._ctx,s=s.index&&s.table.schema.idxByName[s.index];if(!s||!s.multi)return this;var c={};return ja(this._ctx,function(x){var g=x.primaryKey.toString(),x=b(c,g);return c[g]=!0,!x}),this},Ue.prototype.modify=function(s){var c=this,h=this._ctx;return this._write(function(g){var x,w,E;E=typeof s=="function"?s:(x=i(s),w=x.length,function(U){for(var V=!1,W=0;W<w;++W){var G=x[W],X=s[G],ae=M(U,G);X instanceof Dr?(F(U,G,X.execute(ae)),V=!0):ae!==X&&(F(U,G,X),V=!0)}return V});var N=h.table.core,T=N.schema.primaryKey,P=T.outbound,O=T.extractKey,z=200,T=c.db._options.modifyChunkSize;T&&(z=typeof T=="object"?T[N.name]||T["*"]||200:T);function q(U,G){var W=G.failures,G=G.numFailures;L+=U-G;for(var X=0,ae=i(W);X<ae.length;X++){var ne=ae[X];R.push(W[ne])}}var R=[],L=0,$=[],B=s===Zi;return c.clone().primaryKeys().then(function(U){function V(G){var X=Math.min(z,U.length-G),ae=U.slice(G,G+X);return(B?Promise.resolve([]):N.getMany({trans:g,keys:ae,cache:"immutable"})).then(function(ne){var re=[],ce=[],ue=P?[]:null,de=B?ae:[];if(!B)for(var Pe=0;Pe<X;++Pe){var $e=ne[Pe],Me={value:me($e),primKey:U[G+Pe]};E.call(Me,Me.value,Me)!==!1&&(Me.value==null?de.push(U[G+Pe]):P||ze(O($e),O(Me.value))===0?(ce.push(Me.value),P&&ue.push(U[G+Pe])):(de.push(U[G+Pe]),re.push(Me.value)))}return Promise.resolve(0<re.length&&N.mutate({trans:g,type:"add",values:re}).then(function(Xe){for(var Te in Xe.failures)de.splice(parseInt(Te),1);q(re.length,Xe)})).then(function(){return(0<ce.length||W&&typeof s=="object")&&N.mutate({trans:g,type:"put",keys:ue,values:ce,criteria:W,changeSpec:typeof s!="function"&&s,isAdditionalChunk:0<G}).then(function(Xe){return q(ce.length,Xe)})}).then(function(){return(0<de.length||W&&B)&&N.mutate({trans:g,type:"delete",keys:de,criteria:W,isAdditionalChunk:0<G}).then(function(Xe){return vo(h.table,de,Xe)}).then(function(Xe){return q(de.length,Xe)})}).then(function(){return U.length>G+X&&V(G+z)})})}var W=Zn(h)&&h.limit===1/0&&(typeof s!="function"||B)&&{index:h.index,range:h.range};return V(0).then(function(){if(0<R.length)throw new Fe("Error modifying one or more objects",R,L,$);return U.length})})})},Ue.prototype.delete=function(){var s=this._ctx,c=s.range;return!Zn(s)||s.table.schema.yProps||!s.isPrimKey&&c.type!==3?this.modify(Zi):this._write(function(h){var g=s.table.core.schema.primaryKey,x=c;return s.table.core.count({trans:h,query:{index:g,range:x}}).then(function(w){return s.table.core.mutate({trans:h,type:"deleteRange",range:x}).then(function(P){var N=P.failures,P=P.numFailures;if(P)throw new Fe("Could not delete some values",Object.keys(N).map(function(O){return N[O]}),w-P);return w-P})})})},Ue);function Ue(){}var Zi=function(s,c){return c.value=null};function ap(s,c){return s<c?-1:s===c?0:1}function sp(s,c){return c<s?-1:s===c?0:1}function kt(s,c,h){return s=s instanceof Ji?new s.Collection(s):s,s._ctx.error=new(h||TypeError)(c),s}function Xn(s){return new s.Collection(s,function(){return Xi("")}).limit(0)}function ko(s,c,h,g){var x,w,E,N,P,O,z,T=h.length;if(!h.every(function(L){return typeof L=="string"}))return kt(s,qi);function q(L){x=L==="next"?function(B){return B.toUpperCase()}:function(B){return B.toLowerCase()},w=L==="next"?function(B){return B.toLowerCase()}:function(B){return B.toUpperCase()},E=L==="next"?ap:sp;var $=h.map(function(B){return{lower:w(B),upper:x(B)}}).sort(function(B,U){return E(B.lower,U.lower)});N=$.map(function(B){return B.upper}),P=$.map(function(B){return B.lower}),z=(O=L)==="next"?"":g}q("next"),s=new s.Collection(s,function(){return pn(N[0],P[T-1]+g)}),s._ondirectionchange=function(L){q(L)};var R=0;return s._addAlgorithm(function(L,$,B){var U=L.key;if(typeof U!="string")return!1;var V=w(U);if(c(V,P,R))return!0;for(var W=null,G=R;G<T;++G){var X=function(ae,ne,re,ce,ue,de){for(var Pe=Math.min(ae.length,ce.length),$e=-1,Me=0;Me<Pe;++Me){var Xe=ne[Me];if(Xe!==ce[Me])return ue(ae[Me],re[Me])<0?ae.substr(0,Me)+re[Me]+re.substr(Me+1):ue(ae[Me],ce[Me])<0?ae.substr(0,Me)+ce[Me]+re.substr(Me+1):0<=$e?ae.substr(0,$e)+ne[$e]+re.substr($e+1):null;ue(ae[Me],Xe)<0&&($e=Me)}return Pe<ce.length&&de==="next"?ae+re.substr(ae.length):Pe<ae.length&&de==="prev"?ae.substr(0,re.length):$e<0?null:ae.substr(0,$e)+ce[$e]+re.substr($e+1)}(U,V,N[G],P[G],E,O);X===null&&W===null?R=G+1:(W===null||0<E(W,X))&&(W=X)}return $(W!==null?function(){L.continue(W+z)}:B),!1}),s}function pn(s,c,h,g){return{type:2,lower:s,upper:c,lowerOpen:h,upperOpen:g}}function Xi(s){return{type:1,lower:s,upper:s}}var Ji=(Object.defineProperty(at.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),at.prototype.between=function(s,c,h,g){h=h!==!1,g=g===!0;try{return 0<this._cmp(s,c)||this._cmp(s,c)===0&&(h||g)&&(!h||!g)?Xn(this):new this.Collection(this,function(){return pn(s,c,!h,!g)})}catch{return kt(this,nn)}},at.prototype.equals=function(s){return s==null?kt(this,nn):new this.Collection(this,function(){return Xi(s)})},at.prototype.above=function(s){return s==null?kt(this,nn):new this.Collection(this,function(){return pn(s,void 0,!0)})},at.prototype.aboveOrEqual=function(s){return s==null?kt(this,nn):new this.Collection(this,function(){return pn(s,void 0,!1)})},at.prototype.below=function(s){return s==null?kt(this,nn):new this.Collection(this,function(){return pn(void 0,s,!1,!0)})},at.prototype.belowOrEqual=function(s){return s==null?kt(this,nn):new this.Collection(this,function(){return pn(void 0,s)})},at.prototype.startsWith=function(s){return typeof s!="string"?kt(this,qi):this.between(s,s+Fn,!0,!0)},at.prototype.startsWithIgnoreCase=function(s){return s===""?this.startsWith(s):ko(this,function(c,h){return c.indexOf(h[0])===0},[s],Fn)},at.prototype.equalsIgnoreCase=function(s){return ko(this,function(c,h){return c===h[0]},[s],"")},at.prototype.anyOfIgnoreCase=function(){var s=ge.apply(K,arguments);return s.length===0?Xn(this):ko(this,function(c,h){return h.indexOf(c)!==-1},s,"")},at.prototype.startsWithAnyOfIgnoreCase=function(){var s=ge.apply(K,arguments);return s.length===0?Xn(this):ko(this,function(c,h){return h.some(function(g){return c.indexOf(g)===0})},s,Fn)},at.prototype.anyOf=function(){var s=this,c=ge.apply(K,arguments),h=this._cmp;try{c.sort(h)}catch{return kt(this,nn)}if(c.length===0)return Xn(this);var g=new this.Collection(this,function(){return pn(c[0],c[c.length-1])});g._ondirectionchange=function(w){h=w==="next"?s._ascending:s._descending,c.sort(h)};var x=0;return g._addAlgorithm(function(w,E,N){for(var P=w.key;0<h(P,c[x]);)if(++x===c.length)return E(N),!1;return h(P,c[x])===0||(E(function(){w.continue(c[x])}),!1)}),g},at.prototype.notEqual=function(s){return this.inAnyRange([[-1/0,s],[s,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},at.prototype.noneOf=function(){var s=ge.apply(K,arguments);if(s.length===0)return new this.Collection(this);try{s.sort(this._ascending)}catch{return kt(this,nn)}var c=s.reduce(function(h,g){return h?h.concat([[h[h.length-1][1],g]]):[[-1/0,g]]},null);return c.push([s[s.length-1],this.db._maxKey]),this.inAnyRange(c,{includeLowers:!1,includeUppers:!1})},at.prototype.inAnyRange=function(U,c){var h=this,g=this._cmp,x=this._ascending,w=this._descending,E=this._min,N=this._max;if(U.length===0)return Xn(this);if(!U.every(function(V){return V[0]!==void 0&&V[1]!==void 0&&x(V[0],V[1])<=0}))return kt(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",J.InvalidArgument);var P=!c||c.includeLowers!==!1,O=c&&c.includeUppers===!0,z,T=x;function q(V,W){return T(V[0],W[0])}try{(z=U.reduce(function(V,W){for(var G=0,X=V.length;G<X;++G){var ae=V[G];if(g(W[0],ae[1])<0&&0<g(W[1],ae[0])){ae[0]=E(ae[0],W[0]),ae[1]=N(ae[1],W[1]);break}}return G===X&&V.push(W),V},[])).sort(q)}catch{return kt(this,nn)}var R=0,L=O?function(V){return 0<x(V,z[R][1])}:function(V){return 0<=x(V,z[R][1])},$=P?function(V){return 0<w(V,z[R][0])}:function(V){return 0<=w(V,z[R][0])},B=L,U=new this.Collection(this,function(){return pn(z[0][0],z[z.length-1][1],!P,!O)});return U._ondirectionchange=function(V){T=V==="next"?(B=L,x):(B=$,w),z.sort(q)},U._addAlgorithm(function(V,W,G){for(var X,ae=V.key;B(ae);)if(++R===z.length)return W(G),!1;return!L(X=ae)&&!$(X)||(h._cmp(ae,z[R][1])===0||h._cmp(ae,z[R][0])===0||W(function(){T===x?V.continue(z[R][0]):V.continue(z[R][1])}),!1)}),U},at.prototype.startsWithAnyOf=function(){var s=ge.apply(K,arguments);return s.every(function(c){return typeof c=="string"})?s.length===0?Xn(this):this.inAnyRange(s.map(function(c){return[c,c+Fn]})):kt(this,"startsWithAnyOf() only works with strings")},at);function at(){}function Kt(s){return Oe(function(c){return Nr(c),s(c.target.error),!1})}function Nr(s){s.stopPropagation&&s.stopPropagation(),s.preventDefault&&s.preventDefault()}var Tr="storagemutated",Da="x-storagemutated-1",mn=jr(null,Tr),ip=(Vt.prototype._lock=function(){return D(!be.global),++this._reculock,this._reculock!==1||be.global||(be.lockOwnerFor=this),this},Vt.prototype._unlock=function(){if(D(!be.global),--this._reculock==0)for(be.global||(be.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var s=this._blockedFuncs.shift();try{Rn(s[1],s[0])}catch{}}return this},Vt.prototype._locked=function(){return this._reculock&&be.lockOwnerFor!==this},Vt.prototype.create=function(s){var c=this;if(!this.mode)return this;var h=this.db.idbdb,g=this.db._state.dbOpenError;if(D(!this.idbtrans),!s&&!h)switch(g&&g.name){case"DatabaseClosedError":throw new J.DatabaseClosed(g);case"MissingAPIError":throw new J.MissingAPI(g.message,g);default:throw new J.OpenFailed(g)}if(!this.active)throw new J.TransactionInactive;return D(this._completion._state===null),(s=this.idbtrans=s||(this.db.core||h).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=Oe(function(x){Nr(x),c._reject(s.error)}),s.onabort=Oe(function(x){Nr(x),c.active&&c._reject(new J.Abort(s.error)),c.active=!1,c.on("abort").fire(x)}),s.oncomplete=Oe(function(){c.active=!1,c._resolve(),"mutatedParts"in s&&mn.storagemutated.fire(s.mutatedParts)}),this},Vt.prototype._promise=function(s,c,h){var g=this;if(s==="readwrite"&&this.mode!=="readwrite")return Je(new J.ReadOnly("Transaction is readonly"));if(!this.active)return Je(new J.TransactionInactive);if(this._locked())return new le(function(w,E){g._blockedFuncs.push([function(){g._promise(s,c,h).then(w,E)},be])});if(h)return dn(function(){var w=new le(function(E,N){g._lock();var P=c(E,N,g);P&&P.then&&P.then(E,N)});return w.finally(function(){return g._unlock()}),w._lib=!0,w});var x=new le(function(w,E){var N=c(w,E,g);N&&N.then&&N.then(w,E)});return x._lib=!0,x},Vt.prototype._root=function(){return this.parent?this.parent._root():this},Vt.prototype.waitFor=function(s){var c,h=this._root(),g=le.resolve(s);h._waitingFor?h._waitingFor=h._waitingFor.then(function(){return g}):(h._waitingFor=g,h._waitingQueue=[],c=h.idbtrans.objectStore(h.storeNames[0]),function w(){for(++h._spinCount;h._waitingQueue.length;)h._waitingQueue.shift()();h._waitingFor&&(c.get(-1/0).onsuccess=w)}());var x=h._waitingFor;return new le(function(w,E){g.then(function(N){return h._waitingQueue.push(Oe(w.bind(null,N)))},function(N){return h._waitingQueue.push(Oe(E.bind(null,N)))}).finally(function(){h._waitingFor===x&&(h._waitingFor=null)})})},Vt.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new J.Abort))},Vt.prototype.table=function(s){var c=this._memoizedTables||(this._memoizedTables={});if(b(c,s))return c[s];var h=this.schema[s];if(!h)throw new J.NotFound("Table "+s+" not part of transaction");return h=new this.db.Table(s,h,this),h.core=this.db.core.table(s),c[s]=h},Vt);function Vt(){}function Na(s,c,h,g,x,w,E,N){return{name:s,keyPath:c,unique:h,multi:g,auto:x,compound:w,src:(h&&!E?"&":"")+(g?"*":"")+(x?"++":"")+eu(c),type:N}}function eu(s){return typeof s=="string"?s:s?"["+[].join.call(s,"+")+"]":""}function Ta(s,c,h){return{name:s,primKey:c,indexes:h,mappedClass:null,idxByName:(g=function(x){return[x.name,x]},h.reduce(function(x,w,E){return E=g(w,E),E&&(x[E[0]]=E[1]),x},{}))};var g}var Mr=function(s){try{return s.only([[]]),Mr=function(){return[[]]},[[]]}catch{return Mr=function(){return Fn},Fn}};function Ma(s){return s==null?function(){}:typeof s=="string"?(c=s).split(".").length===1?function(h){return h[c]}:function(h){return M(h,c)}:function(h){return M(h,s)};var c}function tu(s){return[].slice.call(s)}var up=0;function Ir(s){return s==null?":id":typeof s=="string"?s:"[".concat(s.join("+"),"]")}function lp(s,c,P){function g(B){if(B.type===3)return null;if(B.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var R=B.lower,L=B.upper,$=B.lowerOpen,B=B.upperOpen;return R===void 0?L===void 0?null:c.upperBound(L,!!B):L===void 0?c.lowerBound(R,!!$):c.bound(R,L,!!$,!!B)}function x(q){var R,L=q.name;return{name:L,schema:q,mutate:function($){var B=$.trans,U=$.type,V=$.keys,W=$.values,G=$.range;return new Promise(function(X,ae){X=Oe(X);var ne=B.objectStore(L),re=ne.keyPath==null,ce=U==="put"||U==="add";if(!ce&&U!=="delete"&&U!=="deleteRange")throw new Error("Invalid operation type: "+U);var ue,de=(V||W||{length:1}).length;if(V&&W&&V.length!==W.length)throw new Error("Given keys array must have same length as given values array.");if(de===0)return X({numFailures:0,failures:{},results:[],lastResult:void 0});function Pe(ht){++Xe,Nr(ht)}var $e=[],Me=[],Xe=0;if(U==="deleteRange"){if(G.type===4)return X({numFailures:Xe,failures:Me,results:[],lastResult:void 0});G.type===3?$e.push(ue=ne.clear()):$e.push(ue=ne.delete(g(G)))}else{var re=ce?re?[W,V]:[W,null]:[V,null],Te=re[0],ct=re[1];if(ce)for(var dt=0;dt<de;++dt)$e.push(ue=ct&&ct[dt]!==void 0?ne[U](Te[dt],ct[dt]):ne[U](Te[dt])),ue.onerror=Pe;else for(dt=0;dt<de;++dt)$e.push(ue=ne[U](Te[dt])),ue.onerror=Pe}function Ro(ht){ht=ht.target.result,$e.forEach(function(Bn,Qa){return Bn.error!=null&&(Me[Qa]=Bn.error)}),X({numFailures:Xe,failures:Me,results:U==="delete"?V:$e.map(function(Bn){return Bn.result}),lastResult:ht})}ue.onerror=function(ht){Pe(ht),Ro(ht)},ue.onsuccess=Ro})},getMany:function($){var B=$.trans,U=$.keys;return new Promise(function(V,W){V=Oe(V);for(var G,X=B.objectStore(L),ae=U.length,ne=new Array(ae),re=0,ce=0,ue=function($e){$e=$e.target,ne[$e._pos]=$e.result,++ce===re&&V(ne)},de=Kt(W),Pe=0;Pe<ae;++Pe)U[Pe]!=null&&((G=X.get(U[Pe]))._pos=Pe,G.onsuccess=ue,G.onerror=de,++re);re===0&&V(ne)})},get:function($){var B=$.trans,U=$.key;return new Promise(function(V,W){V=Oe(V);var G=B.objectStore(L).get(U);G.onsuccess=function(X){return V(X.target.result)},G.onerror=Kt(W)})},query:(R=O,function($){return new Promise(function(B,U){B=Oe(B);var V,W,G,re=$.trans,X=$.values,ae=$.limit,ue=$.query,ne=ae===1/0?void 0:ae,ce=ue.index,ue=ue.range,re=re.objectStore(L),ce=ce.isPrimaryKey?re:re.index(ce.name),ue=g(ue);if(ae===0)return B({result:[]});R?((ne=X?ce.getAll(ue,ne):ce.getAllKeys(ue,ne)).onsuccess=function(de){return B({result:de.target.result})},ne.onerror=Kt(U)):(V=0,W=!X&&"openKeyCursor"in ce?ce.openKeyCursor(ue):ce.openCursor(ue),G=[],W.onsuccess=function(de){var Pe=W.result;return Pe?(G.push(X?Pe.value:Pe.primaryKey),++V===ae?B({result:G}):void Pe.continue()):B({result:G})},W.onerror=Kt(U))})}),openCursor:function($){var B=$.trans,U=$.values,V=$.query,W=$.reverse,G=$.unique;return new Promise(function(X,ae){X=Oe(X);var ce=V.index,ne=V.range,re=B.objectStore(L),re=ce.isPrimaryKey?re:re.index(ce.name),ce=W?G?"prevunique":"prev":G?"nextunique":"next",ue=!U&&"openKeyCursor"in re?re.openKeyCursor(g(ne),ce):re.openCursor(g(ne),ce);ue.onerror=Kt(ae),ue.onsuccess=Oe(function(de){var Pe,$e,Me,Xe,Te=ue.result;Te?(Te.___id=++up,Te.done=!1,Pe=Te.continue.bind(Te),$e=($e=Te.continuePrimaryKey)&&$e.bind(Te),Me=Te.advance.bind(Te),Xe=function(){throw new Error("Cursor not stopped")},Te.trans=B,Te.stop=Te.continue=Te.continuePrimaryKey=Te.advance=function(){throw new Error("Cursor not started")},Te.fail=Oe(ae),Te.next=function(){var ct=this,dt=1;return this.start(function(){return dt--?ct.continue():ct.stop()}).then(function(){return ct})},Te.start=function(ct){function dt(){if(ue.result)try{ct()}catch(ht){Te.fail(ht)}else Te.done=!0,Te.start=function(){throw new Error("Cursor behind last entry")},Te.stop()}var Ro=new Promise(function(ht,Bn){ht=Oe(ht),ue.onerror=Kt(Bn),Te.fail=Bn,Te.stop=function(Qa){Te.stop=Te.continue=Te.continuePrimaryKey=Te.advance=Xe,ht(Qa)}});return ue.onsuccess=Oe(function(ht){ue.onsuccess=dt,dt()}),Te.continue=Pe,Te.continuePrimaryKey=$e,Te.advance=Me,dt(),Ro},X(Te)):X(null)},ae)})},count:function($){var B=$.query,U=$.trans,V=B.index,W=B.range;return new Promise(function(G,X){var ae=U.objectStore(L),ne=V.isPrimaryKey?ae:ae.index(V.name),ae=g(W),ne=ae?ne.count(ae):ne.count();ne.onsuccess=Oe(function(re){return G(re.target.result)}),ne.onerror=Kt(X)})}}}var w,E,N,z=(E=P,N=tu((w=s).objectStoreNames),{schema:{name:w.name,tables:N.map(function(q){return E.objectStore(q)}).map(function(q){var R=q.keyPath,B=q.autoIncrement,L=l(R),$={},B={name:q.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:R==null,compound:L,keyPath:R,autoIncrement:B,unique:!0,extractKey:Ma(R)},indexes:tu(q.indexNames).map(function(U){return q.index(U)}).map(function(G){var V=G.name,W=G.unique,X=G.multiEntry,G=G.keyPath,X={name:V,compound:l(G),keyPath:G,unique:W,multiEntry:X,extractKey:Ma(G)};return $[Ir(G)]=X}),getIndexByKeyPath:function(U){return $[Ir(U)]}};return $[":id"]=B.primaryKey,R!=null&&($[Ir(R)]=B.primaryKey),B})},hasGetAll:0<N.length&&"getAll"in E.objectStore(N[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),P=z.schema,O=z.hasGetAll,z=P.tables.map(x),T={};return z.forEach(function(q){return T[q.name]=q}),{stack:"dbcore",transaction:s.transaction.bind(s),table:function(q){if(!T[q])throw new Error("Table '".concat(q,"' not found"));return T[q]},MIN_KEY:-1/0,MAX_KEY:Mr(c),schema:P}}function cp(s,c,h,g){var x=h.IDBKeyRange;return h.indexedDB,{dbcore:(g=lp(c,x,g),s.dbcore.reduce(function(w,E){return E=E.create,r(r({},w),E(w))},g))}}function _o(s,g){var h=g.db,g=cp(s._middlewares,h,s._deps,g);s.core=g.dbcore,s.tables.forEach(function(x){var w=x.name;s.core.schema.tables.some(function(E){return E.name===w})&&(x.core=s.core.table(w),s[w]instanceof s.Table&&(s[w].core=x.core))})}function So(s,c,h,g){h.forEach(function(x){var w=g[x];c.forEach(function(E){var N=function P(O,z){return A(O,z)||(O=f(O))&&P(O,z)}(E,x);(!N||"value"in N&&N.value===void 0)&&(E===s.Transaction.prototype||E instanceof s.Transaction?C(E,x,{get:function(){return this.table(x)},set:function(P){y(this,x,{value:P,writable:!0,configurable:!0,enumerable:!0})}}):E[x]=new s.Table(x,w))})})}function Ia(s,c){c.forEach(function(h){for(var g in h)h[g]instanceof s.Table&&delete h[g]})}function dp(s,c){return s._cfg.version-c._cfg.version}function fp(s,c,h,g){var x=s._dbSchema;h.objectStoreNames.contains("$meta")&&!x.$meta&&(x.$meta=Ta("$meta",ru("")[0],[]),s._storeNames.push("$meta"));var w=s._createTransaction("readwrite",s._storeNames,x);w.create(h),w._completion.catch(g);var E=w._reject.bind(w),N=be.transless||be;dn(function(){return be.trans=w,be.transless=N,c!==0?(_o(s,h),O=c,((P=w).storeNames.includes("$meta")?P.table("$meta").get("version").then(function(z){return z??O}):le.resolve(O)).then(function(z){return q=z,R=w,L=h,$=[],z=(T=s)._versions,B=T._dbSchema=jo(0,T.idbdb,L),(z=z.filter(function(U){return U._cfg.version>=q})).length!==0?(z.forEach(function(U){$.push(function(){var V=B,W=U._cfg.dbschema;Ao(T,V,L),Ao(T,W,L),B=T._dbSchema=W;var G=Pa(V,W);G.add.forEach(function(ce){Ra(L,ce[0],ce[1].primKey,ce[1].indexes)}),G.change.forEach(function(ce){if(ce.recreate)throw new J.Upgrade("Not yet support for changing primary key");var ue=L.objectStore(ce.name);ce.add.forEach(function(de){return Eo(ue,de)}),ce.change.forEach(function(de){ue.deleteIndex(de.name),Eo(ue,de)}),ce.del.forEach(function(de){return ue.deleteIndex(de)})});var X=U._cfg.contentUpgrade;if(X&&U._cfg.version>q){_o(T,L),R._memoizedTables={};var ae=H(W);G.del.forEach(function(ce){ae[ce]=V[ce]}),Ia(T,[T.Transaction.prototype]),So(T,[T.Transaction.prototype],i(ae),ae),R.schema=ae;var ne,re=Ce(X);return re&&Yn(),G=le.follow(function(){var ce;(ne=X(R))&&re&&(ce=fn.bind(null,null),ne.then(ce,ce))}),ne&&typeof ne.then=="function"?le.resolve(ne):G.then(function(){return ne})}}),$.push(function(V){var W,G,X=U._cfg.dbschema;W=X,G=V,[].slice.call(G.db.objectStoreNames).forEach(function(ae){return W[ae]==null&&G.db.deleteObjectStore(ae)}),Ia(T,[T.Transaction.prototype]),So(T,[T.Transaction.prototype],T._storeNames,T._dbSchema),R.schema=T._dbSchema}),$.push(function(V){T.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(T.idbdb.version/10)===U._cfg.version?(T.idbdb.deleteObjectStore("$meta"),delete T._dbSchema.$meta,T._storeNames=T._storeNames.filter(function(W){return W!=="$meta"})):V.objectStore("$meta").put(U._cfg.version,"version"))})}),function U(){return $.length?le.resolve($.shift()(R.idbtrans)).then(U):le.resolve()}().then(function(){nu(B,L)})):le.resolve();var T,q,R,L,$,B}).catch(E)):(i(x).forEach(function(z){Ra(h,z,x[z].primKey,x[z].indexes)}),_o(s,h),void le.follow(function(){return s.on.populate.fire(w)}).catch(E));var P,O})}function hp(s,c){nu(s._dbSchema,c),c.db.version%10!=0||c.objectStoreNames.contains("$meta")||c.db.createObjectStore("$meta").add(Math.ceil(c.db.version/10-1),"version");var h=jo(0,s.idbdb,c);Ao(s,s._dbSchema,c);for(var g=0,x=Pa(h,s._dbSchema).change;g<x.length;g++){var w=function(E){if(E.change.length||E.recreate)return console.warn("Unable to patch indexes of table ".concat(E.name," because it has changes on the type of index or primary key.")),{value:void 0};var N=c.objectStore(E.name);E.add.forEach(function(P){ut&&console.debug("Dexie upgrade patch: Creating missing index ".concat(E.name,".").concat(P.src)),Eo(N,P)})}(x[g]);if(typeof w=="object")return w.value}}function Pa(s,c){var h,g={del:[],add:[],change:[]};for(h in s)c[h]||g.del.push(h);for(h in c){var x=s[h],w=c[h];if(x){var E={name:h,def:w,recreate:!1,del:[],add:[],change:[]};if(""+(x.primKey.keyPath||"")!=""+(w.primKey.keyPath||"")||x.primKey.auto!==w.primKey.auto)E.recreate=!0,g.change.push(E);else{var N=x.idxByName,P=w.idxByName,O=void 0;for(O in N)P[O]||E.del.push(O);for(O in P){var z=N[O],T=P[O];z?z.src!==T.src&&E.change.push(T):E.add.push(T)}(0<E.del.length||0<E.add.length||0<E.change.length)&&g.change.push(E)}}else g.add.push([h,w])}return g}function Ra(s,c,h,g){var x=s.db.createObjectStore(c,h.keyPath?{keyPath:h.keyPath,autoIncrement:h.auto}:{autoIncrement:h.auto});return g.forEach(function(w){return Eo(x,w)}),x}function nu(s,c){i(s).forEach(function(h){c.db.objectStoreNames.contains(h)||(ut&&console.debug("Dexie: Creating missing table",h),Ra(c,h,s[h].primKey,s[h].indexes))})}function Eo(s,c){s.createIndex(c.name,c.keyPath,{unique:c.unique,multiEntry:c.multi})}function jo(s,c,h){var g={};return _(c.objectStoreNames,0).forEach(function(x){for(var w=h.objectStore(x),E=Na(eu(O=w.keyPath),O||"",!0,!1,!!w.autoIncrement,O&&typeof O!="string",!0),N=[],P=0;P<w.indexNames.length;++P){var z=w.index(w.indexNames[P]),O=z.keyPath,z=Na(z.name,O,!!z.unique,!!z.multiEntry,!1,O&&typeof O!="string",!1);N.push(z)}g[x]=Ta(x,E,N)}),g}function Ao(s,c,h){for(var g=h.db.objectStoreNames,x=0;x<g.length;++x){var w=g[x],E=h.objectStore(w);s._hasGetAll="getAll"in E;for(var N=0;N<E.indexNames.length;++N){var P=E.indexNames[N],O=E.index(P).keyPath,z=typeof O=="string"?O:"["+_(O).join("+")+"]";!c[w]||(O=c[w].idxByName[z])&&(O.name=P,delete c[w].idxByName[z],c[w].idxByName[P]=O)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&a.WorkerGlobalScope&&a instanceof a.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(s._hasGetAll=!1)}function ru(s){return s.split(",").map(function(c,h){var w=c.split(":"),g=(x=w[1])===null||x===void 0?void 0:x.trim(),x=(c=w[0].trim()).replace(/([&*]|\+\+)/g,""),w=/^\[/.test(x)?x.match(/^\[(.*)\]$/)[1].split("+"):x;return Na(x,w||null,/\&/.test(c),/\*/.test(c),/\+\+/.test(c),l(w),h===0,g)})}var pp=(Jn.prototype._createTableSchema=Ta,Jn.prototype._parseIndexSyntax=ru,Jn.prototype._parseStoresSpec=function(s,c){var h=this;i(s).forEach(function(g){if(s[g]!==null){var x=h._parseIndexSyntax(s[g]),w=x.shift();if(!w)throw new J.Schema("Invalid schema for table "+g+": "+s[g]);if(w.unique=!0,w.multi)throw new J.Schema("Primary key cannot be multiEntry*");x.forEach(function(E){if(E.auto)throw new J.Schema("Only primary key can be marked as autoIncrement (++)");if(!E.keyPath)throw new J.Schema("Index must have a name and cannot be an empty string")}),x=h._createTableSchema(g,w,x),c[g]=x}})},Jn.prototype.stores=function(h){var c=this.db;this._cfg.storesSource=this._cfg.storesSource?d(this._cfg.storesSource,h):h;var h=c._versions,g={},x={};return h.forEach(function(w){d(g,w._cfg.storesSource),x=w._cfg.dbschema={},w._parseStoresSpec(g,x)}),c._dbSchema=x,Ia(c,[c._allTables,c,c.Transaction.prototype]),So(c,[c._allTables,c,c.Transaction.prototype,this._cfg.tables],i(x),x),c._storeNames=i(x),this},Jn.prototype.upgrade=function(s){return this._cfg.contentUpgrade=Vn(this._cfg.contentUpgrade||fe,s),this},Jn);function Jn(){}function Fa(s,c){var h=s._dbNamesDB;return h||(h=s._dbNamesDB=new rn(xo,{addons:[],indexedDB:s,IDBKeyRange:c})).version(1).stores({dbnames:"name"}),h.table("dbnames")}function Oa(s){return s&&typeof s.databases=="function"}function La(s){return dn(function(){return be.letThrough=!0,s()})}function za(s){return!("from"in s)}var lt=function(s,c){if(!this){var h=new lt;return s&&"d"in s&&d(h,s),h}d(this,arguments.length?{d:1,from:s,to:1<arguments.length?c:s}:{d:0})};function Pr(s,c,h){var g=ze(c,h);if(!isNaN(g)){if(0<g)throw RangeError();if(za(s))return d(s,{from:c,to:h,d:1});var x=s.l,g=s.r;if(ze(h,s.from)<0)return x?Pr(x,c,h):s.l={from:c,to:h,d:1,l:null,r:null},au(s);if(0<ze(c,s.to))return g?Pr(g,c,h):s.r={from:c,to:h,d:1,l:null,r:null},au(s);ze(c,s.from)<0&&(s.from=c,s.l=null,s.d=g?g.d+1:1),0<ze(h,s.to)&&(s.to=h,s.r=null,s.d=s.l?s.l.d+1:1),h=!s.r,x&&!s.l&&Rr(s,x),g&&h&&Rr(s,g)}}function Rr(s,c){za(c)||function h(g,P){var w=P.from,E=P.to,N=P.l,P=P.r;Pr(g,w,E),N&&h(g,N),P&&h(g,P)}(s,c)}function ou(s,c){var h=Do(c),g=h.next();if(g.done)return!1;for(var x=g.value,w=Do(s),E=w.next(x.from),N=E.value;!g.done&&!E.done;){if(ze(N.from,x.to)<=0&&0<=ze(N.to,x.from))return!0;ze(x.from,N.from)<0?x=(g=h.next(N.from)).value:N=(E=w.next(x.from)).value}return!1}function Do(s){var c=za(s)?null:{s:0,n:s};return{next:function(h){for(var g=0<arguments.length;c;)switch(c.s){case 0:if(c.s=1,g)for(;c.n.l&&ze(h,c.n.from)<0;)c={up:c,n:c.n.l,s:1};else for(;c.n.l;)c={up:c,n:c.n.l,s:1};case 1:if(c.s=2,!g||ze(h,c.n.to)<=0)return{value:c.n,done:!1};case 2:if(c.n.r){c.s=3,c={up:c,n:c.n.r,s:0};continue}case 3:c=c.up}return{done:!0}}}}function au(s){var c,h,g=(((c=s.r)===null||c===void 0?void 0:c.d)||0)-(((h=s.l)===null||h===void 0?void 0:h.d)||0),x=1<g?"r":g<-1?"l":"";x&&(c=x=="r"?"l":"r",h=r({},s),g=s[x],s.from=g.from,s.to=g.to,s[x]=g[x],h[x]=g[c],(s[c]=h).d=su(h)),s.d=su(s)}function su(h){var c=h.r,h=h.l;return(c?h?Math.max(c.d,h.d):c.d:h?h.d:0)+1}function No(s,c){return i(c).forEach(function(h){s[h]?Rr(s[h],c[h]):s[h]=function g(x){var w,E,N={};for(w in x)b(x,w)&&(E=x[w],N[w]=!E||typeof E!="object"||Y.has(E.constructor)?E:g(E));return N}(c[h])}),s}function Ba(s,c){return s.all||c.all||Object.keys(s).some(function(h){return c[h]&&ou(c[h],s[h])})}v(lt.prototype,((Mt={add:function(s){return Rr(this,s),this},addKey:function(s){return Pr(this,s,s),this},addKeys:function(s){var c=this;return s.forEach(function(h){return Pr(c,h,h)}),this},hasKey:function(s){var c=Do(this).next(s).value;return c&&ze(c.from,s)<=0&&0<=ze(c.to,s)}})[xe]=function(){return Do(this)},Mt));var Ln={},$a={},qa=!1;function To(s){No($a,s),qa||(qa=!0,setTimeout(function(){qa=!1,Ua($a,!($a={}))},0))}function Ua(s,c){c===void 0&&(c=!1);var h=new Set;if(s.all)for(var g=0,x=Object.values(Ln);g<x.length;g++)iu(E=x[g],s,h,c);else for(var w in s){var E,N=/^idb\:\/\/(.*)\/(.*)\//.exec(w);N&&(w=N[1],N=N[2],(E=Ln["idb://".concat(w,"/").concat(N)])&&iu(E,s,h,c))}h.forEach(function(P){return P()})}function iu(s,c,h,g){for(var x=[],w=0,E=Object.entries(s.queries.query);w<E.length;w++){for(var N=E[w],P=N[0],O=[],z=0,T=N[1];z<T.length;z++){var q=T[z];Ba(c,q.obsSet)?q.subscribers.forEach(function(B){return h.add(B)}):g&&O.push(q)}g&&x.push([P,O])}if(g)for(var R=0,L=x;R<L.length;R++){var $=L[R],P=$[0],O=$[1];s.queries.query[P]=O}}function mp(s){var c=s._state,h=s._deps.indexedDB;if(c.isBeingOpened||s.idbdb)return c.dbReadyPromise.then(function(){return c.dbOpenError?Je(c.dbOpenError):s});c.isBeingOpened=!0,c.dbOpenError=null,c.openComplete=!1;var g=c.openCanceller,x=Math.round(10*s.verno),w=!1;function E(){if(c.openCanceller!==g)throw new J.DatabaseClosed("db.open() was cancelled")}function N(){return new le(function(q,R){if(E(),!h)throw new J.MissingAPI;var L=s.name,$=c.autoSchema||!x?h.open(L):h.open(L,x);if(!$)throw new J.MissingAPI;$.onerror=Kt(R),$.onblocked=Oe(s._fireOnBlocked),$.onupgradeneeded=Oe(function(B){var U;z=$.transaction,c.autoSchema&&!s._options.allowEmptyDB?($.onerror=Nr,z.abort(),$.result.close(),(U=h.deleteDatabase(L)).onsuccess=U.onerror=Oe(function(){R(new J.NoSuchDatabase("Database ".concat(L," doesnt exist")))})):(z.onerror=Kt(R),B=B.oldVersion>Math.pow(2,62)?0:B.oldVersion,T=B<1,s.idbdb=$.result,w&&hp(s,z),fp(s,B/10,z,R))},R),$.onsuccess=Oe(function(){z=null;var B,U,V,W,G,X=s.idbdb=$.result,ae=_(X.objectStoreNames);if(0<ae.length)try{var ne=X.transaction((W=ae).length===1?W[0]:W,"readonly");if(c.autoSchema)U=X,V=ne,(B=s).verno=U.version/10,V=B._dbSchema=jo(0,U,V),B._storeNames=_(U.objectStoreNames,0),So(B,[B._allTables],i(V),V);else if(Ao(s,s._dbSchema,ne),((G=Pa(jo(0,(G=s).idbdb,ne),G._dbSchema)).add.length||G.change.some(function(re){return re.add.length||re.change.length}))&&!w)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),X.close(),x=X.version+1,w=!0,q(N());_o(s,ne)}catch{}Qn.push(s),X.onversionchange=Oe(function(re){c.vcFired=!0,s.on("versionchange").fire(re)}),X.onclose=Oe(function(re){s.on("close").fire(re)}),T&&(G=s._deps,ne=L,X=G.indexedDB,G=G.IDBKeyRange,Oa(X)||ne===xo||Fa(X,G).put({name:ne}).catch(fe)),q()},R)}).catch(function(q){switch(q?.name){case"UnknownError":if(0<c.PR1398_maxLoop)return c.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),N();break;case"VersionError":if(0<x)return x=0,N()}return le.reject(q)})}var P,O=c.dbReadyResolve,z=null,T=!1;return le.race([g,(typeof navigator>"u"?le.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(q){function R(){return indexedDB.databases().finally(q)}P=setInterval(R,100),R()}).finally(function(){return clearInterval(P)}):Promise.resolve()).then(N)]).then(function(){return E(),c.onReadyBeingFired=[],le.resolve(La(function(){return s.on.ready.fire(s.vip)})).then(function q(){if(0<c.onReadyBeingFired.length){var R=c.onReadyBeingFired.reduce(Vn,fe);return c.onReadyBeingFired=[],le.resolve(La(function(){return R(s.vip)})).then(q)}})}).finally(function(){c.openCanceller===g&&(c.onReadyBeingFired=null,c.isBeingOpened=!1)}).catch(function(q){c.dbOpenError=q;try{z&&z.abort()}catch{}return g===c.openCanceller&&s._close(),Je(q)}).finally(function(){c.openComplete=!0,O()}).then(function(){var q;return T&&(q={},s.tables.forEach(function(R){R.schema.indexes.forEach(function(L){L.name&&(q["idb://".concat(s.name,"/").concat(R.name,"/").concat(L.name)]=new lt(-1/0,[[[]]]))}),q["idb://".concat(s.name,"/").concat(R.name,"/")]=q["idb://".concat(s.name,"/").concat(R.name,"/:dels")]=new lt(-1/0,[[[]]])}),mn(Tr).fire(q),Ua(q,!0)),s})}function Ha(s){function c(w){return s.next(w)}var h=x(c),g=x(function(w){return s.throw(w)});function x(w){return function(P){var N=w(P),P=N.value;return N.done?P:P&&typeof P.then=="function"?P.then(h,g):l(P)?Promise.all(P).then(h,g):h(P)}}return x(c)()}function Mo(s,c,h){for(var g=l(s)?s.slice():[s],x=0;x<h;++x)g.push(c);return g}var gp={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(s){return r(r({},s),{table:function(c){var h=s.table(c),g=h.schema,x={},w=[];function E(T,q,R){var L=Ir(T),$=x[L]=x[L]||[],B=T==null?0:typeof T=="string"?1:T.length,U=0<q,U=r(r({},R),{name:U?"".concat(L,"(virtual-from:").concat(R.name,")"):R.name,lowLevelIndex:R,isVirtual:U,keyTail:q,keyLength:B,extractKey:Ma(T),unique:!U&&R.unique});return $.push(U),U.isPrimaryKey||w.push(U),1<B&&E(B===2?T[0]:T.slice(0,B-1),q+1,R),$.sort(function(V,W){return V.keyTail-W.keyTail}),U}c=E(g.primaryKey.keyPath,0,g.primaryKey),x[":id"]=[c];for(var N=0,P=g.indexes;N<P.length;N++){var O=P[N];E(O.keyPath,0,O)}function z(T){var q,R=T.query.index;return R.isVirtual?r(r({},T),{query:{index:R.lowLevelIndex,range:(q=T.query.range,R=R.keyTail,{type:q.type===1?2:q.type,lower:Mo(q.lower,q.lowerOpen?s.MAX_KEY:s.MIN_KEY,R),lowerOpen:!0,upper:Mo(q.upper,q.upperOpen?s.MIN_KEY:s.MAX_KEY,R),upperOpen:!0})}}):T}return r(r({},h),{schema:r(r({},g),{primaryKey:c,indexes:w,getIndexByKeyPath:function(T){return(T=x[Ir(T)])&&T[0]}}),count:function(T){return h.count(z(T))},query:function(T){return h.query(z(T))},openCursor:function(T){var q=T.query.index,R=q.keyTail,L=q.isVirtual,$=q.keyLength;return L?h.openCursor(z(T)).then(function(U){return U&&B(U)}):h.openCursor(T);function B(U){return Object.create(U,{continue:{value:function(V){V!=null?U.continue(Mo(V,T.reverse?s.MAX_KEY:s.MIN_KEY,R)):T.unique?U.continue(U.key.slice(0,$).concat(T.reverse?s.MIN_KEY:s.MAX_KEY,R)):U.continue()}},continuePrimaryKey:{value:function(V,W){U.continuePrimaryKey(Mo(V,s.MAX_KEY,R),W)}},primaryKey:{get:function(){return U.primaryKey}},key:{get:function(){var V=U.key;return $===1?V[0]:V.slice(0,$)}},value:{get:function(){return U.value}}})}}})}})}};function Ka(s,c,h,g){return h=h||{},g=g||"",i(s).forEach(function(x){var w,E,N;b(c,x)?(w=s[x],E=c[x],typeof w=="object"&&typeof E=="object"&&w&&E?(N=Ee(w))!==Ee(E)?h[g+x]=c[x]:N==="Object"?Ka(w,E,h,g+x+"."):w!==E&&(h[g+x]=c[x]):w!==E&&(h[g+x]=c[x])):h[g+x]=void 0}),i(c).forEach(function(x){b(s,x)||(h[g+x]=c[x])}),h}function Va(s,c){return c.type==="delete"?c.keys:c.keys||c.values.map(s.extractKey)}var bp={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(s){return r(r({},s),{table:function(c){var h=s.table(c),g=h.schema.primaryKey;return r(r({},h),{mutate:function(x){var w=be.trans,E=w.table(c).hook,N=E.deleting,P=E.creating,O=E.updating;switch(x.type){case"add":if(P.fire===fe)break;return w._promise("readwrite",function(){return z(x)},!0);case"put":if(P.fire===fe&&O.fire===fe)break;return w._promise("readwrite",function(){return z(x)},!0);case"delete":if(N.fire===fe)break;return w._promise("readwrite",function(){return z(x)},!0);case"deleteRange":if(N.fire===fe)break;return w._promise("readwrite",function(){return function T(q,R,L){return h.query({trans:q,values:!1,query:{index:g,range:R},limit:L}).then(function($){var B=$.result;return z({type:"delete",keys:B,trans:q}).then(function(U){return 0<U.numFailures?Promise.reject(U.failures[0]):B.length<L?{failures:[],numFailures:0,lastResult:void 0}:T(q,r(r({},R),{lower:B[B.length-1],lowerOpen:!0}),L)})})}(x.trans,x.range,1e4)},!0)}return h.mutate(x);function z(T){var q,R,L,$=be.trans,B=T.keys||Va(g,T);if(!B)throw new Error("Keys missing");return(T=T.type==="add"||T.type==="put"?r(r({},T),{keys:B}):r({},T)).type!=="delete"&&(T.values=o([],T.values)),T.keys&&(T.keys=o([],T.keys)),q=h,L=B,((R=T).type==="add"?Promise.resolve([]):q.getMany({trans:R.trans,keys:L,cache:"immutable"})).then(function(U){var V=B.map(function(W,G){var X,ae,ne,re=U[G],ce={onerror:null,onsuccess:null};return T.type==="delete"?N.fire.call(ce,W,re,$):T.type==="add"||re===void 0?(X=P.fire.call(ce,W,T.values[G],$),W==null&&X!=null&&(T.keys[G]=W=X,g.outbound||F(T.values[G],g.keyPath,W))):(X=Ka(re,T.values[G]),(ae=O.fire.call(ce,X,W,re,$))&&(ne=T.values[G],Object.keys(ae).forEach(function(ue){b(ne,ue)?ne[ue]=ae[ue]:F(ne,ue,ae[ue])}))),ce});return h.mutate(T).then(function(W){for(var G=W.failures,X=W.results,ae=W.numFailures,W=W.lastResult,ne=0;ne<B.length;++ne){var re=(X||B)[ne],ce=V[ne];re==null?ce.onerror&&ce.onerror(G[ne]):ce.onsuccess&&ce.onsuccess(T.type==="put"&&U[ne]?T.values[ne]:re)}return{failures:G,results:X,numFailures:ae,lastResult:W}}).catch(function(W){return V.forEach(function(G){return G.onerror&&G.onerror(W)}),Promise.reject(W)})})}}})}})}};function uu(s,c,h){try{if(!c||c.keys.length<s.length)return null;for(var g=[],x=0,w=0;x<c.keys.length&&w<s.length;++x)ze(c.keys[x],s[w])===0&&(g.push(h?me(c.values[x]):c.values[x]),++w);return g.length===s.length?g:null}catch{return null}}var xp={stack:"dbcore",level:-1,create:function(s){return{table:function(c){var h=s.table(c);return r(r({},h),{getMany:function(g){if(!g.cache)return h.getMany(g);var x=uu(g.keys,g.trans._cache,g.cache==="clone");return x?le.resolve(x):h.getMany(g).then(function(w){return g.trans._cache={keys:g.keys,values:g.cache==="clone"?me(w):w},w})},mutate:function(g){return g.type!=="add"&&(g.trans._cache=null),h.mutate(g)}})}}}};function lu(s,c){return s.trans.mode==="readonly"&&!!s.subscr&&!s.trans.explicit&&s.trans.db._options.cache!=="disabled"&&!c.schema.primaryKey.outbound}function cu(s,c){switch(s){case"query":return c.values&&!c.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var yp={stack:"dbcore",level:0,name:"Observability",create:function(s){var c=s.schema.name,h=new lt(s.MIN_KEY,s.MAX_KEY);return r(r({},s),{transaction:function(g,x,w){if(be.subscr&&x!=="readonly")throw new J.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(be.querier));return s.transaction(g,x,w)},table:function(g){var x=s.table(g),w=x.schema,E=w.primaryKey,T=w.indexes,N=E.extractKey,P=E.outbound,O=E.autoIncrement&&T.filter(function(R){return R.compound&&R.keyPath.includes(E.keyPath)}),z=r(r({},x),{mutate:function(R){function L(ue){return ue="idb://".concat(c,"/").concat(g,"/").concat(ue),W[ue]||(W[ue]=new lt)}var $,B,U,V=R.trans,W=R.mutatedParts||(R.mutatedParts={}),G=L(""),X=L(":dels"),ae=R.type,ce=R.type==="deleteRange"?[R.range]:R.type==="delete"?[R.keys]:R.values.length<50?[Va(E,R).filter(function(ue){return ue}),R.values]:[],ne=ce[0],re=ce[1],ce=R.trans._cache;return l(ne)?(G.addKeys(ne),(ce=ae==="delete"||ne.length===re.length?uu(ne,ce):null)||X.addKeys(ne),(ce||re)&&($=L,B=ce,U=re,w.indexes.forEach(function(ue){var de=$(ue.name||"");function Pe(Me){return Me!=null?ue.extractKey(Me):null}function $e(Me){return ue.multiEntry&&l(Me)?Me.forEach(function(Xe){return de.addKey(Xe)}):de.addKey(Me)}(B||U).forEach(function(Me,ct){var Te=B&&Pe(B[ct]),ct=U&&Pe(U[ct]);ze(Te,ct)!==0&&(Te!=null&&$e(Te),ct!=null&&$e(ct))})}))):ne?(re={from:(re=ne.lower)!==null&&re!==void 0?re:s.MIN_KEY,to:(re=ne.upper)!==null&&re!==void 0?re:s.MAX_KEY},X.add(re),G.add(re)):(G.add(h),X.add(h),w.indexes.forEach(function(ue){return L(ue.name).add(h)})),x.mutate(R).then(function(ue){return!ne||R.type!=="add"&&R.type!=="put"||(G.addKeys(ue.results),O&&O.forEach(function(de){for(var Pe=R.values.map(function(Te){return de.extractKey(Te)}),$e=de.keyPath.findIndex(function(Te){return Te===E.keyPath}),Me=0,Xe=ue.results.length;Me<Xe;++Me)Pe[Me][$e]=ue.results[Me];L(de.name).addKeys(Pe)})),V.mutatedParts=No(V.mutatedParts||{},W),ue})}}),T=function(L){var $=L.query,L=$.index,$=$.range;return[L,new lt((L=$.lower)!==null&&L!==void 0?L:s.MIN_KEY,($=$.upper)!==null&&$!==void 0?$:s.MAX_KEY)]},q={get:function(R){return[E,new lt(R.key)]},getMany:function(R){return[E,new lt().addKeys(R.keys)]},count:T,query:T,openCursor:T};return i(q).forEach(function(R){z[R]=function(L){var $=be.subscr,B=!!$,U=lu(be,x)&&cu(R,L)?L.obsSet={}:$;if(B){var V=function(re){return re="idb://".concat(c,"/").concat(g,"/").concat(re),U[re]||(U[re]=new lt)},W=V(""),G=V(":dels"),$=q[R](L),B=$[0],$=$[1];if((R==="query"&&B.isPrimaryKey&&!L.values?G:V(B.name||"")).add($),!B.isPrimaryKey){if(R!=="count"){var X=R==="query"&&P&&L.values&&x.query(r(r({},L),{values:!1}));return x[R].apply(this,arguments).then(function(re){if(R==="query"){if(P&&L.values)return X.then(function(Pe){return Pe=Pe.result,W.addKeys(Pe),re});var ce=L.values?re.result.map(N):re.result;(L.values?W:G).addKeys(ce)}else if(R==="openCursor"){var ue=re,de=L.values;return ue&&Object.create(ue,{key:{get:function(){return G.addKey(ue.primaryKey),ue.key}},primaryKey:{get:function(){var Pe=ue.primaryKey;return G.addKey(Pe),Pe}},value:{get:function(){return de&&W.addKey(ue.primaryKey),ue.value}}})}return re})}G.add(h)}}return x[R].apply(this,arguments)}}),z}})}};function du(s,c,h){if(h.numFailures===0)return c;if(c.type==="deleteRange")return null;var g=c.keys?c.keys.length:"values"in c&&c.values?c.values.length:1;return h.numFailures===g?null:(c=r({},c),l(c.keys)&&(c.keys=c.keys.filter(function(x,w){return!(w in h.failures)})),"values"in c&&l(c.values)&&(c.values=c.values.filter(function(x,w){return!(w in h.failures)})),c)}function Wa(s,c){return h=s,((g=c).lower===void 0||(g.lowerOpen?0<ze(h,g.lower):0<=ze(h,g.lower)))&&(s=s,(c=c).upper===void 0||(c.upperOpen?ze(s,c.upper)<0:ze(s,c.upper)<=0));var h,g}function fu(s,c,q,g,x,w){if(!q||q.length===0)return s;var E=c.query.index,N=E.multiEntry,P=c.query.range,O=g.schema.primaryKey.extractKey,z=E.extractKey,T=(E.lowLevelIndex||E).extractKey,q=q.reduce(function(R,L){var $=R,B=[];if(L.type==="add"||L.type==="put")for(var U=new lt,V=L.values.length-1;0<=V;--V){var W,G=L.values[V],X=O(G);U.hasKey(X)||(W=z(G),(N&&l(W)?W.some(function(ue){return Wa(ue,P)}):Wa(W,P))&&(U.addKey(X),B.push(G)))}switch(L.type){case"add":var ae=new lt().addKeys(c.values?R.map(function(de){return O(de)}):R),$=R.concat(c.values?B.filter(function(de){return de=O(de),!ae.hasKey(de)&&(ae.addKey(de),!0)}):B.map(function(de){return O(de)}).filter(function(de){return!ae.hasKey(de)&&(ae.addKey(de),!0)}));break;case"put":var ne=new lt().addKeys(L.values.map(function(de){return O(de)}));$=R.filter(function(de){return!ne.hasKey(c.values?O(de):de)}).concat(c.values?B:B.map(function(de){return O(de)}));break;case"delete":var re=new lt().addKeys(L.keys);$=R.filter(function(de){return!re.hasKey(c.values?O(de):de)});break;case"deleteRange":var ce=L.range;$=R.filter(function(de){return!Wa(O(de),ce)})}return $},s);return q===s?s:(q.sort(function(R,L){return ze(T(R),T(L))||ze(O(R),O(L))}),c.limit&&c.limit<1/0&&(q.length>c.limit?q.length=c.limit:s.length===c.limit&&q.length<c.limit&&(x.dirty=!0)),w?Object.freeze(q):q)}function hu(s,c){return ze(s.lower,c.lower)===0&&ze(s.upper,c.upper)===0&&!!s.lowerOpen==!!c.lowerOpen&&!!s.upperOpen==!!c.upperOpen}function vp(s,c){return function(h,g,x,w){if(h===void 0)return g!==void 0?-1:0;if(g===void 0)return 1;if((g=ze(h,g))===0){if(x&&w)return 0;if(x)return 1;if(w)return-1}return g}(s.lower,c.lower,s.lowerOpen,c.lowerOpen)<=0&&0<=function(h,g,x,w){if(h===void 0)return g!==void 0?1:0;if(g===void 0)return-1;if((g=ze(h,g))===0){if(x&&w)return 0;if(x)return-1;if(w)return 1}return g}(s.upper,c.upper,s.upperOpen,c.upperOpen)}function wp(s,c,h,g){s.subscribers.add(h),g.addEventListener("abort",function(){var x,w;s.subscribers.delete(h),s.subscribers.size===0&&(x=s,w=c,setTimeout(function(){x.subscribers.size===0&&Ae(w,x)},3e3))})}var Cp={stack:"dbcore",level:0,name:"Cache",create:function(s){var c=s.schema.name;return r(r({},s),{transaction:function(h,g,x){var w,E,N=s.transaction(h,g,x);return g==="readwrite"&&(E=(w=new AbortController).signal,x=function(P){return function(){if(w.abort(),g==="readwrite"){for(var O=new Set,z=0,T=h;z<T.length;z++){var q=T[z],R=Ln["idb://".concat(c,"/").concat(q)];if(R){var L=s.table(q),$=R.optimisticOps.filter(function(de){return de.trans===N});if(N._explicit&&P&&N.mutatedParts)for(var B=0,U=Object.values(R.queries.query);B<U.length;B++)for(var V=0,W=(ae=U[B]).slice();V<W.length;V++)Ba((ne=W[V]).obsSet,N.mutatedParts)&&(Ae(ae,ne),ne.subscribers.forEach(function(de){return O.add(de)}));else if(0<$.length){R.optimisticOps=R.optimisticOps.filter(function(de){return de.trans!==N});for(var G=0,X=Object.values(R.queries.query);G<X.length;G++)for(var ae,ne,re,ce=0,ue=(ae=X[G]).slice();ce<ue.length;ce++)(ne=ue[ce]).res!=null&&N.mutatedParts&&(P&&!ne.dirty?(re=Object.isFrozen(ne.res),re=fu(ne.res,ne.req,$,L,ne,re),ne.dirty?(Ae(ae,ne),ne.subscribers.forEach(function(de){return O.add(de)})):re!==ne.res&&(ne.res=re,ne.promise=le.resolve({result:re}))):(ne.dirty&&Ae(ae,ne),ne.subscribers.forEach(function(de){return O.add(de)})))}}}O.forEach(function(de){return de()})}}},N.addEventListener("abort",x(!1),{signal:E}),N.addEventListener("error",x(!1),{signal:E}),N.addEventListener("complete",x(!0),{signal:E})),N},table:function(h){var g=s.table(h),x=g.schema.primaryKey;return r(r({},g),{mutate:function(w){var E=be.trans;if(x.outbound||E.db._options.cache==="disabled"||E.explicit||E.idbtrans.mode!=="readwrite")return g.mutate(w);var N=Ln["idb://".concat(c,"/").concat(h)];return N?(E=g.mutate(w),w.type!=="add"&&w.type!=="put"||!(50<=w.values.length||Va(x,w).some(function(P){return P==null}))?(N.optimisticOps.push(w),w.mutatedParts&&To(w.mutatedParts),E.then(function(P){0<P.numFailures&&(Ae(N.optimisticOps,w),(P=du(0,w,P))&&N.optimisticOps.push(P),w.mutatedParts&&To(w.mutatedParts))}),E.catch(function(){Ae(N.optimisticOps,w),w.mutatedParts&&To(w.mutatedParts)})):E.then(function(P){var O=du(0,r(r({},w),{values:w.values.map(function(z,T){var q;return P.failures[T]?z:(z=(q=x.keyPath)!==null&&q!==void 0&&q.includes(".")?me(z):r({},z),F(z,x.keyPath,P.results[T]),z)})}),P);N.optimisticOps.push(O),queueMicrotask(function(){return w.mutatedParts&&To(w.mutatedParts)})}),E):g.mutate(w)},query:function(w){if(!lu(be,g)||!cu("query",w))return g.query(w);var E=((O=be.trans)===null||O===void 0?void 0:O.db._options.cache)==="immutable",T=be,N=T.requery,P=T.signal,O=function(L,$,B,U){var V=Ln["idb://".concat(L,"/").concat($)];if(!V)return[];if(!($=V.queries[B]))return[null,!1,V,null];var W=$[(U.query?U.query.index.name:null)||""];if(!W)return[null,!1,V,null];switch(B){case"query":var G=W.find(function(X){return X.req.limit===U.limit&&X.req.values===U.values&&hu(X.req.query.range,U.query.range)});return G?[G,!0,V,W]:[W.find(function(X){return("limit"in X.req?X.req.limit:1/0)>=U.limit&&(!U.values||X.req.values)&&vp(X.req.query.range,U.query.range)}),!1,V,W];case"count":return G=W.find(function(X){return hu(X.req.query.range,U.query.range)}),[G,!!G,V,W]}}(c,h,"query",w),z=O[0],T=O[1],q=O[2],R=O[3];return z&&T?z.obsSet=w.obsSet:(T=g.query(w).then(function(L){var $=L.result;if(z&&(z.res=$),E){for(var B=0,U=$.length;B<U;++B)Object.freeze($[B]);Object.freeze($)}else L.result=me($);return L}).catch(function(L){return R&&z&&Ae(R,z),Promise.reject(L)}),z={obsSet:w.obsSet,promise:T,subscribers:new Set,type:"query",req:w,dirty:!1},R?R.push(z):(R=[z],(q=q||(Ln["idb://".concat(c,"/").concat(h)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[w.query.index.name||""]=R)),wp(z,R,N,P),z.promise.then(function(L){return{result:fu(L.result,w,q?.optimisticOps,g,z,E)}})}})}})}};function Io(s,c){return new Proxy(s,{get:function(h,g,x){return g==="db"?c:Reflect.get(h,g,x)}})}var rn=(et.prototype.version=function(s){if(isNaN(s)||s<.1)throw new J.Type("Given version is not a positive number");if(s=Math.round(10*s)/10,this.idbdb||this._state.isBeingOpened)throw new J.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,s);var c=this._versions,h=c.filter(function(g){return g._cfg.version===s})[0];return h||(h=new this.Version(s),c.push(h),c.sort(dp),h.stores({}),this._state.autoSchema=!1,h)},et.prototype._whenReady=function(s){var c=this;return this.idbdb&&(this._state.openComplete||be.letThrough||this._vip)?s():new le(function(h,g){if(c._state.openComplete)return g(new J.DatabaseClosed(c._state.dbOpenError));if(!c._state.isBeingOpened){if(!c._state.autoOpen)return void g(new J.DatabaseClosed);c.open().catch(fe)}c._state.dbReadyPromise.then(h,g)}).then(s)},et.prototype.use=function(s){var c=s.stack,h=s.create,g=s.level,x=s.name;return x&&this.unuse({stack:c,name:x}),s=this._middlewares[c]||(this._middlewares[c]=[]),s.push({stack:c,create:h,level:g??10,name:x}),s.sort(function(w,E){return w.level-E.level}),this},et.prototype.unuse=function(s){var c=s.stack,h=s.name,g=s.create;return c&&this._middlewares[c]&&(this._middlewares[c]=this._middlewares[c].filter(function(x){return g?x.create!==g:!!h&&x.name!==h})),this},et.prototype.open=function(){var s=this;return Rn(Ot,function(){return mp(s)})},et.prototype._close=function(){this.on.close.fire(new CustomEvent("close"));var s=this._state,c=Qn.indexOf(this);if(0<=c&&Qn.splice(c,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}s.isBeingOpened||(s.dbReadyPromise=new le(function(h){s.dbReadyResolve=h}),s.openCanceller=new le(function(h,g){s.cancelOpen=g}))},et.prototype.close=function(h){var c=(h===void 0?{disableAutoOpen:!0}:h).disableAutoOpen,h=this._state;c?(h.isBeingOpened&&h.cancelOpen(new J.DatabaseClosed),this._close(),h.autoOpen=!1,h.dbOpenError=new J.DatabaseClosed):(this._close(),h.autoOpen=this._options.autoOpen||h.isBeingOpened,h.openComplete=!1,h.dbOpenError=null)},et.prototype.delete=function(s){var c=this;s===void 0&&(s={disableAutoOpen:!0});var h=0<arguments.length&&typeof arguments[0]!="object",g=this._state;return new le(function(x,w){function E(){c.close(s);var N=c._deps.indexedDB.deleteDatabase(c.name);N.onsuccess=Oe(function(){var P,O,z;P=c._deps,O=c.name,z=P.indexedDB,P=P.IDBKeyRange,Oa(z)||O===xo||Fa(z,P).delete(O).catch(fe),x()}),N.onerror=Kt(w),N.onblocked=c._fireOnBlocked}if(h)throw new J.InvalidArgument("Invalid closeOptions argument to db.delete()");g.isBeingOpened?g.dbReadyPromise.then(E):E()})},et.prototype.backendDB=function(){return this.idbdb},et.prototype.isOpen=function(){return this.idbdb!==null},et.prototype.hasBeenClosed=function(){var s=this._state.dbOpenError;return s&&s.name==="DatabaseClosed"},et.prototype.hasFailed=function(){return this._state.dbOpenError!==null},et.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(et.prototype,"tables",{get:function(){var s=this;return i(this._allTables).map(function(c){return s._allTables[c]})},enumerable:!1,configurable:!0}),et.prototype.transaction=function(){var s=function(c,h,g){var x=arguments.length;if(x<2)throw new J.InvalidArgument("Too few arguments");for(var w=new Array(x-1);--x;)w[x-1]=arguments[x];return g=w.pop(),[c,ie(w),g]}.apply(this,arguments);return this._transaction.apply(this,s)},et.prototype._transaction=function(s,c,h){var g=this,x=be.trans;x&&x.db===this&&s.indexOf("!")===-1||(x=null);var w,E,N=s.indexOf("?")!==-1;s=s.replace("!","").replace("?","");try{if(E=c.map(function(O){if(O=O instanceof g.Table?O.name:O,typeof O!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return O}),s=="r"||s===Sa)w=Sa;else{if(s!="rw"&&s!=Ea)throw new J.InvalidArgument("Invalid transaction mode: "+s);w=Ea}if(x){if(x.mode===Sa&&w===Ea){if(!N)throw new J.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");x=null}x&&E.forEach(function(O){if(x&&x.storeNames.indexOf(O)===-1){if(!N)throw new J.SubTransaction("Table "+O+" not included in parent transaction.");x=null}}),N&&x&&!x.active&&(x=null)}}catch(O){return x?x._promise(null,function(z,T){T(O)}):Je(O)}var P=function O(z,T,q,R,L){return le.resolve().then(function(){var $=be.transless||be,B=z._createTransaction(T,q,z._dbSchema,R);if(B.explicit=!0,$={trans:B,transless:$},R)B.idbtrans=R.idbtrans;else try{B.create(),B.idbtrans._explicit=!0,z._state.PR1398_maxLoop=3}catch(W){return W.name===ee.InvalidState&&z.isOpen()&&0<--z._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),z.close({disableAutoOpen:!1}),z.open().then(function(){return O(z,T,q,null,L)})):Je(W)}var U,V=Ce(L);return V&&Yn(),$=le.follow(function(){var W;(U=L.call(B,B))&&(V?(W=fn.bind(null,null),U.then(W,W)):typeof U.next=="function"&&typeof U.throw=="function"&&(U=Ha(U)))},$),(U&&typeof U.then=="function"?le.resolve(U).then(function(W){return B.active?W:Je(new J.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):$.then(function(){return U})).then(function(W){return R&&B._resolve(),B._completion.then(function(){return W})}).catch(function(W){return B._reject(W),Je(W)})})}.bind(null,this,w,E,x,h);return x?x._promise(w,P,"lock"):be.trans?Rn(be.transless,function(){return g._whenReady(P)}):this._whenReady(P)},et.prototype.table=function(s){if(!b(this._allTables,s))throw new J.InvalidTable("Table ".concat(s," does not exist"));return this._allTables[s]},et);function et(s,c){var h=this;this._middlewares={},this.verno=0;var g=et.dependencies;this._options=c=r({addons:et.addons,autoOpen:!0,indexedDB:g.indexedDB,IDBKeyRange:g.IDBKeyRange,cache:"cloned"},c),this._deps={indexedDB:c.indexedDB,IDBKeyRange:c.IDBKeyRange},g=c.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var x,w,E,N,P,O={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:fe,dbReadyPromise:null,cancelOpen:fe,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:c.autoOpen};O.dbReadyPromise=new le(function(T){O.dbReadyResolve=T}),O.openCanceller=new le(function(T,q){O.cancelOpen=q}),this._state=O,this.name=s,this.on=jr(this,"populate","blocked","versionchange","close",{ready:[Vn,fe]}),this.once=function(T,q){var R=function(){for(var L=[],$=0;$<arguments.length;$++)L[$]=arguments[$];h.on(T).unsubscribe(R),q.apply(h,L)};return h.on(T,R)},this.on.ready.subscribe=S(this.on.ready.subscribe,function(T){return function(q,R){et.vip(function(){var L,$=h._state;$.openComplete?($.dbOpenError||le.resolve().then(q),R&&T(q)):$.onReadyBeingFired?($.onReadyBeingFired.push(q),R&&T(q)):(T(q),L=h,R||T(function B(){L.on.ready.unsubscribe(q),L.on.ready.unsubscribe(B)}))})}}),this.Collection=(x=this,Ar(op.prototype,function(U,B){this.db=x;var R=Ui,L=null;if(B)try{R=B()}catch(V){L=V}var $=U._ctx,B=$.table,U=B.hook.reading.fire;this._ctx={table:B,index:$.index,isPrimKey:!$.index||B.schema.primKey.keyPath&&$.index===B.schema.primKey.name,range:R,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:L,or:$.or,valueMapper:U!==qe?U:null}})),this.Table=(w=this,Ar(Wi.prototype,function(T,q,R){this.db=w,this._tx=R,this.name=T,this.schema=q,this.hook=w._allTables[T]?w._allTables[T].hook:jr(null,{creating:[un,fe],reading:[vt,qe],updating:[kr,fe],deleting:[Nn,fe]})})),this.Transaction=(E=this,Ar(ip.prototype,function(T,q,R,L,$){var B=this;T!=="readonly"&&q.forEach(function(U){U=(U=R[U])===null||U===void 0?void 0:U.yProps,U&&(q=q.concat(U.map(function(V){return V.updatesTable})))}),this.db=E,this.mode=T,this.storeNames=q,this.schema=R,this.chromeTransactionDurability=L,this.idbtrans=null,this.on=jr(this,"complete","error","abort"),this.parent=$||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new le(function(U,V){B._resolve=U,B._reject=V}),this._completion.then(function(){B.active=!1,B.on.complete.fire()},function(U){var V=B.active;return B.active=!1,B.on.error.fire(U),B.parent?B.parent._reject(U):V&&B.idbtrans&&B.idbtrans.abort(),Je(U)})})),this.Version=(N=this,Ar(pp.prototype,function(T){this.db=N,this._cfg={version:T,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(P=this,Ar(Ji.prototype,function(T,q,R){if(this.db=P,this._ctx={table:T,index:q===":id"?null:q,or:R},this._cmp=this._ascending=ze,this._descending=function(L,$){return ze($,L)},this._max=function(L,$){return 0<ze(L,$)?L:$},this._min=function(L,$){return ze(L,$)<0?L:$},this._IDBKeyRange=P._deps.IDBKeyRange,!this._IDBKeyRange)throw new J.MissingAPI})),this.on("versionchange",function(T){0<T.newVersion?console.warn("Another connection wants to upgrade database '".concat(h.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(h.name,"'. Closing db now to resume the delete request.")),h.close({disableAutoOpen:!1})}),this.on("blocked",function(T){!T.newVersion||T.newVersion<T.oldVersion?console.warn("Dexie.delete('".concat(h.name,"') was blocked")):console.warn("Upgrade '".concat(h.name,"' blocked by other connection holding version ").concat(T.oldVersion/10))}),this._maxKey=Mr(c.IDBKeyRange),this._createTransaction=function(T,q,R,L){return new h.Transaction(T,q,R,h._options.chromeTransactionDurability,L)},this._fireOnBlocked=function(T){h.on("blocked").fire(T),Qn.filter(function(q){return q.name===h.name&&q!==h&&!q._state.vcFired}).map(function(q){return q.on("versionchange").fire(T)})},this.use(xp),this.use(Cp),this.use(yp),this.use(gp),this.use(bp);var z=new Proxy(this,{get:function(T,q,R){if(q==="_vip")return!0;if(q==="table")return function($){return Io(h.table($),z)};var L=Reflect.get(T,q,R);return L instanceof Wi?Io(L,z):q==="tables"?L.map(function($){return Io($,z)}):q==="_createTransaction"?function(){return Io(L.apply(this,arguments),z)}:L}});this.vip=z,g.forEach(function(T){return T(h)})}var Po,Mt=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",kp=(Ga.prototype.subscribe=function(s,c,h){return this._subscribe(s&&typeof s!="function"?s:{next:s,error:c,complete:h})},Ga.prototype[Mt]=function(){return this},Ga);function Ga(s){this._subscribe=s}try{Po={indexedDB:a.indexedDB||a.mozIndexedDB||a.webkitIndexedDB||a.msIndexedDB,IDBKeyRange:a.IDBKeyRange||a.webkitIDBKeyRange}}catch{Po={indexedDB:null,IDBKeyRange:null}}function pu(s){var c,h=!1,g=new kp(function(x){var w=Ce(s),E,N=!1,P={},O={},z={get closed(){return N},unsubscribe:function(){N||(N=!0,E&&E.abort(),T&&mn.storagemutated.unsubscribe(R))}};x.start&&x.start(z);var T=!1,q=function(){return _a(L)},R=function($){No(P,$),Ba(O,P)&&q()},L=function(){var $,B,U;!N&&Po.indexedDB&&(P={},$={},E&&E.abort(),E=new AbortController,U=function(V){var W=rt();try{w&&Yn();var G=dn(s,V);return G=w?G.finally(fn):G}finally{W&&ot()}}(B={subscr:$,signal:E.signal,requery:q,querier:s,trans:null}),Promise.resolve(U).then(function(V){h=!0,c=V,N||B.signal.aborted||(P={},function(W){for(var G in W)if(b(W,G))return;return 1}(O=$)||T||(mn(Tr,R),T=!0),_a(function(){return!N&&x.next&&x.next(V)}))},function(V){h=!1,["DatabaseClosedError","AbortError"].includes(V?.name)||N||_a(function(){N||x.error&&x.error(V)})}))};return setTimeout(q,0),z});return g.hasValue=function(){return h},g.getValue=function(){return c},g}var zn=rn;function Ya(s){var c=gn;try{gn=!0,mn.storagemutated.fire(s),Ua(s,!0)}finally{gn=c}}v(zn,r(r({},ve),{delete:function(s){return new zn(s,{addons:[]}).delete()},exists:function(s){return new zn(s,{addons:[]}).open().then(function(c){return c.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(s){try{return c=zn.dependencies,h=c.indexedDB,c=c.IDBKeyRange,(Oa(h)?Promise.resolve(h.databases()).then(function(g){return g.map(function(x){return x.name}).filter(function(x){return x!==xo})}):Fa(h,c).toCollection().primaryKeys()).then(s)}catch{return Je(new J.MissingAPI)}var c,h},defineClass:function(){return function(s){d(this,s)}},ignoreTransaction:function(s){return be.trans?Rn(be.transless,s):s()},vip:La,async:function(s){return function(){try{var c=Ha(s.apply(this,arguments));return c&&typeof c.then=="function"?c:le.resolve(c)}catch(h){return Je(h)}}},spawn:function(s,c,h){try{var g=Ha(s.apply(h,c||[]));return g&&typeof g.then=="function"?g:le.resolve(g)}catch(x){return Je(x)}},currentTransaction:{get:function(){return be.trans||null}},waitFor:function(s,c){return c=le.resolve(typeof s=="function"?zn.ignoreTransaction(s):s).timeout(c||6e4),be.trans?be.trans.waitFor(c):c},Promise:le,debug:{get:function(){return ut},set:function(s){_r(s)}},derive:k,extend:d,props:v,override:S,Events:jr,on:mn,liveQuery:pu,extendObservabilitySet:No,getByKeyPath:M,setByKeyPath:F,delByKeyPath:function(s,c){typeof c=="string"?F(s,c,void 0):"length"in c&&[].map.call(c,function(h){F(s,h,void 0)})},shallowClone:H,deepClone:me,getObjectDiff:Ka,cmp:ze,asap:I,minKey:-1/0,addons:[],connections:Qn,errnames:ee,dependencies:Po,cache:Ln,semVer:"4.2.0",version:"4.2.0".split(".").map(function(s){return parseInt(s)}).reduce(function(s,c,h){return s+c/Math.pow(10,2*h)})})),zn.maxKey=Mr(zn.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(mn(Tr,function(s){gn||(s=new CustomEvent(Da,{detail:s}),gn=!0,dispatchEvent(s),gn=!1)}),addEventListener(Da,function(s){s=s.detail,gn||Ya(s)}));var er,gn=!1,mu=function(){};return typeof BroadcastChannel<"u"&&((mu=function(){(er=new BroadcastChannel(Da)).onmessage=function(s){return s.data&&Ya(s.data)}})(),typeof er.unref=="function"&&er.unref(),mn(Tr,function(s){gn||er.postMessage(s)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(s){if(!rn.disableBfCache&&s.persisted){ut&&console.debug("Dexie: handling persisted pagehide"),er?.close();for(var c=0,h=Qn;c<h.length;c++)h[c].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(s){!rn.disableBfCache&&s.persisted&&(ut&&console.debug("Dexie: handling persisted pageshow"),mu(),Ya({all:new lt(-1/0,[[]])}))})),le.rejectionMapper=function(s,c){return!s||s instanceof we||s instanceof TypeError||s instanceof SyntaxError||!s.name||!Ie[s.name]?s:(c=new Ie[s.name](c||s.message,s),"stack"in s&&C(c,"stack",{get:function(){return this.inner.stack}}),c)},_r(ut),r(rn,Object.freeze({__proto__:null,Dexie:rn,liveQuery:pu,Entity:Hi,cmp:ze,PropModification:Dr,replacePrefix:function(s,c){return new Dr({replacePrefix:[s,c]})},add:function(s){return new Dr({add:s})},remove:function(s){return new Dr({remove:s})},default:rn,RangeSet:lt,mergeRanges:Rr,rangesOverlap:ou}),{default:rn}),rn})})(Ml);var Yp=Ml.exports;const ws=Nl(Yp),xu=Symbol.for("Dexie"),Uo=globalThis[xu]||(globalThis[xu]=ws);if(ws.semVer!==Uo.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${ws.semVer} and ${Uo.semVer}`);const{liveQuery:Dk,mergeRanges:Nk,rangesOverlap:Tk,RangeSet:Mk,cmp:Ik,Entity:Pk,PropModification:Rk,replacePrefix:Fk,add:Ok,remove:Lk,DexieYProvider:zk}=Uo;class Qp extends Uo{cards;folders;tags;syncQueue;settings;constructor(){super("CardAllDatabase"),this.version(1).stores({cards:"++id, userId, folderId, createdAt, updatedAt, syncVersion, pendingSync",folders:"++id, userId, parentId, createdAt, updatedAt, syncVersion, pendingSync",tags:"++id, userId, name, createdAt, syncVersion, pendingSync",syncQueue:"++id, type, entity, entityId, timestamp, retryCount",settings:"++id, key, updatedAt"}),this.version(1).upgrade(async t=>{console.log("Initializing CardAll database..."),await t.table("settings").add({key:"storageMode",value:"hybrid",updatedAt:new Date}),await t.table("settings").add({key:"syncEnabled",value:!0,updatedAt:new Date}),await t.table("settings").add({key:"imageCompression",value:{enabled:!0,quality:.8,maxWidth:1920,maxHeight:1080,format:"webp"},updatedAt:new Date})})}async getSetting(t){return(await this.settings.where("key").equals(t).first())?.value}async updateSetting(t,n){await this.settings.where("key").equals(t).modify({value:n,updatedAt:new Date})}async clearAll(){await this.transaction("rw",this.cards,this.folders,this.tags,this.syncQueue,async()=>{await this.cards.clear(),await this.folders.clear(),await this.tags.clear(),await this.syncQueue.clear()})}async getStats(){const[t,n,r,o,a]=await Promise.all([this.cards.count(),this.folders.count(),this.tags.count(),0,this.syncQueue.count()]);return{cards:t,folders:n,tags:r,images:o,pendingSync:a}}async createCard(t){const n=crypto.randomUUID(),r=new Date;return await this.cards.add({...t,id:n,syncVersion:1,pendingSync:!0,updatedAt:r}),n}async updateCard(t,n){return await this.cards.update(t,{...n,syncVersion:n.syncVersion?n.syncVersion+1:void 0,pendingSync:!0,updatedAt:new Date})}async deleteCard(t){await this.cards.delete(t)}}const he=new Qp;he.on("blocked",()=>{console.warn("Database operation blocked")});he.on("versionchange",()=>{console.warn("Database version changed")});he.on("ready",()=>{console.log("Database is ready")});const Zp="https://elwnpejlwkgdacaugvvd.supabase.co",Xp="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImVsd25wZWpsd2tnZGFjYXVndnZkIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTMzMzkxNTAsImV4cCI6MjA2ODkxNTE1MH0.XhVGgO2nf8uS1gC0V6jTMP0p0xN5KKV47t2rK2ncK90",nt=Np(Zp,Xp,{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0},realtime:{params:{eventsPerSecond:10}}});class Jp{syncQueue=[];isOnline=navigator.onLine;syncInProgress=!1;failedOperations=[];snapshots=[];lastHealthCheck=new Date;recoveryMode=!1;maxFailedOperations=50;maxSnapshots=100;lastSyncTime=null;conflicts=[];listeners=[];authService=null;constructor(){this.initialize()}initialize(){window.addEventListener("online",()=>{this.isOnline=!0,this.notifyStatusChange(),this.processSyncQueue()}),window.addEventListener("offline",()=>{this.isOnline=!1,this.notifyStatusChange()}),setInterval(()=>{this.isOnline&&this.authService?.isAuthenticated()&&this.processSyncQueue()},5*60*1e3),this.startHealthCheck(),window.addEventListener("beforeunload",()=>{this.createSnapshot()})}updateConfig(t){console.log("Cloud sync config updated:",t),t.enabled&&this.isOnline&&this.authService?.isAuthenticated()&&this.processSyncQueue()}setAuthService(t){this.authService=t,t.onAuthStateChange(n=>{n.user&&this.isOnline&&this.performFullSync()})}onStatusChange(t){return this.listeners.push(t),t(this.getCurrentStatus()),()=>{const n=this.listeners.indexOf(t);n>-1&&this.listeners.splice(n,1)}}notifyStatusChange(){const t=this.getCurrentStatus();this.listeners.forEach(n=>n(t))}getCurrentStatus(){return{isOnline:this.isOnline,lastSyncTime:this.lastSyncTime,pendingOperations:this.syncQueue.length,syncInProgress:this.syncInProgress,hasConflicts:this.conflicts.length>0||this.failedOperations.length>0,systemHealth:this.getSystemHealth(),recoveryMode:this.recoveryMode}}async queueOperation(t){const n=this.syncQueue.findIndex(o=>o.table===t.table&&o.localId===t.localId&&o.type===t.type);if(n!==-1){this.syncQueue[n].timestamp=new Date,console.log(`â ï¸ è·³è¿éå¤çåæ­¥æä½: ${t.table}-${t.localId}-${t.type}`);return}const r={...t,id:crypto.randomUUID(),timestamp:new Date,retryCount:0,maxRetries:3};this.syncQueue.push(r),this.syncQueue.length>50&&(this.syncQueue=this.syncQueue.slice(-50),console.warn("â ï¸ åæ­¥éåè¶è¿éå¶ï¼å·²æ¸çæ§æä½")),await this.persistSyncQueue(),this.isOnline&&this.authService?.isAuthenticated()&&!this.syncInProgress&&setTimeout(()=>{this.processSyncQueue()},500),this.notifyStatusChange()}async processSyncQueue(){if(!(this.syncInProgress||!this.isOnline||!this.authService?.isAuthenticated())){this.syncInProgress=!0,this.notifyStatusChange();try{if(this.syncQueue.length===0){console.log("ð åæ­¥éåä¸ºç©ºï¼è·³è¿å¤ç");return}const t=new Date,n=this.syncQueue.filter(i=>!i.nextRetry||i.nextRetry<=t).slice(0,2);if(n.length===0){console.log("â° æ²¡æåå¤å¥½æ§è¡çæä½ï¼ç­å¾éè¯...");return}console.log(`ð å¼å§å¤ç ${n.length} ä¸ªåæ­¥æä½...`);const r=await Promise.allSettled(n.map(i=>this.executeOperationWithTimeout(i)));let o=0,a=0;for(let i=0;i<r.length;i++){const l=n[i],d=r[i];if(d.status==="fulfilled"){const f=this.syncQueue.findIndex(p=>p.id===l.id);f>-1&&(this.syncQueue.splice(f,1),o++)}else a++,await this.handleOperationFailure(l,d.reason)}await this.persistSyncQueue(),(o>0||a>0)&&console.log(`â åæ­¥å¤çå®æ: æå ${o} ä¸ªï¼å¤±è´¥ ${a} ä¸ª`)}catch(t){console.error("â åæ­¥éåå¤çå¤±è´¥:",t)}finally{this.syncInProgress=!1,this.notifyStatusChange(),await this.scheduleNextSync()}}}async executeOperationWithTimeout(t){return Promise.race([this.executeOperation(t),new Promise((n,r)=>setTimeout(()=>r(new Error("Sync operation timeout")),1e4))])}async handleOperationFailure(t,n){if(console.error("Sync operation failed:",n),t.retryCount++,t.retryCount>=(t.maxRetries||3)){this.failedOperations.push({...t,failedAt:new Date,error:n instanceof Error?n.message:String(n)});const r=this.syncQueue.findIndex(o=>o.id===t.id);r>-1&&this.syncQueue.splice(r,1),console.error("Sync operation exceeded max retries:",t)}else{const r=Math.min(3e5,Math.pow(2,t.retryCount)*2e3);t.nextRetry=new Date(Date.now()+r),t.error=n instanceof Error?n.message:String(n),console.log(`æä½å°å¨ ${r/1e3} ç§åéè¯`)}}async scheduleNextSync(){if(this.syncQueue.length===0)return;const t=new Date,n=this.syncQueue.filter(r=>!r.nextRetry||r.nextRetry>t);if(n.length>0){const r=Math.min(...n.filter(a=>a.nextRetry).map(a=>a.nextRetry.getTime())),o=Math.max(1e3,r-t.getTime());console.log(`â° ä¸æ¬¡åæ­¥å°å¨ ${o/1e3} ç§åæ§è¡`),setTimeout(()=>{this.isOnline&&this.authService?.isAuthenticated()&&!this.syncInProgress&&this.processSyncQueue()},o)}}async executeOperation(t){const n=this.authService?.getCurrentUser();if(!n)throw new Error("User not authenticated");switch(t.table){case"cards":await this.syncCard(t,n.id);break;case"folders":await this.syncFolder(t,n.id);break;case"tags":await this.syncTag(t,n.id);break;case"images":await this.syncImage(t,n.id);break}}async syncCard(t,n){const{type:r,data:o,localId:a}=t;if(!a||!a.match(/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i)){console.warn("â ï¸ Invalid card ID format, skipping sync:",a);return}switch(r){case"create":case"update":console.log("ð Syncing card:",{localId:a,data:o});const{error:i}=await nt.from("cards").upsert({id:a,user_id:n,front_content:o.frontContent,back_content:o.backContent,style:o.style,folder_id:o.folderId,updated_at:new Date().toISOString(),sync_version:o.syncVersion+1});if(i)throw i;break;case"delete":if(!a||!a.match(/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i)){console.warn("â ï¸ Invalid card ID format for delete, skipping sync:",a);return}const{error:l}=await nt.from("cards").update({is_deleted:!0,updated_at:new Date().toISOString()}).eq("id",a).eq("user_id",n);if(l)throw l;break}}async syncFolder(t,n){const{type:r,data:o,localId:a}=t;if(!a||!a.match(/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i)){console.warn("â ï¸ Invalid folder ID format, skipping sync:",a);return}switch(r){case"create":case"update":console.log("ð Syncing folder:",{localId:a,data:o});const{error:i}=await nt.from("folders").upsert({id:a,user_id:n,name:o.name,parent_id:o.parentId,updated_at:new Date().toISOString(),sync_version:o.syncVersion+1});if(i)throw i;break;case"delete":if(!a||!a.match(/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i)){console.warn("â ï¸ Invalid folder ID format for delete, skipping sync:",a);return}const{error:l}=await nt.from("folders").update({is_deleted:!0,updated_at:new Date().toISOString()}).eq("id",a).eq("user_id",n);if(l)throw l;break}}async syncTag(t,n){const{type:r,data:o,localId:a}=t;if(!a||!a.match(/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i)){console.warn("â ï¸ Invalid tag ID format, skipping sync:",a);return}switch(r){case"create":case"update":console.log("ð·ï¸ Syncing tag:",{localId:a,data:o});const{error:i}=await nt.from("tags").upsert({id:a,user_id:n,name:o.name,color:o.color,updated_at:new Date().toISOString(),sync_version:o.syncVersion+1});if(i)throw i;break;case"delete":if(!a||!a.match(/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i)){console.warn("â ï¸ Invalid tag ID format for delete, skipping sync:",a);return}const{error:l}=await nt.from("tags").update({is_deleted:!0,updated_at:new Date().toISOString()}).eq("id",a).eq("user_id",n);if(l)throw l;break}}async syncImage(t,n){const{type:r,data:o,localId:a}=t;switch(r){case"create":case"update":const{error:i}=await nt.from("images").upsert({id:a,user_id:n,card_id:o.cardId,file_name:o.fileName,file_path:o.filePath,cloud_url:o.cloudUrl,metadata:o.metadata,updated_at:new Date().toISOString(),sync_version:o.syncVersion+1});if(i)throw i;break;case"delete":const{error:l}=await nt.from("images").update({is_deleted:!0,updated_at:new Date().toISOString()}).eq("id",a).eq("user_id",n);if(l)throw l;break}}async performFullSync(){if(!(!this.authService?.isAuthenticated()||!this.isOnline))try{this.syncInProgress=!0,this.notifyStatusChange();const t=this.authService.getCurrentUser();console.log("ð å¼å§å®æ´åæ­¥æµç¨..."),await this.migrateLocalDataToCloud(t.id),await this.syncFromCloud(t.id),await this.processSyncQueue(),this.lastSyncTime=new Date,console.log("â å®æ´åæ­¥å®æ")}catch(t){throw console.error("â å®æ´åæ­¥å¤±è´¥:",t),t}finally{this.syncInProgress=!1,this.notifyStatusChange()}}async migrateLocalDataToCloud(t){console.log("ð¤ å¼å§æ°æ®è¿ç§»...");try{await this.migrateCards(t),await this.migrateFolders(t),await this.migrateTags(t),console.log("â æ°æ®è¿ç§»å®æ")}catch(n){throw console.error("â æ°æ®è¿ç§»å¤±è´¥:",n),n}}async migrateCards(t){const n=await he.cards.filter(r=>!r.userId||r.userId!==t).toArray();if(n.length===0){console.log("ð æ²¡æéè¦è¿ç§»çå¡çæ°æ®");return}console.log(`ð è¿ç§» ${n.length} ä¸ªå¡ç...`);for(const r of n)try{await he.cards.update(r.id,{userId:t,updatedAt:new Date,syncVersion:(r.syncVersion||0)+1,pendingSync:!0}),await this.queueOperation({type:"create",table:"cards",data:{...r,userId:t},localId:r.id}),console.log(`ð å¡ç ${r.id} è¿ç§»æå`)}catch(o){console.error(`â å¡ç ${r.id} è¿ç§»å¤±è´¥:`,o)}}async migrateFolders(t){const n=await he.folders.filter(r=>!r.userId||r.userId!==t).toArray();if(n.length===0){console.log("ð æ²¡æéè¦è¿ç§»çæä»¶å¤¹æ°æ®");return}console.log(`ð è¿ç§» ${n.length} ä¸ªæä»¶å¤¹...`);for(const r of n)try{await he.folders.update(r.id,{userId:t,updatedAt:new Date,syncVersion:(r.syncVersion||0)+1,pendingSync:!0}),await this.queueOperation({type:"create",table:"folders",data:{...r,userId:t},localId:r.id}),console.log(`ð æä»¶å¤¹ ${r.id} è¿ç§»æå`)}catch(o){console.error(`â æä»¶å¤¹ ${r.id} è¿ç§»å¤±è´¥:`,o)}}async migrateTags(t){const n=await he.tags.filter(r=>!r.userId||r.userId!==t).toArray();if(n.length===0){console.log("ð·ï¸ æ²¡æéè¦è¿ç§»çæ ç­¾æ°æ®");return}console.log(`ð·ï¸ è¿ç§» ${n.length} ä¸ªæ ç­¾...`);for(const r of n)try{await he.tags.update(r.id,{userId:t,updatedAt:new Date,syncVersion:(r.syncVersion||0)+1,pendingSync:!0}),await this.queueOperation({type:"create",table:"tags",data:{...r,userId:t},localId:r.id}),console.log(`ð·ï¸ æ ç­¾ ${r.id} è¿ç§»æå`)}catch(o){console.error(`â æ ç­¾ ${r.id} è¿ç§»å¤±è´¥:`,o)}}async syncFromCloud(t){const n=this.lastSyncTime||new Date(0),{data:r}=await nt.from("cards").select("*").eq("user_id",t).gte("updated_at",n.toISOString());if(r)for(const i of r)await this.mergeCloudCard(i);const{data:o}=await nt.from("folders").select("*").eq("user_id",t).gte("updated_at",n.toISOString());if(o)for(const i of o)await this.mergeCloudFolder(i);const{data:a}=await nt.from("tags").select("*").eq("user_id",t).gte("updated_at",n.toISOString());if(a)for(const i of a)await this.mergeCloudTag(i)}async mergeCloudCard(t){const n=await he.cards?.get(t.id);if(!n)await he.cards?.add({id:t.id,frontContent:t.front_content,backContent:t.back_content,style:t.style,folderId:t.folder_id||void 0,isFlipped:!1,createdAt:new Date(t.created_at),updatedAt:new Date(t.updated_at),syncVersion:t.sync_version,pendingSync:!1});else{const r=await this.resolveCardConflict(n,t);r.action==="keep_local"?(console.log(`ð Card ${t.id} keeping local version`),r.needsSync&&await this.queueOperation({type:"update",table:"cards",data:r.mergedData,localId:n.id})):r.action==="use_cloud"?(console.log(`ð Card ${t.id} using cloud version`),await he.cards?.update(t.id,r.mergedData)):r.action==="merge"&&(console.log(`ð Card ${t.id} merging versions`),await he.cards?.update(t.id,r.mergedData),await this.queueOperation({type:"update",table:"cards",data:r.mergedData,localId:n.id}))}}async resolveCardConflict(t,n){const r=new Date(t.updatedAt).getTime(),o=new Date(n.updated_at).getTime();if(t.pendingSync)return{action:"keep_local",mergedData:t,needsSync:!0};if(Math.abs(r-o)<5e3){const a=this.smartMergeCardFields(t,n);if(a)return{action:"merge",mergedData:a,needsSync:!0}}return o>r?{action:"use_cloud",mergedData:{frontContent:n.front_content,backContent:n.back_content,style:n.style,folderId:n.folder_id||void 0,updatedAt:new Date(n.updated_at),syncVersion:n.sync_version,pendingSync:!1},needsSync:!1}:{action:"keep_local",mergedData:t,needsSync:!1}}smartMergeCardFields(t,n){const r={frontContent:t.frontContent,backContent:t.backContent,style:t.style,folderId:t.folderId},o={frontContent:n.front_content,backContent:n.back_content,style:n.style,folderId:n.folder_id},a=Object.keys(r).filter(l=>JSON.stringify(r[l])!==JSON.stringify(o[l]));if(a.length===0)return null;const i={updatedAt:new Date,syncVersion:Math.max(t.syncVersion||0,n.sync_version||0),pendingSync:!1};return a.forEach(l=>{const d=r[l],f=o[l];l==="style"?i[l]=this.mergeStyles(d,f):l==="frontContent"||l==="backContent"?i[l]=d||f:i[l]=d}),i}mergeStyles(t,n){return t?n?{...n,...t,backgroundColor:t.backgroundColor||n.backgroundColor,textColor:t.textColor||n.textColor}:t:n}async mergeCloudFolder(t){const n=await he.folders?.get(t.id);if(!n)await he.folders?.add({id:t.id,name:t.name,color:"#3b82f6",icon:"Folder",cardIds:[],parentId:t.parent_id||void 0,isExpanded:!0,createdAt:new Date(t.created_at),updatedAt:new Date(t.updated_at),syncVersion:t.sync_version,pendingSync:!1});else{const r=new Date(n.updatedAt).getTime(),o=new Date(t.updated_at).getTime();n.pendingSync?(console.log(`ð Folder ${t.id} has local changes, keeping local version`),await this.queueOperation({type:"update",table:"folders",data:n,localId:n.id})):o>r&&(console.log(`ð Folder ${t.id} updated from cloud`),await he.folders?.update(t.id,{name:t.name,parentId:t.parent_id||void 0,updatedAt:new Date(t.updated_at),syncVersion:t.sync_version,pendingSync:!1}))}}async mergeCloudTag(t){try{const n=await he.tags?.get(t.id);if(!n)await he.tags?.add({id:t.id,name:t.name,color:t.color,count:t.count||0,createdAt:new Date(t.created_at),updatedAt:new Date(t.updated_at),syncVersion:t.sync_version,pendingSync:!1});else{const r=new Date(n.updatedAt).getTime(),o=new Date(t.updatedAt).getTime();o>r?await he.tags?.update(t.id,{name:t.name,color:t.color||n.color,count:t.count||n.count||0,updatedAt:new Date(t.updated_at),syncVersion:t.sync_version,pendingSync:!1}):r>o&&n.pendingSync&&await this.queueOperation({type:"update",table:"tags",data:n,localId:n.id})}}catch(n){console.error("Failed to merge cloud tag:",n)}}async cleanupSyncQueue(){try{const t=new Date(Date.now()-6048e5),n=new Map;this.syncQueue.forEach(a=>{const i=`${a.table}-${a.localId}-${a.type}`,l=n.get(i);(!l||new Date(a.timestamp)>new Date(l.timestamp))&&n.set(i,a)});const r=Array.from(n.values()).filter(a=>{const l=new Date(a.timestamp)<t,d=a.retryCount>=(a.maxRetries||3);return!l&&!d}),o=this.syncQueue.length;this.syncQueue=r,o!==r.length&&console.log(`ð§¹ æ¸çåæ­¥éå: ${o} -> ${r.length} ä¸ªæä½`)}catch(t){console.error("Failed to cleanup sync queue:",t)}}async persistSyncQueue(){try{await this.cleanupSyncQueue();const n=this.syncQueue.slice(0,100);if(n.length>0)try{await he.syncQueue.clear(),await he.syncQueue.bulkAdd(n.map(r=>({...r,timestamp:new Date(r.timestamp)}))),console.log(`ð¾ æä¹ååæ­¥éå: ${n.length} ä¸ªæä½`)}catch(r){console.warn("â ï¸ æ¹éæ·»å å¤±è´¥ï¼å°è¯åä¸ªæ·»å :",r),await he.syncQueue.clear();for(const o of n.slice(0,20))try{await he.syncQueue.add({...o,timestamp:new Date(o.timestamp)})}catch(a){console.warn("â ï¸ åä¸ªæ·»å å¤±è´¥ï¼è·³è¿:",a)}}}catch(t){console.error("Failed to persist sync queue:",t);try{const n=JSON.stringify(this.syncQueue.slice(0,10));localStorage.setItem("cardall_sync_queue",n)}catch(n){console.error("Fallback to localStorage also failed:",n),this.syncQueue=[],console.warn("â ï¸ åæ­¥éåå·²æ¸é¤ï¼é²æ­¢å­å¨éé¢é®é¢")}}}async restoreSyncQueue(){try{try{await he.syncQueue.clear()}catch(r){console.warn("â ï¸ æ¸é¤syncQueueå¤±è´¥:",r)}const t=await he.syncQueue.toArray();if(t.length>0){this.syncQueue=t.map(r=>({...r,timestamp:new Date(r.timestamp)})),await this.cleanupSyncQueue(),this.notifyStatusChange(),console.log(`ð ä»IndexedDBæ¢å¤äº ${this.syncQueue.length} ä¸ªåæ­¥æä½`);return}const n=localStorage.getItem("cardall_sync_queue");if(n)try{this.syncQueue=JSON.parse(n),await this.cleanupSyncQueue(),this.notifyStatusChange(),console.log(`ð ä»localStorageæ¢å¤äº ${this.syncQueue.length} ä¸ªåæ­¥æä½`),this.syncQueue.length<=20&&await this.persistSyncQueue(),localStorage.removeItem("cardall_sync_queue")}catch(r){console.error("è§£ælocalStorageæ°æ®å¤±è´¥:",r),localStorage.removeItem("cardall_sync_queue")}}catch(t){console.error("Failed to restore sync queue:",t),this.syncQueue=[]}}async clearSyncQueue(){this.syncQueue=[],await this.persistSyncQueue(),this.notifyStatusChange()}async cleanupDatabaseData(){try{console.log("ð§¹ å¼å§æ¸çæ°æ®åºéå¤æ°æ®..."),await this.clearSyncQueue();try{await he.syncQueue.clear(),console.log("â æ¸çäºsyncQueueè¡¨")}catch(t){console.warn("â ï¸ æ¸çsyncQueueè¡¨å¤±è´¥:",t)}localStorage.removeItem("cardall_sync_queue"),console.log("â æ°æ®åºæ¸çå®æ")}catch(t){console.error("â æ°æ®åºæ¸çå¤±è´¥:",t)}}getConflicts(){return[...this.conflicts]}async resolveConflict(t,n){const r=this.conflicts.find(a=>a.id===t);if(!r)return;switch(n){case"local":await this.queueOperation({type:"update",table:r.table,data:r.localData,localId:r.localData.id});break}const o=this.conflicts.findIndex(a=>a.id===t);o>-1&&(this.conflicts.splice(o,1),this.notifyStatusChange())}createSnapshot(){const t={timestamp:new Date,queueLength:this.syncQueue.length,failedOperations:this.failedOperations.length,lastSyncTime:this.lastSyncTime,systemStatus:this.getSystemHealth()};this.snapshots.push(t),this.snapshots.length>this.maxSnapshots&&this.snapshots.shift()}getSystemHealth(){const t=this.syncQueue.length+this.failedOperations.length;return this.failedOperations.length>this.maxFailedOperations*.8?"error":this.failedOperations.length>this.maxFailedOperations*.5||t>100?"warning":"healthy"}async recoverFromErrors(){if(this.recoveryMode){console.log("ð Already in recovery mode, skipping...");return}this.recoveryMode=!0,console.log("ð Starting error recovery process...");try{await this.recoverFailedOperations(),await this.cleanupZombieData(),await this.validateDataConsistency(),this.createSnapshot(),console.log("â Error recovery completed successfully")}catch(t){console.error("â Error recovery failed:",t),this.handleRecoveryFailure(t)}finally{this.recoveryMode=!1}}async recoverFailedOperations(){if(this.failedOperations.length===0)return;console.log(`ð Recovering ${this.failedOperations.length} failed operations...`);const t=this.failedOperations.filter(n=>n.recoveryAttempts<3&&!this.isObsoleteOperation(n));for(const n of t)try{n.retryCount=0,n.recoveryAttempts++,n.error=void 0,n.nextRetry=void 0,this.syncQueue.push(n);const r=this.failedOperations.findIndex(o=>o.id===n.id);r>-1&&this.failedOperations.splice(r,1),console.log(`â Operation ${n.id} recovered and re-queued`)}catch(r){console.error(`Failed to recover operation ${n.id}:`,r)}this.cleanupUnrecoverableOperations()}isObsoleteOperation(t){return new Date().getTime()-t.failedAt.getTime()>7*24*60*60*1e3}cleanupUnrecoverableOperations(){const t=this.failedOperations.length;this.failedOperations=this.failedOperations.filter(r=>!this.isObsoleteOperation(r)&&r.recoveryAttempts<3);const n=t-this.failedOperations.length;n>0&&console.log(`ð§¹ Cleaned up ${n} unrecoverable operations`)}async cleanupZombieData(){try{this.syncQueue=this.syncQueue.filter(t=>t.table==="cards"?he.cards?.get(t.localId)!==void 0:t.table==="folders"?he.folders?.get(t.localId)!==void 0:t.table==="tags"?he.tags?.get(t.localId)!==void 0:!0),console.log("ð§¹ Zombie data cleanup completed")}catch(t){console.error("Failed to cleanup zombie data:",t)}}async validateDataConsistency(){try{const t=await he.cards?.toArray()||[],n=await he.folders?.toArray()||[],r=await he.tags?.toArray()||[],o=new Set(n.map(i=>i.id)),a=t.filter(i=>i.folderId&&!o.has(i.folderId));if(a.length>0){console.warn(`â ï¸ Found ${a.length} cards with invalid folder references`);for(const i of a)await he.cards?.update(i.id,{folderId:void 0})}console.log("â Data consistency validation completed")}catch(t){console.error("Failed to validate data consistency:",t)}}handleRecoveryFailure(t){console.error("Recovery process failed:",t);const n={timestamp:new Date,error:t instanceof Error?t.message:String(t),queueLength:this.syncQueue.length,failedOperations:this.failedOperations.length,systemStatus:this.getSystemHealth()},r=JSON.parse(localStorage.getItem("cardall_recovery_failures")||"[]");r.push(n),r.length>50&&r.shift(),localStorage.setItem("cardall_recovery_failures",JSON.stringify(r))}startHealthCheck(){setInterval(()=>{this.performHealthCheck()},60*60*1e3)}async performHealthCheck(){const t=new Date;if(!(t.getTime()-this.lastHealthCheck.getTime()<60*60*1e3)){this.lastHealthCheck=t;try{const r=this.getSystemHealth();r==="error"?(console.error("ð¨ System health check failed, starting recovery..."),await this.recoverFromErrors()):r==="warning"&&console.warn("â ï¸ System health warning, monitoring..."),this.createSnapshot()}catch(r){console.error("Health check failed:",r)}}}getSystemReport(){return{health:this.getSystemHealth(),queueLength:this.syncQueue.length,failedOperations:this.failedOperations.length,lastSyncTime:this.lastSyncTime,recoveryMode:this.recoveryMode,recentSnapshots:this.snapshots.slice(-10)}}async triggerErrorRecovery(){if(this.recoveryMode)throw new Error("Recovery already in progress");await this.recoverFromErrors()}clearFailedOperations(){const t=this.failedOperations.length;this.failedOperations=[],console.log(`ð§¹ Cleared ${t} failed operations`)}}const Ze=new Jp,Xa=Object.freeze(Object.defineProperty({__proto__:null,cloudSyncService:Ze},Symbol.toStringTag,{value:"Module"}));class em{listeners=[];currentState={user:null,session:null,loading:!0,error:null};constructor(){this.initialize(),setTimeout(()=>{this.setupCloudSync()},0)}setupCloudSync(){try{Za(async()=>{const{cloudSyncService:t}=await Promise.resolve().then(()=>Xa);return{cloudSyncService:t}},void 0).then(({cloudSyncService:t})=>{t.setAuthService(this)}).catch(t=>{console.warn("Failed to setup cloud sync service:",t)})}catch(t){console.warn("Failed to setup cloud sync service:",t)}}async initialize(){try{const{data:{session:t},error:n}=await nt.auth.getSession();if(n){this.updateState({error:n.message,loading:!1});return}if(t?.user){const r=await this.fetchUserProfile(t.user.id);this.updateState({user:r,session:t,loading:!1,error:null})}else this.updateState({loading:!1});nt.auth.onAuthStateChange(async(r,o)=>{if(console.log("Auth state changed:",r,o?.user?.id),r==="SIGNED_OUT"){try{const{cloudSyncService:a}=await Za(async()=>{const{cloudSyncService:i}=await Promise.resolve().then(()=>Xa);return{cloudSyncService:i}},void 0);await a.clearSyncQueue()}catch(a){console.warn("Failed to clear sync queue on signout:",a)}this.updateState({user:null,session:null,loading:!1,error:null})}else if(o?.user){const a=await this.fetchUserProfile(o.user.id);if(this.updateState({user:a,session:o,loading:!1,error:null}),r==="SIGNED_IN")try{const{cloudSyncService:i}=await Za(async()=>{const{cloudSyncService:l}=await Promise.resolve().then(()=>Xa);return{cloudSyncService:l}},void 0);await i.performFullSync()}catch(i){console.warn("Failed to perform full sync after signin:",i)}}else this.updateState({user:null,session:null,loading:!1,error:null})})}catch(t){console.error("Auth initialization failed:",t),this.updateState({error:t instanceof Error?t.message:"Authentication failed",loading:!1})}}async fetchUserProfile(t){try{await new Promise(o=>setTimeout(o,100));const{data:n,error:r}=await nt.from("users").select("*").eq("id",t).single();return r?(console.error("Failed to fetch user profile:",r),null):n}catch(n){return console.error("Error fetching user profile:",n),null}}updateState(t){this.currentState={...this.currentState,...t},this.listeners.forEach(n=>n(this.currentState))}onAuthStateChange(t){return this.listeners.push(t),t(this.currentState),()=>{const n=this.listeners.indexOf(t);n>-1&&this.listeners.splice(n,1)}}getCurrentState(){return this.currentState}async signUpWithEmail(t,n,r){try{this.updateState({loading:!0,error:null});const{data:o,error:a}=await nt.auth.signUp({email:t,password:n,options:{data:{name:r?.name||t.split("@")[0],full_name:r?.name||t.split("@")[0]}}});return a?(this.updateState({error:a.message,loading:!1}),{error:a}):(this.updateState({loading:!1,error:null}),{error:null})}catch(o){const a=o instanceof Error?o.message:"Registration failed";return this.updateState({error:a,loading:!1}),{error:o}}}async signInWithEmail(t,n){try{this.updateState({loading:!0,error:null});const{error:r}=await nt.auth.signInWithPassword({email:t,password:n});return r?(this.updateState({error:r.message,loading:!1}),{error:r}):{error:null}}catch(r){const o=r instanceof Error?r.message:"Login failed";return this.updateState({error:o,loading:!1}),{error:r}}}async resetPassword(t){try{this.updateState({loading:!0,error:null});const{error:n}=await nt.auth.resetPasswordForEmail(t,{redirectTo:`${window.location.origin}/auth/reset-password`});return n?(this.updateState({error:n.message,loading:!1}),{error:n}):(this.updateState({loading:!1,error:null}),{error:null})}catch(n){const r=n instanceof Error?n.message:"Password reset failed";return this.updateState({error:r,loading:!1}),{error:n}}}async signInWithGitHub(){try{this.updateState({loading:!0,error:null});const{error:t}=await nt.auth.signInWithOAuth({provider:"github",options:{redirectTo:`${window.location.origin}`}});return t?(this.updateState({error:t.message,loading:!1}),{error:t}):{error:null}}catch(t){const n=t instanceof Error?t.message:"Login failed";return this.updateState({error:n,loading:!1}),{error:t}}}async signOut(){try{this.updateState({loading:!0,error:null});const{error:t}=await nt.auth.signOut();return t?(this.updateState({error:t.message,loading:!1}),{error:t}):(this.updateState({user:null,session:null,loading:!1,error:null}),{error:null})}catch(t){const n=t instanceof Error?t.message:"Logout failed";return this.updateState({error:n,loading:!1}),{error:t}}}async upsertUserProfile(t){try{if(!this.currentState.session?.user.id)return console.error("No authenticated user found"),null;const{data:n,error:r}=await nt.from("users").upsert({id:this.currentState.session.user.id,...t,updated_at:new Date().toISOString()}).select().single();return r?(console.error("Failed to upsert user profile:",r),null):n}catch(n){return console.error("Error upserting user profile:",n),null}}isAuthenticated(){return!!this.currentState.user&&!!this.currentState.session}getCurrentUser(){return this.currentState.user}getCurrentSession(){return this.currentState.session}}const Et=new em,tm=e=>{const{userId:t,syncVersion:n,lastSyncAt:r,pendingSync:o,...a}=e;return{...a,id:a.id||"",createdAt:new Date(a.createdAt),updatedAt:new Date(a.updatedAt)}},yu=()=>Et.getCurrentUser()?.id||null;function nm(){const[e,t]=m.useState([]),[n,r]=m.useState({searchTerm:"",tags:[]}),[o,a]=m.useState({layout:"grid",cardSize:"medium",showTags:!0,showDates:!1,sortBy:"updated",sortOrder:"desc"}),[i,l]=m.useState([]),[d,f]=m.useState(!0),p=m.useCallback(async()=>{try{f(!0);const S=(await he.cards.toArray()).map(tm);t(S)}catch(_){console.error("Failed to load cards:",_)}finally{f(!1)}},[]);m.useEffect(()=>{p()},[p]),m.useEffect(()=>{const _=he.cards.hook("creating",(I,M,F)=>{console.log("Card creating:",I)}),S=he.cards.hook("updating",(I,M,F,H)=>{console.log("Card updating:",M)}),D=he.cards.hook("deleting",(I,M,F)=>{console.log("Card deleting:",I)});return()=>{_?.unsubscribe(),S?.unsubscribe(),D?.unsubscribe()}},[]);const b=m.useMemo(()=>{let _=e.filter(S=>{if(n.searchTerm){const D=n.searchTerm.toLowerCase(),I=S.frontContent.title.toLowerCase().includes(D)||S.backContent.title.toLowerCase().includes(D),M=S.frontContent.text.toLowerCase().includes(D)||S.backContent.text.toLowerCase().includes(D),F=[...S.frontContent.tags,...S.backContent.tags].some(H=>H.toLowerCase().includes(D));if(!I&&!M&&!F)return!1}if(n.tags.length>0){const D=[...S.frontContent.tags,...S.backContent.tags];if(!n.tags.some(I=>D.includes(I)))return!1}if(n.folderId&&S.folderId!==n.folderId)return!1;if(n.dateRange){const D=new Date(S.updatedAt);if(D<n.dateRange.start||D>n.dateRange.end)return!1}return!(n.styleType&&S.style.type!==n.styleType||n.hasImages!==void 0&&(S.frontContent.images.length>0||S.backContent.images.length>0)!==n.hasImages)});return _.sort((S,D)=>{let I=0;switch(o.sortBy){case"created":I=new Date(S.createdAt).getTime()-new Date(D.createdAt).getTime();break;case"updated":I=new Date(S.updatedAt).getTime()-new Date(D.updatedAt).getTime();break;case"title":I=S.frontContent.title.localeCompare(D.frontContent.title);break;default:I=0}return o.sortOrder==="desc"?-I:I}),_},[e,n,o]),v=m.useCallback(async _=>{const S=yu();try{switch(_.type){case"CREATE_CARD":{const D=crypto.randomUUID(),I={..._.payload,id:D,userId:S,createdAt:new Date,updatedAt:new Date,syncVersion:1,pendingSync:!0};await he.cards.add(I),await Ze.queueOperation({type:"create",table:"cards",data:I,localId:D}),await p();break}case"UPDATE_CARD":{const D={..._.payload.updates,userId:S,updatedAt:new Date,syncVersion:1,pendingSync:!0};await he.cards.update(_.payload.id,D),await Ze.queueOperation({type:"update",table:"cards",data:{..._.payload.updates,userId:S},localId:_.payload.id}),await p();break}case"DELETE_CARD":{await he.cards.delete(_.payload),await Ze.queueOperation({type:"delete",table:"cards",data:{userId:S},localId:_.payload}),await p();break}case"FLIP_CARD":{const D=await he.cards.get(_.payload);if(D){const I={isFlipped:!D.isFlipped,updatedAt:new Date,syncVersion:(D.syncVersion||0)+1,pendingSync:!0};await he.cards.update(_.payload,I),await Ze.queueOperation({type:"update",table:"cards",data:I,localId:_.payload}),await p()}break}case"SELECT_CARD":l(D=>D.includes(_.payload)?D.filter(I=>I!==_.payload):[...D,_.payload]);break;case"DESELECT_ALL":l([]);break;case"DUPLICATE_CARD":{const D=await he.cards.get(_.payload);if(D){const I=crypto.randomUUID(),M={...D,id:I,userId:S,createdAt:new Date,updatedAt:new Date,syncVersion:1,pendingSync:!0};await he.cards.add(M),await Ze.queueOperation({type:"create",table:"cards",data:M,localId:I}),await p()}break}case"MOVE_TO_FOLDER":{const D={folderId:_.payload.folderId,userId:S,updatedAt:new Date,syncVersion:1,pendingSync:!0};await he.cards.update(_.payload.cardId,D),await Ze.queueOperation({type:"update",table:"cards",data:D,localId:_.payload.cardId}),await p();break}default:console.warn("Unknown card action:",_)}}catch(D){throw console.error("Card operation failed:",D),D}},[p]),y=m.useCallback(_=>e.find(S=>S.id===_),[e]),C=m.useCallback(()=>e.filter(_=>i.includes(_.id)),[e,i]),k=m.useCallback(()=>{const _=new Set;return e.forEach(S=>{S.frontContent.tags.forEach(D=>_.add(D)),S.backContent.tags.forEach(D=>_.add(D))}),Array.from(_).sort()},[e]),A=m.useCallback(async(_,S)=>{const D=yu();try{const I=await he.cards.filter(M=>M.frontContent.tags.includes(_)||M.backContent.tags.includes(_)).toArray();for(const M of I){const F=Y=>S?Y.map(Q=>Q===_?S:Q):Y.filter(Q=>Q!==_),H=F(M.frontContent.tags),Z=F(M.backContent.tags),ie={frontContent:{...M.frontContent,tags:H,lastModified:new Date},backContent:{...M.backContent,tags:Z,lastModified:new Date},userId:D,updatedAt:new Date,syncVersion:(M.syncVersion||0)+1,pendingSync:!0};await he.cards.update(M.id,ie),await Ze.queueOperation({type:"update",table:"cards",data:ie,localId:M.id})}await p()}catch(I){throw console.error("Failed to update tags in cards:",I),I}},[p]),j=m.useCallback(_=>e.filter(S=>S.frontContent.tags.includes(_)||S.backContent.tags.includes(_)),[e]);return{cards:b,allCards:e,filter:n,setFilter:r,viewSettings:o,setViewSettings:a,selectedCardIds:i,isLoading:d,dispatch:v,getCardById:y,getSelectedCards:C,getAllTags:k,updateTagsInAllCards:A,getCardsWithTag:j,loadCards:p}}const rm=e=>{const{userId:t,syncVersion:n,pendingSync:r,...o}=e;return{...o,id:o.id||"",createdAt:new Date(o.createdAt),updatedAt:new Date(o.updatedAt)}},om=()=>Et.getCurrentUser()?.id||null;function am(){const[e,t]=m.useState([]),[n,r]=m.useState({searchTerm:"",showEmpty:!0}),[o,a]=m.useState([]),[i,l]=m.useState(!0),d=m.useRef(new Map);m.useEffect(()=>{d.current.clear()},[e]);const f=m.useCallback(async()=>{try{l(!0),console.log("ð Loading folders from database...");const I=await he.folders.toArray();console.log("ð Found folders in DB:",I.length);const M=I.map(rm);console.log("ð Converted folders:",M.map(F=>({id:F.id,name:F.name,cardIds:F.cardIds}))),t(M),console.log("ð Folders state updated")}catch(I){console.error("Failed to load folders:",I)}finally{l(!1)}},[]);m.useEffect(()=>{f()},[f]),m.useEffect(()=>{let I=!0,M=0;const F=100,H=()=>{const Q=Date.now();Q-M>F&&(M=Q,I&&f())},Z=he.folders.hook("creating",(Q,me,_e)=>{console.log("ð Folder creating:",Q),H()}),ie=he.folders.hook("updating",(Q,me,_e,Ee)=>{console.log("ð Folder updating:",me),H()}),Y=he.folders.hook("deleting",(Q,me,_e)=>{console.log("ð Folder deleting:",Q),H()});return()=>{I=!1,Z?.unsubscribe(),ie?.unsubscribe(),Y?.unsubscribe()}},[f]);const p=m.useMemo(()=>{let I=e.filter(M=>{if(n.searchTerm){const F=n.searchTerm.toLowerCase();if(!M.name.toLowerCase().includes(F))return!1}return!(n.parentId!==void 0&&M.parentId!==n.parentId)});return I.sort((M,F)=>new Date(F.createdAt).getTime()-new Date(M.createdAt).getTime()),I},[e,n]),b=m.useCallback(async I=>{const M=om();try{switch(I.type){case"CREATE_FOLDER":{const F=crypto.randomUUID(),H={...I.payload,id:F,userId:M,createdAt:new Date,updatedAt:new Date,syncVersion:1,pendingSync:!0,cardIds:[],isExpanded:!0,children:[]};console.log("ð useFoldersDb: Creating new folder",H);const Z=await he.folders.add(H);console.log("ð useFoldersDb: Folder added to local DB with id",Z),await Ze.queueOperation({type:"create",table:"folders",data:H,localId:F}),console.log("ð useFoldersDb: Sync operation queued"),await f();break}case"UPDATE_FOLDER":{const F={...I.payload.updates,userId:M,updatedAt:new Date,syncVersion:1,pendingSync:!0};await he.folders.update(I.payload.id,F),await Ze.queueOperation({type:"update",table:"folders",data:F,localId:I.payload.id}),await f();break}case"DELETE_FOLDER":{await he.folders.delete(I.payload),await Ze.queueOperation({type:"delete",table:"folders",data:{userId:M},localId:I.payload}),await f();break}case"SELECT_FOLDER":a(F=>F.includes(I.payload)?F.filter(H=>H!==I.payload):[...F,I.payload]);break;case"DESELECT_ALL_FOLDERS":a([]);break;case"TOGGLE_EXPAND":{const F=await he.folders.get(I.payload);if(F){const H={isExpanded:!F.isExpanded,userId:M,updatedAt:new Date,syncVersion:(F.syncVersion||0)+1,pendingSync:!0};await he.folders.update(I.payload,H),await Ze.queueOperation({type:"update",table:"folders",data:H,localId:I.payload}),await f()}break}case"MOVE_CARDS_TO_FOLDER":{const F={userId:M,updatedAt:new Date,syncVersion:1,pendingSync:!0};await he.folders.update(I.payload.folderId,F),await Ze.queueOperation({type:"update",table:"folders",data:F,localId:I.payload.folderId}),await f();break}default:console.warn("Unknown folder action:",I)}}catch(F){throw console.error("Folder operation failed:",F),F}},[f]),v=m.useCallback(I=>e.find(M=>M.id===I),[e]),y=m.useCallback(()=>e.filter(I=>o.includes(I.id)),[e,o]),C=m.useCallback((I,M)=>{t(F=>F.map(H=>H.id===I?{...H,...M}:H))},[]),k=m.useCallback(I=>{t(M=>[...M,I])},[]),A=m.useCallback(I=>{t(M=>M.filter(F=>F.id!==I))},[]),j=m.useCallback(()=>{const I=(M=null)=>{if(d.current.has(M))return d.current.get(M);const H=p.filter(Z=>Z.parentId===M).map(Z=>({...Z,children:I(Z.id)}));return d.current.set(M,H),H};return I()},[p]),_=m.useCallback(()=>p.filter(I=>!I.parentId),[p]),S=m.useCallback(I=>p.filter(M=>M.parentId===I),[p]),D=m.useCallback(async I=>{try{return(await he.cards.filter(F=>F.folderId===I&&!F.isDeleted).toArray()).length}catch(M){return console.error("Failed to get folder card count:",M),0}},[]);return{folders:p,allFolders:e,folderTree:j(),filter:n,setFilter:r,selectedFolderIds:o,isLoading:i,dispatch:b,getFolderById:v,getSelectedFolders:y,getFolderHierarchy:j,getRootFolders:_,getChildFolders:S,getFolderCardCount:D,loadFolders:f,updateFolderState:C,addFolderState:k,removeFolderState:A}}const sm=e=>{const{syncVersion:t,pendingSync:n,...r}=e;return{...r,id:r.id||"",createdAt:new Date(r.createdAt),updatedAt:new Date(r.updatedAt)}},im=()=>Et.getCurrentUser()?.id||null;function um(){const[e,t]=m.useState([]),[n,r]=m.useState({searchTerm:"",showUnused:!0}),[o,a]=m.useState([]),[i,l]=m.useState(!0),d=m.useRef(null),f=m.useRef(new Set);m.useEffect(()=>()=>{d.current&&clearTimeout(d.current)},[]);const p=m.useCallback(async()=>{try{l(!0);const F=(await he.tags.toArray()).map(sm);t(F)}catch(M){console.error("Failed to load tags:",M)}finally{l(!1)}},[]);m.useEffect(()=>{p()},[p]),m.useEffect(()=>{const M=he.tags.hook("creating",(Z,ie,Y)=>{console.log("Tag creating:",Z)}),F=he.tags.hook("updating",(Z,ie,Y,Q)=>{console.log("Tag updating:",ie)}),H=he.tags.hook("deleting",(Z,ie,Y)=>{console.log("Tag deleting:",Z)});return()=>{M?.unsubscribe(),F?.unsubscribe(),H?.unsubscribe()}},[]);const b=m.useMemo(()=>{let M=e.filter(F=>{if(n.searchTerm){const H=n.searchTerm.toLowerCase();if(!F.name.toLowerCase().includes(H))return!1}return!(n.color&&F.color!==n.color)});return M.sort((F,H)=>F.count!==H.count?H.count-F.count:F.name.localeCompare(H.name)),M},[e,n.searchTerm,n.color]),v=m.useCallback(async M=>{const F=im();try{switch(M.type){case"CREATE_TAG":{const H=crypto.randomUUID(),Z={...M.payload,id:H,userId:F,count:0,createdAt:new Date,updatedAt:new Date,syncVersion:1,pendingSync:!0};console.log("ð·ï¸ useTagsDb: Creating new tag",Z);try{const ie=await he.tags.add(Z);console.log("ð·ï¸ useTagsDb: Tag added to local DB with id",ie),Ze.queueOperation({type:"create",table:"tags",data:Z,localId:H}).catch(Y=>{console.warn("ð·ï¸ useTagsDb: Sync operation failed, tag saved locally:",Y)}),console.log("ð·ï¸ useTagsDb: Sync operation queued"),await p()}catch(ie){throw console.error("ð·ï¸ useTagsDb: Failed to save tag to local DB:",ie),new Error(`åå»ºæ ç­¾å¤±è´¥: ${ie.message}`)}break}case"UPDATE_TAG":{const H={...M.payload.updates,userId:F,updatedAt:new Date,syncVersion:1,pendingSync:!0};await he.tags.update(M.payload.id,H),await Ze.queueOperation({type:"update",table:"tags",data:H,localId:M.payload.id}),await p();break}case"DELETE_TAG":{await he.tags.delete(M.payload),await Ze.queueOperation({type:"delete",table:"tags",data:{userId:F},localId:M.payload}),await p();break}case"SELECT_TAG":a(H=>H.includes(M.payload)?H.filter(Z=>Z!==M.payload):[...H,M.payload]);break;case"DESELECT_ALL_TAGS":a([]);break;case"INCREMENT_COUNT":{const H=await he.tags.get(M.payload);if(H){const Z={count:(H.count||0)+1,userId:F,updatedAt:new Date,syncVersion:(H.syncVersion||0)+1,pendingSync:!0};await he.tags.update(M.payload,Z),await Ze.queueOperation({type:"update",table:"tags",data:Z,localId:M.payload}),await p()}break}case"DECREMENT_COUNT":{const H=await he.tags.get(M.payload);if(H&&H.count>0){const Z={count:Math.max(0,(H.count||0)-1),userId:F,updatedAt:new Date,syncVersion:(H.syncVersion||0)+1,pendingSync:!0};await he.tags.update(M.payload,Z),await Ze.queueOperation({type:"update",table:"tags",data:Z,localId:M.payload}),await p()}break}default:console.warn("Unknown tag action:",M)}}catch(H){throw console.error("Tag operation failed:",H),H}},[p]),y=m.useCallback(M=>e.find(F=>F.id===M),[e]),C=m.useCallback(()=>e.filter(M=>o.includes(M.id)),[e,o]),k=m.useCallback(()=>e.map(M=>M.name).sort(),[e]),A=m.useCallback(M=>e.filter(F=>F.color===M),[e]),j=m.useCallback((M=10)=>[...e].sort((F,H)=>H.count-F.count).slice(0,M),[e]),_=m.useCallback(async M=>{try{d.current&&clearTimeout(d.current);const F=[...new Set(M)];f.current=new Set(F),d.current=setTimeout(async()=>{try{const H=Array.from(f.current);if(f.current.clear(),H.length===0)return;const Z=await he.tags.toArray(),ie=new Set(Z.map(me=>me.name)),Y=[],Q=[];for(const me of Z){const _e=H.filter(Ee=>Ee===me.name).length;_e!==me.count&&Y.push({id:me.id,count:_e})}for(const me of H)if(!ie.has(me)){const _e=H.filter(Ee=>Ee===me).length;Q.push({name:me,color:"#3b82f6",count:_e})}Y.length>0&&await Promise.all(Y.map(me=>v({type:"UPDATE_TAG",payload:{id:me.id,updates:{count:me.count}}}))),Q.length>0&&await Promise.all(Q.map(me=>v({type:"CREATE_TAG",payload:me}))),console.log(`â Batch synced ${Y.length} updates and ${Q.length} creates`)}catch(H){console.error("Batch tag sync failed:",H)}},300)}catch(F){console.error("Tag sync failed:",F)}},[v]),S=m.useCallback(async(M,F)=>{try{const H=e.find(Z=>Z.name===M);H&&await v({type:"UPDATE_TAG",payload:{id:H.id,updates:{name:F}}})}catch(H){throw console.error("Failed to rename tag:",H),H}},[e,v]),D=m.useCallback(async()=>{try{const M=e.filter(F=>F.count===0);for(const F of M)await v({type:"DELETE_TAG",payload:F.id})}catch(M){throw console.error("Failed to delete unused tags:",M),M}},[e,v]),I=m.useCallback(M=>{try{const F=e.find(H=>H.name===M);return F?(v({type:"DELETE_TAG",payload:F.id}),!0):!1}catch(F){return console.error("Failed to delete tag by name:",F),!1}},[e,v]);return{tags:b,allTags:e,popularTags:j(),filter:n,setFilter:r,selectedTagIds:o,isLoading:i,dispatch:v,getTagById:y,getSelectedTags:C,getAllTagNames:k,getTagsByColor:A,getMostUsedTags:j,syncTagsWithCards:_,renameTag:S,deleteUnusedTags:D,deleteTagByName:I,loadTags:p}}const Il=m.createContext(null);function lm({children:e}){const t=nm(),n=am(),r=um();m.useEffect(()=>{const a=[];t.allCards.forEach(l=>{a.push(...l.frontContent.tags,...l.backContent.tags)});const i=setTimeout(()=>{r.syncTagsWithCards(a)},300);return()=>clearTimeout(i)},[t.allCards,r.syncTagsWithCards]);const o=m.useMemo(()=>({cards:t,folders:n,tags:r}),[t,n,r]);return u.jsx(Il.Provider,{value:o,children:e})}function Zs(){const e=m.useContext(Il);if(!e)throw new Error("useCardAll must be used within a CardAllProvider");return e}function Xs(){return Zs().cards}function Js(){return Zs().folders}function ei(){return Zs().tags}function Pl(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var o=e.length;for(t=0;t<o;t++)e[t]&&(n=Pl(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function Rl(){for(var e,t,n=0,r="",o=arguments.length;n<o;n++)(e=arguments[n])&&(t=Pl(e))&&(r&&(r+=" "),r+=t);return r}const vu=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,wu=Rl,ti=(e,t)=>n=>{var r;if(t?.variants==null)return wu(e,n?.class,n?.className);const{variants:o,defaultVariants:a}=t,i=Object.keys(o).map(f=>{const p=n?.[f],b=a?.[f];if(p===null)return null;const v=vu(p)||vu(b);return o[f][v]}),l=n&&Object.entries(n).reduce((f,p)=>{let[b,v]=p;return v===void 0||(f[b]=v),f},{}),d=t==null||(r=t.compoundVariants)===null||r===void 0?void 0:r.reduce((f,p)=>{let{class:b,className:v,...y}=p;return Object.entries(y).every(C=>{let[k,A]=C;return Array.isArray(A)?A.includes({...a,...l}[k]):{...a,...l}[k]===A})?[...f,b,v]:f},[]);return wu(e,i,d,n?.class,n?.className)},ni="-",cm=e=>{const t=fm(e),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=e;return{getClassGroupId:i=>{const l=i.split(ni);return l[0]===""&&l.length!==1&&l.shift(),Fl(l,t)||dm(i)},getConflictingClassGroupIds:(i,l)=>{const d=n[i]||[];return l&&r[i]?[...d,...r[i]]:d}}},Fl=(e,t)=>{if(e.length===0)return t.classGroupId;const n=e[0],r=t.nextPart.get(n),o=r?Fl(e.slice(1),r):void 0;if(o)return o;if(t.validators.length===0)return;const a=e.join(ni);return t.validators.find(({validator:i})=>i(a))?.classGroupId},Cu=/^\[(.+)\]$/,dm=e=>{if(Cu.test(e)){const t=Cu.exec(e)[1],n=t?.substring(0,t.indexOf(":"));if(n)return"arbitrary.."+n}},fm=e=>{const{theme:t,prefix:n}=e,r={nextPart:new Map,validators:[]};return pm(Object.entries(e.classGroups),n).forEach(([a,i])=>{Cs(i,r,a,t)}),r},Cs=(e,t,n,r)=>{e.forEach(o=>{if(typeof o=="string"){const a=o===""?t:ku(t,o);a.classGroupId=n;return}if(typeof o=="function"){if(hm(o)){Cs(o(r),t,n,r);return}t.validators.push({validator:o,classGroupId:n});return}Object.entries(o).forEach(([a,i])=>{Cs(i,ku(t,a),n,r)})})},ku=(e,t)=>{let n=e;return t.split(ni).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},hm=e=>e.isThemeGetter,pm=(e,t)=>t?e.map(([n,r])=>{const o=r.map(a=>typeof a=="string"?t+a:typeof a=="object"?Object.fromEntries(Object.entries(a).map(([i,l])=>[t+i,l])):a);return[n,o]}):e,mm=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,n=new Map,r=new Map;const o=(a,i)=>{n.set(a,i),t++,t>e&&(t=0,r=n,n=new Map)};return{get(a){let i=n.get(a);if(i!==void 0)return i;if((i=r.get(a))!==void 0)return o(a,i),i},set(a,i){n.has(a)?n.set(a,i):o(a,i)}}},Ol="!",gm=e=>{const{separator:t,experimentalParseClassName:n}=e,r=t.length===1,o=t[0],a=t.length,i=l=>{const d=[];let f=0,p=0,b;for(let A=0;A<l.length;A++){let j=l[A];if(f===0){if(j===o&&(r||l.slice(A,A+a)===t)){d.push(l.slice(p,A)),p=A+a;continue}if(j==="/"){b=A;continue}}j==="["?f++:j==="]"&&f--}const v=d.length===0?l:l.substring(p),y=v.startsWith(Ol),C=y?v.substring(1):v,k=b&&b>p?b-p:void 0;return{modifiers:d,hasImportantModifier:y,baseClassName:C,maybePostfixModifierPosition:k}};return n?l=>n({className:l,parseClassName:i}):i},bm=e=>{if(e.length<=1)return e;const t=[];let n=[];return e.forEach(r=>{r[0]==="["?(t.push(...n.sort(),r),n=[]):n.push(r)}),t.push(...n.sort()),t},xm=e=>({cache:mm(e.cacheSize),parseClassName:gm(e),...cm(e)}),ym=/\s+/,vm=(e,t)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:o}=t,a=[],i=e.trim().split(ym);let l="";for(let d=i.length-1;d>=0;d-=1){const f=i[d],{modifiers:p,hasImportantModifier:b,baseClassName:v,maybePostfixModifierPosition:y}=n(f);let C=!!y,k=r(C?v.substring(0,y):v);if(!k){if(!C){l=f+(l.length>0?" "+l:l);continue}if(k=r(v),!k){l=f+(l.length>0?" "+l:l);continue}C=!1}const A=bm(p).join(":"),j=b?A+Ol:A,_=j+k;if(a.includes(_))continue;a.push(_);const S=o(k,C);for(let D=0;D<S.length;++D){const I=S[D];a.push(j+I)}l=f+(l.length>0?" "+l:l)}return l};function wm(){let e=0,t,n,r="";for(;e<arguments.length;)(t=arguments[e++])&&(n=Ll(t))&&(r&&(r+=" "),r+=n);return r}const Ll=e=>{if(typeof e=="string")return e;let t,n="";for(let r=0;r<e.length;r++)e[r]&&(t=Ll(e[r]))&&(n&&(n+=" "),n+=t);return n};function Cm(e,...t){let n,r,o,a=i;function i(d){const f=t.reduce((p,b)=>b(p),e());return n=xm(f),r=n.cache.get,o=n.cache.set,a=l,l(d)}function l(d){const f=r(d);if(f)return f;const p=vm(d,n);return o(d,p),p}return function(){return a(wm.apply(null,arguments))}}const Qe=e=>{const t=n=>n[e]||[];return t.isThemeGetter=!0,t},zl=/^\[(?:([a-z-]+):)?(.+)\]$/i,km=/^\d+\/\d+$/,_m=new Set(["px","full","screen"]),Sm=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,Em=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,jm=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,Am=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,Dm=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,on=e=>or(e)||_m.has(e)||km.test(e),bn=e=>gr(e,"length",Om),or=e=>!!e&&!Number.isNaN(Number(e)),Ja=e=>gr(e,"number",or),Fr=e=>!!e&&Number.isInteger(Number(e)),Nm=e=>e.endsWith("%")&&or(e.slice(0,-1)),Re=e=>zl.test(e),xn=e=>Sm.test(e),Tm=new Set(["length","size","percentage"]),Mm=e=>gr(e,Tm,Bl),Im=e=>gr(e,"position",Bl),Pm=new Set(["image","url"]),Rm=e=>gr(e,Pm,zm),Fm=e=>gr(e,"",Lm),Or=()=>!0,gr=(e,t,n)=>{const r=zl.exec(e);return r?r[1]?typeof t=="string"?r[1]===t:t.has(r[1]):n(r[2]):!1},Om=e=>Em.test(e)&&!jm.test(e),Bl=()=>!1,Lm=e=>Am.test(e),zm=e=>Dm.test(e),Bm=()=>{const e=Qe("colors"),t=Qe("spacing"),n=Qe("blur"),r=Qe("brightness"),o=Qe("borderColor"),a=Qe("borderRadius"),i=Qe("borderSpacing"),l=Qe("borderWidth"),d=Qe("contrast"),f=Qe("grayscale"),p=Qe("hueRotate"),b=Qe("invert"),v=Qe("gap"),y=Qe("gradientColorStops"),C=Qe("gradientColorStopPositions"),k=Qe("inset"),A=Qe("margin"),j=Qe("opacity"),_=Qe("padding"),S=Qe("saturate"),D=Qe("scale"),I=Qe("sepia"),M=Qe("skew"),F=Qe("space"),H=Qe("translate"),Z=()=>["auto","contain","none"],ie=()=>["auto","hidden","clip","visible","scroll"],Y=()=>["auto",Re,t],Q=()=>[Re,t],me=()=>["",on,bn],_e=()=>["auto",or,Re],Ee=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],xe=()=>["solid","dashed","dotted","double","none"],Ne=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],Ae=()=>["start","end","center","between","around","evenly","stretch"],K=()=>["","0",Re],ge=()=>["auto","avoid","all","avoid-page","page","left","right","column"],Ce=()=>[or,Re];return{cacheSize:500,separator:":",theme:{colors:[Or],spacing:[on,bn],blur:["none","",xn,Re],brightness:Ce(),borderColor:[e],borderRadius:["none","","full",xn,Re],borderSpacing:Q(),borderWidth:me(),contrast:Ce(),grayscale:K(),hueRotate:Ce(),invert:K(),gap:Q(),gradientColorStops:[e],gradientColorStopPositions:[Nm,bn],inset:Y(),margin:Y(),opacity:Ce(),padding:Q(),saturate:Ce(),scale:Ce(),sepia:K(),skew:Ce(),space:Q(),translate:Q()},classGroups:{aspect:[{aspect:["auto","square","video",Re]}],container:["container"],columns:[{columns:[xn]}],"break-after":[{"break-after":ge()}],"break-before":[{"break-before":ge()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...Ee(),Re]}],overflow:[{overflow:ie()}],"overflow-x":[{"overflow-x":ie()}],"overflow-y":[{"overflow-y":ie()}],overscroll:[{overscroll:Z()}],"overscroll-x":[{"overscroll-x":Z()}],"overscroll-y":[{"overscroll-y":Z()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[k]}],"inset-x":[{"inset-x":[k]}],"inset-y":[{"inset-y":[k]}],start:[{start:[k]}],end:[{end:[k]}],top:[{top:[k]}],right:[{right:[k]}],bottom:[{bottom:[k]}],left:[{left:[k]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Fr,Re]}],basis:[{basis:Y()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Re]}],grow:[{grow:K()}],shrink:[{shrink:K()}],order:[{order:["first","last","none",Fr,Re]}],"grid-cols":[{"grid-cols":[Or]}],"col-start-end":[{col:["auto",{span:["full",Fr,Re]},Re]}],"col-start":[{"col-start":_e()}],"col-end":[{"col-end":_e()}],"grid-rows":[{"grid-rows":[Or]}],"row-start-end":[{row:["auto",{span:[Fr,Re]},Re]}],"row-start":[{"row-start":_e()}],"row-end":[{"row-end":_e()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Re]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Re]}],gap:[{gap:[v]}],"gap-x":[{"gap-x":[v]}],"gap-y":[{"gap-y":[v]}],"justify-content":[{justify:["normal",...Ae()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...Ae(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...Ae(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[_]}],px:[{px:[_]}],py:[{py:[_]}],ps:[{ps:[_]}],pe:[{pe:[_]}],pt:[{pt:[_]}],pr:[{pr:[_]}],pb:[{pb:[_]}],pl:[{pl:[_]}],m:[{m:[A]}],mx:[{mx:[A]}],my:[{my:[A]}],ms:[{ms:[A]}],me:[{me:[A]}],mt:[{mt:[A]}],mr:[{mr:[A]}],mb:[{mb:[A]}],ml:[{ml:[A]}],"space-x":[{"space-x":[F]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[F]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Re,t]}],"min-w":[{"min-w":[Re,t,"min","max","fit"]}],"max-w":[{"max-w":[Re,t,"none","full","min","max","fit","prose",{screen:[xn]},xn]}],h:[{h:[Re,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Re,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Re,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Re,t,"auto","min","max","fit"]}],"font-size":[{text:["base",xn,bn]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Ja]}],"font-family":[{font:[Or]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Re]}],"line-clamp":[{"line-clamp":["none",or,Ja]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",on,Re]}],"list-image":[{"list-image":["none",Re]}],"list-style-type":[{list:["none","disc","decimal",Re]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[j]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[j]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...xe(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",on,bn]}],"underline-offset":[{"underline-offset":["auto",on,Re]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:Q()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Re]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Re]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[j]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...Ee(),Im]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",Mm]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},Rm]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[C]}],"gradient-via-pos":[{via:[C]}],"gradient-to-pos":[{to:[C]}],"gradient-from":[{from:[y]}],"gradient-via":[{via:[y]}],"gradient-to":[{to:[y]}],rounded:[{rounded:[a]}],"rounded-s":[{"rounded-s":[a]}],"rounded-e":[{"rounded-e":[a]}],"rounded-t":[{"rounded-t":[a]}],"rounded-r":[{"rounded-r":[a]}],"rounded-b":[{"rounded-b":[a]}],"rounded-l":[{"rounded-l":[a]}],"rounded-ss":[{"rounded-ss":[a]}],"rounded-se":[{"rounded-se":[a]}],"rounded-ee":[{"rounded-ee":[a]}],"rounded-es":[{"rounded-es":[a]}],"rounded-tl":[{"rounded-tl":[a]}],"rounded-tr":[{"rounded-tr":[a]}],"rounded-br":[{"rounded-br":[a]}],"rounded-bl":[{"rounded-bl":[a]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[j]}],"border-style":[{border:[...xe(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[j]}],"divide-style":[{divide:xe()}],"border-color":[{border:[o]}],"border-color-x":[{"border-x":[o]}],"border-color-y":[{"border-y":[o]}],"border-color-s":[{"border-s":[o]}],"border-color-e":[{"border-e":[o]}],"border-color-t":[{"border-t":[o]}],"border-color-r":[{"border-r":[o]}],"border-color-b":[{"border-b":[o]}],"border-color-l":[{"border-l":[o]}],"divide-color":[{divide:[o]}],"outline-style":[{outline:["",...xe()]}],"outline-offset":[{"outline-offset":[on,Re]}],"outline-w":[{outline:[on,bn]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:me()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[j]}],"ring-offset-w":[{"ring-offset":[on,bn]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",xn,Fm]}],"shadow-color":[{shadow:[Or]}],opacity:[{opacity:[j]}],"mix-blend":[{"mix-blend":[...Ne(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":Ne()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[d]}],"drop-shadow":[{"drop-shadow":["","none",xn,Re]}],grayscale:[{grayscale:[f]}],"hue-rotate":[{"hue-rotate":[p]}],invert:[{invert:[b]}],saturate:[{saturate:[S]}],sepia:[{sepia:[I]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[d]}],"backdrop-grayscale":[{"backdrop-grayscale":[f]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[p]}],"backdrop-invert":[{"backdrop-invert":[b]}],"backdrop-opacity":[{"backdrop-opacity":[j]}],"backdrop-saturate":[{"backdrop-saturate":[S]}],"backdrop-sepia":[{"backdrop-sepia":[I]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[i]}],"border-spacing-x":[{"border-spacing-x":[i]}],"border-spacing-y":[{"border-spacing-y":[i]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Re]}],duration:[{duration:Ce()}],ease:[{ease:["linear","in","out","in-out",Re]}],delay:[{delay:Ce()}],animate:[{animate:["none","spin","ping","pulse","bounce",Re]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[D]}],"scale-x":[{"scale-x":[D]}],"scale-y":[{"scale-y":[D]}],rotate:[{rotate:[Fr,Re]}],"translate-x":[{"translate-x":[H]}],"translate-y":[{"translate-y":[H]}],"skew-x":[{"skew-x":[M]}],"skew-y":[{"skew-y":[M]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Re]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Re]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":Q()}],"scroll-mx":[{"scroll-mx":Q()}],"scroll-my":[{"scroll-my":Q()}],"scroll-ms":[{"scroll-ms":Q()}],"scroll-me":[{"scroll-me":Q()}],"scroll-mt":[{"scroll-mt":Q()}],"scroll-mr":[{"scroll-mr":Q()}],"scroll-mb":[{"scroll-mb":Q()}],"scroll-ml":[{"scroll-ml":Q()}],"scroll-p":[{"scroll-p":Q()}],"scroll-px":[{"scroll-px":Q()}],"scroll-py":[{"scroll-py":Q()}],"scroll-ps":[{"scroll-ps":Q()}],"scroll-pe":[{"scroll-pe":Q()}],"scroll-pt":[{"scroll-pt":Q()}],"scroll-pr":[{"scroll-pr":Q()}],"scroll-pb":[{"scroll-pb":Q()}],"scroll-pl":[{"scroll-pl":Q()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Re]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[on,bn,Ja]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},$m=Cm(Bm);function te(...e){return $m(Rl(e))}const ri=ti("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),ke=m.forwardRef(({className:e,variant:t,size:n,asChild:r=!1,...o},a)=>{const i=r?Kr:"button";return u.jsx(i,{className:te(ri({variant:t,size:n,className:e})),ref:a,...o})});ke.displayName="Button";const _t=m.forwardRef(({className:e,type:t,...n},r)=>u.jsx("input",{type:t,className:te("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:r,...n}));_t.displayName="Input";var qm=m.createContext(void 0);function ro(e){const t=m.useContext(qm);return e||t||"ltr"}function Wr(e,[t,n]){return Math.min(n,Math.max(t,e))}function Um(e,t){return m.useReducer((n,r)=>t[n][r]??n,e)}var oi="ScrollArea",[$l,Bk]=Qt(oi),[Hm,Rt]=$l(oi),ql=m.forwardRef((e,t)=>{const{__scopeScrollArea:n,type:r="hover",dir:o,scrollHideDelay:a=600,...i}=e,[l,d]=m.useState(null),[f,p]=m.useState(null),[b,v]=m.useState(null),[y,C]=m.useState(null),[k,A]=m.useState(null),[j,_]=m.useState(0),[S,D]=m.useState(0),[I,M]=m.useState(!1),[F,H]=m.useState(!1),Z=He(t,Y=>d(Y)),ie=ro(o);return u.jsx(Hm,{scope:n,type:r,dir:ie,scrollHideDelay:a,scrollArea:l,viewport:f,onViewportChange:p,content:b,onContentChange:v,scrollbarX:y,onScrollbarXChange:C,scrollbarXEnabled:I,onScrollbarXEnabledChange:M,scrollbarY:k,onScrollbarYChange:A,scrollbarYEnabled:F,onScrollbarYEnabledChange:H,onCornerWidthChange:_,onCornerHeightChange:D,children:u.jsx(Le.div,{dir:ie,...i,ref:Z,style:{position:"relative","--radix-scroll-area-corner-width":j+"px","--radix-scroll-area-corner-height":S+"px",...e.style}})})});ql.displayName=oi;var Ul="ScrollAreaViewport",Hl=m.forwardRef((e,t)=>{const{__scopeScrollArea:n,children:r,nonce:o,...a}=e,i=Rt(Ul,n),l=m.useRef(null),d=He(t,l,i.onViewportChange);return u.jsxs(u.Fragment,{children:[u.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:o}),u.jsx(Le.div,{"data-radix-scroll-area-viewport":"",...a,ref:d,style:{overflowX:i.scrollbarXEnabled?"scroll":"hidden",overflowY:i.scrollbarYEnabled?"scroll":"hidden",...e.style},children:u.jsx("div",{ref:i.onContentChange,style:{minWidth:"100%",display:"table"},children:r})})]})});Hl.displayName=Ul;var Zt="ScrollAreaScrollbar",ai=m.forwardRef((e,t)=>{const{forceMount:n,...r}=e,o=Rt(Zt,e.__scopeScrollArea),{onScrollbarXEnabledChange:a,onScrollbarYEnabledChange:i}=o,l=e.orientation==="horizontal";return m.useEffect(()=>(l?a(!0):i(!0),()=>{l?a(!1):i(!1)}),[l,a,i]),o.type==="hover"?u.jsx(Km,{...r,ref:t,forceMount:n}):o.type==="scroll"?u.jsx(Vm,{...r,ref:t,forceMount:n}):o.type==="auto"?u.jsx(Kl,{...r,ref:t,forceMount:n}):o.type==="always"?u.jsx(si,{...r,ref:t}):null});ai.displayName=Zt;var Km=m.forwardRef((e,t)=>{const{forceMount:n,...r}=e,o=Rt(Zt,e.__scopeScrollArea),[a,i]=m.useState(!1);return m.useEffect(()=>{const l=o.scrollArea;let d=0;if(l){const f=()=>{window.clearTimeout(d),i(!0)},p=()=>{d=window.setTimeout(()=>i(!1),o.scrollHideDelay)};return l.addEventListener("pointerenter",f),l.addEventListener("pointerleave",p),()=>{window.clearTimeout(d),l.removeEventListener("pointerenter",f),l.removeEventListener("pointerleave",p)}}},[o.scrollArea,o.scrollHideDelay]),u.jsx(En,{present:n||a,children:u.jsx(Kl,{"data-state":a?"visible":"hidden",...r,ref:t})})}),Vm=m.forwardRef((e,t)=>{const{forceMount:n,...r}=e,o=Rt(Zt,e.__scopeScrollArea),a=e.orientation==="horizontal",i=ra(()=>d("SCROLL_END"),100),[l,d]=Um("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return m.useEffect(()=>{if(l==="idle"){const f=window.setTimeout(()=>d("HIDE"),o.scrollHideDelay);return()=>window.clearTimeout(f)}},[l,o.scrollHideDelay,d]),m.useEffect(()=>{const f=o.viewport,p=a?"scrollLeft":"scrollTop";if(f){let b=f[p];const v=()=>{const y=f[p];b!==y&&(d("SCROLL"),i()),b=y};return f.addEventListener("scroll",v),()=>f.removeEventListener("scroll",v)}},[o.viewport,a,d,i]),u.jsx(En,{present:n||l!=="hidden",children:u.jsx(si,{"data-state":l==="hidden"?"hidden":"visible",...r,ref:t,onPointerEnter:pe(e.onPointerEnter,()=>d("POINTER_ENTER")),onPointerLeave:pe(e.onPointerLeave,()=>d("POINTER_LEAVE"))})})}),Kl=m.forwardRef((e,t)=>{const n=Rt(Zt,e.__scopeScrollArea),{forceMount:r,...o}=e,[a,i]=m.useState(!1),l=e.orientation==="horizontal",d=ra(()=>{if(n.viewport){const f=n.viewport.offsetWidth<n.viewport.scrollWidth,p=n.viewport.offsetHeight<n.viewport.scrollHeight;i(l?f:p)}},10);return cr(n.viewport,d),cr(n.content,d),u.jsx(En,{present:r||a,children:u.jsx(si,{"data-state":a?"visible":"hidden",...o,ref:t})})}),si=m.forwardRef((e,t)=>{const{orientation:n="vertical",...r}=e,o=Rt(Zt,e.__scopeScrollArea),a=m.useRef(null),i=m.useRef(0),[l,d]=m.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),f=Ql(l.viewport,l.content),p={...r,sizes:l,onSizesChange:d,hasThumb:f>0&&f<1,onThumbChange:v=>a.current=v,onThumbPointerUp:()=>i.current=0,onThumbPointerDown:v=>i.current=v};function b(v,y){return Xm(v,i.current,l,y)}return n==="horizontal"?u.jsx(Wm,{...p,ref:t,onThumbPositionChange:()=>{if(o.viewport&&a.current){const v=o.viewport.scrollLeft,y=_u(v,l,o.dir);a.current.style.transform=`translate3d(${y}px, 0, 0)`}},onWheelScroll:v=>{o.viewport&&(o.viewport.scrollLeft=v)},onDragScroll:v=>{o.viewport&&(o.viewport.scrollLeft=b(v,o.dir))}}):n==="vertical"?u.jsx(Gm,{...p,ref:t,onThumbPositionChange:()=>{if(o.viewport&&a.current){const v=o.viewport.scrollTop,y=_u(v,l);a.current.style.transform=`translate3d(0, ${y}px, 0)`}},onWheelScroll:v=>{o.viewport&&(o.viewport.scrollTop=v)},onDragScroll:v=>{o.viewport&&(o.viewport.scrollTop=b(v))}}):null}),Wm=m.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,...o}=e,a=Rt(Zt,e.__scopeScrollArea),[i,l]=m.useState(),d=m.useRef(null),f=He(t,d,a.onScrollbarXChange);return m.useEffect(()=>{d.current&&l(getComputedStyle(d.current))},[d]),u.jsx(Wl,{"data-orientation":"horizontal",...o,ref:f,sizes:n,style:{bottom:0,left:a.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:a.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":na(n)+"px",...e.style},onThumbPointerDown:p=>e.onThumbPointerDown(p.x),onDragScroll:p=>e.onDragScroll(p.x),onWheelScroll:(p,b)=>{if(a.viewport){const v=a.viewport.scrollLeft+p.deltaX;e.onWheelScroll(v),Xl(v,b)&&p.preventDefault()}},onResize:()=>{d.current&&a.viewport&&i&&r({content:a.viewport.scrollWidth,viewport:a.viewport.offsetWidth,scrollbar:{size:d.current.clientWidth,paddingStart:Ko(i.paddingLeft),paddingEnd:Ko(i.paddingRight)}})}})}),Gm=m.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,...o}=e,a=Rt(Zt,e.__scopeScrollArea),[i,l]=m.useState(),d=m.useRef(null),f=He(t,d,a.onScrollbarYChange);return m.useEffect(()=>{d.current&&l(getComputedStyle(d.current))},[d]),u.jsx(Wl,{"data-orientation":"vertical",...o,ref:f,sizes:n,style:{top:0,right:a.dir==="ltr"?0:void 0,left:a.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":na(n)+"px",...e.style},onThumbPointerDown:p=>e.onThumbPointerDown(p.y),onDragScroll:p=>e.onDragScroll(p.y),onWheelScroll:(p,b)=>{if(a.viewport){const v=a.viewport.scrollTop+p.deltaY;e.onWheelScroll(v),Xl(v,b)&&p.preventDefault()}},onResize:()=>{d.current&&a.viewport&&i&&r({content:a.viewport.scrollHeight,viewport:a.viewport.offsetHeight,scrollbar:{size:d.current.clientHeight,paddingStart:Ko(i.paddingTop),paddingEnd:Ko(i.paddingBottom)}})}})}),[Ym,Vl]=$l(Zt),Wl=m.forwardRef((e,t)=>{const{__scopeScrollArea:n,sizes:r,hasThumb:o,onThumbChange:a,onThumbPointerUp:i,onThumbPointerDown:l,onThumbPositionChange:d,onDragScroll:f,onWheelScroll:p,onResize:b,...v}=e,y=Rt(Zt,n),[C,k]=m.useState(null),A=He(t,Z=>k(Z)),j=m.useRef(null),_=m.useRef(""),S=y.viewport,D=r.content-r.viewport,I=jt(p),M=jt(d),F=ra(b,10);function H(Z){if(j.current){const ie=Z.clientX-j.current.left,Y=Z.clientY-j.current.top;f({x:ie,y:Y})}}return m.useEffect(()=>{const Z=ie=>{const Y=ie.target;C?.contains(Y)&&I(ie,D)};return document.addEventListener("wheel",Z,{passive:!1}),()=>document.removeEventListener("wheel",Z,{passive:!1})},[S,C,D,I]),m.useEffect(M,[r,M]),cr(C,F),cr(y.content,F),u.jsx(Ym,{scope:n,scrollbar:C,hasThumb:o,onThumbChange:jt(a),onThumbPointerUp:jt(i),onThumbPositionChange:M,onThumbPointerDown:jt(l),children:u.jsx(Le.div,{...v,ref:A,style:{position:"absolute",...v.style},onPointerDown:pe(e.onPointerDown,Z=>{Z.button===0&&(Z.target.setPointerCapture(Z.pointerId),j.current=C.getBoundingClientRect(),_.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",y.viewport&&(y.viewport.style.scrollBehavior="auto"),H(Z))}),onPointerMove:pe(e.onPointerMove,H),onPointerUp:pe(e.onPointerUp,Z=>{const ie=Z.target;ie.hasPointerCapture(Z.pointerId)&&ie.releasePointerCapture(Z.pointerId),document.body.style.webkitUserSelect=_.current,y.viewport&&(y.viewport.style.scrollBehavior=""),j.current=null})})})}),Ho="ScrollAreaThumb",Gl=m.forwardRef((e,t)=>{const{forceMount:n,...r}=e,o=Vl(Ho,e.__scopeScrollArea);return u.jsx(En,{present:n||o.hasThumb,children:u.jsx(Qm,{ref:t,...r})})}),Qm=m.forwardRef((e,t)=>{const{__scopeScrollArea:n,style:r,...o}=e,a=Rt(Ho,n),i=Vl(Ho,n),{onThumbPositionChange:l}=i,d=He(t,b=>i.onThumbChange(b)),f=m.useRef(void 0),p=ra(()=>{f.current&&(f.current(),f.current=void 0)},100);return m.useEffect(()=>{const b=a.viewport;if(b){const v=()=>{if(p(),!f.current){const y=Jm(b,l);f.current=y,l()}};return l(),b.addEventListener("scroll",v),()=>b.removeEventListener("scroll",v)}},[a.viewport,p,l]),u.jsx(Le.div,{"data-state":i.hasThumb?"visible":"hidden",...o,ref:d,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...r},onPointerDownCapture:pe(e.onPointerDownCapture,b=>{const y=b.target.getBoundingClientRect(),C=b.clientX-y.left,k=b.clientY-y.top;i.onThumbPointerDown({x:C,y:k})}),onPointerUp:pe(e.onPointerUp,i.onThumbPointerUp)})});Gl.displayName=Ho;var ii="ScrollAreaCorner",Yl=m.forwardRef((e,t)=>{const n=Rt(ii,e.__scopeScrollArea),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?u.jsx(Zm,{...e,ref:t}):null});Yl.displayName=ii;var Zm=m.forwardRef((e,t)=>{const{__scopeScrollArea:n,...r}=e,o=Rt(ii,n),[a,i]=m.useState(0),[l,d]=m.useState(0),f=!!(a&&l);return cr(o.scrollbarX,()=>{const p=o.scrollbarX?.offsetHeight||0;o.onCornerHeightChange(p),d(p)}),cr(o.scrollbarY,()=>{const p=o.scrollbarY?.offsetWidth||0;o.onCornerWidthChange(p),i(p)}),f?u.jsx(Le.div,{...r,ref:t,style:{width:a,height:l,position:"absolute",right:o.dir==="ltr"?0:void 0,left:o.dir==="rtl"?0:void 0,bottom:0,...e.style}}):null});function Ko(e){return e?parseInt(e,10):0}function Ql(e,t){const n=e/t;return isNaN(n)?0:n}function na(e){const t=Ql(e.viewport,e.content),n=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,r=(e.scrollbar.size-n)*t;return Math.max(r,18)}function Xm(e,t,n,r="ltr"){const o=na(n),a=o/2,i=t||a,l=o-i,d=n.scrollbar.paddingStart+i,f=n.scrollbar.size-n.scrollbar.paddingEnd-l,p=n.content-n.viewport,b=r==="ltr"?[0,p]:[p*-1,0];return Zl([d,f],b)(e)}function _u(e,t,n="ltr"){const r=na(t),o=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,a=t.scrollbar.size-o,i=t.content-t.viewport,l=a-r,d=n==="ltr"?[0,i]:[i*-1,0],f=Wr(e,d);return Zl([0,i],[0,l])(f)}function Zl(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}function Xl(e,t){return e>0&&e<t}var Jm=(e,t=()=>{})=>{let n={left:e.scrollLeft,top:e.scrollTop},r=0;return function o(){const a={left:e.scrollLeft,top:e.scrollTop},i=n.left!==a.left,l=n.top!==a.top;(i||l)&&t(),n=a,r=window.requestAnimationFrame(o)}(),()=>window.cancelAnimationFrame(r)};function ra(e,t){const n=jt(e),r=m.useRef(0);return m.useEffect(()=>()=>window.clearTimeout(r.current),[]),m.useCallback(()=>{window.clearTimeout(r.current),r.current=window.setTimeout(n,t)},[n,t])}function cr(e,t){const n=jt(t);$t(()=>{let r=0;if(e){const o=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return o.observe(e),()=>{window.cancelAnimationFrame(r),o.unobserve(e)}}},[e,n])}var Jl=ql,eg=Hl,tg=Yl;const ec=m.forwardRef(({className:e,children:t,...n},r)=>u.jsxs(Jl,{ref:r,className:te("relative overflow-hidden",e),...n,children:[u.jsx(eg,{className:"h-full w-full rounded-[inherit]",children:t}),u.jsx(tc,{}),u.jsx(tg,{})]}));ec.displayName=Jl.displayName;const tc=m.forwardRef(({className:e,orientation:t="vertical",...n},r)=>u.jsx(ai,{ref:r,orientation:t,className:te("flex touch-none select-none transition-colors",t==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",t==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",e),...n,children:u.jsx(Gl,{className:"relative flex-1 rounded-full bg-border"})}));tc.displayName=ai.displayName;const ng=ti("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function It({className:e,variant:t,...n}){return u.jsx("div",{className:te(ng({variant:t}),e),...n})}/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rg=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),nc=(...e)=>e.filter((t,n,r)=>!!t&&t.trim()!==""&&r.indexOf(t)===n).join(" ").trim();/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var og={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ag=m.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:o="",children:a,iconNode:i,...l},d)=>m.createElement("svg",{ref:d,...og,width:t,height:t,stroke:e,strokeWidth:r?Number(n)*24/Number(t):n,className:nc("lucide",o),...l},[...i.map(([f,p])=>m.createElement(f,p)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ye=(e,t)=>{const n=m.forwardRef(({className:r,...o},a)=>m.createElement(ag,{ref:a,iconNode:t,className:nc(`lucide-${rg(e)}`,r),...o}));return n.displayName=`${e}`,n};/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const es=ye("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sg=ye("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ks=ye("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ig=ye("Cat",[["path",{d:"M12 5c.67 0 1.35.09 2 .26 1.78-2 5.03-2.84 6.42-2.26 1.4.58-.42 7-.42 7 .57 1.07 1 2.24 1 3.44C21 17.9 16.97 21 12 21s-9-3-9-7.56c0-1.25.5-2.4 1-3.44 0 0-1.89-6.42-.5-7 1.39-.58 4.72.23 6.5 2.23A9.04 9.04 0 0 1 12 5Z",key:"x6xyqk"}],["path",{d:"M8 14v.5",key:"1nzgdb"}],["path",{d:"M16 14v.5",key:"1lajdz"}],["path",{d:"M11.25 16.25h1.5L12 17l-.75-.75Z",key:"12kq1m"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cn=ye("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rc=ye("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ug=ye("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ui=ye("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lg=ye("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zt=ye("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Su=ye("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cg=ye("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oc=ye("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dg=ye("Code",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fg=ye("Coffee",[["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M14 2v2",key:"6buw04"}],["path",{d:"M16 8a1 1 0 0 1 1 1v8a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4V9a1 1 0 0 1 1-1h14a4 4 0 1 1 0 8h-1",key:"pwadti"}],["path",{d:"M6 2v2",key:"colzsn"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hg=ye("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ur=ye("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pg=ye("Ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _s=ye("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ss=ye("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ac=ye("FolderOpen",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Es=ye("FolderPlus",[["path",{d:"M12 10v6",key:"1bos4e"}],["path",{d:"M9 13h6",key:"1uhe8q"}],["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $n=ye("Folder",[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mg=ye("Github",[["path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4",key:"tonef"}],["path",{d:"M9 18c-4.51 2-5-2-7-2",key:"9comsn"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gg=ye("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eu=ye("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sc=ye("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bg=ye("Keyboard",[["path",{d:"M10 8h.01",key:"1r9ogq"}],["path",{d:"M12 12h.01",key:"1mp3jc"}],["path",{d:"M14 8h.01",key:"1primd"}],["path",{d:"M16 12h.01",key:"1l6xoz"}],["path",{d:"M18 8h.01",key:"emo2bl"}],["path",{d:"M6 8h.01",key:"x9i8wu"}],["path",{d:"M7 16h10",key:"wp8him"}],["path",{d:"M8 12h.01",key:"czm47f"}],["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xg=ye("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lr=ye("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ts=ye("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yg=ye("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zr=ye("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const js=ye("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const li=ye("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vg=ye("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ic=ye("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wg=ye("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ci=ye("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cg=ye("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kg=ye("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _g=ye("SlidersVertical",[["line",{x1:"4",x2:"4",y1:"21",y2:"14",key:"1p332r"}],["line",{x1:"4",x2:"4",y1:"10",y2:"3",key:"gb41h5"}],["line",{x1:"12",x2:"12",y1:"21",y2:"12",key:"hf2csr"}],["line",{x1:"12",x2:"12",y1:"8",y2:"3",key:"1kfi7u"}],["line",{x1:"20",x2:"20",y1:"21",y2:"16",key:"1lhrwl"}],["line",{x1:"20",x2:"20",y1:"12",y2:"3",key:"16vvfq"}],["line",{x1:"2",x2:"6",y1:"14",y2:"14",key:"1uebub"}],["line",{x1:"10",x2:"14",y1:"8",y2:"8",key:"1yglbp"}],["line",{x1:"18",x2:"22",y1:"16",y2:"16",key:"1jxqpz"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sg=ye("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eg=ye("Smile",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ju=ye("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uc=ye("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jg=ye("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ag=ye("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dg=ye("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const di=ye("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lc=ye("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Au=ye("Type",[["polyline",{points:"4 7 4 4 20 4 20 7",key:"1nosan"}],["line",{x1:"9",x2:"15",y1:"20",y2:"20",key:"swin9y"}],["line",{x1:"12",x2:"12",y1:"4",y2:"20",key:"1tx1rr"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Du=ye("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ng=ye("Volume2",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tg=ye("VolumeX",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mg=ye("WifiOff",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ig=ye("Wifi",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jn=ye("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pg=ye("ZapOff",[["path",{d:"M10.513 4.856 13.12 2.17a.5.5 0 0 1 .86.46l-1.377 4.317",key:"193nxd"}],["path",{d:"M15.656 10H20a1 1 0 0 1 .78 1.63l-1.72 1.773",key:"27a7lr"}],["path",{d:"M16.273 16.273 10.88 21.83a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14H4a1 1 0 0 1-.78-1.63l4.507-4.643",key:"1e0qe9"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cc=ye("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),qn=bl,Rg=gl,dc=m.forwardRef(({className:e,...t},n)=>u.jsx(Ks,{ref:n,className:te("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));dc.displayName=Ks.displayName;const kn=m.forwardRef(({className:e,children:t,...n},r)=>u.jsxs(Rg,{children:[u.jsx(dc,{}),u.jsxs(Vs,{ref:r,className:te("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...n,children:[t,u.jsxs(Ws,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[u.jsx(jn,{className:"h-4 w-4"}),u.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));kn.displayName=Vs.displayName;const br=({className:e,...t})=>u.jsx("div",{className:te("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});br.displayName="DialogHeader";const xr=({className:e,...t})=>u.jsx("div",{className:te("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});xr.displayName="DialogFooter";const yr=m.forwardRef(({className:e,...t},n)=>u.jsx(Gs,{ref:n,className:te("text-lg font-semibold leading-none tracking-tight",e),...t}));yr.displayName=Gs.displayName;const oa=m.forwardRef(({className:e,...t},n)=>u.jsx(Ys,{ref:n,className:te("text-sm text-muted-foreground",e),...t}));oa.displayName=Ys.displayName;function Fg({isOpen:e,onClose:t,currentCardId:n,currentFolderId:r,onFolderSelect:o}){const{folders:a,getFolderById:i}=Js(),[l,d]=m.useState(""),[f,p]=m.useState(r);m.useEffect(()=>{e&&(p(r),d(""))},[e,r]);const b=a.filter(j=>j.name.toLowerCase().includes(l.toLowerCase())),v=r?i(r):null,y=j=>{p(j)},C=()=>{o&&o(f),t()},k=()=>{p(r),t()},A=f!==r;return u.jsx(qn,{open:e,onOpenChange:t,children:u.jsxs(kn,{className:"sm:max-w-md",children:[u.jsx(br,{children:u.jsxs(yr,{className:"flex items-center gap-2",children:[u.jsx($n,{className:"h-5 w-5"}),"Move Card to Folder"]})}),u.jsxs("div",{className:"space-y-4",children:[v&&u.jsxs("div",{className:"flex items-center gap-2 p-3 bg-muted rounded-lg",children:[u.jsx(ac,{className:"h-4 w-4 text-muted-foreground"}),u.jsx("span",{className:"text-sm text-muted-foreground",children:"Currently in:"}),u.jsx(It,{variant:"secondary",children:v.name})]}),!v&&u.jsxs("div",{className:"flex items-center gap-2 p-3 bg-muted rounded-lg",children:[u.jsx(Eu,{className:"h-4 w-4 text-muted-foreground"}),u.jsx("span",{className:"text-sm text-muted-foreground",children:"Currently in: Root"})]}),u.jsxs("div",{className:"relative",children:[u.jsx(ci,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),u.jsx(_t,{placeholder:"Search folders...",value:l,onChange:j=>d(j.target.value),className:"pl-10"})]}),u.jsx(ec,{className:"h-64 w-full border rounded-md",children:u.jsxs("div",{className:"p-2 space-y-1",children:[u.jsxs("div",{className:te("flex items-center gap-3 p-2 rounded-md cursor-pointer transition-colors",f===null?"bg-primary text-primary-foreground":"hover:bg-muted"),onClick:()=>y(null),children:[u.jsx(Eu,{className:"h-4 w-4 flex-shrink-0"}),u.jsx("span",{className:"flex-1",children:"Root"}),f===null&&u.jsx(Cn,{className:"h-4 w-4 flex-shrink-0"}),r===null&&u.jsx(It,{variant:"outline",className:"text-xs",children:"Current"})]}),b.map(j=>u.jsxs("div",{className:te("flex items-center gap-3 p-2 rounded-md cursor-pointer transition-colors",f===j.id?"bg-primary text-primary-foreground":"hover:bg-muted",r===j.id&&"opacity-60"),onClick:()=>y(j.id),children:[u.jsx($n,{className:"h-4 w-4 flex-shrink-0"}),u.jsx("span",{className:"flex-1",children:j.name}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(It,{variant:"outline",className:"text-xs",children:j.cardIds.length}),f===j.id&&u.jsx(Cn,{className:"h-4 w-4 flex-shrink-0"}),r===j.id&&u.jsx(It,{variant:"outline",className:"text-xs",children:"Current"})]})]},j.id)),b.length===0&&l&&u.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[u.jsx($n,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),u.jsx("p",{className:"text-sm",children:"No folders found"})]})]})})]}),u.jsxs(xr,{children:[u.jsx(ke,{variant:"outline",onClick:k,children:"Cancel"}),u.jsx(ke,{onClick:C,disabled:!A,children:A?"Move Card":"No Change"})]})]})})}const fc=m.createContext(void 0);function Og({children:e}){const[t,n]=m.useState(!1),[r,o]=m.useState(null),[a,i]=m.useState(null),[l,d]=m.useState(null),f=v=>{o(v.targetCardId),i(v.currentFolderId||null),d(()=>v.onFolderApply),n(!0)},p=()=>{n(!1),o(null),i(null),d(null)},b={isOpen:t,currentCardId:r,currentFolderId:a,onFolderSelect:l,openFolderPanel:f,closeFolderPanel:p};return u.jsxs(fc.Provider,{value:b,children:[e,typeof window<"u"&&t&&r&&pr.createPortal(u.jsx(Fg,{isOpen:t,onClose:p,currentCardId:r,currentFolderId:a,onFolderSelect:l}),document.body)]})}function Lg(){const e=m.useContext(fc);if(e===void 0)throw new Error("useFolderPanel must be used within a FolderPanelProvider");return e}function aa(e){const t=e+"CollectionProvider",[n,r]=Qt(t),[o,a]=n(t,{collectionRef:{current:null},itemMap:new Map}),i=y=>{const{scope:C,children:k}=y,A=oe.useRef(null),j=oe.useRef(new Map).current;return u.jsx(o,{scope:C,itemMap:j,collectionRef:A,children:k})};i.displayName=t;const l=e+"CollectionSlot",d=oe.forwardRef((y,C)=>{const{scope:k,children:A}=y,j=a(l,k),_=He(C,j.collectionRef);return u.jsx(Kr,{ref:_,children:A})});d.displayName=l;const f=e+"CollectionItemSlot",p="data-radix-collection-item",b=oe.forwardRef((y,C)=>{const{scope:k,children:A,...j}=y,_=oe.useRef(null),S=He(C,_),D=a(f,k);return oe.useEffect(()=>(D.itemMap.set(_,{ref:_,...j}),()=>void D.itemMap.delete(_))),u.jsx(Kr,{[p]:"",ref:S,children:A})});b.displayName=f;function v(y){const C=a(e+"CollectionConsumer",y);return oe.useCallback(()=>{const A=C.collectionRef.current;if(!A)return[];const j=Array.from(A.querySelectorAll(`[${p}]`));return Array.from(C.itemMap.values()).sort((D,I)=>j.indexOf(D.ref.current)-j.indexOf(I.ref.current))},[C.collectionRef,C.itemMap])}return[{Provider:i,Slot:d,ItemSlot:b},v,r]}var ns="rovingFocusGroup.onEntryFocus",zg={bubbles:!1,cancelable:!0},sa="RovingFocusGroup",[As,hc,Bg]=aa(sa),[$g,pc]=Qt(sa,[Bg]),[qg,Ug]=$g(sa),mc=m.forwardRef((e,t)=>u.jsx(As.Provider,{scope:e.__scopeRovingFocusGroup,children:u.jsx(As.Slot,{scope:e.__scopeRovingFocusGroup,children:u.jsx(Hg,{...e,ref:t})})}));mc.displayName=sa;var Hg=m.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:o=!1,dir:a,currentTabStopId:i,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:d,onEntryFocus:f,preventScrollOnEntryFocus:p=!1,...b}=e,v=m.useRef(null),y=He(t,v),C=ro(a),[k=null,A]=Vr({prop:i,defaultProp:l,onChange:d}),[j,_]=m.useState(!1),S=jt(f),D=hc(n),I=m.useRef(!1),[M,F]=m.useState(0);return m.useEffect(()=>{const H=v.current;if(H)return H.addEventListener(ns,S),()=>H.removeEventListener(ns,S)},[S]),u.jsx(qg,{scope:n,orientation:r,dir:C,loop:o,currentTabStopId:k,onItemFocus:m.useCallback(H=>A(H),[A]),onItemShiftTab:m.useCallback(()=>_(!0),[]),onFocusableItemAdd:m.useCallback(()=>F(H=>H+1),[]),onFocusableItemRemove:m.useCallback(()=>F(H=>H-1),[]),children:u.jsx(Le.div,{tabIndex:j||M===0?-1:0,"data-orientation":r,...b,ref:y,style:{outline:"none",...e.style},onMouseDown:pe(e.onMouseDown,()=>{I.current=!0}),onFocus:pe(e.onFocus,H=>{const Z=!I.current;if(H.target===H.currentTarget&&Z&&!j){const ie=new CustomEvent(ns,zg);if(H.currentTarget.dispatchEvent(ie),!ie.defaultPrevented){const Y=D().filter(xe=>xe.focusable),Q=Y.find(xe=>xe.active),me=Y.find(xe=>xe.id===k),Ee=[Q,me,...Y].filter(Boolean).map(xe=>xe.ref.current);xc(Ee,p)}}I.current=!1}),onBlur:pe(e.onBlur,()=>_(!1))})})}),gc="RovingFocusGroupItem",bc=m.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:o=!1,tabStopId:a,...i}=e,l=lr(),d=a||l,f=Ug(gc,n),p=f.currentTabStopId===d,b=hc(n),{onFocusableItemAdd:v,onFocusableItemRemove:y}=f;return m.useEffect(()=>{if(r)return v(),()=>y()},[r,v,y]),u.jsx(As.ItemSlot,{scope:n,id:d,focusable:r,active:o,children:u.jsx(Le.span,{tabIndex:p?0:-1,"data-orientation":f.orientation,...i,ref:t,onMouseDown:pe(e.onMouseDown,C=>{r?f.onItemFocus(d):C.preventDefault()}),onFocus:pe(e.onFocus,()=>f.onItemFocus(d)),onKeyDown:pe(e.onKeyDown,C=>{if(C.key==="Tab"&&C.shiftKey){f.onItemShiftTab();return}if(C.target!==C.currentTarget)return;const k=Wg(C,f.orientation,f.dir);if(k!==void 0){if(C.metaKey||C.ctrlKey||C.altKey||C.shiftKey)return;C.preventDefault();let j=b().filter(_=>_.focusable).map(_=>_.ref.current);if(k==="last")j.reverse();else if(k==="prev"||k==="next"){k==="prev"&&j.reverse();const _=j.indexOf(C.currentTarget);j=f.loop?Gg(j,_+1):j.slice(_+1)}setTimeout(()=>xc(j))}})})})});bc.displayName=gc;var Kg={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function Vg(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function Wg(e,t,n){const r=Vg(e.key,n);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return Kg[r]}function xc(e,t=!1){const n=document.activeElement;for(const r of e)if(r===n||(r.focus({preventScroll:t}),document.activeElement!==n))return}function Gg(e,t){return e.map((n,r)=>e[(t+r)%e.length])}var Yg=mc,Qg=bc,Ds=["Enter"," "],Zg=["ArrowDown","PageUp","Home"],yc=["ArrowUp","PageDown","End"],Xg=[...Zg,...yc],Jg={ltr:[...Ds,"ArrowRight"],rtl:[...Ds,"ArrowLeft"]},e1={ltr:["ArrowLeft"],rtl:["ArrowRight"]},oo="Menu",[Gr,t1,n1]=aa(oo),[Hn,ia]=Qt(oo,[n1,ta,pc]),ua=ta(),vc=pc(),[r1,Kn]=Hn(oo),[o1,ao]=Hn(oo),wc=e=>{const{__scopeMenu:t,open:n=!1,children:r,dir:o,onOpenChange:a,modal:i=!0}=e,l=ua(t),[d,f]=m.useState(null),p=m.useRef(!1),b=jt(a),v=ro(o);return m.useEffect(()=>{const y=()=>{p.current=!0,document.addEventListener("pointerdown",C,{capture:!0,once:!0}),document.addEventListener("pointermove",C,{capture:!0,once:!0})},C=()=>p.current=!1;return document.addEventListener("keydown",y,{capture:!0}),()=>{document.removeEventListener("keydown",y,{capture:!0}),document.removeEventListener("pointerdown",C,{capture:!0}),document.removeEventListener("pointermove",C,{capture:!0})}},[]),u.jsx(jl,{...l,children:u.jsx(r1,{scope:t,open:n,onOpenChange:b,content:d,onContentChange:f,children:u.jsx(o1,{scope:t,onClose:m.useCallback(()=>b(!1),[b]),isUsingKeyboardRef:p,dir:v,modal:i,children:r})})})};wc.displayName=oo;var a1="MenuAnchor",fi=m.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e,o=ua(n);return u.jsx(vl,{...o,...r,ref:t})});fi.displayName=a1;var hi="MenuPortal",[s1,Cc]=Hn(hi,{forceMount:void 0}),kc=e=>{const{__scopeMenu:t,forceMount:n,children:r,container:o}=e,a=Kn(hi,t);return u.jsx(s1,{scope:t,forceMount:n,children:u.jsx(En,{present:n||a.open,children:u.jsx(yl,{asChild:!0,container:o,children:r})})})};kc.displayName=hi;var Pt="MenuContent",[i1,pi]=Hn(Pt),_c=m.forwardRef((e,t)=>{const n=Cc(Pt,e.__scopeMenu),{forceMount:r=n.forceMount,...o}=e,a=Kn(Pt,e.__scopeMenu),i=ao(Pt,e.__scopeMenu);return u.jsx(Gr.Provider,{scope:e.__scopeMenu,children:u.jsx(En,{present:r||a.open,children:u.jsx(Gr.Slot,{scope:e.__scopeMenu,children:i.modal?u.jsx(u1,{...o,ref:t}):u.jsx(l1,{...o,ref:t})})})})}),u1=m.forwardRef((e,t)=>{const n=Kn(Pt,e.__scopeMenu),r=m.useRef(null),o=He(t,r);return m.useEffect(()=>{const a=r.current;if(a)return El(a)},[]),u.jsx(mi,{...e,ref:o,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:pe(e.onFocusOutside,a=>a.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),l1=m.forwardRef((e,t)=>{const n=Kn(Pt,e.__scopeMenu);return u.jsx(mi,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),mi=m.forwardRef((e,t)=>{const{__scopeMenu:n,loop:r=!1,trapFocus:o,onOpenAutoFocus:a,onCloseAutoFocus:i,disableOutsidePointerEvents:l,onEntryFocus:d,onEscapeKeyDown:f,onPointerDownOutside:p,onFocusOutside:b,onInteractOutside:v,onDismiss:y,disableOutsideScroll:C,...k}=e,A=Kn(Pt,n),j=ao(Pt,n),_=ua(n),S=vc(n),D=t1(n),[I,M]=m.useState(null),F=m.useRef(null),H=He(t,F,A.onContentChange),Z=m.useRef(0),ie=m.useRef(""),Y=m.useRef(0),Q=m.useRef(null),me=m.useRef("right"),_e=m.useRef(0),Ee=C?Cl:m.Fragment,xe=C?{as:Kr,allowPinchZoom:!0}:void 0,Ne=K=>{const ge=ie.current+K,Ce=D().filter(ee=>!ee.disabled),Se=document.activeElement,we=Ce.find(ee=>ee.ref.current===Se)?.textValue,je=Ce.map(ee=>ee.textValue),Fe=w1(je,ge,we),Be=Ce.find(ee=>ee.textValue===Fe)?.ref.current;(function ee(se){ie.current=se,window.clearTimeout(Z.current),se!==""&&(Z.current=window.setTimeout(()=>ee(""),1e3))})(ge),Be&&setTimeout(()=>Be.focus())};m.useEffect(()=>()=>window.clearTimeout(Z.current),[]),wl();const Ae=m.useCallback(K=>me.current===Q.current?.side&&k1(K,Q.current?.area),[]);return u.jsx(i1,{scope:n,searchRef:ie,onItemEnter:m.useCallback(K=>{Ae(K)&&K.preventDefault()},[Ae]),onItemLeave:m.useCallback(K=>{Ae(K)||(F.current?.focus(),M(null))},[Ae]),onTriggerLeave:m.useCallback(K=>{Ae(K)&&K.preventDefault()},[Ae]),pointerGraceTimerRef:Y,onPointerGraceIntentChange:m.useCallback(K=>{Q.current=K},[]),children:u.jsx(Ee,{...xe,children:u.jsx(kl,{asChild:!0,trapped:o,onMountAutoFocus:pe(a,K=>{K.preventDefault(),F.current?.focus({preventScroll:!0})}),onUnmountAutoFocus:i,children:u.jsx(_l,{asChild:!0,disableOutsidePointerEvents:l,onEscapeKeyDown:f,onPointerDownOutside:p,onFocusOutside:b,onInteractOutside:v,onDismiss:y,children:u.jsx(Yg,{asChild:!0,...S,dir:j.dir,orientation:"vertical",loop:r,currentTabStopId:I,onCurrentTabStopIdChange:M,onEntryFocus:pe(d,K=>{j.isUsingKeyboardRef.current||K.preventDefault()}),preventScrollOnEntryFocus:!0,children:u.jsx(Sl,{role:"menu","aria-orientation":"vertical","data-state":Bc(A.open),"data-radix-menu-content":"",dir:j.dir,..._,...k,ref:H,style:{outline:"none",...k.style},onKeyDown:pe(k.onKeyDown,K=>{const Ce=K.target.closest("[data-radix-menu-content]")===K.currentTarget,Se=K.ctrlKey||K.altKey||K.metaKey,we=K.key.length===1;Ce&&(K.key==="Tab"&&K.preventDefault(),!Se&&we&&Ne(K.key));const je=F.current;if(K.target!==je||!Xg.includes(K.key))return;K.preventDefault();const Be=D().filter(ee=>!ee.disabled).map(ee=>ee.ref.current);yc.includes(K.key)&&Be.reverse(),y1(Be)}),onBlur:pe(e.onBlur,K=>{K.currentTarget.contains(K.target)||(window.clearTimeout(Z.current),ie.current="")}),onPointerMove:pe(e.onPointerMove,Yr(K=>{const ge=K.target,Ce=_e.current!==K.clientX;if(K.currentTarget.contains(ge)&&Ce){const Se=K.clientX>_e.current?"right":"left";me.current=Se,_e.current=K.clientX}}))})})})})})})});_c.displayName=Pt;var c1="MenuGroup",gi=m.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return u.jsx(Le.div,{role:"group",...r,ref:t})});gi.displayName=c1;var d1="MenuLabel",Sc=m.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return u.jsx(Le.div,{...r,ref:t})});Sc.displayName=d1;var Vo="MenuItem",Nu="menu.itemSelect",la=m.forwardRef((e,t)=>{const{disabled:n=!1,onSelect:r,...o}=e,a=m.useRef(null),i=ao(Vo,e.__scopeMenu),l=pi(Vo,e.__scopeMenu),d=He(t,a),f=m.useRef(!1),p=()=>{const b=a.current;if(!n&&b){const v=new CustomEvent(Nu,{bubbles:!0,cancelable:!0});b.addEventListener(Nu,y=>r?.(y),{once:!0}),_p(b,v),v.defaultPrevented?f.current=!1:i.onClose()}};return u.jsx(Ec,{...o,ref:d,disabled:n,onClick:pe(e.onClick,p),onPointerDown:b=>{e.onPointerDown?.(b),f.current=!0},onPointerUp:pe(e.onPointerUp,b=>{f.current||b.currentTarget?.click()}),onKeyDown:pe(e.onKeyDown,b=>{const v=l.searchRef.current!=="";n||v&&b.key===" "||Ds.includes(b.key)&&(b.currentTarget.click(),b.preventDefault())})})});la.displayName=Vo;var Ec=m.forwardRef((e,t)=>{const{__scopeMenu:n,disabled:r=!1,textValue:o,...a}=e,i=pi(Vo,n),l=vc(n),d=m.useRef(null),f=He(t,d),[p,b]=m.useState(!1),[v,y]=m.useState("");return m.useEffect(()=>{const C=d.current;C&&y((C.textContent??"").trim())},[a.children]),u.jsx(Gr.ItemSlot,{scope:n,disabled:r,textValue:o??v,children:u.jsx(Qg,{asChild:!0,...l,focusable:!r,children:u.jsx(Le.div,{role:"menuitem","data-highlighted":p?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...a,ref:f,onPointerMove:pe(e.onPointerMove,Yr(C=>{r?i.onItemLeave(C):(i.onItemEnter(C),C.defaultPrevented||C.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:pe(e.onPointerLeave,Yr(C=>i.onItemLeave(C))),onFocus:pe(e.onFocus,()=>b(!0)),onBlur:pe(e.onBlur,()=>b(!1))})})})}),f1="MenuCheckboxItem",jc=m.forwardRef((e,t)=>{const{checked:n=!1,onCheckedChange:r,...o}=e;return u.jsx(Mc,{scope:e.__scopeMenu,checked:n,children:u.jsx(la,{role:"menuitemcheckbox","aria-checked":Wo(n)?"mixed":n,...o,ref:t,"data-state":xi(n),onSelect:pe(o.onSelect,()=>r?.(Wo(n)?!0:!n),{checkForDefaultPrevented:!1})})})});jc.displayName=f1;var Ac="MenuRadioGroup",[h1,p1]=Hn(Ac,{value:void 0,onValueChange:()=>{}}),Dc=m.forwardRef((e,t)=>{const{value:n,onValueChange:r,...o}=e,a=jt(r);return u.jsx(h1,{scope:e.__scopeMenu,value:n,onValueChange:a,children:u.jsx(gi,{...o,ref:t})})});Dc.displayName=Ac;var Nc="MenuRadioItem",Tc=m.forwardRef((e,t)=>{const{value:n,...r}=e,o=p1(Nc,e.__scopeMenu),a=n===o.value;return u.jsx(Mc,{scope:e.__scopeMenu,checked:a,children:u.jsx(la,{role:"menuitemradio","aria-checked":a,...r,ref:t,"data-state":xi(a),onSelect:pe(r.onSelect,()=>o.onValueChange?.(n),{checkForDefaultPrevented:!1})})})});Tc.displayName=Nc;var bi="MenuItemIndicator",[Mc,m1]=Hn(bi,{checked:!1}),Ic=m.forwardRef((e,t)=>{const{__scopeMenu:n,forceMount:r,...o}=e,a=m1(bi,n);return u.jsx(En,{present:r||Wo(a.checked)||a.checked===!0,children:u.jsx(Le.span,{...o,ref:t,"data-state":xi(a.checked)})})});Ic.displayName=bi;var g1="MenuSeparator",Pc=m.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return u.jsx(Le.div,{role:"separator","aria-orientation":"horizontal",...r,ref:t})});Pc.displayName=g1;var b1="MenuArrow",Rc=m.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e,o=ua(n);return u.jsx(Al,{...o,...r,ref:t})});Rc.displayName=b1;var x1="MenuSub",[$k,Fc]=Hn(x1),$r="MenuSubTrigger",Oc=m.forwardRef((e,t)=>{const n=Kn($r,e.__scopeMenu),r=ao($r,e.__scopeMenu),o=Fc($r,e.__scopeMenu),a=pi($r,e.__scopeMenu),i=m.useRef(null),{pointerGraceTimerRef:l,onPointerGraceIntentChange:d}=a,f={__scopeMenu:e.__scopeMenu},p=m.useCallback(()=>{i.current&&window.clearTimeout(i.current),i.current=null},[]);return m.useEffect(()=>p,[p]),m.useEffect(()=>{const b=l.current;return()=>{window.clearTimeout(b),d(null)}},[l,d]),u.jsx(fi,{asChild:!0,...f,children:u.jsx(Ec,{id:o.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":o.contentId,"data-state":Bc(n.open),...e,ref:xl(t,o.onTriggerChange),onClick:b=>{e.onClick?.(b),!(e.disabled||b.defaultPrevented)&&(b.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:pe(e.onPointerMove,Yr(b=>{a.onItemEnter(b),!b.defaultPrevented&&!e.disabled&&!n.open&&!i.current&&(a.onPointerGraceIntentChange(null),i.current=window.setTimeout(()=>{n.onOpenChange(!0),p()},100))})),onPointerLeave:pe(e.onPointerLeave,Yr(b=>{p();const v=n.content?.getBoundingClientRect();if(v){const y=n.content?.dataset.side,C=y==="right",k=C?-5:5,A=v[C?"left":"right"],j=v[C?"right":"left"];a.onPointerGraceIntentChange({area:[{x:b.clientX+k,y:b.clientY},{x:A,y:v.top},{x:j,y:v.top},{x:j,y:v.bottom},{x:A,y:v.bottom}],side:y}),window.clearTimeout(l.current),l.current=window.setTimeout(()=>a.onPointerGraceIntentChange(null),300)}else{if(a.onTriggerLeave(b),b.defaultPrevented)return;a.onPointerGraceIntentChange(null)}})),onKeyDown:pe(e.onKeyDown,b=>{const v=a.searchRef.current!=="";e.disabled||v&&b.key===" "||Jg[r.dir].includes(b.key)&&(n.onOpenChange(!0),n.content?.focus(),b.preventDefault())})})})});Oc.displayName=$r;var Lc="MenuSubContent",zc=m.forwardRef((e,t)=>{const n=Cc(Pt,e.__scopeMenu),{forceMount:r=n.forceMount,...o}=e,a=Kn(Pt,e.__scopeMenu),i=ao(Pt,e.__scopeMenu),l=Fc(Lc,e.__scopeMenu),d=m.useRef(null),f=He(t,d);return u.jsx(Gr.Provider,{scope:e.__scopeMenu,children:u.jsx(En,{present:r||a.open,children:u.jsx(Gr.Slot,{scope:e.__scopeMenu,children:u.jsx(mi,{id:l.contentId,"aria-labelledby":l.triggerId,...o,ref:f,align:"start",side:i.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:p=>{i.isUsingKeyboardRef.current&&d.current?.focus(),p.preventDefault()},onCloseAutoFocus:p=>p.preventDefault(),onFocusOutside:pe(e.onFocusOutside,p=>{p.target!==l.trigger&&a.onOpenChange(!1)}),onEscapeKeyDown:pe(e.onEscapeKeyDown,p=>{i.onClose(),p.preventDefault()}),onKeyDown:pe(e.onKeyDown,p=>{const b=p.currentTarget.contains(p.target),v=e1[i.dir].includes(p.key);b&&v&&(a.onOpenChange(!1),l.trigger?.focus(),p.preventDefault())})})})})})});zc.displayName=Lc;function Bc(e){return e?"open":"closed"}function Wo(e){return e==="indeterminate"}function xi(e){return Wo(e)?"indeterminate":e?"checked":"unchecked"}function y1(e){const t=document.activeElement;for(const n of e)if(n===t||(n.focus(),document.activeElement!==t))return}function v1(e,t){return e.map((n,r)=>e[(t+r)%e.length])}function w1(e,t,n){const o=t.length>1&&Array.from(t).every(f=>f===t[0])?t[0]:t,a=n?e.indexOf(n):-1;let i=v1(e,Math.max(a,0));o.length===1&&(i=i.filter(f=>f!==n));const d=i.find(f=>f.toLowerCase().startsWith(o.toLowerCase()));return d!==n?d:void 0}function C1(e,t){const{x:n,y:r}=e;let o=!1;for(let a=0,i=t.length-1;a<t.length;i=a++){const l=t[a].x,d=t[a].y,f=t[i].x,p=t[i].y;d>r!=p>r&&n<(f-l)*(r-d)/(p-d)+l&&(o=!o)}return o}function k1(e,t){if(!t)return!1;const n={x:e.clientX,y:e.clientY};return C1(n,t)}function Yr(e){return t=>t.pointerType==="mouse"?e(t):void 0}var $c=wc,qc=fi,Uc=kc,Hc=_c,Kc=gi,Vc=Sc,Wc=la,Gc=jc,Yc=Dc,Qc=Tc,Zc=Ic,Xc=Pc,Jc=Rc,ed=Oc,td=zc,yi="DropdownMenu",[_1,qk]=Qt(yi,[ia]),pt=ia(),[S1,nd]=_1(yi),rd=e=>{const{__scopeDropdownMenu:t,children:n,dir:r,open:o,defaultOpen:a,onOpenChange:i,modal:l=!0}=e,d=pt(t),f=m.useRef(null),[p=!1,b]=Vr({prop:o,defaultProp:a,onChange:i});return u.jsx(S1,{scope:t,triggerId:lr(),triggerRef:f,contentId:lr(),open:p,onOpenChange:b,onOpenToggle:m.useCallback(()=>b(v=>!v),[b]),modal:l,children:u.jsx($c,{...d,open:p,onOpenChange:b,dir:r,modal:l,children:n})})};rd.displayName=yi;var od="DropdownMenuTrigger",ad=m.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,disabled:r=!1,...o}=e,a=nd(od,n),i=pt(n);return u.jsx(qc,{asChild:!0,...i,children:u.jsx(Le.button,{type:"button",id:a.triggerId,"aria-haspopup":"menu","aria-expanded":a.open,"aria-controls":a.open?a.contentId:void 0,"data-state":a.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...o,ref:xl(t,a.triggerRef),onPointerDown:pe(e.onPointerDown,l=>{!r&&l.button===0&&l.ctrlKey===!1&&(a.onOpenToggle(),a.open||l.preventDefault())}),onKeyDown:pe(e.onKeyDown,l=>{r||(["Enter"," "].includes(l.key)&&a.onOpenToggle(),l.key==="ArrowDown"&&a.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(l.key)&&l.preventDefault())})})})});ad.displayName=od;var E1="DropdownMenuPortal",sd=e=>{const{__scopeDropdownMenu:t,...n}=e,r=pt(t);return u.jsx(Uc,{...r,...n})};sd.displayName=E1;var id="DropdownMenuContent",ud=m.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,o=nd(id,n),a=pt(n),i=m.useRef(!1);return u.jsx(Hc,{id:o.contentId,"aria-labelledby":o.triggerId,...a,...r,ref:t,onCloseAutoFocus:pe(e.onCloseAutoFocus,l=>{i.current||o.triggerRef.current?.focus(),i.current=!1,l.preventDefault()}),onInteractOutside:pe(e.onInteractOutside,l=>{const d=l.detail.originalEvent,f=d.button===0&&d.ctrlKey===!0,p=d.button===2||f;(!o.modal||p)&&(i.current=!0)}),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});ud.displayName=id;var j1="DropdownMenuGroup",A1=m.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,o=pt(n);return u.jsx(Kc,{...o,...r,ref:t})});A1.displayName=j1;var D1="DropdownMenuLabel",ld=m.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,o=pt(n);return u.jsx(Vc,{...o,...r,ref:t})});ld.displayName=D1;var N1="DropdownMenuItem",cd=m.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,o=pt(n);return u.jsx(Wc,{...o,...r,ref:t})});cd.displayName=N1;var T1="DropdownMenuCheckboxItem",dd=m.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,o=pt(n);return u.jsx(Gc,{...o,...r,ref:t})});dd.displayName=T1;var M1="DropdownMenuRadioGroup",I1=m.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,o=pt(n);return u.jsx(Yc,{...o,...r,ref:t})});I1.displayName=M1;var P1="DropdownMenuRadioItem",fd=m.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,o=pt(n);return u.jsx(Qc,{...o,...r,ref:t})});fd.displayName=P1;var R1="DropdownMenuItemIndicator",hd=m.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,o=pt(n);return u.jsx(Zc,{...o,...r,ref:t})});hd.displayName=R1;var F1="DropdownMenuSeparator",pd=m.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,o=pt(n);return u.jsx(Xc,{...o,...r,ref:t})});pd.displayName=F1;var O1="DropdownMenuArrow",L1=m.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,o=pt(n);return u.jsx(Jc,{...o,...r,ref:t})});L1.displayName=O1;var z1="DropdownMenuSubTrigger",md=m.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,o=pt(n);return u.jsx(ed,{...o,...r,ref:t})});md.displayName=z1;var B1="DropdownMenuSubContent",gd=m.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,o=pt(n);return u.jsx(td,{...o,...r,ref:t,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});gd.displayName=B1;var $1=rd,q1=ad,U1=sd,bd=ud,xd=ld,yd=cd,vd=dd,wd=fd,Cd=hd,kd=pd,_d=md,Sd=gd;const H1=$1,K1=q1,V1=m.forwardRef(({className:e,inset:t,children:n,...r},o)=>u.jsxs(_d,{ref:o,className:te("flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",t&&"pl-8",e),...r,children:[n,u.jsx(ui,{className:"ml-auto"})]}));V1.displayName=_d.displayName;const W1=m.forwardRef(({className:e,...t},n)=>u.jsx(Sd,{ref:n,className:te("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...t}));W1.displayName=Sd.displayName;const Ed=m.forwardRef(({className:e,sideOffset:t=4,...n},r)=>u.jsx(U1,{children:u.jsx(bd,{ref:r,sideOffset:t,className:te("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...n})}));Ed.displayName=bd.displayName;const an=m.forwardRef(({className:e,inset:t,...n},r)=>u.jsx(yd,{ref:r,className:te("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",t&&"pl-8",e),...n}));an.displayName=yd.displayName;const G1=m.forwardRef(({className:e,children:t,checked:n,...r},o)=>u.jsxs(vd,{ref:o,className:te("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),checked:n,...r,children:[u.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:u.jsx(Cd,{children:u.jsx(Cn,{className:"h-4 w-4"})})}),t]}));G1.displayName=vd.displayName;const Y1=m.forwardRef(({className:e,children:t,...n},r)=>u.jsxs(wd,{ref:r,className:te("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...n,children:[u.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:u.jsx(Cd,{children:u.jsx(oc,{className:"h-2 w-2 fill-current"})})}),t]}));Y1.displayName=wd.displayName;const Q1=m.forwardRef(({className:e,inset:t,...n},r)=>u.jsx(xd,{ref:r,className:te("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",e),...n}));Q1.displayName=xd.displayName;const Ns=m.forwardRef(({className:e,...t},n)=>u.jsx(kd,{ref:n,className:te("-mx-1 my-1 h-px bg-muted",e),...t}));Ns.displayName=kd.displayName;var Z1=/(?:^|\s)(!\[(.+|:?)]\((\S+)(?:(?:\s+)["'](\S+)["'])?\))$/,X1=ft.create({name:"image",addOptions(){return{inline:!1,allowBase64:!1,HTMLAttributes:{}}},inline(){return this.options.inline},group(){return this.options.inline?"inline":"block"},draggable:!0,addAttributes(){return{src:{default:null},alt:{default:null},title:{default:null},width:{default:null},height:{default:null}}},parseHTML(){return[{tag:this.options.allowBase64?"img[src]":'img[src]:not([src^="data:"])'}]},renderHTML({HTMLAttributes:e}){return["img",Mp(this.options.HTMLAttributes,e)]},addCommands(){return{setImage:e=>({commands:t})=>t.insertContent({type:this.name,attrs:e})}},addInputRules(){return[Tp({find:Z1,type:this.type,getAttributes:e=>{const[,,t,n,r]=e;return{src:n,alt:t,title:r}}})]}}),J1=X1,eb=Ip,tb=Pp,nb=Rp;const Tu={};function rb(e){let t=Tu[e];if(t)return t;t=Tu[e]=[];for(let n=0;n<128;n++){const r=String.fromCharCode(n);t.push(r)}for(let n=0;n<e.length;n++){const r=e.charCodeAt(n);t[r]="%"+("0"+r.toString(16).toUpperCase()).slice(-2)}return t}function dr(e,t){typeof t!="string"&&(t=dr.defaultChars);const n=rb(t);return e.replace(/(%[a-f0-9]{2})+/gi,function(r){let o="";for(let a=0,i=r.length;a<i;a+=3){const l=parseInt(r.slice(a+1,a+3),16);if(l<128){o+=n[l];continue}if((l&224)===192&&a+3<i){const d=parseInt(r.slice(a+4,a+6),16);if((d&192)===128){const f=l<<6&1984|d&63;f<128?o+="ï¿½ï¿½":o+=String.fromCharCode(f),a+=3;continue}}if((l&240)===224&&a+6<i){const d=parseInt(r.slice(a+4,a+6),16),f=parseInt(r.slice(a+7,a+9),16);if((d&192)===128&&(f&192)===128){const p=l<<12&61440|d<<6&4032|f&63;p<2048||p>=55296&&p<=57343?o+="ï¿½ï¿½ï¿½":o+=String.fromCharCode(p),a+=6;continue}}if((l&248)===240&&a+9<i){const d=parseInt(r.slice(a+4,a+6),16),f=parseInt(r.slice(a+7,a+9),16),p=parseInt(r.slice(a+10,a+12),16);if((d&192)===128&&(f&192)===128&&(p&192)===128){let b=l<<18&1835008|d<<12&258048|f<<6&4032|p&63;b<65536||b>1114111?o+="ï¿½ï¿½ï¿½ï¿½":(b-=65536,o+=String.fromCharCode(55296+(b>>10),56320+(b&1023))),a+=9;continue}}o+="ï¿½"}return o})}dr.defaultChars=";/?:@&=+$,#";dr.componentChars="";const Mu={};function ob(e){let t=Mu[e];if(t)return t;t=Mu[e]=[];for(let n=0;n<128;n++){const r=String.fromCharCode(n);/^[0-9a-z]$/i.test(r)?t.push(r):t.push("%"+("0"+n.toString(16).toUpperCase()).slice(-2))}for(let n=0;n<e.length;n++)t[e.charCodeAt(n)]=e[n];return t}function so(e,t,n){typeof t!="string"&&(n=t,t=so.defaultChars),typeof n>"u"&&(n=!0);const r=ob(t);let o="";for(let a=0,i=e.length;a<i;a++){const l=e.charCodeAt(a);if(n&&l===37&&a+2<i&&/^[0-9a-f]{2}$/i.test(e.slice(a+1,a+3))){o+=e.slice(a,a+3),a+=2;continue}if(l<128){o+=r[l];continue}if(l>=55296&&l<=57343){if(l>=55296&&l<=56319&&a+1<i){const d=e.charCodeAt(a+1);if(d>=56320&&d<=57343){o+=encodeURIComponent(e[a]+e[a+1]),a++;continue}}o+="%EF%BF%BD";continue}o+=encodeURIComponent(e[a])}return o}so.defaultChars=";/?:@&=+$,-_.!~*'()#";so.componentChars="-_.!~*'()";function vi(e){let t="";return t+=e.protocol||"",t+=e.slashes?"//":"",t+=e.auth?e.auth+"@":"",e.hostname&&e.hostname.indexOf(":")!==-1?t+="["+e.hostname+"]":t+=e.hostname||"",t+=e.port?":"+e.port:"",t+=e.pathname||"",t+=e.search||"",t+=e.hash||"",t}function Go(){this.protocol=null,this.slashes=null,this.auth=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.pathname=null}const ab=/^([a-z0-9.+-]+:)/i,sb=/:[0-9]*$/,ib=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,ub=["<",">",'"',"`"," ","\r",`
`,"	"],lb=["{","}","|","\\","^","`"].concat(ub),cb=["'"].concat(lb),Iu=["%","/","?",";","#"].concat(cb),Pu=["/","?","#"],db=255,Ru=/^[+a-z0-9A-Z_-]{0,63}$/,fb=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,Fu={javascript:!0,"javascript:":!0},Ou={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};function wi(e,t){if(e&&e instanceof Go)return e;const n=new Go;return n.parse(e,t),n}Go.prototype.parse=function(e,t){let n,r,o,a=e;if(a=a.trim(),!t&&e.split("#").length===1){const f=ib.exec(a);if(f)return this.pathname=f[1],f[2]&&(this.search=f[2]),this}let i=ab.exec(a);if(i&&(i=i[0],n=i.toLowerCase(),this.protocol=i,a=a.substr(i.length)),(t||i||a.match(/^\/\/[^@\/]+@[^@\/]+/))&&(o=a.substr(0,2)==="//",o&&!(i&&Fu[i])&&(a=a.substr(2),this.slashes=!0)),!Fu[i]&&(o||i&&!Ou[i])){let f=-1;for(let C=0;C<Pu.length;C++)r=a.indexOf(Pu[C]),r!==-1&&(f===-1||r<f)&&(f=r);let p,b;f===-1?b=a.lastIndexOf("@"):b=a.lastIndexOf("@",f),b!==-1&&(p=a.slice(0,b),a=a.slice(b+1),this.auth=p),f=-1;for(let C=0;C<Iu.length;C++)r=a.indexOf(Iu[C]),r!==-1&&(f===-1||r<f)&&(f=r);f===-1&&(f=a.length),a[f-1]===":"&&f--;const v=a.slice(0,f);a=a.slice(f),this.parseHost(v),this.hostname=this.hostname||"";const y=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!y){const C=this.hostname.split(/\./);for(let k=0,A=C.length;k<A;k++){const j=C[k];if(j&&!j.match(Ru)){let _="";for(let S=0,D=j.length;S<D;S++)j.charCodeAt(S)>127?_+="x":_+=j[S];if(!_.match(Ru)){const S=C.slice(0,k),D=C.slice(k+1),I=j.match(fb);I&&(S.push(I[1]),D.unshift(I[2])),D.length&&(a=D.join(".")+a),this.hostname=S.join(".");break}}}}this.hostname.length>db&&(this.hostname=""),y&&(this.hostname=this.hostname.substr(1,this.hostname.length-2))}const l=a.indexOf("#");l!==-1&&(this.hash=a.substr(l),a=a.slice(0,l));const d=a.indexOf("?");return d!==-1&&(this.search=a.substr(d),a=a.slice(0,d)),a&&(this.pathname=a),Ou[n]&&this.hostname&&!this.pathname&&(this.pathname=""),this};Go.prototype.parseHost=function(e){let t=sb.exec(e);t&&(t=t[0],t!==":"&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)};const hb=Object.freeze(Object.defineProperty({__proto__:null,decode:dr,encode:so,format:vi,parse:wi},Symbol.toStringTag,{value:"Module"})),jd=/[\0-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,Ad=/[\0-\x1F\x7F-\x9F]/,pb=/[\xAD\u0600-\u0605\u061C\u06DD\u070F\u0890\u0891\u08E2\u180E\u200B-\u200F\u202A-\u202E\u2060-\u2064\u2066-\u206F\uFEFF\uFFF9-\uFFFB]|\uD804[\uDCBD\uDCCD]|\uD80D[\uDC30-\uDC3F]|\uD82F[\uDCA0-\uDCA3]|\uD834[\uDD73-\uDD7A]|\uDB40[\uDC01\uDC20-\uDC7F]/,Ci=/[!-#%-\*,-\/:;\?@\[-\]_\{\}\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061D-\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C77\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1B7D\u1B7E\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4F\u2E52-\u2E5D\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD803[\uDEAD\uDF55-\uDF59\uDF86-\uDF89]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC8\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDC4B-\uDC4F\uDC5A\uDC5B\uDC5D\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDE60-\uDE6C\uDEB9\uDF3C-\uDF3E]|\uD806[\uDC3B\uDD44-\uDD46\uDDE2\uDE3F-\uDE46\uDE9A-\uDE9C\uDE9E-\uDEA2\uDF00-\uDF09]|\uD807[\uDC41-\uDC45\uDC70\uDC71\uDEF7\uDEF8\uDF43-\uDF4F\uDFFF]|\uD809[\uDC70-\uDC74]|\uD80B[\uDFF1\uDFF2]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD81B[\uDE97-\uDE9A\uDFE2]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]|\uD83A[\uDD5E\uDD5F]/,Dd=/[\$\+<->\^`\|~\xA2-\xA6\xA8\xA9\xAC\xAE-\xB1\xB4\xB8\xD7\xF7\u02C2-\u02C5\u02D2-\u02DF\u02E5-\u02EB\u02ED\u02EF-\u02FF\u0375\u0384\u0385\u03F6\u0482\u058D-\u058F\u0606-\u0608\u060B\u060E\u060F\u06DE\u06E9\u06FD\u06FE\u07F6\u07FE\u07FF\u0888\u09F2\u09F3\u09FA\u09FB\u0AF1\u0B70\u0BF3-\u0BFA\u0C7F\u0D4F\u0D79\u0E3F\u0F01-\u0F03\u0F13\u0F15-\u0F17\u0F1A-\u0F1F\u0F34\u0F36\u0F38\u0FBE-\u0FC5\u0FC7-\u0FCC\u0FCE\u0FCF\u0FD5-\u0FD8\u109E\u109F\u1390-\u1399\u166D\u17DB\u1940\u19DE-\u19FF\u1B61-\u1B6A\u1B74-\u1B7C\u1FBD\u1FBF-\u1FC1\u1FCD-\u1FCF\u1FDD-\u1FDF\u1FED-\u1FEF\u1FFD\u1FFE\u2044\u2052\u207A-\u207C\u208A-\u208C\u20A0-\u20C0\u2100\u2101\u2103-\u2106\u2108\u2109\u2114\u2116-\u2118\u211E-\u2123\u2125\u2127\u2129\u212E\u213A\u213B\u2140-\u2144\u214A-\u214D\u214F\u218A\u218B\u2190-\u2307\u230C-\u2328\u232B-\u2426\u2440-\u244A\u249C-\u24E9\u2500-\u2767\u2794-\u27C4\u27C7-\u27E5\u27F0-\u2982\u2999-\u29D7\u29DC-\u29FB\u29FE-\u2B73\u2B76-\u2B95\u2B97-\u2BFF\u2CE5-\u2CEA\u2E50\u2E51\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFF\u3004\u3012\u3013\u3020\u3036\u3037\u303E\u303F\u309B\u309C\u3190\u3191\u3196-\u319F\u31C0-\u31E3\u31EF\u3200-\u321E\u322A-\u3247\u3250\u3260-\u327F\u328A-\u32B0\u32C0-\u33FF\u4DC0-\u4DFF\uA490-\uA4C6\uA700-\uA716\uA720\uA721\uA789\uA78A\uA828-\uA82B\uA836-\uA839\uAA77-\uAA79\uAB5B\uAB6A\uAB6B\uFB29\uFBB2-\uFBC2\uFD40-\uFD4F\uFDCF\uFDFC-\uFDFF\uFE62\uFE64-\uFE66\uFE69\uFF04\uFF0B\uFF1C-\uFF1E\uFF3E\uFF40\uFF5C\uFF5E\uFFE0-\uFFE6\uFFE8-\uFFEE\uFFFC\uFFFD]|\uD800[\uDD37-\uDD3F\uDD79-\uDD89\uDD8C-\uDD8E\uDD90-\uDD9C\uDDA0\uDDD0-\uDDFC]|\uD802[\uDC77\uDC78\uDEC8]|\uD805\uDF3F|\uD807[\uDFD5-\uDFF1]|\uD81A[\uDF3C-\uDF3F\uDF45]|\uD82F\uDC9C|\uD833[\uDF50-\uDFC3]|\uD834[\uDC00-\uDCF5\uDD00-\uDD26\uDD29-\uDD64\uDD6A-\uDD6C\uDD83\uDD84\uDD8C-\uDDA9\uDDAE-\uDDEA\uDE00-\uDE41\uDE45\uDF00-\uDF56]|\uD835[\uDEC1\uDEDB\uDEFB\uDF15\uDF35\uDF4F\uDF6F\uDF89\uDFA9\uDFC3]|\uD836[\uDC00-\uDDFF\uDE37-\uDE3A\uDE6D-\uDE74\uDE76-\uDE83\uDE85\uDE86]|\uD838[\uDD4F\uDEFF]|\uD83B[\uDCAC\uDCB0\uDD2E\uDEF0\uDEF1]|\uD83C[\uDC00-\uDC2B\uDC30-\uDC93\uDCA0-\uDCAE\uDCB1-\uDCBF\uDCC1-\uDCCF\uDCD1-\uDCF5\uDD0D-\uDDAD\uDDE6-\uDE02\uDE10-\uDE3B\uDE40-\uDE48\uDE50\uDE51\uDE60-\uDE65\uDF00-\uDFFF]|\uD83D[\uDC00-\uDED7\uDEDC-\uDEEC\uDEF0-\uDEFC\uDF00-\uDF76\uDF7B-\uDFD9\uDFE0-\uDFEB\uDFF0]|\uD83E[\uDC00-\uDC0B\uDC10-\uDC47\uDC50-\uDC59\uDC60-\uDC87\uDC90-\uDCAD\uDCB0\uDCB1\uDD00-\uDE53\uDE60-\uDE6D\uDE70-\uDE7C\uDE80-\uDE88\uDE90-\uDEBD\uDEBF-\uDEC5\uDECE-\uDEDB\uDEE0-\uDEE8\uDEF0-\uDEF8\uDF00-\uDF92\uDF94-\uDFCA]/,Nd=/[ \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000]/,mb=Object.freeze(Object.defineProperty({__proto__:null,Any:jd,Cc:Ad,Cf:pb,P:Ci,S:Dd,Z:Nd},Symbol.toStringTag,{value:"Module"})),gb=new Uint16Array('áµ<ÃÄ±ÊÒÕ»×ÙµÛÞ¢ßà à©àªà¶¡à¹­à¼à¼¦áá¨á¡ááááá¥\0\0\0\0\0\0á«áá¦á°á·á½¾â â°âââ»ââ ¤â¤â´â¹â¿ããºã¹ã¬ã£¾ã¨¨ã©±ã« ã¬®à EMabcfglmnoprstu\\bfmsÂÂÂÂÂÂ¦Â³Â¹ÃÃligè»ÃäPè»&ä¦cuteè»Ãäreve;äÄiyx}rcè»Ãä;är;ìðraveè»Ãäpha;äacr;äd;æ©ÄgpÂÂ¡on;äf;ìð¸plyFunction;æ¡ingè»ÃäÄcsÂ¾Ãr;ìðign;æildeè»Ãämlè»ÃäÐaceforsuÃ¥Ã»Ã¾ÄÄÄ¢Ä§ÄªÄcrÃªÃ²kslash;æÅ¶Ã¶Ã¸;æ«§ed;æy;äÆcrtÄÄÄause;æµnoullis;æ¬a;är;ìðpf;ìð¹eve;äcÃ²Ämpeq;æÜHOacdefhilorsuÅÅÅÆÆÆ¢ÆµÆ·ÆºÇÈÉ³É¸É¾cy;ä§PYè»Â©ä©ÆcpyÅÅ¢Åºute;äÄ;iÅ§Å¨ætalDifferentialD;æleys;æ­ÈaeioÆÆÆÆron;ädilè»Ãärc;änint;æ°ot;äÄdnÆ§Æ­illa;ä¸terDot;ä·Ã²Å¿i;ä§rcleÈDMPTÇÇÇÇot;æinus;ælus;æimes;æoÄcsÇ¢Ç¸kwiseContourIntegral;æ²eCurlyÄDQÈÈoubleQuote;æuote;æÈlnpuÈÈ¨ÉÉonÄ;eÈ¥È¦æ·;æ©´ÆgitÈ¯È¶Èºruent;æ¡nt;æ¯ourIntegral;æ®ÄfrÉÉ;æoduct;ænterClockwiseContourIntegral;æ³oss;æ¨¯cr;ìðpÄ;CÊÊæap;æÖDJSZacefiosÊ Ê¬Ê°Ê´Ê¸ËËË¡Ë¦Ì³ÒÄ;oÅ¹Ê¥trahd;æ¤cy;äcy;äcy;äÆgrsÊ¿ËËger;æ¡r;æ¡hv;æ«¤ÄayËËron;ä;älÄ;tËËæa;är;ìðÄafË«Ì§ÄcmË°Ì¢riticalÈADGTÌÌÌÌcute;ä´oÅ´ÌÌ;äbleAcute;ärave;ä ilde;äond;æferentialD;æÑ°Ì½\0\0\0ÍÍ\0Ðf;ìð»Æ;DEÍÍÍä¨ot;æqual;æbleÌCDLRUVÍ£Í²ÎÏÏ¢Ï¸ontourIntegraÃ¬È¹oÉ´Í¹\0\0Í»Â»ÍnArrow;æÄeoÎÎ¤ftÆARTÎÎÎ¡rrow;æightArrow;æeÃ¥ËngÄLRÎ«ÏeftÄARÎ³Î¹rrow;æ¸ightArrow;æºightArrow;æ¹ightÄATÏÏrrow;æee;æ¨pÉÏ©\0\0Ï¯rrow;æownArrow;æerticalBar;æ¥nÌABLRTaÐÐªÐ°ÑÑ¿Í¼rrowÆ;BUÐÐÐ¢æar;æ¤pArrow;æµreve;äeftËÐº\0Ñ\0ÑightVector;æ¥eeVector;æ¥ectorÄ;BÑÑæ½ar;æ¥ightÇÑ§\0Ñ±eeVector;æ¥ectorÄ;BÑºÑ»æar;æ¥eeÄ;AÒÒæ¤rrow;æ§ÄctÒÒr;ìðrok;äà NTacdfglmopqstuxÒ½ÓÓÓÓÓ¢Ó§Ó®ÓµÔ¡Ô¯Ô¶ÕÕÕ Õ¥G;äHè»Ãäcuteè»ÃäÆaiyÓÓÓron;ärcè»Ãä;ä­ot;är;ìðraveè»Ãäement;æÄapÓºÓ¾cr;ätyÉÔ\0\0ÔmallSquare;æ»erySmallSquare;æ«ÄgpÔ¦Ôªon;äf;ìð¼silon;äuÄaiÔ¼ÕlÄ;TÕÕæ©µilde;ælibrium;æÄciÕÕr;æ°m;æ©³a;ämlè»ÃäÄipÕªÕ¯sts;æonentialE;æÊcfiosÖÖÖÖ²×y;ä¤r;ìðlledÉÖ\0\0Ö£mallSquare;æ¼erySmallSquare;æªÍ°Öº\0Ö¿\0\0×f;ìð½All;æriertrf;æ±cÃ²×ØJTabcdfgorst×¨×¬×¯×ºØØØØØØ£Ù¬Ù²cy;äè»>ä¾mmaÄ;d×·×¸ä;äreve;äÆeiyØØØdil;ä¢rc;ä;äot;ä r;ìð;æpf;ìð¾eaterÌEFGLSTØµÙÙÙÙÙ¦qualÄ;LØ¾Ø¿æ¥ess;æullEqual;æ§reater;æª¢ess;æ·lantEqual;æ©¾ilde;æ³cr;ìð¢;æ«ÐAacfiosuÚÚÚÚÚÚªÚ¾ÛRDcy;äªÄctÚÚek;ä;äirc;ä¤r;ælbertSpace;æÇ°Ú¯\0Ú²f;æizontalLine;æÄctÛÛÃ²Ú©rok;ä¦mpÅÛÛownHumÃ°Ä¯qual;æÜEJOacdfgmnostuÛºÛ¾ÜÜÜÜÜÜ¡Ü¨ÝÝ¸ÞÞÞcy;älig;ä²cy;äcuteè»ÃäÄiyÜÜrcè»Ãä;äot;ä°r;æraveè»ÃäÆ;apÜ Ü¯Ü¿ÄcgÜ´Ü·r;äªinaryI;ælieÃ³ÏÇ´Ý\0Ý¢Ä;eÝÝæ¬ÄgrÝÝral;æ«section;æisibleÄCTÝ¬Ý²omma;æ£imes;æ¢ÆgptÝ¿ÞÞon;ä®f;ìða;äcr;æilde;ä¨Ç«Þ\0Þcy;älè»ÃäÊcfosuÞ¬Þ·Þ¼ßßÄiyÞ±Þµrc;ä´;är;ìðpf;ìðÇ£ß\0ßr;ìð¥rcy;äkcy;äÎHJacfosß¤ß¨ß¬ß±ß½à à cy;ä¥cy;äppa;äÄeyß¶ß»dil;ä¶;är;ìðpf;ìðcr;ìð¦ÖJTaceflmostà ¥à ©à ¬à¡à¡£à¦³à¦¸à§à§à¨·à©cy;äè»<ä¼Êcmnprà ·à ¼à¡à¡à¡ute;ä¹bda;äg;æªlacetrf;ær;æÆaeyà¡à¡à¡¡ron;ä½dil;ä»;äÄfsà¡¨à¥°tÔACDFRTUVarà¡¾à¢©à¢±à£ à£¦à£¼à¤¯à¥Îà¥ªÄnrà¢à¢gleBracket;æ¨rowÆ;BRà¢à¢à¢æar;æ¤ightArrow;æeiling;æoÇµà¢·\0à£bleBracket;æ¦nÇà£\0à£eeVector;æ¥¡ectorÄ;Bà£à£æar;æ¥loor;æightÄAVà£¯à£µrrow;æector;æ¥Äerà¤à¤eÆ;AVà¤à¤à¤æ£rrow;æ¤ector;æ¥iangleÆ;BEà¤¤à¤¥à¤©æ²ar;æ§qual;æ´pÆDTVà¤·à¥à¥ownVector;æ¥eeVector;æ¥ ectorÄ;Bà¥à¥æ¿ar;æ¥ectorÄ;Bà¥¥à¥¦æ¼ar;æ¥ightÃ¡ÎsÌEFGLSTà¥¾à¦à¦à¦à¦¢à¦­qualGreater;æullEqual;æ¦reater;æ¶ess;æª¡lantEqual;æ©½ilde;æ²r;ìðÄ;eà¦½à¦¾æftarrow;æidot;ä¿Ænpwà§à¨à¨gÈLRlrà§à§·à¨à¨eftÄARà§¦à§¬rrow;æµightArrow;æ·ightArrow;æ¶eftÄarÎ³à¨ightÃ¡Î¿ightÃ¡Ïf;ìðerÄLRà¨¢à¨¬eftArrow;æightArrow;æÆchtà¨¾à©à©Ã²à¡;æ°rok;ä;æªÐacefiosuà©à©à© à©·à©¼àªàªàªp;æ¤y;äÄdlà©¥à©¯iumSpace;ælintrf;æ³r;ìðnusPlus;æpf;ìðcÃ²à©¶;äÒJacefostuàª£àª§àª­à«à¬à¬à¶à¶à¶cy;äcute;äÆaeyàª´àª¹àª¾ron;ädil;ä;äÆgswà«à«°à¬ativeÆMTVà«à«à«¨ediumSpace;æhiÄcnà«¦à«Ã«à«eryThiÃ®à«tedÄGLà«¸à¬reaterGreateÃ²Ù³essLesÃ³à©Line;är;ìðÈBnptà¬¢à¬¨à¬·à¬ºreak;æ BreakingSpace;ä f;æÚ;CDEGHLNPRSTVà­à­à­ªà­¼à®¡à¯«à°à±à²à²¦à³àµ¡à¶æ«¬Äouà­à­¤ngruent;æ¢pCap;æ­oubleVerticalBar;æ¦Ælqxà®à®à®ement;æualÄ;Tà®à®æ ilde;ìâÌ¸ists;æreaterÎ;EFGLSTà®¶à®·à®½à¯à¯à¯à¯¥æ¯qual;æ±ullEqual;ìâ§Ì¸reater;ìâ«Ì¸ess;æ¹lantEqual;ìâ©¾Ì¸ilde;æµumpÅà¯²à¯½ownHump;ìâÌ¸qual;ìâÌ¸eÄfsà°à°§tTriangleÆ;BEà°à°à°¡æªar;ìâ§Ì¸qual;æ¬sÌ;EGLSTà°µà°¶à°¼à±à±à±æ®qual;æ°reater;æ¸ess;ìâªÌ¸lantEqual;ìâ©½Ì¸ilde;æ´estedÄGLà±¨à±¹reaterGreater;ìâª¢Ì¸essLess;ìâª¡Ì¸recedesÆ;ESà²à²à²æqual;ìâª¯Ì¸lantEqual;æ Äeià²«à²¹verseElement;æghtTriangleÆ;BEà³à³à³æ«ar;ìâ§Ì¸qual;æ­Äquà³à´uareSuÄbpà³¨à³¹setÄ;Eà³°à³³ìâÌ¸qual;æ¢ersetÄ;Eà´à´ìâÌ¸qual;æ£Æbcpà´à´¤àµsetÄ;Eà´à´ìââqual;æceedsÈ;ESTà´²à´³à´»àµæqual;ìâª°Ì¸lantEqual;æ¡ilde;ìâ¿Ì¸ersetÄ;Eàµàµìââqual;æildeÈ;EFTàµ®àµ¯àµµàµ¿æqual;æullEqual;æilde;æerticalBar;æ¤cr;ìð©ildeè»Ãä;äÜEacdfgmoprstuvà¶½à·à·à·à·à· à·§à·¼à¸à¸ à¸¢à¸²à¸¿à¹lig;äcuteè»ÃäÄiyà·à·rcè»Ãä;äblac;är;ìðraveè»ÃäÆaeià·®à·²à·¶cr;äga;ä©cron;äpf;ìðenCurlyÄDQà¸à¸oubleQuote;æuote;æ;æ©Äclà¸§à¸¬r;ìðªashè»ÃäiÅ¬à¸·à¸¼deè»Ãäes;æ¨·mlè»ÃäerÄBPà¹à¹ Äarà¹à¹r;æ¾acÄekà¹à¹;æet;æ´arenthesis;æÒacfhilorsà¹¿àºàºàºàºàºàºàº°à»¼rtialD;æy;är;ìði;ä¦;ä usMinus;ä±Äipàº¢àº­ncareplanÃ¥Úf;æÈ;eioàº¹àººà» à»¤æª»cedesÈ;ESTà»à»à»à»æºqual;æª¯lantEqual;æ¼ilde;æ¾me;æ³Ädpà»©à»®uct;æortionÄ;aÈ¥à»¹l;æÄcià¼à¼r;ìð«;ä¨ÈUfosà¼à¼à¼à¼OTè»"ä¢r;ìðpf;æcr;ìð¬ØBEacefhiorsuà¼¾à½à½à½ à½³à¾§à¾ªà¾­áá©á´á¾arr;æ¤Gè»Â®ä®Æcnrà½à½à½ute;äg;æ«rÄ;tà½à½æ l;æ¤Æaeyà½§à½¬à½±ron;ädil;ä;ä Ä;và½¸à½¹æerseÄEUà¾à¾Älqà¾à¾ement;æuilibrium;æpEquilibrium;æ¥¯rÂ»à½¹o;ä¡ghtÐACDFTUVaà¿à¿«à¿³á¢á¨ááÏÄnrà¿à¿gleBracket;æ©rowÆ;BLà¿à¿à¿¡æar;æ¥eftArrow;æeiling;æoÇµà¿¹\0ábleBracket;æ§nÇá\0áeeVector;æ¥ectorÄ;Bááæar;æ¥loor;æÄerá­áeÆ;AVáµá¶á¼æ¢rrow;æ¦ector;æ¥iangleÆ;BEáááæ³ar;æ§qual;æµpÆDTVá£á®á¸ownVector;æ¥eeVector;æ¥ectorÄ;Bááæ¾ar;æ¥ectorÄ;Bááæar;æ¥Äpuááf;ændImplies;æ¥°ightarrow;æÄchá¹á¼r;æ;æ±leDelayed;æ§´ÚHOacfhimoqstuá¤á±á·á½ááááá¡á§áµá»á¿ÄCcá©á®Hcy;ä©y;ä¨FTcy;ä¬cute;äÊ;aeiyáááááæª¼ron;ä dil;ärc;ä;ä¡r;ìðortÈDLRUáªá´á¾áownArrowÂ»ÐeftArrowÂ»à¢ightArrowÂ»à¿pArrow;ægma;ä£allCircle;æpf;ìðÉ²á­\0\0á°t;æareÈ;ISUá»á¼áá¯æ¡ntersection;æuÄbpáásetÄ;Eááæqual;æersetÄ;Eá¨á©æqual;ænion;æcr;ìð®ar;æÈbcmpááááÄ;sááæetÄ;Eááqual;æÄchá áeedsÈ;ESTá­á®á´á¿æ»qual;æª°lantEqual;æ½ilde;æ¿ThÃ¡à¾;æÆ;esááá£ærsetÄ;Eááæqual;æetÂ»áÖHRSacfhiorsá¾ááááá±á¶ááááORNè»ÃäADE;æ¢ÄHcáácy;äy;ä¦Äbuáá;ä;ä¤Æaeyá¥áªá¯ron;ä¤dil;ä¢;ä¢r;ìðÄeiá»áÇ²á\0áefore;æ´a;äÄcnáákSpace;ìââSpace;ældeÈ;EFTá«á¬á²á¼æ¼qual;æullEqual;æilde;æpf;ìðipleDot;æÄctáár;ìð¯rok;ä¦à«¡á·ááá¦\0á¬á±\0\0\0\0\0á¸á½á·á\0á¿áááÄcrá»áuteè»ÃärÄ;oááæcir;æ¥rÇ£á\0áy;äve;ä¬Äiyáá£rcè»Ãä;ä£blac;ä°r;ìðraveè»Ãäacr;äªÄdiáá©erÄBPááÄaráár;äacÄekáá;æet;æµarenthesis;æonÄ;Pá°á±ælus;æÄgpá»á¿on;ä²f;ìðÐADETadpsáá®á¸áÏ¨ááá³rrowÆ;BDáá á¤ar;æ¤ownArrow;æownArrow;æquilibrium;æ¥®eeÄ;Aááæ¥rrow;æ¥ownÃ¡Ï³erÄLRáá¨eftArrow;æightArrow;æiÄ;lá¹áºäon;ä¥ing;ä®cr;ìð°ilde;ä¨mlè»ÃäÒDbcdefosvá§á¬á°á³á¾ááááash;æ«ar;æ««y;äashÄ;lá»á¼æ©;æ«¦Äeráá;æÆbtyáááºar;æÄ;iáácalÈBLSTá¡á¥áªá´ar;æ£ine;ä¼eparator;æilde;æThinSpace;ær;ìðpf;ìðcr;ìð±dash;æªÊcefosá§á¬á±á¶á¼irc;ä´dge;ær;ìðpf;ìðcr;ìð²Èfiosáááár;ìð;äpf;ìðcr;ìð³ÒAIUacfosuá±áµá¹á½ááááá cy;ä¯cy;äcy;ä®cuteè»ÃäÄiyáárc;ä¶;ä«r;ìðpf;ìðcr;ìð´ml;ä¸ÐHacdefosáµá¹á¿áááá á¤cy;äcute;ä¹Äayááron;ä½;äot;ä»Ç²á\0áoWidtÃ¨à«a;är;æ¨pf;æ¤cr;ìðµà¯¡ááá\0á°á¶á¿\0\0\0\0ááá«áá­\0ááá²á¹\0á¾cuteè»Ã¡ä¡reve;äÌ;Ediuyááá¡á£á¨á­æ¾;ìâ¾Ì³;æ¿rcè»Ã¢ä¢teè»Â´Ì;ä°ligè»Ã¦ä¦Ä;rÂ²áº;ìðraveè»Ã ä ÄepááÄfpáásym;æµÃ¨áha;ä±ÄapácÄclá¤á§r;äg;æ¨¿É¤á°\0\0áÊ;adsváºá»á¿ááæ§nd;æ©;æ©lope;æ©;æ©Î;elmrszááááá¿ááæ ;æ¦¤eÂ»ásdÄ;aá¥á¦æ¡Ñ¡á°á²á´á¶á¸áºá¼á¾;æ¦¨;æ¦©;æ¦ª;æ¦«;æ¦¬;æ¦­;æ¦®;æ¦¯tÄ;vááæbÄ;dááæ¾;æ¦Äptááh;æ¢Â»Â¹arr;æ¼Ägpá£á§on;äf;ìðÎ;Eaeiopáá»á½áááá;æ©°cir;æ©¯;æd;æs;ä§roxÄ;eááÃ±áingè»Ã¥ä¥Æctyá¡á¦á¨r;ìð¶;äªmpÄ;eáá¯Ã±Êildeè»Ã£ä£mlè»Ã¤ä¤ÄciááoninÃ´É²nt;æ¨à Nabcdefiklnoprsuá­á±á°á¼ááá¸á½á á¦á ¹á¡áá¤½á¥á¥°ot;æ«­Äcrá¶ákÈcepsááááong;æpsilon;ä¶rime;æµimÄ;eááæ½q;æÅ¶á¢á¦ee;æ½edÄ;gá¬á­æeÂ»á­rkÄ;táá·brk;æ¶Äoyáá;ä±quo;æÊcmprtááá¡á¤á¨ausÄ;eÄÄptyv;æ¦°sÃ©ánoÃµÄÆahwá¯á±á³;ä²;æ¶een;æ¬r;ìðgÎcostuvwááá³ááááÆaiuáááÃ°Ý rc;æ¯pÂ»á±Ædptá¤á¨á­ot;æ¨lus;æ¨imes;æ¨É±á¹\0\0á¾cup;æ¨ar;æriangleÄduááown;æ½p;æ³plus;æ¨eÃ¥áÃ¥á­arow;æ¤Æakoá­á ¦á µÄcná²á £kÆlstáºÖ«á ozenge;æ§«riangleÈ;dlrá á á á æ´own;æ¾eft;æight;æ¸k;æ£Æ±á «\0á ³Æ²á ¯\0á ±;æ;æ4;æck;æÄeoá ¾á¡Ä;qá¡á¡ì=â¥uiv;ìâ¡â¥t;æÈptwxá¡á¡á¡§á¡¬f;ìðÄ;táá¡£omÂ»átie;æØDHUVbdhmptuvá¢á¢á¢ªá¢»á£á£á£¬á£¿á¤á¤á¤á¤¡ÈLRlrá¢á¢á¢á¢;æ;æ;æ;æÊ;DUduá¢¡á¢¢á¢¤á¢¦á¢¨æ;æ¦;æ©;æ¤;æ§ÈLRlrá¢³á¢µá¢·á¢¹;æ;æ;æ;æÎ;HLRhlrá£á£á£á£á£á£á£æ;æ¬;æ£;æ ;æ«;æ¢;æox;æ§ÈLRlrá£¤á£¦á£¨á£ª;æ;æ;æ;æÊ;DUduÚ½á£·á£¹á£»á£½;æ¥;æ¨;æ¬;æ´inus;ælus;æimes;æ ÈLRlrá¤á¤á¤á¤;æ;æ;æ;æÎ;HLRhlrá¤°á¤±á¤³á¤µá¤·á¤¹á¤»æ;æª;æ¡;æ;æ¼;æ¤;æÄevÄ£á¥barè»Â¦ä¦Èceioá¥á¥á¥á¥ r;ìð·mi;æmÄ;eáálÆ;bhá¥¨á¥©á¥«ä;æ§sub;æÅ¬á¥´á¥¾lÄ;eá¥¹á¥ºæ¢tÂ»á¥ºpÆ;EeÄ¯á¦á¦;æª®Ä;qÛÛà³¡á¦§\0á§¨á¨á¨á¨²\0á¨·á©\0\0áª´\0\0á«\0\0á¬¡á¬®á­á­\0á¯½\0á°Æcprá¦­á¦²á§ute;äÌ;abcdsá¦¿á§á§á§á§á§æ©nd;æ©rcup;æ©Äauá§á§p;æ©p;æ©ot;æ©;ìâ©ï¸Äeoá§¢á§¥t;æÃ®ÚÈaeiuá§°á§»á¨á¨Ç°á§µ\0á§¸s;æ©on;ädilè»Ã§ä§rc;äpsÄ;sá¨á¨æ©m;æ©ot;äÆdmná¨á¨ á¨¦ilè»Â¸Æ­ptyv;æ¦²tèÂ¢;eá¨­á¨®ä¢rÃ¤Æ²r;ìð Æceiá¨½á©á©y;äckÄ;má©á©æarkÂ»á©;ärÎ;Ecefmsá©á© á©¢á©«áª¤áªªáª®æ;æ§Æ;elá©©á©ªá©­äq;æeÉ¡á©´\0\0áªrrowÄlrá©¼áªeft;æºight;æ»ÊRSacdáªáªáªáªáªÂ»à½;æst;æirc;æash;ænint;æ¨id;æ«¯cir;æ§ubsÄ;uáª»áª¼æ£itÂ»áª¼Ë¬á«á«á«º\0á¬onÄ;eá«á«äºÄ;qÃÃÉ­á«\0\0á«¢aÄ;tá«á«ä¬;äÆ;flá«¨á«©á««æÃ®á eÄmxá«±á«¶entÂ»á«©eÃ³ÉÇ§á«¾\0á¬Ä;dá»á¬ot;æ©­nÃ´ÉÆfryá¬á¬á¬;ìðoÃ¤ÉèÂ©;sÅá¬r;æÄaoá¬¥á¬©rr;æµss;æÄcuá¬²á¬·r;ìð¸Äbpá¬¼á­Ä;eá­á­æ«;æ«Ä;eá­á­æ«;æ«dot;æ¯Îdelprvwá­ á­¬á­·á®á®¬á¯á¯¹arrÄlrá­¨á­ª;æ¤¸;æ¤µÉ°á­²\0\0á­µr;æc;æarrÄ;pá­¿á®æ¶;æ¤½Ì;bcdosá®á®á®á®¡á®¥á®¨æªrcap;æ©Äauá®á®p;æ©p;æ©ot;ær;æ©;ìâªï¸Èalrvá®µá®¿á¯á¯£rrÄ;má®¼á®½æ·;æ¤¼yÆevwá¯á¯á¯qÉ°á¯\0\0á¯reÃ£á­³uÃ£á­µee;æedge;æenè»Â¤ä¤earrowÄlrá¯®á¯³eftÂ»á®ightÂ»á®½eÃ¤á¯Äciá°á°oninÃ´Ç·nt;æ±lcty;æ­à¦AHabcdefhijlorstuwzá°¸á°»á°¿á±á±©á±µá²á²á²¬á²·á³»á³¿á´áµ»á¶á¶«á¶»á·á·rÃ²Îar;æ¥¥Èglrsá±á±á±á±ger;æ eth;æ¸Ã²á³hÄ;vá±á±æÂ»à¤Å«á±¡á±§arow;æ¤aÃ£ÌÄayá±®á±³ron;ä;ä´Æ;aoÌ²á±¼á²ÄgrÊ¿á²r;ætseq;æ©·Æglmá²á²á²è»Â°ä°ta;ä´ptyv;æ¦±Äirá²£á²¨sht;æ¥¿;ìð¡arÄlrá²³á²µÂ»à£Â»áÊaegsvá³Í¸á³á³á³ mÆ;osÌ¦á³á³ndÄ;sÌ¦á³uit;æ¦amma;äin;æ²Æ;ioá³§á³¨á³¸ä·deèÃ·;oá³§á³°ntimes;ænÃ¸á³·cy;äcÉ¯á´\0\0á´rn;æop;æÊlptuwá´á´á´¢áµáµlar;ä¤f;ìðÊ;empsÌá´­á´·á´½áµqÄ;dÍá´³ot;æinus;æ¸lus;æquare;æ¡blebarwedgÃ¥ÃºnÆadhá®áµáµ§ownarrowÃ³á²arpoonÄlráµ²áµ¶efÃ´á²´ighÃ´á²¶Å¢áµ¿á¶karoÃ·à½É¯á¶\0\0á¶rn;æop;æÆcotá¶á¶£á¶¦Äryá¶á¶¡;ìð¹;äl;æ§¶rok;äÄdrá¶°á¶´ot;æ±iÄ;fá¶ºá æ¿Äahá·á·rÃ²Ð©aÃ²à¾¦angle;æ¦¦Äciá·á·y;ägrarr;æ¿à¤Dacdefglmnopqrstuxá¸á¸á¸á¸¸Õ¸á¸¼á¹á¹¡á¹¾áº¥áº¯áº½á»¡á¼ªá¼·á½á½á½ÄDoá¸á´´oÃ´á²Äcsá¸á¸uteè»Ã©ä©ter;æ©®Èaioyá¸¢á¸§á¸±á¸¶ron;ärÄ;cá¸­á¸®æè»Ãªäªlon;æ;äot;äÄDrá¹á¹ot;æ;ìð¢Æ;rsá¹á¹á¹æªaveè»Ã¨ä¨Ä;dá¹á¹æªot;æªÈ;ilsá¹ªá¹«á¹²á¹´æªnters;æ§;æÄ;dá¹¹á¹ºæªot;æªÆapsáºáºáºcr;ätyÆ;sváºáºáºæetÂ»áºpÄ1;áºáº¤Ä³áº¡áº£;æ;ææÄgsáºªáº¬;äp;æÄgpáº´áº¸on;äf;ìðÆalsá»á»á»rÄ;sá»á»æl;æ§£us;æ©±iÆ;lvá»á»á»äµonÂ»á»;äµÈcsuvá»ªá»³á¼á¼£Äioá»¯á¸±rcÂ»á¸®É©á»¹\0\0á»»Ã­ÕantÄglá¼á¼trÂ»á¹essÂ»á¹ºÆaeiá¼á¼á¼ls;ä½st;ævÄ;DÈµá¼ D;æ©¸parsl;æ§¥ÄDaá¼¯á¼³ot;ærr;æ¥±Æcdiá¼¾á½á»¸r;æ¯oÃ´ÍÄahá½á½;ä·è»Ã°ä°Ämrá½á½lè»Ã«ä«o;æ¬Æcipá½¡á½¤á½§l;ä¡sÃ´Õ®Äeoá½¬á½´ctatioÃ®ÕnentialÃ¥Õ¹à§¡á¾\0á¾\0á¾¡á¾§\0\0á¿á¿\0á¿\0á¿¦á¿ªâ\0ââllingdotseÃ±á¹y;ämale;æÆilrá¾­á¾³á¿lig;èï¬É©á¾¹\0\0á¾½g;èï¬ig;èï¬;ìð£lig;èï¬lig;ìfjÆaltá¿á¿á¿¡t;æ­ig;èï¬ns;æ±of;äÇ°á¿®\0á¿³f;ìðÄakÖ¿á¿·Ä;vá¿¼á¿½æ;æ«artint;æ¨ÄaoââÄcsââÎ±ââ°â¸ââ\0âÎ²â¢â¥â§âªâ¬\0â®è»Â½ä½;æè»Â¼ä¼;æ;æ;æÆ³â´\0â¶;æ;æÊ´â¾â\0\0âè»Â¾ä¾;æ;æ5;æÆ¶â\0â;æ;æ8;æl;æwn;æ¢cr;ìð»à¢Eabcdefgijlnorstvââââ¥â°â´â°âµâºâ¿âââ¸Ìâ¾ââÄ;lÙâ;æªÆcmpâââute;äµmaÄ;dâá³ä³;æªreve;äÄiyâªâ®rc;ä;ä³ot;ä¡È;lqsØ¾Ùâ½âÆ;qsØ¾ÙâlanÃ´Ù¥È;cdlÙ¥âââ¥c;æª©otÄ;oââæªÄ;lâ¢â£æª;æªÄ;eâªâ­ìâï¸s;æªr;ìð¤Ä;gÙ³Ømel;æ·cy;äÈ;EajÙâââ;æª;æª¥;æª¤ÈEaesâââ©â´;æ©pÄ;pâ£â¤æªroxÂ»â¤Ä;qâ®â¯æªÄ;qâ®âim;æ§pf;ìðÄciââr;æmÆ;elÙ«ââ;æª;æªè>;cdlqr×®â âªâ®â³â¹Äciâ¥â§;æª§r;æ©ºot;æPar;æ¦uest;æ©¼ÊadelsââªâÙâÇ°â\0âproÃ¸âr;æ¥¸qÄlqØ¿âlesÃ³âiÃ­Ù«Äenâ£â­rtneqq;ìâ©ï¸ÃâªÔAabcefkosyâââ±âµâºâââ¯â¨â½rÃ²Î ÈilmrâââârsÃ°áfÂ»â¤ilÃ´Ú©Ädrâ â¤cy;äÆ;cwà£´â«â¯ir;æ¥;æ­ar;æirc;ä¥ÆalrââârtsÄ;uââæ¥itÂ»âlip;æ¦con;æ¹r;ìð¥sÄewâ£â©arow;æ¤¥arow;æ¤¦Êamoprâºâ¾âââ£rr;æ¿tht;æ»kÄlrââeftarrow;æ©ightarrow;æªf;ìðbar;æÆcltâ¯â´â¸r;ìð½asÃ¨â´rok;ä§Äbpââull;æhenÂ»á±à«¡â£\0âª\0â¸ââ\0ââ³\0\0â¸â¢â§â¢â¿\0ââªâ´cuteè»Ã­ä­Æ;iyÝ±â°âµrcè»Ã®ä®;ä¸Äcxâ¼â¿y;äµclè»Â¡ä¡ÄfrÎâ;ìð¦raveè»Ã¬ä¬È;inoÜ¾ââ©â®Äinâ¢â¦nt;æ¨t;æ­fin;æ§ta;æ©lig;ä³Æaopâ¾ââÆcgtâââr;ä«ÆelpÜââinÃ¥ÞarÃ´Ü h;ä±f;æ·ed;äµÊ;cfotÓ´â¬â±â½âare;æinÄ;tâ¸â¹æie;æ§doÃ´âÊ;celpÝââââ¡al;æºÄgrââerÃ³á£Ã£âarhk;æ¨rod;æ¨¼Ècgptâ¯â²â¶â»y;äon;ä¯f;ìða;ä¹uestè»Â¿ä¿Äciââr;ìð¾nÊ;EdsvÓ´âââ¡Ó³;æ¹ot;æµÄ;vâ¦â§æ´;æ³Ä;iÝ·â®lde;ä©Ç«â¸\0â¼cy;älè»Ã¯ä¯Ìcfmosuââââ¡â§âµÄiyâârc;äµ;ä¹r;ìð§ath;ä·pf;ìðÇ£â¬\0â±r;ìð¿rcy;äkcy;äÐacfghjosâââ¢â§â­â±âµâ»ppaÄ;vââäº;ä°Äeyââ dil;ä·;äºr;ìð¨reen;ä¸cy;äcy;äpf;ìðcr;ìðà®ABEHabcdefghjlmnoprstuvâ°ââââââ½âââââ¥â¹â½ââ²âââ¨âââ â Æartâ·âºâ¼rÃ²à§Ã²Îail;æ¤arr;æ¤Ä;gà¦â;æªar;æ¥¢à¥£â¥\0âª\0â±\0\0\0\0\0âµâº\0âââ\0â¹ute;äºmptyv;æ¦´raÃ®à¡bda;ä»gÆ;dlà¢ââ;æ¦Ã¥à¢;æªuoè»Â«ä«rÐ;bfhlpstà¢ââ¦â©â«â®â±âµÄ;fà¢â£s;æ¤s;æ¤Ã«âp;æ«l;æ¤¹im;æ¥³l;æ¢Æ;aeâ¿ââæª«il;æ¤Ä;sââæª­;ìâª­ï¸Æabrââârr;æ¤rk;æ²Äakâ¢â¬cÄekâ¨âª;ä»;äÄesâ±â³;æ¦lÄduâ¹â»;æ¦;æ¦Èaeuyââââron;ä¾Ädiââil;ä¼Ã¬à¢°Ã¢â©;ä»Ècqrsâ£â¦â­â½a;æ¤¶uoÄ;rà¸áÄduâ²â·har;æ¥§shar;æ¥h;æ²Ê;fgqsââà¦â³â¿æ¤tÊahlrtââ¤â·ââ¨rrowÄ;tà¢â¡aÃ©â¶arpoonÄduâ¯â´ownÂ»ÑpÂ»à¥¦eftarrows;æightÆahsââârrowÄ;sà£´à¢§arpoonÃ³à¾quigarroÃ·â°hreetimes;æÆ;qsâà¦âºlanÃ´à¦¬Ê;cdgsà¦¬ââââ¨c;æª¨otÄ;oââæ©¿Ä;rââæª;æªÄ;eâ¢â¥ìâï¸s;æªÊadegsâ³â¹â½ââpproÃ¸âot;æqÄgqââÃ´à¦gtÃ²âÃ´à¦iÃ­à¦²Æilrâà£¡âsht;æ¥¼;ìð©Ä;Eà¦â£;æªÅ¡â©â¶rÄduâ²â®Ä;là¥¥â³;æ¥ªlk;æcy;äÊ;achtà©âââârÃ²âorneÃ²á´ard;æ¥«ri;æºÄioââ¤dot;äustÄ;aâ¬â­æ°cheÂ»â­ÈEaesâ»â½ââ;æ¨pÄ;pââæªroxÂ»âÄ;qââæªÄ;qââ»im;æ¦Ðabnoptwzâ©â´â·ââ¯âââÄnrâ®â±g;æ¬r;æ½rÃ«à£gÆlmrâ¿ââeftÄarà§¦âightÃ¡à§²apsto;æ¼ightÃ¡à§½parrowÄlrâ¥â©efÃ´â­ight;æ¬Æaflâ¶â¹â½r;æ¦;ìðus;æ¨­imes;æ¨´Å¡ââst;æÃ¡áÆ;efââá ængeÂ»âarÄ;lâ¤â¥ä¨t;æ¦Êachmtâ³â¶â¼âârÃ²à¢¨orneÃ²á¶arÄ;dà¾â;æ¥­;æri;æ¿Ìachiqtââà©â¢â®â»quo;æ¹r;ìðmÆ;egà¦²âªâ¬;æª;æªÄbuâªâ³oÄ;rà¸â¹;ærok;äè<;cdhilqrà «ââ¹ââ â¥âªâ°Äciââ;æª¦r;æ©¹reÃ¥â²mes;æarr;æ¥¶uest;æ©»ÄPiâµâ¹ar;æ¦Æ;efâ à¤­á ærÄduâ â shar;æ¥har;æ¥¦Äenâ â ¡rtneqq;ìâ¨ï¸Ãâ ÜDacdefhilnopsuâ¡â¡â¢â¢â¢â¢ â¢¥â¢¨â£â£¢â£¤àªâ£³â¤Dot;æºÈclprâ¡â¡â¡£â¡½rè»Â¯ä¯Äetâ¡â¡;æÄ;eâ¡â¡æ seÂ»â¡Ä;sá»â¡¨toÈ;dluá»â¡³â¡·â¡»owÃ®ÒefÃ´à¤Ã°áker;æ®Äoyâ¢â¢mma;æ¨©;ä¼ash;æasuredangleÂ»á¦r;ìðªo;æ§Æcdnâ¢¯â¢´â£roè»ÂµäµÈ;acdá¤â¢½â£â£sÃ´á§ir;æ«°otè»Â·ÆµusÆ;bdâ£á¤â£æÄ;uá´¼â£;æ¨ªÅ£â£â£¡p;æ«Ã²âÃ°àªÄdpâ£©â£®els;æ§f;ìðÄctâ£¸â£½r;ìðposÂ»áÆ;lmâ¤â¤â¤ä¼timap;æ¸à°GLRVabcdefghijlmoprstuvwâ¥â¥â¥¾â¦â¦â§â§©â¨â¨â©â©âªâªâª¤âª¨â¬â¬â­â­¿â®®â°´â±§â±¼â³©Ägtâ¥â¥;ìâÌ¸Ä;vâ¥à¯ìâ«âÆeltâ¥â¥²â¥¶ftÄarâ¥¡â¥§rrow;æightarrow;æ;ìâÌ¸Ä;vâ¥»à±ìâªâightarrow;æÄDdâ¦â¦ash;æ¯ash;æ®Êbcnptâ¦£â¦§â¦¬â¦±â§laÂ»Ëute;äg;ìâ âÊ;Eiopà¶â¦¼â§â§â§;ìâ©°Ì¸d;ìâÌ¸s;äroÃ¸à¶urÄ;aâ§â§æ®lÄ;sâ§à¬¸Ç³â§\0â§£pè»Â à¬·mpÄ;eà¯¹à°Êaeouyâ§´â§¾â¨â¨â¨Ç°â§¹\0â§»;æ©on;ädil;ängÄ;dàµ¾â¨ot;ìâ©­Ì¸p;æ©;ä½ash;æÎ;Aadqsxà®â¨©â¨­â¨»â©â©â©rr;ærÄhrâ¨³â¨¶k;æ¤¤Ä;oá²á°ot;ìâÌ¸uiÃ¶à­£Äeiâ©â©ar;æ¤¨Ã­à®istÄ;sà® à®r;ìð«ÈEestà¯â©¦â©¹â©¼Æ;qsà®¼â©­à¯¡Æ;qsà®¼à¯â©´lanÃ´à¯¢iÃ­à¯ªÄ;rà®¶âªÂ»à®·ÆAapâªâªâªrÃ²â¥±rr;æ®ar;æ«²Æ;svà¾âªà¾Ä;dâª¡âª¢æ¼;æºcy;äÎAEadestâª·âªºâª¾â«â«â«¶â«¹rÃ²â¥¦;ìâ¦Ì¸rr;ær;æ¥È;fqsà°»â«â«£â«¯tÄarâ«â«rroÃ·â«ightarroÃ·âªÆ;qsà°»âªºâ«ªlanÃ´à±Ä;sà±â«´Â»à°¶iÃ­à±Ä;rà°µâ«¾iÄ;eà°à°¥iÃ¤à¶Äptâ¬â¬f;ìðèÂ¬;inâ¬â¬â¬¶ä¬nÈ;Edvà®â¬¤â¬¨â¬®;ìâ¹Ì¸ot;ìâµÌ¸Ç¡à®â¬³â¬µ;æ·;æ¶iÄ;và²¸â¬¼Ç¡à²¸â­â­;æ¾;æ½Æaorâ­â­£â­©rÈ;astà­»â­â­â­lleÃ¬à­»l;ìâ«½â¥;ìâÌ¸lint;æ¨Æ;ceà²â­°â­³uÃ¥à²¥Ä;cà²â­¸Ä;eà²â­½Ã±à²ÈAaitâ®â®â®â®§rÃ²â¦rrÆ;cwâ®â®â®æ;ìâ¤³Ì¸;ìâÌ¸ghtarrowÂ»â®riÄ;eà³à³Îchimpquâ®½â¯â¯â¬à­¸â¯¤â¯¯È;cerà´²â¯à´·â¯uÃ¥àµ;ìðortÉ­â¬\0\0â¯arÃ¡â­mÄ;eàµ®â¯Ä;qàµ´àµ³suÄbpâ¯«â¯­Ã¥à³¸Ã¥à´Æbcpâ¯¶â°â°È;Eesâ¯¿â°à´¢â°æ;ìâ«Ì¸etÄ;eà´â°qÄ;qà´£â°cÄ;eà´²â°Ã±à´¸È;Eesâ°¢â°£àµâ°§æ;ìâ«Ì¸etÄ;eàµâ°®qÄ;qàµ â°£Ègilrâ°½â°¿â±â±Ã¬à¯ldeè»Ã±ä±Ã§à±iangleÄlrâ±â±eftÄ;eà°â±Ã±à°¦ightÄ;eà³â±¥Ã±à³Ä;mâ±¬â±­ä½Æ;esâ±´â±µâ±¹ä£ro;æp;æÒDHadgilrsâ²â²â²â²â²£â²°â²¶â³â³£ash;æ­arr;æ¤p;ìââash;æ¬Äetâ²¨â²¬;ìâ¥â;ì>ânfin;æ§ÆAetâ²½â³â³rr;æ¤;ìâ¤âÄ;râ³â³ì<âie;ìâ´âÄAtâ³â³rr;æ¤rie;ìâµâim;ìâ¼âÆAanâ³°â³´â´rr;ærÄhrâ³ºâ³½k;æ¤£Ä;oá§á¥ear;æ¤§ááª\0\0\0\0\0\0\0\0\0\0\0\0\0â´­\0â´¸âµâµ âµ¥âµ²â¶á¬\0\0â¶â¶«\0â·â·\0â·â¸â¸«â¸¾â¹Äcsâ´±áªuteè»Ã³ä³Äiyâ´¼âµrÄ;cáªâµè»Ã´ä´;ä¾Êabiosáª âµâµÇâµlac;äv;æ¨¸old;æ¦¼lig;äÄcrâµ©âµ­ir;æ¦¿;ìð¬Í¯âµ¹\0\0âµ¼\0â¶n;äaveè»Ã²ä²;æ§Äbmâ¶à·´ar;æ¦µÈacitâ¶â¶â¶¥â¶¨rÃ²áªÄirâ¶â¶ r;æ¦¾oss;æ¦»nÃ¥à¹;æ§Æaeiâ¶±â¶µâ¶¹cr;äga;äÆcdnâ·â·Çron;ä¿;æ¦¶pf;ìð Æaelâ·â·Çr;æ¦·rp;æ¦¹Î;adiosvâ·ªâ·«â·®â¸â¸â¸â¸æ¨rÃ²áªÈ;efmâ··â·¸â¸â¸æ©rÄ;oâ·¾â·¿æ´fÂ»â·¿è»Âªäªè»Âºäºgof;æ¶r;æ©lope;æ©;æ©Æcloâ¸â¸¡â¸§Ã²â¸ashè»Ã¸ä¸l;æiÅ¬â¸¯â¸´deè»ÃµäµesÄ;aÇâ¸ºs;æ¨¶mlè»Ã¶ä¶bar;æ½à«¡â¹\0â¹½\0âºâº\0âº¢âº¹\0\0â»àº\0â¼\0\0â¼«â¾¼\0â¿rÈ;astÐâ¹§â¹²àºèÂ¶;lâ¹­â¹®ä¶leÃ¬ÐÉ©â¹¸\0\0â¹»m;æ«³;æ«½y;ä¿rÊcimptâºâºâºá¡¥âºnt;ä¥od;ä®il;æ°enk;æ±r;ìð­Æimoâº¨âº°âº´Ä;vâº­âº®ä;ämaÃ´à©¶ne;æÆ;tvâº¿â»â»ächforkÂ»á¿½;äÄauâ»â»nÄckâ»â»kÄ;hâ´â»;æÃ¶â´sÒ;abcdemstâ»³â»´á¤â»¹â»½â¼â¼â¼â¼ä«cir;æ¨£ir;æ¨¢Äouáµâ¼;æ¨¥;æ©²nè»Â±àºim;æ¨¦wo;æ¨§Æipuâ¼â¼ â¼¥ntint;æ¨f;ìð¡ndè»Â£ä£Ô;Eaceinosuà»â¼¿â½â½â½â¾â¾â¾â½¾â¾¶;æª³p;æª·uÃ¥à»Ä;cà»â½Ì;acensà»â½â½â½¦â½¨â½¾pproÃ¸â½urlyeÃ±à»Ã±à»Æaesâ½¯â½¶â½ºpprox;æª¹qq;æªµim;æ¨iÃ­à»meÄ;sâ¾àº®æ²ÆEasâ½¸â¾â½ºÃ°â½µÆdfpà»¬â¾â¾¯Æalsâ¾ â¾¥â¾ªlar;æ®ine;æurf;æÄ;tà»»â¾´Ã¯à»»rel;æ°Äciâ¿â¿r;ìð;äncsp;æÌfiopsuâ¿â¢â¿â¿¥â¿«â¿±r;ìð®pf;ìð¢rime;æcr;ìðÆaeoâ¿¸ããtÄeiâ¿¾ãrnionÃ³Ú°nt;æ¨stÄ;eããä¿Ã±á¼Ã´à¼àªABHabcdefhilmnoprstuxããããã ãã«ãã¢ã²ãããã¤ã©ãã®ã²ãã°ã·ÆartãããrÃ²á³Ã²Ïail;æ¤arÃ²á±¥ar;æ¥¤Îcdenqrtã¨ãµã¸ã¿ãããÄeuã­ã±;ìâ½Ì±te;äiÃ£á®mptyv;æ¦³gÈ;delà¿ããã;æ¦;æ¦¥Ã¥à¿uoè»Â»ä»rÖ;abcfhlpstwà¿ã¬ã¯ã·ã¹ã¼ã¾ããããp;æ¥µÄ;fà¿ ã´s;æ¤ ;æ¤³s;æ¤Ã«âÃ°â®l;æ¥im;æ¥´l;æ£;æÄaiããil;æ¤oÄ;nããæ¶alÃ³à¼Æabrã§ãªã®rÃ²á¥rk;æ³Äakã³ã½cÄekã¹ã»;ä½;äÄesãã;æ¦lÄduãã;æ¦;æ¦Èaeuyããã§ã©ron;äÄdiã¡ã¥il;äÃ¬à¿²Ã¢ãº;äÈclqsã´ã·ã½ãa;æ¤·dhar;æ¥©uoÄ;rÈÈh;æ³Æacgããà½lÈ;ipsà½¸ããánÃ¥á»arÃ´à¾©t;æ­Æilrã©á£ã®sht;æ¥½;ìð¯Äaoã·ãrÄduã½ã¿Â»Ñ»Ä;láã;æ¥¬Ä;vããä;ä±Ægnsãã¹ã¼htÌahlrstã¤ã°ããã¤ã®rrowÄ;tà¿ã­aÃ©ãarpoonÄduã»ã¿owÃ®ã¾pÂ»áeftÄahããrrowÃ³à¿ªarpoonÃ³Õightarrows;æquigarroÃ·ãhreetimes;æg;äingdotseÃ±á¼²ÆahmãããrÃ²à¿ªaÃ²Õ;æoustÄ;aããæ±cheÂ»ãmid;æ«®Èabptã²ã½ããÄnrã·ãºg;æ­r;æ¾rÃ«áÆaflãããr;æ¦;ìð£us;æ¨®imes;æ¨µÄapãã§rÄ;gã£ã¤ä©t;æ¦olint;æ¨arÃ²ã£Èachqã»ãá¼ãquo;æºr;ìðÄbuã»ãoÄ;rÈÈÆhirããã reÃ¥ã¸mes;æiÈ;eflãªáá ¡ã«æ¹tri;æ§luhar;æ¥¨;æàµ¡ãããã¬ã¸ã±\0ãºã¤\0\0ã¬ã°\0ã¨ããã­ã±ãã±\0ã\0\0ã³cute;äquÃ¯âºÔ;Eaceinpsyá­ã³ãµã¿ããããã¦ã©;æª´Ç°ãº\0ã¼;æª¸on;ä¡uÃ¥á¾Ä;dá³ãil;ärc;äÆEasããã;æª¶p;æªºim;æ©olint;æ¨iÃ­á;äotÆ;beã´áµãµæ;æ©¦ÎAacmstxãããããã£ã­rr;ærÄhrããÃ«â¨Ä;oà¨¶à¨´tè»Â§ä§i;ä»war;æ¤©mÄinã©Ã°nuÃ³Ã±t;æ¶rÄ;oã¶âìð°Èacoyãããã rp;æ¯Ähyããcy;ä;ärtÉ­ã\0\0ãiÃ¤á¤araÃ¬â¹¯è»Â­ä­Ägmã¨ã´maÆ;fvã±ã²ã²ä;äÐ;deglnprá«ãããããã¡ã¦ot;æ©ªÄ;qá±á°Ä;Eããæª;æª Ä;Eããæª;æªe;ælus;æ¨¤arr;æ¥²arÃ²á½Èaeitã¸ãããÄlsã½ãlsetmÃ©ãªhp;æ¨³parsl;æ§¤Ädlá£ãe;æ£Ä;eããæªªÄ;sã¢ã£æª¬;ìâª¬ï¸Æflpã®ã³ãtcy;äÄ;bã¸ã¹ä¯Ä;aã¾ã¿æ§r;æ¿f;ìð¤aÄdrãÐesÄ;uããæ itÂ»ãÆcsuã ã¹ãÄauã¥ã¯pÄ;sáã«;ìâï¸pÄ;sá´ãµ;ìâï¸uÄbpã¿ãÆ;esááãetÄ;eáãÃ±áÆ;esá¨á­ãetÄ;eá¨ãÃ±á®Æ;afá»ã¦Ö°rÅ¥ã«Ö±Â»á¼arÃ²áÈcemtã¹ã¾ããr;ìðtmÃ®Ã±iÃ¬ãarÃ¦á¾ÄarããrÄ;fãá¿æÄanãã­ightÄepã£ãªpsiloÃ®á» hÃ©âº¯sÂ»â¡Êbcmnpã»ãáããÒ;Edemnprsãããããã£ã¬ã±ã¶æ;æ«ot;æª½Ä;dáãot;æ«ult;æ«ÄEeã¨ãª;æ«;ælus;æª¿arr;æ¥¹Æeiuã½ããtÆ;enãããqÄ;qáãeqÄ;qã«ã¨m;æ«Äbpãã;æ«;æ«cÌ;acensá­ã¬ã²ã¹ã»ã¦pproÃ¸ãºurlyeÃ±á¾Ã±á³ÆaesãããpproÃ¸ãqÃ±ãg;æªÚ123;Edehlmnpsã©ã¬ã¯áã²ã´ãããããã¨ã­è»Â¹ä¹è»Â²ä²è»Â³ä³;æ«Äosã¹ã¼t;æª¾ub;æ«Ä;dá¢ãot;æ«sÄouããl;æb;æ«arr;æ¥»ult;æ«ÄEeã¤ã¦;æ«;ælus;æ«Æeiuã´ããtÆ;enáã¼ãqÄ;qá¢ã²eqÄ;qã§ã¤m;æ«Äbpãã;æ«;æ«ÆAanãã ã­rr;ærÄhrã¦ã¨Ã«â®Ä;oà¨«à¨©war;æ¤ªligè»Ãäà¯¡ããã áã³ã¹\0ã¾ã\0\0\0\0\0ãã\0ãã¬\0\0\0ãÉ²ã\0\0ãget;æ;ärÃ«à¹Æaeyã¦ã«ã°ron;ä¥dil;ä£;älrec;ær;ìð±Èeikoãããµã¼Ç²ã\0ãeÄ4fááaÆ;svãããä¸ym;äÄcnã¢ã²kÄasã¨ã®pproÃ¸áimÂ»á¬sÃ°áÄasãºã®Ã°árnè»Ã¾ä¾Ç¬Ìãâ§esèÃ;bdãããäÄ;aá¤ãr;æ¨±;æ¨°Æepsã¡ã£ãÃ¡â©È;bcfÒã¬ã°ã´ot;æ¶ir;æ«±Ä;oã¹ã¼ìð¥rk;æ«Ã¡ã¢rime;æ´Æaipããã¤dÃ¥áÎadempstã¡ããããããngleÊ;dlqrã°ã±ã¶ããæµownÂ»á¶»eftÄ;eâ ã¾Ã±à¤®;æightÄ;eãªãÃ±áot;æ¬inus;æ¨ºlus;æ¨¹b;æ§ime;æ¨»ezium;æ¢Æchtã²ã½ãÄryã·ã»;ìð;äcy;ärok;ä§ÄioããxÃ´á·headÄlrãã eftarroÃ·à¡ightarrowÂ»à½à¤AHabcdfghlmoprstuwãããã¤ã°ã¼ã ã ã £ã ´ã¡ã¡ã¡«ã¢©ã£ã£ã£ªã£¶rÃ²Ï­ar;æ¥£Äcrãã¢uteè»ÃºäºÃ²árÇ£ãª\0ã­y;äve;ä­Äiyãµãºrcè»Ã»ä»;äÆabhã ã ã rÃ²á­lac;ä±aÃ²áÄirã ã sht;æ¥¾;ìð²raveè»Ã¹ä¹Å¡ã §ã ±rÄlrã ¬ã ®Â»à¥Â»álk;æÄctã ¹ã¡É¯ã ¿\0\0ã¡rnÄ;eã¡ã¡ærÂ»ã¡op;æri;æ¸Äalã¡ã¡cr;ä«è»Â¨ÍÄgpã¡¢ã¡¦on;ä³f;ìð¦Ìadhlsuáã¡¸ã¡½á²ã¢ã¢ ownÃ¡á³arpoonÄlrã¢ã¢efÃ´ã ­ighÃ´ã ¯iÆ;hlã¢ã¢ã¢äÂ»áºonÂ»ã¢parrows;æÆcitã¢°ã£ã£É¯ã¢¶\0\0ã£rnÄ;eã¢¼ã¢½ærÂ»ã¢½op;æng;ä¯ri;æ¹cr;ìðÆdirã£ã£ã£¢ot;æ°lde;ä©iÄ;fã°ã£¨Â»á Äamã£¯ã£²rÃ²ã¢¨lè»Ã¼ä¼angle;æ¦§ÞABDacdeflnoprszã¤ã¤ã¤©ã¤­ã¦µã¦¸ã¦½ã§ã§¤ã§¨ã§³ã§¹ã§½ã¨ã¨ rÃ²Ï·arÄ;vã¤¦ã¤§æ«¨;æ«©asÃ¨Ï¡Änrã¤²ã¤·grt;æ¦Îeknprstã£ã¥ã¥ã¥ã¥ã¥¤ã¦appÃ¡âothinÃ§áºÆhirã«â»ã¥opÃ´â¾µÄ;há·ã¥¢Ã¯ãÄiuã¥©ã¥­gmÃ¡ã³Äbpã¥²ã¦setneqÄ;qã¥½ã¦ìâï¸;ìâ«ï¸setneqÄ;qã¦ã¦ìâï¸;ìâ«ï¸Ährã¦ã¦etÃ¡ãiangleÄlrã¦ªã¦¯eftÂ»à¤¥ightÂ»áy;ä²ashÂ»á¶Æelrã§ã§ã§Æ;beâ·ªã§ã§ar;æ»q;ælip;æ®Äbtã§á¨aÃ²á©r;ìð³trÃ©ã¦®suÄbpã§¯ã§±Â»à´Â»àµpf;ìð§roÃ°à»»trÃ©ã¦´Äcuã¨ã¨r;ìðÄbpã¨ã¨nÄEeã¦ã¨Â»ã¥¾nÄEeã¦ã¨Â»ã¦igzag;æ¦Îcefoprsã¨¶ã¨»ã©ã©ã©ã©¡ã©ªirc;äµÄdiã©ã©Äbgã©ã©ar;æ©eÄ;qáºã©;æerp;ær;ìð´pf;ìð¨Ä;eá¹ã©¦atÃ¨á¹cr;ìðà«£áãª\0ãª\0ãªãª\0\0ãªãª¨ãª«ãª¯\0\0ã«ã«\0ã«áátrÃ©ár;ìðµÄAaãªãªrÃ²ÏrÃ²à§¶;ä¾ÄAaãª¡ãª¤rÃ²Î¸rÃ²à§«aÃ°âis;æ»Ædptá¤ãªµãª¾Äflãªºá©;ìð©imÃ¥á²ÄAaã«ã«rÃ²ÏrÃ²à¨Äcqã«á¸r;ìðÄptáã«rÃ©áÐacefiosuã«°ã«½ã¬ã¬ã¬ã¬ã¬ã¬¡cÄuyã«¶ã«»teè»Ã½ä½;äÄiyã¬ã¬rc;ä·;änè»Â¥ä¥r;ìð¶cy;äpf;ìðªcr;ìðÄcmã¬¦ã¬©y;älè»Ã¿ä¿Ôacdefhioswã­ã­ã­ã­ã­¤ã­©ã­­ã­´ã­ºã®cute;äºÄayã­ã­ron;ä¾;ä·ot;ä¼Äetã­ã­¡trÃ¦áa;ä¶r;ìð·cy;ä¶grarr;æpf;ìð«cr;ìðÄjnã®ã®;æj;æ'.split("").map(e=>e.charCodeAt(0))),bb=new Uint16Array("Èaglq	\x1BÉ­\0\0p;ä¦os;ä§t;ä¾t;ä¼uot;ä¢".split("").map(e=>e.charCodeAt(0)));var rs;const xb=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]),yb=(rs=String.fromCodePoint)!==null&&rs!==void 0?rs:function(e){let t="";return e>65535&&(e-=65536,t+=String.fromCharCode(e>>>10&1023|55296),e=56320|e&1023),t+=String.fromCharCode(e),t};function vb(e){var t;return e>=55296&&e<=57343||e>1114111?65533:(t=xb.get(e))!==null&&t!==void 0?t:e}var it;(function(e){e[e.NUM=35]="NUM",e[e.SEMI=59]="SEMI",e[e.EQUALS=61]="EQUALS",e[e.ZERO=48]="ZERO",e[e.NINE=57]="NINE",e[e.LOWER_A=97]="LOWER_A",e[e.LOWER_F=102]="LOWER_F",e[e.LOWER_X=120]="LOWER_X",e[e.LOWER_Z=122]="LOWER_Z",e[e.UPPER_A=65]="UPPER_A",e[e.UPPER_F=70]="UPPER_F",e[e.UPPER_Z=90]="UPPER_Z"})(it||(it={}));const wb=32;var wn;(function(e){e[e.VALUE_LENGTH=49152]="VALUE_LENGTH",e[e.BRANCH_LENGTH=16256]="BRANCH_LENGTH",e[e.JUMP_TABLE=127]="JUMP_TABLE"})(wn||(wn={}));function Ts(e){return e>=it.ZERO&&e<=it.NINE}function Cb(e){return e>=it.UPPER_A&&e<=it.UPPER_F||e>=it.LOWER_A&&e<=it.LOWER_F}function kb(e){return e>=it.UPPER_A&&e<=it.UPPER_Z||e>=it.LOWER_A&&e<=it.LOWER_Z||Ts(e)}function _b(e){return e===it.EQUALS||kb(e)}var st;(function(e){e[e.EntityStart=0]="EntityStart",e[e.NumericStart=1]="NumericStart",e[e.NumericDecimal=2]="NumericDecimal",e[e.NumericHex=3]="NumericHex",e[e.NamedEntity=4]="NamedEntity"})(st||(st={}));var vn;(function(e){e[e.Legacy=0]="Legacy",e[e.Strict=1]="Strict",e[e.Attribute=2]="Attribute"})(vn||(vn={}));class Sb{constructor(t,n,r){this.decodeTree=t,this.emitCodePoint=n,this.errors=r,this.state=st.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=vn.Strict}startEntity(t){this.decodeMode=t,this.state=st.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1}write(t,n){switch(this.state){case st.EntityStart:return t.charCodeAt(n)===it.NUM?(this.state=st.NumericStart,this.consumed+=1,this.stateNumericStart(t,n+1)):(this.state=st.NamedEntity,this.stateNamedEntity(t,n));case st.NumericStart:return this.stateNumericStart(t,n);case st.NumericDecimal:return this.stateNumericDecimal(t,n);case st.NumericHex:return this.stateNumericHex(t,n);case st.NamedEntity:return this.stateNamedEntity(t,n)}}stateNumericStart(t,n){return n>=t.length?-1:(t.charCodeAt(n)|wb)===it.LOWER_X?(this.state=st.NumericHex,this.consumed+=1,this.stateNumericHex(t,n+1)):(this.state=st.NumericDecimal,this.stateNumericDecimal(t,n))}addToNumericResult(t,n,r,o){if(n!==r){const a=r-n;this.result=this.result*Math.pow(o,a)+parseInt(t.substr(n,a),o),this.consumed+=a}}stateNumericHex(t,n){const r=n;for(;n<t.length;){const o=t.charCodeAt(n);if(Ts(o)||Cb(o))n+=1;else return this.addToNumericResult(t,r,n,16),this.emitNumericEntity(o,3)}return this.addToNumericResult(t,r,n,16),-1}stateNumericDecimal(t,n){const r=n;for(;n<t.length;){const o=t.charCodeAt(n);if(Ts(o))n+=1;else return this.addToNumericResult(t,r,n,10),this.emitNumericEntity(o,2)}return this.addToNumericResult(t,r,n,10),-1}emitNumericEntity(t,n){var r;if(this.consumed<=n)return(r=this.errors)===null||r===void 0||r.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(t===it.SEMI)this.consumed+=1;else if(this.decodeMode===vn.Strict)return 0;return this.emitCodePoint(vb(this.result),this.consumed),this.errors&&(t!==it.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed}stateNamedEntity(t,n){const{decodeTree:r}=this;let o=r[this.treeIndex],a=(o&wn.VALUE_LENGTH)>>14;for(;n<t.length;n++,this.excess++){const i=t.charCodeAt(n);if(this.treeIndex=Eb(r,o,this.treeIndex+Math.max(1,a),i),this.treeIndex<0)return this.result===0||this.decodeMode===vn.Attribute&&(a===0||_b(i))?0:this.emitNotTerminatedNamedEntity();if(o=r[this.treeIndex],a=(o&wn.VALUE_LENGTH)>>14,a!==0){if(i===it.SEMI)return this.emitNamedEntityData(this.treeIndex,a,this.consumed+this.excess);this.decodeMode!==vn.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1}emitNotTerminatedNamedEntity(){var t;const{result:n,decodeTree:r}=this,o=(r[n]&wn.VALUE_LENGTH)>>14;return this.emitNamedEntityData(n,o,this.consumed),(t=this.errors)===null||t===void 0||t.missingSemicolonAfterCharacterReference(),this.consumed}emitNamedEntityData(t,n,r){const{decodeTree:o}=this;return this.emitCodePoint(n===1?o[t]&~wn.VALUE_LENGTH:o[t+1],r),n===3&&this.emitCodePoint(o[t+2],r),r}end(){var t;switch(this.state){case st.NamedEntity:return this.result!==0&&(this.decodeMode!==vn.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0;case st.NumericDecimal:return this.emitNumericEntity(0,2);case st.NumericHex:return this.emitNumericEntity(0,3);case st.NumericStart:return(t=this.errors)===null||t===void 0||t.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case st.EntityStart:return 0}}}function Td(e){let t="";const n=new Sb(e,r=>t+=yb(r));return function(o,a){let i=0,l=0;for(;(l=o.indexOf("&",l))>=0;){t+=o.slice(i,l),n.startEntity(a);const f=n.write(o,l+1);if(f<0){i=l+n.end();break}i=l+f,l=f===0?i+1:i}const d=t+o.slice(i);return t="",d}}function Eb(e,t,n,r){const o=(t&wn.BRANCH_LENGTH)>>7,a=t&wn.JUMP_TABLE;if(o===0)return a!==0&&r===a?n:-1;if(a){const d=r-a;return d<0||d>=o?-1:e[n+d]-1}let i=n,l=i+o-1;for(;i<=l;){const d=i+l>>>1,f=e[d];if(f<r)i=d+1;else if(f>r)l=d-1;else return e[d+o]}return-1}const jb=Td(gb);Td(bb);function Md(e,t=vn.Legacy){return jb(e,t)}function Ab(e){return Object.prototype.toString.call(e)}function ki(e){return Ab(e)==="[object String]"}const Db=Object.prototype.hasOwnProperty;function Nb(e,t){return Db.call(e,t)}function ca(e){return Array.prototype.slice.call(arguments,1).forEach(function(n){if(n){if(typeof n!="object")throw new TypeError(n+"must be object");Object.keys(n).forEach(function(r){e[r]=n[r]})}}),e}function Id(e,t,n){return[].concat(e.slice(0,t),n,e.slice(t+1))}function _i(e){return!(e>=55296&&e<=57343||e>=64976&&e<=65007||(e&65535)===65535||(e&65535)===65534||e>=0&&e<=8||e===11||e>=14&&e<=31||e>=127&&e<=159||e>1114111)}function Yo(e){if(e>65535){e-=65536;const t=55296+(e>>10),n=56320+(e&1023);return String.fromCharCode(t,n)}return String.fromCharCode(e)}const Pd=/\\([!"#$%&'()*+,\-./:;<=>?@[\\\]^_`{|}~])/g,Tb=/&([a-z#][a-z0-9]{1,31});/gi,Mb=new RegExp(Pd.source+"|"+Tb.source,"gi"),Ib=/^#((?:x[a-f0-9]{1,8}|[0-9]{1,8}))$/i;function Pb(e,t){if(t.charCodeAt(0)===35&&Ib.test(t)){const r=t[1].toLowerCase()==="x"?parseInt(t.slice(2),16):parseInt(t.slice(1),10);return _i(r)?Yo(r):e}const n=Md(e);return n!==e?n:e}function Rb(e){return e.indexOf("\\")<0?e:e.replace(Pd,"$1")}function fr(e){return e.indexOf("\\")<0&&e.indexOf("&")<0?e:e.replace(Mb,function(t,n,r){return n||Pb(t,r)})}const Fb=/[&<>"]/,Ob=/[&<>"]/g,Lb={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;"};function zb(e){return Lb[e]}function _n(e){return Fb.test(e)?e.replace(Ob,zb):e}const Bb=/[.?*+^$[\]\\(){}|-]/g;function $b(e){return e.replace(Bb,"\\$&")}function Ge(e){switch(e){case 9:case 32:return!0}return!1}function Qr(e){if(e>=8192&&e<=8202)return!0;switch(e){case 9:case 10:case 11:case 12:case 13:case 32:case 160:case 5760:case 8239:case 8287:case 12288:return!0}return!1}function Zr(e){return Ci.test(e)||Dd.test(e)}function Xr(e){switch(e){case 33:case 34:case 35:case 36:case 37:case 38:case 39:case 40:case 41:case 42:case 43:case 44:case 45:case 46:case 47:case 58:case 59:case 60:case 61:case 62:case 63:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 124:case 125:case 126:return!0;default:return!1}}function da(e){return e=e.trim().replace(/\s+/g," "),"áº".toLowerCase()==="á¹¾"&&(e=e.replace(/áº/g,"Ã")),e.toLowerCase().toUpperCase()}const qb={mdurl:hb,ucmicro:mb},Ub=Object.freeze(Object.defineProperty({__proto__:null,arrayReplaceAt:Id,assign:ca,escapeHtml:_n,escapeRE:$b,fromCodePoint:Yo,has:Nb,isMdAsciiPunct:Xr,isPunctChar:Zr,isSpace:Ge,isString:ki,isValidEntityCode:_i,isWhiteSpace:Qr,lib:qb,normalizeReference:da,unescapeAll:fr,unescapeMd:Rb},Symbol.toStringTag,{value:"Module"}));function Hb(e,t,n){let r,o,a,i;const l=e.posMax,d=e.pos;for(e.pos=t+1,r=1;e.pos<l;){if(a=e.src.charCodeAt(e.pos),a===93&&(r--,r===0)){o=!0;break}if(i=e.pos,e.md.inline.skipToken(e),a===91){if(i===e.pos-1)r++;else if(n)return e.pos=d,-1}}let f=-1;return o&&(f=e.pos),e.pos=d,f}function Kb(e,t,n){let r,o=t;const a={ok:!1,pos:0,str:""};if(e.charCodeAt(o)===60){for(o++;o<n;){if(r=e.charCodeAt(o),r===10||r===60)return a;if(r===62)return a.pos=o+1,a.str=fr(e.slice(t+1,o)),a.ok=!0,a;if(r===92&&o+1<n){o+=2;continue}o++}return a}let i=0;for(;o<n&&(r=e.charCodeAt(o),!(r===32||r<32||r===127));){if(r===92&&o+1<n){if(e.charCodeAt(o+1)===32)break;o+=2;continue}if(r===40&&(i++,i>32))return a;if(r===41){if(i===0)break;i--}o++}return t===o||i!==0||(a.str=fr(e.slice(t,o)),a.pos=o,a.ok=!0),a}function Vb(e,t,n,r){let o,a=t;const i={ok:!1,can_continue:!1,pos:0,str:"",marker:0};if(r)i.str=r.str,i.marker=r.marker;else{if(a>=n)return i;let l=e.charCodeAt(a);if(l!==34&&l!==39&&l!==40)return i;t++,a++,l===40&&(l=41),i.marker=l}for(;a<n;){if(o=e.charCodeAt(a),o===i.marker)return i.pos=a+1,i.str+=fr(e.slice(t,a)),i.ok=!0,i;if(o===40&&i.marker===41)return i;o===92&&a+1<n&&a++,a++}return i.can_continue=!0,i.str+=fr(e.slice(t,a)),i}const Wb=Object.freeze(Object.defineProperty({__proto__:null,parseLinkDestination:Kb,parseLinkLabel:Hb,parseLinkTitle:Vb},Symbol.toStringTag,{value:"Module"})),Xt={};Xt.code_inline=function(e,t,n,r,o){const a=e[t];return"<code"+o.renderAttrs(a)+">"+_n(a.content)+"</code>"};Xt.code_block=function(e,t,n,r,o){const a=e[t];return"<pre"+o.renderAttrs(a)+"><code>"+_n(e[t].content)+`</code></pre>
`};Xt.fence=function(e,t,n,r,o){const a=e[t],i=a.info?fr(a.info).trim():"";let l="",d="";if(i){const p=i.split(/(\s+)/g);l=p[0],d=p.slice(2).join("")}let f;if(n.highlight?f=n.highlight(a.content,l,d)||_n(a.content):f=_n(a.content),f.indexOf("<pre")===0)return f+`
`;if(i){const p=a.attrIndex("class"),b=a.attrs?a.attrs.slice():[];p<0?b.push(["class",n.langPrefix+l]):(b[p]=b[p].slice(),b[p][1]+=" "+n.langPrefix+l);const v={attrs:b};return`<pre><code${o.renderAttrs(v)}>${f}</code></pre>
`}return`<pre><code${o.renderAttrs(a)}>${f}</code></pre>
`};Xt.image=function(e,t,n,r,o){const a=e[t];return a.attrs[a.attrIndex("alt")][1]=o.renderInlineAsText(a.children,n,r),o.renderToken(e,t,n)};Xt.hardbreak=function(e,t,n){return n.xhtmlOut?`<br />
`:`<br>
`};Xt.softbreak=function(e,t,n){return n.breaks?n.xhtmlOut?`<br />
`:`<br>
`:`
`};Xt.text=function(e,t){return _n(e[t].content)};Xt.html_block=function(e,t){return e[t].content};Xt.html_inline=function(e,t){return e[t].content};function vr(){this.rules=ca({},Xt)}vr.prototype.renderAttrs=function(t){let n,r,o;if(!t.attrs)return"";for(o="",n=0,r=t.attrs.length;n<r;n++)o+=" "+_n(t.attrs[n][0])+'="'+_n(t.attrs[n][1])+'"';return o};vr.prototype.renderToken=function(t,n,r){const o=t[n];let a="";if(o.hidden)return"";o.block&&o.nesting!==-1&&n&&t[n-1].hidden&&(a+=`
`),a+=(o.nesting===-1?"</":"<")+o.tag,a+=this.renderAttrs(o),o.nesting===0&&r.xhtmlOut&&(a+=" /");let i=!1;if(o.block&&(i=!0,o.nesting===1&&n+1<t.length)){const l=t[n+1];(l.type==="inline"||l.hidden||l.nesting===-1&&l.tag===o.tag)&&(i=!1)}return a+=i?`>
`:">",a};vr.prototype.renderInline=function(e,t,n){let r="";const o=this.rules;for(let a=0,i=e.length;a<i;a++){const l=e[a].type;typeof o[l]<"u"?r+=o[l](e,a,t,n,this):r+=this.renderToken(e,a,t)}return r};vr.prototype.renderInlineAsText=function(e,t,n){let r="";for(let o=0,a=e.length;o<a;o++)switch(e[o].type){case"text":r+=e[o].content;break;case"image":r+=this.renderInlineAsText(e[o].children,t,n);break;case"html_inline":case"html_block":r+=e[o].content;break;case"softbreak":case"hardbreak":r+=`
`;break}return r};vr.prototype.render=function(e,t,n){let r="";const o=this.rules;for(let a=0,i=e.length;a<i;a++){const l=e[a].type;l==="inline"?r+=this.renderInline(e[a].children,t,n):typeof o[l]<"u"?r+=o[l](e,a,t,n,this):r+=this.renderToken(e,a,t,n)}return r};function xt(){this.__rules__=[],this.__cache__=null}xt.prototype.__find__=function(e){for(let t=0;t<this.__rules__.length;t++)if(this.__rules__[t].name===e)return t;return-1};xt.prototype.__compile__=function(){const e=this,t=[""];e.__rules__.forEach(function(n){n.enabled&&n.alt.forEach(function(r){t.indexOf(r)<0&&t.push(r)})}),e.__cache__={},t.forEach(function(n){e.__cache__[n]=[],e.__rules__.forEach(function(r){r.enabled&&(n&&r.alt.indexOf(n)<0||e.__cache__[n].push(r.fn))})})};xt.prototype.at=function(e,t,n){const r=this.__find__(e),o=n||{};if(r===-1)throw new Error("Parser rule not found: "+e);this.__rules__[r].fn=t,this.__rules__[r].alt=o.alt||[],this.__cache__=null};xt.prototype.before=function(e,t,n,r){const o=this.__find__(e),a=r||{};if(o===-1)throw new Error("Parser rule not found: "+e);this.__rules__.splice(o,0,{name:t,enabled:!0,fn:n,alt:a.alt||[]}),this.__cache__=null};xt.prototype.after=function(e,t,n,r){const o=this.__find__(e),a=r||{};if(o===-1)throw new Error("Parser rule not found: "+e);this.__rules__.splice(o+1,0,{name:t,enabled:!0,fn:n,alt:a.alt||[]}),this.__cache__=null};xt.prototype.push=function(e,t,n){const r=n||{};this.__rules__.push({name:e,enabled:!0,fn:t,alt:r.alt||[]}),this.__cache__=null};xt.prototype.enable=function(e,t){Array.isArray(e)||(e=[e]);const n=[];return e.forEach(function(r){const o=this.__find__(r);if(o<0){if(t)return;throw new Error("Rules manager: invalid rule name "+r)}this.__rules__[o].enabled=!0,n.push(r)},this),this.__cache__=null,n};xt.prototype.enableOnly=function(e,t){Array.isArray(e)||(e=[e]),this.__rules__.forEach(function(n){n.enabled=!1}),this.enable(e,t)};xt.prototype.disable=function(e,t){Array.isArray(e)||(e=[e]);const n=[];return e.forEach(function(r){const o=this.__find__(r);if(o<0){if(t)return;throw new Error("Rules manager: invalid rule name "+r)}this.__rules__[o].enabled=!1,n.push(r)},this),this.__cache__=null,n};xt.prototype.getRules=function(e){return this.__cache__===null&&this.__compile__(),this.__cache__[e]||[]};function qt(e,t,n){this.type=e,this.tag=t,this.attrs=null,this.map=null,this.nesting=n,this.level=0,this.children=null,this.content="",this.markup="",this.info="",this.meta=null,this.block=!1,this.hidden=!1}qt.prototype.attrIndex=function(t){if(!this.attrs)return-1;const n=this.attrs;for(let r=0,o=n.length;r<o;r++)if(n[r][0]===t)return r;return-1};qt.prototype.attrPush=function(t){this.attrs?this.attrs.push(t):this.attrs=[t]};qt.prototype.attrSet=function(t,n){const r=this.attrIndex(t),o=[t,n];r<0?this.attrPush(o):this.attrs[r]=o};qt.prototype.attrGet=function(t){const n=this.attrIndex(t);let r=null;return n>=0&&(r=this.attrs[n][1]),r};qt.prototype.attrJoin=function(t,n){const r=this.attrIndex(t);r<0?this.attrPush([t,n]):this.attrs[r][1]=this.attrs[r][1]+" "+n};function Rd(e,t,n){this.src=e,this.env=n,this.tokens=[],this.inlineMode=!1,this.md=t}Rd.prototype.Token=qt;const Gb=/\r\n?|\n/g,Yb=/\0/g;function Qb(e){let t;t=e.src.replace(Gb,`
`),t=t.replace(Yb,"ï¿½"),e.src=t}function Zb(e){let t;e.inlineMode?(t=new e.Token("inline","",0),t.content=e.src,t.map=[0,1],t.children=[],e.tokens.push(t)):e.md.block.parse(e.src,e.md,e.env,e.tokens)}function Xb(e){const t=e.tokens;for(let n=0,r=t.length;n<r;n++){const o=t[n];o.type==="inline"&&e.md.inline.parse(o.content,e.md,e.env,o.children)}}function Jb(e){return/^<a[>\s]/i.test(e)}function ex(e){return/^<\/a\s*>/i.test(e)}function tx(e){const t=e.tokens;if(e.md.options.linkify)for(let n=0,r=t.length;n<r;n++){if(t[n].type!=="inline"||!e.md.linkify.pretest(t[n].content))continue;let o=t[n].children,a=0;for(let i=o.length-1;i>=0;i--){const l=o[i];if(l.type==="link_close"){for(i--;o[i].level!==l.level&&o[i].type!=="link_open";)i--;continue}if(l.type==="html_inline"&&(Jb(l.content)&&a>0&&a--,ex(l.content)&&a++),!(a>0)&&l.type==="text"&&e.md.linkify.test(l.content)){const d=l.content;let f=e.md.linkify.match(d);const p=[];let b=l.level,v=0;f.length>0&&f[0].index===0&&i>0&&o[i-1].type==="text_special"&&(f=f.slice(1));for(let y=0;y<f.length;y++){const C=f[y].url,k=e.md.normalizeLink(C);if(!e.md.validateLink(k))continue;let A=f[y].text;f[y].schema?f[y].schema==="mailto:"&&!/^mailto:/i.test(A)?A=e.md.normalizeLinkText("mailto:"+A).replace(/^mailto:/,""):A=e.md.normalizeLinkText(A):A=e.md.normalizeLinkText("http://"+A).replace(/^http:\/\//,"");const j=f[y].index;if(j>v){const I=new e.Token("text","",0);I.content=d.slice(v,j),I.level=b,p.push(I)}const _=new e.Token("link_open","a",1);_.attrs=[["href",k]],_.level=b++,_.markup="linkify",_.info="auto",p.push(_);const S=new e.Token("text","",0);S.content=A,S.level=b,p.push(S);const D=new e.Token("link_close","a",-1);D.level=--b,D.markup="linkify",D.info="auto",p.push(D),v=f[y].lastIndex}if(v<d.length){const y=new e.Token("text","",0);y.content=d.slice(v),y.level=b,p.push(y)}t[n].children=o=Id(o,i,p)}}}}const Fd=/\+-|\.\.|\?\?\?\?|!!!!|,,|--/,nx=/\((c|tm|r)\)/i,rx=/\((c|tm|r)\)/ig,ox={c:"Â©",r:"Â®",tm:"â¢"};function ax(e,t){return ox[t.toLowerCase()]}function sx(e){let t=0;for(let n=e.length-1;n>=0;n--){const r=e[n];r.type==="text"&&!t&&(r.content=r.content.replace(rx,ax)),r.type==="link_open"&&r.info==="auto"&&t--,r.type==="link_close"&&r.info==="auto"&&t++}}function ix(e){let t=0;for(let n=e.length-1;n>=0;n--){const r=e[n];r.type==="text"&&!t&&Fd.test(r.content)&&(r.content=r.content.replace(/\+-/g,"Â±").replace(/\.{2,}/g,"â¦").replace(/([?!])â¦/g,"$1..").replace(/([?!]){4,}/g,"$1$1$1").replace(/,{2,}/g,",").replace(/(^|[^-])---(?=[^-]|$)/mg,"$1â").replace(/(^|\s)--(?=\s|$)/mg,"$1â").replace(/(^|[^-\s])--(?=[^-\s]|$)/mg,"$1â")),r.type==="link_open"&&r.info==="auto"&&t--,r.type==="link_close"&&r.info==="auto"&&t++}}function ux(e){let t;if(e.md.options.typographer)for(t=e.tokens.length-1;t>=0;t--)e.tokens[t].type==="inline"&&(nx.test(e.tokens[t].content)&&sx(e.tokens[t].children),Fd.test(e.tokens[t].content)&&ix(e.tokens[t].children))}const lx=/['"]/,Lu=/['"]/g,zu="â";function Fo(e,t,n){return e.slice(0,t)+n+e.slice(t+1)}function cx(e,t){let n;const r=[];for(let o=0;o<e.length;o++){const a=e[o],i=e[o].level;for(n=r.length-1;n>=0&&!(r[n].level<=i);n--);if(r.length=n+1,a.type!=="text")continue;let l=a.content,d=0,f=l.length;e:for(;d<f;){Lu.lastIndex=d;const p=Lu.exec(l);if(!p)break;let b=!0,v=!0;d=p.index+1;const y=p[0]==="'";let C=32;if(p.index-1>=0)C=l.charCodeAt(p.index-1);else for(n=o-1;n>=0&&!(e[n].type==="softbreak"||e[n].type==="hardbreak");n--)if(e[n].content){C=e[n].content.charCodeAt(e[n].content.length-1);break}let k=32;if(d<f)k=l.charCodeAt(d);else for(n=o+1;n<e.length&&!(e[n].type==="softbreak"||e[n].type==="hardbreak");n++)if(e[n].content){k=e[n].content.charCodeAt(0);break}const A=Xr(C)||Zr(String.fromCharCode(C)),j=Xr(k)||Zr(String.fromCharCode(k)),_=Qr(C),S=Qr(k);if(S?b=!1:j&&(_||A||(b=!1)),_?v=!1:A&&(S||j||(v=!1)),k===34&&p[0]==='"'&&C>=48&&C<=57&&(v=b=!1),b&&v&&(b=A,v=j),!b&&!v){y&&(a.content=Fo(a.content,p.index,zu));continue}if(v)for(n=r.length-1;n>=0;n--){let D=r[n];if(r[n].level<i)break;if(D.single===y&&r[n].level===i){D=r[n];let I,M;y?(I=t.md.options.quotes[2],M=t.md.options.quotes[3]):(I=t.md.options.quotes[0],M=t.md.options.quotes[1]),a.content=Fo(a.content,p.index,M),e[D.token].content=Fo(e[D.token].content,D.pos,I),d+=M.length-1,D.token===o&&(d+=I.length-1),l=a.content,f=l.length,r.length=n;continue e}}b?r.push({token:o,pos:p.index,single:y,level:i}):v&&y&&(a.content=Fo(a.content,p.index,zu))}}}function dx(e){if(e.md.options.typographer)for(let t=e.tokens.length-1;t>=0;t--)e.tokens[t].type!=="inline"||!lx.test(e.tokens[t].content)||cx(e.tokens[t].children,e)}function fx(e){let t,n;const r=e.tokens,o=r.length;for(let a=0;a<o;a++){if(r[a].type!=="inline")continue;const i=r[a].children,l=i.length;for(t=0;t<l;t++)i[t].type==="text_special"&&(i[t].type="text");for(t=n=0;t<l;t++)i[t].type==="text"&&t+1<l&&i[t+1].type==="text"?i[t+1].content=i[t].content+i[t+1].content:(t!==n&&(i[n]=i[t]),n++);t!==n&&(i.length=n)}}const os=[["normalize",Qb],["block",Zb],["inline",Xb],["linkify",tx],["replacements",ux],["smartquotes",dx],["text_join",fx]];function Si(){this.ruler=new xt;for(let e=0;e<os.length;e++)this.ruler.push(os[e][0],os[e][1])}Si.prototype.process=function(e){const t=this.ruler.getRules("");for(let n=0,r=t.length;n<r;n++)t[n](e)};Si.prototype.State=Rd;function Jt(e,t,n,r){this.src=e,this.md=t,this.env=n,this.tokens=r,this.bMarks=[],this.eMarks=[],this.tShift=[],this.sCount=[],this.bsCount=[],this.blkIndent=0,this.line=0,this.lineMax=0,this.tight=!1,this.ddIndent=-1,this.listIndent=-1,this.parentType="root",this.level=0;const o=this.src;for(let a=0,i=0,l=0,d=0,f=o.length,p=!1;i<f;i++){const b=o.charCodeAt(i);if(!p)if(Ge(b)){l++,b===9?d+=4-d%4:d++;continue}else p=!0;(b===10||i===f-1)&&(b!==10&&i++,this.bMarks.push(a),this.eMarks.push(i),this.tShift.push(l),this.sCount.push(d),this.bsCount.push(0),p=!1,l=0,d=0,a=i+1)}this.bMarks.push(o.length),this.eMarks.push(o.length),this.tShift.push(0),this.sCount.push(0),this.bsCount.push(0),this.lineMax=this.bMarks.length-1}Jt.prototype.push=function(e,t,n){const r=new qt(e,t,n);return r.block=!0,n<0&&this.level--,r.level=this.level,n>0&&this.level++,this.tokens.push(r),r};Jt.prototype.isEmpty=function(t){return this.bMarks[t]+this.tShift[t]>=this.eMarks[t]};Jt.prototype.skipEmptyLines=function(t){for(let n=this.lineMax;t<n&&!(this.bMarks[t]+this.tShift[t]<this.eMarks[t]);t++);return t};Jt.prototype.skipSpaces=function(t){for(let n=this.src.length;t<n;t++){const r=this.src.charCodeAt(t);if(!Ge(r))break}return t};Jt.prototype.skipSpacesBack=function(t,n){if(t<=n)return t;for(;t>n;)if(!Ge(this.src.charCodeAt(--t)))return t+1;return t};Jt.prototype.skipChars=function(t,n){for(let r=this.src.length;t<r&&this.src.charCodeAt(t)===n;t++);return t};Jt.prototype.skipCharsBack=function(t,n,r){if(t<=r)return t;for(;t>r;)if(n!==this.src.charCodeAt(--t))return t+1;return t};Jt.prototype.getLines=function(t,n,r,o){if(t>=n)return"";const a=new Array(n-t);for(let i=0,l=t;l<n;l++,i++){let d=0;const f=this.bMarks[l];let p=f,b;for(l+1<n||o?b=this.eMarks[l]+1:b=this.eMarks[l];p<b&&d<r;){const v=this.src.charCodeAt(p);if(Ge(v))v===9?d+=4-(d+this.bsCount[l])%4:d++;else if(p-f<this.tShift[l])d++;else break;p++}d>r?a[i]=new Array(d-r+1).join(" ")+this.src.slice(p,b):a[i]=this.src.slice(p,b)}return a.join("")};Jt.prototype.Token=qt;const hx=65536;function as(e,t){const n=e.bMarks[t]+e.tShift[t],r=e.eMarks[t];return e.src.slice(n,r)}function Bu(e){const t=[],n=e.length;let r=0,o=e.charCodeAt(r),a=!1,i=0,l="";for(;r<n;)o===124&&(a?(l+=e.substring(i,r-1),i=r):(t.push(l+e.substring(i,r)),l="",i=r+1)),a=o===92,r++,o=e.charCodeAt(r);return t.push(l+e.substring(i)),t}function px(e,t,n,r){if(t+2>n)return!1;let o=t+1;if(e.sCount[o]<e.blkIndent||e.sCount[o]-e.blkIndent>=4)return!1;let a=e.bMarks[o]+e.tShift[o];if(a>=e.eMarks[o])return!1;const i=e.src.charCodeAt(a++);if(i!==124&&i!==45&&i!==58||a>=e.eMarks[o])return!1;const l=e.src.charCodeAt(a++);if(l!==124&&l!==45&&l!==58&&!Ge(l)||i===45&&Ge(l))return!1;for(;a<e.eMarks[o];){const D=e.src.charCodeAt(a);if(D!==124&&D!==45&&D!==58&&!Ge(D))return!1;a++}let d=as(e,t+1),f=d.split("|");const p=[];for(let D=0;D<f.length;D++){const I=f[D].trim();if(!I){if(D===0||D===f.length-1)continue;return!1}if(!/^:?-+:?$/.test(I))return!1;I.charCodeAt(I.length-1)===58?p.push(I.charCodeAt(0)===58?"center":"right"):I.charCodeAt(0)===58?p.push("left"):p.push("")}if(d=as(e,t).trim(),d.indexOf("|")===-1||e.sCount[t]-e.blkIndent>=4)return!1;f=Bu(d),f.length&&f[0]===""&&f.shift(),f.length&&f[f.length-1]===""&&f.pop();const b=f.length;if(b===0||b!==p.length)return!1;if(r)return!0;const v=e.parentType;e.parentType="table";const y=e.md.block.ruler.getRules("blockquote"),C=e.push("table_open","table",1),k=[t,0];C.map=k;const A=e.push("thead_open","thead",1);A.map=[t,t+1];const j=e.push("tr_open","tr",1);j.map=[t,t+1];for(let D=0;D<f.length;D++){const I=e.push("th_open","th",1);p[D]&&(I.attrs=[["style","text-align:"+p[D]]]);const M=e.push("inline","",0);M.content=f[D].trim(),M.children=[],e.push("th_close","th",-1)}e.push("tr_close","tr",-1),e.push("thead_close","thead",-1);let _,S=0;for(o=t+2;o<n&&!(e.sCount[o]<e.blkIndent);o++){let D=!1;for(let M=0,F=y.length;M<F;M++)if(y[M](e,o,n,!0)){D=!0;break}if(D||(d=as(e,o).trim(),!d)||e.sCount[o]-e.blkIndent>=4||(f=Bu(d),f.length&&f[0]===""&&f.shift(),f.length&&f[f.length-1]===""&&f.pop(),S+=b-f.length,S>hx))break;if(o===t+2){const M=e.push("tbody_open","tbody",1);M.map=_=[t+2,0]}const I=e.push("tr_open","tr",1);I.map=[o,o+1];for(let M=0;M<b;M++){const F=e.push("td_open","td",1);p[M]&&(F.attrs=[["style","text-align:"+p[M]]]);const H=e.push("inline","",0);H.content=f[M]?f[M].trim():"",H.children=[],e.push("td_close","td",-1)}e.push("tr_close","tr",-1)}return _&&(e.push("tbody_close","tbody",-1),_[1]=o),e.push("table_close","table",-1),k[1]=o,e.parentType=v,e.line=o,!0}function mx(e,t,n){if(e.sCount[t]-e.blkIndent<4)return!1;let r=t+1,o=r;for(;r<n;){if(e.isEmpty(r)){r++;continue}if(e.sCount[r]-e.blkIndent>=4){r++,o=r;continue}break}e.line=o;const a=e.push("code_block","code",0);return a.content=e.getLines(t,o,4+e.blkIndent,!1)+`
`,a.map=[t,e.line],!0}function gx(e,t,n,r){let o=e.bMarks[t]+e.tShift[t],a=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4||o+3>a)return!1;const i=e.src.charCodeAt(o);if(i!==126&&i!==96)return!1;let l=o;o=e.skipChars(o,i);let d=o-l;if(d<3)return!1;const f=e.src.slice(l,o),p=e.src.slice(o,a);if(i===96&&p.indexOf(String.fromCharCode(i))>=0)return!1;if(r)return!0;let b=t,v=!1;for(;b++,!(b>=n||(o=l=e.bMarks[b]+e.tShift[b],a=e.eMarks[b],o<a&&e.sCount[b]<e.blkIndent));)if(e.src.charCodeAt(o)===i&&!(e.sCount[b]-e.blkIndent>=4)&&(o=e.skipChars(o,i),!(o-l<d)&&(o=e.skipSpaces(o),!(o<a)))){v=!0;break}d=e.sCount[t],e.line=b+(v?1:0);const y=e.push("fence","code",0);return y.info=p,y.content=e.getLines(t+1,b,d,!0),y.markup=f,y.map=[t,e.line],!0}function bx(e,t,n,r){let o=e.bMarks[t]+e.tShift[t],a=e.eMarks[t];const i=e.lineMax;if(e.sCount[t]-e.blkIndent>=4||e.src.charCodeAt(o)!==62)return!1;if(r)return!0;const l=[],d=[],f=[],p=[],b=e.md.block.ruler.getRules("blockquote"),v=e.parentType;e.parentType="blockquote";let y=!1,C;for(C=t;C<n;C++){const S=e.sCount[C]<e.blkIndent;if(o=e.bMarks[C]+e.tShift[C],a=e.eMarks[C],o>=a)break;if(e.src.charCodeAt(o++)===62&&!S){let I=e.sCount[C]+1,M,F;e.src.charCodeAt(o)===32?(o++,I++,F=!1,M=!0):e.src.charCodeAt(o)===9?(M=!0,(e.bsCount[C]+I)%4===3?(o++,I++,F=!1):F=!0):M=!1;let H=I;for(l.push(e.bMarks[C]),e.bMarks[C]=o;o<a;){const Z=e.src.charCodeAt(o);if(Ge(Z))Z===9?H+=4-(H+e.bsCount[C]+(F?1:0))%4:H++;else break;o++}y=o>=a,d.push(e.bsCount[C]),e.bsCount[C]=e.sCount[C]+1+(M?1:0),f.push(e.sCount[C]),e.sCount[C]=H-I,p.push(e.tShift[C]),e.tShift[C]=o-e.bMarks[C];continue}if(y)break;let D=!1;for(let I=0,M=b.length;I<M;I++)if(b[I](e,C,n,!0)){D=!0;break}if(D){e.lineMax=C,e.blkIndent!==0&&(l.push(e.bMarks[C]),d.push(e.bsCount[C]),p.push(e.tShift[C]),f.push(e.sCount[C]),e.sCount[C]-=e.blkIndent);break}l.push(e.bMarks[C]),d.push(e.bsCount[C]),p.push(e.tShift[C]),f.push(e.sCount[C]),e.sCount[C]=-1}const k=e.blkIndent;e.blkIndent=0;const A=e.push("blockquote_open","blockquote",1);A.markup=">";const j=[t,0];A.map=j,e.md.block.tokenize(e,t,C);const _=e.push("blockquote_close","blockquote",-1);_.markup=">",e.lineMax=i,e.parentType=v,j[1]=e.line;for(let S=0;S<p.length;S++)e.bMarks[S+t]=l[S],e.tShift[S+t]=p[S],e.sCount[S+t]=f[S],e.bsCount[S+t]=d[S];return e.blkIndent=k,!0}function xx(e,t,n,r){const o=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4)return!1;let a=e.bMarks[t]+e.tShift[t];const i=e.src.charCodeAt(a++);if(i!==42&&i!==45&&i!==95)return!1;let l=1;for(;a<o;){const f=e.src.charCodeAt(a++);if(f!==i&&!Ge(f))return!1;f===i&&l++}if(l<3)return!1;if(r)return!0;e.line=t+1;const d=e.push("hr","hr",0);return d.map=[t,e.line],d.markup=Array(l+1).join(String.fromCharCode(i)),!0}function $u(e,t){const n=e.eMarks[t];let r=e.bMarks[t]+e.tShift[t];const o=e.src.charCodeAt(r++);if(o!==42&&o!==45&&o!==43)return-1;if(r<n){const a=e.src.charCodeAt(r);if(!Ge(a))return-1}return r}function qu(e,t){const n=e.bMarks[t]+e.tShift[t],r=e.eMarks[t];let o=n;if(o+1>=r)return-1;let a=e.src.charCodeAt(o++);if(a<48||a>57)return-1;for(;;){if(o>=r)return-1;if(a=e.src.charCodeAt(o++),a>=48&&a<=57){if(o-n>=10)return-1;continue}if(a===41||a===46)break;return-1}return o<r&&(a=e.src.charCodeAt(o),!Ge(a))?-1:o}function yx(e,t){const n=e.level+2;for(let r=t+2,o=e.tokens.length-2;r<o;r++)e.tokens[r].level===n&&e.tokens[r].type==="paragraph_open"&&(e.tokens[r+2].hidden=!0,e.tokens[r].hidden=!0,r+=2)}function vx(e,t,n,r){let o,a,i,l,d=t,f=!0;if(e.sCount[d]-e.blkIndent>=4||e.listIndent>=0&&e.sCount[d]-e.listIndent>=4&&e.sCount[d]<e.blkIndent)return!1;let p=!1;r&&e.parentType==="paragraph"&&e.sCount[d]>=e.blkIndent&&(p=!0);let b,v,y;if((y=qu(e,d))>=0){if(b=!0,i=e.bMarks[d]+e.tShift[d],v=Number(e.src.slice(i,y-1)),p&&v!==1)return!1}else if((y=$u(e,d))>=0)b=!1;else return!1;if(p&&e.skipSpaces(y)>=e.eMarks[d])return!1;if(r)return!0;const C=e.src.charCodeAt(y-1),k=e.tokens.length;b?(l=e.push("ordered_list_open","ol",1),v!==1&&(l.attrs=[["start",v]])):l=e.push("bullet_list_open","ul",1);const A=[d,0];l.map=A,l.markup=String.fromCharCode(C);let j=!1;const _=e.md.block.ruler.getRules("list"),S=e.parentType;for(e.parentType="list";d<n;){a=y,o=e.eMarks[d];const D=e.sCount[d]+y-(e.bMarks[d]+e.tShift[d]);let I=D;for(;a<o;){const Ee=e.src.charCodeAt(a);if(Ee===9)I+=4-(I+e.bsCount[d])%4;else if(Ee===32)I++;else break;a++}const M=a;let F;M>=o?F=1:F=I-D,F>4&&(F=1);const H=D+F;l=e.push("list_item_open","li",1),l.markup=String.fromCharCode(C);const Z=[d,0];l.map=Z,b&&(l.info=e.src.slice(i,y-1));const ie=e.tight,Y=e.tShift[d],Q=e.sCount[d],me=e.listIndent;if(e.listIndent=e.blkIndent,e.blkIndent=H,e.tight=!0,e.tShift[d]=M-e.bMarks[d],e.sCount[d]=I,M>=o&&e.isEmpty(d+1)?e.line=Math.min(e.line+2,n):e.md.block.tokenize(e,d,n,!0),(!e.tight||j)&&(f=!1),j=e.line-d>1&&e.isEmpty(e.line-1),e.blkIndent=e.listIndent,e.listIndent=me,e.tShift[d]=Y,e.sCount[d]=Q,e.tight=ie,l=e.push("list_item_close","li",-1),l.markup=String.fromCharCode(C),d=e.line,Z[1]=d,d>=n||e.sCount[d]<e.blkIndent||e.sCount[d]-e.blkIndent>=4)break;let _e=!1;for(let Ee=0,xe=_.length;Ee<xe;Ee++)if(_[Ee](e,d,n,!0)){_e=!0;break}if(_e)break;if(b){if(y=qu(e,d),y<0)break;i=e.bMarks[d]+e.tShift[d]}else if(y=$u(e,d),y<0)break;if(C!==e.src.charCodeAt(y-1))break}return b?l=e.push("ordered_list_close","ol",-1):l=e.push("bullet_list_close","ul",-1),l.markup=String.fromCharCode(C),A[1]=d,e.line=d,e.parentType=S,f&&yx(e,k),!0}function wx(e,t,n,r){let o=e.bMarks[t]+e.tShift[t],a=e.eMarks[t],i=t+1;if(e.sCount[t]-e.blkIndent>=4||e.src.charCodeAt(o)!==91)return!1;function l(_){const S=e.lineMax;if(_>=S||e.isEmpty(_))return null;let D=!1;if(e.sCount[_]-e.blkIndent>3&&(D=!0),e.sCount[_]<0&&(D=!0),!D){const F=e.md.block.ruler.getRules("reference"),H=e.parentType;e.parentType="reference";let Z=!1;for(let ie=0,Y=F.length;ie<Y;ie++)if(F[ie](e,_,S,!0)){Z=!0;break}if(e.parentType=H,Z)return null}const I=e.bMarks[_]+e.tShift[_],M=e.eMarks[_];return e.src.slice(I,M+1)}let d=e.src.slice(o,a+1);a=d.length;let f=-1;for(o=1;o<a;o++){const _=d.charCodeAt(o);if(_===91)return!1;if(_===93){f=o;break}else if(_===10){const S=l(i);S!==null&&(d+=S,a=d.length,i++)}else if(_===92&&(o++,o<a&&d.charCodeAt(o)===10)){const S=l(i);S!==null&&(d+=S,a=d.length,i++)}}if(f<0||d.charCodeAt(f+1)!==58)return!1;for(o=f+2;o<a;o++){const _=d.charCodeAt(o);if(_===10){const S=l(i);S!==null&&(d+=S,a=d.length,i++)}else if(!Ge(_))break}const p=e.md.helpers.parseLinkDestination(d,o,a);if(!p.ok)return!1;const b=e.md.normalizeLink(p.str);if(!e.md.validateLink(b))return!1;o=p.pos;const v=o,y=i,C=o;for(;o<a;o++){const _=d.charCodeAt(o);if(_===10){const S=l(i);S!==null&&(d+=S,a=d.length,i++)}else if(!Ge(_))break}let k=e.md.helpers.parseLinkTitle(d,o,a);for(;k.can_continue;){const _=l(i);if(_===null)break;d+=_,o=a,a=d.length,i++,k=e.md.helpers.parseLinkTitle(d,o,a,k)}let A;for(o<a&&C!==o&&k.ok?(A=k.str,o=k.pos):(A="",o=v,i=y);o<a;){const _=d.charCodeAt(o);if(!Ge(_))break;o++}if(o<a&&d.charCodeAt(o)!==10&&A)for(A="",o=v,i=y;o<a;){const _=d.charCodeAt(o);if(!Ge(_))break;o++}if(o<a&&d.charCodeAt(o)!==10)return!1;const j=da(d.slice(1,f));return j?(r||(typeof e.env.references>"u"&&(e.env.references={}),typeof e.env.references[j]>"u"&&(e.env.references[j]={title:A,href:b}),e.line=i),!0):!1}const Cx=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],kx="[a-zA-Z_:][a-zA-Z0-9:._-]*",_x="[^\"'=<>`\\x00-\\x20]+",Sx="'[^']*'",Ex='"[^"]*"',jx="(?:"+_x+"|"+Sx+"|"+Ex+")",Ax="(?:\\s+"+kx+"(?:\\s*=\\s*"+jx+")?)",Od="<[A-Za-z][A-Za-z0-9\\-]*"+Ax+"*\\s*\\/?>",Ld="<\\/[A-Za-z][A-Za-z0-9\\-]*\\s*>",Dx="<!---?>|<!--(?:[^-]|-[^-]|--[^>])*-->",Nx="<[?][\\s\\S]*?[?]>",Tx="<![A-Za-z][^>]*>",Mx="<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",Ix=new RegExp("^(?:"+Od+"|"+Ld+"|"+Dx+"|"+Nx+"|"+Tx+"|"+Mx+")"),Px=new RegExp("^(?:"+Od+"|"+Ld+")"),tr=[[/^<(script|pre|style|textarea)(?=(\s|>|$))/i,/<\/(script|pre|style|textarea)>/i,!0],[/^<!--/,/-->/,!0],[/^<\?/,/\?>/,!0],[/^<![A-Z]/,/>/,!0],[/^<!\[CDATA\[/,/\]\]>/,!0],[new RegExp("^</?("+Cx.join("|")+")(?=(\\s|/?>|$))","i"),/^$/,!0],[new RegExp(Px.source+"\\s*$"),/^$/,!1]];function Rx(e,t,n,r){let o=e.bMarks[t]+e.tShift[t],a=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4||!e.md.options.html||e.src.charCodeAt(o)!==60)return!1;let i=e.src.slice(o,a),l=0;for(;l<tr.length&&!tr[l][0].test(i);l++);if(l===tr.length)return!1;if(r)return tr[l][2];let d=t+1;if(!tr[l][1].test(i)){for(;d<n&&!(e.sCount[d]<e.blkIndent);d++)if(o=e.bMarks[d]+e.tShift[d],a=e.eMarks[d],i=e.src.slice(o,a),tr[l][1].test(i)){i.length!==0&&d++;break}}e.line=d;const f=e.push("html_block","",0);return f.map=[t,d],f.content=e.getLines(t,d,e.blkIndent,!0),!0}function Fx(e,t,n,r){let o=e.bMarks[t]+e.tShift[t],a=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4)return!1;let i=e.src.charCodeAt(o);if(i!==35||o>=a)return!1;let l=1;for(i=e.src.charCodeAt(++o);i===35&&o<a&&l<=6;)l++,i=e.src.charCodeAt(++o);if(l>6||o<a&&!Ge(i))return!1;if(r)return!0;a=e.skipSpacesBack(a,o);const d=e.skipCharsBack(a,35,o);d>o&&Ge(e.src.charCodeAt(d-1))&&(a=d),e.line=t+1;const f=e.push("heading_open","h"+String(l),1);f.markup="########".slice(0,l),f.map=[t,e.line];const p=e.push("inline","",0);p.content=e.src.slice(o,a).trim(),p.map=[t,e.line],p.children=[];const b=e.push("heading_close","h"+String(l),-1);return b.markup="########".slice(0,l),!0}function Ox(e,t,n){const r=e.md.block.ruler.getRules("paragraph");if(e.sCount[t]-e.blkIndent>=4)return!1;const o=e.parentType;e.parentType="paragraph";let a=0,i,l=t+1;for(;l<n&&!e.isEmpty(l);l++){if(e.sCount[l]-e.blkIndent>3)continue;if(e.sCount[l]>=e.blkIndent){let y=e.bMarks[l]+e.tShift[l];const C=e.eMarks[l];if(y<C&&(i=e.src.charCodeAt(y),(i===45||i===61)&&(y=e.skipChars(y,i),y=e.skipSpaces(y),y>=C))){a=i===61?1:2;break}}if(e.sCount[l]<0)continue;let v=!1;for(let y=0,C=r.length;y<C;y++)if(r[y](e,l,n,!0)){v=!0;break}if(v)break}if(!a)return!1;const d=e.getLines(t,l,e.blkIndent,!1).trim();e.line=l+1;const f=e.push("heading_open","h"+String(a),1);f.markup=String.fromCharCode(i),f.map=[t,e.line];const p=e.push("inline","",0);p.content=d,p.map=[t,e.line-1],p.children=[];const b=e.push("heading_close","h"+String(a),-1);return b.markup=String.fromCharCode(i),e.parentType=o,!0}function Lx(e,t,n){const r=e.md.block.ruler.getRules("paragraph"),o=e.parentType;let a=t+1;for(e.parentType="paragraph";a<n&&!e.isEmpty(a);a++){if(e.sCount[a]-e.blkIndent>3||e.sCount[a]<0)continue;let f=!1;for(let p=0,b=r.length;p<b;p++)if(r[p](e,a,n,!0)){f=!0;break}if(f)break}const i=e.getLines(t,a,e.blkIndent,!1).trim();e.line=a;const l=e.push("paragraph_open","p",1);l.map=[t,e.line];const d=e.push("inline","",0);return d.content=i,d.map=[t,e.line],d.children=[],e.push("paragraph_close","p",-1),e.parentType=o,!0}const Oo=[["table",px,["paragraph","reference"]],["code",mx],["fence",gx,["paragraph","reference","blockquote","list"]],["blockquote",bx,["paragraph","reference","blockquote","list"]],["hr",xx,["paragraph","reference","blockquote","list"]],["list",vx,["paragraph","reference","blockquote"]],["reference",wx],["html_block",Rx,["paragraph","reference","blockquote"]],["heading",Fx,["paragraph","reference","blockquote"]],["lheading",Ox],["paragraph",Lx]];function fa(){this.ruler=new xt;for(let e=0;e<Oo.length;e++)this.ruler.push(Oo[e][0],Oo[e][1],{alt:(Oo[e][2]||[]).slice()})}fa.prototype.tokenize=function(e,t,n){const r=this.ruler.getRules(""),o=r.length,a=e.md.options.maxNesting;let i=t,l=!1;for(;i<n&&(e.line=i=e.skipEmptyLines(i),!(i>=n||e.sCount[i]<e.blkIndent));){if(e.level>=a){e.line=n;break}const d=e.line;let f=!1;for(let p=0;p<o;p++)if(f=r[p](e,i,n,!1),f){if(d>=e.line)throw new Error("block rule didn't increment state.line");break}if(!f)throw new Error("none of the block rules matched");e.tight=!l,e.isEmpty(e.line-1)&&(l=!0),i=e.line,i<n&&e.isEmpty(i)&&(l=!0,i++,e.line=i)}};fa.prototype.parse=function(e,t,n,r){if(!e)return;const o=new this.State(e,t,n,r);this.tokenize(o,o.line,o.lineMax)};fa.prototype.State=Jt;function io(e,t,n,r){this.src=e,this.env=n,this.md=t,this.tokens=r,this.tokens_meta=Array(r.length),this.pos=0,this.posMax=this.src.length,this.level=0,this.pending="",this.pendingLevel=0,this.cache={},this.delimiters=[],this._prev_delimiters=[],this.backticks={},this.backticksScanned=!1,this.linkLevel=0}io.prototype.pushPending=function(){const e=new qt("text","",0);return e.content=this.pending,e.level=this.pendingLevel,this.tokens.push(e),this.pending="",e};io.prototype.push=function(e,t,n){this.pending&&this.pushPending();const r=new qt(e,t,n);let o=null;return n<0&&(this.level--,this.delimiters=this._prev_delimiters.pop()),r.level=this.level,n>0&&(this.level++,this._prev_delimiters.push(this.delimiters),this.delimiters=[],o={delimiters:this.delimiters}),this.pendingLevel=this.level,this.tokens.push(r),this.tokens_meta.push(o),r};io.prototype.scanDelims=function(e,t){const n=this.posMax,r=this.src.charCodeAt(e),o=e>0?this.src.charCodeAt(e-1):32;let a=e;for(;a<n&&this.src.charCodeAt(a)===r;)a++;const i=a-e,l=a<n?this.src.charCodeAt(a):32,d=Xr(o)||Zr(String.fromCharCode(o)),f=Xr(l)||Zr(String.fromCharCode(l)),p=Qr(o),b=Qr(l),v=!b&&(!f||p||d),y=!p&&(!d||b||f);return{can_open:v&&(t||!y||d),can_close:y&&(t||!v||f),length:i}};io.prototype.Token=qt;function zx(e){switch(e){case 10:case 33:case 35:case 36:case 37:case 38:case 42:case 43:case 45:case 58:case 60:case 61:case 62:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 125:case 126:return!0;default:return!1}}function Bx(e,t){let n=e.pos;for(;n<e.posMax&&!zx(e.src.charCodeAt(n));)n++;return n===e.pos?!1:(t||(e.pending+=e.src.slice(e.pos,n)),e.pos=n,!0)}const $x=/(?:^|[^a-z0-9.+-])([a-z][a-z0-9.+-]*)$/i;function qx(e,t){if(!e.md.options.linkify||e.linkLevel>0)return!1;const n=e.pos,r=e.posMax;if(n+3>r||e.src.charCodeAt(n)!==58||e.src.charCodeAt(n+1)!==47||e.src.charCodeAt(n+2)!==47)return!1;const o=e.pending.match($x);if(!o)return!1;const a=o[1],i=e.md.linkify.matchAtStart(e.src.slice(n-a.length));if(!i)return!1;let l=i.url;if(l.length<=a.length)return!1;l=l.replace(/\*+$/,"");const d=e.md.normalizeLink(l);if(!e.md.validateLink(d))return!1;if(!t){e.pending=e.pending.slice(0,-a.length);const f=e.push("link_open","a",1);f.attrs=[["href",d]],f.markup="linkify",f.info="auto";const p=e.push("text","",0);p.content=e.md.normalizeLinkText(l);const b=e.push("link_close","a",-1);b.markup="linkify",b.info="auto"}return e.pos+=l.length-a.length,!0}function Ux(e,t){let n=e.pos;if(e.src.charCodeAt(n)!==10)return!1;const r=e.pending.length-1,o=e.posMax;if(!t)if(r>=0&&e.pending.charCodeAt(r)===32)if(r>=1&&e.pending.charCodeAt(r-1)===32){let a=r-1;for(;a>=1&&e.pending.charCodeAt(a-1)===32;)a--;e.pending=e.pending.slice(0,a),e.push("hardbreak","br",0)}else e.pending=e.pending.slice(0,-1),e.push("softbreak","br",0);else e.push("softbreak","br",0);for(n++;n<o&&Ge(e.src.charCodeAt(n));)n++;return e.pos=n,!0}const Ei=[];for(let e=0;e<256;e++)Ei.push(0);"\\!\"#$%&'()*+,./:;<=>?@[]^_`{|}~-".split("").forEach(function(e){Ei[e.charCodeAt(0)]=1});function Hx(e,t){let n=e.pos;const r=e.posMax;if(e.src.charCodeAt(n)!==92||(n++,n>=r))return!1;let o=e.src.charCodeAt(n);if(o===10){for(t||e.push("hardbreak","br",0),n++;n<r&&(o=e.src.charCodeAt(n),!!Ge(o));)n++;return e.pos=n,!0}let a=e.src[n];if(o>=55296&&o<=56319&&n+1<r){const l=e.src.charCodeAt(n+1);l>=56320&&l<=57343&&(a+=e.src[n+1],n++)}const i="\\"+a;if(!t){const l=e.push("text_special","",0);o<256&&Ei[o]!==0?l.content=a:l.content=i,l.markup=i,l.info="escape"}return e.pos=n+1,!0}function Kx(e,t){let n=e.pos;if(e.src.charCodeAt(n)!==96)return!1;const o=n;n++;const a=e.posMax;for(;n<a&&e.src.charCodeAt(n)===96;)n++;const i=e.src.slice(o,n),l=i.length;if(e.backticksScanned&&(e.backticks[l]||0)<=o)return t||(e.pending+=i),e.pos+=l,!0;let d=n,f;for(;(f=e.src.indexOf("`",d))!==-1;){for(d=f+1;d<a&&e.src.charCodeAt(d)===96;)d++;const p=d-f;if(p===l){if(!t){const b=e.push("code_inline","code",0);b.markup=i,b.content=e.src.slice(n,f).replace(/\n/g," ").replace(/^ (.+) $/,"$1")}return e.pos=d,!0}e.backticks[p]=f}return e.backticksScanned=!0,t||(e.pending+=i),e.pos+=l,!0}function Vx(e,t){const n=e.pos,r=e.src.charCodeAt(n);if(t||r!==126)return!1;const o=e.scanDelims(e.pos,!0);let a=o.length;const i=String.fromCharCode(r);if(a<2)return!1;let l;a%2&&(l=e.push("text","",0),l.content=i,a--);for(let d=0;d<a;d+=2)l=e.push("text","",0),l.content=i+i,e.delimiters.push({marker:r,length:0,token:e.tokens.length-1,end:-1,open:o.can_open,close:o.can_close});return e.pos+=o.length,!0}function Uu(e,t){let n;const r=[],o=t.length;for(let a=0;a<o;a++){const i=t[a];if(i.marker!==126||i.end===-1)continue;const l=t[i.end];n=e.tokens[i.token],n.type="s_open",n.tag="s",n.nesting=1,n.markup="~~",n.content="",n=e.tokens[l.token],n.type="s_close",n.tag="s",n.nesting=-1,n.markup="~~",n.content="",e.tokens[l.token-1].type==="text"&&e.tokens[l.token-1].content==="~"&&r.push(l.token-1)}for(;r.length;){const a=r.pop();let i=a+1;for(;i<e.tokens.length&&e.tokens[i].type==="s_close";)i++;i--,a!==i&&(n=e.tokens[i],e.tokens[i]=e.tokens[a],e.tokens[a]=n)}}function Wx(e){const t=e.tokens_meta,n=e.tokens_meta.length;Uu(e,e.delimiters);for(let r=0;r<n;r++)t[r]&&t[r].delimiters&&Uu(e,t[r].delimiters)}const zd={tokenize:Vx,postProcess:Wx};function Gx(e,t){const n=e.pos,r=e.src.charCodeAt(n);if(t||r!==95&&r!==42)return!1;const o=e.scanDelims(e.pos,r===42);for(let a=0;a<o.length;a++){const i=e.push("text","",0);i.content=String.fromCharCode(r),e.delimiters.push({marker:r,length:o.length,token:e.tokens.length-1,end:-1,open:o.can_open,close:o.can_close})}return e.pos+=o.length,!0}function Hu(e,t){const n=t.length;for(let r=n-1;r>=0;r--){const o=t[r];if(o.marker!==95&&o.marker!==42||o.end===-1)continue;const a=t[o.end],i=r>0&&t[r-1].end===o.end+1&&t[r-1].marker===o.marker&&t[r-1].token===o.token-1&&t[o.end+1].token===a.token+1,l=String.fromCharCode(o.marker),d=e.tokens[o.token];d.type=i?"strong_open":"em_open",d.tag=i?"strong":"em",d.nesting=1,d.markup=i?l+l:l,d.content="";const f=e.tokens[a.token];f.type=i?"strong_close":"em_close",f.tag=i?"strong":"em",f.nesting=-1,f.markup=i?l+l:l,f.content="",i&&(e.tokens[t[r-1].token].content="",e.tokens[t[o.end+1].token].content="",r--)}}function Yx(e){const t=e.tokens_meta,n=e.tokens_meta.length;Hu(e,e.delimiters);for(let r=0;r<n;r++)t[r]&&t[r].delimiters&&Hu(e,t[r].delimiters)}const Bd={tokenize:Gx,postProcess:Yx};function Qx(e,t){let n,r,o,a,i="",l="",d=e.pos,f=!0;if(e.src.charCodeAt(e.pos)!==91)return!1;const p=e.pos,b=e.posMax,v=e.pos+1,y=e.md.helpers.parseLinkLabel(e,e.pos,!0);if(y<0)return!1;let C=y+1;if(C<b&&e.src.charCodeAt(C)===40){for(f=!1,C++;C<b&&(n=e.src.charCodeAt(C),!(!Ge(n)&&n!==10));C++);if(C>=b)return!1;if(d=C,o=e.md.helpers.parseLinkDestination(e.src,C,e.posMax),o.ok){for(i=e.md.normalizeLink(o.str),e.md.validateLink(i)?C=o.pos:i="",d=C;C<b&&(n=e.src.charCodeAt(C),!(!Ge(n)&&n!==10));C++);if(o=e.md.helpers.parseLinkTitle(e.src,C,e.posMax),C<b&&d!==C&&o.ok)for(l=o.str,C=o.pos;C<b&&(n=e.src.charCodeAt(C),!(!Ge(n)&&n!==10));C++);}(C>=b||e.src.charCodeAt(C)!==41)&&(f=!0),C++}if(f){if(typeof e.env.references>"u")return!1;if(C<b&&e.src.charCodeAt(C)===91?(d=C+1,C=e.md.helpers.parseLinkLabel(e,C),C>=0?r=e.src.slice(d,C++):C=y+1):C=y+1,r||(r=e.src.slice(v,y)),a=e.env.references[da(r)],!a)return e.pos=p,!1;i=a.href,l=a.title}if(!t){e.pos=v,e.posMax=y;const k=e.push("link_open","a",1),A=[["href",i]];k.attrs=A,l&&A.push(["title",l]),e.linkLevel++,e.md.inline.tokenize(e),e.linkLevel--,e.push("link_close","a",-1)}return e.pos=C,e.posMax=b,!0}function Zx(e,t){let n,r,o,a,i,l,d,f,p="";const b=e.pos,v=e.posMax;if(e.src.charCodeAt(e.pos)!==33||e.src.charCodeAt(e.pos+1)!==91)return!1;const y=e.pos+2,C=e.md.helpers.parseLinkLabel(e,e.pos+1,!1);if(C<0)return!1;if(a=C+1,a<v&&e.src.charCodeAt(a)===40){for(a++;a<v&&(n=e.src.charCodeAt(a),!(!Ge(n)&&n!==10));a++);if(a>=v)return!1;for(f=a,l=e.md.helpers.parseLinkDestination(e.src,a,e.posMax),l.ok&&(p=e.md.normalizeLink(l.str),e.md.validateLink(p)?a=l.pos:p=""),f=a;a<v&&(n=e.src.charCodeAt(a),!(!Ge(n)&&n!==10));a++);if(l=e.md.helpers.parseLinkTitle(e.src,a,e.posMax),a<v&&f!==a&&l.ok)for(d=l.str,a=l.pos;a<v&&(n=e.src.charCodeAt(a),!(!Ge(n)&&n!==10));a++);else d="";if(a>=v||e.src.charCodeAt(a)!==41)return e.pos=b,!1;a++}else{if(typeof e.env.references>"u")return!1;if(a<v&&e.src.charCodeAt(a)===91?(f=a+1,a=e.md.helpers.parseLinkLabel(e,a),a>=0?o=e.src.slice(f,a++):a=C+1):a=C+1,o||(o=e.src.slice(y,C)),i=e.env.references[da(o)],!i)return e.pos=b,!1;p=i.href,d=i.title}if(!t){r=e.src.slice(y,C);const k=[];e.md.inline.parse(r,e.md,e.env,k);const A=e.push("image","img",0),j=[["src",p],["alt",""]];A.attrs=j,A.children=k,A.content=r,d&&j.push(["title",d])}return e.pos=a,e.posMax=v,!0}const Xx=/^([a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*)$/,Jx=/^([a-zA-Z][a-zA-Z0-9+.-]{1,31}):([^<>\x00-\x20]*)$/;function ey(e,t){let n=e.pos;if(e.src.charCodeAt(n)!==60)return!1;const r=e.pos,o=e.posMax;for(;;){if(++n>=o)return!1;const i=e.src.charCodeAt(n);if(i===60)return!1;if(i===62)break}const a=e.src.slice(r+1,n);if(Jx.test(a)){const i=e.md.normalizeLink(a);if(!e.md.validateLink(i))return!1;if(!t){const l=e.push("link_open","a",1);l.attrs=[["href",i]],l.markup="autolink",l.info="auto";const d=e.push("text","",0);d.content=e.md.normalizeLinkText(a);const f=e.push("link_close","a",-1);f.markup="autolink",f.info="auto"}return e.pos+=a.length+2,!0}if(Xx.test(a)){const i=e.md.normalizeLink("mailto:"+a);if(!e.md.validateLink(i))return!1;if(!t){const l=e.push("link_open","a",1);l.attrs=[["href",i]],l.markup="autolink",l.info="auto";const d=e.push("text","",0);d.content=e.md.normalizeLinkText(a);const f=e.push("link_close","a",-1);f.markup="autolink",f.info="auto"}return e.pos+=a.length+2,!0}return!1}function ty(e){return/^<a[>\s]/i.test(e)}function ny(e){return/^<\/a\s*>/i.test(e)}function ry(e){const t=e|32;return t>=97&&t<=122}function oy(e,t){if(!e.md.options.html)return!1;const n=e.posMax,r=e.pos;if(e.src.charCodeAt(r)!==60||r+2>=n)return!1;const o=e.src.charCodeAt(r+1);if(o!==33&&o!==63&&o!==47&&!ry(o))return!1;const a=e.src.slice(r).match(Ix);if(!a)return!1;if(!t){const i=e.push("html_inline","",0);i.content=a[0],ty(i.content)&&e.linkLevel++,ny(i.content)&&e.linkLevel--}return e.pos+=a[0].length,!0}const ay=/^&#((?:x[a-f0-9]{1,6}|[0-9]{1,7}));/i,sy=/^&([a-z][a-z0-9]{1,31});/i;function iy(e,t){const n=e.pos,r=e.posMax;if(e.src.charCodeAt(n)!==38||n+1>=r)return!1;if(e.src.charCodeAt(n+1)===35){const a=e.src.slice(n).match(ay);if(a){if(!t){const i=a[1][0].toLowerCase()==="x"?parseInt(a[1].slice(1),16):parseInt(a[1],10),l=e.push("text_special","",0);l.content=_i(i)?Yo(i):Yo(65533),l.markup=a[0],l.info="entity"}return e.pos+=a[0].length,!0}}else{const a=e.src.slice(n).match(sy);if(a){const i=Md(a[0]);if(i!==a[0]){if(!t){const l=e.push("text_special","",0);l.content=i,l.markup=a[0],l.info="entity"}return e.pos+=a[0].length,!0}}}return!1}function Ku(e){const t={},n=e.length;if(!n)return;let r=0,o=-2;const a=[];for(let i=0;i<n;i++){const l=e[i];if(a.push(0),(e[r].marker!==l.marker||o!==l.token-1)&&(r=i),o=l.token,l.length=l.length||0,!l.close)continue;t.hasOwnProperty(l.marker)||(t[l.marker]=[-1,-1,-1,-1,-1,-1]);const d=t[l.marker][(l.open?3:0)+l.length%3];let f=r-a[r]-1,p=f;for(;f>d;f-=a[f]+1){const b=e[f];if(b.marker===l.marker&&b.open&&b.end<0){let v=!1;if((b.close||l.open)&&(b.length+l.length)%3===0&&(b.length%3!==0||l.length%3!==0)&&(v=!0),!v){const y=f>0&&!e[f-1].open?a[f-1]+1:0;a[i]=i-f+y,a[f]=y,l.open=!1,b.end=i,b.close=!1,p=-1,o=-2;break}}}p!==-1&&(t[l.marker][(l.open?3:0)+(l.length||0)%3]=p)}}function uy(e){const t=e.tokens_meta,n=e.tokens_meta.length;Ku(e.delimiters);for(let r=0;r<n;r++)t[r]&&t[r].delimiters&&Ku(t[r].delimiters)}function ly(e){let t,n,r=0;const o=e.tokens,a=e.tokens.length;for(t=n=0;t<a;t++)o[t].nesting<0&&r--,o[t].level=r,o[t].nesting>0&&r++,o[t].type==="text"&&t+1<a&&o[t+1].type==="text"?o[t+1].content=o[t].content+o[t+1].content:(t!==n&&(o[n]=o[t]),n++);t!==n&&(o.length=n)}const ss=[["text",Bx],["linkify",qx],["newline",Ux],["escape",Hx],["backticks",Kx],["strikethrough",zd.tokenize],["emphasis",Bd.tokenize],["link",Qx],["image",Zx],["autolink",ey],["html_inline",oy],["entity",iy]],is=[["balance_pairs",uy],["strikethrough",zd.postProcess],["emphasis",Bd.postProcess],["fragments_join",ly]];function uo(){this.ruler=new xt;for(let e=0;e<ss.length;e++)this.ruler.push(ss[e][0],ss[e][1]);this.ruler2=new xt;for(let e=0;e<is.length;e++)this.ruler2.push(is[e][0],is[e][1])}uo.prototype.skipToken=function(e){const t=e.pos,n=this.ruler.getRules(""),r=n.length,o=e.md.options.maxNesting,a=e.cache;if(typeof a[t]<"u"){e.pos=a[t];return}let i=!1;if(e.level<o){for(let l=0;l<r;l++)if(e.level++,i=n[l](e,!0),e.level--,i){if(t>=e.pos)throw new Error("inline rule didn't increment state.pos");break}}else e.pos=e.posMax;i||e.pos++,a[t]=e.pos};uo.prototype.tokenize=function(e){const t=this.ruler.getRules(""),n=t.length,r=e.posMax,o=e.md.options.maxNesting;for(;e.pos<r;){const a=e.pos;let i=!1;if(e.level<o){for(let l=0;l<n;l++)if(i=t[l](e,!1),i){if(a>=e.pos)throw new Error("inline rule didn't increment state.pos");break}}if(i){if(e.pos>=r)break;continue}e.pending+=e.src[e.pos++]}e.pending&&e.pushPending()};uo.prototype.parse=function(e,t,n,r){const o=new this.State(e,t,n,r);this.tokenize(o);const a=this.ruler2.getRules(""),i=a.length;for(let l=0;l<i;l++)a[l](o)};uo.prototype.State=io;function cy(e){const t={};e=e||{},t.src_Any=jd.source,t.src_Cc=Ad.source,t.src_Z=Nd.source,t.src_P=Ci.source,t.src_ZPCc=[t.src_Z,t.src_P,t.src_Cc].join("|"),t.src_ZCc=[t.src_Z,t.src_Cc].join("|");const n="[><ï½]";return t.src_pseudo_letter="(?:(?!"+n+"|"+t.src_ZPCc+")"+t.src_Any+")",t.src_ip4="(?:(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)",t.src_auth="(?:(?:(?!"+t.src_ZCc+"|[@/\\[\\]()]).)+@)?",t.src_port="(?::(?:6(?:[0-4]\\d{3}|5(?:[0-4]\\d{2}|5(?:[0-2]\\d|3[0-5])))|[1-5]?\\d{1,4}))?",t.src_host_terminator="(?=$|"+n+"|"+t.src_ZPCc+")(?!"+(e["---"]?"-(?!--)|":"-|")+"_|:\\d|\\.-|\\.(?!$|"+t.src_ZPCc+"))",t.src_path="(?:[/?#](?:(?!"+t.src_ZCc+"|"+n+`|[()[\\]{}.,"'?!\\-;]).|\\[(?:(?!`+t.src_ZCc+"|\\]).)*\\]|\\((?:(?!"+t.src_ZCc+"|[)]).)*\\)|\\{(?:(?!"+t.src_ZCc+'|[}]).)*\\}|\\"(?:(?!'+t.src_ZCc+`|["]).)+\\"|\\'(?:(?!`+t.src_ZCc+"|[']).)+\\'|\\'(?="+t.src_pseudo_letter+"|[-])|\\.{2,}[a-zA-Z0-9%/&]|\\.(?!"+t.src_ZCc+"|[.]|$)|"+(e["---"]?"\\-(?!--(?:[^-]|$))(?:-*)|":"\\-+|")+",(?!"+t.src_ZCc+"|$)|;(?!"+t.src_ZCc+"|$)|\\!+(?!"+t.src_ZCc+"|[!]|$)|\\?(?!"+t.src_ZCc+"|[?]|$))+|\\/)?",t.src_email_name='[\\-;:&=\\+\\$,\\.a-zA-Z0-9_][\\-;:&=\\+\\$,\\"\\.a-zA-Z0-9_]*',t.src_xn="xn--[a-z0-9\\-]{1,59}",t.src_domain_root="(?:"+t.src_xn+"|"+t.src_pseudo_letter+"{1,63})",t.src_domain="(?:"+t.src_xn+"|(?:"+t.src_pseudo_letter+")|(?:"+t.src_pseudo_letter+"(?:-|"+t.src_pseudo_letter+"){0,61}"+t.src_pseudo_letter+"))",t.src_host="(?:(?:(?:(?:"+t.src_domain+")\\.)*"+t.src_domain+"))",t.tpl_host_fuzzy="(?:"+t.src_ip4+"|(?:(?:(?:"+t.src_domain+")\\.)+(?:%TLDS%)))",t.tpl_host_no_ip_fuzzy="(?:(?:(?:"+t.src_domain+")\\.)+(?:%TLDS%))",t.src_host_strict=t.src_host+t.src_host_terminator,t.tpl_host_fuzzy_strict=t.tpl_host_fuzzy+t.src_host_terminator,t.src_host_port_strict=t.src_host+t.src_port+t.src_host_terminator,t.tpl_host_port_fuzzy_strict=t.tpl_host_fuzzy+t.src_port+t.src_host_terminator,t.tpl_host_port_no_ip_fuzzy_strict=t.tpl_host_no_ip_fuzzy+t.src_port+t.src_host_terminator,t.tpl_host_fuzzy_test="localhost|www\\.|\\.\\d{1,3}\\.|(?:\\.(?:%TLDS%)(?:"+t.src_ZPCc+"|>|$))",t.tpl_email_fuzzy="(^|"+n+'|"|\\(|'+t.src_ZCc+")("+t.src_email_name+"@"+t.tpl_host_fuzzy_strict+")",t.tpl_link_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|ï½]|"+t.src_ZPCc+"))((?![$+<=>^`|ï½])"+t.tpl_host_port_fuzzy_strict+t.src_path+")",t.tpl_link_no_ip_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|ï½]|"+t.src_ZPCc+"))((?![$+<=>^`|ï½])"+t.tpl_host_port_no_ip_fuzzy_strict+t.src_path+")",t}function Ms(e){return Array.prototype.slice.call(arguments,1).forEach(function(n){n&&Object.keys(n).forEach(function(r){e[r]=n[r]})}),e}function ha(e){return Object.prototype.toString.call(e)}function dy(e){return ha(e)==="[object String]"}function fy(e){return ha(e)==="[object Object]"}function hy(e){return ha(e)==="[object RegExp]"}function Vu(e){return ha(e)==="[object Function]"}function py(e){return e.replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}const $d={fuzzyLink:!0,fuzzyEmail:!0,fuzzyIP:!1};function my(e){return Object.keys(e||{}).reduce(function(t,n){return t||$d.hasOwnProperty(n)},!1)}const gy={"http:":{validate:function(e,t,n){const r=e.slice(t);return n.re.http||(n.re.http=new RegExp("^\\/\\/"+n.re.src_auth+n.re.src_host_port_strict+n.re.src_path,"i")),n.re.http.test(r)?r.match(n.re.http)[0].length:0}},"https:":"http:","ftp:":"http:","//":{validate:function(e,t,n){const r=e.slice(t);return n.re.no_http||(n.re.no_http=new RegExp("^"+n.re.src_auth+"(?:localhost|(?:(?:"+n.re.src_domain+")\\.)+"+n.re.src_domain_root+")"+n.re.src_port+n.re.src_host_terminator+n.re.src_path,"i")),n.re.no_http.test(r)?t>=3&&e[t-3]===":"||t>=3&&e[t-3]==="/"?0:r.match(n.re.no_http)[0].length:0}},"mailto:":{validate:function(e,t,n){const r=e.slice(t);return n.re.mailto||(n.re.mailto=new RegExp("^"+n.re.src_email_name+"@"+n.re.src_host_strict,"i")),n.re.mailto.test(r)?r.match(n.re.mailto)[0].length:0}}},by="a[cdefgilmnoqrstuwxz]|b[abdefghijmnorstvwyz]|c[acdfghiklmnoruvwxyz]|d[ejkmoz]|e[cegrstu]|f[ijkmor]|g[abdefghilmnpqrstuwy]|h[kmnrtu]|i[delmnoqrst]|j[emop]|k[eghimnprwyz]|l[abcikrstuvy]|m[acdeghklmnopqrstuvwxyz]|n[acefgilopruz]|om|p[aefghklmnrstwy]|qa|r[eosuw]|s[abcdeghijklmnortuvxyz]|t[cdfghjklmnortvwz]|u[agksyz]|v[aceginu]|w[fs]|y[et]|z[amw]",xy="biz|com|edu|gov|net|org|pro|web|xxx|aero|asia|coop|info|museum|name|shop|ÑÑ".split("|");function yy(e){e.__index__=-1,e.__text_cache__=""}function vy(e){return function(t,n){const r=t.slice(n);return e.test(r)?r.match(e)[0].length:0}}function Wu(){return function(e,t){t.normalize(e)}}function Qo(e){const t=e.re=cy(e.__opts__),n=e.__tlds__.slice();e.onCompile(),e.__tlds_replaced__||n.push(by),n.push(t.src_xn),t.src_tlds=n.join("|");function r(l){return l.replace("%TLDS%",t.src_tlds)}t.email_fuzzy=RegExp(r(t.tpl_email_fuzzy),"i"),t.link_fuzzy=RegExp(r(t.tpl_link_fuzzy),"i"),t.link_no_ip_fuzzy=RegExp(r(t.tpl_link_no_ip_fuzzy),"i"),t.host_fuzzy_test=RegExp(r(t.tpl_host_fuzzy_test),"i");const o=[];e.__compiled__={};function a(l,d){throw new Error('(LinkifyIt) Invalid schema "'+l+'": '+d)}Object.keys(e.__schemas__).forEach(function(l){const d=e.__schemas__[l];if(d===null)return;const f={validate:null,link:null};if(e.__compiled__[l]=f,fy(d)){hy(d.validate)?f.validate=vy(d.validate):Vu(d.validate)?f.validate=d.validate:a(l,d),Vu(d.normalize)?f.normalize=d.normalize:d.normalize?a(l,d):f.normalize=Wu();return}if(dy(d)){o.push(l);return}a(l,d)}),o.forEach(function(l){e.__compiled__[e.__schemas__[l]]&&(e.__compiled__[l].validate=e.__compiled__[e.__schemas__[l]].validate,e.__compiled__[l].normalize=e.__compiled__[e.__schemas__[l]].normalize)}),e.__compiled__[""]={validate:null,normalize:Wu()};const i=Object.keys(e.__compiled__).filter(function(l){return l.length>0&&e.__compiled__[l]}).map(py).join("|");e.re.schema_test=RegExp("(^|(?!_)(?:[><ï½]|"+t.src_ZPCc+"))("+i+")","i"),e.re.schema_search=RegExp("(^|(?!_)(?:[><ï½]|"+t.src_ZPCc+"))("+i+")","ig"),e.re.schema_at_start=RegExp("^"+e.re.schema_search.source,"i"),e.re.pretest=RegExp("("+e.re.schema_test.source+")|("+e.re.host_fuzzy_test.source+")|@","i"),yy(e)}function wy(e,t){const n=e.__index__,r=e.__last_index__,o=e.__text_cache__.slice(n,r);this.schema=e.__schema__.toLowerCase(),this.index=n+t,this.lastIndex=r+t,this.raw=o,this.text=o,this.url=o}function Is(e,t){const n=new wy(e,t);return e.__compiled__[n.schema].normalize(n,e),n}function At(e,t){if(!(this instanceof At))return new At(e,t);t||my(e)&&(t=e,e={}),this.__opts__=Ms({},$d,t),this.__index__=-1,this.__last_index__=-1,this.__schema__="",this.__text_cache__="",this.__schemas__=Ms({},gy,e),this.__compiled__={},this.__tlds__=xy,this.__tlds_replaced__=!1,this.re={},Qo(this)}At.prototype.add=function(t,n){return this.__schemas__[t]=n,Qo(this),this};At.prototype.set=function(t){return this.__opts__=Ms(this.__opts__,t),this};At.prototype.test=function(t){if(this.__text_cache__=t,this.__index__=-1,!t.length)return!1;let n,r,o,a,i,l,d,f,p;if(this.re.schema_test.test(t)){for(d=this.re.schema_search,d.lastIndex=0;(n=d.exec(t))!==null;)if(a=this.testSchemaAt(t,n[2],d.lastIndex),a){this.__schema__=n[2],this.__index__=n.index+n[1].length,this.__last_index__=n.index+n[0].length+a;break}}return this.__opts__.fuzzyLink&&this.__compiled__["http:"]&&(f=t.search(this.re.host_fuzzy_test),f>=0&&(this.__index__<0||f<this.__index__)&&(r=t.match(this.__opts__.fuzzyIP?this.re.link_fuzzy:this.re.link_no_ip_fuzzy))!==null&&(i=r.index+r[1].length,(this.__index__<0||i<this.__index__)&&(this.__schema__="",this.__index__=i,this.__last_index__=r.index+r[0].length))),this.__opts__.fuzzyEmail&&this.__compiled__["mailto:"]&&(p=t.indexOf("@"),p>=0&&(o=t.match(this.re.email_fuzzy))!==null&&(i=o.index+o[1].length,l=o.index+o[0].length,(this.__index__<0||i<this.__index__||i===this.__index__&&l>this.__last_index__)&&(this.__schema__="mailto:",this.__index__=i,this.__last_index__=l))),this.__index__>=0};At.prototype.pretest=function(t){return this.re.pretest.test(t)};At.prototype.testSchemaAt=function(t,n,r){return this.__compiled__[n.toLowerCase()]?this.__compiled__[n.toLowerCase()].validate(t,r,this):0};At.prototype.match=function(t){const n=[];let r=0;this.__index__>=0&&this.__text_cache__===t&&(n.push(Is(this,r)),r=this.__last_index__);let o=r?t.slice(r):t;for(;this.test(o);)n.push(Is(this,r)),o=o.slice(this.__last_index__),r+=this.__last_index__;return n.length?n:null};At.prototype.matchAtStart=function(t){if(this.__text_cache__=t,this.__index__=-1,!t.length)return null;const n=this.re.schema_at_start.exec(t);if(!n)return null;const r=this.testSchemaAt(t,n[2],n[0].length);return r?(this.__schema__=n[2],this.__index__=n.index+n[1].length,this.__last_index__=n.index+n[0].length+r,Is(this,0)):null};At.prototype.tlds=function(t,n){return t=Array.isArray(t)?t:[t],n?(this.__tlds__=this.__tlds__.concat(t).sort().filter(function(r,o,a){return r!==a[o-1]}).reverse(),Qo(this),this):(this.__tlds__=t.slice(),this.__tlds_replaced__=!0,Qo(this),this)};At.prototype.normalize=function(t){t.schema||(t.url="http://"+t.url),t.schema==="mailto:"&&!/^mailto:/i.test(t.url)&&(t.url="mailto:"+t.url)};At.prototype.onCompile=function(){};const ar=2147483647,Wt=36,ji=1,Jr=26,Cy=38,ky=700,qd=72,Ud=128,Hd="-",_y=/^xn--/,Sy=/[^\0-\x7F]/,Ey=/[\x2E\u3002\uFF0E\uFF61]/g,jy={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},us=Wt-ji,Gt=Math.floor,ls=String.fromCharCode;function yn(e){throw new RangeError(jy[e])}function Ay(e,t){const n=[];let r=e.length;for(;r--;)n[r]=t(e[r]);return n}function Kd(e,t){const n=e.split("@");let r="";n.length>1&&(r=n[0]+"@",e=n[1]),e=e.replace(Ey,".");const o=e.split("."),a=Ay(o,t).join(".");return r+a}function Vd(e){const t=[];let n=0;const r=e.length;for(;n<r;){const o=e.charCodeAt(n++);if(o>=55296&&o<=56319&&n<r){const a=e.charCodeAt(n++);(a&64512)==56320?t.push(((o&1023)<<10)+(a&1023)+65536):(t.push(o),n--)}else t.push(o)}return t}const Dy=e=>String.fromCodePoint(...e),Ny=function(e){return e>=48&&e<58?26+(e-48):e>=65&&e<91?e-65:e>=97&&e<123?e-97:Wt},Gu=function(e,t){return e+22+75*(e<26)-((t!=0)<<5)},Wd=function(e,t,n){let r=0;for(e=n?Gt(e/ky):e>>1,e+=Gt(e/t);e>us*Jr>>1;r+=Wt)e=Gt(e/us);return Gt(r+(us+1)*e/(e+Cy))},Gd=function(e){const t=[],n=e.length;let r=0,o=Ud,a=qd,i=e.lastIndexOf(Hd);i<0&&(i=0);for(let l=0;l<i;++l)e.charCodeAt(l)>=128&&yn("not-basic"),t.push(e.charCodeAt(l));for(let l=i>0?i+1:0;l<n;){const d=r;for(let p=1,b=Wt;;b+=Wt){l>=n&&yn("invalid-input");const v=Ny(e.charCodeAt(l++));v>=Wt&&yn("invalid-input"),v>Gt((ar-r)/p)&&yn("overflow"),r+=v*p;const y=b<=a?ji:b>=a+Jr?Jr:b-a;if(v<y)break;const C=Wt-y;p>Gt(ar/C)&&yn("overflow"),p*=C}const f=t.length+1;a=Wd(r-d,f,d==0),Gt(r/f)>ar-o&&yn("overflow"),o+=Gt(r/f),r%=f,t.splice(r++,0,o)}return String.fromCodePoint(...t)},Yd=function(e){const t=[];e=Vd(e);const n=e.length;let r=Ud,o=0,a=qd;for(const d of e)d<128&&t.push(ls(d));const i=t.length;let l=i;for(i&&t.push(Hd);l<n;){let d=ar;for(const p of e)p>=r&&p<d&&(d=p);const f=l+1;d-r>Gt((ar-o)/f)&&yn("overflow"),o+=(d-r)*f,r=d;for(const p of e)if(p<r&&++o>ar&&yn("overflow"),p===r){let b=o;for(let v=Wt;;v+=Wt){const y=v<=a?ji:v>=a+Jr?Jr:v-a;if(b<y)break;const C=b-y,k=Wt-y;t.push(ls(Gu(y+C%k,0))),b=Gt(C/k)}t.push(ls(Gu(b,0))),a=Wd(o,f,l===i),o=0,++l}++o,++r}return t.join("")},Ty=function(e){return Kd(e,function(t){return _y.test(t)?Gd(t.slice(4).toLowerCase()):t})},My=function(e){return Kd(e,function(t){return Sy.test(t)?"xn--"+Yd(t):t})},Qd={version:"2.3.1",ucs2:{decode:Vd,encode:Dy},decode:Gd,encode:Yd,toASCII:My,toUnicode:Ty},Iy={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"ââââ",highlight:null,maxNesting:100},components:{core:{},block:{},inline:{}}},Py={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"ââââ",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline","text_join"]},block:{rules:["paragraph"]},inline:{rules:["text"],rules2:["balance_pairs","fragments_join"]}}},Ry={options:{html:!0,xhtmlOut:!0,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"ââââ",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline","text_join"]},block:{rules:["blockquote","code","fence","heading","hr","html_block","lheading","list","reference","paragraph"]},inline:{rules:["autolink","backticks","emphasis","entity","escape","html_inline","image","link","newline","text"],rules2:["balance_pairs","emphasis","fragments_join"]}}},Fy={default:Iy,zero:Py,commonmark:Ry},Oy=/^(vbscript|javascript|file|data):/,Ly=/^data:image\/(gif|png|jpeg|webp);/;function zy(e){const t=e.trim().toLowerCase();return Oy.test(t)?Ly.test(t):!0}const Zd=["http:","https:","mailto:"];function By(e){const t=wi(e,!0);if(t.hostname&&(!t.protocol||Zd.indexOf(t.protocol)>=0))try{t.hostname=Qd.toASCII(t.hostname)}catch{}return so(vi(t))}function $y(e){const t=wi(e,!0);if(t.hostname&&(!t.protocol||Zd.indexOf(t.protocol)>=0))try{t.hostname=Qd.toUnicode(t.hostname)}catch{}return dr(vi(t),dr.defaultChars+"%")}function yt(e,t){if(!(this instanceof yt))return new yt(e,t);t||ki(e)||(t=e||{},e="default"),this.inline=new uo,this.block=new fa,this.core=new Si,this.renderer=new vr,this.linkify=new At,this.validateLink=zy,this.normalizeLink=By,this.normalizeLinkText=$y,this.utils=Ub,this.helpers=ca({},Wb),this.options={},this.configure(e),t&&this.set(t)}yt.prototype.set=function(e){return ca(this.options,e),this};yt.prototype.configure=function(e){const t=this;if(ki(e)){const n=e;if(e=Fy[n],!e)throw new Error('Wrong `markdown-it` preset "'+n+'", check name')}if(!e)throw new Error("Wrong `markdown-it` preset, can't be empty");return e.options&&t.set(e.options),e.components&&Object.keys(e.components).forEach(function(n){e.components[n].rules&&t[n].ruler.enableOnly(e.components[n].rules),e.components[n].rules2&&t[n].ruler2.enableOnly(e.components[n].rules2)}),this};yt.prototype.enable=function(e,t){let n=[];Array.isArray(e)||(e=[e]),["core","block","inline"].forEach(function(o){n=n.concat(this[o].ruler.enable(e,!0))},this),n=n.concat(this.inline.ruler2.enable(e,!0));const r=e.filter(function(o){return n.indexOf(o)<0});if(r.length&&!t)throw new Error("MarkdownIt. Failed to enable unknown rule(s): "+r);return this};yt.prototype.disable=function(e,t){let n=[];Array.isArray(e)||(e=[e]),["core","block","inline"].forEach(function(o){n=n.concat(this[o].ruler.disable(e,!0))},this),n=n.concat(this.inline.ruler2.disable(e,!0));const r=e.filter(function(o){return n.indexOf(o)<0});if(r.length&&!t)throw new Error("MarkdownIt. Failed to disable unknown rule(s): "+r);return this};yt.prototype.use=function(e){const t=[this].concat(Array.prototype.slice.call(arguments,1));return e.apply(e,t),this};yt.prototype.parse=function(e,t){if(typeof e!="string")throw new Error("Input data should be a String");const n=new this.core.State(e,this,t);return this.core.process(n),n.tokens};yt.prototype.render=function(e,t){return t=t||{},this.renderer.render(this.parse(e,t),this.options,t)};yt.prototype.parseInline=function(e,t){const n=new this.core.State(e,this,t);return n.inlineMode=!0,this.core.process(n),n.tokens};yt.prototype.renderInline=function(e,t){return t=t||{},this.renderer.render(this.parseInline(e,t),this.options,t)};const qy=new Fp({nodes:{doc:{content:"block+"},paragraph:{content:"inline*",group:"block",parseDOM:[{tag:"p"}],toDOM(){return["p",0]}},blockquote:{content:"block+",group:"block",parseDOM:[{tag:"blockquote"}],toDOM(){return["blockquote",0]}},horizontal_rule:{group:"block",parseDOM:[{tag:"hr"}],toDOM(){return["div",["hr"]]}},heading:{attrs:{level:{default:1}},content:"(text | image)*",group:"block",defining:!0,parseDOM:[{tag:"h1",attrs:{level:1}},{tag:"h2",attrs:{level:2}},{tag:"h3",attrs:{level:3}},{tag:"h4",attrs:{level:4}},{tag:"h5",attrs:{level:5}},{tag:"h6",attrs:{level:6}}],toDOM(e){return["h"+e.attrs.level,0]}},code_block:{content:"text*",group:"block",code:!0,defining:!0,marks:"",attrs:{params:{default:""}},parseDOM:[{tag:"pre",preserveWhitespace:"full",getAttrs:e=>({params:e.getAttribute("data-params")||""})}],toDOM(e){return["pre",e.attrs.params?{"data-params":e.attrs.params}:{},["code",0]]}},ordered_list:{content:"list_item+",group:"block",attrs:{order:{default:1},tight:{default:!1}},parseDOM:[{tag:"ol",getAttrs(e){return{order:e.hasAttribute("start")?+e.getAttribute("start"):1,tight:e.hasAttribute("data-tight")}}}],toDOM(e){return["ol",{start:e.attrs.order==1?null:e.attrs.order,"data-tight":e.attrs.tight?"true":null},0]}},bullet_list:{content:"list_item+",group:"block",attrs:{tight:{default:!1}},parseDOM:[{tag:"ul",getAttrs:e=>({tight:e.hasAttribute("data-tight")})}],toDOM(e){return["ul",{"data-tight":e.attrs.tight?"true":null},0]}},list_item:{content:"block+",defining:!0,parseDOM:[{tag:"li"}],toDOM(){return["li",0]}},text:{group:"inline"},image:{inline:!0,attrs:{src:{},alt:{default:null},title:{default:null}},group:"inline",draggable:!0,parseDOM:[{tag:"img[src]",getAttrs(e){return{src:e.getAttribute("src"),title:e.getAttribute("title"),alt:e.getAttribute("alt")}}}],toDOM(e){return["img",e.attrs]}},hard_break:{inline:!0,group:"inline",selectable:!1,parseDOM:[{tag:"br"}],toDOM(){return["br"]}}},marks:{em:{parseDOM:[{tag:"i"},{tag:"em"},{style:"font-style=italic"},{style:"font-style=normal",clearMark:e=>e.type.name=="em"}],toDOM(){return["em"]}},strong:{parseDOM:[{tag:"strong"},{tag:"b",getAttrs:e=>e.style.fontWeight!="normal"&&null},{style:"font-weight=400",clearMark:e=>e.type.name=="strong"},{style:"font-weight",getAttrs:e=>/^(bold(er)?|[5-9]\d{2,})$/.test(e)&&null}],toDOM(){return["strong"]}},link:{attrs:{href:{},title:{default:null}},inclusive:!1,parseDOM:[{tag:"a[href]",getAttrs(e){return{href:e.getAttribute("href"),title:e.getAttribute("title")}}}],toDOM(e){return["a",e.attrs]}},code:{code:!0,parseDOM:[{tag:"code"}],toDOM(){return["code"]}}}});function Uy(e,t){if(e.isText&&t.isText&&ys.sameSet(e.marks,t.marks))return e.withText(e.text+t.text)}class Hy{constructor(t,n){this.schema=t,this.tokenHandlers=n,this.stack=[{type:t.topNodeType,attrs:null,content:[],marks:ys.none}]}top(){return this.stack[this.stack.length-1]}push(t){this.stack.length&&this.top().content.push(t)}addText(t){if(!t)return;let n=this.top(),r=n.content,o=r[r.length-1],a=this.schema.text(t,n.marks),i;o&&(i=Uy(o,a))?r[r.length-1]=i:r.push(a)}openMark(t){let n=this.top();n.marks=t.addToSet(n.marks)}closeMark(t){let n=this.top();n.marks=t.removeFromSet(n.marks)}parseTokens(t){for(let n=0;n<t.length;n++){let r=t[n],o=this.tokenHandlers[r.type];if(!o)throw new Error("Token type `"+r.type+"` not supported by Markdown parser");o(this,r,t,n)}}addNode(t,n,r){let o=this.top(),a=t.createAndFill(n,r,o?o.marks:[]);return a?(this.push(a),a):null}openNode(t,n){this.stack.push({type:t,attrs:n,content:[],marks:ys.none})}closeNode(){let t=this.stack.pop();return this.addNode(t.type,t.attrs,t.content)}}function Br(e,t,n,r){return e.getAttrs?e.getAttrs(t,n,r):e.attrs instanceof Function?e.attrs(t):e.attrs}function cs(e,t){return e.noCloseToken||t=="code_inline"||t=="code_block"||t=="fence"}function Yu(e){return e[e.length-1]==`
`?e.slice(0,e.length-1):e}function ds(){}function Ky(e,t){let n=Object.create(null);for(let r in t){let o=t[r];if(o.block){let a=e.nodeType(o.block);cs(o,r)?n[r]=(i,l,d,f)=>{i.openNode(a,Br(o,l,d,f)),i.addText(Yu(l.content)),i.closeNode()}:(n[r+"_open"]=(i,l,d,f)=>i.openNode(a,Br(o,l,d,f)),n[r+"_close"]=i=>i.closeNode())}else if(o.node){let a=e.nodeType(o.node);n[r]=(i,l,d,f)=>i.addNode(a,Br(o,l,d,f))}else if(o.mark){let a=e.marks[o.mark];cs(o,r)?n[r]=(i,l,d,f)=>{i.openMark(a.create(Br(o,l,d,f))),i.addText(Yu(l.content)),i.closeMark(a)}:(n[r+"_open"]=(i,l,d,f)=>i.openMark(a.create(Br(o,l,d,f))),n[r+"_close"]=i=>i.closeMark(a))}else if(o.ignore)cs(o,r)?n[r]=ds:(n[r+"_open"]=ds,n[r+"_close"]=ds);else throw new RangeError("Unrecognized parsing spec "+JSON.stringify(o))}return n.text=(r,o)=>r.addText(o.content),n.inline=(r,o)=>r.parseTokens(o.children),n.softbreak=n.softbreak||(r=>r.addText(" ")),n}let Vy=class{constructor(t,n,r){this.schema=t,this.tokenizer=n,this.tokens=r,this.tokenHandlers=Ky(t,r)}parse(t,n={}){let r=new Hy(this.schema,this.tokenHandlers),o;r.parseTokens(this.tokenizer.parse(t,n));do o=r.closeNode();while(r.stack.length);return o||this.schema.topNodeType.createAndFill()}};function Qu(e,t){for(;++t<e.length;)if(e[t].type!="list_item_open")return e[t].hidden;return!1}new Vy(qy,yt("commonmark",{html:!1}),{blockquote:{block:"blockquote"},paragraph:{block:"paragraph"},list_item:{block:"list_item"},bullet_list:{block:"bullet_list",getAttrs:(e,t,n)=>({tight:Qu(t,n)})},ordered_list:{block:"ordered_list",getAttrs:(e,t,n)=>({order:+e.attrGet("start")||1,tight:Qu(t,n)})},heading:{block:"heading",getAttrs:e=>({level:+e.tag.slice(1)})},code_block:{block:"code_block",noCloseToken:!0},fence:{block:"code_block",getAttrs:e=>({params:e.info||""}),noCloseToken:!0},hr:{node:"horizontal_rule"},image:{node:"image",getAttrs:e=>({src:e.attrGet("src"),title:e.attrGet("title")||null,alt:e.children[0]&&e.children[0].content||null})},hardbreak:{node:"hard_break"},em:{mark:"em"},strong:{mark:"strong"},link:{mark:"link",getAttrs:e=>({href:e.attrGet("href"),title:e.attrGet("title")||null})},code_inline:{mark:"code",noCloseToken:!0}});const Wy={open:"",close:"",mixable:!0};let Gy=class{constructor(t,n,r={}){this.nodes=t,this.marks=n,this.options=r}serialize(t,n={}){n=Object.assign({},this.options,n);let r=new Xd(this.nodes,this.marks,n);return r.renderContent(t),r.out}};const en=new Gy({blockquote(e,t){e.wrapBlock("> ",null,t,()=>e.renderContent(t))},code_block(e,t){const n=t.textContent.match(/`{3,}/gm),r=n?n.sort().slice(-1)[0]+"`":"```";e.write(r+(t.attrs.params||"")+`
`),e.text(t.textContent,!1),e.write(`
`),e.write(r),e.closeBlock(t)},heading(e,t){e.write(e.repeat("#",t.attrs.level)+" "),e.renderInline(t,!1),e.closeBlock(t)},horizontal_rule(e,t){e.write(t.attrs.markup||"---"),e.closeBlock(t)},bullet_list(e,t){e.renderList(t,"  ",()=>(t.attrs.bullet||"*")+" ")},ordered_list(e,t){let n=t.attrs.order||1,r=String(n+t.childCount-1).length,o=e.repeat(" ",r+2);e.renderList(t,o,a=>{let i=String(n+a);return e.repeat(" ",r-i.length)+i+". "})},list_item(e,t){e.renderContent(t)},paragraph(e,t){e.renderInline(t),e.closeBlock(t)},image(e,t){e.write("!["+e.esc(t.attrs.alt||"")+"]("+t.attrs.src.replace(/[\(\)]/g,"\\$&")+(t.attrs.title?' "'+t.attrs.title.replace(/"/g,'\\"')+'"':"")+")")},hard_break(e,t,n,r){for(let o=r+1;o<n.childCount;o++)if(n.child(o).type!=t.type){e.write(`\\
`);return}},text(e,t){e.text(t.text,!e.inAutolink)}},{em:{open:"*",close:"*",mixable:!0,expelEnclosingWhitespace:!0},strong:{open:"**",close:"**",mixable:!0,expelEnclosingWhitespace:!0},link:{open(e,t,n,r){return e.inAutolink=Yy(t,n,r),e.inAutolink?"<":"["},close(e,t,n,r){let{inAutolink:o}=e;return e.inAutolink=void 0,o?">":"]("+t.attrs.href.replace(/[\(\)"]/g,"\\$&")+(t.attrs.title?` "${t.attrs.title.replace(/"/g,'\\"')}"`:"")+")"},mixable:!0},code:{open(e,t,n,r){return Zu(n.child(r),-1)},close(e,t,n,r){return Zu(n.child(r-1),1)},escape:!1}});function Zu(e,t){let n=/`+/g,r,o=0;if(e.isText)for(;r=n.exec(e.text);)o=Math.max(o,r[0].length);let a=o>0&&t>0?" `":"`";for(let i=0;i<o;i++)a+="`";return o>0&&t<0&&(a+=" "),a}function Yy(e,t,n){if(e.attrs.title||!/^\w+:/.test(e.attrs.href))return!1;let r=t.child(n);return!r.isText||r.text!=e.attrs.href||r.marks[r.marks.length-1]!=e?!1:n==t.childCount-1||!e.isInSet(t.child(n+1).marks)}let Xd=class{constructor(t,n,r){this.nodes=t,this.marks=n,this.options=r,this.delim="",this.out="",this.closed=null,this.inAutolink=void 0,this.atBlockStart=!1,this.inTightList=!1,typeof this.options.tightLists>"u"&&(this.options.tightLists=!1),typeof this.options.hardBreakNodeName>"u"&&(this.options.hardBreakNodeName="hard_break")}flushClose(t=2){if(this.closed){if(this.atBlank()||(this.out+=`
`),t>1){let n=this.delim,r=/\s+$/.exec(n);r&&(n=n.slice(0,n.length-r[0].length));for(let o=1;o<t;o++)this.out+=n+`
`}this.closed=null}}getMark(t){let n=this.marks[t];if(!n){if(this.options.strict!==!1)throw new Error(`Mark type \`${t}\` not supported by Markdown renderer`);n=Wy}return n}wrapBlock(t,n,r,o){let a=this.delim;this.write(n??t),this.delim+=t,o(),this.delim=a,this.closeBlock(r)}atBlank(){return/(^|\n)$/.test(this.out)}ensureNewLine(){this.atBlank()||(this.out+=`
`)}write(t){this.flushClose(),this.delim&&this.atBlank()&&(this.out+=this.delim),t&&(this.out+=t)}closeBlock(t){this.closed=t}text(t,n=!0){let r=t.split(`
`);for(let o=0;o<r.length;o++)this.write(),!n&&r[o][0]=="["&&/(^|[^\\])\!$/.test(this.out)&&(this.out=this.out.slice(0,this.out.length-1)+"\\!"),this.out+=n?this.esc(r[o],this.atBlockStart):r[o],o!=r.length-1&&(this.out+=`
`)}render(t,n,r){if(this.nodes[t.type.name])this.nodes[t.type.name](this,t,n,r);else{if(this.options.strict!==!1)throw new Error("Token type `"+t.type.name+"` not supported by Markdown renderer");t.type.isLeaf||(t.type.inlineContent?this.renderInline(t):this.renderContent(t),t.isBlock&&this.closeBlock(t))}}renderContent(t){t.forEach((n,r,o)=>this.render(n,t,o))}renderInline(t,n=!0){this.atBlockStart=n;let r=[],o="",a=(i,l,d)=>{let f=i?i.marks:[];i&&i.type.name===this.options.hardBreakNodeName&&(f=f.filter(k=>{if(d+1==t.childCount)return!1;let A=t.child(d+1);return k.isInSet(A.marks)&&(!A.isText||/\S/.test(A.text))}));let p=o;if(o="",i&&i.isText&&f.some(k=>{let A=this.getMark(k.type.name);return A&&A.expelEnclosingWhitespace&&!k.isInSet(r)})){let[k,A,j]=/^(\s*)(.*)$/m.exec(i.text);A&&(p+=A,i=j?i.withText(j):null,i||(f=r))}if(i&&i.isText&&f.some(k=>{let A=this.getMark(k.type.name);return A&&A.expelEnclosingWhitespace&&(d==t.childCount-1||!k.isInSet(t.child(d+1).marks))})){let[k,A,j]=/^(.*?)(\s*)$/m.exec(i.text);j&&(o=j,i=A?i.withText(A):null,i||(f=r))}let b=f.length?f[f.length-1]:null,v=b&&this.getMark(b.type.name).escape===!1,y=f.length-(v?1:0);e:for(let k=0;k<y;k++){let A=f[k];if(!this.getMark(A.type.name).mixable)break;for(let j=0;j<r.length;j++){let _=r[j];if(!this.getMark(_.type.name).mixable)break;if(A.eq(_)){k>j?f=f.slice(0,j).concat(A).concat(f.slice(j,k)).concat(f.slice(k+1,y)):j>k&&(f=f.slice(0,k).concat(f.slice(k+1,j)).concat(A).concat(f.slice(j,y)));continue e}}}let C=0;for(;C<Math.min(r.length,y)&&f[C].eq(r[C]);)++C;for(;C<r.length;)this.text(this.markString(r.pop(),!1,t,d),!1);if(p&&this.text(p),i){for(;r.length<y;){let k=f[r.length];r.push(k),this.text(this.markString(k,!0,t,d),!1),this.atBlockStart=!1}v&&i.isText?this.text(this.markString(b,!0,t,d)+i.text+this.markString(b,!1,t,d+1),!1):this.render(i,t,d),this.atBlockStart=!1}i?.isText&&i.nodeSize>0&&(this.atBlockStart=!1)};t.forEach(a),a(null,0,t.childCount),this.atBlockStart=!1}renderList(t,n,r){this.closed&&this.closed.type==t.type?this.flushClose(3):this.inTightList&&this.flushClose(1);let o=typeof t.attrs.tight<"u"?t.attrs.tight:this.options.tightLists,a=this.inTightList;this.inTightList=o,t.forEach((i,l,d)=>{d&&o&&this.flushClose(1),this.wrapBlock(n,r(d),t,()=>this.render(i,t,d))}),this.inTightList=a}esc(t,n=!1){return t=t.replace(/[`*\\~\[\]_]/g,(r,o)=>r=="_"&&o>0&&o+1<t.length&&t[o-1].match(/\w/)&&t[o+1].match(/\w/)?r:"\\"+r),n&&(t=t.replace(/^(\+[ ]|[\-*>])/,"\\$&").replace(/^(\s*)(#{1,6})(\s|$)/,"$1\\$2$3").replace(/^(\s*\d+)\.\s/,"$1\\. ")),this.options.escapeExtraCharacters&&(t=t.replace(this.options.escapeExtraCharacters,"\\$&")),t}quote(t){let n=t.indexOf('"')==-1?'""':t.indexOf("'")==-1?"''":"()";return n[0]+t+n[1]}repeat(t,n){let r="";for(let o=0;o<n;o++)r+=t;return r}markString(t,n,r,o){let a=this.getMark(t.type.name),i=n?a.open:a.close;return typeof i=="string"?i:i(this,t,r,o)}getEnclosingWhitespace(t){return{leading:(t.match(/^(\s+)/)||[void 0])[0],trailing:(t.match(/(\s+)$/)||[void 0])[0]}}};var Ps=!0,Jd=!1,ef=!1,Qy=function(e,t){t&&(Ps=!t.enabled,Jd=!!t.label,ef=!!t.labelAfter),e.core.ruler.after("inline","github-task-lists",function(n){for(var r=n.tokens,o=2;o<r.length;o++)Xy(r,o)&&(Jy(r[o],n.Token),Xu(r[o-2],"class","task-list-item"+(Ps?"":" enabled")),Xu(r[Zy(r,o-2)],"class","contains-task-list"))})};function Xu(e,t,n){var r=e.attrIndex(t),o=[t,n];r<0?e.attrPush(o):e.attrs[r]=o}function Zy(e,t){for(var n=e[t].level-1,r=t-1;r>=0;r--)if(e[r].level===n)return r;return-1}function Xy(e,t){return o2(e[t])&&a2(e[t-1])&&s2(e[t-2])&&i2(e[t])}function Jy(e,t){if(e.children.unshift(e2(e,t)),e.children[1].content=e.children[1].content.slice(3),e.content=e.content.slice(3),Jd)if(ef){e.children.pop();var n="task-item-"+Math.ceil(Math.random()*(1e4*1e3)-1e3);e.children[0].content=e.children[0].content.slice(0,-1)+' id="'+n+'">',e.children.push(r2(e.content,n,t))}else e.children.unshift(t2(t)),e.children.push(n2(t))}function e2(e,t){var n=new t("html_inline","",0),r=Ps?' disabled="" ':"";return e.content.indexOf("[ ] ")===0?n.content='<input class="task-list-item-checkbox"'+r+'type="checkbox">':(e.content.indexOf("[x] ")===0||e.content.indexOf("[X] ")===0)&&(n.content='<input class="task-list-item-checkbox" checked=""'+r+'type="checkbox">'),n}function t2(e){var t=new e("html_inline","",0);return t.content="<label>",t}function n2(e){var t=new e("html_inline","",0);return t.content="</label>",t}function r2(e,t,n){var r=new n("html_inline","",0);return r.content='<label class="task-list-item-label" for="'+t+'">'+e+"</label>",r.attrs=[{for:t}],r}function o2(e){return e.type==="inline"}function a2(e){return e.type==="paragraph_open"}function s2(e){return e.type==="list_item_open"}function i2(e){return e.content.indexOf("[ ] ")===0||e.content.indexOf("[x] ")===0||e.content.indexOf("[X] ")===0}const u2=Nl(Qy);var l2=Object.defineProperty,c2=(e,t,n)=>t in e?l2(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Zo=(e,t,n)=>c2(e,typeof t!="symbol"?t+"":t,n);const d2=Qs.create({name:"markdownTightLists",addOptions:()=>({tight:!0,tightClass:"tight",listTypes:["bulletList","orderedList"]}),addGlobalAttributes(){return[{types:this.options.listTypes,attributes:{tight:{default:this.options.tight,parseHTML:e=>e.getAttribute("data-tight")==="true"||!e.querySelector("p"),renderHTML:e=>({class:e.tight?this.options.tightClass:null,"data-tight":e.tight?"true":null})}}}]},addCommands(){var e=this;return{toggleTight:function(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return n=>{let{editor:r,commands:o}=n;function a(i){if(!r.isActive(i))return!1;const l=r.getAttributes(i);return o.updateAttributes(i,{tight:t??!(l!=null&&l.tight)})}return e.options.listTypes.some(i=>a(i))}}}}}),Ju=yt();function tf(e,t){return Ju.inline.State.prototype.scanDelims.call({src:e,posMax:e.length}),new Ju.inline.State(e,null,null,[]).scanDelims(t,!0)}function nf(e,t,n,r){let o=e.substring(0,n)+e.substring(n+t.length);return o=o.substring(0,n+r)+t+o.substring(n+r),o}function f2(e,t,n,r){let o=n,a=e;for(;o<r&&!tf(a,o).can_open;)a=nf(a,t,o,1),o++;return{text:a,from:o,to:r}}function h2(e,t,n,r){let o=r,a=e;for(;o>n&&!tf(a,o).can_close;)a=nf(a,t,o,-1),o--;return{text:a,from:n,to:o}}function p2(e,t,n,r){let o={text:e,from:n,to:r};return o=f2(o.text,t,o.from,o.to),o=h2(o.text,t,o.from,o.to),o.to-o.from<t.length+1&&(o.text=o.text.substring(0,o.from)+o.text.substring(o.to+t.length)),o.text}class m2 extends Xd{constructor(t,n,r){super(t,n,r??{}),Zo(this,"inTable",!1),this.inlines=[]}render(t,n,r){super.render(t,n,r);const o=this.inlines[this.inlines.length-1];if(o!=null&&o.start&&o!==null&&o!==void 0&&o.end){const{delimiter:a,start:i,end:l}=this.normalizeInline(o);this.out=p2(this.out,a,i,l),this.inlines.pop()}}markString(t,n,r,o){const a=this.marks[t.type.name];if(a.expelEnclosingWhitespace)if(n)this.inlines.push({start:this.out.length,delimiter:a.open});else{const i=this.inlines.pop();this.inlines.push({...i,end:this.out.length})}return super.markString(t,n,r,o)}normalizeInline(t){let{start:n,end:r}=t;for(;this.out.charAt(n).match(/\s/);)n++;return{...t,start:n}}}const rf=mr.create({name:"markdownHTMLMark",addStorage(){return{markdown:{serialize:{open(e,t){var n,r;return this.editor.storage.markdown.options.html?(n=(r=el(t))===null||r===void 0?void 0:r[0])!==null&&n!==void 0?n:"":(console.warn(`Tiptap Markdown: "${t.type.name}" mark is only available in html mode`),"")},close(e,t){var n,r;return this.editor.storage.markdown.options.html&&(n=(r=el(t))===null||r===void 0?void 0:r[1])!==null&&n!==void 0?n:""}},parse:{}}}}});function el(e){const t=e.type.schema,n=t.text(" ",[e]),o=Tl(vs.from(n),t).match(/^(<.*?>) (<\/.*?>)$/);return o?[o[1],o[2]]:null}function Ai(e){const t=`<body>${e}</body>`;return new window.DOMParser().parseFromString(t,"text/html").body}function g2(e){return e?.replace(/</g,"&lt;").replace(/>/g,"&gt;")}function b2(e){const t=e.parentElement,n=t.cloneNode();for(;t.firstChild&&t.firstChild!==e;)n.appendChild(t.firstChild);n.childNodes.length>0&&t.parentElement.insertBefore(n,t),t.parentElement.insertBefore(e,t),t.childNodes.length===0&&t.remove()}function x2(e){const t=e.parentNode;for(;e.firstChild;)t.insertBefore(e.firstChild,e);t.removeChild(e)}const pa=ft.create({name:"markdownHTMLNode",addStorage(){return{markdown:{serialize(e,t,n){this.editor.storage.markdown.options.html?e.write(y2(t,n)):(console.warn(`Tiptap Markdown: "${t.type.name}" node is only available in html mode`),e.write(`[${t.type.name}]`)),t.isBlock&&e.closeBlock(t)},parse:{}}}}});function y2(e,t){const n=e.type.schema,r=Tl(vs.from(e),n);return e.isBlock&&(t instanceof vs||t.type.name===n.topNodeType.name)?v2(r):r}function v2(e){const n=Ai(e).firstElementChild;return n.innerHTML=n.innerHTML.trim()?`
${n.innerHTML}
`:`
`,n.outerHTML}const w2=ft.create({name:"blockquote"}),C2=w2.extend({addStorage(){return{markdown:{serialize:en.nodes.blockquote,parse:{}}}}}),k2=ft.create({name:"bulletList"}),of=k2.extend({addStorage(){return{markdown:{serialize(e,t){return e.renderList(t,"  ",()=>(this.editor.storage.markdown.options.bulletListMarker||"-")+" ")},parse:{}}}}}),_2=ft.create({name:"codeBlock"}),S2=_2.extend({addStorage(){return{markdown:{serialize(e,t){e.write("```"+(t.attrs.language||"")+`
`),e.text(t.textContent,!1),e.ensureNewLine(),e.write("```"),e.closeBlock(t)},parse:{setup(e){var t;e.set({langPrefix:(t=this.options.languageClassPrefix)!==null&&t!==void 0?t:"language-"})},updateDOM(e){e.innerHTML=e.innerHTML.replace(/\n<\/code><\/pre>/g,"</code></pre>")}}}}}}),E2=ft.create({name:"hardBreak"}),af=E2.extend({addStorage(){return{markdown:{serialize(e,t,n,r){for(let o=r+1;o<n.childCount;o++)if(n.child(o).type!=t.type){e.write(e.inTable?pa.storage.markdown.serialize.call(this,e,t,n):`\\
`);return}},parse:{}}}}}),j2=ft.create({name:"heading"}),A2=j2.extend({addStorage(){return{markdown:{serialize:en.nodes.heading,parse:{}}}}}),D2=ft.create({name:"horizontalRule"}),N2=D2.extend({addStorage(){return{markdown:{serialize:en.nodes.horizontal_rule,parse:{}}}}}),T2=ft.create({name:"image"}),M2=T2.extend({addStorage(){return{markdown:{serialize:en.nodes.image,parse:{}}}}}),I2=ft.create({name:"listItem"}),P2=I2.extend({addStorage(){return{markdown:{serialize:en.nodes.list_item,parse:{}}}}}),R2=ft.create({name:"orderedList"});function F2(e,t,n){let r=0;for(;n-r>0&&t.child(n-r-1).type.name===e.type.name;r++);return r}const O2=R2.extend({addStorage(){return{markdown:{serialize(e,t,n,r){const o=t.attrs.start||1,a=String(o+t.childCount-1).length,i=e.repeat(" ",a+2),d=F2(t,n,r)%2?") ":". ";e.renderList(t,i,f=>{const p=String(o+f);return e.repeat(" ",a-p.length)+p+d})},parse:{}}}}}),L2=ft.create({name:"paragraph"}),z2=L2.extend({addStorage(){return{markdown:{serialize:en.nodes.paragraph,parse:{}}}}});function fs(e){var t,n;return(t=e==null||(n=e.content)===null||n===void 0?void 0:n.content)!==null&&t!==void 0?t:[]}const B2=ft.create({name:"table"}),$2=B2.extend({addStorage(){return{markdown:{serialize(e,t,n){if(!q2(t)){pa.storage.markdown.serialize.call(this,e,t,n);return}e.inTable=!0,t.forEach((r,o,a)=>{if(e.write("| "),r.forEach((i,l,d)=>{d&&e.write(" | ");const f=i.firstChild;f.textContent.trim()&&e.renderInline(f)}),e.write(" |"),e.ensureNewLine(),!a){const i=Array.from({length:r.childCount}).map(()=>"---").join(" | ");e.write(`| ${i} |`),e.ensureNewLine()}}),e.closeBlock(t),e.inTable=!1},parse:{}}}}});function tl(e){return e.attrs.colspan>1||e.attrs.rowspan>1}function q2(e){const t=fs(e),n=t[0],r=t.slice(1);return!(fs(n).some(o=>o.type.name!=="tableHeader"||tl(o)||o.childCount>1)||r.some(o=>fs(o).some(a=>a.type.name==="tableHeader"||tl(a)||a.childCount>1)))}const U2=ft.create({name:"taskItem"}),H2=U2.extend({addStorage(){return{markdown:{serialize(e,t){const n=t.attrs.checked?"[x]":"[ ]";e.write(`${n} `),e.renderContent(t)},parse:{updateDOM(e){[...e.querySelectorAll(".task-list-item")].forEach(t=>{const n=t.querySelector("input");t.setAttribute("data-type","taskItem"),n&&(t.setAttribute("data-checked",n.checked),n.remove())})}}}}}}),K2=ft.create({name:"taskList"}),V2=K2.extend({addStorage(){return{markdown:{serialize:of.storage.markdown.serialize,parse:{setup(e){e.use(u2)},updateDOM(e){[...e.querySelectorAll(".contains-task-list")].forEach(t=>{t.setAttribute("data-type","taskList")})}}}}}}),W2=ft.create({name:"text"}),G2=W2.extend({addStorage(){return{markdown:{serialize(e,t){e.text(g2(t.text))},parse:{}}}}}),Y2=mr.create({name:"bold"}),Q2=Y2.extend({addStorage(){return{markdown:{serialize:en.marks.strong,parse:{}}}}}),Z2=mr.create({name:"code"}),X2=Z2.extend({addStorage(){return{markdown:{serialize:en.marks.code,parse:{}}}}}),J2=mr.create({name:"italic"}),ev=J2.extend({addStorage(){return{markdown:{serialize:en.marks.em,parse:{}}}}}),tv=mr.create({name:"link"}),nv=tv.extend({addStorage(){return{markdown:{serialize:en.marks.link,parse:{}}}}}),rv=mr.create({name:"strike"}),ov=rv.extend({addStorage(){return{markdown:{serialize:{open:"~~",close:"~~",expelEnclosingWhitespace:!0},parse:{}}}}}),av=[C2,of,S2,af,A2,N2,pa,M2,P2,O2,z2,$2,H2,V2,G2,Q2,X2,rf,ev,nv,ov];function Xo(e){var t,n;const r=(t=e.storage)===null||t===void 0?void 0:t.markdown,o=(n=av.find(a=>a.name===e.name))===null||n===void 0?void 0:n.storage.markdown;return r||o?{...o,...r}:null}class sv{constructor(t){Zo(this,"editor",null),this.editor=t}serialize(t){const n=new m2(this.nodes,this.marks,{hardBreakNodeName:af.name});return n.renderContent(t),n.out}get nodes(){var t;return{...Object.fromEntries(Object.keys(this.editor.schema.nodes).map(n=>[n,this.serializeNode(pa)])),...Object.fromEntries((t=this.editor.extensionManager.extensions.filter(n=>n.type==="node"&&this.serializeNode(n)).map(n=>[n.name,this.serializeNode(n)]))!==null&&t!==void 0?t:[])}}get marks(){var t;return{...Object.fromEntries(Object.keys(this.editor.schema.marks).map(n=>[n,this.serializeMark(rf)])),...Object.fromEntries((t=this.editor.extensionManager.extensions.filter(n=>n.type==="mark"&&this.serializeMark(n)).map(n=>[n.name,this.serializeMark(n)]))!==null&&t!==void 0?t:[])}}serializeNode(t){var n;return(n=Xo(t))===null||n===void 0||(n=n.serialize)===null||n===void 0?void 0:n.bind({editor:this.editor,options:t.options})}serializeMark(t){var n;const r=(n=Xo(t))===null||n===void 0?void 0:n.serialize;return r?{...r,open:typeof r.open=="function"?r.open.bind({editor:this.editor,options:t.options}):r.open,close:typeof r.close=="function"?r.close.bind({editor:this.editor,options:t.options}):r.close}:null}}class iv{constructor(t,n){Zo(this,"editor",null),Zo(this,"md",null);let{html:r,linkify:o,breaks:a}=n;this.editor=t,this.md=this.withPatchedRenderer(yt({html:r,linkify:o,breaks:a}))}parse(t){let{inline:n}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(typeof t=="string"){this.editor.extensionManager.extensions.forEach(a=>{var i;return(i=Xo(a))===null||i===void 0||(i=i.parse)===null||i===void 0||(i=i.setup)===null||i===void 0?void 0:i.call({editor:this.editor,options:a.options},this.md)});const r=this.md.render(t),o=Ai(r);return this.editor.extensionManager.extensions.forEach(a=>{var i;return(i=Xo(a))===null||i===void 0||(i=i.parse)===null||i===void 0||(i=i.updateDOM)===null||i===void 0?void 0:i.call({editor:this.editor,options:a.options},o)}),this.normalizeDOM(o,{inline:n,content:t}),o.innerHTML}return t}normalizeDOM(t,n){let{inline:r,content:o}=n;return this.normalizeBlocks(t),t.querySelectorAll("*").forEach(a=>{var i;((i=a.nextSibling)===null||i===void 0?void 0:i.nodeType)===Node.TEXT_NODE&&!a.closest("pre")&&(a.nextSibling.textContent=a.nextSibling.textContent.replace(/^\n/,""))}),r&&this.normalizeInline(t,o),t}normalizeBlocks(t){const r=Object.values(this.editor.schema.nodes).filter(o=>o.isBlock).map(o=>{var a;return(a=o.spec.parseDOM)===null||a===void 0?void 0:a.map(i=>i.tag)}).flat().filter(Boolean).join(",");r&&[...t.querySelectorAll(r)].forEach(o=>{o.parentElement.matches("p")&&b2(o)})}normalizeInline(t,n){var r;if((r=t.firstElementChild)!==null&&r!==void 0&&r.matches("p")){var o,a,i,l;const d=t.firstElementChild,{nextElementSibling:f}=d,p=(o=(a=n.match(/^\s+/))===null||a===void 0?void 0:a[0])!==null&&o!==void 0?o:"",b=f?"":(i=(l=n.match(/\s+$/))===null||l===void 0?void 0:l[0])!==null&&i!==void 0?i:"";if(n.match(/^\n\n/)){d.innerHTML=`${d.innerHTML}${b}`;return}x2(d),t.innerHTML=`${p}${t.innerHTML}${b}`}}withPatchedRenderer(t){const n=r=>function(){const o=r(...arguments);return o===`
`?o:o[o.length-1]===`
`?o.slice(0,-1):o};return t.renderer.rules.hardbreak=n(t.renderer.rules.hardbreak),t.renderer.rules.softbreak=n(t.renderer.rules.softbreak),t.renderer.rules.fence=n(t.renderer.rules.fence),t.renderer.rules.code_block=n(t.renderer.rules.code_block),t.renderer.renderToken=n(t.renderer.renderToken.bind(t.renderer)),t}}const uv=Qs.create({name:"markdownClipboard",addOptions(){return{transformPastedText:!1,transformCopiedText:!1}},addProseMirrorPlugins(){return[new Lp({key:new zp("markdownClipboard"),props:{clipboardTextParser:(e,t,n)=>{if(n||!this.options.transformPastedText)return null;const r=this.editor.storage.markdown.parser.parse(e,{inline:!0});return Bp.fromSchema(this.editor.schema).parseSlice(Ai(r),{preserveWhitespace:!0,context:t})},clipboardTextSerializer:e=>this.options.transformCopiedText?this.editor.storage.markdown.serializer.serialize(e.content):null}})]}}),lv=Qs.create({name:"markdown",priority:50,addOptions(){return{html:!0,tightLists:!0,tightListClass:"tight",bulletListMarker:"-",linkify:!1,breaks:!1,transformPastedText:!1,transformCopiedText:!1}},addCommands(){const e=Op.Commands.config.addCommands();return{setContent:(t,n,r)=>o=>e.setContent(o.editor.storage.markdown.parser.parse(t),n,r)(o),insertContentAt:(t,n,r)=>o=>e.insertContentAt(t,o.editor.storage.markdown.parser.parse(n,{inline:!0}),r)(o)}},onBeforeCreate(){this.editor.storage.markdown={options:{...this.options},parser:new iv(this.editor,this.options),serializer:new sv(this.editor),getMarkdown:()=>this.editor.storage.markdown.serializer.serialize(this.editor.state.doc)},this.editor.options.initialContent=this.editor.options.content,this.editor.options.content=this.editor.storage.markdown.parser.parse(this.editor.options.content)},onCreate(){this.editor.options.content=this.editor.options.initialContent,delete this.editor.options.initialContent},addStorage(){return{}},addExtensions(){return[d2.configure({tight:this.options.tightLists,tightClass:this.options.tightListClass}),uv.configure({transformPastedText:this.options.transformPastedText,transformCopiedText:this.options.transformCopiedText})]}}),hs=[{emoji:"ð",name:"grinning"},{emoji:"ð",name:"smiley"},{emoji:"ð",name:"smile"},{emoji:"ð",name:"grin"},{emoji:"ð",name:"laughing"},{emoji:"ð",name:"sweat_smile"},{emoji:"ð¤£",name:"rofl"},{emoji:"ð",name:"joy"},{emoji:"ð",name:"slightly_smiling_face"},{emoji:"ð",name:"upside_down_face"},{emoji:"ð",name:"wink"},{emoji:"ð",name:"blush"},{emoji:"ð",name:"innocent"},{emoji:"ð¥°",name:"smiling_face_with_hearts"},{emoji:"ð",name:"heart_eyes"},{emoji:"ð¤©",name:"star_struck"},{emoji:"ð",name:"kissing_heart"},{emoji:"ð",name:"kissing"},{emoji:"ð",name:"kissing_closed_eyes"},{emoji:"ð",name:"kissing_smiling_eyes"},{emoji:"ð¥²",name:"smiling_face_with_tear"},{emoji:"ð",name:"yum"},{emoji:"ð",name:"stuck_out_tongue"},{emoji:"ð",name:"stuck_out_tongue_winking_eye"},{emoji:"ð¤ª",name:"zany_face"},{emoji:"ð",name:"stuck_out_tongue_closed_eyes"},{emoji:"ð¤",name:"money_mouth_face"},{emoji:"ð¤",name:"hugs"},{emoji:"ð¤­",name:"hand_over_mouth"},{emoji:"ð¤«",name:"shushing_face"},{emoji:"ð¤",name:"thinking"},{emoji:"ð¤",name:"zipper_mouth_face"},{emoji:"ð¤¨",name:"raised_eyebrow"},{emoji:"ð",name:"neutral_face"},{emoji:"ð",name:"expressionless"},{emoji:"ð¶",name:"no_mouth"},{emoji:"ð",name:"smirk"},{emoji:"ð",name:"unamused"},{emoji:"ð",name:"roll_eyes"},{emoji:"ð¬",name:"grimacing"},{emoji:"ð¤¥",name:"lying_face"},{emoji:"ð",name:"pensive"},{emoji:"ðª",name:"sleepy"},{emoji:"ð¤¤",name:"drooling_face"},{emoji:"ð´",name:"sleeping"},{emoji:"ð·",name:"mask"},{emoji:"ð¤",name:"face_with_thermometer"},{emoji:"ð¤",name:"face_with_head_bandage"},{emoji:"ð¤¢",name:"nauseated_face"},{emoji:"ð¤®",name:"vomiting_face"},{emoji:"ð¤§",name:"sneezing_face"},{emoji:"ð¥µ",name:"hot_face"},{emoji:"ð¥¶",name:"cold_face"},{emoji:"ð¥´",name:"woozy_face"},{emoji:"ðµ",name:"dizzy_face"},{emoji:"ð¤¯",name:"exploding_head"},{emoji:"ð¤ ",name:"cowboy_hat_face"},{emoji:"ð¥³",name:"partying_face"},{emoji:"ð¥¸",name:"disguised_face"},{emoji:"ð",name:"sunglasses"},{emoji:"ð¤",name:"nerd_face"},{emoji:"ð§",name:"monocle_face"},{emoji:"ð",name:"confused"},{emoji:"ð",name:"worried"},{emoji:"ð",name:"slightly_frowning_face"},{emoji:"â¹ï¸",name:"frowning_face"},{emoji:"ð®",name:"open_mouth"},{emoji:"ð¯",name:"hushed"},{emoji:"ð²",name:"astonished"},{emoji:"ð³",name:"flushed"},{emoji:"ð¥º",name:"pleading_face"},{emoji:"ð¦",name:"frowning"},{emoji:"ð§",name:"anguished"},{emoji:"ð¨",name:"fearful"},{emoji:"ð°",name:"cold_sweat"},{emoji:"ð¥",name:"disappointed_relieved"},{emoji:"ð¢",name:"cry"},{emoji:"ð­",name:"sob"},{emoji:"ð±",name:"scream"},{emoji:"ð",name:"confounded"},{emoji:"ð£",name:"persevere"},{emoji:"ð",name:"disappointed"},{emoji:"ð",name:"sweat"},{emoji:"ð©",name:"weary"},{emoji:"ð«",name:"tired_face"},{emoji:"ð¥±",name:"yawning_face"},{emoji:"ð¤",name:"triumph"},{emoji:"ð¡",name:"rage"},{emoji:"ð ",name:"angry"},{emoji:"ð¤¬",name:"cursing_face"},{emoji:"ð",name:"smiling_imp"},{emoji:"ð¿",name:"imp"},{emoji:"ð",name:"skull"},{emoji:"â ï¸",name:"skull_and_crossbones"},{emoji:"ð©",name:"poop"},{emoji:"ð¤¡",name:"clown_face"},{emoji:"ð¹",name:"ogre"},{emoji:"ðº",name:"goblin"},{emoji:"ð»",name:"ghost"},{emoji:"ð½",name:"alien"},{emoji:"ð¾",name:"space_invader"},{emoji:"ð¤",name:"robot"},{emoji:"ðº",name:"smiley_cat"},{emoji:"ð¸",name:"smile_cat"},{emoji:"ð¹",name:"joy_cat"},{emoji:"ð»",name:"heart_eyes_cat"},{emoji:"ð¼",name:"smirk_cat"},{emoji:"ð½",name:"kissing_cat"},{emoji:"ð",name:"scream_cat"},{emoji:"ð¿",name:"crying_cat_face"},{emoji:"ð¾",name:"pouting_cat"},{emoji:"ð",name:"wave"},{emoji:"ð¤",name:"raised_back_of_hand"},{emoji:"ðï¸",name:"raised_hand_with_fingers_splayed"},{emoji:"â",name:"hand"},{emoji:"ð",name:"vulcan_salute"},{emoji:"ð",name:"ok_hand"},{emoji:"ð¤",name:"pinched_fingers"},{emoji:"ð¤",name:"pinching_hand"},{emoji:"âï¸",name:"v"},{emoji:"ð¤",name:"crossed_fingers"},{emoji:"ð¤",name:"love_you_gesture"},{emoji:"ð¤",name:"metal"},{emoji:"ð¤",name:"call_me_hand"},{emoji:"ð",name:"point_left"},{emoji:"ð",name:"point_right"},{emoji:"ð",name:"point_up_2"},{emoji:"ð",name:"middle_finger"},{emoji:"ð",name:"point_down"},{emoji:"âï¸",name:"point_up"},{emoji:"ð",name:"thumbsup"},{emoji:"ð",name:"thumbsdown"},{emoji:"â",name:"fist"},{emoji:"ð",name:"facepunch"},{emoji:"ð¤",name:"fist_left"},{emoji:"ð¤",name:"fist_right"},{emoji:"ð",name:"clap"},{emoji:"ð",name:"raised_hands"},{emoji:"ð",name:"open_hands"},{emoji:"ð¤²",name:"palms_up_together"},{emoji:"ð¤",name:"handshake"},{emoji:"ð",name:"pray"},{emoji:"â¤ï¸",name:"heart"},{emoji:"ð§¡",name:"orange_heart"},{emoji:"ð",name:"yellow_heart"},{emoji:"ð",name:"green_heart"},{emoji:"ð",name:"blue_heart"},{emoji:"ð",name:"purple_heart"},{emoji:"ð¤",name:"black_heart"},{emoji:"ð¤",name:"white_heart"},{emoji:"ð¤",name:"brown_heart"},{emoji:"ð",name:"broken_heart"},{emoji:"â£ï¸",name:"heavy_heart_exclamation"},{emoji:"ð",name:"two_hearts"},{emoji:"ð",name:"revolving_hearts"},{emoji:"ð",name:"heartbeat"},{emoji:"ð",name:"heartpulse"},{emoji:"ð",name:"sparkling_heart"},{emoji:"ð",name:"cupid"},{emoji:"ð",name:"gift_heart"},{emoji:"ð",name:"heart_decoration"},{emoji:"â®ï¸",name:"peace_symbol"},{emoji:"âï¸",name:"latin_cross"},{emoji:"âªï¸",name:"star_and_crescent"},{emoji:"ðï¸",name:"om"},{emoji:"â¸ï¸",name:"wheel_of_dharma"},{emoji:"â¡ï¸",name:"star_of_david"},{emoji:"ð¯",name:"six_pointed_star"},{emoji:"ð",name:"menorah"},{emoji:"â¯ï¸",name:"yin_yang"},{emoji:"â¦ï¸",name:"orthodox_cross"},{emoji:"ð",name:"place_of_worship"},{emoji:"â",name:"ophiuchus"},{emoji:"â",name:"aries"},{emoji:"â",name:"taurus"},{emoji:"â",name:"gemini"},{emoji:"â",name:"cancer"},{emoji:"â",name:"leo"},{emoji:"â",name:"virgo"},{emoji:"â",name:"libra"},{emoji:"â",name:"scorpius"},{emoji:"â",name:"sagittarius"},{emoji:"â",name:"capricorn"},{emoji:"â",name:"aquarius"},{emoji:"â",name:"pisces"},{emoji:"ð",name:"id"},{emoji:"â¡",name:"zap"},{emoji:"ð¥",name:"boom"},{emoji:"ð«",name:"dizzy"},{emoji:"ð¦",name:"sweat_drops"},{emoji:"ð¨",name:"dash"},{emoji:"ð³ï¸",name:"hole"},{emoji:"ð£",name:"bomb"},{emoji:"ð¬",name:"speech_balloon"},{emoji:"ðï¸âð¨ï¸",name:"eye_speech_bubble"},{emoji:"ð¨ï¸",name:"left_speech_bubble"},{emoji:"ð¯ï¸",name:"right_anger_bubble"},{emoji:"ð­",name:"thought_balloon"},{emoji:"ð¤",name:"zzz"}];function cv({onEmojiSelect:e,onClose:t,query:n="",position:r}){const[o,a]=m.useState(hs);m.useEffect(()=>{if(n&&n.trim()){const p=n.toLowerCase().trim(),b=hs.filter(v=>v.name.toLowerCase().includes(p)||v.emoji.includes(n)||v.name.toLowerCase().startsWith(p));a(b.slice(0,20))}else a(hs.slice(0,40))},[n]);const i=p=>{e(p),t()},l=p=>{p.key==="Escape"&&t()},d=()=>{if(!r)return{};const p=window.innerWidth,b=window.innerHeight,v=320,y=240;let C=r.x,k=r.y;return C+v>p&&(C=p-v-20),k+y>b&&(k=r.y-y-10),{left:Math.max(10,C),top:Math.max(10,k)}},f=u.jsxs("div",{className:"fixed bg-white border border-border rounded-lg shadow-xl p-3 w-80",style:{...d(),zIndex:2147483647},onKeyDown:l,children:[n&&u.jsxs("div",{className:"text-xs text-blue-600 mb-2 font-medium",children:['"',n,'"']}),u.jsx("div",{className:"grid grid-cols-10 gap-1 max-h-52 overflow-y-auto",children:o.map((p,b)=>u.jsx(ke,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0 hover:bg-blue-50 text-lg transition-colors",onClick:()=>i(p.emoji),title:p.name,children:p.emoji},`${p.emoji}-${b}`))}),o.length===0&&n&&u.jsx("div",{className:"text-center text-muted-foreground text-sm py-6",children:"No emojis found"})]});return pr.createPortal(f,document.body)}function dv({content:e,placeholder:t="Start typing...",onUpdate:n,onSave:r,onCancel:o,className:a,autoFocus:i=!1}){const[l,d]=m.useState(!1),[f,p]=m.useState(""),[b,v]=m.useState(null),y=m.useRef(null),C=$p({extensions:[qp.configure({strike:!1,code:!1,blockquote:!1}),lv.configure({html:!0,transformPastedText:!0,transformCopiedText:!1}),tb,nb.configure({nested:!0}),Up.configure({openOnClick:!1,HTMLAttributes:{class:"text-blue-600 underline hover:text-blue-800 cursor-pointer",target:"_blank",rel:"noopener noreferrer"},protocols:["http","https","ftp","mailto"],validate:_=>/^https?:\/\//.test(_)}),Hp.configure({HTMLAttributes:{class:"border-l-4 border-gray-300 pl-4 italic"}}),Kp.configure({HTMLAttributes:{class:"inline-code"}}),Vp.configure({HTMLAttributes:{class:"code-block"}}),Wp.configure({HTMLAttributes:{class:"line-through"}}),J1.configure({inline:!0,allowBase64:!0,HTMLAttributes:{class:"rounded-md max-w-full h-auto"}}),eb.configure({placeholder:t})],content:e,onUpdate:({editor:_})=>{n(_.getHTML())},editorProps:{attributes:{class:"tiptap-editor text-sm leading-relaxed focus:outline-none min-h-[100px] w-full"},handleKeyDown:(_,S)=>{if(S.key==="/"&&!l){const{selection:D}=_.state,{from:I}=D,M=_.state.doc.resolve(I),F=M.parent.textBetween(0,M.parentOffset);if(!F.trim()||F.endsWith(" ")){const Z=_.coordsAtPos(I);return v({x:Z.left,y:Z.bottom+5}),d(!0),p(""),S.preventDefault(),!0}}if(l){if(S.key==="Escape")return d(!1),p(""),!0;if(S.key==="Backspace")return f.length>0?p(D=>D.slice(0,-1)):d(!1),!0;if(S.key.length===1&&!S.ctrlKey&&!S.metaKey&&S.key!==" ")return p(D=>D+S.key),!0;if(S.key===" ")return d(!1),p(""),!0}return!1}}}),k=m.useCallback(()=>{const _=document.createElement("input");_.type="file",_.accept="image/*",_.onchange=S=>{const D=S.target.files?.[0];if(D&&C){const I=new FileReader;I.onload=M=>{const F=M.target?.result;C.chain().focus().setImage({src:F}).run()},I.readAsDataURL(D)}},_.click()},[C]);m.useEffect(()=>{if(!C)return;const _=D=>{const I=D.clipboardData?.items;if(I)for(let M=0;M<I.length;M++){const F=I[M];if(F.type.indexOf("image")!==-1){D.preventDefault();const H=F.getAsFile();if(H){const Z=new FileReader;Z.onload=ie=>{const Y=ie.target?.result;C.chain().focus().setImage({src:Y}).run()},Z.readAsDataURL(H)}}}},S=C.view.dom;return S.addEventListener("paste",_),()=>{S.removeEventListener("paste",_)}},[C]);const A=m.useCallback(_=>{C&&C.chain().focus().insertContent(_).run(),d(!1),p("")},[C]),j=m.useCallback(()=>{d(!1),p("")},[]);return m.useEffect(()=>{if(!C)return;const _=D=>{D.key==="Escape"?l?(d(!1),p("")):o():D.key==="Enter"&&(D.ctrlKey||D.metaKey)&&r()},S=C.view.dom;return S.addEventListener("keydown",_),()=>{S.removeEventListener("keydown",_)}},[C,r,o,l]),m.useEffect(()=>{C&&i&&C.commands.focus()},[C,i]),C?u.jsxs("div",{className:te("relative z-20",a),ref:y,children:[u.jsxs("div",{className:"relative p-2 -m-2",children:[u.jsx(Gp,{editor:C,className:"min-h-[100px]"}),u.jsxs("div",{className:"absolute top-0 right-0 flex gap-1 opacity-60 hover:opacity-100 transition-opacity",children:[u.jsx(ke,{size:"sm",variant:"ghost",className:"h-6 w-6 p-0 bg-white/90 hover:bg-white shadow-sm rounded",onClick:()=>d(!l),title:"Insert Emoji (Press / to open)",children:u.jsx(Eg,{className:"h-3 w-3"})}),u.jsx(ke,{size:"sm",variant:"ghost",className:"h-6 w-6 p-0 bg-white/90 hover:bg-white shadow-sm rounded",onClick:k,title:"Insert Image",children:u.jsx(sc,{className:"h-3 w-3"})})]})]}),l&&u.jsx(cv,{onEmojiSelect:A,onClose:j,query:f,position:b||void 0}),u.jsxs("div",{className:"flex justify-end gap-2 mt-2 pt-2 border-t border-border/30",children:[u.jsxs(ke,{size:"sm",variant:"ghost",onClick:o,className:"h-7 px-3 text-xs",children:[u.jsx(jn,{className:"h-3 w-3 mr-1"}),"Cancel"]}),u.jsxs(ke,{size:"sm",onClick:r,className:"h-7 px-3 text-xs",children:[u.jsx(Cn,{className:"h-3 w-3 mr-1"}),"Accept"]})]}),C&&u.jsxs("div",{className:"absolute top-0 right-0 text-xs text-muted-foreground bg-white/90 px-2 py-1 rounded shadow-sm opacity-0 hover:opacity-100 transition-opacity pointer-events-none z-10 max-w-xs",children:["**bold** *italic* # heading - list ",">"," quote `code` ~~strike~~ [link](url) [] task / emoji"]})]}):null}function fv({content:e,onUpdate:t,onSave:n,onCancel:r,className:o,autoFocus:a=!1}){const[i,l]=m.useState(e),d=m.useRef(null);m.useEffect(()=>{l(e)},[e]),m.useEffect(()=>{a&&d.current&&(d.current.focus(),d.current.select())},[a]);const f=b=>{l(b.target.value),t(b.target.value)},p=b=>{b.key==="Enter"?n():b.key==="Escape"&&r()};return u.jsxs("div",{className:te("relative",o),children:[u.jsx("input",{ref:d,type:"text",value:i,onChange:f,onKeyDown:p,className:"w-full bg-transparent border-none outline-none text-lg font-semibold resize-none pr-16",placeholder:"Card title..."}),u.jsxs("div",{className:"absolute right-0 top-0 flex gap-1",children:[u.jsx(ke,{size:"sm",variant:"ghost",onClick:r,className:"h-6 w-6 p-0 bg-white/80 hover:bg-white shadow-sm",children:u.jsx(jn,{className:"h-3 w-3"})}),u.jsx(ke,{size:"sm",onClick:n,className:"h-6 w-6 p-0 bg-white/80 hover:bg-white shadow-sm",children:u.jsx(Cn,{className:"h-3 w-3"})})]})]})}const hv=e=>{const t=["#3b82f6","#8b5cf6","#10b981","#f59e0b","#ef4444","#06b6d4","#8b5a2b","#6b7280","#ec4899","#84cc16","#f97316","#6366f1"];let n=0;for(let r=0;r<e.length;r++)n=e.charCodeAt(r)+((n<<5)-n);return t[Math.abs(n)%t.length]},pv=({tags:e,className:t,maxTags:n=5,size:r="sm"})=>{if(!e||e.length===0)return null;const o=e.slice(0,n),a=e.length-n,i={sm:"text-xs px-2 py-1",md:"text-sm px-2.5 py-1.5",lg:"text-base px-3 py-2"};return u.jsxs("div",{className:te("flex flex-wrap gap-1.5 mt-3",t),children:[o.map((l,d)=>u.jsx("span",{className:te("inline-flex items-center rounded-full font-medium text-white","shadow-sm transition-all duration-200 hover:scale-105",i[r]),style:{backgroundColor:hv(l),fontSize:r==="sm"?"0.75rem":r==="md"?"0.875rem":"1rem"},children:l},`${l}-${d}`)),a>0&&u.jsxs("span",{className:te("inline-flex items-center rounded-full bg-gray-500 text-white font-medium",i[r]),children:["+",a]})]})};function mv({card:e,onFlip:t,onUpdate:n,onCopy:r,onScreenshot:o,onShare:a,onDelete:i,onStyleChange:l,onTagsChange:d,onMoveToFolder:f,className:p,size:b="md"}){const[v,y]=m.useState(!1),[C,k]=m.useState(!1),[A,j]=m.useState(null),[_,S]=m.useState(null),[D,I]=m.useState(null),[M,F]=m.useState(!1),[H,Z]=m.useState({isOpen:!1,images:[],initialIndex:0}),ie=m.useRef(null),Y=e.isFlipped?e.backContent:e.frontContent,Q={sm:"w-full",md:"w-full",lg:"w-full"},me={sm:"p-3",md:"p-4",lg:"p-5"},_e=()=>{const{style:se}=e,J={borderRadius:"1rem",fontFamily:se.fontFamily,fontSize:se.fontSize==="sm"?"0.875rem":se.fontSize==="lg"?"1.125rem":"1rem",fontWeight:se.fontWeight,color:se.textColor,borderWidth:se.borderWidth||0,borderColor:se.borderColor};let Ie="";return se.type==="gradient"&&se.gradientColors?(J.background=`linear-gradient(135deg, ${se.gradientColors.join(", ")})`,se.gradientColors.includes("#8a2be2")&&se.gradientColors.includes("#00ffff")?(Ie="gradient-wave-animation",J.position="relative"):se.gradientColors.includes("#ee7752")&&se.gradientColors.includes("#23d5ab")?Ie="moving-gradient-animation":se.gradientColors.includes("#667eea")&&(Ie="gradient-mesh-animation")):se.type==="glass"?(J.background=se.backgroundColor||"rgba(255, 255, 255, 0.15)",J.backdropFilter="blur(20px) saturate(180%)",J.WebkitBackdropFilter="blur(20px) saturate(180%)",J.border=`1px solid ${se.borderColor||"rgba(255, 255, 255, 0.18)"}`,Ie="glass-morphism"):se.backgroundColor&&se.backgroundColor.includes("linear-gradient")?(J.background=se.backgroundColor,J.backgroundSize="400% 400%",se.backgroundColor.includes("#667eea")&&(Ie="gradient-mesh-animation")):(J.backgroundColor=se.backgroundColor,se.backgroundColor==="#1a1a2e"&&se.borderColor==="#4361ee"?Ie="pulse-border-animation":se.backgroundColor==="#0f172a"&&(Ie="glow-hover-animation")),{style:J,shadowClass:{sm:"shadow-sm",md:"shadow-md",lg:"shadow-lg",xl:"shadow-xl",none:"","2xl":"shadow-2xl",glass:"shadow-lg"}[se.shadow||"md"]||"shadow-md",specialClasses:Ie}},{style:Ee,shadowClass:xe,specialClasses:Ne}=_e(),Ae=m.useCallback(se=>{se.stopPropagation(),se.preventDefault(),!M&&(F(!0),t(e.id),setTimeout(()=>{F(!1)},600))},[e.id,t,M]),K=se=>{se.stopPropagation(),Ce("content")},ge=se=>{Ce(se)},Ce=se=>{S(Y),I(Y),j(se),k(!0)},Se=(se,J)=>{D&&I({...D,[se]:J,lastModified:new Date})},we=()=>{if(D){const J={[e.isFlipped?"backContent":"frontContent"]:D};n(e.id,J)}k(!1),j(null),S(null),I(null)},je=()=>{k(!1),j(null),S(null),I(null)},Fe=se=>{Se("title",se.target.value)},Be=se=>{Se("text",se.target.value)},ee=se=>{se.key==="Escape"&&je(),se.key==="Enter"&&se.ctrlKey&&we()};return m.useCallback((se,J)=>{Z({isOpen:!0,images:se,initialIndex:J})},[]),m.useCallback(()=>{Z(se=>({...se,isOpen:!1}))},[]),u.jsx("div",{className:te("relative group",p),"data-card-id":e.id,onMouseEnter:()=>y(!0),onMouseLeave:()=>y(!1),children:u.jsx("div",{className:"flip-card-container",style:{perspective:"1000px",width:"100%",minHeight:"fit-content"},children:u.jsxs("div",{ref:ie,className:te("flip-card-inner relative transition-all duration-700 ease-in-out",Q[b]),style:{minHeight:"fit-content",width:"100%",transformStyle:"preserve-3d",transform:e.isFlipped?"rotateY(180deg)":"rotateY(0deg)"},children:[u.jsx("div",{className:te("flip-card-face flip-card-front w-full flex flex-col transition-all duration-300 relative",xe,Ne,me[b]),style:{...Ee,borderRadius:Ee.borderRadius,backfaceVisibility:"hidden",position:e.isFlipped?"absolute":"relative",opacity:e.isFlipped?0:1},children:u.jsx(nl,{content:D||e.frontContent,isEditing:C&&!e.isFlipped,editingField:A,onTitleChange:Fe,onTextChange:Be,onTempContentUpdate:Se,onSaveEdit:we,onCancelEdit:je,onDoubleClick:ge,onKeyDown:ee,sideLabel:"Front",isHovered:v,onEdit:K,onFlip:Ae,onCopy:()=>r(e.id),onScreenshot:()=>o(e.id),onShare:()=>a(e.id),onDelete:()=>i(e.id),onStyleChange:l?()=>l(e.id):void 0,onTagsChange:d?()=>d(e.id):void 0,onMoveToFolder:f,card:e,isFlipping:M})}),u.jsx("div",{className:te("flip-card-face flip-card-back w-full flex flex-col transition-all duration-300 relative",xe,Ne,me[b]),style:{...Ee,borderRadius:Ee.borderRadius,backfaceVisibility:"hidden",transform:"rotateY(180deg)",position:e.isFlipped?"relative":"absolute",top:e.isFlipped?"auto":"0",opacity:e.isFlipped?1:0},children:u.jsx(nl,{content:D||e.backContent,isEditing:C&&e.isFlipped,editingField:A,onTitleChange:Fe,onTextChange:Be,onTempContentUpdate:Se,onSaveEdit:we,onCancelEdit:je,onDoubleClick:ge,onKeyDown:ee,sideLabel:"Back",isHovered:v,onEdit:K,onFlip:Ae,onCopy:()=>r(e.id),onScreenshot:()=>o(e.id),onShare:()=>a(e.id),onDelete:()=>i(e.id),onStyleChange:l?()=>l(e.id):void 0,onTagsChange:d?()=>d(e.id):void 0,onMoveToFolder:f,card:e,isFlipping:M})})]})})})}function gv({images:e,onImageClick:t}){const n=e.slice(0,4),r=n.length,o=i=>{switch(i){case 1:return"flex justify-center";case 2:return"grid grid-cols-2 gap-2";case 3:return"grid grid-cols-2 gap-2";case 4:default:return"grid grid-cols-2 gap-2"}},a=(i,l)=>{const d="relative aspect-video rounded-md overflow-hidden bg-muted transition-all duration-200 hover:scale-[1.02] cursor-pointer group";return i===1?`${d} max-w-xs w-full`:i===3&&l===2?`${d} col-span-2 max-w-xs mx-auto`:d};return u.jsx("div",{className:o(r),children:n.map((i,l)=>u.jsxs("div",{className:a(r,l),onClick:()=>t?.(e,l),children:[u.jsx("img",{src:i.url,alt:i.alt||`Image ${l+1}`,className:"w-full h-full object-cover transition-transform duration-200 group-hover:scale-105",loading:"lazy"}),u.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/20 transition-all duration-200 flex items-center justify-center opacity-0 group-hover:opacity-100",children:u.jsx("div",{className:"bg-white/90 rounded-full p-2 transform scale-90 group-hover:scale-100 transition-transform duration-200",children:u.jsx("svg",{className:"w-4 h-4 text-gray-700",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0zM10 7v3m0 0v3m0-3h3m-3-3H7"})})})})]},l))})}function nl({content:e,isEditing:t,editingField:n,onTitleChange:r,onTextChange:o,onTempContentUpdate:a,onSaveEdit:i,onCancelEdit:l,onDoubleClick:d,onKeyDown:f,sideLabel:p,isHovered:b,onEdit:v,onFlip:y,onCopy:C,onScreenshot:k,onShare:A,onDelete:j,onStyleChange:_,onTagsChange:S,onMoveToFolder:D,card:I,isFlipping:M}){return u.jsxs("div",{className:"flex flex-col h-full",children:[u.jsxs("div",{className:"flex items-start justify-between mb-3",children:[u.jsx("div",{className:"flex-1 mr-2",children:t&&n==="title"?u.jsx(fv,{content:e.title,onUpdate:F=>a("title",F),onSave:i,onCancel:l,autoFocus:!0}):u.jsx("h3",{className:"text-lg font-semibold text-left cursor-pointer hover:bg-black/5 rounded px-1 py-0.5 -mx-1 transition-colors",onDoubleClick:()=>d("title"),children:e.title||"Untitled Card"})}),u.jsxs("div",{className:te("flex gap-1 transition-all duration-200 flex-shrink-0",b||t?"opacity-100":"opacity-60"),children:[u.jsx(ke,{size:"sm",variant:"ghost",className:te("h-7 w-7 p-0 rounded-md hover:bg-black/10 transition-all duration-200",M&&"animate-pulse"),onClick:y,title:`Flip to ${I.isFlipped?"Front":"Back"}`,disabled:M,children:u.jsx(ig,{className:te("h-3.5 w-3.5 transition-transform duration-200",M&&"scale-110")})}),u.jsxs(H1,{modal:!1,children:[u.jsx(K1,{asChild:!0,children:u.jsx("div",{className:"h-7 w-7 rounded-md hover:bg-black/10 flex items-center justify-center cursor-pointer transition-colors group",onMouseEnter:F=>{F.stopPropagation();const H=new MouseEvent("click",{view:window,bubbles:!0,cancelable:!0});F.currentTarget.dispatchEvent(H)},onClick:F=>F.stopPropagation(),children:u.jsx(pg,{className:"h-3.5 w-3.5"})})}),u.jsxs(Ed,{align:"end",className:"w-48",children:[u.jsxs(an,{onClick:v,children:[u.jsx(vg,{className:"h-4 w-4 mr-2"}),"Edit Content"]}),u.jsxs(an,{onClick:C,children:[u.jsx(hg,{className:"h-4 w-4 mr-2"}),"Copy Text"]}),u.jsxs(an,{onClick:k,children:[u.jsx(ks,{className:"h-4 w-4 mr-2"}),"Screenshot"]}),u.jsxs(an,{onClick:A,children:[u.jsx(kg,{className:"h-4 w-4 mr-2"}),"Share"]}),u.jsx(Ns,{}),_&&u.jsxs(an,{onClick:_,children:[u.jsx(li,{className:"h-4 w-4 mr-2"}),"Change Style"]}),S&&u.jsxs(an,{onClick:S,children:[u.jsx(Ag,{className:"h-4 w-4 mr-2"}),"Manage Tags"]}),D&&u.jsxs(an,{onClick:D,children:[u.jsx(ac,{className:"h-4 w-4 mr-2"}),"Move to Folder"]}),u.jsx(Ns,{}),u.jsxs(an,{onClick:j,className:"text-destructive focus:text-destructive",children:[u.jsx(di,{className:"h-4 w-4 mr-2"}),"Delete Card"]})]})]})]})]}),e.images.length>0&&u.jsxs("div",{className:"mb-3 flex-shrink-0",children:[u.jsx(gv,{images:e.images,onImageClick:handleImageClick}),e.images.length>4&&u.jsxs("div",{className:"text-xs text-muted-foreground mt-1 text-center",children:["+",e.images.length-4," more images"]})]}),u.jsx("div",{className:"flex-1 mb-3 relative z-10",children:t&&n==="content"?u.jsx(dv,{content:e.text,placeholder:"Add your content here...",onUpdate:F=>a("text",F),onSave:i,onCancel:l,autoFocus:!0}):u.jsx("div",{className:"text-sm leading-relaxed text-left cursor-pointer hover:bg-black/5 rounded p-2 -m-2 transition-colors min-h-[100px] tiptap-editor relative z-10",onDoubleClick:F=>{F.target.tagName!=="A"&&d("content")},onClick:F=>{const H=F.target;if(H.tagName==="A"){F.stopPropagation();const Z=H.getAttribute("href");Z&&window.open(Z,"_blank","noopener,noreferrer")}},children:u.jsx("div",{className:"whitespace-pre-wrap",dangerouslySetInnerHTML:{__html:e.text||'<span class="text-muted-foreground">Click to add content...</span>'}})})}),u.jsxs("div",{className:"mt-auto",children:[u.jsx(pv,{tags:e.tags,size:"sm"}),e.images.length>0&&u.jsx("div",{className:"flex items-center justify-end text-xs text-muted-foreground mt-2",children:u.jsxs("div",{className:"flex items-center gap-1",children:[u.jsx(sc,{className:"h-3 w-3"}),u.jsx("span",{children:e.images.length})]})})]})]})}const Ft=({title:e="Sample Card",content:t="This is a preview of how your card will look with this style.",style:n,isSelected:r=!1,onClick:o,className:a})=>{console.log("Rendering StylePreviewCard (Simplified):",{title:e,isSelected:r,style:n});const i=()=>{const l={minHeight:"60px",width:"100%",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",padding:"8px",borderRadius:"8px",cursor:"pointer",border:r?"2px solid #3b82f6":"1px solid #e5e7eb",position:"relative",fontSize:"10px",textAlign:"center",boxShadow:r?"0 4px 12px rgba(59, 130, 246, 0.3)":"0 2px 4px rgba(0, 0, 0, 0.1)",transition:"all 0.2s ease",backgroundColor:"#ffffff"};if(typeof n=="object"&&n!==null){if("background"in n||"backgroundColor"in n)return{...l,...n,cursor:"pointer",border:r?"3px solid #3b82f6":n.border||"2px solid #e5e7eb",boxShadow:r?"0 4px 12px rgba(59, 130, 246, 0.3)":n.boxShadow||"0 2px 4px rgba(0, 0, 0, 0.1)",transition:"all 0.2s ease"};if("type"in n){if(n.type==="solid")return{...l,backgroundColor:n.backgroundColor||"#ffffff",color:n.textColor||"#374151"};if(n.type==="gradient"&&n.gradientColors){const f=`linear-gradient(${n.gradientDirection||"to bottom right"}, ${n.gradientColors.join(", ")})`;return{...l,background:f,color:n.textColor||"#ffffff"}}}}return l};return u.jsxs("div",{style:i(),onClick:o,className:a,children:[u.jsx("div",{style:{fontWeight:"600",marginBottom:"2px",fontSize:"11px"},children:e}),u.jsx("div",{style:{fontSize:"9px",opacity:.8,lineHeight:"1.1"},children:t})]})},bv=({isSelected:e,onClick:t,className:n})=>{const r={background:"#ffffff",color:"#1f2937",fontFamily:"system-ui, -apple-system, sans-serif",fontSize:"14px",fontWeight:"400",borderRadius:"12px",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)",border:"1px solid #e5e7eb"};return u.jsx(Ft,{title:"Classic White",content:"Clean and professional",style:r,isSelected:e,onClick:t,className:n})},xv={id:"classic-white",name:"Classic White",category:"business",description:"Clean and professional white background with subtle shadows",style:{type:"solid",backgroundColor:"#ffffff",fontFamily:"system-ui",fontSize:"base",fontWeight:"normal",textColor:"#1f2937",borderRadius:"2xl",shadow:"md",borderWidth:1,borderColor:"#e5e7eb"},previewComponent:bv},yv=({isSelected:e,onClick:t,className:n})=>{const r={background:"linear-gradient(135deg, #1f2937 0%, #111827 50%, #030712 100%)",color:"#f9fafb",fontFamily:"system-ui, -apple-system, sans-serif",fontSize:"14px",fontWeight:"600",borderRadius:"12px",boxShadow:"0 25px 50px -12px rgba(0, 0, 0, 0.5), 0 0 0 1px rgba(255, 255, 255, 0.1)",border:"1px solid rgba(255, 255, 255, 0.1)"};return u.jsx(Ft,{title:"Deep Dark",content:"Bold and mysterious",style:r,isSelected:e,onClick:t,className:n})},vv={id:"deep-dark",name:"Deep Dark",category:"personality",description:"Bold dark gradient with mysterious depth",style:{type:"gradient",gradientColors:["#1f2937","#111827","#030712"],gradientDirection:"to-br",fontFamily:"system-ui",fontSize:"base",fontWeight:"semibold",textColor:"#f9fafb",borderRadius:"2xl",shadow:"2xl",borderWidth:1,borderColor:"rgba(255, 255, 255, 0.1)"},previewComponent:yv},wv=({isSelected:e,onClick:t,className:n})=>{const r={background:"linear-gradient(135deg, #8b5cf6 0%, #a855f7 50%, #c084fc 100%)",color:"#ffffff",fontFamily:"system-ui, -apple-system, sans-serif",fontSize:"14px",fontWeight:"500",borderRadius:"20px",boxShadow:"0 20px 25px -5px rgba(139, 92, 246, 0.25), 0 10px 10px -5px rgba(139, 92, 246, 0.1)",border:"none"};return u.jsx(Ft,{title:"Elegant Purple",content:"Artistic and inspiring",style:r,isSelected:e,onClick:t,className:n})},Cv={id:"elegant-purple",name:"Elegant Purple",category:"creative",description:"Artistic purple gradient with elegant curves and shadows",style:{type:"gradient",gradientColors:["#8b5cf6","#a855f7","#c084fc"],gradientDirection:"to-br",fontFamily:"system-ui",fontSize:"base",fontWeight:"medium",textColor:"#ffffff",borderRadius:"2xl",shadow:"2xl",borderWidth:0},previewComponent:wv},kv=({isSelected:e,onClick:t,className:n})=>{const r={background:"linear-gradient(135deg, #10b981 0%, #059669 50%, #047857 100%)",color:"#ffffff",fontFamily:"system-ui, -apple-system, sans-serif",fontSize:"14px",fontWeight:"500",borderRadius:"16px",boxShadow:"0 20px 25px -5px rgba(16, 185, 129, 0.2), 0 10px 10px -5px rgba(16, 185, 129, 0.1)",border:"none"};return u.jsx(Ft,{title:"Fresh Green",content:"Natural and harmonious",style:r,isSelected:e,onClick:t,className:n})},_v={id:"fresh-green",name:"Fresh Green",category:"natural",description:"Natural green gradient with organic harmony",style:{type:"gradient",gradientColors:["#10b981","#059669","#047857"],gradientDirection:"to-br",fontFamily:"system-ui",fontSize:"base",fontWeight:"medium",textColor:"#ffffff",borderRadius:"2xl",shadow:"2xl",borderWidth:0},previewComponent:kv},Sv=({isSelected:e,onClick:t,className:n})=>{const r={background:"linear-gradient(135deg, #667eea 0%, #764ba2 25%, #f093fb 50%, #f5576c 75%, #4facfe 100%)",backgroundSize:"400% 400%",animation:"gradientShift 8s ease infinite",color:"#ffffff",fontFamily:'"Inter", system-ui, -apple-system, sans-serif',fontSize:"14px",fontWeight:"500",borderRadius:"12px",boxShadow:"0 8px 32px rgba(102, 126, 234, 0.3), 0 4px 16px rgba(118, 75, 162, 0.2)",border:"none",position:"relative",overflow:"hidden"},o={position:"absolute",top:0,left:0,right:0,bottom:0,background:"linear-gradient(45deg, rgba(255,255,255,0.1) 0%, rgba(255,255,255,0.05) 100%)",pointerEvents:"none"};return u.jsxs("div",{style:{position:"relative"},children:[u.jsx(Ft,{title:"Gradient Mesh",content:"Dynamic gradient background",style:r,isSelected:e,onClick:t,className:n}),u.jsx("div",{style:o}),u.jsx("style",{jsx:!0,children:`
        @keyframes gradientShift {
          0% { background-position: 0% 50%; }
          50% { background-position: 100% 50%; }
          100% { background-position: 0% 50%; }
        }
      `})]})},Ev={id:"gradient-mesh",name:"Gradient Mesh",category:"creative",description:"Dynamic gradient background with animated mesh effect",style:{type:"solid",backgroundColor:"linear-gradient(135deg, #667eea 0%, #764ba2 25%, #f093fb 50%, #f5576c 75%, #4facfe 100%)",fontFamily:"Inter",fontSize:"base",fontWeight:"medium",textColor:"#ffffff",borderRadius:"2xl",shadow:"xl",borderWidth:0,borderColor:"transparent"},previewComponent:Sv},jv=({isSelected:e,onClick:t,className:n})=>{const r={background:"linear-gradient(90deg, #fb923c 0%, #8b5cf6 100%)",color:"#ffffff",fontFamily:"system-ui, -apple-system, sans-serif",fontSize:"14px",fontWeight:"600",borderRadius:"24px",boxShadow:"0 25px 50px -12px rgba(251, 146, 60, 0.3), 0 0 0 1px rgba(255, 255, 255, 0.2)",border:"none"};return u.jsx(Ft,{title:"Gradient Sunset",content:"Vibrant and expressive",style:r,isSelected:e,onClick:t,className:n})},Av={id:"gradient-sunset",name:"Gradient Sunset",category:"personality",description:"Warm orange to violet gradient with magical sunset vibes",style:{type:"gradient",gradientColors:["#fb923c","#8b5cf6"],gradientDirection:"to-r",fontFamily:"system-ui",fontSize:"base",fontWeight:"semibold",textColor:"#ffffff",borderRadius:"2xl",shadow:"2xl",borderWidth:0},previewComponent:jv},Dv=({isSelected:e,onClick:t,className:n})=>{const r={background:"linear-gradient(135deg, #8a2be2 0%, #4b0082 25%, #9370db 50%, #00ffff 75%, #00bfff 100%)",color:"#ffffff",fontFamily:"system-ui, -apple-system, sans-serif",fontSize:"14px",fontWeight:"600",borderRadius:"24px",boxShadow:"0 25px 50px -12px rgba(138, 43, 226, 0.3), 0 0 0 1px rgba(255, 255, 255, 0.2)",border:"none",position:"relative",overflow:"hidden"};return u.jsx("div",{className:"relative",children:u.jsx(Ft,{title:"Gradient Wave",content:"Dynamic wave effect",style:r,isSelected:e,onClick:t,className:`${n} gradient-wave-animation`})})},Nv={id:"gradient-wave",name:"Gradient Wave",category:"creative",description:"Purple to cyan gradient with dynamic wave effect",style:{type:"gradient",gradientColors:["#8a2be2","#4b0082","#9370db","#00ffff","#00bfff"],gradientDirection:"to-br",fontFamily:"system-ui",fontSize:"base",fontWeight:"semibold",textColor:"#ffffff",borderRadius:"2xl",shadow:"2xl",borderWidth:0},previewComponent:Dv},Tv=({isSelected:e,onClick:t,className:n})=>{const r={background:"linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%)",color:"#ffffff",fontFamily:"system-ui, -apple-system, sans-serif",fontSize:"14px",fontWeight:"500",borderRadius:"16px",boxShadow:"0 10px 15px -3px rgba(59, 130, 246, 0.3), 0 4px 6px -2px rgba(59, 130, 246, 0.1)",border:"none"};return u.jsx(Ft,{title:"Modern Blue",content:"Contemporary gradient design",style:r,isSelected:e,onClick:t,className:n})},Mv={id:"modern-blue",name:"Modern Blue",category:"business",description:"Contemporary blue gradient with professional appeal",style:{type:"gradient",gradientColors:["#3b82f6","#1d4ed8","#1e40af"],gradientDirection:"to-br",fontFamily:"system-ui",fontSize:"base",fontWeight:"medium",textColor:"#ffffff",borderRadius:"2xl",shadow:"lg",borderWidth:0},previewComponent:Tv},Iv=({isSelected:e,onClick:t,className:n})=>{const r={background:"linear-gradient(-45deg, #ee7752, #e73c7e, #23a6d5, #23d5ab)",backgroundSize:"400% 400%",color:"#ffffff",fontFamily:'"Poppins", system-ui, sans-serif',fontSize:"14px",fontWeight:"600",borderRadius:"16px",boxShadow:"0 15px 30px -10px rgba(0, 0, 0, 0.25)",border:"none",position:"relative",overflow:"hidden"};return u.jsx("div",{className:"relative",children:u.jsx(Ft,{title:"Moving Gradient",content:"Flowing color effect",style:r,isSelected:e,onClick:t,className:`${n} moving-gradient-animation`})})},Pv={id:"moving-gradient",name:"Moving Gradient",category:"creative",description:"Colorful gradient with flowing animation effect",style:{type:"gradient",gradientColors:["#ee7752","#e73c7e","#23a6d5","#23d5ab"],gradientDirection:"to-br",fontFamily:"Poppins",fontSize:"base",fontWeight:"semibold",textColor:"#ffffff",borderRadius:"xl",shadow:"xl",borderWidth:0},previewComponent:Iv},Rv=({isSelected:e,onClick:t,className:n})=>{const r={background:"linear-gradient(90deg, #34d399 0%, #0d9488 100%)",color:"#ffffff",fontFamily:"system-ui, -apple-system, sans-serif",fontSize:"14px",fontWeight:"500",borderRadius:"20px",boxShadow:"0 10px 15px -3px rgba(52, 211, 153, 0.3), 0 4px 6px -2px rgba(13, 148, 136, 0.1)",border:"1px solid rgba(52, 211, 153, 0.3)"};return u.jsx(Ft,{title:"Ocean Breeze",content:"Fresh and refreshing",style:r,isSelected:e,onClick:t,className:n})},Fv={id:"ocean-breeze",name:"Ocean Breeze",category:"natural",description:"Fresh emerald to teal gradient with tropical vibes",style:{type:"gradient",gradientColors:["#34d399","#0d9488"],gradientDirection:"to-r",fontFamily:"system-ui",fontSize:"base",fontWeight:"medium",textColor:"#ffffff",borderRadius:"2xl",shadow:"lg",borderWidth:1,borderColor:"rgba(52, 211, 153, 0.3)"},previewComponent:Rv},Ov=({isSelected:e,onClick:t,className:n})=>{const r={background:"linear-gradient(90deg, #fda4af 0%, #f87171 100%)",color:"#ffffff",fontFamily:"system-ui, -apple-system, sans-serif",fontSize:"14px",fontWeight:"500",borderRadius:"20px",boxShadow:"0 10px 15px -3px rgba(253, 164, 175, 0.3), 0 4px 6px -2px rgba(248, 113, 113, 0.1)",border:"1px solid rgba(253, 164, 175, 0.3)"};return u.jsx(Ft,{title:"Soft Pink",content:"Gentle and soothing",style:r,isSelected:e,onClick:t,className:n})},Lv={id:"soft-pink",name:"Soft Pink",category:"natural",description:"Warm pink to red gradient with romantic tones",style:{type:"gradient",gradientColors:["#fda4af","#f87171"],gradientDirection:"to-r",fontFamily:"system-ui",fontSize:"base",fontWeight:"medium",textColor:"#ffffff",borderRadius:"2xl",shadow:"lg",borderWidth:1,borderColor:"rgba(253, 164, 175, 0.3)"},previewComponent:Ov},zv=({isSelected:e,onClick:t,className:n})=>{const r={background:"linear-gradient(135deg, #ff7e5f 0%, #feb47b 100%)",color:"#ffffff",fontFamily:"system-ui, -apple-system, sans-serif",fontSize:"14px",fontWeight:"600",borderRadius:"18px",boxShadow:"0 25px 50px -12px rgba(255, 126, 95, 0.25), 0 0 0 1px rgba(255, 126, 95, 0.1)",border:"none"};return u.jsx(Ft,{title:"Warm Orange",content:"Energetic and vibrant",style:r,isSelected:e,onClick:t,className:n})},Bv={id:"warm-orange",name:"Warm Orange",category:"creative",description:"Energetic warm orange gradient with peachy tones",style:{type:"gradient",gradientColors:["#ff7e5f","#feb47b"],gradientDirection:"to-br",fontFamily:"system-ui",fontSize:"base",fontWeight:"semibold",textColor:"#ffffff",borderRadius:"2xl",shadow:"2xl",borderWidth:0},previewComponent:zv};class nr{static instance;presets=new Map;categories=new Map;constructor(){this.initializeCategories()}static getInstance(){return nr.instance||(nr.instance=new nr),nr.instance}initializeCategories(){["business","creative","natural","personality"].forEach(n=>{this.categories.set(n,[])})}register(t){this.presets.set(t.id,t);const n=this.categories.get(t.category)||[];n.push(t),this.categories.set(t.category,n)}unregister(t){const n=this.presets.get(t);if(n){this.presets.delete(t);const o=(this.categories.get(n.category)||[]).filter(a=>a.id!==t);this.categories.set(n.category,o)}}getByCategory(t){return this.categories.get(t)||[]}getById(t){return this.presets.get(t)}getAll(){return Array.from(this.presets.values())}getAllByOrder(){const t=[];return["business","creative","natural","personality"].forEach(r=>{const o=this.getByCategory(r);t.push(...o)}),t}getCategoryCount(t){return this.categories.get(t)?.length||0}getTotalCount(){return this.presets.size}clear(){this.presets.clear(),this.initializeCategories()}}const Di=nr.getInstance(),$v=()=>Di.getAllByOrder();class rr{static instance;STORAGE_KEYS={USER_PREFERENCES:"cardall_style_preferences",RECENT_STYLES:"cardall_recent_styles",DEFAULT_STYLE:"cardall_default_style"};constructor(){}static getInstance(){return rr.instance||(rr.instance=new rr),rr.instance}saveUserPreference(t,n){try{const r=this.getUserPreferences();r[t]={styleId:n,appliedAt:new Date().toISOString()},localStorage.setItem(this.STORAGE_KEYS.USER_PREFERENCES,JSON.stringify(r)),this.addToRecentStyles(n)}catch(r){console.error("Failed to save user style preference:",r)}}getUserPreference(t){try{return this.getUserPreferences()[t]?.styleId||null}catch(n){return console.error("Failed to get user style preference:",n),null}}getRecentStyles(t=10){try{const n=localStorage.getItem(this.STORAGE_KEYS.RECENT_STYLES);return n?JSON.parse(n).slice(0,t):[]}catch(n){return console.error("Failed to get recent styles:",n),[]}}clearPreferences(){try{localStorage.removeItem(this.STORAGE_KEYS.USER_PREFERENCES),localStorage.removeItem(this.STORAGE_KEYS.RECENT_STYLES)}catch(t){console.error("Failed to clear style preferences:",t)}}setDefaultStyle(t){try{localStorage.setItem(this.STORAGE_KEYS.DEFAULT_STYLE,t)}catch(n){console.error("Failed to set default style:",n)}}getDefaultStyle(){try{return localStorage.getItem(this.STORAGE_KEYS.DEFAULT_STYLE)}catch(t){return console.error("Failed to get default style:",t),null}}getUserPreferences(){try{const t=localStorage.getItem(this.STORAGE_KEYS.USER_PREFERENCES);return t?JSON.parse(t):{}}catch(t){return console.error("Failed to parse user preferences:",t),{}}}addToRecentStyles(t){try{const r=this.getRecentStyles().filter(a=>a!==t),o=[t,...r].slice(0,10);localStorage.setItem(this.STORAGE_KEYS.RECENT_STYLES,JSON.stringify(o))}catch(n){console.error("Failed to update recent styles:",n)}}getStyleUsageStats(){try{const t=this.getUserPreferences(),n={};return Object.values(t).forEach(({styleId:r})=>{n[r]=(n[r]||0)+1}),n}catch(t){return console.error("Failed to get style usage stats:",t),{}}}getMostUsedStyles(t=5){try{const n=this.getStyleUsageStats();return Object.entries(n).sort(([,r],[,o])=>o-r).slice(0,t).map(([r])=>r)}catch(n){return console.error("Failed to get most used styles:",n),[]}}}const rl=rr.getInstance(),qv=()=>{const e=[xv,Mv,Cv,Bv,_v,Lv,Fv,vv,Av,Ev,Nv,Pv];e.forEach(t=>{Di.register(t)}),console.log(`Registered ${e.length} card style presets`)};qv();const Uv=({isOpen:e,onClose:t,context:n})=>{const[r,o]=m.useState(null),[a,i]=m.useState([]);m.useEffect(()=>{const f=$v();console.log("Loaded style presets:",f.length,f),i(f);const p=rl.getUserPreference(n.targetCardId);p&&o(p)},[n.targetCardId]);const l=f=>{const p=Di.getById(f);p&&(o(f),n.onStyleApply(p.style),rl.saveUserPreference(n.targetCardId,f))},d=()=>{o(null),t()};return e?u.jsxs("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center p-4",style:{backgroundColor:"rgba(0, 0, 0, 0.1)",backdropFilter:"blur(2px)"},children:[u.jsx("div",{className:"absolute inset-0",onClick:d}),u.jsxs("div",{className:"relative bg-white rounded-2xl shadow-2xl border border-gray-200 p-6 w-full max-w-md sm:max-w-2xl lg:max-w-4xl",children:[u.jsxs("div",{className:"flex items-center justify-between mb-6",children:[u.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Card Styles"}),u.jsx("button",{onClick:d,className:"p-1 rounded-lg hover:bg-gray-100 transition-colors",children:u.jsx(jn,{className:"w-5 h-5 text-gray-500"})})]}),u.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 gap-3 mb-6",style:{minHeight:"300px",maxHeight:"70vh",overflowY:"auto"},children:a.map(f=>{const p=f.previewComponent;return console.log("Rendering preset:",f.id,f.name,p),u.jsxs("div",{className:"relative",children:[u.jsx(p,{isSelected:r===f.id,onClick:()=>l(f.id),className:"w-full"}),u.jsxs("div",{className:"mt-2 text-center",children:[u.jsx("div",{className:"text-xs font-medium text-gray-700 truncate",children:f.name}),u.jsx("div",{className:"text-xs text-gray-500 capitalize",children:f.category})]})]},f.id)})}),u.jsxs("div",{className:"text-xs text-gray-400 text-center mb-2",children:["Loaded ",a.length," presets"]}),u.jsx("div",{className:"text-xs text-gray-500 text-center",children:"Click any style to apply it instantly to your card"})]})]}):null},sf=m.createContext(void 0),Hv=()=>{const e=m.useContext(sf);if(!e)throw new Error("useStylePanel must be used within a StylePanelProvider");return e},Kv=({children:e})=>{const[t,n]=m.useState({isOpen:!1,context:null}),r=i=>{n({isOpen:!0,context:i})},o=()=>{n({isOpen:!1,context:null})},a={openStylePanel:r,closeStylePanel:o,isOpen:t.isOpen};return u.jsxs(sf.Provider,{value:a,children:[e,typeof window<"u"&&t.isOpen&&t.context&&pr.createPortal(u.jsx(Uv,{isOpen:t.isOpen,onClose:o,context:t.context}),document.body)]})},uf=m.createContext(void 0);function Vv({children:e}){const[t,n]=m.useState(!1),[r,o]=m.useState(null),[a,i]=m.useState([]),[l,d]=m.useState(null),b={isOpen:t,currentCardId:r,currentCardTags:a,onTagsChange:l,openTagPanel:v=>{o(v.targetCardId),i(v.currentTags),d(()=>v.onTagsApply),n(!0)},closeTagPanel:()=>{n(!1),o(null),i([]),d(null)}};return u.jsx(uf.Provider,{value:b,children:e})}function lf(){const e=m.useContext(uf);if(e===void 0)throw new Error("useTagPanel must be used within a TagPanelProvider");return e}function Wv({card:e,onFlip:t,onUpdate:n,onCopy:r,onScreenshot:o,onShare:a,onDelete:i,onMoveToFolder:l,className:d,size:f="md"}){const{openStylePanel:p}=Hv(),{openTagPanel:b}=lf(),{openFolderPanel:v}=Lg(),y=(_,S)=>{n(_,{style:S,updatedAt:new Date})},C=()=>{p({targetCardId:e.id,currentStyle:e.style,onStyleApply:_=>y(e.id,_),onPanelClose:()=>{}})},k=(_,S)=>{const D=e.isFlipped?e.backContent:e.frontContent,I=e.isFlipped?"backContent":"frontContent";n(_,{[I]:{...D,tags:S,lastModified:new Date},updatedAt:new Date})},A=()=>{const _=e.isFlipped?e.backContent:e.frontContent;b({targetCardId:e.id,currentTags:_.tags,onTagsApply:S=>k(e.id,S),onPanelClose:()=>{}})},j=()=>{l&&v({targetCardId:e.id,currentFolderId:e.folderId,onFolderApply:_=>l(e.id,_),onPanelClose:()=>{}})};return u.jsx(mv,{card:e,onFlip:t,onUpdate:n,onCopy:r,onScreenshot:o,onShare:a,onDelete:i,onStyleChange:C,onTagsChange:A,onMoveToFolder:l?j:void 0,className:d,size:f})}function Gv({items:e,gap:t=16,minColumnWidth:n=280,maxColumns:r=5,breakpoints:o={sm:640,md:768,lg:1024,xl:1280,"2xl":1536}}){const a=m.useRef(null),[i,l]=m.useState(new Map),[d,f]=m.useState(0),[p,b]=m.useState({columns:1,gap:t,containerWidth:0}),v=m.useCallback(j=>{if(j===0)return 1;let _=r;j<o.sm?_=1:j<o.md?_=2:j<o.lg?_=3:j<o.xl&&(_=4);const S=j-t,D=Math.floor(S/(n+t));return Math.min(Math.max(1,D),_)},[t,n,r,o]),y=m.useCallback((j,_,S,D)=>{if(_===0||S===0)return{positions:new Map,totalHeight:0};const I=D*(_-1),M=S-I,F=Math.floor(M/_),H=new Array(_).fill(0),Z=new Map;j.forEach(Y=>{const Q=H.indexOf(Math.min(...H)),me=Q*(F+D),_e=H[Q];Z.set(Y.id,{x:me,y:_e,width:F,height:Y.height}),H[Q]+=Y.height+D});const ie=Math.max(...H)-D;return{positions:Z,totalHeight:ie}},[]),C=m.useCallback(j=>{const _=j[0];if(!_)return;const S=_.contentRect.width,D=v(S);b(I=>({...I,columns:D,containerWidth:S}))},[v]);m.useEffect(()=>{const j=a.current;if(!j)return;const _=new ResizeObserver(S=>{C(S)});return _.observe(j),()=>{_.disconnect()}},[C]),m.useEffect(()=>{if(e.length===0||p.containerWidth===0){l(new Map),f(0);return}const{positions:j,totalHeight:_}=y(e,p.columns,p.containerWidth,t);l(j),f(_)},[e,p,t,y]);const k=m.useCallback(j=>i.get(j),[i]),A=m.useCallback((j,_)=>{const S=e.findIndex(F=>F.id===j);if(S===-1)return;const D=[...e];D[S]={...D[S],height:_};const{positions:I,totalHeight:M}=y(D,p.columns,p.containerWidth,t);l(I),f(M)},[e,p,t,y]);return{containerRef:a,positions:i,containerHeight:d,config:p,getItemPosition:k,updateItemHeight:A}}function Yv({cards:e,onCardFlip:t,onCardUpdate:n,onCardCopy:r,onCardScreenshot:o,onCardShare:a,onCardDelete:i,onMoveToFolder:l,onCardStyleChange:d,cardSize:f="md",className:p,gap:b=16,enableVirtualization:v=!0,overscan:y=5}){const[C,k]=m.useState(new Map),[A,j]=m.useState(!1),[_,S]=m.useState(0),[D,I]=m.useState(0),M=m.useRef(new Map),F=m.useRef(null),H=m.useMemo(()=>[...e].sort((K,ge)=>new Date(ge.createdAt).getTime()-new Date(K.createdAt).getTime()),[e]),Z=m.useCallback(K=>{const Ce={sm:.8,md:1,lg:1.3}[f],Se=200*Ce,we=Math.min(Math.ceil(K.frontContent.title.length/25),3)*24*Ce,je=Math.min(Math.ceil(K.frontContent.text.length/40),8)*18*Ce,Fe=K.frontContent.images.length>0?120*Ce:0,Be=K.frontContent.tags.length>0?32*Ce:0,ee=32*Ce;return Math.round(Se+we+je+Fe+Be+ee)},[f]),ie=m.useMemo(()=>H.map(K=>({id:K.id,height:C.get(K.id)||Z(K)})),[H,C,Z]),Y=m.useMemo(()=>({sm:{minColumnWidth:240,maxColumns:5},md:{minColumnWidth:280,maxColumns:4},lg:{minColumnWidth:320,maxColumns:3}})[f],[f]),{containerRef:Q,positions:me,containerHeight:_e,updateItemHeight:Ee}=Gv({items:ie,gap:b,...Y,breakpoints:{sm:640,md:768,lg:1024,xl:1280,"2xl":1536}}),xe=m.useMemo(()=>{if(!v||!F.current)return H;const K=F.current.clientHeight,ge=_-y*100,Ce=_+K+y*100;return H.filter(Se=>{const we=me.get(Se.id);return we?we.y+we.height>=ge&&we.y<=Ce:!0})},[H,me,_,v,y]);m.useCallback(K=>{v&&S(K.currentTarget.scrollTop)},[v]);const Ne=m.useCallback(K=>{const ge=M.current.get(K);if(!ge)return;const Ce=new ResizeObserver(Se=>{const we=Se[0];if(we){const je=we.contentRect.height,Fe=C.get(K);Math.abs(je-(Fe||0))>3&&(k(Be=>{const ee=new Map(Be);return ee.set(K,je),ee}),Ee(K,je))}});return Ce.observe(ge),()=>Ce.disconnect()},[C,Ee]);m.useEffect(()=>{if(!A&&H.length>0){const K=new Map;H.forEach(ge=>{K.set(ge.id,Z(ge))}),k(K),j(!0)}},[H,Z,A]),m.useEffect(()=>{const K=[];return xe.forEach(ge=>{const Ce=Ne(ge.id);Ce&&K.push(Ce)}),()=>{K.forEach(ge=>ge())}},[xe,Ne]);const Ae=m.useCallback((K,ge)=>{ge?M.current.set(K,ge):M.current.delete(K)},[]);return m.useEffect(()=>{F.current&&I(F.current.clientHeight)},[]),H.length===0?u.jsx("div",{className:"flex-1 flex items-center justify-center p-12",children:u.jsxs("div",{className:"text-center space-y-4",children:[u.jsx("div",{className:"w-24 h-24 mx-auto rounded-full bg-muted flex items-center justify-center",children:u.jsx("div",{className:"w-12 h-12 rounded-lg bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center",children:u.jsx("span",{className:"text-white font-bold text-lg",children:"+"})})}),u.jsxs("div",{className:"space-y-2",children:[u.jsx("h3",{className:"text-lg font-semibold",children:"No cards yet"}),u.jsx("p",{className:"text-muted-foreground max-w-sm",children:"Create your first knowledge card to get started. Click the + button to begin."})]})]})}):u.jsx("div",{ref:Q,className:te("relative w-full",p),style:{height:_e},children:xe.map(K=>{const ge=me.get(K.id);return ge?u.jsx("div",{ref:Ce=>Ae(K.id,Ce),className:"absolute transition-all duration-300 ease-out",style:{transform:`translate3d(${ge.x}px, ${ge.y}px, 0)`,width:ge.width,willChange:"transform"},children:u.jsx(Wv,{card:K,onFlip:t,onUpdate:n,onCopy:r,onScreenshot:o,onShare:a,onDelete:i,onMoveToFolder:l,size:f,className:"w-full"})},K.id):null})})}const cf=m.createContext(void 0);function Qv({children:e}){const[t,n]=m.useState(!1),r=()=>n(!0),o=()=>n(!1);return u.jsx(cf.Provider,{value:{isOpen:t,openModal:r,closeModal:o},children:e})}function df(){const e=m.useContext(cf);if(e===void 0)throw new Error("useAuthModal must be used within an AuthModalProvider");return e}const Zv=1,Xv=1e6;let ps=0;function Jv(){return ps=(ps+1)%Number.MAX_SAFE_INTEGER,ps.toString()}const ms=new Map,ol=e=>{if(ms.has(e))return;const t=setTimeout(()=>{ms.delete(e),Hr({type:"REMOVE_TOAST",toastId:e})},Xv);ms.set(e,t)},ew=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,Zv)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(n=>n.id===t.toast.id?{...n,...t.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=t;return n?ol(n):e.toasts.forEach(r=>{ol(r.id)}),{...e,toasts:e.toasts.map(r=>r.id===n||n===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(n=>n.id!==t.toastId)}}},Bo=[];let $o={toasts:[]};function Hr(e){$o=ew($o,e),Bo.forEach(t=>{t($o)})}function tw({...e}){const t=Jv(),n=o=>Hr({type:"UPDATE_TOAST",toast:{...o,id:t}}),r=()=>Hr({type:"DISMISS_TOAST",toastId:t});return Hr({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:o=>{o||r()}}}),{id:t,dismiss:r,update:n}}function nw(){const[e,t]=m.useState($o);return m.useEffect(()=>(Bo.push(t),()=>{const n=Bo.indexOf(t);n>-1&&Bo.splice(n,1)}),[e]),{...e,toast:tw,dismiss:n=>Hr({type:"DISMISS_TOAST",toastId:n})}}var Ni="Avatar",[rw,Vk]=Qt(Ni),[ow,ff]=rw(Ni),hf=m.forwardRef((e,t)=>{const{__scopeAvatar:n,...r}=e,[o,a]=m.useState("idle");return u.jsx(ow,{scope:n,imageLoadingStatus:o,onImageLoadingStatusChange:a,children:u.jsx(Le.span,{...r,ref:t})})});hf.displayName=Ni;var pf="AvatarImage",mf=m.forwardRef((e,t)=>{const{__scopeAvatar:n,src:r,onLoadingStatusChange:o=()=>{},...a}=e,i=ff(pf,n),l=aw(r,a.referrerPolicy),d=jt(f=>{o(f),i.onImageLoadingStatusChange(f)});return $t(()=>{l!=="idle"&&d(l)},[l,d]),l==="loaded"?u.jsx(Le.img,{...a,ref:t,src:r}):null});mf.displayName=pf;var gf="AvatarFallback",bf=m.forwardRef((e,t)=>{const{__scopeAvatar:n,delayMs:r,...o}=e,a=ff(gf,n),[i,l]=m.useState(r===void 0);return m.useEffect(()=>{if(r!==void 0){const d=window.setTimeout(()=>l(!0),r);return()=>window.clearTimeout(d)}},[r]),i&&a.imageLoadingStatus!=="loaded"?u.jsx(Le.span,{...o,ref:t}):null});bf.displayName=gf;function aw(e,t){const[n,r]=m.useState("idle");return $t(()=>{if(!e){r("error");return}let o=!0;const a=new window.Image,i=l=>()=>{o&&r(l)};return r("loading"),a.onload=i("loaded"),a.onerror=i("error"),a.src=e,t&&(a.referrerPolicy=t),()=>{o=!1}},[e,t]),n}var xf=hf,yf=mf,vf=bf;const wf=m.forwardRef(({className:e,...t},n)=>u.jsx(xf,{ref:n,className:te("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",e),...t}));wf.displayName=xf.displayName;const Cf=m.forwardRef(({className:e,...t},n)=>u.jsx(yf,{ref:n,className:te("aspect-square h-full w-full",e),...t}));Cf.displayName=yf.displayName;const kf=m.forwardRef(({className:e,...t},n)=>u.jsx(vf,{ref:n,className:te("flex h-full w-full items-center justify-center rounded-full bg-muted",e),...t}));kf.displayName=vf.displayName;const _f=["from-violet-500 to-pink-500","from-blue-500 to-purple-600","from-green-500 to-teal-600","from-orange-500 to-red-600","from-pink-500 to-rose-600","from-indigo-500 to-blue-600","from-yellow-500 to-orange-600","from-purple-500 to-pink-600","from-teal-500 to-green-600","from-red-500 to-pink-600","from-cyan-500 to-blue-600"];function sw(e){let t=0;for(let n=0;n<e.length;n++){const r=e.charCodeAt(n);t=(t<<5)-t+r,t=t&t}return Math.abs(t)%_f.length}function iw(e){return e?e.username?e.username.charAt(0).toUpperCase():e.email?e.email.charAt(0).toUpperCase():"?":"?"}function uw(e){return e&&(e.username||e.email)||"anonymous"}function Sf({user:e,size:t="md",className:n,onClick:r,showHoverEffect:o=!0}){const a=iw(e),i=uw(e),l=sw(i),d=_f[l],p=te({sm:"h-6 w-6 text-xs",md:"h-8 w-8 text-sm",lg:"h-10 w-10 text-base"}[t],o&&r&&"cursor-pointer transition-transform hover:scale-105",n),b=te("bg-gradient-to-br text-white font-semibold flex items-center justify-center",d,o&&r&&"transition-all duration-200 hover:shadow-md");return u.jsxs(wf,{className:p,onClick:r,children:[u.jsx(Cf,{src:e?.avatar_url,alt:e?.username||e?.email||"User"}),u.jsx(kf,{className:b,children:a})]})}function al(e){if(!e)return"";try{const t=new DOMParser().parseFromString(e,"text/html");t.querySelectorAll("img").forEach(i=>i.remove()),t.querySelectorAll("br").forEach(i=>{i.replaceWith(`
`)}),t.querySelectorAll("p, div, h1, h2, h3, h4, h5, h6, li, blockquote").forEach(i=>{i.insertAdjacentText("afterend",`
`)});let a=t.body.textContent||t.body.innerText||"";return a=a.replace(/[ \t]+/g," ").replace(/[ \t]*\n[ \t]*/g,`
`).replace(/\n{3,}/g,`

`).trim(),a}catch(t){return console.warn("Failed to parse HTML, falling back to regex cleanup:",t),e.replace(/<img[^>]*>/gi,"").replace(/<br\s*\/?>/gi,`
`).replace(/<\/?(p|div|h[1-6]|li|blockquote)[^>]*>/gi,`
`).replace(/<[^>]*>/g,"").replace(/&nbsp;/g," ").replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&#39;/g,"'").replace(/[ \t]+/g," ").replace(/[ \t]*\n[ \t]*/g,`
`).replace(/\n{3,}/g,`

`).trim()}}function lw(e,t){const n=al(e),r=al(t);return`${n}

${r}`}async function cw(e){try{if(navigator.clipboard&&navigator.clipboard.writeText)return await navigator.clipboard.writeText(e),!0;{const t=document.createElement("textarea");t.value=e,t.style.position="fixed",t.style.left="-999999px",t.style.top="-999999px",document.body.appendChild(t),t.focus(),t.select();const n=document.execCommand("copy");return document.body.removeChild(t),n}}catch(t){return console.error("Failed to copy text to clipboard:",t),!1}}function dw(e,t){return e[13]=1,e[14]=t>>8,e[15]=t&255,e[16]=t>>8,e[17]=t&255,e}const Ef=112,jf=72,Af=89,Df=115;let gs;function fw(){const e=new Int32Array(256);for(let t=0;t<256;t++){let n=t;for(let r=0;r<8;r++)n=n&1?3988292384^n>>>1:n>>>1;e[t]=n}return e}function hw(e){let t=-1;gs||(gs=fw());for(let n=0;n<e.length;n++)t=gs[(t^e[n])&255]^t>>>8;return t^-1}function pw(e){const t=e.length-1;for(let n=t;n>=4;n--)if(e[n-4]===9&&e[n-3]===Ef&&e[n-2]===jf&&e[n-1]===Af&&e[n]===Df)return n-3;return 0}function mw(e,t,n=!1){const r=new Uint8Array(13);t*=39.3701,r[0]=Ef,r[1]=jf,r[2]=Af,r[3]=Df,r[4]=t>>>24,r[5]=t>>>16,r[6]=t>>>8,r[7]=t&255,r[8]=r[4],r[9]=r[5],r[10]=r[6],r[11]=r[7],r[12]=1;const o=hw(r),a=new Uint8Array(4);if(a[0]=o>>>24,a[1]=o>>>16,a[2]=o>>>8,a[3]=o&255,n){const i=pw(e);return e.set(r,i),e.set(a,i+13),e}else{const i=new Uint8Array(4);i[0]=0,i[1]=0,i[2]=0,i[3]=9;const l=new Uint8Array(54);return l.set(e,0),l.set(i,33),l.set(r,37),l.set(a,50),l}}const gw="AAlwSFlz",bw="AAAJcEhZ",xw="AAAACXBI";function yw(e){let t=e.indexOf(gw);return t===-1&&(t=e.indexOf(bw)),t===-1&&(t=e.indexOf(xw)),t}const Nf="[modern-screenshot]",Sn=typeof window<"u",vw=Sn&&"Worker"in window,ww=Sn&&"atob"in window,Cw=Sn&&"btoa"in window,Ti=Sn?window.navigator?.userAgent:"",Tf=Ti.includes("Chrome"),Jo=Ti.includes("AppleWebKit")&&!Tf,Mi=Ti.includes("Firefox"),kw=e=>e&&"__CONTEXT__"in e,_w=e=>e.constructor.name==="CSSFontFaceRule",Sw=e=>e.constructor.name==="CSSImportRule",Yt=e=>e.nodeType===1,lo=e=>typeof e.className=="object",Mf=e=>e.tagName==="image",Ew=e=>e.tagName==="use",eo=e=>Yt(e)&&typeof e.style<"u"&&!lo(e),jw=e=>e.nodeType===8,Aw=e=>e.nodeType===3,hr=e=>e.tagName==="IMG",ma=e=>e.tagName==="VIDEO",Dw=e=>e.tagName==="CANVAS",Nw=e=>e.tagName==="TEXTAREA",Tw=e=>e.tagName==="INPUT",Mw=e=>e.tagName==="STYLE",Iw=e=>e.tagName==="SCRIPT",Pw=e=>e.tagName==="SELECT",Rw=e=>e.tagName==="SLOT",Fw=e=>e.tagName==="IFRAME",Ow=(...e)=>console.warn(Nf,...e);function Lw(e){const t=e?.createElement?.("canvas");return t&&(t.height=t.width=1),!!t&&"toDataURL"in t&&!!t.toDataURL("image/webp").includes("image/webp")}const Rs=e=>e.startsWith("data:");function If(e,t){if(e.match(/^[a-z]+:\/\//i))return e;if(Sn&&e.match(/^\/\//))return window.location.protocol+e;if(e.match(/^[a-z]+:/i)||!Sn)return e;const n=ga().implementation.createHTMLDocument(),r=n.createElement("base"),o=n.createElement("a");return n.head.appendChild(r),n.body.appendChild(o),t&&(r.href=t),o.href=e,o.href}function ga(e){return(e&&Yt(e)?e?.ownerDocument:e)??window.document}const ba="http://www.w3.org/2000/svg";function zw(e,t,n){const r=ga(n).createElementNS(ba,"svg");return r.setAttributeNS(null,"width",e.toString()),r.setAttributeNS(null,"height",t.toString()),r.setAttributeNS(null,"viewBox",`0 0 ${e} ${t}`),r}function Bw(e,t){let n=new XMLSerializer().serializeToString(e);return t&&(n=n.replace(/[\u0000-\u0008\v\f\u000E-\u001F\uD800-\uDFFF\uFFFE\uFFFF]/gu,"")),`data:image/svg+xml;charset=utf-8,${encodeURIComponent(n)}`}function $w(e,t){return new Promise((n,r)=>{const o=new FileReader;o.onload=()=>n(o.result),o.onerror=()=>r(o.error),o.onabort=()=>r(new Error(`Failed read blob to ${t}`)),o.readAsDataURL(e)})}const qw=e=>$w(e,"dataUrl");function sr(e,t){const n=ga(t).createElement("img");return n.decoding="sync",n.loading="eager",n.src=e,n}function to(e,t){return new Promise(n=>{const{timeout:r,ownerDocument:o,onError:a,onWarn:i}=t??{},l=typeof e=="string"?sr(e,ga(o)):e;let d=null,f=null;function p(){n(l),d&&clearTimeout(d),f?.()}if(r&&(d=setTimeout(p,r)),ma(l)){const b=l.currentSrc||l.src;if(!b)return l.poster?to(l.poster,t).then(n):p();if(l.readyState>=2)return p();const v=p,y=C=>{i?.("Failed video load",b,C),a?.(C),p()};f=()=>{l.removeEventListener("loadeddata",v),l.removeEventListener("error",y)},l.addEventListener("loadeddata",v,{once:!0}),l.addEventListener("error",y,{once:!0})}else{const b=Mf(l)?l.href.baseVal:l.currentSrc||l.src;if(!b)return p();const v=async()=>{if(hr(l)&&"decode"in l)try{await l.decode()}catch(C){i?.("Failed to decode image, trying to render anyway",l.dataset.originalSrc||b,C)}p()},y=C=>{i?.("Failed image load",l.dataset.originalSrc||b,C),p()};if(hr(l)&&l.complete)return v();f=()=>{l.removeEventListener("load",v),l.removeEventListener("error",y)},l.addEventListener("load",v,{once:!0}),l.addEventListener("error",y,{once:!0})}})}async function Uw(e,t){eo(e)&&(hr(e)||ma(e)?await to(e,t):await Promise.all(["img","video"].flatMap(n=>Array.from(e.querySelectorAll(n)).map(r=>to(r,t)))))}const Pf=function(){let t=0;const n=()=>`0000${(Math.random()*36**4<<0).toString(36)}`.slice(-4);return()=>(t+=1,`u${n()}${t}`)}();function Rf(e){return e?.split(",").map(t=>t.trim().replace(/"|'/g,"").toLowerCase()).filter(Boolean)}let sl=0;function Hw(e){const t=`${Nf}[#${sl}]`;return sl++,{time:n=>e&&console.time(`${t} ${n}`),timeEnd:n=>e&&console.timeEnd(`${t} ${n}`),warn:(...n)=>e&&Ow(...n)}}function Kw(e){return{cache:e?"no-cache":"force-cache"}}async function xa(e,t){return kw(e)?e:Vw(e,{...t,autoDestruct:!0})}async function Vw(e,t){const{scale:n=1,workerUrl:r,workerNumber:o=1}=t||{},a=!!t?.debug,i=t?.features??!0,l=e.ownerDocument??(Sn?window.document:void 0),d=e.ownerDocument?.defaultView??(Sn?window:void 0),f=new Map,p={width:0,height:0,quality:1,type:"image/png",scale:n,backgroundColor:null,style:null,filter:null,maximumCanvasSize:0,timeout:3e4,progress:null,debug:a,fetch:{requestInit:Kw(t?.fetch?.bypassingCache),placeholderImage:"data:image/png;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",bypassingCache:!1,...t?.fetch},fetchFn:null,font:{},drawImageInterval:100,workerUrl:null,workerNumber:o,onCloneEachNode:null,onCloneNode:null,onEmbedNode:null,onCreateForeignObjectSvg:null,includeStyleProperties:null,autoDestruct:!1,...t,__CONTEXT__:!0,log:Hw(a),node:e,ownerDocument:l,ownerWindow:d,dpi:n===1?null:96*n,svgStyleElement:Ff(l),svgDefsElement:l?.createElementNS(ba,"defs"),svgStyles:new Map,defaultComputedStyles:new Map,workers:[...Array.from({length:vw&&r&&o?o:0})].map(()=>{try{const y=new Worker(r);return y.onmessage=async C=>{const{url:k,result:A}=C.data;A?f.get(k)?.resolve?.(A):f.get(k)?.reject?.(new Error(`Error receiving message from worker: ${k}`))},y.onmessageerror=C=>{const{url:k}=C.data;f.get(k)?.reject?.(new Error(`Error receiving message from worker: ${k}`))},y}catch(y){return p.log.warn("Failed to new Worker",y),null}}).filter(Boolean),fontFamilies:new Map,fontCssTexts:new Map,acceptOfImage:`${[Lw(l)&&"image/webp","image/svg+xml","image/*","*/*"].filter(Boolean).join(",")};q=0.8`,requests:f,drawImageCount:0,tasks:[],features:i,isEnable:y=>y==="restoreScrollPosition"?typeof i=="boolean"?!1:i[y]??!1:typeof i=="boolean"?i:i[y]??!0,shadowRoots:[]};p.log.time("wait until load"),await Uw(e,{timeout:p.timeout,onWarn:p.log.warn}),p.log.timeEnd("wait until load");const{width:b,height:v}=Ww(e,p);return p.width=b,p.height=v,p}function Ff(e){if(!e)return;const t=e.createElement("style"),n=t.ownerDocument.createTextNode(`
.______background-clip--text {
  background-clip: text;
  -webkit-background-clip: text;
}
`);return t.appendChild(n),t}function Ww(e,t){let{width:n,height:r}=t;if(Yt(e)&&(!n||!r)){const o=e.getBoundingClientRect();n=n||o.width||Number(e.getAttribute("width"))||0,r=r||o.height||Number(e.getAttribute("height"))||0}return{width:n,height:r}}async function Gw(e,t){const{log:n,timeout:r,drawImageCount:o,drawImageInterval:a}=t;n.time("image to canvas");const i=await to(e,{timeout:r,onWarn:t.log.warn}),{canvas:l,context2d:d}=Yw(e.ownerDocument,t),f=()=>{try{d?.drawImage(i,0,0,l.width,l.height)}catch(p){t.log.warn("Failed to drawImage",p)}};if(f(),t.isEnable("fixSvgXmlDecode"))for(let p=0;p<o;p++)await new Promise(b=>{setTimeout(()=>{d?.clearRect(0,0,l.width,l.height),f(),b()},p+a)});return t.drawImageCount=0,n.timeEnd("image to canvas"),l}function Yw(e,t){const{width:n,height:r,scale:o,backgroundColor:a,maximumCanvasSize:i}=t,l=e.createElement("canvas");l.width=Math.floor(n*o),l.height=Math.floor(r*o),l.style.width=`${n}px`,l.style.height=`${r}px`,i&&(l.width>i||l.height>i)&&(l.width>i&&l.height>i?l.width>l.height?(l.height*=i/l.width,l.width=i):(l.width*=i/l.height,l.height=i):l.width>i?(l.height*=i/l.width,l.width=i):(l.width*=i/l.height,l.height=i));const d=l.getContext("2d");return d&&a&&(d.fillStyle=a,d.fillRect(0,0,l.width,l.height)),{canvas:l,context2d:d}}function Of(e,t){if(e.ownerDocument)try{const a=e.toDataURL();if(a!=="data:,")return sr(a,e.ownerDocument)}catch(a){t.log.warn("Failed to clone canvas",a)}const n=e.cloneNode(!1),r=e.getContext("2d"),o=n.getContext("2d");try{return r&&o&&o.putImageData(r.getImageData(0,0,e.width,e.height),0,0),n}catch(a){t.log.warn("Failed to clone canvas",a)}return n}function Qw(e,t){try{if(e?.contentDocument?.body)return Ii(e.contentDocument.body,t)}catch(n){t.log.warn("Failed to clone iframe",n)}return e.cloneNode(!1)}function Zw(e){const t=e.cloneNode(!1);return e.currentSrc&&e.currentSrc!==e.src&&(t.src=e.currentSrc,t.srcset=""),t.loading==="lazy"&&(t.loading="eager"),t}async function Xw(e,t){if(e.ownerDocument&&!e.currentSrc&&e.poster)return sr(e.poster,e.ownerDocument);const n=e.cloneNode(!1);n.crossOrigin="anonymous",e.currentSrc&&e.currentSrc!==e.src&&(n.src=e.currentSrc);const r=n.ownerDocument;if(r){let o=!0;if(await to(n,{onError:()=>o=!1,onWarn:t.log.warn}),!o)return e.poster?sr(e.poster,e.ownerDocument):n;n.currentTime=e.currentTime,await new Promise(i=>{n.addEventListener("seeked",i,{once:!0})});const a=r.createElement("canvas");a.width=e.offsetWidth,a.height=e.offsetHeight;try{const i=a.getContext("2d");i&&i.drawImage(n,0,0,a.width,a.height)}catch(i){return t.log.warn("Failed to clone video",i),e.poster?sr(e.poster,e.ownerDocument):n}return Of(a,t)}return n}function Jw(e,t){return Dw(e)?Of(e,t):Fw(e)?Qw(e,t):hr(e)?Zw(e):ma(e)?Xw(e,t):e.cloneNode(!1)}function e3(e){let t=e.sandbox;if(!t){const{ownerDocument:n}=e;try{n&&(t=n.createElement("iframe"),t.id=`__SANDBOX__${Pf()}`,t.width="0",t.height="0",t.style.visibility="hidden",t.style.position="fixed",n.body.appendChild(t),t.srcdoc='<!DOCTYPE html><meta charset="UTF-8"><title></title><body>',e.sandbox=t)}catch(r){e.log.warn("Failed to getSandBox",r)}}return t}const t3=["width","height","-webkit-text-fill-color"],n3=["stroke","fill"];function Lf(e,t,n){const{defaultComputedStyles:r}=n,o=e.nodeName.toLowerCase(),a=lo(e)&&o!=="svg",i=a?n3.map(k=>[k,e.getAttribute(k)]).filter(([,k])=>k!==null):[],l=[a&&"svg",o,i.map((k,A)=>`${k}=${A}`).join(","),t].filter(Boolean).join(":");if(r.has(l))return r.get(l);const f=e3(n)?.contentWindow;if(!f)return new Map;const p=f?.document;let b,v;a?(b=p.createElementNS(ba,"svg"),v=b.ownerDocument.createElementNS(b.namespaceURI,o),i.forEach(([k,A])=>{v.setAttributeNS(null,k,A)}),b.appendChild(v)):b=v=p.createElement(o),v.textContent=" ",p.body.appendChild(b);const y=f.getComputedStyle(v,t),C=new Map;for(let k=y.length,A=0;A<k;A++){const j=y.item(A);t3.includes(j)||C.set(j,y.getPropertyValue(j))}return p.body.removeChild(b),r.set(l,C),C}function zf(e,t,n){const r=new Map,o=[],a=new Map;if(n)for(const l of n)i(l);else for(let l=e.length,d=0;d<l;d++){const f=e.item(d);i(f)}for(let l=o.length,d=0;d<l;d++)a.get(o[d])?.forEach((f,p)=>r.set(p,f));function i(l){const d=e.getPropertyValue(l),f=e.getPropertyPriority(l),p=l.lastIndexOf("-"),b=p>-1?l.substring(0,p):void 0;if(b){let v=a.get(b);v||(v=new Map,a.set(b,v)),v.set(l,[d,f])}t.get(l)===d&&!f||(b?o.push(b):r.set(l,[d,f]))}return r}function r3(e,t,n,r){const{ownerWindow:o,includeStyleProperties:a,currentParentNodeStyle:i}=r,l=t.style,d=o.getComputedStyle(e),f=Lf(e,null,r);i?.forEach((b,v)=>{f.delete(v)});const p=zf(d,f,a);p.delete("transition-property"),p.delete("all"),p.delete("d"),p.delete("content"),n&&(p.delete("margin-top"),p.delete("margin-right"),p.delete("margin-bottom"),p.delete("margin-left"),p.delete("margin-block-start"),p.delete("margin-block-end"),p.delete("margin-inline-start"),p.delete("margin-inline-end"),p.set("box-sizing",["border-box",""])),p.get("background-clip")?.[0]==="text"&&t.classList.add("______background-clip--text"),Tf&&(p.has("font-kerning")||p.set("font-kerning",["normal",""]),(p.get("overflow-x")?.[0]==="hidden"||p.get("overflow-y")?.[0]==="hidden")&&p.get("text-overflow")?.[0]==="ellipsis"&&e.scrollWidth===e.clientWidth&&p.set("text-overflow",["clip",""]));for(let b=l.length,v=0;v<b;v++)l.removeProperty(l.item(v));return p.forEach(([b,v],y)=>{l.setProperty(y,b,v)}),p}function o3(e,t){(Nw(e)||Tw(e)||Pw(e))&&t.setAttribute("value",e.value)}const a3=[":before",":after"],s3=[":-webkit-scrollbar",":-webkit-scrollbar-button",":-webkit-scrollbar-thumb",":-webkit-scrollbar-track",":-webkit-scrollbar-track-piece",":-webkit-scrollbar-corner",":-webkit-resizer"];function i3(e,t,n,r,o){const{ownerWindow:a,svgStyleElement:i,svgStyles:l,currentNodeStyle:d}=r;if(!i||!a)return;function f(p){const b=a.getComputedStyle(e,p);let v=b.getPropertyValue("content");if(!v||v==="none")return;o?.(v),v=v.replace(/(')|(")|(counter\(.+\))/g,"");const y=[Pf()],C=Lf(e,p,r);d?.forEach((S,D)=>{C.delete(D)});const k=zf(b,C,r.includeStyleProperties);k.delete("content"),k.delete("-webkit-locale"),k.get("background-clip")?.[0]==="text"&&t.classList.add("______background-clip--text");const A=[`content: '${v}';`];if(k.forEach(([S,D],I)=>{A.push(`${I}: ${S}${D?" !important":""};`)}),A.length===1)return;try{t.className=[t.className,...y].join(" ")}catch(S){r.log.warn("Failed to copyPseudoClass",S);return}const j=A.join(`
  `);let _=l.get(j);_||(_=[],l.set(j,_)),_.push(`.${y[0]}:${p}`)}a3.forEach(f),n&&s3.forEach(f)}const il=new Set(["symbol"]);async function ul(e,t,n,r,o){if(Yt(n)&&(Mw(n)||Iw(n))||r.filter&&!r.filter(n))return;il.has(t.nodeName)||il.has(n.nodeName)?r.currentParentNodeStyle=void 0:r.currentParentNodeStyle=r.currentNodeStyle;const a=await Ii(n,r,!1,o);r.isEnable("restoreScrollPosition")&&u3(e,a),t.appendChild(a)}async function ll(e,t,n,r){let o=e.firstChild;Yt(e)&&e.shadowRoot&&(o=e.shadowRoot?.firstChild,n.shadowRoots.push(e.shadowRoot));for(let a=o;a;a=a.nextSibling)if(!jw(a))if(Yt(a)&&Rw(a)&&typeof a.assignedNodes=="function"){const i=a.assignedNodes();for(let l=0;l<i.length;l++)await ul(e,t,i[l],n,r)}else await ul(e,t,a,n,r)}function u3(e,t){if(!eo(e)||!eo(t))return;const{scrollTop:n,scrollLeft:r}=e;if(!n&&!r)return;const{transform:o}=t.style,a=new DOMMatrix(o),{a:i,b:l,c:d,d:f}=a;a.a=1,a.b=0,a.c=0,a.d=1,a.translateSelf(-r,-n),a.a=i,a.b=l,a.c=d,a.d=f,t.style.transform=a.toString()}function l3(e,t){const{backgroundColor:n,width:r,height:o,style:a}=t,i=e.style;if(n&&i.setProperty("background-color",n,"important"),r&&i.setProperty("width",`${r}px`,"important"),o&&i.setProperty("height",`${o}px`,"important"),a)for(const l in a)i[l]=a[l]}const c3=/^[\w-:]+$/;async function Ii(e,t,n=!1,r){const{ownerDocument:o,ownerWindow:a,fontFamilies:i,onCloneEachNode:l}=t;if(o&&Aw(e))return r&&/\S/.test(e.data)&&r(e.data),o.createTextNode(e.data);if(o&&a&&Yt(e)&&(eo(e)||lo(e))){const f=await Jw(e,t);if(t.isEnable("removeAbnormalAttributes")){const k=f.getAttributeNames();for(let A=k.length,j=0;j<A;j++){const _=k[j];c3.test(_)||f.removeAttribute(_)}}const p=t.currentNodeStyle=r3(e,f,n,t);n&&l3(f,t);let b=!1;if(t.isEnable("copyScrollbar")){const k=[p.get("overflow-x")?.[0],p.get("overflow-y")?.[0]];b=k.includes("scroll")||(k.includes("auto")||k.includes("overlay"))&&(e.scrollHeight>e.clientHeight||e.scrollWidth>e.clientWidth)}const v=p.get("text-transform")?.[0],y=Rf(p.get("font-family")?.[0]),C=y?k=>{v==="uppercase"?k=k.toUpperCase():v==="lowercase"?k=k.toLowerCase():v==="capitalize"&&(k=k[0].toUpperCase()+k.substring(1)),y.forEach(A=>{let j=i.get(A);j||i.set(A,j=new Set),k.split("").forEach(_=>j.add(_))})}:void 0;return i3(e,f,b,t,C),o3(e,f),ma(e)||await ll(e,f,t,C),await l?.(f),f}const d=e.cloneNode(!1);return await ll(e,d,t),await l?.(d),d}function d3(e){if(e.ownerDocument=void 0,e.ownerWindow=void 0,e.svgStyleElement=void 0,e.svgDefsElement=void 0,e.svgStyles.clear(),e.defaultComputedStyles.clear(),e.sandbox){try{e.sandbox.remove()}catch(t){e.log.warn("Failed to destroyContext",t)}e.sandbox=void 0}e.workers=[],e.fontFamilies.clear(),e.fontCssTexts.clear(),e.requests.clear(),e.tasks=[],e.shadowRoots=[]}function f3(e){const{url:t,timeout:n,responseType:r,...o}=e,a=new AbortController,i=n?setTimeout(()=>a.abort(),n):void 0;return fetch(t,{signal:a.signal,...o}).then(l=>{if(!l.ok)throw new Error("Failed fetch, not 2xx response",{cause:l});switch(r){case"arrayBuffer":return l.arrayBuffer();case"dataUrl":return l.blob().then(qw);case"text":default:return l.text()}}).finally(()=>clearTimeout(i))}function no(e,t){const{url:n,requestType:r="text",responseType:o="text",imageDom:a}=t;let i=n;const{timeout:l,acceptOfImage:d,requests:f,fetchFn:p,fetch:{requestInit:b,bypassingCache:v,placeholderImage:y},font:C,workers:k,fontFamilies:A}=e;r==="image"&&(Jo||Mi)&&e.drawImageCount++;let j=f.get(n);if(!j){v&&v instanceof RegExp&&v.test(i)&&(i+=(/\?/.test(i)?"&":"?")+new Date().getTime());const _=r.startsWith("font")&&C&&C.minify,S=new Set;_&&r.split(";")[1].split(",").forEach(F=>{A.has(F)&&A.get(F).forEach(H=>S.add(H))});const D=_&&S.size,I={url:i,timeout:l,responseType:D?"arrayBuffer":o,headers:r==="image"?{accept:d}:void 0,...b};j={type:r,resolve:void 0,reject:void 0,response:null},j.response=(async()=>{if(p&&r==="image"){const M=await p(n);if(M)return M}return!Jo&&n.startsWith("http")&&k.length?new Promise((M,F)=>{k[f.size&k.length-1].postMessage({rawUrl:n,...I}),j.resolve=M,j.reject=F}):f3(I)})().catch(M=>{if(f.delete(n),r==="image"&&y)return e.log.warn("Failed to fetch image base64, trying to use placeholder image",i),typeof y=="string"?y:y(a);throw M}),f.set(n,j)}return j.response}async function Bf(e,t,n,r){if(!$f(e))return e;for(const[o,a]of h3(e,t))try{const i=await no(n,{url:a,requestType:r?"image":"text",responseType:"dataUrl"});e=e.replace(p3(o),`$1${i}$3`)}catch(i){n.log.warn("Failed to fetch css data url",o,i)}return e}function $f(e){return/url\((['"]?)([^'"]+?)\1\)/.test(e)}const qf=/url\((['"]?)([^'"]+?)\1\)/g;function h3(e,t){const n=[];return e.replace(qf,(r,o,a)=>(n.push([a,If(a,t)]),r)),n.filter(([r])=>!Rs(r))}function p3(e){const t=e.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1");return new RegExp(`(url\\(['"]?)(${t})(['"]?\\))`,"g")}const m3=["background-image","border-image-source","-webkit-border-image","-webkit-mask-image","list-style-image"];function g3(e,t){return m3.map(n=>{const r=e.getPropertyValue(n);return!r||r==="none"?null:((Jo||Mi)&&t.drawImageCount++,Bf(r,null,t,!0).then(o=>{!o||r===o||e.setProperty(n,o,e.getPropertyPriority(n))}))}).filter(Boolean)}function b3(e,t){if(hr(e)){const n=e.currentSrc||e.src;if(!Rs(n))return[no(t,{url:n,imageDom:e,requestType:"image",responseType:"dataUrl"}).then(r=>{r&&(e.srcset="",e.dataset.originalSrc=n,e.src=r||"")})];(Jo||Mi)&&t.drawImageCount++}else if(lo(e)&&!Rs(e.href.baseVal)){const n=e.href.baseVal;return[no(t,{url:n,imageDom:e,requestType:"image",responseType:"dataUrl"}).then(r=>{r&&(e.dataset.originalSrc=n,e.href.baseVal=r||"")})]}return[]}function x3(e,t){const{ownerDocument:n,svgDefsElement:r}=t,o=e.getAttribute("href")??e.getAttribute("xlink:href");if(!o)return[];const[a,i]=o.split("#");if(i){const l=`#${i}`,d=t.shadowRoots.reduce((f,p)=>f??p.querySelector(`svg ${l}`),n?.querySelector(`svg ${l}`));if(a&&e.setAttribute("href",l),r?.querySelector(l))return[];if(d)return r?.appendChild(d.cloneNode(!0)),[];if(a)return[no(t,{url:a,responseType:"text"}).then(f=>{r?.insertAdjacentHTML("beforeend",f)})]}return[]}function Uf(e,t){const{tasks:n}=t;Yt(e)&&((hr(e)||Mf(e))&&n.push(...b3(e,t)),Ew(e)&&n.push(...x3(e,t))),eo(e)&&n.push(...g3(e.style,t)),e.childNodes.forEach(r=>{Uf(r,t)})}async function y3(e,t){const{ownerDocument:n,svgStyleElement:r,fontFamilies:o,fontCssTexts:a,tasks:i,font:l}=t;if(!(!n||!r||!o.size))if(l&&l.cssText){const d=dl(l.cssText,t);r.appendChild(n.createTextNode(`${d}
`))}else{const d=Array.from(n.styleSheets).filter(p=>{try{return"cssRules"in p&&!!p.cssRules.length}catch(b){return t.log.warn(`Error while reading CSS rules from ${p.href}`,b),!1}});await Promise.all(d.flatMap(p=>Array.from(p.cssRules).map(async(b,v)=>{if(Sw(b)){let y=v+1;const C=b.href;let k="";try{k=await no(t,{url:C,requestType:"text",responseType:"text"})}catch(j){t.log.warn(`Error fetch remote css import from ${C}`,j)}const A=k.replace(qf,(j,_,S)=>j.replace(S,If(S,C)));for(const j of w3(A))try{p.insertRule(j,j.startsWith("@import")?y+=1:p.cssRules.length)}catch(_){t.log.warn("Error inserting rule from remote css import",{rule:j,error:_})}}}))),d.flatMap(p=>Array.from(p.cssRules)).filter(p=>_w(p)&&$f(p.style.getPropertyValue("src"))&&Rf(p.style.getPropertyValue("font-family"))?.some(b=>o.has(b))).forEach(p=>{const b=p,v=a.get(b.cssText);v?r.appendChild(n.createTextNode(`${v}
`)):i.push(Bf(b.cssText,b.parentStyleSheet?b.parentStyleSheet.href:null,t).then(y=>{y=dl(y,t),a.set(b.cssText,y),r.appendChild(n.createTextNode(`${y}
`))}))})}}const v3=/(\/\*[\s\S]*?\*\/)/g,cl=/((@.*?keyframes [\s\S]*?){([\s\S]*?}\s*?)})/gi;function w3(e){if(e==null)return[];const t=[];let n=e.replace(v3,"");for(;;){const a=cl.exec(n);if(!a)break;t.push(a[0])}n=n.replace(cl,"");const r=/@import[\s\S]*?url\([^)]*\)[\s\S]*?;/gi,o=new RegExp("((\\s*?(?:\\/\\*[\\s\\S]*?\\*\\/)?\\s*?@media[\\s\\S]*?){([\\s\\S]*?)}\\s*?})|(([\\s\\S]*?){([\\s\\S]*?)})","gi");for(;;){let a=r.exec(n);if(a)o.lastIndex=r.lastIndex;else if(a=o.exec(n),a)r.lastIndex=o.lastIndex;else break;t.push(a[0])}return t}const C3=/url\([^)]+\)\s*format\((["']?)([^"']+)\1\)/g,k3=/src:\s*(?:url\([^)]+\)\s*format\([^)]+\)[,;]\s*)+/g;function dl(e,t){const{font:n}=t,r=n?n?.preferredFormat:void 0;return r?e.replace(k3,o=>{for(;;){const[a,,i]=C3.exec(o)||[];if(!i)return"";if(i===r)return`src: ${a};`}}):e}async function _3(e,t){const n=await xa(e,t);if(Yt(n.node)&&lo(n.node))return n.node;const{ownerDocument:r,log:o,tasks:a,svgStyleElement:i,svgDefsElement:l,svgStyles:d,font:f,progress:p,autoDestruct:b,onCloneNode:v,onEmbedNode:y,onCreateForeignObjectSvg:C}=n;o.time("clone node");const k=await Ii(n.node,n,!0);if(i&&r){let D="";d.forEach((I,M)=>{D+=`${I.join(`,
`)} {
  ${M}
}
`}),i.appendChild(r.createTextNode(D))}o.timeEnd("clone node"),await v?.(k),f!==!1&&Yt(k)&&(o.time("embed web font"),await y3(k,n),o.timeEnd("embed web font")),o.time("embed node"),Uf(k,n);const A=a.length;let j=0;const _=async()=>{for(;;){const D=a.pop();if(!D)break;try{await D}catch(I){n.log.warn("Failed to run task",I)}p?.(++j,A)}};p?.(j,A),await Promise.all([...Array.from({length:4})].map(_)),o.timeEnd("embed node"),await y?.(k);const S=S3(k,n);return l&&S.insertBefore(l,S.children[0]),i&&S.insertBefore(i,S.children[0]),b&&d3(n),await C?.(S),S}function S3(e,t){const{width:n,height:r}=t,o=zw(n,r,e.ownerDocument),a=o.ownerDocument.createElementNS(o.namespaceURI,"foreignObject");return a.setAttributeNS(null,"x","0%"),a.setAttributeNS(null,"y","0%"),a.setAttributeNS(null,"width","100%"),a.setAttributeNS(null,"height","100%"),a.append(e),o.appendChild(a),o}async function E3(e,t){const n=await xa(e,t),r=await _3(n),o=Bw(r,n.isEnable("removeControlCharacter"));n.autoDestruct||(n.svgStyleElement=Ff(n.ownerDocument),n.svgDefsElement=n.ownerDocument?.createElementNS(ba,"defs"),n.svgStyles.clear());const a=sr(o,r.ownerDocument);return await Gw(a,n)}async function j3(e,t){const n=await xa(e,t),{log:r,quality:o,type:a,dpi:i}=n,l=await E3(n);r.time("canvas to data url");let d=l.toDataURL(a,o);if(["image/png","image/jpeg"].includes(a)&&i&&ww&&Cw){const[f,p]=d.split(",");let b=0,v=!1;if(a==="image/png"){const S=yw(p);S>=0?(b=Math.ceil((S+28)/3)*4,v=!0):b=33/3*4}else a==="image/jpeg"&&(b=18/3*4);const y=p.substring(0,b),C=p.substring(b),k=window.atob(y),A=new Uint8Array(k.length);for(let S=0;S<A.length;S++)A[S]=k.charCodeAt(S);const j=a==="image/png"?mw(A,i,v):dw(A,i),_=window.btoa(String.fromCharCode(...j));d=[f,",",_,C].join("")}return r.timeEnd("canvas to data url"),d}async function A3(e,t){return j3(await xa(e,{...t,type:"image/png"}))}function D3(e,t=30){if(!e||e.trim()==="")return"untitled-card";let n=e.replace(/[^\w\s\u4e00-\u9fff\u3400-\u4dbf\u20000-\u2a6df\u2a700-\u2b73f\u2b740-\u2b81f\u2b820-\u2ceaf\uf900-\ufaff\u3300-\u33ff-]/g,"").replace(/\s+/g," ").trim();return n?(n.length>t&&(n=n.substring(0,t).trim()),n):"untitled-card"}async function N3(e,t={}){const{quality:n=1,pixelRatio:r=2,backgroundColor:o="transparent",includeStyles:a=!0}=t;try{const i=await A3(e,{quality:n,pixelRatio:r,backgroundColor:o,style:a?void 0:{},filter:d=>{if(d instanceof HTMLElement){const f=d.classList;return!f.contains("tooltip")&&!f.contains("dropdown-menu")&&!f.contains("popover")}return!0}});return await(await fetch(i)).blob()}catch(i){throw console.error("Screenshot capture failed:",i),new Error("Failed to capture screenshot")}}function T3(e,t){const n=URL.createObjectURL(e),r=document.createElement("a");r.href=n,r.download=`${t}.png`,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(n)}async function M3(e,t,n={}){const r=D3(t);return{blob:await N3(e,{quality:1,pixelRatio:2,backgroundColor:"transparent",...n}),fileName:r}}function I3(e={}){const[t,n]=m.useState(!1),[r,o]=m.useState(!1),[a,i]=m.useState(null),[l,d]=m.useState(!1),[f,p]=m.useState(null),b=m.useCallback(async(k,A)=>{n(!0),p(null);try{const{blob:j,fileName:_}=await M3(k,A),S=URL.createObjectURL(j);i({blob:j,fileName:_,previewUrl:S}),d(!0)}catch(j){const _=j instanceof Error?j:new Error("Screenshot failed");p(_.message),e.onError?.(_)}finally{n(!1)}},[e]),v=m.useCallback(async()=>{if(a){o(!0);try{await new Promise(k=>setTimeout(k,500)),T3(a.blob,a.fileName),e.onSuccess?.(a.fileName),d(!1),setTimeout(()=>{a.previewUrl&&URL.revokeObjectURL(a.previewUrl),i(null)},100)}catch(k){const A=k instanceof Error?k:new Error("Download failed");p(A.message),e.onError?.(A)}finally{o(!1)}}},[a,e]),y=m.useCallback(()=>{d(!1),setTimeout(()=>{a?.previewUrl&&URL.revokeObjectURL(a.previewUrl),i(null)},100)},[a]),C=m.useCallback(()=>{p(null)},[]);return{isCapturing:t,isDownloading:r,showPreview:l,previewData:a,error:f,captureScreenshot:b,confirmDownload:v,cancelPreview:y,clearError:C}}function P3({isOpen:e,onClose:t,onConfirm:n,previewUrl:r,fileName:o,isDownloading:a=!1}){const[i,l]=m.useState(!1),d=()=>{l(!0),setTimeout(()=>{n(),l(!1)},800)};return u.jsx(qn,{open:e,onOpenChange:t,children:u.jsxs(kn,{className:"max-w-2xl max-h-[90vh] overflow-hidden",children:[u.jsx(br,{children:u.jsxs(yr,{className:"flex items-center gap-2",children:[u.jsx(ks,{className:"h-5 w-5"}),"Screenshot Preview"]})}),u.jsxs("div",{className:"space-y-4",children:[u.jsx("div",{className:"flex items-center justify-between",children:u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsxs(It,{variant:"secondary",className:"font-mono text-xs",children:[o,".png"]}),u.jsx(It,{variant:"outline",className:"text-xs",children:"High Quality"})]})}),u.jsx("div",{className:"relative bg-checkered rounded-lg overflow-hidden border",children:r?u.jsxs("div",{className:"relative",children:[u.jsx("img",{src:r,alt:"Screenshot preview",className:te("w-full h-auto max-h-[60vh] object-contain transition-all duration-300",i&&"scale-95 opacity-80")}),i&&u.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-500/20 to-purple-600/20 flex items-center justify-center",children:u.jsx("div",{className:"bg-white/90 backdrop-blur-sm rounded-full p-6 shadow-lg animate-pulse",children:u.jsxs("div",{className:"relative",children:[u.jsx(Ur,{className:"h-8 w-8 text-blue-600 animate-bounce"}),u.jsx(ju,{className:"h-4 w-4 text-purple-500 absolute -top-1 -right-1 animate-spin"})]})})})]}):u.jsx("div",{className:"h-64 flex items-center justify-center text-muted-foreground",children:u.jsxs("div",{className:"text-center space-y-2",children:[u.jsx(ks,{className:"h-12 w-12 mx-auto opacity-50"}),u.jsx("p",{children:"Loading preview..."})]})})}),a&&u.jsxs("div",{className:"flex items-center justify-center gap-2 text-sm text-muted-foreground",children:[u.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-blue-500 border-t-transparent"}),"Preparing download..."]})]}),u.jsxs(xr,{className:"gap-2",children:[u.jsxs(ke,{variant:"outline",onClick:t,disabled:i||a,children:[u.jsx(jn,{className:"h-4 w-4 mr-2"}),"Cancel"]}),u.jsx(ke,{onClick:d,disabled:i||a||!r,className:te("relative overflow-hidden",i&&"bg-gradient-to-r from-blue-500 to-purple-600"),children:i?u.jsxs(u.Fragment,{children:[u.jsx(ju,{className:"h-4 w-4 mr-2 animate-spin"}),"Downloading..."]}):u.jsxs(u.Fragment,{children:[u.jsx(Ur,{className:"h-4 w-4 mr-2"}),"Download PNG"]})})]})]})})}const R3=`
.bg-checkered {
  background-image: 
    linear-gradient(45deg, #f1f5f9 25%, transparent 25%), 
    linear-gradient(-45deg, #f1f5f9 25%, transparent 25%), 
    linear-gradient(45deg, transparent 75%, #f1f5f9 75%), 
    linear-gradient(-45deg, transparent 75%, #f1f5f9 75%);
  background-size: 20px 20px;
  background-position: 0 0, 0 10px, 10px -10px, -10px 0px;
}
`;if(typeof document<"u"){const e=document.createElement("style");e.textContent=R3,document.head.appendChild(e)}function F3({authState:e,className:t}){const{openModal:n}=df(),{cards:r,filter:o,setFilter:a,getAllTags:i,getCardsWithTag:l}=Xs(),{toast:d}=nw(),[f,p]=m.useState(!1),{screenshot:b,isScreenshotting:v,takeScreenshot:y,clearScreenshot:C}=I3(),k=m.useMemo(()=>{const S=r.allCards,D=i(),I=l(o.tag);return{totalCards:S.length,totalTags:D.length,filteredCards:I.length}},[r.allCards,i,o.tag,l]),A=async()=>{if(!e.user){n();return}p(!0)},j=async()=>{try{await y(".masonry-grid"),d({title:"æªå¾æå",description:"å·²æåæè·å¡çåºåæªå¾"})}catch{d({title:"æªå¾å¤±è´¥",description:"è¯·ç¡®ä¿æµè§å¨æ¯ææªå¾åè½",variant:"destructive"})}},_=async()=>{try{const S=l(o.tag);if(S.length===0){d({title:"æ²¡æåå®¹",description:"å½åæ²¡æå¯å¤å¶çå¡çåå®¹",variant:"destructive"});return}const D=S.map(I=>lw(I)).join(`

`);await cw(D),d({title:"å¤å¶æå",description:`å·²å¤å¶ ${S.length} å¼ å¡ççåå®¹`})}catch{d({title:"å¤å¶å¤±è´¥",description:"è¯·æ£æ¥åªè´´æ¿æéè®¾ç½®",variant:"destructive"})}};return u.jsxs("div",{className:te("border-b bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60",t),children:[u.jsxs("div",{className:"container flex h-16 items-center",children:[u.jsxs("div",{className:"flex items-center space-x-4",children:[u.jsx("h1",{className:"text-xl font-semibold",children:"CardAll"}),u.jsxs("div",{className:"hidden sm:flex items-center space-x-2 text-sm text-muted-foreground",children:[u.jsxs("span",{children:[k.totalCards," å¡ç"]}),u.jsx("span",{children:"â¢"}),u.jsxs("span",{children:[k.totalTags," æ ç­¾"]}),o.tag&&u.jsxs(u.Fragment,{children:[u.jsx("span",{children:"â¢"}),u.jsxs("span",{children:["ç­é: ",k.filteredCards]})]})]})]}),u.jsx("div",{className:"flex-1 max-w-sm mx-4",children:u.jsxs("div",{className:"relative",children:[u.jsx(ci,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),u.jsx(_t,{placeholder:"æç´¢å¡çåå®¹...",value:o.search||"",onChange:S=>a({...o,search:S.target.value}),className:"pl-8"})]})}),u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx(ke,{variant:"outline",size:"sm",onClick:_,disabled:k.totalCards===0,children:"å¤å¶å¨é¨"}),u.jsx(ke,{variant:"outline",size:"sm",onClick:j,disabled:v,children:v?"æªå¾ä¸­...":"æªå¾"}),u.jsxs(ke,{onClick:A,size:"sm",children:[u.jsx(ic,{className:"h-4 w-4 mr-2"}),"æ°å»ºå¡ç"]}),u.jsx("div",{className:"flex items-center space-x-2 ml-4",children:e.user?u.jsx(Sf,{user:e.user,onSignOut:()=>Et.signOut()}):u.jsxs(ke,{variant:"outline",size:"sm",onClick:()=>n(),children:[u.jsx(yg,{className:"h-4 w-4 mr-2"}),"ç»å½"]})})]})]}),b&&u.jsx(P3,{screenshot:b,onClose:C})]})}var O3="Separator",fl="horizontal",L3=["horizontal","vertical"],Hf=m.forwardRef((e,t)=>{const{decorative:n,orientation:r=fl,...o}=e,a=z3(r)?r:fl,l=n?{role:"none"}:{"aria-orientation":a==="vertical"?a:void 0,role:"separator"};return u.jsx(Le.div,{"data-orientation":a,...l,...o,ref:t})});Hf.displayName=O3;function z3(e){return L3.includes(e)}var Kf=Hf;const Vf=m.forwardRef(({className:e,orientation:t="horizontal",decorative:n=!0,...r},o)=>u.jsx(Kf,{ref:o,decorative:n,orientation:t,className:te("shrink-0 bg-border",t==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",e),...r}));Vf.displayName=Kf.displayName;function Wf(e){const t=m.useRef({value:e,previous:e});return m.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var Gf=["PageUp","PageDown"],Yf=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],Qf={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},wr="Slider",[Fs,B3,$3]=aa(wr),[Zf,Wk]=Qt(wr,[$3]),[q3,ya]=Zf(wr),Xf=m.forwardRef((e,t)=>{const{name:n,min:r=0,max:o=100,step:a=1,orientation:i="horizontal",disabled:l=!1,minStepsBetweenThumbs:d=0,defaultValue:f=[r],value:p,onValueChange:b=()=>{},onValueCommit:v=()=>{},inverted:y=!1,form:C,...k}=e,A=m.useRef(new Set),j=m.useRef(0),S=i==="horizontal"?U3:H3,[D=[],I]=Vr({prop:p,defaultProp:f,onChange:Y=>{[...A.current][j.current]?.focus(),b(Y)}}),M=m.useRef(D);function F(Y){const Q=Y3(D,Y);ie(Y,Q)}function H(Y){ie(Y,j.current)}function Z(){const Y=M.current[j.current];D[j.current]!==Y&&v(D)}function ie(Y,Q,{commit:me}={commit:!1}){const _e=J3(a),Ee=e6(Math.round((Y-r)/a)*a+r,_e),xe=Wr(Ee,[r,o]);I((Ne=[])=>{const Ae=W3(Ne,xe,Q);if(X3(Ae,d*a)){j.current=Ae.indexOf(xe);const K=String(Ae)!==String(Ne);return K&&me&&v(Ae),K?Ae:Ne}else return Ne})}return u.jsx(q3,{scope:e.__scopeSlider,name:n,disabled:l,min:r,max:o,valueIndexToChangeRef:j,thumbs:A.current,values:D,orientation:i,form:C,children:u.jsx(Fs.Provider,{scope:e.__scopeSlider,children:u.jsx(Fs.Slot,{scope:e.__scopeSlider,children:u.jsx(S,{"aria-disabled":l,"data-disabled":l?"":void 0,...k,ref:t,onPointerDown:pe(k.onPointerDown,()=>{l||(M.current=D)}),min:r,max:o,inverted:y,onSlideStart:l?void 0:F,onSlideMove:l?void 0:H,onSlideEnd:l?void 0:Z,onHomeKeyDown:()=>!l&&ie(r,0,{commit:!0}),onEndKeyDown:()=>!l&&ie(o,D.length-1,{commit:!0}),onStepKeyDown:({event:Y,direction:Q})=>{if(!l){const Ee=Gf.includes(Y.key)||Y.shiftKey&&Yf.includes(Y.key)?10:1,xe=j.current,Ne=D[xe],Ae=a*Ee*Q;ie(Ne+Ae,xe,{commit:!0})}}})})})})});Xf.displayName=wr;var[Jf,e0]=Zf(wr,{startEdge:"left",endEdge:"right",size:"width",direction:1}),U3=m.forwardRef((e,t)=>{const{min:n,max:r,dir:o,inverted:a,onSlideStart:i,onSlideMove:l,onSlideEnd:d,onStepKeyDown:f,...p}=e,[b,v]=m.useState(null),y=He(t,S=>v(S)),C=m.useRef(void 0),k=ro(o),A=k==="ltr",j=A&&!a||!A&&a;function _(S){const D=C.current||b.getBoundingClientRect(),I=[0,D.width],F=Pi(I,j?[n,r]:[r,n]);return C.current=D,F(S-D.left)}return u.jsx(Jf,{scope:e.__scopeSlider,startEdge:j?"left":"right",endEdge:j?"right":"left",direction:j?1:-1,size:"width",children:u.jsx(t0,{dir:k,"data-orientation":"horizontal",...p,ref:y,style:{...p.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:S=>{const D=_(S.clientX);i?.(D)},onSlideMove:S=>{const D=_(S.clientX);l?.(D)},onSlideEnd:()=>{C.current=void 0,d?.()},onStepKeyDown:S=>{const I=Qf[j?"from-left":"from-right"].includes(S.key);f?.({event:S,direction:I?-1:1})}})})}),H3=m.forwardRef((e,t)=>{const{min:n,max:r,inverted:o,onSlideStart:a,onSlideMove:i,onSlideEnd:l,onStepKeyDown:d,...f}=e,p=m.useRef(null),b=He(t,p),v=m.useRef(void 0),y=!o;function C(k){const A=v.current||p.current.getBoundingClientRect(),j=[0,A.height],S=Pi(j,y?[r,n]:[n,r]);return v.current=A,S(k-A.top)}return u.jsx(Jf,{scope:e.__scopeSlider,startEdge:y?"bottom":"top",endEdge:y?"top":"bottom",size:"height",direction:y?1:-1,children:u.jsx(t0,{"data-orientation":"vertical",...f,ref:b,style:{...f.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:k=>{const A=C(k.clientY);a?.(A)},onSlideMove:k=>{const A=C(k.clientY);i?.(A)},onSlideEnd:()=>{v.current=void 0,l?.()},onStepKeyDown:k=>{const j=Qf[y?"from-bottom":"from-top"].includes(k.key);d?.({event:k,direction:j?-1:1})}})})}),t0=m.forwardRef((e,t)=>{const{__scopeSlider:n,onSlideStart:r,onSlideMove:o,onSlideEnd:a,onHomeKeyDown:i,onEndKeyDown:l,onStepKeyDown:d,...f}=e,p=ya(wr,n);return u.jsx(Le.span,{...f,ref:t,onKeyDown:pe(e.onKeyDown,b=>{b.key==="Home"?(i(b),b.preventDefault()):b.key==="End"?(l(b),b.preventDefault()):Gf.concat(Yf).includes(b.key)&&(d(b),b.preventDefault())}),onPointerDown:pe(e.onPointerDown,b=>{const v=b.target;v.setPointerCapture(b.pointerId),b.preventDefault(),p.thumbs.has(v)?v.focus():r(b)}),onPointerMove:pe(e.onPointerMove,b=>{b.target.hasPointerCapture(b.pointerId)&&o(b)}),onPointerUp:pe(e.onPointerUp,b=>{const v=b.target;v.hasPointerCapture(b.pointerId)&&(v.releasePointerCapture(b.pointerId),a(b))})})}),n0="SliderTrack",r0=m.forwardRef((e,t)=>{const{__scopeSlider:n,...r}=e,o=ya(n0,n);return u.jsx(Le.span,{"data-disabled":o.disabled?"":void 0,"data-orientation":o.orientation,...r,ref:t})});r0.displayName=n0;var Os="SliderRange",o0=m.forwardRef((e,t)=>{const{__scopeSlider:n,...r}=e,o=ya(Os,n),a=e0(Os,n),i=m.useRef(null),l=He(t,i),d=o.values.length,f=o.values.map(v=>s0(v,o.min,o.max)),p=d>1?Math.min(...f):0,b=100-Math.max(...f);return u.jsx(Le.span,{"data-orientation":o.orientation,"data-disabled":o.disabled?"":void 0,...r,ref:l,style:{...e.style,[a.startEdge]:p+"%",[a.endEdge]:b+"%"}})});o0.displayName=Os;var Ls="SliderThumb",a0=m.forwardRef((e,t)=>{const n=B3(e.__scopeSlider),[r,o]=m.useState(null),a=He(t,l=>o(l)),i=m.useMemo(()=>r?n().findIndex(l=>l.ref.current===r):-1,[n,r]);return u.jsx(K3,{...e,ref:a,index:i})}),K3=m.forwardRef((e,t)=>{const{__scopeSlider:n,index:r,name:o,...a}=e,i=ya(Ls,n),l=e0(Ls,n),[d,f]=m.useState(null),p=He(t,_=>f(_)),b=d?i.form||!!d.closest("form"):!0,v=Sp(d),y=i.values[r],C=y===void 0?0:s0(y,i.min,i.max),k=G3(r,i.values.length),A=v?.[l.size],j=A?Q3(A,C,l.direction):0;return m.useEffect(()=>{if(d)return i.thumbs.add(d),()=>{i.thumbs.delete(d)}},[d,i.thumbs]),u.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[l.startEdge]:`calc(${C}% + ${j}px)`},children:[u.jsx(Fs.ItemSlot,{scope:e.__scopeSlider,children:u.jsx(Le.span,{role:"slider","aria-label":e["aria-label"]||k,"aria-valuemin":i.min,"aria-valuenow":y,"aria-valuemax":i.max,"aria-orientation":i.orientation,"data-orientation":i.orientation,"data-disabled":i.disabled?"":void 0,tabIndex:i.disabled?void 0:0,...a,ref:p,style:y===void 0?{display:"none"}:e.style,onFocus:pe(e.onFocus,()=>{i.valueIndexToChangeRef.current=r})})}),b&&u.jsx(V3,{name:o??(i.name?i.name+(i.values.length>1?"[]":""):void 0),form:i.form,value:y},r)]})});a0.displayName=Ls;var V3=e=>{const{value:t,...n}=e,r=m.useRef(null),o=Wf(t);return m.useEffect(()=>{const a=r.current,i=window.HTMLInputElement.prototype,d=Object.getOwnPropertyDescriptor(i,"value").set;if(o!==t&&d){const f=new Event("input",{bubbles:!0});d.call(a,t),a.dispatchEvent(f)}},[o,t]),u.jsx("input",{style:{display:"none"},...n,ref:r,defaultValue:t})};function W3(e=[],t,n){const r=[...e];return r[n]=t,r.sort((o,a)=>o-a)}function s0(e,t,n){const a=100/(n-t)*(e-t);return Wr(a,[0,100])}function G3(e,t){return t>2?`Value ${e+1} of ${t}`:t===2?["Minimum","Maximum"][e]:void 0}function Y3(e,t){if(e.length===1)return 0;const n=e.map(o=>Math.abs(o-t)),r=Math.min(...n);return n.indexOf(r)}function Q3(e,t,n){const r=e/2,a=Pi([0,50],[0,r]);return(r-a(t)*n)*n}function Z3(e){return e.slice(0,-1).map((t,n)=>e[n+1]-t)}function X3(e,t){if(t>0){const n=Z3(e);return Math.min(...n)>=t}return!0}function Pi(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}function J3(e){return(String(e).split(".")[1]||"").length}function e6(e,t){const n=Math.pow(10,t);return Math.round(e*n)/n}var i0=Xf,t6=r0,n6=o0,r6=a0;const u0=m.forwardRef(({className:e,...t},n)=>u.jsxs(i0,{ref:n,className:te("relative flex w-full touch-none select-none items-center",e),...t,children:[u.jsx(t6,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:u.jsx(n6,{className:"absolute h-full bg-primary"})}),u.jsx(r6,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]}));u0.displayName=i0.displayName;var o6="Label",l0=m.forwardRef((e,t)=>u.jsx(Le.label,{...e,ref:t,onMouseDown:n=>{n.target.closest("button, input, select, textarea")||(e.onMouseDown?.(n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));l0.displayName=o6;var c0=l0;const a6=ti("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),St=m.forwardRef(({className:e,...t},n)=>u.jsx(c0,{ref:n,className:te(a6(),e),...t}));St.displayName=c0.displayName;var Ri="ContextMenu",[s6,Gk]=Qt(Ri,[ia]),mt=ia(),[i6,d0]=s6(Ri),f0=e=>{const{__scopeContextMenu:t,children:n,onOpenChange:r,dir:o,modal:a=!0}=e,[i,l]=m.useState(!1),d=mt(t),f=jt(r),p=m.useCallback(b=>{l(b),f(b)},[f]);return u.jsx(i6,{scope:t,open:i,onOpenChange:p,modal:a,children:u.jsx($c,{...d,dir:o,open:i,onOpenChange:p,modal:a,children:n})})};f0.displayName=Ri;var h0="ContextMenuTrigger",p0=m.forwardRef((e,t)=>{const{__scopeContextMenu:n,disabled:r=!1,...o}=e,a=d0(h0,n),i=mt(n),l=m.useRef({x:0,y:0}),d=m.useRef({getBoundingClientRect:()=>DOMRect.fromRect({width:0,height:0,...l.current})}),f=m.useRef(0),p=m.useCallback(()=>window.clearTimeout(f.current),[]),b=v=>{l.current={x:v.clientX,y:v.clientY},a.onOpenChange(!0)};return m.useEffect(()=>p,[p]),m.useEffect(()=>void(r&&p()),[r,p]),u.jsxs(u.Fragment,{children:[u.jsx(qc,{...i,virtualRef:d}),u.jsx(Le.span,{"data-state":a.open?"open":"closed","data-disabled":r?"":void 0,...o,ref:t,style:{WebkitTouchCallout:"none",...e.style},onContextMenu:r?e.onContextMenu:pe(e.onContextMenu,v=>{p(),b(v),v.preventDefault()}),onPointerDown:r?e.onPointerDown:pe(e.onPointerDown,Lo(v=>{p(),f.current=window.setTimeout(()=>b(v),700)})),onPointerMove:r?e.onPointerMove:pe(e.onPointerMove,Lo(p)),onPointerCancel:r?e.onPointerCancel:pe(e.onPointerCancel,Lo(p)),onPointerUp:r?e.onPointerUp:pe(e.onPointerUp,Lo(p))})]})});p0.displayName=h0;var u6="ContextMenuPortal",m0=e=>{const{__scopeContextMenu:t,...n}=e,r=mt(t);return u.jsx(Uc,{...r,...n})};m0.displayName=u6;var g0="ContextMenuContent",b0=m.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,o=d0(g0,n),a=mt(n),i=m.useRef(!1);return u.jsx(Hc,{...a,...r,ref:t,side:"right",sideOffset:2,align:"start",onCloseAutoFocus:l=>{e.onCloseAutoFocus?.(l),!l.defaultPrevented&&i.current&&l.preventDefault(),i.current=!1},onInteractOutside:l=>{e.onInteractOutside?.(l),!l.defaultPrevented&&!o.modal&&(i.current=!0)},style:{...e.style,"--radix-context-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-context-menu-content-available-width":"var(--radix-popper-available-width)","--radix-context-menu-content-available-height":"var(--radix-popper-available-height)","--radix-context-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-context-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});b0.displayName=g0;var l6="ContextMenuGroup",c6=m.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,o=mt(n);return u.jsx(Kc,{...o,...r,ref:t})});c6.displayName=l6;var d6="ContextMenuLabel",x0=m.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,o=mt(n);return u.jsx(Vc,{...o,...r,ref:t})});x0.displayName=d6;var f6="ContextMenuItem",y0=m.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,o=mt(n);return u.jsx(Wc,{...o,...r,ref:t})});y0.displayName=f6;var h6="ContextMenuCheckboxItem",v0=m.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,o=mt(n);return u.jsx(Gc,{...o,...r,ref:t})});v0.displayName=h6;var p6="ContextMenuRadioGroup",m6=m.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,o=mt(n);return u.jsx(Yc,{...o,...r,ref:t})});m6.displayName=p6;var g6="ContextMenuRadioItem",w0=m.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,o=mt(n);return u.jsx(Qc,{...o,...r,ref:t})});w0.displayName=g6;var b6="ContextMenuItemIndicator",C0=m.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,o=mt(n);return u.jsx(Zc,{...o,...r,ref:t})});C0.displayName=b6;var x6="ContextMenuSeparator",k0=m.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,o=mt(n);return u.jsx(Xc,{...o,...r,ref:t})});k0.displayName=x6;var y6="ContextMenuArrow",v6=m.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,o=mt(n);return u.jsx(Jc,{...o,...r,ref:t})});v6.displayName=y6;var w6="ContextMenuSubTrigger",_0=m.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,o=mt(n);return u.jsx(ed,{...o,...r,ref:t})});_0.displayName=w6;var C6="ContextMenuSubContent",S0=m.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,o=mt(n);return u.jsx(td,{...o,...r,ref:t,style:{...e.style,"--radix-context-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-context-menu-content-available-width":"var(--radix-popper-available-width)","--radix-context-menu-content-available-height":"var(--radix-popper-available-height)","--radix-context-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-context-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});S0.displayName=C6;function Lo(e){return t=>t.pointerType!=="mouse"?e(t):void 0}var k6=f0,_6=p0,S6=m0,E0=b0,j0=x0,A0=y0,D0=v0,N0=w0,T0=C0,M0=k0,I0=_0,P0=S0;const R0=k6,F0=_6,E6=m.forwardRef(({className:e,inset:t,children:n,...r},o)=>u.jsxs(I0,{ref:o,className:te("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground",t&&"pl-8",e),...r,children:[n,u.jsx(ui,{className:"ml-auto h-4 w-4"})]}));E6.displayName=I0.displayName;const j6=m.forwardRef(({className:e,...t},n)=>u.jsx(P0,{ref:n,className:te("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...t}));j6.displayName=P0.displayName;const Fi=m.forwardRef(({className:e,...t},n)=>u.jsx(S6,{children:u.jsx(E0,{ref:n,className:te("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...t})}));Fi.displayName=E0.displayName;const ir=m.forwardRef(({className:e,inset:t,...n},r)=>u.jsx(A0,{ref:r,className:te("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t&&"pl-8",e),...n}));ir.displayName=A0.displayName;const A6=m.forwardRef(({className:e,children:t,checked:n,...r},o)=>u.jsxs(D0,{ref:o,className:te("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),checked:n,...r,children:[u.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:u.jsx(T0,{children:u.jsx(Cn,{className:"h-4 w-4"})})}),t]}));A6.displayName=D0.displayName;const D6=m.forwardRef(({className:e,children:t,...n},r)=>u.jsxs(N0,{ref:r,className:te("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...n,children:[u.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:u.jsx(T0,{children:u.jsx(oc,{className:"h-2 w-2 fill-current"})})}),t]}));D6.displayName=N0.displayName;const N6=m.forwardRef(({className:e,inset:t,...n},r)=>u.jsx(j0,{ref:r,className:te("px-2 py-1.5 text-sm font-semibold text-foreground",t&&"pl-8",e),...n}));N6.displayName=j0.displayName;const O0=m.forwardRef(({className:e,...t},n)=>u.jsx(M0,{ref:n,className:te("-mx-1 my-1 h-px bg-border",e),...t}));O0.displayName=M0.displayName;function T6({children:e,folderId:t,folderName:n,onRename:r,onDelete:o,onCreateSubfolder:a,disabled:i=!1}){return i?u.jsx(u.Fragment,{children:e}):u.jsxs(R0,{children:[u.jsx(F0,{asChild:!0,children:e}),u.jsxs(Fi,{className:"w-48",children:[u.jsxs(ir,{onClick:()=>r(t),children:[u.jsx(uc,{className:"h-4 w-4 mr-2"}),"Rename Folder"]}),u.jsxs(ir,{onClick:()=>a(t),children:[u.jsx(Es,{className:"h-4 w-4 mr-2"}),"New Subfolder"]}),u.jsx(O0,{}),u.jsxs(ir,{onClick:()=>o(t),className:"text-destructive focus:text-destructive",children:[u.jsx(di,{className:"h-4 w-4 mr-2"}),"Delete Folder"]})]})]})}var M6="VisuallyHidden",L0=m.forwardRef((e,t)=>u.jsx(Le.span,{...e,ref:t,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...e.style}}));L0.displayName=M6;var I6=[" ","Enter","ArrowUp","ArrowDown"],P6=[" ","Enter"],co="Select",[va,wa,R6]=aa(co),[Cr,Yk]=Qt(co,[R6,ta]),Ca=ta(),[F6,An]=Cr(co),[O6,L6]=Cr(co),z0=e=>{const{__scopeSelect:t,children:n,open:r,defaultOpen:o,onOpenChange:a,value:i,defaultValue:l,onValueChange:d,dir:f,name:p,autoComplete:b,disabled:v,required:y,form:C}=e,k=Ca(t),[A,j]=m.useState(null),[_,S]=m.useState(null),[D,I]=m.useState(!1),M=ro(f),[F=!1,H]=Vr({prop:r,defaultProp:o,onChange:a}),[Z,ie]=Vr({prop:i,defaultProp:l,onChange:d}),Y=m.useRef(null),Q=A?C||!!A.closest("form"):!0,[me,_e]=m.useState(new Set),Ee=Array.from(me).map(xe=>xe.props.value).join(";");return u.jsx(jl,{...k,children:u.jsxs(F6,{required:y,scope:t,trigger:A,onTriggerChange:j,valueNode:_,onValueNodeChange:S,valueNodeHasChildren:D,onValueNodeHasChildrenChange:I,contentId:lr(),value:Z,onValueChange:ie,open:F,onOpenChange:H,dir:M,triggerPointerDownPosRef:Y,disabled:v,children:[u.jsx(va.Provider,{scope:t,children:u.jsx(O6,{scope:e.__scopeSelect,onNativeOptionAdd:m.useCallback(xe=>{_e(Ne=>new Set(Ne).add(xe))},[]),onNativeOptionRemove:m.useCallback(xe=>{_e(Ne=>{const Ae=new Set(Ne);return Ae.delete(xe),Ae})},[]),children:n})}),Q?u.jsxs(ch,{"aria-hidden":!0,required:y,tabIndex:-1,name:p,autoComplete:b,value:Z,onChange:xe=>ie(xe.target.value),disabled:v,form:C,children:[Z===void 0?u.jsx("option",{value:""}):null,Array.from(me)]},Ee):null]})})};z0.displayName=co;var B0="SelectTrigger",$0=m.forwardRef((e,t)=>{const{__scopeSelect:n,disabled:r=!1,...o}=e,a=Ca(n),i=An(B0,n),l=i.disabled||r,d=He(t,i.onTriggerChange),f=wa(n),p=m.useRef("touch"),[b,v,y]=dh(k=>{const A=f().filter(S=>!S.disabled),j=A.find(S=>S.value===i.value),_=fh(A,k,j);_!==void 0&&i.onValueChange(_.value)}),C=k=>{l||(i.onOpenChange(!0),y()),k&&(i.triggerPointerDownPosRef.current={x:Math.round(k.pageX),y:Math.round(k.pageY)})};return u.jsx(vl,{asChild:!0,...a,children:u.jsx(Le.button,{type:"button",role:"combobox","aria-controls":i.contentId,"aria-expanded":i.open,"aria-required":i.required,"aria-autocomplete":"none",dir:i.dir,"data-state":i.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":lh(i.value)?"":void 0,...o,ref:d,onClick:pe(o.onClick,k=>{k.currentTarget.focus(),p.current!=="mouse"&&C(k)}),onPointerDown:pe(o.onPointerDown,k=>{p.current=k.pointerType;const A=k.target;A.hasPointerCapture(k.pointerId)&&A.releasePointerCapture(k.pointerId),k.button===0&&k.ctrlKey===!1&&k.pointerType==="mouse"&&(C(k),k.preventDefault())}),onKeyDown:pe(o.onKeyDown,k=>{const A=b.current!=="";!(k.ctrlKey||k.altKey||k.metaKey)&&k.key.length===1&&v(k.key),!(A&&k.key===" ")&&I6.includes(k.key)&&(C(),k.preventDefault())})})})});$0.displayName=B0;var q0="SelectValue",U0=m.forwardRef((e,t)=>{const{__scopeSelect:n,className:r,style:o,children:a,placeholder:i="",...l}=e,d=An(q0,n),{onValueNodeHasChildrenChange:f}=d,p=a!==void 0,b=He(t,d.onValueNodeChange);return $t(()=>{f(p)},[f,p]),u.jsx(Le.span,{...l,ref:b,style:{pointerEvents:"none"},children:lh(d.value)?u.jsx(u.Fragment,{children:i}):a})});U0.displayName=q0;var z6="SelectIcon",H0=m.forwardRef((e,t)=>{const{__scopeSelect:n,children:r,...o}=e;return u.jsx(Le.span,{"aria-hidden":!0,...o,ref:t,children:r||"â¼"})});H0.displayName=z6;var B6="SelectPortal",K0=e=>u.jsx(yl,{asChild:!0,...e});K0.displayName=B6;var Un="SelectContent",V0=m.forwardRef((e,t)=>{const n=An(Un,e.__scopeSelect),[r,o]=m.useState();if($t(()=>{o(new DocumentFragment)},[]),!n.open){const a=r;return a?pr.createPortal(u.jsx(W0,{scope:e.__scopeSelect,children:u.jsx(va.Slot,{scope:e.__scopeSelect,children:u.jsx("div",{children:e.children})})}),a):null}return u.jsx(G0,{...e,ref:t})});V0.displayName=Un;var Bt=10,[W0,Dn]=Cr(Un),$6="SelectContentImpl",G0=m.forwardRef((e,t)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:o,onEscapeKeyDown:a,onPointerDownOutside:i,side:l,sideOffset:d,align:f,alignOffset:p,arrowPadding:b,collisionBoundary:v,collisionPadding:y,sticky:C,hideWhenDetached:k,avoidCollisions:A,...j}=e,_=An(Un,n),[S,D]=m.useState(null),[I,M]=m.useState(null),F=He(t,ee=>D(ee)),[H,Z]=m.useState(null),[ie,Y]=m.useState(null),Q=wa(n),[me,_e]=m.useState(!1),Ee=m.useRef(!1);m.useEffect(()=>{if(S)return El(S)},[S]),wl();const xe=m.useCallback(ee=>{const[se,...J]=Q().map(fe=>fe.ref.current),[Ie]=J.slice(-1),ve=document.activeElement;for(const fe of ee)if(fe===ve||(fe?.scrollIntoView({block:"nearest"}),fe===se&&I&&(I.scrollTop=0),fe===Ie&&I&&(I.scrollTop=I.scrollHeight),fe?.focus(),document.activeElement!==ve))return},[Q,I]),Ne=m.useCallback(()=>xe([H,S]),[xe,H,S]);m.useEffect(()=>{me&&Ne()},[me,Ne]);const{onOpenChange:Ae,triggerPointerDownPosRef:K}=_;m.useEffect(()=>{if(S){let ee={x:0,y:0};const se=Ie=>{ee={x:Math.abs(Math.round(Ie.pageX)-(K.current?.x??0)),y:Math.abs(Math.round(Ie.pageY)-(K.current?.y??0))}},J=Ie=>{ee.x<=10&&ee.y<=10?Ie.preventDefault():S.contains(Ie.target)||Ae(!1),document.removeEventListener("pointermove",se),K.current=null};return K.current!==null&&(document.addEventListener("pointermove",se),document.addEventListener("pointerup",J,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",se),document.removeEventListener("pointerup",J,{capture:!0})}}},[S,Ae,K]),m.useEffect(()=>{const ee=()=>Ae(!1);return window.addEventListener("blur",ee),window.addEventListener("resize",ee),()=>{window.removeEventListener("blur",ee),window.removeEventListener("resize",ee)}},[Ae]);const[ge,Ce]=dh(ee=>{const se=Q().filter(ve=>!ve.disabled),J=se.find(ve=>ve.ref.current===document.activeElement),Ie=fh(se,ee,J);Ie&&setTimeout(()=>Ie.ref.current.focus())}),Se=m.useCallback((ee,se,J)=>{const Ie=!Ee.current&&!J;(_.value!==void 0&&_.value===se||Ie)&&(Z(ee),Ie&&(Ee.current=!0))},[_.value]),we=m.useCallback(()=>S?.focus(),[S]),je=m.useCallback((ee,se,J)=>{const Ie=!Ee.current&&!J;(_.value!==void 0&&_.value===se||Ie)&&Y(ee)},[_.value]),Fe=r==="popper"?zs:Y0,Be=Fe===zs?{side:l,sideOffset:d,align:f,alignOffset:p,arrowPadding:b,collisionBoundary:v,collisionPadding:y,sticky:C,hideWhenDetached:k,avoidCollisions:A}:{};return u.jsx(W0,{scope:n,content:S,viewport:I,onViewportChange:M,itemRefCallback:Se,selectedItem:H,onItemLeave:we,itemTextRefCallback:je,focusSelectedItem:Ne,selectedItemText:ie,position:r,isPositioned:me,searchRef:ge,children:u.jsx(Cl,{as:Kr,allowPinchZoom:!0,children:u.jsx(kl,{asChild:!0,trapped:_.open,onMountAutoFocus:ee=>{ee.preventDefault()},onUnmountAutoFocus:pe(o,ee=>{_.trigger?.focus({preventScroll:!0}),ee.preventDefault()}),children:u.jsx(_l,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:a,onPointerDownOutside:i,onFocusOutside:ee=>ee.preventDefault(),onDismiss:()=>_.onOpenChange(!1),children:u.jsx(Fe,{role:"listbox",id:_.contentId,"data-state":_.open?"open":"closed",dir:_.dir,onContextMenu:ee=>ee.preventDefault(),...j,...Be,onPlaced:()=>_e(!0),ref:F,style:{display:"flex",flexDirection:"column",outline:"none",...j.style},onKeyDown:pe(j.onKeyDown,ee=>{const se=ee.ctrlKey||ee.altKey||ee.metaKey;if(ee.key==="Tab"&&ee.preventDefault(),!se&&ee.key.length===1&&Ce(ee.key),["ArrowUp","ArrowDown","Home","End"].includes(ee.key)){let Ie=Q().filter(ve=>!ve.disabled).map(ve=>ve.ref.current);if(["ArrowUp","End"].includes(ee.key)&&(Ie=Ie.slice().reverse()),["ArrowUp","ArrowDown"].includes(ee.key)){const ve=ee.target,fe=Ie.indexOf(ve);Ie=Ie.slice(fe+1)}setTimeout(()=>xe(Ie)),ee.preventDefault()}})})})})})})});G0.displayName=$6;var q6="SelectItemAlignedPosition",Y0=m.forwardRef((e,t)=>{const{__scopeSelect:n,onPlaced:r,...o}=e,a=An(Un,n),i=Dn(Un,n),[l,d]=m.useState(null),[f,p]=m.useState(null),b=He(t,F=>p(F)),v=wa(n),y=m.useRef(!1),C=m.useRef(!0),{viewport:k,selectedItem:A,selectedItemText:j,focusSelectedItem:_}=i,S=m.useCallback(()=>{if(a.trigger&&a.valueNode&&l&&f&&k&&A&&j){const F=a.trigger.getBoundingClientRect(),H=f.getBoundingClientRect(),Z=a.valueNode.getBoundingClientRect(),ie=j.getBoundingClientRect();if(a.dir!=="rtl"){const ve=ie.left-H.left,fe=Z.left-ve,qe=F.left-fe,vt=F.width+qe,wt=Math.max(vt,H.width),un=window.innerWidth-Bt,Nn=Wr(fe,[Bt,Math.max(Bt,un-wt)]);l.style.minWidth=vt+"px",l.style.left=Nn+"px"}else{const ve=H.right-ie.right,fe=window.innerWidth-Z.right-ve,qe=window.innerWidth-F.right-fe,vt=F.width+qe,wt=Math.max(vt,H.width),un=window.innerWidth-Bt,Nn=Wr(fe,[Bt,Math.max(Bt,un-wt)]);l.style.minWidth=vt+"px",l.style.right=Nn+"px"}const Y=v(),Q=window.innerHeight-Bt*2,me=k.scrollHeight,_e=window.getComputedStyle(f),Ee=parseInt(_e.borderTopWidth,10),xe=parseInt(_e.paddingTop,10),Ne=parseInt(_e.borderBottomWidth,10),Ae=parseInt(_e.paddingBottom,10),K=Ee+xe+me+Ae+Ne,ge=Math.min(A.offsetHeight*5,K),Ce=window.getComputedStyle(k),Se=parseInt(Ce.paddingTop,10),we=parseInt(Ce.paddingBottom,10),je=F.top+F.height/2-Bt,Fe=Q-je,Be=A.offsetHeight/2,ee=A.offsetTop+Be,se=Ee+xe+ee,J=K-se;if(se<=je){const ve=Y.length>0&&A===Y[Y.length-1].ref.current;l.style.bottom="0px";const fe=f.clientHeight-k.offsetTop-k.offsetHeight,qe=Math.max(Fe,Be+(ve?we:0)+fe+Ne),vt=se+qe;l.style.height=vt+"px"}else{const ve=Y.length>0&&A===Y[0].ref.current;l.style.top="0px";const qe=Math.max(je,Ee+k.offsetTop+(ve?Se:0)+Be)+J;l.style.height=qe+"px",k.scrollTop=se-je+k.offsetTop}l.style.margin=`${Bt}px 0`,l.style.minHeight=ge+"px",l.style.maxHeight=Q+"px",r?.(),requestAnimationFrame(()=>y.current=!0)}},[v,a.trigger,a.valueNode,l,f,k,A,j,a.dir,r]);$t(()=>S(),[S]);const[D,I]=m.useState();$t(()=>{f&&I(window.getComputedStyle(f).zIndex)},[f]);const M=m.useCallback(F=>{F&&C.current===!0&&(S(),_?.(),C.current=!1)},[S,_]);return u.jsx(H6,{scope:n,contentWrapper:l,shouldExpandOnScrollRef:y,onScrollButtonChange:M,children:u.jsx("div",{ref:d,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:D},children:u.jsx(Le.div,{...o,ref:b,style:{boxSizing:"border-box",maxHeight:"100%",...o.style}})})})});Y0.displayName=q6;var U6="SelectPopperPosition",zs=m.forwardRef((e,t)=>{const{__scopeSelect:n,align:r="start",collisionPadding:o=Bt,...a}=e,i=Ca(n);return u.jsx(Sl,{...i,...a,ref:t,align:r,collisionPadding:o,style:{boxSizing:"border-box",...a.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});zs.displayName=U6;var[H6,Oi]=Cr(Un,{}),Bs="SelectViewport",Q0=m.forwardRef((e,t)=>{const{__scopeSelect:n,nonce:r,...o}=e,a=Dn(Bs,n),i=Oi(Bs,n),l=He(t,a.onViewportChange),d=m.useRef(0);return u.jsxs(u.Fragment,{children:[u.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),u.jsx(va.Slot,{scope:n,children:u.jsx(Le.div,{"data-radix-select-viewport":"",role:"presentation",...o,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...o.style},onScroll:pe(o.onScroll,f=>{const p=f.currentTarget,{contentWrapper:b,shouldExpandOnScrollRef:v}=i;if(v?.current&&b){const y=Math.abs(d.current-p.scrollTop);if(y>0){const C=window.innerHeight-Bt*2,k=parseFloat(b.style.minHeight),A=parseFloat(b.style.height),j=Math.max(k,A);if(j<C){const _=j+y,S=Math.min(C,_),D=_-S;b.style.height=S+"px",b.style.bottom==="0px"&&(p.scrollTop=D>0?D:0,b.style.justifyContent="flex-end")}}}d.current=p.scrollTop})})})]})});Q0.displayName=Bs;var Z0="SelectGroup",[K6,V6]=Cr(Z0),W6=m.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,o=lr();return u.jsx(K6,{scope:n,id:o,children:u.jsx(Le.div,{role:"group","aria-labelledby":o,...r,ref:t})})});W6.displayName=Z0;var X0="SelectLabel",J0=m.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,o=V6(X0,n);return u.jsx(Le.div,{id:o.id,...r,ref:t})});J0.displayName=X0;var ea="SelectItem",[G6,eh]=Cr(ea),th=m.forwardRef((e,t)=>{const{__scopeSelect:n,value:r,disabled:o=!1,textValue:a,...i}=e,l=An(ea,n),d=Dn(ea,n),f=l.value===r,[p,b]=m.useState(a??""),[v,y]=m.useState(!1),C=He(t,_=>d.itemRefCallback?.(_,r,o)),k=lr(),A=m.useRef("touch"),j=()=>{o||(l.onValueChange(r),l.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return u.jsx(G6,{scope:n,value:r,disabled:o,textId:k,isSelected:f,onItemTextChange:m.useCallback(_=>{b(S=>S||(_?.textContent??"").trim())},[]),children:u.jsx(va.ItemSlot,{scope:n,value:r,disabled:o,textValue:p,children:u.jsx(Le.div,{role:"option","aria-labelledby":k,"data-highlighted":v?"":void 0,"aria-selected":f&&v,"data-state":f?"checked":"unchecked","aria-disabled":o||void 0,"data-disabled":o?"":void 0,tabIndex:o?void 0:-1,...i,ref:C,onFocus:pe(i.onFocus,()=>y(!0)),onBlur:pe(i.onBlur,()=>y(!1)),onClick:pe(i.onClick,()=>{A.current!=="mouse"&&j()}),onPointerUp:pe(i.onPointerUp,()=>{A.current==="mouse"&&j()}),onPointerDown:pe(i.onPointerDown,_=>{A.current=_.pointerType}),onPointerMove:pe(i.onPointerMove,_=>{A.current=_.pointerType,o?d.onItemLeave?.():A.current==="mouse"&&_.currentTarget.focus({preventScroll:!0})}),onPointerLeave:pe(i.onPointerLeave,_=>{_.currentTarget===document.activeElement&&d.onItemLeave?.()}),onKeyDown:pe(i.onKeyDown,_=>{d.searchRef?.current!==""&&_.key===" "||(P6.includes(_.key)&&j(),_.key===" "&&_.preventDefault())})})})})});th.displayName=ea;var qr="SelectItemText",nh=m.forwardRef((e,t)=>{const{__scopeSelect:n,className:r,style:o,...a}=e,i=An(qr,n),l=Dn(qr,n),d=eh(qr,n),f=L6(qr,n),[p,b]=m.useState(null),v=He(t,j=>b(j),d.onItemTextChange,j=>l.itemTextRefCallback?.(j,d.value,d.disabled)),y=p?.textContent,C=m.useMemo(()=>u.jsx("option",{value:d.value,disabled:d.disabled,children:y},d.value),[d.disabled,d.value,y]),{onNativeOptionAdd:k,onNativeOptionRemove:A}=f;return $t(()=>(k(C),()=>A(C)),[k,A,C]),u.jsxs(u.Fragment,{children:[u.jsx(Le.span,{id:d.textId,...a,ref:v}),d.isSelected&&i.valueNode&&!i.valueNodeHasChildren?pr.createPortal(a.children,i.valueNode):null]})});nh.displayName=qr;var rh="SelectItemIndicator",oh=m.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e;return eh(rh,n).isSelected?u.jsx(Le.span,{"aria-hidden":!0,...r,ref:t}):null});oh.displayName=rh;var $s="SelectScrollUpButton",ah=m.forwardRef((e,t)=>{const n=Dn($s,e.__scopeSelect),r=Oi($s,e.__scopeSelect),[o,a]=m.useState(!1),i=He(t,r.onScrollButtonChange);return $t(()=>{if(n.viewport&&n.isPositioned){let l=function(){const f=d.scrollTop>0;a(f)};const d=n.viewport;return l(),d.addEventListener("scroll",l),()=>d.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),o?u.jsx(ih,{...e,ref:i,onAutoScroll:()=>{const{viewport:l,selectedItem:d}=n;l&&d&&(l.scrollTop=l.scrollTop-d.offsetHeight)}}):null});ah.displayName=$s;var qs="SelectScrollDownButton",sh=m.forwardRef((e,t)=>{const n=Dn(qs,e.__scopeSelect),r=Oi(qs,e.__scopeSelect),[o,a]=m.useState(!1),i=He(t,r.onScrollButtonChange);return $t(()=>{if(n.viewport&&n.isPositioned){let l=function(){const f=d.scrollHeight-d.clientHeight,p=Math.ceil(d.scrollTop)<f;a(p)};const d=n.viewport;return l(),d.addEventListener("scroll",l),()=>d.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),o?u.jsx(ih,{...e,ref:i,onAutoScroll:()=>{const{viewport:l,selectedItem:d}=n;l&&d&&(l.scrollTop=l.scrollTop+d.offsetHeight)}}):null});sh.displayName=qs;var ih=m.forwardRef((e,t)=>{const{__scopeSelect:n,onAutoScroll:r,...o}=e,a=Dn("SelectScrollButton",n),i=m.useRef(null),l=wa(n),d=m.useCallback(()=>{i.current!==null&&(window.clearInterval(i.current),i.current=null)},[]);return m.useEffect(()=>()=>d(),[d]),$t(()=>{l().find(p=>p.ref.current===document.activeElement)?.ref.current?.scrollIntoView({block:"nearest"})},[l]),u.jsx(Le.div,{"aria-hidden":!0,...o,ref:t,style:{flexShrink:0,...o.style},onPointerDown:pe(o.onPointerDown,()=>{i.current===null&&(i.current=window.setInterval(r,50))}),onPointerMove:pe(o.onPointerMove,()=>{a.onItemLeave?.(),i.current===null&&(i.current=window.setInterval(r,50))}),onPointerLeave:pe(o.onPointerLeave,()=>{d()})})}),Y6="SelectSeparator",uh=m.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e;return u.jsx(Le.div,{"aria-hidden":!0,...r,ref:t})});uh.displayName=Y6;var Us="SelectArrow",Q6=m.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,o=Ca(n),a=An(Us,n),i=Dn(Us,n);return a.open&&i.position==="popper"?u.jsx(Al,{...o,...r,ref:t}):null});Q6.displayName=Us;function lh(e){return e===""||e===void 0}var ch=m.forwardRef((e,t)=>{const{value:n,...r}=e,o=m.useRef(null),a=He(t,o),i=Wf(n);return m.useEffect(()=>{const l=o.current,d=window.HTMLSelectElement.prototype,p=Object.getOwnPropertyDescriptor(d,"value").set;if(i!==n&&p){const b=new Event("change",{bubbles:!0});p.call(l,n),l.dispatchEvent(b)}},[i,n]),u.jsx(L0,{asChild:!0,children:u.jsx("select",{...r,ref:a,defaultValue:n})})});ch.displayName="BubbleSelect";function dh(e){const t=jt(e),n=m.useRef(""),r=m.useRef(0),o=m.useCallback(i=>{const l=n.current+i;t(l),function d(f){n.current=f,window.clearTimeout(r.current),f!==""&&(r.current=window.setTimeout(()=>d(""),1e3))}(l)},[t]),a=m.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return m.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,o,a]}function fh(e,t,n){const o=t.length>1&&Array.from(t).every(f=>f===t[0])?t[0]:t,a=n?e.indexOf(n):-1;let i=Z6(e,Math.max(a,0));o.length===1&&(i=i.filter(f=>f!==n));const d=i.find(f=>f.textValue.toLowerCase().startsWith(o.toLowerCase()));return d!==n?d:void 0}function Z6(e,t){return e.map((n,r)=>e[(t+r)%e.length])}var X6=z0,hh=$0,J6=U0,eC=H0,tC=K0,ph=V0,nC=Q0,mh=J0,gh=th,rC=nh,oC=oh,bh=ah,xh=sh,yh=uh;const aC=X6,sC=J6,vh=m.forwardRef(({className:e,children:t,...n},r)=>u.jsxs(hh,{ref:r,className:te("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...n,children:[t,u.jsx(eC,{asChild:!0,children:u.jsx(rc,{className:"h-4 w-4 opacity-50"})})]}));vh.displayName=hh.displayName;const wh=m.forwardRef(({className:e,...t},n)=>u.jsx(bh,{ref:n,className:te("flex cursor-default items-center justify-center py-1",e),...t,children:u.jsx(lg,{className:"h-4 w-4"})}));wh.displayName=bh.displayName;const Ch=m.forwardRef(({className:e,...t},n)=>u.jsx(xh,{ref:n,className:te("flex cursor-default items-center justify-center py-1",e),...t,children:u.jsx(rc,{className:"h-4 w-4"})}));Ch.displayName=xh.displayName;const kh=m.forwardRef(({className:e,children:t,position:n="popper",...r},o)=>u.jsx(tC,{children:u.jsxs(ph,{ref:o,className:te("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:n,...r,children:[u.jsx(wh,{}),u.jsx(nC,{className:te("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),u.jsx(Ch,{})]})}));kh.displayName=ph.displayName;const iC=m.forwardRef(({className:e,...t},n)=>u.jsx(mh,{ref:n,className:te("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t}));iC.displayName=mh.displayName;const _h=m.forwardRef(({className:e,children:t,...n},r)=>u.jsxs(gh,{ref:r,className:te("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...n,children:[u.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:u.jsx(oC,{children:u.jsx(Cn,{className:"h-4 w-4"})})}),u.jsx(rC,{children:t})]}));_h.displayName=gh.displayName;const uC=m.forwardRef(({className:e,...t},n)=>u.jsx(yh,{ref:n,className:te("-mx-1 my-1 h-px bg-muted",e),...t}));uC.displayName=yh.displayName;const lC=[{value:"#3b82f6",label:"Blue"},{value:"#8b5cf6",label:"Purple"},{value:"#10b981",label:"Green"},{value:"#f59e0b",label:"Orange"},{value:"#ef4444",label:"Red"},{value:"#06b6d4",label:"Cyan"},{value:"#84cc16",label:"Lime"},{value:"#f97316",label:"Orange"}],bs=[{value:"Folder",label:"Folder",icon:$n},{value:"Code",label:"Code",icon:dg},{value:"Palette",label:"Design",icon:li},{value:"BookOpen",label:"Learning",icon:sg},{value:"Star",label:"Favorites",icon:jg},{value:"Heart",label:"Personal",icon:gg},{value:"Zap",label:"Quick",icon:cc},{value:"Target",label:"Goals",icon:Dg},{value:"Lightbulb",label:"Ideas",icon:xg},{value:"Coffee",label:"Work",icon:fg}];function cC({isOpen:e,onClose:t,onConfirm:n,parentId:r,initialData:o,mode:a="create"}){const[i,l]=m.useState(""),[d,f]=m.useState("#3b82f6"),[p,b]=m.useState("Folder");m.useEffect(()=>{e&&(o?(l(o.name),f(o.color),b(o.icon)):(l(""),f("#3b82f6"),b("Folder")))},[e]),m.useEffect(()=>{e&&o&&(l(o.name),f(o.color),b(o.icon))},[o,e]);const v=C=>{C.preventDefault(),i.trim()&&(n({name:i.trim(),color:d,icon:p,parentId:r}),t())},y=bs.find(C=>C.value===p)?.icon||$n;return u.jsx(qn,{open:e,onOpenChange:t,children:u.jsxs(kn,{className:"sm:max-w-md",children:[u.jsxs(br,{children:[u.jsx(yr,{children:a==="create"?"Create New Folder":"Edit Folder"}),u.jsx(oa,{children:a==="create"?"Create a new folder to organize your cards.":"Update folder details."})]}),u.jsxs("form",{onSubmit:v,className:"space-y-4",children:[u.jsxs("div",{className:"space-y-2",children:[u.jsx(St,{htmlFor:"folder-name",children:"Folder Name"}),u.jsx(_t,{id:"folder-name",value:i,onChange:C=>l(C.target.value),placeholder:"Enter folder name...",autoFocus:!0})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsx(St,{children:"Color"}),u.jsx("div",{className:"flex flex-wrap gap-2",children:lC.map(C=>u.jsx("button",{type:"button",onClick:()=>f(C.value),className:`w-8 h-8 rounded-full border-2 transition-all ${d===C.value?"border-foreground scale-110":"border-muted hover:scale-105"}`,style:{backgroundColor:C.value},title:C.label},C.value))})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsx(St,{children:"Icon"}),u.jsxs(aC,{value:p,onValueChange:b,children:[u.jsx(vh,{children:u.jsx(sC,{children:u.jsxs("div",{className:"flex items-center gap-2",children:[oe.createElement(y,{className:"h-4 w-4",style:{color:d}}),bs.find(C=>C.value===p)?.label]})})}),u.jsx(kh,{children:bs.map(C=>{const k=C.icon;return u.jsx(_h,{value:C.value,children:u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(k,{className:"h-4 w-4"}),C.label]})},C.value)})})]})]}),r&&u.jsx("div",{className:"flex items-center gap-2",children:u.jsx(It,{variant:"secondary",children:"Subfolder"})}),u.jsxs(xr,{children:[u.jsx(ke,{type:"button",variant:"outline",onClick:t,children:"Cancel"}),u.jsx(ke,{type:"submit",disabled:!i.trim(),children:a==="create"?"Create Folder":"Save Changes"})]})]})]})})}var Sh="AlertDialog",[dC,Qk]=Qt(Sh,[Dl]),sn=Dl(),Eh=e=>{const{__scopeAlertDialog:t,...n}=e,r=sn(t);return u.jsx(bl,{...r,...n,modal:!0})};Eh.displayName=Sh;var fC="AlertDialogTrigger",hC=m.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,o=sn(n);return u.jsx(Ap,{...o,...r,ref:t})});hC.displayName=fC;var pC="AlertDialogPortal",jh=e=>{const{__scopeAlertDialog:t,...n}=e,r=sn(t);return u.jsx(gl,{...r,...n})};jh.displayName=pC;var mC="AlertDialogOverlay",Ah=m.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,o=sn(n);return u.jsx(Ks,{...o,...r,ref:t})});Ah.displayName=mC;var ur="AlertDialogContent",[gC,bC]=dC(ur),Dh=m.forwardRef((e,t)=>{const{__scopeAlertDialog:n,children:r,...o}=e,a=sn(n),i=m.useRef(null),l=He(t,i),d=m.useRef(null);return u.jsx(Ep,{contentName:ur,titleName:Nh,docsSlug:"alert-dialog",children:u.jsx(gC,{scope:n,cancelRef:d,children:u.jsxs(Vs,{role:"alertdialog",...a,...o,ref:l,onOpenAutoFocus:pe(o.onOpenAutoFocus,f=>{f.preventDefault(),d.current?.focus({preventScroll:!0})}),onPointerDownOutside:f=>f.preventDefault(),onInteractOutside:f=>f.preventDefault(),children:[u.jsx(jp,{children:r}),u.jsx(yC,{contentRef:i})]})})})});Dh.displayName=ur;var Nh="AlertDialogTitle",Th=m.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,o=sn(n);return u.jsx(Gs,{...o,...r,ref:t})});Th.displayName=Nh;var Mh="AlertDialogDescription",Ih=m.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,o=sn(n);return u.jsx(Ys,{...o,...r,ref:t})});Ih.displayName=Mh;var xC="AlertDialogAction",Ph=m.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,o=sn(n);return u.jsx(Ws,{...o,...r,ref:t})});Ph.displayName=xC;var Rh="AlertDialogCancel",Fh=m.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,{cancelRef:o}=bC(Rh,n),a=sn(n),i=He(t,o);return u.jsx(Ws,{...a,...r,ref:i})});Fh.displayName=Rh;var yC=({contentRef:e})=>{const t=`\`${ur}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${ur}\` by passing a \`${Mh}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${ur}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return m.useEffect(()=>{document.getElementById(e.current?.getAttribute("aria-describedby"))||console.warn(t)},[t,e]),null},vC=Eh,wC=jh,Oh=Ah,Lh=Dh,zh=Ph,Bh=Fh,$h=Th,qh=Ih;const CC=vC,kC=wC,Uh=m.forwardRef(({className:e,...t},n)=>u.jsx(Oh,{className:te("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:n}));Uh.displayName=Oh.displayName;const Hh=m.forwardRef(({className:e,...t},n)=>u.jsxs(kC,{children:[u.jsx(Uh,{}),u.jsx(Lh,{ref:n,className:te("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...t})]}));Hh.displayName=Lh.displayName;const Kh=({className:e,...t})=>u.jsx("div",{className:te("flex flex-col space-y-2 text-center sm:text-left",e),...t});Kh.displayName="AlertDialogHeader";const Vh=({className:e,...t})=>u.jsx("div",{className:te("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});Vh.displayName="AlertDialogFooter";const Wh=m.forwardRef(({className:e,...t},n)=>u.jsx($h,{ref:n,className:te("text-lg font-semibold",e),...t}));Wh.displayName=$h.displayName;const Gh=m.forwardRef(({className:e,...t},n)=>u.jsx(qh,{ref:n,className:te("text-sm text-muted-foreground",e),...t}));Gh.displayName=qh.displayName;const Yh=m.forwardRef(({className:e,...t},n)=>u.jsx(zh,{ref:n,className:te(ri(),e),...t}));Yh.displayName=zh.displayName;const Qh=m.forwardRef(({className:e,...t},n)=>u.jsx(Bh,{ref:n,className:te(ri({variant:"outline"}),"mt-2 sm:mt-0",e),...t}));Qh.displayName=Bh.displayName;function _C({isOpen:e,onClose:t,onConfirm:n,folderName:r,cardCount:o,hasSubfolders:a=!1,subfolderCount:i=0}){const l=()=>{n(),t()};return u.jsx(CC,{open:e,onOpenChange:t,children:u.jsxs(Hh,{children:[u.jsxs(Kh,{children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(lc,{className:"h-5 w-5 text-destructive"}),u.jsx(Wh,{children:"Delete Folder"})]}),u.jsxs(Gh,{className:"space-y-3",children:[u.jsxs("p",{children:["Are you sure you want to delete the folder ",u.jsxs("strong",{children:['"',r,'"']}),"?"]}),u.jsxs("div",{className:"bg-destructive/10 p-3 rounded-lg space-y-2",children:[u.jsx("p",{className:"text-sm font-medium text-destructive",children:"This action will permanently delete:"}),u.jsxs("div",{className:"flex flex-wrap gap-2",children:[o>0&&u.jsxs(It,{variant:"destructive",children:[o," card",o!==1?"s":""]}),a&&i>0&&u.jsxs(It,{variant:"destructive",children:[i," subfolder",i!==1?"s":""]})]})]}),u.jsx("p",{className:"text-sm text-muted-foreground",children:"This action cannot be undone."})]})]}),u.jsxs(Vh,{children:[u.jsx(Qh,{children:"Cancel"}),u.jsx(Yh,{onClick:l,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Delete Forever"})]})]})})}function SC({children:e,tagName:t,onRename:n,onDelete:r,disabled:o=!1}){const a=()=>{o||n(t)},i=()=>{o||r(t)};return o?u.jsx(u.Fragment,{children:e}):u.jsxs(R0,{children:[u.jsx(F0,{asChild:!0,children:e}),u.jsxs(Fi,{className:"w-48",children:[u.jsxs(ir,{onClick:a,className:"flex items-center gap-2",children:[u.jsx(uc,{className:"h-4 w-4"}),"Rename Tag"]}),u.jsxs(ir,{onClick:i,className:"flex items-center gap-2 text-destructive focus:text-destructive",children:[u.jsx(di,{className:"h-4 w-4"}),"Delete Tag"]})]})]})}function EC({isOpen:e,onClose:t,onConfirm:n,tagName:r,existingTags:o}){const[a,i]=m.useState(""),[l,d]=m.useState("");m.useEffect(()=>{e&&(i(r),d(""))},[e,r]);const f=v=>{const y=v.trim();return y?y===r?"Please enter a different name":o.includes(y)?"A tag with this name already exists":y.length>50?"Tag name must be less than 50 characters":"":"Tag name cannot be empty"},p=()=>{const v=a.trim(),y=f(v);if(y){d(y);return}n(r,v),t()},b=v=>{v.key==="Enter"&&p()};return u.jsx(qn,{open:e,onOpenChange:t,children:u.jsxs(kn,{className:"sm:max-w-md",children:[u.jsxs(br,{children:[u.jsx(yr,{children:"Rename Tag"}),u.jsxs(oa,{children:['Enter a new name for the tag "',r,'". This will update all cards using this tag.']})]}),u.jsx("div",{className:"space-y-4 py-4",children:u.jsxs("div",{className:"space-y-2",children:[u.jsx(St,{htmlFor:"tag-name",children:"Tag Name"}),u.jsx(_t,{id:"tag-name",value:a,onChange:v=>{i(v.target.value),l&&d("")},onKeyPress:b,placeholder:"Enter tag name...",autoFocus:!0}),l&&u.jsxs("div",{className:"flex items-center gap-2 text-sm text-destructive",children:[u.jsx(zt,{className:"h-4 w-4"}),l]})]})}),u.jsxs(xr,{children:[u.jsx(ke,{variant:"outline",onClick:t,children:"Cancel"}),u.jsx(ke,{onClick:p,disabled:!!l||!a.trim(),children:"Rename Tag"})]})]})})}function jC({isOpen:e,onClose:t,onConfirm:n,tagName:r,cardCount:o}){return u.jsx(qn,{open:e,onOpenChange:t,children:u.jsxs(kn,{className:"sm:max-w-md",children:[u.jsxs(br,{children:[u.jsxs(yr,{className:"flex items-center gap-2",children:[u.jsx(lc,{className:"h-5 w-5 text-destructive"}),"Delete Tag"]}),u.jsxs(oa,{children:['Are you sure you want to delete the tag "',r,'"?']})]}),u.jsx("div",{className:"py-4",children:u.jsxs("div",{className:"rounded-lg bg-destructive/10 p-4 border border-destructive/20",children:[u.jsx("p",{className:"text-sm text-destructive font-medium mb-2",children:"This action cannot be undone."}),u.jsxs("p",{className:"text-sm text-muted-foreground",children:["This tag will be removed from ",u.jsx("strong",{children:o})," ",o===1?"card":"cards","."]})]})}),u.jsxs(xr,{children:[u.jsx(ke,{variant:"outline",onClick:t,children:"Cancel"}),u.jsx(ke,{variant:"destructive",onClick:n,children:"Delete Tag"})]})]})})}const AC=({tag:e,isSelected:t,onClick:n,className:r,showCount:o=!0})=>u.jsxs("button",{onClick:()=>n(e),className:te("relative flex items-center justify-between px-3 py-2 rounded-xl border transition-all duration-300 ease-out","hover:shadow-lg hover:shadow-black/10 active:scale-[0.98] focus:outline-none focus:ring-2 focus:ring-blue-500/30","backdrop-blur-sm group",t?"bg-gradient-to-r from-blue-500 to-blue-600 border-blue-500 text-white shadow-md shadow-blue-500/25":"bg-white/80 border-gray-200/60 text-gray-700 hover:bg-white hover:border-gray-300/80",r),style:{boxShadow:t?"0 4px 20px -4px rgba(59, 130, 246, 0.3), 0 0 0 1px rgba(59, 130, 246, 0.1)":void 0},children:[u.jsxs("div",{className:"flex items-center gap-2.5 flex-1 min-w-0",children:[u.jsx("div",{className:te("w-2 h-2 rounded-full flex-shrink-0 transition-all duration-300",t?"bg-white/90 shadow-sm":"shadow-sm"),style:{backgroundColor:t?"rgba(255, 255, 255, 0.9)":e.color,boxShadow:t?"0 1px 3px rgba(0, 0, 0, 0.1)":`0 1px 3px ${e.color}40`}}),u.jsx("span",{className:te("text-sm font-medium truncate transition-all duration-300",t?"text-white":"text-gray-700 group-hover:text-gray-900"),children:e.name}),t&&u.jsx(Cn,{className:"w-3.5 h-3.5 text-white/90 flex-shrink-0 animate-in fade-in-0 zoom-in-95 duration-200"})]}),o&&u.jsx("span",{className:te("text-xs font-medium px-2 py-0.5 rounded-full ml-2 flex-shrink-0 transition-all duration-300",t?"text-blue-600 bg-white/90 shadow-sm":"text-gray-500 bg-gray-100/80 group-hover:bg-gray-200/80 group-hover:text-gray-600"),children:e.count})]}),DC=({tags:e,selectedTags:t,onTagClick:n,className:r,emptyMessage:o="No tags found"})=>e.length===0?u.jsx("div",{className:te("text-center py-8 text-gray-500",r),children:u.jsx("p",{className:"text-sm",children:o})}):u.jsx("div",{className:te("grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-2",r),children:e.map(a=>u.jsx(AC,{tag:a,isSelected:t.includes(a.name),onClick:n},a.id))}),NC=({onSearch:e,onCreateTag:t,searchResults:n,searchQuery:r,className:o})=>{const[a,i]=m.useState(r);m.useEffect(()=>{i(r)},[r]);const l=p=>{const b=p.target.value;i(b),e(b)},d=()=>{a.trim()&&(t(a.trim()),i(""),e(""))},f=a.trim()&&n.length===0&&!n.some(p=>p.name.toLowerCase()===a.toLowerCase());return u.jsxs("div",{className:te("space-y-3",o),children:[u.jsxs("div",{className:"relative",children:[u.jsx(ci,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),u.jsx(_t,{placeholder:"Search tags or create new...",value:a,onChange:l,className:"pl-11 pr-4 py-3 rounded-2xl border-gray-200/60 bg-gray-50/50 backdrop-blur-sm focus:bg-white focus:border-blue-300 transition-all duration-300"})]}),f&&u.jsxs(ke,{onClick:d,variant:"outline",className:"w-full justify-start text-left rounded-xl border-dashed border-2 border-gray-300 hover:border-blue-400 hover:bg-blue-50/50 transition-all duration-300 py-3",children:[u.jsx(ic,{className:"h-4 w-4 mr-2 text-blue-500"}),u.jsxs("span",{className:"text-gray-700",children:['Create tag "',u.jsx("span",{className:"font-medium text-blue-600",children:a}),'"']})]})]})},TC=({isOpen:e,onClose:t,currentCardTags:n,onTagsChange:r})=>{const{tags:o,searchTags:a,dispatch:i,createTagIfNotExists:l}=ei(),[d,f]=m.useState(""),[p,b]=m.useState([]),[v,y]=m.useState(n);m.useEffect(()=>{if(d.trim()){const _=a(d);b(_)}else{const _=[...o].sort((S,D)=>D.count-S.count);b(_)}},[d,o,a]),m.useEffect(()=>{y(n)},[n]);const C=_=>{f(_)},k=_=>{i({type:"CREATE_TAG",payload:{name:_,color:"#3b82f6"}});const S=[...v,_];y(S),r(S),f("")},A=_=>{const S=v.includes(_.name);let D;S?D=v.filter(I=>I!==_.name):D=[...v,_.name],y(D),r(D)},j=()=>{f(""),t()};return e?u.jsxs("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center p-4",style:{backgroundColor:"rgba(0, 0, 0, 0.15)",backdropFilter:"blur(8px)"},children:[u.jsx("div",{className:"absolute inset-0",onClick:j}),u.jsxs("div",{className:"relative bg-white/95 backdrop-blur-xl rounded-3xl shadow-2xl border border-gray-200/50 p-6 w-full max-w-sm sm:max-w-md lg:max-w-2xl max-h-[85vh] flex flex-col",children:[u.jsxs("div",{className:"flex items-center justify-between mb-6",children:[u.jsxs("div",{children:[u.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Manage Tags"}),u.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Select tags for this card"})]}),u.jsx("button",{onClick:j,className:"p-1 rounded-lg hover:bg-gray-100 transition-colors",children:u.jsx(jn,{className:"w-5 h-5 text-gray-500"})})]}),u.jsx(NC,{onSearch:C,onCreateTag:k,searchResults:p,searchQuery:d,className:"mb-4"}),v.length>0&&u.jsxs("div",{className:"mb-4 p-4 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-2xl border border-blue-100/50",children:[u.jsxs("p",{className:"text-sm font-medium text-blue-700 mb-3",children:["Selected tags (",v.length,"):"]}),u.jsx("div",{className:"flex flex-wrap gap-1.5",children:v.map(_=>u.jsx("span",{className:"inline-flex items-center px-3 py-1.5 rounded-full text-xs font-medium bg-gradient-to-r from-blue-500 to-blue-600 text-white shadow-sm",children:_},_))})]}),u.jsx("div",{className:"flex-1 overflow-y-auto",children:u.jsx(DC,{tags:p,selectedTags:v,onTagClick:A,emptyMessage:d?`No tags found for "${d}"`:"No tags available"})}),u.jsx("div",{className:"text-xs text-gray-400 text-center mt-4 pt-4 border-t border-gray-100",children:u.jsxs("div",{className:"flex items-center justify-center gap-2",children:[u.jsx("div",{className:"w-1 h-1 rounded-full bg-gray-300"}),u.jsx("span",{children:"Click tags to add/remove them from this card"}),u.jsx("div",{className:"w-1 h-1 rounded-full bg-gray-300"})]})})]})]}):null},MC=()=>{const{isOpen:e,currentCardTags:t,onTagsChange:n,closeTagPanel:r}=lf();return!e||!n?null:u.jsx(TC,{isOpen:e,onClose:r,currentCardTags:t,onTagsChange:n})};function IC({collapsed:e,onToggle:t,className:n}){const{folderTree:r,selectedFolderId:o,setSelectedFolderId:a,dispatch:i,getFolderById:l,folders:d,isLoading:f}=Js(),{tags:p,popularTags:b,renameTag:v,deleteTagByName:y,getAllTagNames:C}=ei(),{filter:k,setFilter:A,viewSettings:j,setViewSettings:_}=Xs(),[S,D]=m.useState(!1),[I,M]=m.useState(!1),[F,H]=m.useState(null),[Z,ie]=m.useState(null),[Y,Q]=m.useState(null),[me,_e]=m.useState(!1),[Ee,xe]=m.useState(!1),[Ne,Ae]=m.useState(""),[K,ge]=m.useState(!1),Ce=m.useCallback((ve=[],fe=0)=>e&&fe>0?null:ve.map(qe=>u.jsxs("div",{className:"space-y-1",children:[u.jsx("div",{className:te("flex items-center justify-between px-2 py-1.5 rounded-sm hover:bg-accent hover:text-accent-foreground cursor-pointer group",o===qe.id&&"bg-accent text-accent-foreground"),style:{paddingLeft:`${fe*16+8}px`},onClick:()=>a(qe.id),onContextMenu:vt=>{vt.preventDefault(),ie({id:qe.id,name:qe.name})},children:u.jsxs("div",{className:"flex items-center space-x-2 flex-1 min-w-0",children:[u.jsx($n,{className:"h-4 w-4 flex-shrink-0"}),u.jsx("span",{className:"truncate text-sm",children:qe.name}),qe.cardIds&&qe.cardIds.length>0&&u.jsx(It,{variant:"secondary",className:"text-xs ml-auto flex-shrink-0",children:qe.cardIds.length})]})}),qe.children&&qe.children.length>0&&u.jsx("div",{className:"ml-2",children:Ce(qe.children,fe+1)})]},qe.id)),[e,o,a]),Se=m.useCallback((ve=[])=>ve.map(fe=>u.jsxs("div",{children:[u.jsx("div",{className:te("flex items-center justify-between px-2 py-1.5 rounded-sm hover:bg-accent hover:text-accent-foreground cursor-pointer",o===fe.id&&"bg-accent text-accent-foreground"),onClick:()=>a(fe.id),onContextMenu:qe=>{qe.preventDefault(),ie({id:fe.id,name:fe.name})},children:u.jsxs("div",{className:"flex items-center space-x-2 flex-1 min-w-0",children:[u.jsx($n,{className:"h-4 w-4 flex-shrink-0"}),u.jsx("span",{className:"truncate text-sm",children:fe.name}),fe.cardIds&&fe.cardIds.length>0&&u.jsx(It,{variant:"secondary",className:"text-xs ml-auto flex-shrink-0",children:fe.cardIds.length})]})}),fe.children&&fe.children.length>0&&u.jsx("div",{className:"ml-4 border-l border-border pl-2",children:Se(fe.children)})]},fe.id)),[o,a]),we=m.useMemo(()=>{const ve=d.length,qe=(o?l(o):null)?.cardIds?.length||0;return{totalFolders:ve,selectedFolderCards:qe}},[d,o,l]),je=()=>{D(!0)},Fe=ve=>{H(ve)},Be=ve=>{ie(ve),M(!0)},ee=ve=>{Q(ve),Ae(ve.name)},se=()=>{Y&&Ne&&Ne!==Y.name&&v(Y.name,Ne),_e(!1),Q(null)},J=()=>{Y&&y(Y.name),xe(!1),Q(null)},Ie=()=>{A({...k,tag:""})};return e?u.jsx("div",{className:te("w-14 border-r bg-background",n),children:u.jsxs("div",{className:"flex flex-col h-full",children:[u.jsx("div",{className:"p-2 border-b",children:u.jsx(ke,{variant:"ghost",size:"sm",onClick:t,className:"w-full justify-center",children:u.jsx(ui,{className:"h-4 w-4"})})}),u.jsx("div",{className:"flex-1 overflow-y-auto p-2 space-y-2",children:u.jsx(ke,{variant:"ghost",size:"sm",onClick:je,className:"w-full justify-center",title:"æ°å»ºæä»¶å¤¹",children:u.jsx(Es,{className:"h-4 w-4"})})})]})}):u.jsxs("div",{className:te("w-64 border-r bg-background",n),children:[u.jsxs("div",{className:"flex flex-col h-full",children:[u.jsxs("div",{className:"p-4 border-b space-y-2",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("h2",{className:"font-semibold",children:"ä¾§è¾¹æ "}),u.jsx(ke,{variant:"ghost",size:"sm",onClick:t,children:u.jsx(ug,{className:"h-4 w-4"})})]}),u.jsxs("div",{className:"text-sm text-muted-foreground",children:[we.totalFolders," æä»¶å¤¹"]})]}),u.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[u.jsxs("div",{className:"space-y-2",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("h3",{className:"text-sm font-medium",children:"æä»¶å¤¹"}),u.jsx(ke,{variant:"ghost",size:"sm",onClick:je,children:u.jsx(Es,{className:"h-4 w-4"})})]}),u.jsx("div",{className:"space-y-1 max-h-64 overflow-y-auto",children:Ce(r)})]}),u.jsx(Vf,{}),u.jsxs("div",{className:"space-y-2",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("h3",{className:"text-sm font-medium",children:"æ ç­¾"}),u.jsx(MC,{})]}),u.jsx("div",{className:"space-y-1 max-h-48 overflow-y-auto",children:b.slice(0,10).map(ve=>u.jsx("div",{className:te("flex items-center justify-between px-2 py-1 rounded-sm hover:bg-accent hover:text-accent-foreground cursor-pointer group",k.tag===ve.name&&"bg-accent text-accent-foreground"),onClick:()=>A({...k,tag:ve.name}),onContextMenu:fe=>{fe.preventDefault(),ee(ve)},children:u.jsxs("div",{className:"flex items-center space-x-2 flex-1 min-w-0",children:[u.jsx("div",{className:"w-3 h-3 rounded-full flex-shrink-0",style:{backgroundColor:ve.color}}),u.jsx("span",{className:"truncate text-sm",children:ve.name}),u.jsx(It,{variant:"outline",className:"text-xs ml-auto flex-shrink-0",children:ve.count})]})},ve.name))}),k.tag&&u.jsxs("div",{className:"flex items-center justify-between pt-2 border-t",children:[u.jsxs("span",{className:"text-sm text-muted-foreground truncate",children:["å½åç­é: ",k.tag]}),u.jsx(ke,{variant:"ghost",size:"sm",onClick:Ie,children:"æ¸é¤"})]})]})]}),u.jsxs("div",{className:"p-4 border-t space-y-4",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("h3",{className:"text-sm font-medium",children:"å¸å±è®¾ç½®"}),u.jsx(ke,{variant:"ghost",size:"sm",onClick:()=>ge(!K),children:u.jsx(_g,{className:"h-4 w-4"})})]}),K&&u.jsx("div",{className:"space-y-3",children:u.jsxs("div",{className:"space-y-2",children:[u.jsx(St,{className:"text-sm",children:"é´è·"}),u.jsx(u0,{value:[j.gap||16],onValueChange:([ve])=>_({...j,gap:ve}),min:8,max:32,step:4,className:"w-full"}),u.jsxs("div",{className:"text-xs text-muted-foreground text-center",children:[j.gap||16,"px"]})]})})]})]}),u.jsx(cC,{open:S,onOpenChange:D}),u.jsx(_C,{open:I,onOpenChange:M,folder:Z}),u.jsx(EC,{open:me,onOpenChange:_e,tagName:Ne,onTagNameChange:Ae,onConfirm:se}),u.jsx(jC,{open:Ee,onOpenChange:xe,tagName:Y?.name||"",onConfirm:J}),u.jsx(T6,{folder:Z,onEdit:Fe,onDelete:Be,onClose:()=>ie(null)}),u.jsx(SC,{tag:Y,onRename:()=>_e(!0),onDelete:()=>xe(!0),onClose:()=>Q(null)})]})}function PC({className:e}){const[t,n]=m.useState({user:null,session:null,loading:!1,error:null}),[r,o]=m.useState(!1),{cards:a,filter:i,setFilter:l,viewSettings:d,setViewSettings:f}=Xs(),{selectedFolderId:p,setSelectedFolderId:b,folders:v,isLoading:y}=Js(),{tags:C}=ei();m.useEffect(()=>Et.onAuthStateChange(n),[]);const k=m.useMemo(()=>{let _=a.allCards;if(p&&(_=_.filter(S=>S.folderId===p)),i.tag&&(_=_.filter(S=>S.frontContent.tags?.includes(i.tag)||S.backContent.tags?.includes(i.tag))),i.search){const S=i.search.toLowerCase();_=_.filter(D=>[...A(D.frontContent),...A(D.backContent)].join(" ").toLowerCase().includes(S))}return _.sort((S,D)=>new Date(D.createdAt).getTime()-new Date(S.createdAt).getTime())},[a.allCards,p,i.tag,i.search]),A=_=>{if(!_)return[];const S=[];return _.type==="doc"&&_.content?.forEach(D=>{if(D.type==="paragraph"){const I=D.content?.map(M=>M.text||"").join("")||"";I.trim()&&S.push(I)}else if(D.type==="heading"){const I=D.content?.map(M=>M.text||"").join("")||"";I.trim()&&S.push(I)}}),S},j=()=>{o(!r)};return u.jsx(Og,{children:u.jsxs("div",{className:te("flex flex-col h-screen bg-background",e),children:[u.jsx(F3,{authState:t}),u.jsxs("div",{className:"flex flex-1 overflow-hidden",children:[u.jsx(IC,{collapsed:r,onToggle:j}),u.jsx("main",{className:"flex-1 overflow-hidden p-6",children:u.jsxs("div",{className:"max-w-7xl mx-auto h-full",children:[(y||a.loading)&&u.jsx("div",{className:"flex items-center justify-center h-32",children:u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-2"}),u.jsx("p",{className:"text-sm text-muted-foreground",children:"å è½½ä¸­..."})]})}),!y&&!a.loading&&u.jsx(Yv,{cards:k,gap:d.gap||16,enableVirtualization:k.length>50}),!y&&!a.loading&&k.length===0&&u.jsxs("div",{className:"flex flex-col items-center justify-center h-64 text-center",children:[u.jsx("div",{className:"text-6xl mb-4",children:"ð"}),u.jsx("h3",{className:"text-lg font-semibold mb-2",children:"è¿æ²¡æå¡ç"}),u.jsx("p",{className:"text-muted-foreground mb-4",children:p||i.tag||i.search?"æ²¡ææ¾å°ç¬¦åæ¡ä»¶çå¡ç":"åå»ºä½ çç¬¬ä¸å¼ ç¥è¯å¡çå§ï¼"})]})]})})]})]})})}function RC({className:e}){return u.jsx(PC,{className:e})}const FC={theme:"system",setTheme:()=>null},OC=m.createContext(FC);function LC({children:e,defaultTheme:t="system",storageKey:n="vite-ui-theme",...r}){const[o,a]=m.useState(()=>localStorage.getItem(n)||t);m.useEffect(()=>{const l=window.document.documentElement;if(l.classList.remove("light","dark"),o==="system"){const d=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";l.classList.add(d);return}l.classList.add(o)},[o]);const i={theme:o,setTheme:l=>{localStorage.setItem(n,l),a(l)}};return u.jsx(OC.Provider,{...r,value:i,children:e})}var zC=e=>{switch(e){case"success":return qC;case"info":return HC;case"warning":return UC;case"error":return KC;default:return null}},BC=Array(12).fill(0),$C=({visible:e,className:t})=>oe.createElement("div",{className:["sonner-loading-wrapper",t].filter(Boolean).join(" "),"data-visible":e},oe.createElement("div",{className:"sonner-spinner"},BC.map((n,r)=>oe.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${r}`})))),qC=oe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},oe.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),UC=oe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},oe.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),HC=oe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},oe.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),KC=oe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},oe.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),VC=oe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},oe.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),oe.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),WC=()=>{let[e,t]=oe.useState(document.hidden);return oe.useEffect(()=>{let n=()=>{t(document.hidden)};return document.addEventListener("visibilitychange",n),()=>window.removeEventListener("visibilitychange",n)},[]),e},Hs=1,GC=class{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{let t=this.subscribers.indexOf(e);this.subscribers.splice(t,1)}),this.publish=e=>{this.subscribers.forEach(t=>t(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var t;let{message:n,...r}=e,o=typeof e?.id=="number"||((t=e.id)==null?void 0:t.length)>0?e.id:Hs++,a=this.toasts.find(l=>l.id===o),i=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(o)&&this.dismissedToasts.delete(o),a?this.toasts=this.toasts.map(l=>l.id===o?(this.publish({...l,...e,id:o,title:n}),{...l,...e,id:o,dismissible:i,title:n}):l):this.addToast({title:n,...r,dismissible:i,id:o}),o},this.dismiss=e=>(this.dismissedToasts.add(e),e||this.toasts.forEach(t=>{this.subscribers.forEach(n=>n({id:t.id,dismiss:!0}))}),this.subscribers.forEach(t=>t({id:e,dismiss:!0})),e),this.message=(e,t)=>this.create({...t,message:e}),this.error=(e,t)=>this.create({...t,message:e,type:"error"}),this.success=(e,t)=>this.create({...t,type:"success",message:e}),this.info=(e,t)=>this.create({...t,type:"info",message:e}),this.warning=(e,t)=>this.create({...t,type:"warning",message:e}),this.loading=(e,t)=>this.create({...t,type:"loading",message:e}),this.promise=(e,t)=>{if(!t)return;let n;t.loading!==void 0&&(n=this.create({...t,promise:e,type:"loading",message:t.loading,description:typeof t.description!="function"?t.description:void 0}));let r=e instanceof Promise?e:e(),o=n!==void 0,a,i=r.then(async d=>{if(a=["resolve",d],oe.isValidElement(d))o=!1,this.create({id:n,type:"default",message:d});else if(QC(d)&&!d.ok){o=!1;let f=typeof t.error=="function"?await t.error(`HTTP error! status: ${d.status}`):t.error,p=typeof t.description=="function"?await t.description(`HTTP error! status: ${d.status}`):t.description;this.create({id:n,type:"error",message:f,description:p})}else if(t.success!==void 0){o=!1;let f=typeof t.success=="function"?await t.success(d):t.success,p=typeof t.description=="function"?await t.description(d):t.description;this.create({id:n,type:"success",message:f,description:p})}}).catch(async d=>{if(a=["reject",d],t.error!==void 0){o=!1;let f=typeof t.error=="function"?await t.error(d):t.error,p=typeof t.description=="function"?await t.description(d):t.description;this.create({id:n,type:"error",message:f,description:p})}}).finally(()=>{var d;o&&(this.dismiss(n),n=void 0),(d=t.finally)==null||d.call(t)}),l=()=>new Promise((d,f)=>i.then(()=>a[0]==="reject"?f(a[1]):d(a[1])).catch(f));return typeof n!="string"&&typeof n!="number"?{unwrap:l}:Object.assign(n,{unwrap:l})},this.custom=(e,t)=>{let n=t?.id||Hs++;return this.create({jsx:e(n),id:n,...t}),n},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},bt=new GC,YC=(e,t)=>{let n=t?.id||Hs++;return bt.addToast({title:e,...t,id:n}),n},QC=e=>e&&typeof e=="object"&&"ok"in e&&typeof e.ok=="boolean"&&"status"in e&&typeof e.status=="number",ZC=YC,XC=()=>bt.toasts,JC=()=>bt.getActiveToasts();Object.assign(ZC,{success:bt.success,info:bt.info,warning:bt.warning,error:bt.error,custom:bt.custom,message:bt.message,promise:bt.promise,dismiss:bt.dismiss,loading:bt.loading},{getHistory:XC,getToasts:JC});function ek(e,{insertAt:t}={}){if(typeof document>"u")return;let n=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",t==="top"&&n.firstChild?n.insertBefore(r,n.firstChild):n.appendChild(r),r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e))}ek(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function zo(e){return e.label!==void 0}var tk=3,nk="32px",rk="16px",hl=4e3,ok=356,ak=14,sk=20,ik=200;function Lt(...e){return e.filter(Boolean).join(" ")}function uk(e){let[t,n]=e.split("-"),r=[];return t&&r.push(t),n&&r.push(n),r}var lk=e=>{var t,n,r,o,a,i,l,d,f,p,b;let{invert:v,toast:y,unstyled:C,interacting:k,setHeights:A,visibleToasts:j,heights:_,index:S,toasts:D,expanded:I,removeToast:M,defaultRichColors:F,closeButton:H,style:Z,cancelButtonStyle:ie,actionButtonStyle:Y,className:Q="",descriptionClassName:me="",duration:_e,position:Ee,gap:xe,loadingIcon:Ne,expandByDefault:Ae,classNames:K,icons:ge,closeButtonAriaLabel:Ce="Close toast",pauseWhenPageIsHidden:Se}=e,[we,je]=oe.useState(null),[Fe,Be]=oe.useState(null),[ee,se]=oe.useState(!1),[J,Ie]=oe.useState(!1),[ve,fe]=oe.useState(!1),[qe,vt]=oe.useState(!1),[wt,un]=oe.useState(!1),[Nn,kr]=oe.useState(0),[ka,Vn]=oe.useState(0),ut=oe.useRef(y.duration||_e||hl),_r=oe.useRef(null),Ct=oe.useRef(null),fo=S===0,Tn=S+1<=j,tt=y.type,gt=y.dismissible!==!1,Sr=y.className||"",Mn=y.descriptionClassName||"",ln=oe.useMemo(()=>_.findIndex(De=>De.toastId===y.id)||0,[_,y.id]),Wn=oe.useMemo(()=>{var De;return(De=y.closeButton)!=null?De:H},[y.closeButton,H]),Ut=oe.useMemo(()=>y.duration||_e||hl,[y.duration,_e]),cn=oe.useRef(0),Ht=oe.useRef(0),Ot=oe.useRef(0),be=oe.useRef(null),[In,tn]=Ee.split("-"),Pn=oe.useMemo(()=>_.reduce((De,Ke,We)=>We>=ln?De:De+Ke.height,0),[_,ln]),le=WC(),Er=y.invert||v,Gn=tt==="loading";Ht.current=oe.useMemo(()=>ln*xe+Pn,[ln,Pn]),oe.useEffect(()=>{ut.current=Ut},[Ut]),oe.useEffect(()=>{se(!0)},[]),oe.useEffect(()=>{let De=Ct.current;if(De){let Ke=De.getBoundingClientRect().height;return Vn(Ke),A(We=>[{toastId:y.id,height:Ke,position:y.position},...We]),()=>A(We=>We.filter(rt=>rt.toastId!==y.id))}},[A,y.id]),oe.useLayoutEffect(()=>{if(!ee)return;let De=Ct.current,Ke=De.style.height;De.style.height="auto";let We=De.getBoundingClientRect().height;De.style.height=Ke,Vn(We),A(rt=>rt.find(ot=>ot.toastId===y.id)?rt.map(ot=>ot.toastId===y.id?{...ot,height:We}:ot):[{toastId:y.id,height:We,position:y.position},...rt])},[ee,y.title,y.description,A,y.id]);let Dt=oe.useCallback(()=>{Ie(!0),kr(Ht.current),A(De=>De.filter(Ke=>Ke.toastId!==y.id)),setTimeout(()=>{M(y)},ik)},[y,M,A,Ht]);oe.useEffect(()=>{if(y.promise&&tt==="loading"||y.duration===1/0||y.type==="loading")return;let De;return I||k||Se&&le?(()=>{if(Ot.current<cn.current){let Ke=new Date().getTime()-cn.current;ut.current=ut.current-Ke}Ot.current=new Date().getTime()})():ut.current!==1/0&&(cn.current=new Date().getTime(),De=setTimeout(()=>{var Ke;(Ke=y.onAutoClose)==null||Ke.call(y,y),Dt()},ut.current)),()=>clearTimeout(De)},[I,k,y,tt,Se,le,Dt]),oe.useEffect(()=>{y.delete&&Dt()},[Dt,y.delete]);function ho(){var De,Ke,We;return ge!=null&&ge.loading?oe.createElement("div",{className:Lt(K?.loader,(De=y?.classNames)==null?void 0:De.loader,"sonner-loader"),"data-visible":tt==="loading"},ge.loading):Ne?oe.createElement("div",{className:Lt(K?.loader,(Ke=y?.classNames)==null?void 0:Ke.loader,"sonner-loader"),"data-visible":tt==="loading"},Ne):oe.createElement($C,{className:Lt(K?.loader,(We=y?.classNames)==null?void 0:We.loader),visible:tt==="loading"})}return oe.createElement("li",{tabIndex:0,ref:Ct,className:Lt(Q,Sr,K?.toast,(t=y?.classNames)==null?void 0:t.toast,K?.default,K?.[tt],(n=y?.classNames)==null?void 0:n[tt]),"data-sonner-toast":"","data-rich-colors":(r=y.richColors)!=null?r:F,"data-styled":!(y.jsx||y.unstyled||C),"data-mounted":ee,"data-promise":!!y.promise,"data-swiped":wt,"data-removed":J,"data-visible":Tn,"data-y-position":In,"data-x-position":tn,"data-index":S,"data-front":fo,"data-swiping":ve,"data-dismissible":gt,"data-type":tt,"data-invert":Er,"data-swipe-out":qe,"data-swipe-direction":Fe,"data-expanded":!!(I||Ae&&ee),style:{"--index":S,"--toasts-before":S,"--z-index":D.length-S,"--offset":`${J?Nn:Ht.current}px`,"--initial-height":Ae?"auto":`${ka}px`,...Z,...y.style},onDragEnd:()=>{fe(!1),je(null),be.current=null},onPointerDown:De=>{Gn||!gt||(_r.current=new Date,kr(Ht.current),De.target.setPointerCapture(De.pointerId),De.target.tagName!=="BUTTON"&&(fe(!0),be.current={x:De.clientX,y:De.clientY}))},onPointerUp:()=>{var De,Ke,We,rt;if(qe||!gt)return;be.current=null;let ot=Number(((De=Ct.current)==null?void 0:De.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),Nt=Number(((Ke=Ct.current)==null?void 0:Ke.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),Tt=new Date().getTime()-((We=_r.current)==null?void 0:We.getTime()),Oe=we==="x"?ot:Nt,Ve=Math.abs(Oe)/Tt;if(Math.abs(Oe)>=sk||Ve>.11){kr(Ht.current),(rt=y.onDismiss)==null||rt.call(y,y),Be(we==="x"?ot>0?"right":"left":Nt>0?"down":"up"),Dt(),vt(!0),un(!1);return}fe(!1),je(null)},onPointerMove:De=>{var Ke,We,rt,ot;if(!be.current||!gt||((Ke=window.getSelection())==null?void 0:Ke.toString().length)>0)return;let Nt=De.clientY-be.current.y,Tt=De.clientX-be.current.x,Oe=(We=e.swipeDirections)!=null?We:uk(Ee);!we&&(Math.abs(Tt)>1||Math.abs(Nt)>1)&&je(Math.abs(Tt)>Math.abs(Nt)?"x":"y");let Ve={x:0,y:0};we==="y"?(Oe.includes("top")||Oe.includes("bottom"))&&(Oe.includes("top")&&Nt<0||Oe.includes("bottom")&&Nt>0)&&(Ve.y=Nt):we==="x"&&(Oe.includes("left")||Oe.includes("right"))&&(Oe.includes("left")&&Tt<0||Oe.includes("right")&&Tt>0)&&(Ve.x=Tt),(Math.abs(Ve.x)>0||Math.abs(Ve.y)>0)&&un(!0),(rt=Ct.current)==null||rt.style.setProperty("--swipe-amount-x",`${Ve.x}px`),(ot=Ct.current)==null||ot.style.setProperty("--swipe-amount-y",`${Ve.y}px`)}},Wn&&!y.jsx?oe.createElement("button",{"aria-label":Ce,"data-disabled":Gn,"data-close-button":!0,onClick:Gn||!gt?()=>{}:()=>{var De;Dt(),(De=y.onDismiss)==null||De.call(y,y)},className:Lt(K?.closeButton,(o=y?.classNames)==null?void 0:o.closeButton)},(a=ge?.close)!=null?a:VC):null,y.jsx||m.isValidElement(y.title)?y.jsx?y.jsx:typeof y.title=="function"?y.title():y.title:oe.createElement(oe.Fragment,null,tt||y.icon||y.promise?oe.createElement("div",{"data-icon":"",className:Lt(K?.icon,(i=y?.classNames)==null?void 0:i.icon)},y.promise||y.type==="loading"&&!y.icon?y.icon||ho():null,y.type!=="loading"?y.icon||ge?.[tt]||zC(tt):null):null,oe.createElement("div",{"data-content":"",className:Lt(K?.content,(l=y?.classNames)==null?void 0:l.content)},oe.createElement("div",{"data-title":"",className:Lt(K?.title,(d=y?.classNames)==null?void 0:d.title)},typeof y.title=="function"?y.title():y.title),y.description?oe.createElement("div",{"data-description":"",className:Lt(me,Mn,K?.description,(f=y?.classNames)==null?void 0:f.description)},typeof y.description=="function"?y.description():y.description):null),m.isValidElement(y.cancel)?y.cancel:y.cancel&&zo(y.cancel)?oe.createElement("button",{"data-button":!0,"data-cancel":!0,style:y.cancelButtonStyle||ie,onClick:De=>{var Ke,We;zo(y.cancel)&&gt&&((We=(Ke=y.cancel).onClick)==null||We.call(Ke,De),Dt())},className:Lt(K?.cancelButton,(p=y?.classNames)==null?void 0:p.cancelButton)},y.cancel.label):null,m.isValidElement(y.action)?y.action:y.action&&zo(y.action)?oe.createElement("button",{"data-button":!0,"data-action":!0,style:y.actionButtonStyle||Y,onClick:De=>{var Ke,We;zo(y.action)&&((We=(Ke=y.action).onClick)==null||We.call(Ke,De),!De.defaultPrevented&&Dt())},className:Lt(K?.actionButton,(b=y?.classNames)==null?void 0:b.actionButton)},y.action.label):null))};function pl(){if(typeof window>"u"||typeof document>"u")return"ltr";let e=document.documentElement.getAttribute("dir");return e==="auto"||!e?window.getComputedStyle(document.documentElement).direction:e}function ck(e,t){let n={};return[e,t].forEach((r,o)=>{let a=o===1,i=a?"--mobile-offset":"--offset",l=a?rk:nk;function d(f){["top","right","bottom","left"].forEach(p=>{n[`${i}-${p}`]=typeof f=="number"?`${f}px`:f})}typeof r=="number"||typeof r=="string"?d(r):typeof r=="object"?["top","right","bottom","left"].forEach(f=>{r[f]===void 0?n[`${i}-${f}`]=l:n[`${i}-${f}`]=typeof r[f]=="number"?`${r[f]}px`:r[f]}):d(l)}),n}var dk=m.forwardRef(function(e,t){let{invert:n,position:r="bottom-right",hotkey:o=["altKey","KeyT"],expand:a,closeButton:i,className:l,offset:d,mobileOffset:f,theme:p="light",richColors:b,duration:v,style:y,visibleToasts:C=tk,toastOptions:k,dir:A=pl(),gap:j=ak,loadingIcon:_,icons:S,containerAriaLabel:D="Notifications",pauseWhenPageIsHidden:I}=e,[M,F]=oe.useState([]),H=oe.useMemo(()=>Array.from(new Set([r].concat(M.filter(Se=>Se.position).map(Se=>Se.position)))),[M,r]),[Z,ie]=oe.useState([]),[Y,Q]=oe.useState(!1),[me,_e]=oe.useState(!1),[Ee,xe]=oe.useState(p!=="system"?p:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),Ne=oe.useRef(null),Ae=o.join("+").replace(/Key/g,"").replace(/Digit/g,""),K=oe.useRef(null),ge=oe.useRef(!1),Ce=oe.useCallback(Se=>{F(we=>{var je;return(je=we.find(Fe=>Fe.id===Se.id))!=null&&je.delete||bt.dismiss(Se.id),we.filter(({id:Fe})=>Fe!==Se.id)})},[]);return oe.useEffect(()=>bt.subscribe(Se=>{if(Se.dismiss){F(we=>we.map(je=>je.id===Se.id?{...je,delete:!0}:je));return}setTimeout(()=>{Dp.flushSync(()=>{F(we=>{let je=we.findIndex(Fe=>Fe.id===Se.id);return je!==-1?[...we.slice(0,je),{...we[je],...Se},...we.slice(je+1)]:[Se,...we]})})})}),[]),oe.useEffect(()=>{if(p!=="system"){xe(p);return}if(p==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?xe("dark"):xe("light")),typeof window>"u")return;let Se=window.matchMedia("(prefers-color-scheme: dark)");try{Se.addEventListener("change",({matches:we})=>{xe(we?"dark":"light")})}catch{Se.addListener(({matches:je})=>{try{xe(je?"dark":"light")}catch(Fe){console.error(Fe)}})}},[p]),oe.useEffect(()=>{M.length<=1&&Q(!1)},[M]),oe.useEffect(()=>{let Se=we=>{var je,Fe;o.every(Be=>we[Be]||we.code===Be)&&(Q(!0),(je=Ne.current)==null||je.focus()),we.code==="Escape"&&(document.activeElement===Ne.current||(Fe=Ne.current)!=null&&Fe.contains(document.activeElement))&&Q(!1)};return document.addEventListener("keydown",Se),()=>document.removeEventListener("keydown",Se)},[o]),oe.useEffect(()=>{if(Ne.current)return()=>{K.current&&(K.current.focus({preventScroll:!0}),K.current=null,ge.current=!1)}},[Ne.current]),oe.createElement("section",{ref:t,"aria-label":`${D} ${Ae}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},H.map((Se,we)=>{var je;let[Fe,Be]=Se.split("-");return M.length?oe.createElement("ol",{key:Se,dir:A==="auto"?pl():A,tabIndex:-1,ref:Ne,className:l,"data-sonner-toaster":!0,"data-theme":Ee,"data-y-position":Fe,"data-lifted":Y&&M.length>1&&!a,"data-x-position":Be,style:{"--front-toast-height":`${((je=Z[0])==null?void 0:je.height)||0}px`,"--width":`${ok}px`,"--gap":`${j}px`,...y,...ck(d,f)},onBlur:ee=>{ge.current&&!ee.currentTarget.contains(ee.relatedTarget)&&(ge.current=!1,K.current&&(K.current.focus({preventScroll:!0}),K.current=null))},onFocus:ee=>{ee.target instanceof HTMLElement&&ee.target.dataset.dismissible==="false"||ge.current||(ge.current=!0,K.current=ee.relatedTarget)},onMouseEnter:()=>Q(!0),onMouseMove:()=>Q(!0),onMouseLeave:()=>{me||Q(!1)},onDragEnd:()=>Q(!1),onPointerDown:ee=>{ee.target instanceof HTMLElement&&ee.target.dataset.dismissible==="false"||_e(!0)},onPointerUp:()=>_e(!1)},M.filter(ee=>!ee.position&&we===0||ee.position===Se).map((ee,se)=>{var J,Ie;return oe.createElement(lk,{key:ee.id,icons:S,index:se,toast:ee,defaultRichColors:b,duration:(J=k?.duration)!=null?J:v,className:k?.className,descriptionClassName:k?.descriptionClassName,invert:n,visibleToasts:C,closeButton:(Ie=k?.closeButton)!=null?Ie:i,interacting:me,position:Se,style:k?.style,unstyled:k?.unstyled,classNames:k?.classNames,cancelButtonStyle:k?.cancelButtonStyle,actionButtonStyle:k?.actionButtonStyle,removeToast:Ce,toasts:M.filter(ve=>ve.position==ee.position),heights:Z.filter(ve=>ve.position==ee.position),setHeights:ie,expandByDefault:a,gap:j,loadingIcon:_,expanded:Y,pauseWhenPageIsHidden:I,swipeDirections:e.swipeDirections})})):null}))});const fk=({...e})=>u.jsx(dk,{theme:"light",className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...e}),Li=m.forwardRef(({className:e,...t},n)=>u.jsx("div",{ref:n,className:te("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));Li.displayName="Card";const Zh=m.forwardRef(({className:e,...t},n)=>u.jsx("div",{ref:n,className:te("flex flex-col space-y-1.5 p-6",e),...t}));Zh.displayName="CardHeader";const Xh=m.forwardRef(({className:e,...t},n)=>u.jsx("div",{ref:n,className:te("text-2xl font-semibold leading-none tracking-tight",e),...t}));Xh.displayName="CardTitle";const Jh=m.forwardRef(({className:e,...t},n)=>u.jsx("div",{ref:n,className:te("text-sm text-muted-foreground",e),...t}));Jh.displayName="CardDescription";const zi=m.forwardRef(({className:e,...t},n)=>u.jsx("div",{ref:n,className:te("p-6 pt-0",e),...t}));zi.displayName="CardContent";const hk=m.forwardRef(({className:e,...t},n)=>u.jsx("div",{ref:n,className:te("flex items-center p-6 pt-0",e),...t}));hk.displayName="CardFooter";function pk({open:e,onOpenChange:t}){const[n,r]=m.useState({user:null,session:null,loading:!1,error:null}),[o,a]=m.useState("main"),[i,l]=m.useState(!1),[d,f]=m.useState({email:"",password:"",confirmPassword:"",name:""}),[p,b]=m.useState({}),[v,y]=m.useState(!1);m.useEffect(()=>Et.onAuthStateChange(r),[]);const C=()=>{f({email:"",password:"",confirmPassword:"",name:""}),b({}),y(!1),l(!1)},k=Y=>{const Q={};return(Y==="email-login"||Y==="email-signup"||Y==="forgot-password")&&(d.email?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(d.email)||(Q.email="è¯·è¾å¥ææçé®ç®±å°å"):Q.email="è¯·è¾å¥é®ç®±å°å"),(Y==="email-login"||Y==="email-signup")&&(d.password?d.password.length<6&&(Q.password="å¯ç è³å°éè¦6ä¸ªå­ç¬¦"):Q.password="è¯·è¾å¥å¯ç "),Y==="email-signup"&&(d.name||(Q.name="è¯·è¾å¥å§å"),d.password!==d.confirmPassword&&(Q.confirmPassword="ä¸¤æ¬¡è¾å¥çå¯ç ä¸ä¸è´")),b(Q),Object.keys(Q).length===0},A=async()=>{y(!0);const{error:Y}=await Et.signInWithGitHub();Y&&console.error("GitHubç»å½å¤±è´¥:",Y),y(!1)},j=async()=>{if(!k("email-login"))return;y(!0);const{error:Y}=await Et.signInWithEmail(d.email,d.password);Y?b({general:Y.message}):(t(!1),C(),a("main")),y(!1)},_=async()=>{if(!k("email-signup"))return;y(!0);const{error:Y}=await Et.signUpWithEmail(d.email,d.password,{name:d.name});Y?b({general:Y.message}):a("check-email"),y(!1)},S=async()=>{if(!k("forgot-password"))return;y(!0);const{error:Y}=await Et.resetPassword(d.email);Y?b({general:Y.message}):a("check-email"),y(!1)},D=async()=>{const{error:Y}=await Et.signOut();Y&&console.error("ç»åºå¤±è´¥:",Y)},I=async()=>{await Ze.performFullSync()};if(n.user)return u.jsx(qn,{open:e,onOpenChange:t,children:u.jsx(kn,{className:"sm:max-w-md border-0 shadow-2xl",children:u.jsxs("div",{className:"space-y-6 p-2",children:[u.jsx(Li,{className:"border-0 bg-gradient-to-br from-blue-50 to-indigo-50 dark:from-blue-950/20 dark:to-indigo-950/20",children:u.jsx(zi,{className:"p-6",children:u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsxs("div",{className:"relative",children:[u.jsx(Sf,{user:n.user,size:"lg",className:"h-16 w-16 shadow-lg",showHoverEffect:!1}),u.jsx("div",{className:"absolute -bottom-1 -right-1 h-5 w-5 bg-green-500 rounded-full border-2 border-white"})]}),u.jsxs("div",{className:"flex-1",children:[u.jsx("h3",{className:"font-semibold text-lg",children:n.user.username||"ç¨æ·"}),u.jsx("p",{className:"text-sm text-muted-foreground",children:n.user.email}),u.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[u.jsx(Su,{className:"h-3 w-3 text-green-500"}),u.jsx("span",{className:"text-xs text-green-600",children:"äºç«¯åæ­¥å·²å¯ç¨"})]})]})]})})}),u.jsxs("div",{className:"space-y-3",children:[u.jsxs(ke,{onClick:I,variant:"outline",className:"w-full h-12 rounded-2xl border-2 hover:bg-blue-50 transition-all duration-200",disabled:n.loading,children:[n.loading?u.jsx(Lr,{className:"h-5 w-5 mr-2 animate-spin"}):u.jsx(Su,{className:"h-5 w-5 mr-2 text-blue-500"}),"ç«å³åæ­¥æ°æ®"]}),u.jsx(ke,{onClick:D,variant:"ghost",className:"w-full h-12 rounded-2xl hover:bg-red-50 hover:text-red-600 transition-all duration-200",disabled:n.loading,children:"éåºç»å½"})]})]})})});const M=()=>u.jsxs("div",{className:"space-y-6 p-2",children:[u.jsxs("div",{className:"text-center space-y-2",children:[u.jsx("h2",{className:"text-2xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:"æ¬¢è¿ä½¿ç¨ CardAll"}),u.jsx("p",{className:"text-muted-foreground",children:"éæ©æ¨çç»å½æ¹å¼"})]}),u.jsxs(ke,{onClick:A,disabled:v,className:"w-full h-14 rounded-2xl bg-gray-900 hover:bg-gray-800 text-white shadow-lg transition-all duration-200 transform hover:scale-[1.02]",size:"lg",children:[v?u.jsx(Lr,{className:"h-5 w-5 mr-3 animate-spin"}):u.jsx(mg,{className:"h-5 w-5 mr-3"}),"ä½¿ç¨ GitHub ç»å½"]}),u.jsxs("div",{className:"relative",children:[u.jsx("div",{className:"absolute inset-0 flex items-center",children:u.jsx("span",{className:"w-full border-t border-gray-200"})}),u.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:u.jsx("span",{className:"bg-background px-4 text-muted-foreground",children:"æ"})})]}),u.jsxs("div",{className:"space-y-3",children:[u.jsxs(ke,{onClick:()=>a("email-login"),variant:"outline",className:"w-full h-14 rounded-2xl border-2 hover:bg-blue-50 transition-all duration-200 transform hover:scale-[1.02]",size:"lg",children:[u.jsx(zr,{className:"h-5 w-5 mr-3 text-blue-500"}),"ä½¿ç¨é®ç®±ç»å½"]}),u.jsxs(ke,{onClick:()=>a("email-signup"),variant:"ghost",className:"w-full h-12 rounded-2xl hover:bg-green-50 hover:text-green-600 transition-all duration-200",children:[u.jsx(Du,{className:"h-4 w-4 mr-2"}),"åå»ºæ°è´¦æ·"]})]}),u.jsxs("div",{className:"text-xs text-muted-foreground text-center space-y-1 pt-4",children:[u.jsx("p",{children:"ç»å½åå¯äº«åäºç«¯åæ­¥åè½"}),u.jsx("p",{children:"å³ä½¿ä¸ç»å½ä¹å¯æ­£å¸¸ä½¿ç¨æ¬å°åè½"})]})]}),F=()=>u.jsxs("div",{className:"space-y-6 p-2",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx(ke,{variant:"ghost",size:"sm",onClick:()=>a("main"),className:"rounded-full p-2",children:u.jsx(es,{className:"h-4 w-4"})}),u.jsx("h2",{className:"text-xl font-semibold",children:"é®ç®±ç»å½"})]}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"space-y-2",children:[u.jsx(St,{htmlFor:"email",children:"é®ç®±å°å"}),u.jsxs("div",{className:"relative",children:[u.jsx(zr,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),u.jsx(_t,{id:"email",type:"email",placeholder:"è¾å¥æ¨çé®ç®±å°å",value:d.email,onChange:Y=>f(Q=>({...Q,email:Y.target.value})),className:"pl-10 h-12 rounded-2xl border-2"})]}),p.email&&u.jsxs("p",{className:"text-sm text-red-500 flex items-center gap-1",children:[u.jsx(zt,{className:"h-3 w-3"}),p.email]})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsx(St,{htmlFor:"password",children:"å¯ç "}),u.jsxs("div",{className:"relative",children:[u.jsx(ts,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),u.jsx(_t,{id:"password",type:i?"text":"password",placeholder:"è¾å¥æ¨çå¯ç ",value:d.password,onChange:Y=>f(Q=>({...Q,password:Y.target.value})),className:"pl-10 pr-10 h-12 rounded-2xl border-2"}),u.jsx(ke,{type:"button",variant:"ghost",size:"sm",className:"absolute right-1 top-1 h-10 w-10 rounded-xl",onClick:()=>l(!i),children:i?u.jsx(_s,{className:"h-4 w-4"}):u.jsx(Ss,{className:"h-4 w-4"})})]}),p.password&&u.jsxs("p",{className:"text-sm text-red-500 flex items-center gap-1",children:[u.jsx(zt,{className:"h-3 w-3"}),p.password]})]}),u.jsx("div",{className:"text-right",children:u.jsx(ke,{variant:"link",size:"sm",onClick:()=>a("forgot-password"),className:"text-blue-600 hover:text-blue-700 p-0 h-auto",children:"å¿è®°å¯ç ï¼"})}),p.general&&u.jsxs("div",{className:"text-sm text-red-500 text-center bg-red-50 p-3 rounded-2xl flex items-center justify-center gap-2",children:[u.jsx(zt,{className:"h-4 w-4"}),p.general]}),u.jsxs(ke,{onClick:j,disabled:v,className:"w-full h-12 rounded-2xl bg-blue-600 hover:bg-blue-700 transition-all duration-200",children:[v?u.jsx(Lr,{className:"h-4 w-4 mr-2 animate-spin"}):null,"ç»å½"]})]})]}),H=()=>u.jsxs("div",{className:"space-y-6 p-2",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx(ke,{variant:"ghost",size:"sm",onClick:()=>a("main"),className:"rounded-full p-2",children:u.jsx(es,{className:"h-4 w-4"})}),u.jsx("h2",{className:"text-xl font-semibold",children:"åå»ºè´¦æ·"})]}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"space-y-2",children:[u.jsx(St,{htmlFor:"name",children:"å§å"}),u.jsxs("div",{className:"relative",children:[u.jsx(Du,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),u.jsx(_t,{id:"name",type:"text",placeholder:"è¾å¥æ¨çå§å",value:d.name,onChange:Y=>f(Q=>({...Q,name:Y.target.value})),className:"pl-10 h-12 rounded-2xl border-2"})]}),p.name&&u.jsxs("p",{className:"text-sm text-red-500 flex items-center gap-1",children:[u.jsx(zt,{className:"h-3 w-3"}),p.name]})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsx(St,{htmlFor:"signup-email",children:"é®ç®±å°å"}),u.jsxs("div",{className:"relative",children:[u.jsx(zr,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),u.jsx(_t,{id:"signup-email",type:"email",placeholder:"è¾å¥æ¨çé®ç®±å°å",value:d.email,onChange:Y=>f(Q=>({...Q,email:Y.target.value})),className:"pl-10 h-12 rounded-2xl border-2"})]}),p.email&&u.jsxs("p",{className:"text-sm text-red-500 flex items-center gap-1",children:[u.jsx(zt,{className:"h-3 w-3"}),p.email]})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsx(St,{htmlFor:"signup-password",children:"å¯ç "}),u.jsxs("div",{className:"relative",children:[u.jsx(ts,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),u.jsx(_t,{id:"signup-password",type:i?"text":"password",placeholder:"è®¾ç½®æ¨çå¯ç ï¼è³å°6ä¸ªå­ç¬¦ï¼",value:d.password,onChange:Y=>f(Q=>({...Q,password:Y.target.value})),className:"pl-10 pr-10 h-12 rounded-2xl border-2"}),u.jsx(ke,{type:"button",variant:"ghost",size:"sm",className:"absolute right-1 top-1 h-10 w-10 rounded-xl",onClick:()=>l(!i),children:i?u.jsx(_s,{className:"h-4 w-4"}):u.jsx(Ss,{className:"h-4 w-4"})})]}),p.password&&u.jsxs("p",{className:"text-sm text-red-500 flex items-center gap-1",children:[u.jsx(zt,{className:"h-3 w-3"}),p.password]})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsx(St,{htmlFor:"confirm-password",children:"ç¡®è®¤å¯ç "}),u.jsxs("div",{className:"relative",children:[u.jsx(ts,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),u.jsx(_t,{id:"confirm-password",type:i?"text":"password",placeholder:"åæ¬¡è¾å¥å¯ç ",value:d.confirmPassword,onChange:Y=>f(Q=>({...Q,confirmPassword:Y.target.value})),className:"pl-10 h-12 rounded-2xl border-2"})]}),p.confirmPassword&&u.jsxs("p",{className:"text-sm text-red-500 flex items-center gap-1",children:[u.jsx(zt,{className:"h-3 w-3"}),p.confirmPassword]})]}),p.general&&u.jsxs("div",{className:"text-sm text-red-500 text-center bg-red-50 p-3 rounded-2xl flex items-center justify-center gap-2",children:[u.jsx(zt,{className:"h-4 w-4"}),p.general]}),u.jsxs(ke,{onClick:_,disabled:v,className:"w-full h-12 rounded-2xl bg-green-600 hover:bg-green-700 transition-all duration-200",children:[v?u.jsx(Lr,{className:"h-4 w-4 mr-2 animate-spin"}):null,"åå»ºè´¦æ·"]}),u.jsx("div",{className:"text-xs text-muted-foreground text-center",children:u.jsx("p",{children:"æ³¨åå³è¡¨ç¤ºæ¨åææä»¬çæå¡æ¡æ¬¾åéç§æ¿ç­"})})]})]}),Z=()=>u.jsxs("div",{className:"space-y-6 p-2",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx(ke,{variant:"ghost",size:"sm",onClick:()=>a("email-login"),className:"rounded-full p-2",children:u.jsx(es,{className:"h-4 w-4"})}),u.jsx("h2",{className:"text-xl font-semibold",children:"éç½®å¯ç "})]}),u.jsx("div",{className:"text-center space-y-2",children:u.jsx("p",{className:"text-muted-foreground",children:"è¾å¥æ¨çé®ç®±å°åï¼æä»¬å°åééç½®å¯ç çé¾æ¥"})}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"space-y-2",children:[u.jsx(St,{htmlFor:"reset-email",children:"é®ç®±å°å"}),u.jsxs("div",{className:"relative",children:[u.jsx(zr,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),u.jsx(_t,{id:"reset-email",type:"email",placeholder:"è¾å¥æ¨çé®ç®±å°å",value:d.email,onChange:Y=>f(Q=>({...Q,email:Y.target.value})),className:"pl-10 h-12 rounded-2xl border-2"})]}),p.email&&u.jsxs("p",{className:"text-sm text-red-500 flex items-center gap-1",children:[u.jsx(zt,{className:"h-3 w-3"}),p.email]})]}),p.general&&u.jsxs("div",{className:"text-sm text-red-500 text-center bg-red-50 p-3 rounded-2xl flex items-center justify-center gap-2",children:[u.jsx(zt,{className:"h-4 w-4"}),p.general]}),u.jsxs(ke,{onClick:S,disabled:v,className:"w-full h-12 rounded-2xl bg-blue-600 hover:bg-blue-700 transition-all duration-200",children:[v?u.jsx(Lr,{className:"h-4 w-4 mr-2 animate-spin"}):null,"åééç½®é¾æ¥"]})]})]}),ie=()=>u.jsxs("div",{className:"space-y-6 p-2 text-center",children:[u.jsx("div",{className:"flex justify-center",children:u.jsx("div",{className:"h-16 w-16 bg-blue-100 rounded-full flex items-center justify-center",children:u.jsx(zr,{className:"h-8 w-8 text-blue-600"})})}),u.jsxs("div",{className:"space-y-2",children:[u.jsx("h2",{className:"text-xl font-semibold",children:"æ£æ¥æ¨çé®ç®±"}),u.jsxs("p",{className:"text-muted-foreground",children:["æä»¬å·²å ",u.jsx("span",{className:"font-medium",children:d.email})," åéäºä¸å°é®ä»¶"]}),u.jsxs("p",{className:"text-sm text-muted-foreground",children:["è¯·ç¹å»é®ä»¶ä¸­çé¾æ¥æ¥å®æ",o==="check-email"?"è´¦æ·æ¿æ´»":"å¯ç éç½®"]})]}),u.jsx(ke,{onClick:()=>{a("main"),C()},variant:"outline",className:"w-full h-12 rounded-2xl border-2",children:"è¿åç»å½"})]});return u.jsx(qn,{open:e,onOpenChange:Y=>{t(Y),Y||(a("main"),C())},children:u.jsxs(kn,{className:"sm:max-w-md border-0 shadow-2xl rounded-3xl",children:[o==="main"&&M(),o==="email-login"&&F(),o==="email-signup"&&H(),o==="forgot-password"&&Z(),o==="check-email"&&ie()]})})}const mk=({onClose:e})=>{const[t,n]=m.useState(null),[r,o]=m.useState(!1),[a,i]=m.useState(!1),[l,d]=m.useState(navigator.onLine);m.useEffect(()=>{const b=()=>{window.matchMedia("(display-mode: standalone)").matches&&i(!0)},v=A=>{A.preventDefault(),n(A),setTimeout(()=>{a||o(!0)},3e3)},y=()=>{i(!0),o(!1),n(null),console.log("PWA was installed")},C=()=>d(!0),k=()=>d(!1);return b(),window.addEventListener("beforeinstallprompt",v),window.addEventListener("appinstalled",y),window.addEventListener("online",C),window.addEventListener("offline",k),()=>{window.removeEventListener("beforeinstallprompt",v),window.removeEventListener("appinstalled",y),window.removeEventListener("online",C),window.removeEventListener("offline",k)}},[a]);const f=async()=>{if(t)try{await t.prompt();const{outcome:b}=await t.userChoice;console.log(b==="accepted"?"User accepted the install prompt":"User dismissed the install prompt"),n(null),o(!1)}catch(b){console.error("Error during installation:",b)}},p=()=>{o(!1),e?.()};return!r||a?null:u.jsx("div",{className:"fixed bottom-4 right-4 z-50 max-w-sm",children:u.jsxs(Li,{className:"shadow-lg border-2 border-blue-200 bg-gradient-to-br from-blue-50 to-white",children:[u.jsxs(Zh,{className:"pb-3",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(Ur,{className:"h-5 w-5 text-blue-600"}),u.jsx(Xh,{className:"text-lg",children:"å®è£ CardAll"})]}),u.jsx(ke,{variant:"ghost",size:"sm",onClick:p,className:"h-6 w-6 p-0",children:u.jsx(jn,{className:"h-4 w-4"})})]}),u.jsx(Jh,{children:"å° CardAll å®è£å°æ¨çè®¾å¤ä¸ï¼äº«åæ´å¥½çä½éª"})]}),u.jsxs(zi,{className:"space-y-4",children:[u.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[u.jsxs("div",{className:"flex items-center gap-2 text-green-600",children:[l?u.jsx(Ig,{className:"h-4 w-4"}):u.jsx(Mg,{className:"h-4 w-4"}),u.jsx("span",{children:l?"å¨çº¿ä½¿ç¨":"ç¦»çº¿å¯ç¨"})]}),u.jsxs("div",{className:"flex items-center gap-2 text-blue-600",children:[u.jsx(Sg,{className:"h-4 w-4"}),u.jsx("span",{children:"ç§»å¨ä¼å"})]}),u.jsxs("div",{className:"flex items-center gap-2 text-purple-600",children:[u.jsx(js,{className:"h-4 w-4"}),u.jsx("span",{children:"æ¡é¢åºç¨"})]}),u.jsxs("div",{className:"flex items-center gap-2 text-orange-600",children:[u.jsx(Ur,{className:"h-4 w-4"}),u.jsx("span",{children:"å¿«éå¯å¨"})]})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsx("h4",{className:"font-medium text-sm",children:"å®è£åæ¨å°è·å¾ï¼"}),u.jsxs("ul",{className:"text-xs text-gray-600 space-y-1",children:[u.jsx("li",{children:"â¢ å®å¨ç¦»çº¿åè½"}),u.jsx("li",{children:"â¢ æ´å¿«çå è½½éåº¦"}),u.jsx("li",{children:"â¢ æ¡é¢å¿«æ·æ¹å¼"}),u.jsx("li",{children:"â¢ æ¨ééç¥æ¯æ"})]})]}),u.jsxs("div",{className:"flex gap-2",children:[u.jsxs(ke,{onClick:f,className:"flex-1 bg-blue-600 hover:bg-blue-700",disabled:!t,children:[u.jsx(Ur,{className:"h-4 w-4 mr-2"}),"ç«å³å®è£"]}),u.jsx(ke,{variant:"outline",onClick:p,className:"px-3",children:"ç¨å"})]})]})]})})};function gk(){const{isOpen:e,closeModal:t}=df();return u.jsxs("div",{className:"min-h-screen bg-background",children:[u.jsx(lm,{children:u.jsx(Kv,{children:u.jsx(Vv,{children:u.jsx(RC,{})})})}),u.jsx(mk,{}),u.jsx(pk,{open:e,onOpenChange:t}),u.jsx(fk,{})]})}function ml(){return u.jsx(LC,{defaultTheme:"light",storageKey:"cardall-theme",children:u.jsx(Qv,{children:u.jsx(gk,{})})})}const xs={highContrast:!1,reducedMotion:!1,largeText:!1,screenReader:!1,keyboardOnly:!1,focusVisible:!0,announcements:!0,colorBlindSupport:!1};function bk(){const[e,t]=m.useState(xs),[n,r]=m.useState(!1),o=m.useRef(null);m.useEffect(()=>{try{const f=localStorage.getItem("accessibility-settings");if(f){const v=JSON.parse(f);t({...xs,...v})}const p=window.matchMedia("(prefers-reduced-motion: reduce)").matches,b=window.matchMedia("(prefers-contrast: high)").matches;p&&t(v=>({...v,reducedMotion:!0})),b&&t(v=>({...v,highContrast:!0})),r(!0)}catch(f){console.error("Failed to load accessibility settings:",f),r(!0)}},[]),m.useEffect(()=>{if(n)try{localStorage.setItem("accessibility-settings",JSON.stringify(e))}catch(f){console.error("Failed to save accessibility settings:",f)}},[e,n]),m.useEffect(()=>{if(!n)return;const f=document.documentElement;e.highContrast?f.classList.add("high-contrast"):f.classList.remove("high-contrast"),e.reducedMotion?f.classList.add("reduced-motion"):f.classList.remove("reduced-motion"),e.largeText?f.classList.add("large-text"):f.classList.remove("large-text"),e.colorBlindSupport?f.classList.add("color-blind"):f.classList.remove("color-blind"),e.focusVisible?f.classList.add("focus-visible"):f.classList.remove("focus-visible"),e.keyboardOnly?f.classList.add("keyboard-only"):f.classList.remove("keyboard-only"),e.screenReader?f.setAttribute("aria-live","polite"):f.removeAttribute("aria-live")},[e,n]);const a=m.useCallback((f,p)=>{t(b=>({...b,[f]:p})),d(`Accessibility setting ${f} ${p?"enabled":"disabled"}`)},[]),i=m.useCallback(f=>{t(p=>{const b=!p[f];return d(`Accessibility setting ${f} ${b?"enabled":"disabled"}`),{...p,[f]:b}})},[]),l=m.useCallback(()=>{t(xs),d("All accessibility settings reset to default")},[]);m.useEffect(()=>{const f=p=>{if(p.altKey)switch(p.key.toLowerCase()){case"h":p.preventDefault(),i("highContrast");break;case"r":p.preventDefault(),i("reducedMotion");break;case"l":p.preventDefault(),i("largeText");break;case"s":p.preventDefault(),i("screenReader");break;case"f":p.preventDefault(),i("focusVisible");break;case"a":p.preventDefault(),i("announcements");break;case"c":p.preventDefault(),i("colorBlindSupport");break;case"?":p.preventDefault(),d("Keyboard shortcuts: Alt+H (high contrast), Alt+R (reduced motion), Alt+L (large text), Alt+S (screen reader), Alt+F (focus visible), Alt+A (announcements), Alt+C (color blind), Alt+? (shortcuts)");break}};return document.addEventListener("keydown",f),()=>document.removeEventListener("keydown",f)},[i]),m.useEffect(()=>{const f=b=>{b.key==="Tab"&&(a("keyboardOnly",!0),document.removeEventListener("keydown",f))},p=()=>{a("keyboardOnly",!1)};return document.addEventListener("keydown",f),document.addEventListener("mousemove",p),()=>{document.removeEventListener("keydown",f),document.removeEventListener("mousemove",p)}},[a]);const d=m.useCallback(f=>{if(!e.announcements)return;o.current||(o.current=document.createElement("div"),o.current.setAttribute("aria-live","polite"),o.current.setAttribute("aria-atomic","true"),o.current.className="sr-only",document.body.appendChild(o.current));const p=document.createElement("div");p.textContent=f,o.current.appendChild(p),setTimeout(()=>{o.current?.contains(p)&&o.current.removeChild(p)},1e3)},[e.announcements]);return{settings:e,updateSetting:a,toggleSetting:i,resetSettings:l,announce:d,isInitialized:n}}const ep=m.createContext(void 0),xk=e=>{const t=bk();return oe.createElement(ep.Provider,{value:t},e.children)},yk=()=>{const e=m.useContext(ep);if(e===void 0)throw new Error("useAccessibilityContext must be used within an AccessibilityProvider");return e},vk=()=>yk();function wk({isOpen:e,onClose:t,title:n,children:r,className:o,size:a="md"}){const i=m.useRef(null),l=m.useRef(null);m.useEffect(()=>{if(e){l.current=document.activeElement,i.current?.focus(),document.body.style.overflow="hidden";const p=b=>{i.current&&!i.current.contains(b.target)&&(b.preventDefault(),i.current.focus())};return document.addEventListener("focus",p,!0),()=>{document.removeEventListener("focus",p,!0),document.body.style.overflow="",l.current?.focus()}}},[e]);const d=m.useCallback(p=>{p.key==="Escape"&&t()},[t]);if(!e)return null;const f={sm:"max-w-md",md:"max-w-lg",lg:"max-w-2xl",xl:"max-w-4xl"};return u.jsx("div",{className:"fixed inset-0 z-50 bg-black/50 backdrop-blur-sm",children:u.jsx("div",{className:"flex items-center justify-center min-h-screen p-4",children:u.jsxs("div",{ref:i,className:te("relative bg-background border border-border rounded-lg shadow-xl","animate-in fade-in-90 zoom-in-90",f[a],"w-full max-h-[90vh] overflow-y-auto",o),role:"dialog","aria-modal":"true","aria-labelledby":"modal-title",tabIndex:-1,onKeyDown:d,children:[u.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-border",children:[u.jsx("h2",{id:"modal-title",className:"text-lg font-semibold",children:n}),u.jsx(ke,{size:"sm",variant:"ghost",className:"h-8 w-8 p-0",onClick:t,"aria-label":"Close modal",children:u.jsx(jn,{className:"w-4 h-4"})})]}),u.jsx("div",{className:"p-6",children:r})]})})})}function Ck({className:e}){const{settings:t,toggleSetting:n,resetSettings:r}=vk(),[o,a]=m.useState(!1),[i,l]=m.useState(!1),d=[{key:"highContrast",label:"é«å¯¹æ¯åº¦",description:"æé«æå­åèæ¯çå¯¹æ¯åº¦",icon:t.highContrast?Ss:_s,shortcut:"Alt+H"},{key:"reducedMotion",label:"åå°å¨ç»",description:"åå°æç¦ç¨å¨ç»ææ",icon:t.reducedMotion?Pg:cc,shortcut:"Alt+R"},{key:"largeText",label:"å¤§å­ä½",description:"å¢å¤§å­ä½å¤§å°",icon:(t.largeText,Au),shortcut:"Alt+L"},{key:"screenReader",label:"å±å¹éè¯»å¨ä¼å",description:"ä¼åå±å¹éè¯»å¨ä½éª",icon:(t.screenReader,js),shortcut:"Alt+S"},{key:"focusVisible",label:"ç¦ç¹æç¤ºå¨",description:"æ¾ç¤ºé®çç¦ç¹ä½ç½®",icon:bg,shortcut:"Alt+F"},{key:"announcements",label:"è¯­é³å¬å",description:"å¯ç¨è¯­é³å¬ååè½",icon:t.announcements?Ng:Tg,shortcut:"Alt+A"},{key:"colorBlindSupport",label:"è²ç²åå¥½",description:"è²ç²åå¥½çéè²æ¹æ¡",icon:li,shortcut:"Alt+C"}],f=[{key:"Alt+H",description:"åæ¢é«å¯¹æ¯åº¦"},{key:"Alt+R",description:"åæ¢åå°å¨ç»"},{key:"Alt+L",description:"åæ¢å¤§å­ä½"},{key:"Alt+S",description:"åæ¢å±å¹éè¯»å¨ä¼å"},{key:"Alt+F",description:"åæ¢ç¦ç¹æç¤ºå¨"},{key:"Alt+A",description:"åæ¢è¯­é³å¬å"},{key:"Alt+C",description:"åæ¢è²ç²åå¥½"},{key:"Alt+?",description:"æ¾ç¤ºå¿«æ·é®å¸®å©"},{key:"Escape",description:"å³é­å¼¹çª"}];return u.jsxs(u.Fragment,{children:[u.jsx(ke,{size:"sm",variant:"ghost",className:te("fixed bottom-4 right-4 z-40 rounded-full w-12 h-12 shadow-lg","bg-primary text-primary-foreground hover:bg-primary/90"),onClick:()=>a(!0),"aria-label":"Open accessibility settings",title:"Open accessibility settings (Alt+?)",children:u.jsx(Cg,{className:"w-5 h-5"})}),u.jsx(wk,{isOpen:o,onClose:()=>a(!1),title:"å¯è®¿é®æ§è®¾ç½®",className:"max-w-2xl",children:u.jsxs("div",{className:"space-y-6",children:[u.jsx("div",{className:"text-sm text-muted-foreground",children:u.jsx("p",{children:"è¿äºè®¾ç½®å¯ä»¥å¸®å©æ¨æ ¹æ®èªå·±çéæ±èªå®ä¹åºç¨ç¨åºçå¯è®¿é®æ§ä½éªã ä½¿ç¨é®çå¿«æ·é®å¯ä»¥å¿«éåæ¢å¸¸ç¨åè½ã"})}),u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:d.map(p=>{const b=p.icon,v=t[p.key];return u.jsx("div",{className:te("p-4 border border-border rounded-lg transition-all duration-200","hover:shadow-sm cursor-pointer",v&&"border-primary bg-primary/5"),onClick:()=>n(p.key),role:"button",tabIndex:0,onKeyDown:y=>{(y.key==="Enter"||y.key===" ")&&(y.preventDefault(),n(p.key))},"aria-pressed":v,children:u.jsxs("div",{className:"flex items-start space-x-3",children:[u.jsx("div",{className:te("p-2 rounded-md",v?"bg-primary text-primary-foreground":"bg-muted"),children:u.jsx(b,{className:"w-4 h-4"})}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("h3",{className:"text-sm font-medium",children:p.label}),u.jsx("span",{className:"text-xs text-muted-foreground bg-muted px-2 py-1 rounded",children:p.shortcut})]}),u.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:p.description})]})]})},p.key)})}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("h3",{className:"text-sm font-medium",children:"é®çå¿«æ·é®"}),u.jsxs(ke,{size:"sm",variant:"outline",onClick:()=>l(!i),className:"text-xs",children:[u.jsx(cg,{className:"w-3 h-3 mr-1"}),i?"éè":"æ¾ç¤º"]})]}),i&&u.jsx("div",{className:"bg-muted/50 rounded-lg p-4",children:u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2 text-sm",children:f.map(p=>u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("kbd",{className:"bg-background border border-border rounded px-2 py-1 text-xs font-mono",children:p.key}),u.jsx("span",{className:"text-muted-foreground text-xs",children:p.description})]},p.key))})})]}),u.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-border",children:[u.jsxs(ke,{size:"sm",variant:"outline",onClick:r,className:"text-xs",children:[u.jsx(wg,{className:"w-3 h-3 mr-1"}),"éç½®è®¾ç½®"]}),u.jsx(ke,{size:"sm",onClick:()=>a(!1),className:"text-xs",children:"å®æè®¾ç½®"})]})]})})]})}const kk=()=>{const e=document.getElementById("root");e&&(e.innerHTML=`
      <div style="
        display: flex;
        justify-content: center;
        align-items: center;
        height: 100vh;
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        flex-direction: column;
      ">
        <div style="
          width: 50px;
          height: 50px;
          border: 3px solid rgba(255,255,255,0.3);
          border-top: 3px solid white;
          border-radius: 50%;
          animation: spin 1s linear infinite;
          margin-bottom: 20px;
        "></div>
        <h2 style="margin: 0; font-size: 24px; font-weight: 600;">CardAll</h2>
        <p style="margin: 10px 0 0 0; opacity: 0.8;">æ­£å¨åå§ååºç¨...</p>
        <style>
          @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
          }
        </style>
      </div>
    `)},_k=async()=>{kk();try{console.log("ð Starting app initialization..."),await he.open(),console.log("â Database initialized"),localStorage.getItem("cardall_needs_cleanup")==="true"&&(console.log("ð§¹ æ£æµå°éè¦æ¸çæ°æ®åº..."),await Ze.cleanupDatabaseData(),localStorage.removeItem("cardall_needs_cleanup")),Ze.setAuthService(Et),console.log("â Auth service connected to sync service"),Ze.restoreSyncQueue().then(()=>{console.log("â Sync service restored")}).catch(t=>{console.warn("â ï¸ Sync queue restore failed:",t),localStorage.setItem("cardall_needs_cleanup","true")}),Et.isAuthenticated()&&(console.log("ð User authenticated, starting full sync..."),Ze.performFullSync().then(()=>{console.log("â Full sync completed")}).catch(t=>{console.warn("â ï¸ Full sync failed:",t),localStorage.setItem("cardall_needs_cleanup","true")})),console.log("ð¨ Rendering application..."),qo.createRoot(document.getElementById("root")).render(u.jsx(oe.StrictMode,{children:u.jsxs(xk,{children:[u.jsx(ml,{}),u.jsx(Ck,{})]})})),console.log("ð Application started successfully!")}catch(e){console.error("â Failed to initialize app:",e),localStorage.setItem("cardall_needs_cleanup","true"),qo.createRoot(document.getElementById("root")).render(u.jsx(oe.StrictMode,{children:u.jsx(ml,{})})),setTimeout(()=>{console.warn("â ï¸ Some initialization steps failed, but app is running in fallback mode")},1e3)}};window.__CARDALL_INITIALIZED?console.warn("â ï¸ App already initialized, skipping..."):(window.__CARDALL_INITIALIZED=!0,_k());
